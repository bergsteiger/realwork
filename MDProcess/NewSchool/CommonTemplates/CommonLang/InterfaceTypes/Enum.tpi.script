////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//
// Модуль: "w:/MDProcess/CommonTemplates/CommonLang/InterfaceTypes/Enum.tpi"
// Генерация мета-шаблонов
// Generated from UML model, root element: <<MDAClass::Class>> MDProcess$Templates::CommonTemplates::CommonLang::InterfaceTypes::Enum
//
// Перечисление
// ---
// Значения перечисления определяются именами его атрибутов (без указания типа)
//
//
// Все права принадлежат ООО НПП "Гарант-Сервис".
//
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

//: Enum::Class
implementation @ <<Enum>>
//? Перечисление
//? Значения перечисления определяются именами его атрибутов (без указания типа)
//< *::Class,*::Category

//= InterfaceGeneratorWithJava::MDAGenerator
//= Генерация JavaScript::MDAGenerator

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
// Параметры стереотипа
//v +#-
// - типы видимости
//Y code_enum.gif
//L code_enum
//D
// - запрещена форвард-декларация
// Параметры визуализации
//$ C 240,230,210
//$ l 100,75,35
//$ f 100,75,35

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
// Пользовательские свойства

//p force usage:b=false ? явно определяет, что элемент будет кем-то использован (нужно для проверки)
//p register in scripts:tribool=undefined ? 

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
// Функции стереотипа

//%f _st_space_key
: st_space_key OBJECT IN %S
//	MDP
 'MDP'

//%f _wiki_up_print
; // st_space_key

: wiki_up_print OBJECT IN %S
//	%S#[inherited][{"%S{force usage}"!="%S{!force usage}"}%f_up_prefix(%S) *force usage* = *%S{force usage}* - явно определяет, что элемент будет кем-то использован (нужно для проверки)
 ?inherited
 if ( ( %S get_up ( 'force usage' ) ) %!= ( %S get_up_def ( 'force usage' ) ) ) then
 begin
  [%f] up_prefix %( %S )% ' *force usage* = *'
  %S get_up ( 'force usage' ) '* - явно определяет, что элемент будет кем-то использован (нужно для проверки)'
//	][{"%S{register in scripts}"!="%S{!register in scripts}"}%f_up_prefix(%S) *register in scripts* = *%S{register in scripts}*
 end // if
 if ( ( %S get_up ( 'register in scripts' ) ) %!= ( %S get_up_def ( 'register in scripts' ) ) ) then
 begin
  [%f] up_prefix %( %S )% ' *register in scripts* = *'
  %S get_up ( 'register in scripts' ) '*'
//	]
 end // if


////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
// Унаследованная реализация

// реализация абстрактного стереотипа Документация::MDAGenerator
// проверка ограничений накладываемых на элемент
//%t _constraint
; // wiki_up_print

<<transformator>> constraint OBJECT IN %S
//#UC START# *4704C0E30186for470F198F0000*
//c                              {}
//r {<{}{%PS=ServerLibrary}{C}>!=0&%f_to_lower(%PN)=%f_to_lower(%SN)}: {имя %SS, используемого в качестве серверного типа, не должно совпадать с именем родителя}
//r {%M{force usage}=false&%ax=false&%S{force usage}=false}: {%SS ни кем не используется}
//#UC END# *4704C0E30186for470F198F0000*
; // constraint


// реализация абстрактного стереотипа C++ интерфейсы и реализация::MDAGenerator
// генератор заголовочных файлов C++ (.h)
//+ h
<<generator>> h OBJECT IN %S
//#UC START# *47022C88029Ffor470F198F0000*
//	%f_docs(%S)\
 [%f] docs %( %S )% 
//	[#%S%f_open_ifdef()
 if NOT-EMPTY
 begin
  out_indent %S %f open_ifdef %( )% 
//	]#enum %SN {
 end // if
 NOP
 out_indent 'enum '
 %S |N ' {'
//	#	<{\n#\t, }[%S{children prefix}_]%CN[ // %f_str_replace(%CD,\n,%f_space(%C))]>
 out_indent '	'
 INTEGER VAR l_Counter l_Counter := 0
 for %S%C
 begin
  OBJECT IN %C
  if true then
  begin
   if ( l_Counter >0 ) then ( #13#10
   out_indent #9', ' )
   if NOT-EMPTY
   begin
    %S get_up ( 'children prefix' ) '_' 
   end // if
   NOP
   %C |N if NOT-EMPTY
   begin
    ' // '
    [%f] str_replace %( %C |D %, #13#10 %, [%f] space %( %C )% )% 
   end // if
   NOP

   ++! l_Counter
  end // if
 end // for C
//	#};[
 out_indent '};'
 if NOT-EMPTY
 begin
  #13#10

//	#%S%f_close_ifdef()]
  out_indent %S %f close_ifdef %( )% 
 end // if
 NOP
//#UC END# *47022C88029Ffor470F198F0000*
; // h


// реализация абстрактного стереотипа CORBA IDL::MDAGenerator
// генератор idl спецификаций (.idl)
//+ idl
<<generator>> idl OBJECT IN %S
//#UC START# *47022BBE0261for470F198F0000*
//	<#%FF
 INTEGER VAR l_Counter l_Counter := 0
 for %S%F
 begin
  OBJECT IN %F
  if true then
  begin
   out_indent %F |F 
//	>%f_docs(%S)\

   ++! l_Counter
  end // if
 end // for F
 [%f] docs %( %S )% 
//	#enum %SN {
 out_indent 'enum '
 %S |N ' {'
//	#	<{\n#\t, }%CN[ // %f_str_replace(%CD,\n,%f_space(%C))]>
 out_indent '	'
 INTEGER VAR l_Counter l_Counter := 0
 for %S%C
 begin
  OBJECT IN %C
  if true then
  begin
   if ( l_Counter >0 ) then ( #13#10
   out_indent #9', ' )
   %C |N if NOT-EMPTY
   begin
    ' // '
    [%f] str_replace %( %C |D %, #13#10 %, [%f] space %( %C )% )% 
   end // if
   NOP

   ++! l_Counter
  end // if
 end // for C
//	#};
 out_indent '};'
//#UC END# *47022BBE0261for470F198F0000*
; // idl


// реализация абстрактного стереотипа Delphi интерфейсы и реализация::MDAGenerator
// Реализация на Delphi(.pas)
//+ impl.pas
<<generator>> impl.pas OBJECT IN %S
//R  
//#UC START# *470F15B800CBfor470F198F0000*
//	[{%SV!=PublicAccess}[%f_with_gen_id(intf.pas,%SX)\n]]
 if ( ( %S |V ) %!= 'PublicAccess' ) then
 begin
  if NOT-EMPTY
  begin
   [%f] with_gen_id %( 'intf.pas' %, %S |X )% #13#10 
  end // if
  NOP
 end // if
//#UC END# *470F15B800CBfor470F198F0000*
; // impl.pas


// реализация абстрактного стереотипа Delphi интерфейсы и реализация::MDAGenerator
// Родные Delphi интерфейсы (.pas)
//+ intf.pas
<<generator>> intf.pas OBJECT IN %S
//R  
//#UC START# *470F1571031Cfor470F198F0000*
//R  
//	[{%f_exists_in_list(GENERATED_INTF,"%f_pas_TypeName(%S)")!=true}\
 if ( ( [%f] exists_in_list %( 'GENERATED_INTF' %, [%f] pas_TypeName %( %S )% )% ) %!=  true ) then
 begin
//	%f_add_to_list(GENERATED_INTF,"%f_pas_TypeName(%S)")\
  [%f] add_to_list %( 'GENERATED_INTF' %, [%f] pas_TypeName %( %S )% )% 
//	%f_pas_OpenType(%S)\
  [%f] pas_OpenType %( %S )% 
//	#%f_pas_TypeName(%S) = (\
  out_indent [%f] pas_TypeName %( %S )% ' = ('
//	[\n# \{* %SD \}]
  if NOT-EMPTY
  begin
   #13#10
   out_indent ' {* '
   %S |D ' }' 
  end // if
  NOP
//	#  <{\n#, }%C%f_pas_Prefix()%CN\
  out_indent '  '
  INTEGER VAR l_Counter l_Counter := 0
  for %S%C
  begin
   OBJECT IN %C
   if true then
   begin
    if ( l_Counter >0 ) then ( #13#10
    out_indent ', ' )
    %C %f pas_Prefix %( )% %C |N 
//	[{"%CD"!=""} // %f_str_replace(%CD,\n,%f_space(%C))]\
    if ( ( %C |D ) %!= '' ) then
    begin
     ' // '
     [%f] str_replace %( %C |D %, #13#10 %, [%f] space %( %C )% )% 
    end // if
//	>

    ++! l_Counter
   end // if
  end // for C
//	#);//%f_pas_TypeName(%S)]
  out_indent ');//'
  [%f] pas_TypeName %( %S )% 
 end // if
//#UC END# *470F1571031Cfor470F198F0000*
; // intf.pas


// реализация абстрактного стереотипа Java::MDAGenerator
// генератор классов, интерфейсов на java (.java)
//+ java
<<generator>> java OBJECT IN %S
//#UC START# *470321950119for470F198F0000*
//S class %SN;
//O [{%t_nested_scope_def(%P)=false&%f_is_server_type(%S)=false}%SN.java]
//	%f_output_constraint(%S)\
 [%f] output_constraint %( %S )% 
//	[{%f_is_server_type(%S)=false}[{%t_nested_scope_def(%P)=false}\
 if ( ( [%f] is_server_type %( %S )% ) %==  false ) then
 begin
  if ( ( [%t] nested_scope_def %( %P )% ) %==  false ) then
  begin
//	%f_header(%S)
   [%f] header %( %S )% 
//	package %f_dump_java_package(%S);
   'package '
   [%f] dump_java_package %( %S )% ';'
//	]
  end // if
//	#%t_visibility(%S,"%XU")[{%t_nested_scope_def(%P)=true}static ]%t_abstract_type(%S)enum %SN {
  out_indent [%t] visibility %( %S %, %X |U )% if ( ( [%t] nested_scope_def %( %P )% ) %==  true ) then
  begin
   'static ' 
  end // if
  [%t] abstract_type %( %S )% 'enum '
  %S |N ' {'
//	#	<{\n#\t, }%CN[ // %f_str_replace(%CD,\n,%f_space(%C))]>
  out_indent '	'
  INTEGER VAR l_Counter l_Counter := 0
  for %S%C
  begin
   OBJECT IN %C
   if true then
   begin
    if ( l_Counter >0 ) then ( #13#10
    out_indent #9', ' )
    %C |N if NOT-EMPTY
    begin
     ' // '
     [%f] str_replace %( %C |D %, #13#10 %, [%f] space %( %C )% )% 
    end // if
    NOP

    ++! l_Counter
   end // if
  end // for C
//	#} // %SN][{%f_is_server_type(%S)=false}\
  out_indent '} // '
  %S |N 
 end // if
 if ( ( [%f] is_server_type %( %S )% ) %==  false ) then
 begin
//	[{%t_nested_scope_def(%P)=false}
  if ( ( [%t] nested_scope_def %( %P )% ) %==  false ) then
  begin
   #13#10

//	%f_footer(%S)
   [%f] footer %( %S )% 
//	]]
  end // if
 end // if
//#UC END# *470321950119for470F198F0000*
; // java


// реализация абстрактного стереотипа Дельфи-DLL Адаптер::MDAGenerator
// Delphi интерфейсы для адаптера (.pas)
//+ pas
<<generator>> pas OBJECT IN %S
//#UC START# *470F152700FAfor470F198F0000*
//	[%f_pas_OpenType(%S)\n]\
 if NOT-EMPTY
 begin
  [%f] pas_OpenType %( %S )% #13#10 
 end // if
 NOP
//	%f_docs(%S)\
 [%f] docs %( %S )% 
//	#P%SN = ^T%SN;
 out_indent 'P'
 %S |N ' = ^T'
 %S |N ';'
//	#T%SN = (
 out_indent 'T'
 %S |N ' = ('
//	#	<{\n#\t, }%CN[ // %f_str_replace(%CD,\n,%f_space(%C))]>
 out_indent '	'
 INTEGER VAR l_Counter l_Counter := 0
 for %S%C
 begin
  OBJECT IN %C
  if true then
  begin
   if ( l_Counter >0 ) then ( #13#10
   out_indent #9', ' )
   %C |N if NOT-EMPTY
   begin
    ' // '
    [%f] str_replace %( %C |D %, #13#10 %, [%f] space %( %C )% )% 
   end // if
   NOP

   ++! l_Counter
  end // if
 end // for C
//	#);
 out_indent ');'
//#UC END# *470F152700FAfor470F198F0000*
; // pas


// реализация абстрактного стереотипа Документация::MDAGenerator
// Генерация модели в MDKnow
//+ wiki
<<generator>> wiki OBJECT IN %S
//#UC START# *46E6D4BB0339for470F198F0000*
//G %PU
//#UC END# *46E6D4BB0339for470F198F0000*
; // wiki


// перекрытие базового стереотипа ModelBuilding::MDAGenerator
// генератор построения виртуальных элементов модели - запускается до генерации конкретных
// артефактов
//+ spell
<<generator>> spell OBJECT IN %S
//#UC START# *4A41A13D03D5for470F198F0000*
//#UC END# *4A41A13D03D5for470F198F0000*
; // spell


////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
// Вложенные стереотипы

//: Enum::Class::Attribute
end. // <<Enum>>

implementation @ :: <<Enum>> <<Attribute>> ;
//? идентификаторы, составляющие множества
//= Delphi интерфейсы и реализация::MDAGenerator
//= InterfaceGenerator::MDAGenerator

// Параметры стереотипа
//v +
// - типы видимости
//Y code_attr.gif
//L code_attr
//T 
// - может не иметь "цели" (типа/результата)
//l a
// - возможные типы связи атрибута

// Генераторы
// Генерация модели в MDKnow
//+ wiki
<<generator>> wiki OBJECT IN %S
//#UC START# *46E6D4BB0339for470F1A0100DA*
//#UC END# *46E6D4BB0339for470F1A0100DA*
; // wiki


// генератор idl спецификаций (.idl)
//+ idl
<<generator>> idl OBJECT IN %S
//#UC START# *47022BBE0261for470F1A0100DA*
//#UC END# *47022BBE0261for470F1A0100DA*
; // idl


// генератор заголовочных файлов C++ (.h)
//+ h
<<generator>> h OBJECT IN %S
//#UC START# *47022C88029Ffor470F1A0100DA*
//#UC END# *47022C88029Ffor470F1A0100DA*
; // h


// генератор классов, интерфейсов на java (.java)
//+ java
<<generator>> java OBJECT IN %S
//#UC START# *470321950119for470F1A0100DA*
//#UC END# *470321950119for470F1A0100DA*
; // java


// Delphi интерфейсы для адаптера (.pas)
//+ pas
<<generator>> pas OBJECT IN %S
//#UC START# *470F152700FAfor470F1A0100DA*
//#UC END# *470F152700FAfor470F1A0100DA*
; // pas


// Родные Delphi интерфейсы (.pas)
//+ intf.pas
<<generator>> intf.pas OBJECT IN %S
//R  
//#UC START# *470F1571031Cfor470F1A0100DA*
//#UC END# *470F1571031Cfor470F1A0100DA*
; // intf.pas


// Реализация на Delphi(.pas)
//+ impl.pas
<<generator>> impl.pas OBJECT IN %S
//R  
//#UC START# *470F15B800CBfor470F1A0100DA*
//#UC END# *470F15B800CBfor470F1A0100DA*
; // impl.pas


// Функции стереотипа
//%f _st_space_key
: st_space_key OBJECT IN %S
//	MDP
 'MDP'

//%f _wiki_up_print
; // st_space_key

: wiki_up_print OBJECT IN %S
//	%S%[Delphi интерфейсы и реализация::MDAGenerator]f_wiki_up_print()
 call-inherited:: 'Delphi интерфейсы и реализация' wiki_up_print %( )%


////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
// Унаследованная реализация

// реализация абстрактного стереотипа Документация::MDAGenerator
// проверка ограничений накладываемых на элемент
//%t _constraint
; // wiki_up_print

<<transformator>> constraint OBJECT IN %S
//#UC START# *4704C0E30186for470F1A0100DA*
//c                                                                       {}
//r {<{}{%PS=ServerLibrary}{C}>!=0&%f_to_lower(%PN)=%f_to_lower(%SN)}:    {имя %SS не должно совпадать с именем %P%SS}
//#UC END# *4704C0E30186for470F1A0100DA*
; // constraint



////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

end. // :: <<Enum>> <<Attribute>> ;

