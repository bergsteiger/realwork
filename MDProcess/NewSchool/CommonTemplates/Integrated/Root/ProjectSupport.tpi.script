////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//
// Модуль: "w:/MDProcess/CommonTemplates/Integrated/Root/ProjectSupport.tpi"
// Генерация мета-шаблонов
// Generated from UML model, root element: <<MDAUtilityPack::Class>> MDProcess$Templates::CommonTemplates::Integrated::Root::ProjectSupport
//
// вспомогательные функции для генерации проекта
//
//
// Все права принадлежат ООО НПП "Гарант-Сервис".
//
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

// имеет ли элемент вложенные элементы использующие серверную часть
//f _has_tragets_with_server
: has_tragets_with_server OBJECT IN %S
//#UC START# *4715A4EE004E*
//	[{<{}{%f_use_server(%C)=true}{C}>!=0}{false}true]
 if ( 
  INTEGER VAR l_Counter l_Counter := 0
  for %S%C
  begin
   OBJECT IN %C
   if ( ( [%f] use_server %( %C )% ) %==  true ) then
   begin

    ++! l_Counter
   end // if
  end // for C
  l_Counter
  %!= 0 ) then
 begin
   true 
 end // if
 else
 begin
   false 
 end // else
//#UC END# *4715A4EE004E*
; // has_tragets_with_server


// имеет ли элемент вложенные элементы использующие НЕ серверную часть
//f _has_tragets_without_server
: has_tragets_without_server OBJECT IN %S
//#UC START# *4715A5180000*
//	[{<{}{%f_use_server(%C)=false}{C}>!=0}{false}true]
 if ( 
  INTEGER VAR l_Counter l_Counter := 0
  for %S%C
  begin
   OBJECT IN %C
   if ( ( [%f] use_server %( %C )% ) %==  false ) then
   begin

    ++! l_Counter
   end // if
  end // for C
  l_Counter
  %!= 0 ) then
 begin
   true 
 end // if
 else
 begin
   false 
 end // else
//#UC END# *4715A5180000*
; // has_tragets_without_server


// является ли элемент DLL - целью сборки
//f _is_dll_target
: is_dll_target OBJECT IN %S
//#UC START# *4715A56300DA*
//	[{%SS=ComTarget|%SS=AdapterTarget|%SS=DLL|%SS=ComDLL}{false}true]
 if ( ( %S |S ) %== 'ComTarget' OR 
   ( ( %S |S ) %== 'AdapterTarget'  ) OR 
   ( ( %S |S ) %== 'DLL'  ) OR 
   ( ( %S |S ) %== 'ComDLL'  ) ) then
 begin
   true 
 end // if
 else
 begin
   false 
 end // else
//#UC END# *4715A56300DA*
; // is_dll_target


// генерация Exe - цели
//f _dump_exe_target
: dump_exe_target OBJECT IN %S
//#UC START# *4715A580000F*
//	[exe_target_%f_to_lower(%SN) {
 if NOT-EMPTY
 begin
  'exe_target_'
  [%f] to_lower %( %S |N )% ' {'
//		\tcmdline += -ti dll_exe:msvc90-exe-generic-static
  '	'#9'cmdline += -ti dll_exe:msvc90-exe-generic-static'
//		\t%U[{_EXE_TARGET}
  '	'#9
  %Usersection (
   '_EXE_TARGET' 
  )
  (
   #13#10

//		\t]
   '	'#9 
  ) // Usersection
 //		[\t%So
  '	'
  if NOT-EMPTY
  begin
   #9
   %S |o 
//		][\t%f_with_gen_id(mpc2,%So)]
   '	' 
  end // if
  NOP
  if NOT-EMPTY
  begin
   #9
   [%f] with_gen_id %( 'mpc2' %, %S |o )% 
  end // if
  NOP
//	\t}]
  #9'}' 
 end // if
 NOP
//#UC END# *4715A580000F*
; // dump_exe_target


// генерация DLL - цели
//f _dump_dll_target
: dump_dll_target OBJECT IN %S
//#UC START# *4715A5D403B9*
//	[dll_target_%f_to_lower(%SN) {
 if NOT-EMPTY
 begin
  'dll_target_'
  [%f] to_lower %( %S |N )% ' {'
//		\tcmdline += -ti dll:msvc90-dll-generic-static
  '	'#9'cmdline += -ti dll:msvc90-dll-generic-static'
//		\t%U[{_DLL_TARGET}
  '	'#9
  %Usersection (
   '_DLL_TARGET' 
  )
  (
   #13#10

//		\t]
   '	'#9 
  ) // Usersection
 //		[{%SS=ComTarget}\tcmdline += -value_template link_options+=/def:%f_normolized_path(com.def,S)
  '	'
  if ( ( %S |S ) %== 'ComTarget' ) then
  begin
   #9'cmdline += -value_template link_options+=/def:'
   [%f] normolized_path %( 'com.def' %, 'S' )% 
//		][\t%So
   '	' 
  end // if
  if NOT-EMPTY
  begin
   #9
   %S |o 
//		][\t%f_with_gen_id(mpc2,%So)]
   '	' 
  end // if
  NOP
  if NOT-EMPTY
  begin
   #9
   [%f] with_gen_id %( 'mpc2' %, %S |o )% 
  end // if
  NOP
//	\t}]
  #9'}' 
 end // if
 NOP
//#UC END# *4715A5D403B9*
; // dump_dll_target


////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
