////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//
// Модуль: "w:/MDProcess/CoreTemplates/Integrated/Root/Project.tpi"
// Генерация мета-шаблонов
// Generated from UML model, root element: <<MDACategory::Class>> MDProcess$CoreTemplates::CoreTemplates::Integrated::Root::Project
//
// Проект
// ---
// Рутовый элемент модели. Определяет основные проекты. Одна модель может определять несколько
// проектов, определяя связи между ними.
//
//
// Все права принадлежат ООО НПП "Гарант-Сервис".
//
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

//: Project::Category
implementation @ <<Project>>
//? Проект
//? Рутовый элемент модели. Определяет основные проекты. Одна модель может определять несколько проектов, определяя связи между ними.
//> Requirements::Category

//= Документация::MDAGenerator
//= ModelSerialize::MDAGenerator

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
// Параметры стереотипа
//Y code_project.gif
//L code_project
// Параметры визуализации
//$ C 195,245,195
//$ l 80,245,90
//$ f 80,245,90
//M
// - может быть основным элементом модели

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
// Пользовательские свойства

//p Full MDP:b=true ? поддержка полного контроля используемости определяемого MDP
//p full constraint:b=true ? Включает полный контроль за правильностью использования элементов (например при включенной опции серванты не могут нигде использоваться, кроме своих вложенных типов)
//p is namespace:b=false ? определяет является ли проект неймспейсом
//p root path suffix:s ? определяет префикс пути вставляемый между рутовой дирректорией и всем компонентам входящими в проект
//p space key:s ? идентификатор родительского спейса для генерации в MDKnow
//p space name:s ? Название родительского спейса - при генерации будет выставленно в заданное (т.е. изменено при необходимости)

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
// Функции стереотипа

//%f _st_space_key
: st_space_key OBJECT IN %S
//	MDP
 'MDP'

//%f _wiki_up_print
; // st_space_key

: wiki_up_print OBJECT IN %S
//	[{"%S{Full MDP}"!="%S{!Full MDP}"}%f_up_prefix(%S) *Full MDP* = *%S{Full MDP}* - поддержка полного контроля используемости определяемого MDP
 if ( ( %S get_up ( 'Full MDP' ) ) %!= ( %S get_up_def ( 'Full MDP' ) ) ) then
 begin
  [%f] up_prefix %( %S )% ' *Full MDP* = *'
  %S get_up ( 'Full MDP' ) '* - поддержка полного контроля используемости определяемого MDP'
//	][{"%S{full constraint}"!="%S{!full constraint}"}%f_up_prefix(%S) *full constraint* = *%S{full constraint}* - Включает полный контроль за правильностью использования элементов (например при включенной опции серванты не могут нигде использоваться, кроме своих вложенных типов)
 end // if
 if ( ( %S get_up ( 'full constraint' ) ) %!= ( %S get_up_def ( 'full constraint' ) ) ) then
 begin
  [%f] up_prefix %( %S )% ' *full constraint* = *'
  %S get_up ( 'full constraint' ) '* - Включает полный контроль за правильностью использования элементов (например при включенной опции серванты не могут нигде использоваться, кроме своих вложенных типов)'
//	][{"%S{is namespace}"!="%S{!is namespace}"}%f_up_prefix(%S) *is namespace* = *%S{is namespace}* - определяет является ли проект неймспейсом
 end // if
 if ( ( %S get_up ( 'is namespace' ) ) %!= ( %S get_up_def ( 'is namespace' ) ) ) then
 begin
  [%f] up_prefix %( %S )% ' *is namespace* = *'
  %S get_up ( 'is namespace' ) '* - определяет является ли проект неймспейсом'
//	][{"%S{root path suffix}"!="%S{!root path suffix}"}%f_up_prefix(%S) *root path suffix* = *%S{root path suffix}* - определяет префикс пути вставляемый между рутовой дирректорией и всем компонентам входящими в проект
 end // if
 if ( ( %S get_up ( 'root path suffix' ) ) %!= ( %S get_up_def ( 'root path suffix' ) ) ) then
 begin
  [%f] up_prefix %( %S )% ' *root path suffix* = *'
  %S get_up ( 'root path suffix' ) '* - определяет префикс пути вставляемый между рутовой дирректорией и всем компонентам входящими в проект'
//	][{"%S{space key}"!="%S{!space key}"}%f_up_prefix(%S) *space key* = *%S{space key}* - идентификатор родительского спейса для генерации в MDKnow
 end // if
 if ( ( %S get_up ( 'space key' ) ) %!= ( %S get_up_def ( 'space key' ) ) ) then
 begin
  [%f] up_prefix %( %S )% ' *space key* = *'
  %S get_up ( 'space key' ) '* - идентификатор родительского спейса для генерации в MDKnow'
//	][{"%S{space name}"!="%S{!space name}"}%f_up_prefix(%S) *space name* = *%S{space name}* - Название родительского спейса - при генерации будет выставленно в заданное (т.е. изменено при необходимости)
 end // if
 if ( ( %S get_up ( 'space name' ) ) %!= ( %S get_up_def ( 'space name' ) ) ) then
 begin
  [%f] up_prefix %( %S )% ' *space name* = *'
  %S get_up ( 'space name' ) '* - Название родительского спейса - при генерации будет выставленно в заданное (т.е. изменено при необходимости)'
//	]
 end // if

//%f _wiki_ProjectPageName
; // wiki_up_print

: wiki_ProjectPageName OBJECT IN %S
// возвращаемый результат: a-string
//#UC START# *4E7C7B0B0192for49F99EB100B2*
//	[{%SN=Nemesis|%f_substr_from_begin(%SN,2)=F1}{\
 if ( ( %S |N ) %== 'Nemesis' OR 
   ( ( [%f] substr_from_begin %( %S |N %, 2 )% ) %== 'F1'  ) ) then
 begin
//	[{%SN=F1}{\
  if ( ( %S |N ) %== 'F1' ) then
  begin
//	%f_str_replace(%SN,$, )\
   [%f] str_replace %( %S |N %, '$' %, ' ' )% 
//	]\
  end // if
  else
  begin
//	%f_str_replace(%f_cut_prefix(%SN,F1 ),$, )\
   [%f] str_replace %( [%f] cut_prefix %( %S |N %, 'F1 ' )% %, '$' %, ' ' )% 
//	}\
  end // else
//	]
 end // if
 else
 begin
//	[{%f_substr_from_begin(%SN,13)=Shared Delphi}{\
  if ( ( [%f] substr_from_begin %( %S |N %, 13 )% ) %== 'Shared Delphi' ) then
  begin
//	[{%SN=Shared Delphi}{\
   if ( ( %S |N ) %== 'Shared Delphi' ) then
   begin
//	%f_str_replace(%SN,$, )\
    [%f] str_replace %( %S |N %, '$' %, ' ' )% 
//	]\
   end // if
   else
   begin
//	%f_str_replace(%f_cut_prefix(%SN,Shared Delphi ),$, )\
    [%f] str_replace %( [%f] cut_prefix %( %S |N %, 'Shared Delphi ' )% %, '$' %, ' ' )% 
//	}\
   end // else
//	]\
  end // if
  else
  begin
//	Модель проекта "%f_str_replace(%SN,$, )"\
   'Модель проекта "'
   [%f] str_replace %( %S |N %, '$' %, ' ' )% 
//	}\
  end // else
//	}\
 end // else
//#UC END# *4E7C7B0B0192for49F99EB100B2*
; // wiki_ProjectPageName


////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
// Унаследованная реализация

// реализация абстрактного стереотипа Документация::MDAGenerator
// проверка ограничений накладываемых на элемент
//%t _constraint
<<transformator>> constraint OBJECT IN %S
//#UC START# *4704C0E30186for49F99EB100B2*
//c          {}
//r {""=""}: {}
//#UC END# *4704C0E30186for49F99EB100B2*
; // constraint


// реализация абстрактного стереотипа Документация::MDAGenerator
// выводит описание элемента (операция, атрибут) в wiki
//%f _wiki_child_kind
: wiki_child_kind OBJECT IN %S
//#UC START# *4705CBD6003Efor49F99EB100B2*
//#UC END# *4705CBD6003Efor49F99EB100B2*
; // wiki_child_kind


// реализация абстрактного стереотипа Документация::MDAGenerator
// вывод описание авто-генерируемых методов в wiki
//%f _wiki_up_add_gen
: wiki_up_add_gen OBJECT IN %S
//#UC START# *470484D50138for49F99EB100B2*
//#UC END# *470484D50138for49F99EB100B2*
; // wiki_up_add_gen


// реализация абстрактного стереотипа ModelSerialize::MDAGenerator
// генератор структуры модели в описание на языке FORTH
//+ forth_structure
<<generator>> forth_structure OBJECT IN %S
//R  
//#UC START# *4F368B80039Efor49F99EB100B2*
//R  
//P
//C /shared/models/NewSchool/%SN
//C [{%P#f_IsProjectGroup()!=true}/shared/models/NewSchool]/%SN
//C shared/models/NewSchool/%SN
//C %SN
//O %SN.model.script
//	\%DISABLE_CASCADE_DICT
 '%DISABLE_CASCADE_DICT'
//	
//	USES
 'USES'
//	 'W:\\shared\\models\\NewSchool\\Templates\\Implementation1.tpl.script'
 ' ''W:\shared\models\NewSchool\Templates\Implementation1.tpl.script''
//	;
 ';'
//	
//	USES
 'USES'
//	 'W:\\shared\\models\\NewSchool\\Templates\\Implementation2.tpl.script'
 ' ''W:\shared\models\NewSchool\Templates\Implementation2.tpl.script''
//	;
 ';'
//	
//	USES
 'USES'
//	 'W:\\shared\\models\\NewSchool\\Templates\\EVD.tpl.script'
 ' ''W:\shared\models\NewSchool\Templates\EVD.tpl.script''
//	;
 ';'
//	
//	USES
 'USES'
//	 'W:\\shared\\models\\NewSchool\\Templates\\VCM.tpl.script'
 ' ''W:\shared\models\NewSchool\Templates\VCM.tpl.script''
//	;
 ';'
//	
//	[USES
 if NOT-EMPTY
 begin
  'USES'
//	 <{\n }{"%DO"!=""&%D#f_IsProject()=true}'%f_str_replace(%DR%Dd,/,\\)\\%DO'>
  ' '
  INTEGER VAR l_Counter l_Counter := 0
  for %S%D
  begin
   OBJECT IN %D
   if ( ( %D |O ) %!= '' AND 
    ( ( %D %?f IsProject %( )% ) %==  true  ) ) then
   begin
    if ( l_Counter >0 ) then ( #13#10' ' )
    ''''
    [%f] str_replace %( %D |R %D |d %, '/' %, '\' )% '\'
    %D |O '''' 
    ++! l_Counter
   end // if
  end // for D
//	;\n\n]\
  ';'#13#10#13#10 
 end // if
 NOP
//	%f_dump_to_FORTH(%S)\
 [%f] dump_to_FORTH %( %S )% 
//	<{}{"%CO"!=""}%CX>
 INTEGER VAR l_Counter l_Counter := 0
 for %S%C
 begin
  OBJECT IN %C
  if ( ( %C |O ) %!= '' ) then
  begin
   %C |X 
   ++! l_Counter
  end // if
 end // for C

//f _mangle_name
; // forth_structure

end. // <<Project>>

: mangle_name OBJECT IN %S
//	[{"%SN"!=""}{\
 if ( ( %S |N ) %!= '' ) then
 begin
//	[{%f_consist_of(%SN,"0123456789")!=true&%f_consist_of(%SN,"0123456789abcdefghijklmnopqarstuvwxyzABCDEFGHIJKLMNOPQARSTUVWXYZ_абвгдеёжзийклмнопрстуфхцчщэюяАБВГДЕЁЖЗИЙКЛМНОПРСТУФХЦЧЩЭЮЯ$.")=true&%f_to_upper(%SN)!=ABSTRACT&%f_to_upper(%SN)!=FINAL&%f_to_upper(%SN)!=VIRTUAL&%f_to_upper(%SN)!=TRUE&%f_to_upper(%SN)!=FALSE&%SS!=ScriptKeyword&%f_to_upper(%SN)!=SUMMONED&%f_to_upper(%SN)!=VAR&%f_to_upper(%SN)!=OPERATOR}{\
  if ( ( [%f] consist_of %( %S |N %, '0123456789' )% ) %!=  true AND 
    ( ( [%f] consist_of %( %S |N %, '0123456789abcdefghijklmnopqarstuvwxyzABCDEFGHIJKLMNOPQARSTUVWXYZ_абвгдеёжзийклмнопрстуфхцчщэюяАБВГДЕЁЖЗИЙКЛМНОПРСТУФХЦЧЩЭЮЯ$.' )% ) %==  true  ) AND 
    ( ( [%f] to_upper %( %S |N )% ) %!= 'ABSTRACT'  ) AND 
    ( ( [%f] to_upper %( %S |N )% ) %!= 'FINAL'  ) AND 
    ( ( [%f] to_upper %( %S |N )% ) %!= 'VIRTUAL'  ) AND 
    ( ( [%f] to_upper %( %S |N )% ) %!= 'TRUE'  ) AND 
    ( ( [%f] to_upper %( %S |N )% ) %!= 'FALSE'  ) AND 
    ( ( %S |S ) %!= 'ScriptKeyword'  ) AND 
    ( ( [%f] to_upper %( %S |N )% ) %!= 'SUMMONED'  ) AND 
    ( ( [%f] to_upper %( %S |N )% ) %!= 'VAR'  ) AND 
    ( ( [%f] to_upper %( %S |N )% ) %!= 'OPERATOR'  ) ) then
  begin
//	%SN\
   %S |N 
//	[{%SC=Operation|%S#f_IsMethod()=true}\
   if ( ( %S |C ) %== 'Operation' OR 
     ( ( %S %?f IsMethod %( )% ) %==  true  ) ) then
   begin
//	[{%f_is_MDA_oper(%S)!=true}\
    if ( ( [%f] is_MDA_oper %( %S )% ) %!=  true ) then
    begin
//	[{"%f_delphi_overload(%S)"!=""}\
     if ( ( [%f] delphi_overload %( %S )% ) %!= '' ) then
     begin
//	$%SU\
      '$'
      %S |U 
//	]\
     end // if
//	]\
    end // if
//	]\
   end // if
//	]\
  end // if
  else
  begin
//	"%f_str_replace(%SN,%f_quote(%S),')"\
   [%f] str_replace %( %S |N %, [%f] quote %( %S )% %, '''' )% 
//	}\
  end // else
//	]
 end // if
 else
 begin
//	"%SU"\
  %S |U 
//	}\
 end // else

//f _fine_string
; // mangle_name

: fine_string OBJECT IN %S
//	%f_str_replace(%f_str_replace(%SN,',''),\n,'\#13\#10')
 [%f] str_replace %( [%f] str_replace %( %S |N %, '''' %, '''''' )% %, #13#10 %, '''#13#10''' )% 

//f _cut_quotes
; // fine_string

: cut_quotes OBJECT IN %S
//	%f_cut_postfix(%f_cut_prefix(%SN,%f_quote(%S)),%f_quote(%S))
 [%f] cut_postfix %( [%f] cut_prefix %( %S |N %, [%f] quote %( %S )% )% %, [%f] quote %( %S )% )% 

//f _is_default_up_value
; // cut_quotes

: is_default_up_value OBJECT IN %S
//	[{"%1N"="is static"&"%2N"="undefined"}{\
 if ( ( %1 |N ) %== 'is static' AND 
   ( ( %2 |N ) %== 'undefined'  ) ) then
 begin
//	true\
   true 
//	]
 end // if
 else
 begin
//	[{"%1N"="unstereotyped"&"%2N"="false"}{\
  if ( ( %1 |N ) %== 'unstereotyped' AND 
    ( ( %2 |N ) %== false  ) ) then
  begin
//	true\
    true 
//	]\
  end // if
  else
  begin
//	[{"%1N"="can set visibility level"&"%2N"="false"}{\
   if ( ( %1 |N ) %== 'can set visibility level' AND 
     ( ( %2 |N ) %== false  ) ) then
   begin
//	true\
     true 
//	]\
   end // if
   else
   begin
//	[{"%1N"="exception"&"%2N"="false"}{\
    if ( ( %1 |N ) %== 'exception' AND 
      ( ( %2 |N ) %== false  ) ) then
    begin
//	true\
      true 
//	]\
    end // if
    else
    begin
//	[{"%1N"="has derived impl"&"%2N"="false"}{\
     if ( ( %1 |N ) %== 'has derived impl' AND 
       ( ( %2 |N ) %== false  ) ) then
     begin
//	true\
       true 
//	]\
     end // if
     else
     begin
//	[{"%1N"="implementable"&"%2N"="undefined"}{\
      if ( ( %1 |N ) %== 'implementable' AND 
        ( ( %2 |N ) %== 'undefined'  ) ) then
      begin
//	true\
        true 
//	]\
      end // if
      else
      begin
//	[{"%1N"="disable forward decl"&"%2N"="false"}{\
       if ( ( %1 |N ) %== 'disable forward decl' AND 
         ( ( %2 |N ) %== false  ) ) then
       begin
//	true\
         true 
//	]\
       end // if
       else
       begin
//	[{"%1N"="newRTTI"&"%2N"="false"}{\
        if ( ( %1 |N ) %== 'newRTTI' AND 
          ( ( %2 |N ) %== false  ) ) then
        begin
//	true\
          true 
//	]\
        end // if
        else
        begin
//	[{"%1N"="isPointer"&"%2N"="false"}{\
         if ( ( %1 |N ) %== 'isPointer' AND 
           ( ( %2 |N ) %== false  ) ) then
         begin
//	true\
           true 
//	]\
         end // if
         else
         begin
//	[{"%1N"="isClassRef"&"%2N"="false"}{\
          if ( ( %1 |N ) %== 'isClassRef' AND 
            ( ( %2 |N ) %== false  ) ) then
          begin
//	true\
            true 
//	]\
          end // if
          else
          begin
//	[{"%1N"="force what"&"%2N"="false"}{\
           if ( ( %1 |N ) %== 'force what' AND 
             ( ( %2 |N ) %== false  ) ) then
           begin
//	true\
             true 
//	]\
           end // if
           else
           begin
//	[{"%1N"="is_runtime"&"%2N"="false"}{\
            if ( ( %1 |N ) %== 'is_runtime' AND 
              ( ( %2 |N ) %== false  ) ) then
            begin
//	true\
              true 
//	]\
            end // if
            else
            begin
//	[{"%1N"="packed"&"%2N"="false"}{\
             if ( ( %1 |N ) %== 'packed' AND 
               ( ( %2 |N ) %== false  ) ) then
             begin
//	true\
               true 
//	]\
             end // if
             else
             begin
//	[{"%1N"="Need init ctor"&"%2N"="false"}{\
              if ( ( %1 |N ) %== 'Need init ctor' AND 
                ( ( %2 |N ) %== false  ) ) then
              begin
//	true\
                true 
//	]\
              end // if
              else
              begin
//	[{"%1N"="IsAutoHelper"&"%2N"="false"}{\
               if ( ( %1 |N ) %== 'IsAutoHelper' AND 
                 ( ( %2 |N ) %== false  ) ) then
               begin
//	true\
                 true 
//	]\
               end // if
               else
               begin
//	[{"%1N"="force usage"&"%2N"="false"}{\
                if ( ( %1 |N ) %== 'force usage' AND 
                  ( ( %2 |N ) %== false  ) ) then
                begin
//	true\
                  true 
//	]\
                end // if
                else
                begin
//	[{"%1N"="no_root_class"&"%2N"="false"}{\
                 if ( ( %1 |N ) %== 'no_root_class' AND 
                   ( ( %2 |N ) %== false  ) ) then
                 begin
//	true\
                   true 
//	]\
                 end // if
                 else
                 begin
//	[{"%1N"="is immediate"&"%2N"="undefined"}{\
                  if ( ( %1 |N ) %== 'is immediate' AND 
                    ( ( %2 |N ) %== 'undefined'  ) ) then
                  begin
//	true\
                    true 
//	]\
                  end // if
                  else
                  begin
//	[{"%1N"="need inline-file"&"%2N"="false"}{\
                   if ( ( %1 |N ) %== 'need inline-file' AND 
                     ( ( %2 |N ) %== false  ) ) then
                   begin
//	true\
                     true 
//	]\
                   end // if
                   else
                   begin
//	[{"%1N"="need impl-file"&"%2N"="false"}{\
                    if ( ( %1 |N ) %== 'need impl-file' AND 
                      ( ( %2 |N ) %== false  ) ) then
                    begin
//	true\
                      true 
//	]\
                    end // if
                    else
                    begin
//	[{"%1N"="local helper"&"%2N"="false"}{\
                     if ( ( %1 |N ) %== 'local helper' AND 
                       ( ( %2 |N ) %== false  ) ) then
                     begin
//	true\
                       true 
//	]\
                     end // if
                     else
                     begin
//	[{"%1N"="need objcounter"&"%2N"="true"}{\
                      if ( ( %1 |N ) %== 'need objcounter' AND 
                        ( ( %2 |N ) %== true  ) ) then
                      begin
//	true\
                        true 
//	]\
                      end // if
                      else
                      begin
//	[{"%1N"="singleton"&"%2N"="false"}{\
                       if ( ( %1 |N ) %== 'singleton' AND 
                         ( ( %2 |N ) %== false  ) ) then
                       begin
//	true\
                         true 
//	]\
                       end // if
                       else
                       begin
//	[{"%1N"="Refcount"&"%2N"="none"}{\
                        if ( ( %1 |N ) %== 'Refcount' AND 
                          ( ( %2 |N ) %== 'none'  ) ) then
                        begin
//	true\
                          true 
//	]\
                        end // if
                        else
                        begin
//	[{"%1N"="Need copy ctor"&"%2N"="false"}{\
                         if ( ( %1 |N ) %== 'Need copy ctor' AND 
                           ( ( %2 |N ) %== false  ) ) then
                         begin
//	true\
                           true 
//	]\
                         end // if
                         else
                         begin
//	[{"%1N"="Need assign op"&"%2N"="false"}{\
                          if ( ( %1 |N ) %== 'Need assign op' AND 
                            ( ( %2 |N ) %== false  ) ) then
                          begin
//	true\
                            true 
//	]\
                          end // if
                          else
                          begin
//	[{"%1N"="call way"&"%2N"="forth"}{\
                           if ( ( %1 |N ) %== 'call way' AND 
                             ( ( %2 |N ) %== 'forth'  ) ) then
                           begin
//	true\
                             true 
//	]\
                           end // if
                           else
                           begin
//	[{"%1N"="native definition"&"%2N"="none"}{\
                            if ( ( %1 |N ) %== 'native definition' AND 
                              ( ( %2 |N ) %== 'none'  ) ) then
                            begin
//	true\
                              true 
//	]\
                            end // if
                            else
                            begin
//	[{"%1N"="Must throw in error"&"%2N"="true"}{\
                             if ( ( %1 |N ) %== 'Must throw in error' AND 
                               ( ( %2 |N ) %== true  ) ) then
                             begin
//	true\
                               true 
//	]\
                             end // if
                             else
                             begin
//	[{"%1N"="is default ancestor"&"%2N"="false"}{\
                              if ( ( %1 |N ) %== 'is default ancestor' AND 
                                ( ( %2 |N ) %== false  ) ) then
                              begin
//	true\
                                true 
//	]\
                              end // if
                              else
                              begin
//	[{"%1N"="weak"&"%2N"="false"}{\
                               if ( ( %1 |N ) %== 'weak' AND 
                                 ( ( %2 |N ) %== false  ) ) then
                               begin
//	true\
                                 true 
//	]\
                               end // if
                               else
                               begin
//	[{"%1N"="local supervisor"&"%2N"="false"}{\
                                if ( ( %1 |N ) %== 'local supervisor' AND 
                                  ( ( %2 |N ) %== false  ) ) then
                                begin
//	true\
                                  true 
//	]\
                                end // if
                                else
                                begin
//	[{"%1N"="non virtual base"&"%2N"="false"}{\
                                 if ( ( %1 |N ) %== 'non virtual base' AND 
                                   ( ( %2 |N ) %== false  ) ) then
                                 begin
//	true\
                                   true 
//	]\
                                 end // if
                                 else
                                 begin
//	[{"%1N"="dll export"&"%2N"="true"}{\
                                  if ( ( %1 |N ) %== 'dll export' AND 
                                    ( ( %2 |N ) %== true  ) ) then
                                  begin
//	true\
                                    true 
//	]\
                                  end // if
                                  else
                                  begin
//	[{"%1N"="force overload"&"%2N"="false"}{\
                                   if ( ( %1 |N ) %== 'force overload' AND 
                                     ( ( %2 |N ) %== false  ) ) then
                                   begin
//	true\
                                     true 
//	]\
                                   end // if
                                   else
                                   begin
//	[{"%1N"="debug log"&"%2N"="false"}{\
                                    if ( ( %1 |N ) %== 'debug log' AND 
                                      ( ( %2 |N ) %== false  ) ) then
                                    begin
//	true\
                                      true 
//	]\
                                    end // if
                                    else
                                    begin
//	[{"%1N"="debug tie log"&"%2N"="false"}{\
                                     if ( ( %1 |N ) %== 'debug tie log' AND 
                                       ( ( %2 |N ) %== false  ) ) then
                                     begin
//	true\
                                       true 
//	]\
                                     end // if
                                     else
                                     begin
//	[{"%1N"="reads field"&"%2N"="false"}{\
                                      if ( ( %1 |N ) %== 'reads field' AND 
                                        ( ( %2 |N ) %== false  ) ) then
                                      begin
//	true\
                                        true 
//	]\
                                      end // if
                                      else
                                      begin
//	[{"%1N"="writes field"&"%2N"="false"}{\
                                       if ( ( %1 |N ) %== 'writes field' AND 
                                         ( ( %2 |N ) %== false  ) ) then
                                       begin
//	true\
                                         true 
//	]\
                                       end // if
                                       else
                                       begin
//	[{"%1N"="calling conventions"&"%2N"="none"}{\
                                        if ( ( %1 |N ) %== 'calling conventions' AND 
                                          ( ( %2 |N ) %== 'none'  ) ) then
                                        begin
//	true\
                                          true 
//	]\
                                        end // if
                                        else
                                        begin
//	[{"%1N"="force use const arg"&"%2N"="false"}{\
                                         if ( ( %1 |N ) %== 'force use const arg' AND 
                                           ( ( %2 |N ) %== false  ) ) then
                                         begin
//	true\
                                           true 
//	]\
                                         end // if
                                         else
                                         begin
//	[{"%1N"="inherits getter from some ancestor"&"%2N"="undefined"}{\
                                          if ( ( %1 |N ) %== 'inherits getter from some ancestor' AND 
                                            ( ( %2 |N ) %== 'undefined'  ) ) then
                                          begin
//	true\
                                            true 
//	]\
                                          end // if
                                          else
                                          begin
//	[{"%1N"="inherits setter from some ancestor"&"%2N"="undefined"}{\
                                           if ( ( %1 |N ) %== 'inherits setter from some ancestor' AND 
                                             ( ( %2 |N ) %== 'undefined'  ) ) then
                                           begin
//	true\
                                             true 
//	]\
                                           end // if
                                           else
                                           begin
//	[{"%1N"="is default"&"%2N"="false"}{\
                                            if ( ( %1 |N ) %== 'is default' AND 
                                              ( ( %2 |N ) %== false  ) ) then
                                            begin
//	true\
                                              true 
//	]\
                                            end // if
                                            else
                                            begin
//	[{"%1N"="needs field"&"%2N"="undefined"}{\
                                             if ( ( %1 |N ) %== 'needs field' AND 
                                               ( ( %2 |N ) %== 'undefined'  ) ) then
                                             begin
//	true\
                                               true 
//	]\
                                             end // if
                                             else
                                             begin
//	[{"%1N"="needs stored directive"&"%2N"="undefined"}{\
                                              if ( ( %1 |N ) %== 'needs stored directive' AND 
                                                ( ( %2 |N ) %== 'undefined'  ) ) then
                                              begin
//	true\
                                                true 
//	]\
                                              end // if
                                              else
                                              begin
//	[{"%1N"="is mutable"&"%2N"="false"}{\
                                               if ( ( %1 |N ) %== 'is mutable' AND 
                                                 ( ( %2 |N ) %== false  ) ) then
                                               begin
//	true\
                                                 true 
//	]\
                                               end // if
                                               else
                                               begin
//	[{"%1N"="smart pointer"&"%2N"="false"}{\
                                                if ( ( %1 |N ) %== 'smart pointer' AND 
                                                  ( ( %2 |N ) %== false  ) ) then
                                                begin
//	true\
                                                  true 
//	]\
                                                end // if
                                                else
                                                begin
//	[{"%1N"="is redefinition"&"%2N"="false"}{\
                                                 if ( ( %1 |N ) %== 'is redefinition' AND 
                                                   ( ( %2 |N ) %== false  ) ) then
                                                 begin
//	true\
                                                   true 
//	]\
                                                 end // if
                                                 else
                                                 begin
//	[{"%1N"="is namespace"&"%2N"="false"}{\
                                                  if ( ( %1 |N ) %== 'is namespace' AND 
                                                    ( ( %2 |N ) %== false  ) ) then
                                                  begin
//	true\
                                                    true 
//	]\
                                                  end // if
                                                  else
                                                  begin
//	[{"%1N"="isHighPriority"&"%2N"="false"}{\
                                                   if ( ( %1 |N ) %== 'isHighPriority' AND 
                                                     ( ( %2 |N ) %== false  ) ) then
                                                   begin
//	true\
                                                     true 
//	]\
                                                   end // if
                                                   else
                                                   begin
//	[{"%1N"="can be parametrized"&"%2N"="undefined"}{\
                                                    if ( ( %1 |N ) %== 'can be parametrized' AND 
                                                      ( ( %2 |N ) %== 'undefined'  ) ) then
                                                    begin
//	true\
                                                      true 
//	]\
                                                    end // if
                                                    else
                                                    begin
//	[{"%1N"="forward weight"&"%2N"="0"}{\
                                                     if ( ( %1 |N ) %== 'forward weight' AND 
                                                       ( ( %2 |N ) %== 0  ) ) then
                                                     begin
//	true\
                                                       true 
//	]\
                                                     end // if
                                                     else
                                                     begin
//	[{"%1N"="can be main"&%2N=false}{\
                                                      if ( ( %1 |N ) %== 'can be main' AND 
                                                        ( ( %2 |N ) %==  false  ) ) then
                                                      begin
//	true\
                                                        true 
//	]\
                                                      end // if
                                                      else
                                                      begin
//	[{"%1N"="inherite constraints"&%2N=true}{\
                                                       if ( ( %1 |N ) %== 'inherite constraints' AND 
                                                         ( ( %2 |N ) %==  true  ) ) then
                                                       begin
//	true\
                                                         true 
//	]\
                                                       end // if
                                                       else
                                                       begin
//	[{"%1N"="encoding"&%2N=default}{\
                                                        if ( ( %1 |N ) %== 'encoding' AND 
                                                          ( ( %2 |N ) %== 'default'  ) ) then
                                                        begin
//	true\
                                                          true 
//	]\
                                                        end // if
                                                        else
                                                        begin
//	[{"%1N"="empty target"&%2N=false}{\
                                                         if ( ( %1 |N ) %== 'empty target' AND 
                                                           ( ( %2 |N ) %==  false  ) ) then
                                                         begin
//	true\
                                                           true 
//	]\
                                                         end // if
                                                         else
                                                         begin
//	[{"%1N"="make auto copies internal"&%2N=false}{\
                                                          if ( ( %1 |N ) %== 'make auto copies internal' AND 
                                                            ( ( %2 |N ) %==  false  ) ) then
                                                          begin
//	true\
                                                            true 
//	]\
                                                          end // if
                                                          else
                                                          begin
//	[{"%1N"="no auto copy"&%2N=false}{\
                                                           if ( ( %1 |N ) %== 'no auto copy' AND 
                                                             ( ( %2 |N ) %==  false  ) ) then
                                                           begin
//	true\
                                                             true 
//	]\
                                                           end // if
                                                           else
                                                           begin
//	[{"%1N"="skip"&%2N=false}{\
                                                            if ( ( %1 |N ) %== 'skip' AND 
                                                              ( ( %2 |N ) %==  false  ) ) then
                                                            begin
//	true\
                                                              true 
//	]\
                                                            end // if
                                                            else
                                                            begin
//	[{"%1N"="internal"&%2N=false}{\
                                                             if ( ( %1 |N ) %== 'internal' AND 
                                                               ( ( %2 |N ) %==  false  ) ) then
                                                             begin
//	true\
                                                               true 
//	]\
                                                             end // if
                                                             else
                                                             begin
//	[{"%1N"="need dctor"&%2N=false}{\
                                                              if ( ( %1 |N ) %== 'need dctor' AND 
                                                                ( ( %2 |N ) %==  false  ) ) then
                                                              begin
//	true\
                                                                true 
//	]\
                                                              end // if
                                                              else
                                                              begin
//	[{"%1N"="need UC"&%2N=false}{\
                                                               if ( ( %1 |N ) %== 'need UC' AND 
                                                                 ( ( %2 |N ) %==  false  ) ) then
                                                               begin
//	true\
                                                                 true 
//	]\
                                                               end // if
                                                               else
                                                               begin
//	[{%1N=finished&%2N=true}{\
                                                                if ( ( %1 |N ) %== 'finished' AND 
                                                                  ( ( %2 |N ) %==  true  ) ) then
                                                                begin
//	true\
                                                                  true 
//	]\
                                                                end // if
                                                                else
                                                                begin
//	false\
                                                                  false 
//	}\
                                                                end // else
//	}\
                                                               end // else
//	}\
                                                              end // else
//	}\
                                                             end // else
//	}\
                                                            end // else
//	}\
                                                           end // else
//	}\
                                                          end // else
//	}\
                                                         end // else
//	}\
                                                        end // else
//	}\
                                                       end // else
//	}\
                                                      end // else
//	}\
                                                     end // else
//	}\
                                                    end // else
//	}\
                                                   end // else
//	}\
                                                  end // else
//	}\
                                                 end // else
//	}\
                                                end // else
//	}\
                                               end // else
//	}\
                                              end // else
//	}\
                                             end // else
//	}\
                                            end // else
//	}\
                                           end // else
//	}\
                                          end // else
//	}\
                                         end // else
//	}\
                                        end // else
//	}\
                                       end // else
//	}\
                                      end // else
//	}\
                                     end // else
//	}\
                                    end // else
//	}\
                                   end // else
//	}\
                                  end // else
//	}\
                                 end // else
//	}\
                                end // else
//	}\
                               end // else
//	}\
                              end // else
//	}\
                             end // else
//	}\
                            end // else
//	}\
                           end // else
//	}\
                          end // else
//	}\
                         end // else
//	}\
                        end // else
//	}\
                       end // else
//	}\
                      end // else
//	}\
                     end // else
//	}\
                    end // else
//	}\
                   end // else
//	}\
                  end // else
//	}\
                 end // else
//	}\
                end // else
//	}\
               end // else
//	}\
              end // else
//	}\
             end // else
//	}\
            end // else
//	}\
           end // else
//	}\
          end // else
//	}\
         end // else
//	}\
        end // else
//	}\
       end // else
//	}\
      end // else
//	}\
     end // else
//	}\
    end // else
//	}\
   end // else
//	}\
  end // else
//	}\
 end // else
//	%f_warning(%1N)\
//	%f_warning(%S{%1N})\
//	[{"%S{%1N}"="%S{!%1N}"{\
//	false\
//	true\
//	]

//f _is_MDA_inner
; // is_default_up_value

: is_MDA_inner OBJECT IN %S
//	[{%SS=MDAOperation|%SS=MDAAttribute|%SS=MDADependency}{\
 if ( ( %S |S ) %== 'MDAOperation' OR 
   ( ( %S |S ) %== 'MDAAttribute'  ) OR 
   ( ( %S |S ) %== 'MDADependency'  ) ) then
 begin
//	true\
   true 
//	]
 end // if
 else
 begin
//	false\
   false 
//	}\
 end // else

//f _mangle_link_name
; // is_MDA_inner

: mangle_link_name OBJECT IN %S
//	[{%SS=MDAClass|%SS=MDACategory|%f_is_MDA_inner(%S)=true|%SS=MDAAbstractClass}{\
 if ( ( %S |S ) %== 'MDAClass' OR 
   ( ( %S |S ) %== 'MDACategory'  ) OR 
   ( ( [%f] is_MDA_inner %( %S )% ) %==  true  ) OR 
   ( ( %S |S ) %== 'MDAAbstractClass'  ) ) then
 begin
//	\<\<%f_mangle_name(%S)\>\>\
  '<<'
  [%f] mangle_name %( %S )% '>>'
//	]
 end // if
 else
 begin
//	%f_mangle_name(%S)\
  [%f] mangle_name %( %S )% 
//	}\
 end // else

//f _out_val
; // mangle_link_name

: out_val OBJECT IN %S
//	[{%SN=true|%SN=True}{\
 if ( ( %S |N ) %==  true OR 
   ( ( %S |N ) %== 'True'  ) ) then
 begin
//	true\
   true 
//	]
 end // if
 else
 begin
//	[{%SN=false|%SN=False}{\
  if ( ( %S |N ) %==  false OR 
    ( ( %S |N ) %== 'False'  ) ) then
  begin
//	false\
    false 
//	]\
  end // if
  else
  begin
//	[{%f_consist_of(%SN,"0123456789")=true}{\
   if ( ( [%f] consist_of %( %S |N %, '0123456789' )% ) %==  true ) then
   begin
//	%SN\
    %S |N 
//	]\
   end // if
   else
   begin
//	'%SN'\
    ''''
    %S |N ''''
//	}\
   end // else
//	}\
  end // else
//	}\
 end // else

//f _out_name_comment_prim
; // out_val

: out_name_comment_prim OBJECT IN %S
//	[{"%SN"!=""}{%SU}%f_mangle_name(%S)]
 if ( ( %S |N ) %!= '' ) then
 begin
  [%f] mangle_name %( %S )% 
 end // if
 else
 begin
  %S |U 
 end // else

//f _out_name_comment
; // out_name_comment_prim

: out_name_comment OBJECT IN %S
//	/* %f_out_name_comment_prim(%S) */
 '/* '
 [%f] out_name_comment_prim %( %S )% ' */'

//f _out_uid_comment
; // out_name_comment

: out_uid_comment OBJECT IN %S
//	/* %SU */
 '/* '
 %S |U ' */'

//f _link_to_element_uid
; // out_uid_comment

: link_to_element_uid OBJECT IN %S
//	%f_out_uid(%S) %f_out_name_comment(%S)
 [%f] out_uid %( %S )% ' '
 [%f] out_name_comment %( %S )% 

//f _inverted_depends
; // link_to_element_uid

: inverted_depends OBJECT IN %S
//	true
 true
//	[{%1U=%S%PU|%SS=Tag}{\
//	false\
//	}\
//	true\
//	]
// - пока так, т.к. есть проблемы с тем, что элементы определябтся не в том порядке

//f _link_to_element
; // inverted_depends

: link_to_element OBJECT IN %S
//	[{%f_inverted_depends(%S,%1)=true}{\
 if ( ( [%f] inverted_depends %( %S %, %1 )% ) %==  true ) then
 begin
//	%f_link_to_element_uid(%S)\
  [%f] link_to_element_uid %( %S )% 
//	]
 end // if
 else
 begin
//	[{%S%PU!=%1%PU}{\
  if ( ( %S ->P |U  ) %!= ( %1 ->P |U  ) ) then
  begin
//	%f_clear_list(Parents)\
   [%f] clear_list %( 'Parents' )% 
//	%1<{}{}{%Pr}%f_add_to_list(Parents,P)>\
   %1
   bind ( 
    OBJECT VAR %S
    INTEGER VAR l_Counter l_Counter := 0
    for downto %S%P
    begin
     OBJECT IN %P
     if true then
     begin
      [%f] add_to_list %( 'Parents' %, 'P' )% 
      ++! l_Counter
     end // if
    end // for P

   ) // bind
 //	@ :: \
   '@ :: '
//	<{}{}{%Pr}\
   INTEGER VAR l_Counter l_Counter := 0
   for downto %S%P
   begin
    OBJECT IN %P
    if true then
    begin
//	%f_pop_first_to_var(Parents,Par)\
     [%f] pop_first_to_var %( 'Parents' %, 'Par' )% 
//	[{%{Par}U!=%PU}\
     if ( ( ( get_global_var ( 'Par' ) |U ) ) %!= ( %P |U ) ) then
     begin
//	[{%MU!=%PU}\
      if ( ( %M |U ) %!= ( %P |U ) ) then
      begin
//	%f_mangle_link_name(%P) \
       [%f] mangle_link_name %( %P )% ' '
//	]\
      end // if
//	]\
     end // if
//	>\

     ++! l_Counter
    end // if
   end // for P
//	%f_mangle_link_name(%S) ;\
   [%f] mangle_link_name %( %S )% ' ;'
//	%f_clear_list(Parents)\
   [%f] clear_list %( 'Parents' )% 
//	]\
  end // if
  else
  begin
//	@ %f_mangle_link_name(%S)\
   '@ '
   [%f] mangle_link_name %( %S )% 
//	}\
  end // else
//	 %f_out_uid_comment(%S)\
  ' '
  [%f] out_uid_comment %( %S )% 
//	}\
 end // else

//f _out_uid
; // link_to_element

: out_uid OBJECT IN %S
//	U$ '%SU'
 'U$ '''
 %S |U '''

//f _safe_link_to_element
; // out_uid

: safe_link_to_element OBJECT IN %S
//	%f_link_to_element_uid(%S)
 [%f] link_to_element_uid %( %S )% 

//f _out_param_type_prim
; // safe_link_to_element

: out_param_type_prim OBJECT IN %S
//	[{"%SN"="a-string"}{\
 if ( ( %S |N ) %== 'a-string' ) then
 begin
//	STRING\
  'STRING'
//	]
 end // if
 else
 begin
//	[{"%SN"="boolean"}{\
  if ( ( %S |N ) %== 'boolean' ) then
  begin
//	BOOLEAN\
   'BOOLEAN'
//	]\
  end // if
  else
  begin
//	[{"%SN"="MDAClass"}{\
   if ( ( %S |N ) %== 'MDAClass' ) then
   begin
//	OBJECT\
    'OBJECT'
//	]\
   end // if
   else
   begin
//	[{"%SN"="long"}{\
    if ( ( %S |N ) %== 'long' ) then
    begin
//	INTEGER\
     'INTEGER'
//	]\
    end // if
    else
    begin
//	}\
    end // else
//	}\
   end // else
//	}\
  end // else
//	}\
 end // else

//f _out_param_type
; // out_param_type_prim

: out_param_type OBJECT IN %S
//	[ %f_out_param_type_prim(%S)]
 if NOT-EMPTY
 begin
  ' '
  [%f] out_param_type_prim %( %S )% 
 end // if
 NOP

//f _out_param
; // out_param_type

: out_param OBJECT IN %S
//	[{"%SN"!=""}\
 if ( ( %S |N ) %!= '' ) then
 begin
//	%f_out_param_type(%S%T)\
  [%f] out_param_type %( %S ->T  )% 
//	 IN %SN\
  ' IN '
  %S |N 
//	]
 end // if

//f _out_params
; // out_param

: out_params OBJECT IN %S
//	[{%PS!=MDAUtilityPack} OBJECT] IN \%S\
 if ( ( %P |S ) %!= 'MDAUtilityPack' ) then
 begin
  ' OBJECT' 
 end // if
 ' IN %S'
//	<{}{%CC=Parameter}%f_out_param(%C)>
 INTEGER VAR l_Counter l_Counter := 0
 for %S%C
 begin
  OBJECT IN %C
  if ( ( %C |C ) %== 'Parameter' ) then
  begin
   [%f] out_param %( %C )% 
   ++! l_Counter
  end // if
 end // for C

//f _is_MDA_stereo
; // out_params

: is_MDA_stereo OBJECT IN %S
//@ %SU
//	[{%SN=MDAClass|%SN=MDAAbstractClass|%SN=MDAUtilityPack|%SN=MDAGenerator|%SN=MDACategory|%SN=MDAOperation|%SN=MDADependency|%SN=MDAAttribute|%SN=MDASubStereotype|%SN=MDASubChild|%SN=MDAStateMachine|%SN=MDAState|%SN=MDAStateAction|%SN=MDATransition|%SN=MDATransitionAttribute|%SN=MDAParameter|%SN=MDATemplates|%SN=MDALayer|%SN=MDALibrary|%SN=MDAReport}{\
//	[{%SN=MDAAbstractClass|%SN=MDAUtilityPack|%SN=MDAGenerator|%SN=MDAOperation|%SN=MDADependency|%SN=MDAAttribute|%SN=MDASubStereotype|%SN=MDASubChild|%SN=MDAStateMachine|%SN=MDAState|%SN=MDAStateAction|%SN=MDATransition|%SN=MDATransitionAttribute|%SN=MDAParameter|%SN=MDATemplates|%SN=MDALayer|%SN=MDALibrary|%SN=MDAReport}{\
 if ( ( %S |N ) %== 'MDAAbstractClass' OR 
   ( ( %S |N ) %== 'MDAUtilityPack'  ) OR 
   ( ( %S |N ) %== 'MDAGenerator'  ) OR 
   ( ( %S |N ) %== 'MDAOperation'  ) OR 
   ( ( %S |N ) %== 'MDADependency'  ) OR 
   ( ( %S |N ) %== 'MDAAttribute'  ) OR 
   ( ( %S |N ) %== 'MDASubStereotype'  ) OR 
   ( ( %S |N ) %== 'MDASubChild'  ) OR 
   ( ( %S |N ) %== 'MDAStateMachine'  ) OR 
   ( ( %S |N ) %== 'MDAState'  ) OR 
   ( ( %S |N ) %== 'MDAStateAction'  ) OR 
   ( ( %S |N ) %== 'MDATransition'  ) OR 
   ( ( %S |N ) %== 'MDATransitionAttribute'  ) OR 
   ( ( %S |N ) %== 'MDAParameter'  ) OR 
   ( ( %S |N ) %== 'MDATemplates'  ) OR 
   ( ( %S |N ) %== 'MDALayer'  ) OR 
   ( ( %S |N ) %== 'MDALibrary'  ) OR 
   ( ( %S |N ) %== 'MDAReport'  ) ) then
 begin
//	true\
   true 
//	]
 end // if
 else
 begin
//	false\
   false 
//	}\
 end // else
// - это пока не экспортируем, с этим надо разбираться отдельно - нужно слово StereotypeStereotypeProducer и через него надо определять MDAClass и MDACategory

//f _is_MDA_elem
; // is_MDA_stereo

: is_MDA_elem OBJECT IN %S
//@ %SU
//	[{%SS=MDAClass|%SS=MDAAbstractClass|%SS=MDAUtilityPack|%SS=MDAGenerator|%SS=MDACategory|%SS=MDADependency}{\
 if ( ( %S |S ) %== 'MDAClass' OR 
   ( ( %S |S ) %== 'MDAAbstractClass'  ) OR 
   ( ( %S |S ) %== 'MDAUtilityPack'  ) OR 
   ( ( %S |S ) %== 'MDAGenerator'  ) OR 
   ( ( %S |S ) %== 'MDACategory'  ) OR 
   ( ( %S |S ) %== 'MDADependency'  ) ) then
 begin
//	true\
   true 
//	]
 end // if
 else
 begin
//	false\
   false 
//	}\
 end // else

//f _is_MDA_oper
; // is_MDA_elem

: is_MDA_oper OBJECT IN %S
//@ %SU
//	[{%SC=Operation}{\
 if ( ( %S |C ) %== 'Operation' ) then
 begin
//	[{%f_is_MDA_elem(%S%P)=true}{\
  if ( ( [%f] is_MDA_elem %( %S ->P  )% ) %==  true ) then
  begin
//	true\
    true 
//	]\
  end // if
  else
  begin
//	false\
    false 
//	}\
  end // else
//	]
 end // if
 else
 begin
//	false\
   false 
//	}\
 end // else

//f _out_MDA_params
; // is_MDA_oper

: out_MDA_params OBJECT IN %S
//	[{%f_is_MDA_oper(%S)=true}\
 if ( ( [%f] is_MDA_oper %( %S )% ) %==  true ) then
 begin
//	%f_out_params(%S)\
  [%f] out_params %( %S )% 
//	]
 end // if

//f _out_access
; // out_MDA_params

: out_access OBJECT IN %S
//	[{%SV=PrivateAccess}{\
 if ( ( %S |V ) %== 'PrivateAccess' ) then
 begin
//	PRIVATE \
  'PRIVATE '
//	]
 end // if
 else
 begin
//	[{%SV=ProtectedAccess}\
  if ( ( %S |V ) %== 'ProtectedAccess' ) then
  begin
//	PROTECTED \
   'PROTECTED '
//	]\
  end // if
//	}\
 end // else

//f _is_op
; // out_access

: is_op OBJECT IN %S
//	[{%SC=Operation|%S#f_IsMethod()=true}{\
 if ( ( %S |C ) %== 'Operation' OR 
   ( ( %S %?f IsMethod %( )% ) %==  true  ) ) then
 begin
//	true\
   true 
//	]
 end // if
 else
 begin
//	false\
   false 
//	}\
 end // else

//f _is_attr
; // is_op

: is_attr OBJECT IN %S
//	[{%SC=Attribute}{\
 if ( ( %S |C ) %== 'Attribute' ) then
 begin
//	true\
   true 
//	]
 end // if
 else
 begin
//	false\
   false 
//	}\
 end // else

//f _out_META
; // is_attr

: out_META OBJECT IN %S
//	%f_clear_list(UP_LIST)\
 [%f] clear_list %( 'UP_LIST' )% 
//	%f_ups_to_list(S,UP_LIST)\
 [%f] ups_to_list %( 'S' %, 'UP_LIST' )% 
//	[\
 if NOT-EMPTY
 begin
//	<{}{%f_is_empty(UP_LIST)=false}{W}\
  INTEGER VAR l_Counter l_Counter := 0
  while true
  begin
   if ( ( [%f] is_empty %( 'UP_LIST' )% ) %==  false ) then
   begin
//	[%f_pop_first_to_var(UP_LIST,UP)\
    if NOT-EMPTY
    begin
     [%f] pop_first_to_var %( 'UP_LIST' %, 'UP' )% 

//	%f_split_to_list(VALS,%{UP}N, = )\
     [%f] split_to_list %( 'VALS' %, ( get_global_var ( 'UP' ) |N ) %, ' = ' )% 
//	%f_pop_first_to_var(VALS,LEFT)\
     [%f] pop_first_to_var %( 'VALS' %, 'LEFT' )% 
//	%f_pop_first_to_var(VALS,RIGHT)\
     [%f] pop_first_to_var %( 'VALS' %, 'RIGHT' )% 
//	%f_set_var(LEFT,"%f_cut_quotes("%{LEFT}N")")\
     [%f] set_var %( 'LEFT' %, [%f] cut_quotes %( ( get_global_var ( 'LEFT' ) |N ) )% )% 
//	%f_set_var(RIGHT,"%f_cut_quotes("%{RIGHT}N")")\
     [%f] set_var %( 'RIGHT' %, [%f] cut_quotes %( ( get_global_var ( 'RIGHT' ) |N ) )% )% 
//	%f_set_var(RIGHT,"%f_fine_string("%{RIGHT}N")")\
     [%f] set_var %( 'RIGHT' %, [%f] fine_string %( ( get_global_var ( 'RIGHT' ) |N ) )% )% 

//	[\
     if NOT-EMPTY
     begin
//	[{"%{RIGHT}N"!=""}\
      if ( ( ( get_global_var ( 'RIGHT' ) |N ) ) %!= '' ) then
      begin

// - не выводим пустые значения
//	[{%f_is_default_up_value(%S,%{LEFT},%{RIGHT})!=true}\
       if ( ( [%f] is_default_up_value %( %S %, ( get_global_var ( 'LEFT' ) ) %, ( get_global_var ( 'RIGHT' ) ) )% ) %!=  true ) then
       begin
//	#  \%upv \
        out_indent '  %upv '


//	"%{LEFT}N" \
        ( get_global_var ( 'LEFT' ) |N ) ' '
//	%f_out_val("%{RIGHT}N")
        [%f] out_val %( ( get_global_var ( 'RIGHT' ) |N ) )% 
//	]\
       end // if
//	]\
      end // if
//	]\
     end // if
     NOP


//	]>\
    end // if
    NOP

    ++! l_Counter
   end // if
   else
    break
  end // while
//	]\
 end // if
 NOP
//	%f_clear_list(VALS)\
 [%f] clear_list %( 'VALS' )% 
//	%f_clear_list(UP_LIST)
 [%f] clear_list %( 'UP_LIST' )% 

//f _out_METAs
; // out_META

: out_METAs OBJECT IN %S
//	[\n# \%META
 if NOT-EMPTY
 begin
  #13#10
  out_indent ' %META'
//	%f_out_META(%S)\
  [%f] out_META %( %S )% 
//	# ; // \%META]
  out_indent ' ; // %META' 
 end // if
 NOP

//f _mangle_stereo
; // out_METAs

: mangle_stereo OBJECT IN %S
//	[\
 if NOT-EMPTY
 begin
//	\<\<[{"%SS"!=""}{%SC}\
  '<<'
  if ( ( %S |S ) %!= '' ) then
  begin
//	[{%SS=MDAClass}\
   if ( ( %S |S ) %== 'MDAClass' ) then
   begin
//	[{%SN=MDAClass|%SN=MDACategory|%SN=MDAAbstractClass|%SN=MDADependency|%SN=MDAAttribute|%SN=MDAOperation|%SN=MDAParameter}\
    if ( ( %S |N ) %== 'MDAClass' OR 
      ( ( %S |N ) %== 'MDACategory'  ) OR 
      ( ( %S |N ) %== 'MDAAbstractClass'  ) OR 
      ( ( %S |N ) %== 'MDADependency'  ) OR 
      ( ( %S |N ) %== 'MDAAttribute'  ) OR 
      ( ( %S |N ) %== 'MDAOperation'  ) OR 
      ( ( %S |N ) %== 'MDAParameter'  ) ) then
    begin
//	@\
     '@'
//	]\
    end // if
//	]\
   end // if
//	%f_str_replace(%SS, ,_)\
   [%f] str_replace %( %S |S %, ' ' %, '_' )% 
//	]\>\> \
  end // if
  else
  begin
   %S |C 
  end // else
  '>> '
//	]
 end // if
 NOP

//f _out_sig
; // mangle_stereo

: out_sig OBJECT IN %S
//	[{"%SS"=""&"%f_out_param_type_prim(%S%T)"!=""}{\
 if ( ( %S |S ) %== '' AND 
   ( ( [%f] out_param_type_prim %( %S ->T  )% ) %!= ''  ) ) then
 begin
//	%f_out_param_type_prim(%S%T) FUNCTION \
  [%f] out_param_type_prim %( %S ->T  )% ' FUNCTION '
//	]\
 end // if
 else
 begin
//	%f_mangle_stereo(%S)\
  [%f] mangle_stereo %( %S )% 
//	}\
 end // else

//	%f_mangle_name(%S)\
 [%f] mangle_name %( %S )% 
//	%f_out_MDA_params(%S)
 [%f] out_MDA_params %( %S )% 

//f _out_MDA_op
; // out_sig

: out_MDA_op OBJECT IN %S
//	[{%f_is_MDA_oper(%S)=true}\
 if ( ( [%f] is_MDA_oper %( %S )% ) %==  true ) then
 begin
//	%f_out_sig(%S)\
  [%f] out_sig %( %S )% 
//	%f_out_METAs(%S)
  [%f] out_METAs %( %S )% 
//	# %U[{_%1U}\n#  NotImplemented\n# ]
  out_indent ' '
  %Usersection (
   '_'
   %1 |U 
  )
  (
   #13#10
   out_indent '  NotImplemented'#13#10
   out_indent ' ' 
  ) // Usersection
 //	#; // %f_out_name_comment_prim(%S)\
  out_indent '; // '
  [%f] out_name_comment_prim %( %S )% 
//	]
 end // if

//f _is_Redefinition
; // out_MDA_op

: is_Redefinition OBJECT IN %S
//	[{%f_is_MDA_elem(%S)=true}\
 if ( ( [%f] is_MDA_elem %( %S )% ) %==  true ) then
 begin
//	[{%f_is_MDA_oper(%S)!=true&%SS!=MDADependency}\
  if ( ( [%f] is_MDA_oper %( %S )% ) %!=  true AND 
    ( ( %S |S ) %!= 'MDADependency'  ) ) then
  begin
//	[{"<{}{%RN=%SN}{C}>"!="0"|"<{}{%GN=%SN}{C}>"!="0"}\
   if ( 
    INTEGER VAR l_Counter l_Counter := 0
    for %S%R
    begin
     OBJECT IN %R
     if ( ( %R |N ) %== ( %S |N ) ) then
     begin

      ++! l_Counter
     end // if
    end // for R
    l_Counter
    %!= 0 OR 
     ( 
    INTEGER VAR l_Counter l_Counter := 0
    for %S%G
    begin
     OBJECT IN %G
     if ( ( %G |N ) %== ( %S |N ) ) then
     begin

      ++! l_Counter
     end // if
    end // for G
    l_Counter
    %!= 0  ) ) then
   begin
//	true\
     true 
//	]\
   end // if
//	]\
  end // if
//	]
 end // if

//f _out_abstraction
; // is_Redefinition

: out_abstraction OBJECT IN %S
//	[{%Sa=final}{\
 if ( ( %S |a ) %== 'final' ) then
 begin
//	FINAL \
  'FINAL '
//	]
 end // if
 else
 begin
//	[{%Sa=abstract}\
  if ( ( %S |a ) %== 'abstract' ) then
  begin
//	ABSTRACT \
   'ABSTRACT '
//	]\
  end // if
//	}\
 end // else

//f _out_linktype
; // out_abstraction

: out_linktype OBJECT IN %S
//	[{%Sl=lnk}{\
 if ( ( %S |l ) %== 'lnk' ) then
 begin
//	LINK \
  'LINK '
//	]
 end // if
 else
 begin
//	[{%Sa=ref}\
  if ( ( %S |a ) %== 'ref' ) then
  begin
//	REFERENCE \
   'REFERENCE '
//	]\
  end // if
//	}\
 end // else

//f _dump_to_FORTH
; // out_linktype

: dump_to_FORTH OBJECT IN %S
//	[
 if NOT-EMPTY
 begin
  #13#10

//	#// Необходимые forward определения
  out_indent '// Необходимые forward определения'
//	<# // %FN %FU
  INTEGER VAR l_Counter l_Counter := 0
  for %S%F
  begin
   OBJECT IN %F
   if true then
   begin
    out_indent ' // '
    %F |N ' '
    %F |U 
//	>

    ++! l_Counter
   end // if
  end // for F
//	]\
 end // if
 NOP

//	#[{%S#f_is_virtual()=true}SUMMONED ]\
 out_indent if ( ( %S %?f is_virtual %( )% ) %==  true ) then
 begin
  'SUMMONED ' 
 end // if

//	[{%f_is_Redefinition(%S)=true}\
 if ( ( [%f] is_Redefinition %( %S )% ) %==  true ) then
 begin
//	REDEFINITION \
  'REDEFINITION '
//	]\
 end // if

//	%f_out_access(%S)\
 [%f] out_access %( %S )% 

//	%f_out_abstraction(%S)\
 [%f] out_abstraction %( %S )% 
//	%f_out_linktype(%S)\
 [%f] out_linktype %( %S )% 

//	%f_out_sig(%S)
 [%f] out_sig %( %S )% 

//	# \%UID '%SU'\
 out_indent ' %UID '''
 %S |U ''''

//	[{"%SD"!=""&"%SD"!="undefined"}\
 if ( ( %S |D ) %!= '' AND 
   ( ( %S |D ) %!= 'undefined'  ) ) then
 begin
//	\n# \%SUMMARY '%f_fine_string("%SD")' ;]\
  #13#10
  out_indent ' %SUMMARY '''
  [%f] fine_string %( %S |D )% ''' ;' 
 end // if

//	[{%TN!=void}\
 if ( ( %T |N ) %!= 'void' ) then
 begin
//	[\n# \%TARGET %f_safe_link_to_element(%T)]\
  if NOT-EMPTY
  begin
   #13#10
   out_indent ' %TARGET '
   [%f] safe_link_to_element %( %T )% 
  end // if
  NOP
//	]\
 end // if

//	[{"%VU"!=""}{\
 if ( ( %V |U ) %!= '' ) then
 begin
//	[\n# \%VALUE %f_safe_link_to_element(%V)]\
  if NOT-EMPTY
  begin
   #13#10
   out_indent ' %VALUE '
   [%f] safe_link_to_element %( %V )% 
  end // if
  NOP
//	]\
 end // if
 else
 begin
//	[{"%VN"!=""}\
  if ( ( %V |N ) %!= '' ) then
  begin


//	[{%SS=list}{\
   if ( ( %S |S ) %== 'list' ) then
   begin
//	%f_split_to_list(VALS,%VN,|)\
    [%f] split_to_list %( 'VALS' %, %V |N %, '|' )% 
//	%f_pop_first_to_var(VALS,LEFT)\
    [%f] pop_first_to_var %( 'VALS' %, 'LEFT' )% 
//	[\n# \%VALUE %f_out_val(%f_fine_string("%{LEFT}N"))]\
    if NOT-EMPTY
    begin
     #13#10
     out_indent ' %VALUE '
     [%f] out_val %( [%f] fine_string %( ( get_global_var ( 'LEFT' ) |N ) )% )% 
    end // if
    NOP
//	[\n# \%VALUES
    if NOT-EMPTY
    begin
     #13#10
     out_indent ' %VALUES'
//	<{}{%f_is_empty(VALS)=false}{W}\
     INTEGER VAR l_Counter l_Counter := 0
     while true
     begin
      if ( ( [%f] is_empty %( 'VALS' )% ) %==  false ) then
      begin
//	[%f_pop_first_to_var(VALS,LEFT)\
       if NOT-EMPTY
       begin
        [%f] pop_first_to_var %( 'VALS' %, 'LEFT' )% 
//	#  %f_out_val(%f_fine_string("%{LEFT}N"))
        out_indent '  '
        [%f] out_val %( [%f] fine_string %( ( get_global_var ( 'LEFT' ) |N ) )% )% 
//	]\
       end // if
       NOP
//	>\

       ++! l_Counter
      end // if
      else
       break
     end // while
//	# ; // \%VALUES]\
     out_indent ' ; // %VALUES' 
    end // if
    NOP


//	%f_clear_list(VALS)\
    [%f] clear_list %( 'VALS' )% 
//	]\
   end // if
   else
   begin
//	[\n# \%VALUE %f_out_val(%f_fine_string("%VN"))]\
    if NOT-EMPTY
    begin
     #13#10
     out_indent ' %VALUE '
     [%f] out_val %( [%f] fine_string %( %V |N )% )% 
    end // if
    NOP
//	}\
   end // else

// - SS=list


//	]\
  end // if
//	}\
 end // else

//	[{%S#f_IsProjectGroup()!=true}\
 if ( ( %S %?f IsProjectGroup %( )% ) %!=  true ) then
 begin
//	[\n# \%INCLUDES
  if NOT-EMPTY
  begin
   #13#10
   out_indent ' %INCLUDES'
//	#  <{\n#  }{"%CO"!=""}'%f_str_replace(%Co,/,\\)' %f_out_name_comment(%C)>
   out_indent '  '
   INTEGER VAR l_Counter l_Counter := 0
   for %S%C
   begin
    OBJECT IN %C
    if ( ( %C |O ) %!= '' ) then
    begin
     if ( l_Counter >0 ) then ( #13#10
     out_indent '  ' )
     ''''
     [%f] str_replace %( %C |o %, '/' %, '\' )% ''' '
     [%f] out_name_comment %( %C )% 
     ++! l_Counter
    end // if
   end // for C
//	# ; // \%INCLUDES]\
   out_indent ' ; // %INCLUDES' 
  end // if
  NOP
//	]\
 end // if

//	[\n# \%DEPENDS
 if NOT-EMPTY
 begin
  #13#10
  out_indent ' %DEPENDS'
//	#  <{\n#  }\
  out_indent '  '
  INTEGER VAR l_Counter l_Counter := 0
  for %S%D
  begin
   OBJECT IN %D
   if true then
   begin
    if ( l_Counter >0 ) then ( #13#10
    out_indent '  ' )
//	%f_safe_link_to_element(%D)\
    [%f] safe_link_to_element %( %D )% 
//	>

    ++! l_Counter
   end // if
  end // for D
//	# ; // \%DEPENDS]\
  out_indent ' ; // %DEPENDS' 
 end // if
 NOP

//	%f_out_METAs(%S)\
 [%f] out_METAs %( %S )% 

//	[\n# \%FORWARDS
 if NOT-EMPTY
 begin
  #13#10
  out_indent ' %FORWARDS'
//	#  <{\n#  }\
  out_indent '  '
  INTEGER VAR l_Counter l_Counter := 0
  for %S%F
  begin
   OBJECT IN %F
   if true then
   begin
    if ( l_Counter >0 ) then ( #13#10
    out_indent '  ' )
//	%f_safe_link_to_element(%F)\
    [%f] safe_link_to_element %( %F )% 
//	>

    ++! l_Counter
   end // if
  end // for F
//	# ; // \%FORWARDS]\
  out_indent ' ; // %FORWARDS' 
 end // if
 NOP

//	[\n# \%TOBEINCLUDED
 if NOT-EMPTY
 begin
  #13#10
  out_indent ' %TOBEINCLUDED'
//	#  <{\n#  }\
  out_indent '  '
  INTEGER VAR l_Counter l_Counter := 0
  for %S%w
  begin
   OBJECT IN %w
   if true then
   begin
    if ( l_Counter >0 ) then ( #13#10
    out_indent '  ' )
//	%f_safe_link_to_element(%w)\
    [%f] safe_link_to_element %( %w )% 
//	>

    ++! l_Counter
   end // if
  end // for w
//	# ; // \%TOBEINCLUDED]\
  out_indent ' ; // %TOBEINCLUDED' 
 end // if
 NOP

//	[\n# \%RAISES
 if NOT-EMPTY
 begin
  #13#10
  out_indent ' %RAISES'
//	#  <{\n#  }\
  out_indent '  '
  INTEGER VAR l_Counter l_Counter := 0
  for %S%E
  begin
   OBJECT IN %E
   if true then
   begin
    if ( l_Counter >0 ) then ( #13#10
    out_indent '  ' )
//	%f_safe_link_to_element(%E)\
    [%f] safe_link_to_element %( %E )% 
//	>

    ++! l_Counter
   end // if
  end // for E
//	# ; // \%RAISES]\
  out_indent ' ; // %RAISES' 
 end // if
 NOP

//	[\n# \%RAISESINSET
 if NOT-EMPTY
 begin
  #13#10
  out_indent ' %RAISESINSET'
//	#  <{\n#  }\
  out_indent '  '
  INTEGER VAR l_Counter l_Counter := 0
  for %S%e
  begin
   OBJECT IN %e
   if true then
   begin
    if ( l_Counter >0 ) then ( #13#10
    out_indent '  ' )
//	%f_safe_link_to_element(%e)\
    [%f] safe_link_to_element %( %e )% 
//	>

    ++! l_Counter
   end // if
  end // for e
//	# ; // \%RAISESINSET]\
  out_indent ' ; // %RAISESINSET' 
 end // if
 NOP

//	[\n# \%IMPLEMENTS
 if NOT-EMPTY
 begin
  #13#10
  out_indent ' %IMPLEMENTS'
//	#  <{\n#  }\
  out_indent '  '
  INTEGER VAR l_Counter l_Counter := 0
  for %S%R
  begin
   OBJECT IN %R
   if true then
   begin
    if ( l_Counter >0 ) then ( #13#10
    out_indent '  ' )

//	%f_out_uid(%R) %f_out_name_comment(%R)
//	%f_link_to_element(%R,%S)>
    [%f] link_to_element %( %R %, %S )% 
    ++! l_Counter
   end // if
  end // for R
//	# ; // \%IMPLEMENTS]\
  out_indent ' ; // %IMPLEMENTS' 
 end // if
 NOP

//	[\n# \%INHERITS
 if NOT-EMPTY
 begin
  #13#10
  out_indent ' %INHERITS'
//	#  <{\n#  }\
  out_indent '  '
  INTEGER VAR l_Counter l_Counter := 0
  for %S%G
  begin
   OBJECT IN %G
   if true then
   begin
    if ( l_Counter >0 ) then ( #13#10
    out_indent '  ' )
//	%f_safe_link_to_element(%G)\
    [%f] safe_link_to_element %( %G )% 
//	>

    ++! l_Counter
   end // if
  end // for G
//	# ; // \%INHERITS]\
  out_indent ' ; // %INHERITS' 
 end // if
 NOP

//	[\n# \%REALIZES
 if NOT-EMPTY
 begin
  #13#10
  out_indent ' %REALIZES'
//	#  <{\n#  }\
  out_indent '  '
  INTEGER VAR l_Counter l_Counter := 0
  for %S%o
  begin
   OBJECT IN %o
   if true then
   begin
    if ( l_Counter >0 ) then ( #13#10
    out_indent '  ' )
//	%f_safe_link_to_element(%o)\
    [%f] safe_link_to_element %( %o )% 
//	>

    ++! l_Counter
   end // if
  end // for o
//	# ; // \%REALIZES]\
  out_indent ' ; // %REALIZES' 
 end // if
 NOP

//	[\n# \%OVERRIDES
 if NOT-EMPTY
 begin
  #13#10
  out_indent ' %OVERRIDES'
//	#  <{\n#  }\
  out_indent '  '
  INTEGER VAR l_Counter l_Counter := 0
  for %S%O
  begin
   OBJECT IN %O
   if true then
   begin
    if ( l_Counter >0 ) then ( #13#10
    out_indent '  ' )
//	%f_safe_link_to_element(%O)\
    [%f] safe_link_to_element %( %O )% 
//	>

    ++! l_Counter
   end // if
  end // for O
//	# ; // \%OVERRIDES]\
  out_indent ' ; // %OVERRIDES' 
 end // if
 NOP

//	%f_shift_intend(1)\
 [%f] shift_intend %( 1 )% 
//	[\n#\%PARAMETERS
 if NOT-EMPTY
 begin
  #13#10
  out_indent '%PARAMETERS'
//	%f_shift_intend(1)\
  [%f] shift_intend %( 1 )% 
//	[<{\n}{"%CO"=""&%CC=Parameter}%f_dump_to_FORTH(%C)>]
  if NOT-EMPTY
  begin
   INTEGER VAR l_Counter l_Counter := 0
   for %S%C
   begin
    OBJECT IN %C
    if ( ( %C |O ) %== '' AND 
     ( ( %C |C ) %== 'Parameter'  ) ) then
    begin
     if ( l_Counter >0 ) then ( #13#10 )
     [%f] dump_to_FORTH %( %C )% 
     ++! l_Counter
    end // if
   end // for C
  end // if
  NOP
//	%f_shift_intend(-1)\
  [%f] shift_intend %( -1 )% 
//	#; // \%PARAMETERS]\
  out_indent '; // %PARAMETERS' 
 end // if
 NOP
//	%f_shift_intend(-1)\
 [%f] shift_intend %( -1 )% 

//	%f_shift_intend(1)\
 [%f] shift_intend %( 1 )% 
//	[\n#\%LINKS
 if NOT-EMPTY
 begin
  #13#10
  out_indent '%LINKS'
//	%f_shift_intend(1)\
  [%f] shift_intend %( 1 )% 
//	[<{\n}{"%CO"=""&%CC=Dependency}%f_dump_to_FORTH(%C)>]
  if NOT-EMPTY
  begin
   INTEGER VAR l_Counter l_Counter := 0
   for %S%C
   begin
    OBJECT IN %C
    if ( ( %C |O ) %== '' AND 
     ( ( %C |C ) %== 'Dependency'  ) ) then
    begin
     if ( l_Counter >0 ) then ( #13#10 )
     [%f] dump_to_FORTH %( %C )% 
     ++! l_Counter
    end // if
   end // for C
  end // if
  NOP
//	%f_shift_intend(-1)\
  [%f] shift_intend %( -1 )% 
//	#; // \%LINKS]\
  out_indent '; // %LINKS' 
 end // if
 NOP
//	%f_shift_intend(-1)\
 [%f] shift_intend %( -1 )% 

//	%f_shift_intend(1)\
 [%f] shift_intend %( 1 )% 
//	[{%f_is_attr(%S)!=true}\
 if ( ( [%f] is_attr %( %S )% ) %!=  true ) then
 begin
//	[\n#\%ATTRIBUTES
  if NOT-EMPTY
  begin
   #13#10
   out_indent '%ATTRIBUTES'
//	%f_shift_intend(1)\
   [%f] shift_intend %( 1 )% 
//	[<{\n}{"%CO"=""&%f_is_attr(%C)=true}%f_dump_to_FORTH(%C)>]
   if NOT-EMPTY
   begin
    INTEGER VAR l_Counter l_Counter := 0
    for %S%C
    begin
     OBJECT IN %C
     if ( ( %C |O ) %== '' AND 
      ( ( [%f] is_attr %( %C )% ) %==  true  ) ) then
     begin
      if ( l_Counter >0 ) then ( #13#10 )
      [%f] dump_to_FORTH %( %C )% 
      ++! l_Counter
     end // if
    end // for C
   end // if
   NOP
//	%f_shift_intend(-1)\
   [%f] shift_intend %( -1 )% 
//	#; // \%ATTRIBUTES]\
   out_indent '; // %ATTRIBUTES' 
  end // if
  NOP
//	]\
 end // if
//	%f_shift_intend(-1)\
 [%f] shift_intend %( -1 )% 

//	%f_shift_intend(1)\
 [%f] shift_intend %( 1 )% 
//	[{%f_is_attr(%S)=true}\
 if ( ( [%f] is_attr %( %S )% ) %==  true ) then
 begin
//	[\n#\%INDEXES
  if NOT-EMPTY
  begin
   #13#10
   out_indent '%INDEXES'
//	%f_shift_intend(1)\
   [%f] shift_intend %( 1 )% 
//	[<{\n}#\%INDEX %f_mangle_name(%C) [\%TARGET %f_safe_link_to_element(%C%T)\n#]\
   if NOT-EMPTY
   begin
    INTEGER VAR l_Counter l_Counter := 0
    for %S%C
    begin
     OBJECT IN %C
     if true then
     begin
      if ( l_Counter >0 ) then ( #13#10 )
      out_indent '%INDEX '
      [%f] mangle_name %( %C )% ' '
      if NOT-EMPTY
      begin
       '%TARGET '
       [%f] safe_link_to_element %( %C ->T  )% #13#10
       out_indent 
      end // if
      NOP
//	;>]
      ';' 
      ++! l_Counter
     end // if
    end // for C
   end // if
   NOP
//	%f_shift_intend(-1)\
   [%f] shift_intend %( -1 )% 
//	#; // \%INDEXES]\
   out_indent '; // %INDEXES' 
  end // if
  NOP
//	]\
 end // if
//	%f_shift_intend(-1)\
 [%f] shift_intend %( -1 )% 

//	%f_shift_intend(1)\
 [%f] shift_intend %( 1 )% 
//	[\n#\%OPERATIONS
 if NOT-EMPTY
 begin
  #13#10
  out_indent '%OPERATIONS'
//	%f_shift_intend(1)\
  [%f] shift_intend %( 1 )% 
//	[<{\n}{"%CO"=""&%f_is_op(%C)=true}%f_dump_to_FORTH(%C)>]
  if NOT-EMPTY
  begin
   INTEGER VAR l_Counter l_Counter := 0
   for %S%C
   begin
    OBJECT IN %C
    if ( ( %C |O ) %== '' AND 
     ( ( [%f] is_op %( %C )% ) %==  true  ) ) then
    begin
     if ( l_Counter >0 ) then ( #13#10 )
     [%f] dump_to_FORTH %( %C )% 
     ++! l_Counter
    end // if
   end // for C
  end // if
  NOP
//	%f_shift_intend(-1)\
  [%f] shift_intend %( -1 )% 
//	#; // \%OPERATIONS]\
  out_indent '; // %OPERATIONS' 
 end // if
 NOP
//	%f_shift_intend(-1)\
 [%f] shift_intend %( -1 )% 

//	%f_shift_intend(1)\
 [%f] shift_intend %( 1 )% 
//	[\n#\%CHILDREN
 if NOT-EMPTY
 begin
  #13#10
  out_indent '%CHILDREN'
//	%f_shift_intend(1)\
  [%f] shift_intend %( 1 )% 
//	[#\n<{\n}{"%CO"=""&%CC!=Parameter&%CC!=Dependency&%f_is_attr(%C)!=true&%f_is_op(%C)!=true}%f_dump_to_FORTH(%C)>]\
  if NOT-EMPTY
  begin
   out_indent #13#10
   INTEGER VAR l_Counter l_Counter := 0
   for %S%C
   begin
    OBJECT IN %C
    if ( ( %C |O ) %== '' AND 
     ( ( %C |C ) %!= 'Parameter'  ) AND 
     ( ( %C |C ) %!= 'Dependency'  ) AND 
     ( ( [%f] is_attr %( %C )% ) %!=  true  ) AND 
     ( ( [%f] is_op %( %C )% ) %!=  true  ) ) then
    begin
     if ( l_Counter >0 ) then ( #13#10 )
     [%f] dump_to_FORTH %( %C )% 
     ++! l_Counter
    end // if
   end // for C
  end // if
  NOP
//	%f_shift_intend(-1)\
  [%f] shift_intend %( -1 )% 
//	\n\
  #13#10
//	#; // \%CHILDREN]\
  out_indent '; // %CHILDREN' 
 end // if
 NOP
//	%f_shift_intend(-1)\
 [%f] shift_intend %( -1 )% 

//	%f_shift_intend(1)\
//	[\
//	\n#\
//	<{\n#}{%Ca!=abstract&%f_is_MDA_oper(%C)=true}\
//	[%f_out_abstraction(%C)%f_out_MDA_op(%C,%S)]>\
//	]\
//	%f_shift_intend(-1)\

//	%f_shift_intend(1)\
//	[\
//	\n#\
//	<{\n#}REALIZE %f_out_MDA_op(%o,%S)>\
//	]\
//	%f_shift_intend(-1)\

//	%f_shift_intend(1)\
//	[\
//	\n#\
//	<{\n#}OVERRIDE %f_out_MDA_op(%O,%S)>\
//	]\
//	%f_shift_intend(-1)\

//	\n#; // %f_out_name_comment_prim(%S)\
 #13#10
 out_indent '; // '
 [%f] out_name_comment_prim %( %S )% 

//	[{%f_is_MDA_elem(%S)=true&%f_is_MDA_inner(%S)!=true}\
 if ( ( [%f] is_MDA_elem %( %S )% ) %==  true AND 
   ( ( [%f] is_MDA_inner %( %S )% ) %!=  true  ) ) then
 begin

//	[{%f_is_MDA_elem(%S)=true&%f_is_MDA_stereo(%S)!=true&%f_is_MDA_inner(%S)!=true}\

//	[{%SS!=MDAUtilityPack}\

// - с этим будем разбираться отдельно - надо ли экспортировать в основной словарь MDAUtilityPack

//   а также каким именно образом это делать, и зачем они вообще нужны (подозреваю, чтобы вызывать их функции)

//   и вообще эту проверку можно вставить в реализацию слова [EXPORT]

//   Пользуйтесь своими собственными шаблонами :-)
//	\n#\
  #13#10
  out_indent 
//	\[EXPORT\] %f_mangle_link_name(%S)\
  '[EXPORT] '
  [%f] mangle_link_name %( %S )% 
//	]\
//	]
 end // if

//#UC END# *4F368B80039Efor49F99EB100B2*
; // dump_to_FORTH


// реализация абстрактного стереотипа Документация::MDAGenerator
// Генерация модели в MDKnow
//+ wiki
implementation @ <<Project>>
<<generator>> wiki OBJECT IN %S
//#UC START# *46E6D4BB0339for49F99EB100B2*
//C conf:/[{"%S{space name}"!=""}{%SN}%S{space name}],key:%S{space key},guid:%SU/Home/%S%f_wiki_ProjectPageName():%SU
//O %S%f_wiki_ProjectPageName()
//	%f_wiki_header(%S)
 [%f] wiki_header %( %S )% 
//	[h2. Модель[
 if NOT-EMPTY
 begin
  'h2. Модель'
  if NOT-EMPTY
  begin
   #13#10

//	
   #13#10

//	{info}Используемые другие проекты:
   '{info}Используемые другие проекты:'
//	<{}{%D#f_IsProject()=true}* \
   INTEGER VAR l_Counter l_Counter := 0
   for %S%D
   begin
    OBJECT IN %D
    if ( ( %D %?f IsProject %( )% ) %==  true ) then
    begin
     '* '
//	[{"%D{space key}"!=""}{\
     if ( ( %D get_up ( 'space key' ) ) %!= '' ) then
     begin
      '['
//	[{"%D{space name}"!=""}{\
      if ( ( %D get_up ( 'space name' ) ) %!= '' ) then
      begin
//	%D{space name}\
       %D get_up ( 'space name' ) 
//	]\
      end // if
      else
      begin
//	%DN\
       %D |N 
//	}\
      end // else
//	|%D{space key}:Home\
      '|'
      %D get_up ( 'space key' ) ':Home'
//	\]\
      ']'
//	] %f_k_link(%D)
     end // if
     else
     begin


//	[{"%D{space name}"!=""}{\
      if ( ( %D get_up ( 'space name' ) ) %!= '' ) then
      begin
//	%D{space name}\
       %D get_up ( 'space name' ) 
//	]\
      end // if
      else
      begin
//	%DN\
       %D |N 
//	}\
      end // else


//	}\[\
     end // else
     ' '
     [%f] k_link %( %D )% 
//	>\

     ++! l_Counter
    end // if
   end // for D
//	{info}]\
   '{info}' 
  end // if
  NOP


//	[
  if NOT-EMPTY
  begin
   #13#10

//	
   #13#10

//	{note}Дополнительные свойства:
   '{note}Дополнительные свойства:'
//	%S#f_wiki_up_print(){note}][{%mx=true&%Cx=true}
   %S %?f wiki_up_print %( )% '{note}' 
  end // if
  NOP
  if ( ( %m |x ) %==  true AND 
    ( ( %C |x ) %==  true  ) ) then
  begin
   #13#10

//	
   #13#10

//	<{----\n}_[{%mN!=Main}{Основная}%mN] диаграмма проекта:_
   INTEGER VAR l_Counter l_Counter := 0
   for %S%m
   begin
    OBJECT IN %m
    if true then
    begin
     if ( l_Counter >0 ) then ( '----'#13#10 )
     '_'
     if ( ( %m |N ) %!= 'Main' ) then
     begin
      %m |N 
     end // if
     else
     begin
      'Основная' 
     end // else
     ' диаграмма проекта:_'
//	%f_dump_diagram(m){ShowDiagram:%mU.jpg}
     [%f] dump_diagram %( 'm' )% '{ShowDiagram:'
     %m |U '.jpg}'
//	>]][

     ++! l_Counter
    end // if
   end // for m
  end // if
 end // if
 NOP
 if NOT-EMPTY
 begin
  #13#10

//	
  #13#10

//	h2. Состав проекта[
  'h2. Состав проекта'
  if NOT-EMPTY
  begin
   #13#10

//	
   #13#10

//	_Требования:_<{}{%CS=Requirements}
   '_Требования:_'
   INTEGER VAR l_Counter l_Counter := 0
   for %S%C
   begin
    OBJECT IN %C
    if ( ( %C |S ) %== 'Requirements' ) then
    begin
     #13#10

//	\# *%f_k_link(%C)*
     '# *'
     [%f] k_link %( %C )% '*'
//	_%C?_[, %f_str_replace(%CD,\n\n,\n\\\\)]>][
     '_'
     %C |? '_'
     if NOT-EMPTY
     begin
      ', '
      [%f] str_replace %( %C |D %, #13#10#13#10 %, #13#10'\\' )% 
     end // if
     NOP

     ++! l_Counter
    end // if
   end // for C
  end // if
  NOP
  if NOT-EMPTY
  begin
   #13#10

//	
   #13#10

//	_Модули:_<{}{%CS!=Requirements&%CS!=MDATemplates&%t_target_ex(%C)=false}
   '_Модули:_'
   INTEGER VAR l_Counter l_Counter := 0
   for %S%C
   begin
    OBJECT IN %C
    if ( ( %C |S ) %!= 'Requirements' AND 
     ( ( %C |S ) %!= 'MDATemplates'  ) AND 
     ( ( [%t] target_ex %( %C )% ) %==  false  ) ) then
    begin
     #13#10

//	\# *%f_k_link(%C)*
     '# *'
     [%f] k_link %( %C )% '*'
//	_%C?_[, %f_str_replace(%CD,\n\n,\n\\\\)]>][
     '_'
     %C |? '_'
     if NOT-EMPTY
     begin
      ', '
      [%f] str_replace %( %C |D %, #13#10#13#10 %, #13#10'\\' )% 
     end // if
     NOP

     ++! l_Counter
    end // if
   end // for C
  end // if
  NOP
  if NOT-EMPTY
  begin
   #13#10

//	
   #13#10

//	_Компилируемые цели и инсталляторы:_<{}{%t_target_ex(%C)=true}
   '_Компилируемые цели и инсталляторы:_'
   INTEGER VAR l_Counter l_Counter := 0
   for %S%C
   begin
    OBJECT IN %C
    if ( ( [%t] target_ex %( %C )% ) %==  true ) then
    begin
     #13#10

//	\# *%f_k_link(%C)*
     '# *'
     [%f] k_link %( %C )% '*'
//	_%C?_[, %f_str_replace(%CD,\n\n,\n\\\\)]>][
     '_'
     %C |? '_'
     if NOT-EMPTY
     begin
      ', '
      [%f] str_replace %( %C |D %, #13#10#13#10 %, #13#10'\\' )% 
     end // if
     NOP

     ++! l_Counter
    end // if
   end // for C
  end // if
  NOP
  if NOT-EMPTY
  begin
   #13#10

//	
   #13#10

//	_Модель шаблонов:_<{}{%CS=MDATemplates}
   '_Модель шаблонов:_'
   INTEGER VAR l_Counter l_Counter := 0
   for %S%C
   begin
    OBJECT IN %C
    if ( ( %C |S ) %== 'MDATemplates' ) then
    begin
     #13#10

//	\# *%f_k_link(%C)*
     '# *'
     [%f] k_link %( %C )% '*'
//	_%C?_[, %f_str_replace(%CD,\n\n,\n\\\\)]>]]<%CX>
     '_'
     %C |? '_'
     if NOT-EMPTY
     begin
      ', '
      [%f] str_replace %( %C |D %, #13#10#13#10 %, #13#10'\\' )% 
     end // if
     NOP

     ++! l_Counter
    end // if
   end // for C
  end // if
  NOP
 end // if
 NOP
 INTEGER VAR l_Counter l_Counter := 0
 for %S%C
 begin
  OBJECT IN %C
  if true then
  begin
   %C |X 
   ++! l_Counter
  end // if
 end // for C
//	%f_wiki_footer(%S)
 [%f] wiki_footer %( %S )% 
//#UC END# *46E6D4BB0339for49F99EB100B2*
; // wiki



////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

end. // <<Project>>

