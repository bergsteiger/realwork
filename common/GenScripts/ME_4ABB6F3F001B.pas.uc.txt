//#UC START# *47EA4E9002C6_4ABB6F3F001B_impl*
 inherited;
 InitControls;
//#UC END# *47EA4E9002C6_4ABB6F3F001B_impl*
//#UC START# *47EA4E9002C6_4ABB6F3F001B_var*
//#UC END# *47EA4E9002C6_4ABB6F3F001B_var*
//#UC START# *4A8E8F2E0195_4ABB6F3F001B_impl*
 UpdateInfoOnForm;

 Width := (550 * Screen.PixelsPerInch) div 96;


 BorderStyle := bsSingle;
 BorderIcons := [biSystemMenu];

 with pbLogo do
 begin
  SetBounds(12, 6, 200, 58);
  OnPaint := PbLogoPaint;
 end;

 l_Tops := pbLogo.Top + pbLogo.Height + lp_GetDelta;
 l_Tops := AdjustInfo(ShellCaptionLabel, ShellInfoLabel, l_Tops);
 l_Tops := AdjustInfo(AdapterCaptionLabel, AdapterInfoLabel, l_Tops);
 l_Tops := AdjustInfo(UserCountCaptionLabel, UserCountLabel, l_Tops);
 l_Tops := AdjustInfo(OwnerCaptionLabel, OwnerLabel, l_Tops);

 with UserInfoGroupBox do
 begin
  Top := l_Tops;
  Left := lp_GetDelta;
  Width := Self.ClientWidth - lp_GetDelta * 2;
  Anchors := [akLeft, akRight, akTop];
 end;

 l_Tops := AdjustInfo(LoginCaptionLabel, LoginLabel, 16, lp_GetDelta);
 l_Tops := AdjustInfo(UserCaptionLabel, UserNameLabel, l_Tops, lp_GetDelta);
 l_Tops := AdjustInfo(EMailCaptionLabel, EMailLabel, l_Tops, lp_GetDelta);

 UserInfoGroupBox.Height := l_Tops + c_Delta;

 with OkButton do
 begin
  Top := UserInfoGroupBox.Top + UserInfoGroupBox.Height + lp_GetDelta * 2;
  Left := Self.ClientWidth - Width - lp_GetDelta;
  Self.ClientHeight := Top + Height + lp_GetDelta;
  Default := True;
  Cancel := True;
  ModalResult := mrOk;

  Caption := str_vtMsgDlgOK.AsStr;
 end;

 with CopyrightCaptionLabel do
 begin
  AutoSize := True;
  Left := 10;
  Top := OkButton.Top + (OkButton.Height - Height) div 2;
  Transparent := True;
  Alignment := taRightJustify;
  WordWrap := False;
 end;

//#UC END# *4A8E8F2E0195_4ABB6F3F001B_impl*
//#UC START# *4A8E8F2E0195_4ABB6F3F001B_var*
const
 c_Delta = 6;
var
 l_RightInfoBorder: Integer;
 l_LeftInfoBorder: Integer;
 l_LeftLabelBorder: Integer;
 l_RightLabelBorder: Integer;
 l_Tops: Integer;
 l_WhiteHeight: Integer;

 function lp_GetDelta: Integer;
 begin
  Result := (c_Delta * Screen.PixelsPerInch) div 96;
 end;

 function AdjustInfo(aCaptionLabel, aLabel: TvtLabel; aTop: Integer; aGBShift: Integer = 0): Integer;
 begin
  with aCaptionLabel do
  begin
   WordWrap := True;

   AutoSize := True;
   Width := ((178 + aGBShift) * Screen.PixelsPerInch) div 96;
   AutoSize := False;
   Width := ((178 + aGBShift) * Screen.PixelsPerInch) div 96;

   Left := ((10 - aGBShift) * Screen.PixelsPerInch) div 96;
   Top := aTop;
   Transparent := True;
   Alignment := taRightJustify;
  end;
  with aLabel do
  begin
   AutoSize := True;
   WordWrap := True;
   Left := aCaptionLabel.Left + aCaptionLabel.Width + lp_GetDelta;
   Width := Parent.ClientWidth - Left - lp_GetDelta;
   Top := aTop;
   Transparent := True;
   Alignment := taLeftJustify;
   Anchors := [akLeft, akRight, akTop];
  end;      
  Result := Max(aCaptionLabel.Top + aCaptionLabel.Height, aLabel.Top + aLabel.Height) + lp_GetDelta;
 end;                       
//#UC END# *4A8E8F2E0195_4ABB6F3F001B_var*
//#UC START# *4ABB6F3F001B_ext:FileName
w:\garant6x\implementation\Garant\GbaNemesis\View\Common\Forms\About_Form.pas
//#UC END# *4ABB6F3F001B_ext:FileName
//#UC START# *5006D2A60192_4ABB6F3F001B_impl*
 if (c_BuildVersion <> 'X.XX.X.XXX') then
 begin
  ShellInfoLabel.CCaption := vcmFmt(str_Version_Message, [c_BuildVersion]);
 end
 else
  with TVersionInfo.Create, FileLongVersion do
  try
   ShellInfoLabel.CCaption := vcmFmt(str_Version_Message, [vcmFmt('%d.%d.%d.%d', [All[2], All[1], All[4], All[3]])]);
  finally
   Free;
  end;
 //
 ShellInfoLabel.CCaption := l3Cat([ShellInfoLabel.CCaption, vcmCStr(cServerMap[DefDataAdapter.AssemblyInfo.GetServerCapacity]^)]);

 if not DefDataAdapter.AssemblyInfo.GetIsCommerce then
  AdapterInfoLabel.CCaption := vcmCStr(cInternalVersionKindTitle[DefDataAdapter.AssemblyInfo.GetIsDebug,
                                                                 DefDataAdapter.CommonInterfaces.GetProductType]^)
 else
  AdapterInfoLabel.CCaption := vcmCStr(cVersionKindTitle[DefDataAdapter.CommonInterfaces.GetBaseType,
                                                         DefDataAdapter.AssemblyInfo.GetIsDebug,
                                                         DefDataAdapter.CommonInterfaces.GetProductType]^);


 DefDataAdapter.CommonInterfaces.GetLicenseRestrictions(l_UserCount);
 if lp_ShowCount(l_UserCount) then
 begin
  if l_UserCount.rPermanentUsers > 0 then
   UserCountLabel.CCaption := vcmFmt(str_AboutFullUserCountCaption, [l_UserCount.rUsers, l_UserCount.rPermanentUsers])
  else
   UserCountLabel.CCaption := vcmFmt(str_AboutUserCountCaption, [l_UserCount.rUsers]);
  UserCountLabel.Visible := True;
  UserCountCaptionLabel.Visible := True;
 end
 else
 begin
  UserCountLabel.Visible := False;
  UserCountCaptionLabel.Visible := False;
 end;

 GetCurrentOwnerInfo;
 GetCurrentUserInfo;
//#UC END# *5006D2A60192_4ABB6F3F001B_impl*
//#UC START# *5006D2A60192_4ABB6F3F001B_var*
const
 cInternalVersionKindTitle: array[Boolean, TProductType] of PvcmStringID = (
   (
  @str_cvkInternalNonDebugUnknown, // PT_UNKNOWN
  @str_cvkInternalNonDebugDVD, // PT_DVD
  @str_cvkInternalNonDebugMobile, // PT_MOBILE
  @str_cvkInternalNonDebugFileServer, // PT_FILESERVER
  @str_cvkInternalNonDebugDesktop, // PT_DESKTOP
  @str_cvkInternalNonDebugClientServer, // PT_CLIENTSERVER
                @str_cvkInternalNonDebugSupermobile // TODO: PT_SUPERMOBILE
   ),
  // DefDataAdapter.AssemblyInfo.GetIsDebug = true
   (
  @str_cvkInternalDebugUnknown, // PT_UNKNOWN
  @str_cvkInternalDebugDVD, // PT_DVD
  @str_cvkInternalDebugMobile, // PT_Mobile
  @str_cvkInternalDebugFileServer, // PT_FILESERVER
  @str_cvkInternalDebugDesktop, // PT_DESKTOP
  @str_cvkInternalDebugClientServer, // PT_CLIENTSERVER
                @str_cvkInternalDebugSuperMobile // PT_SUPERMOBILE
   )
 );

 cVersionKindTitle: array [TBaseType, boolean, TProductType] of PvcmStringID = (
  // DefDataAdapter.AssemblyInfo.GetBaseType = BT_UNKNOWN
  (
  // DefDataAdapter.AssemblyInfo.GetIsDebug = false
   (
  @str_Empty, // PT_UNKNOWN
  @str_Empty, // PT_DVD
  @str_Empty, // PT_MOBILE
  @str_Empty, // PT_FILESERVER
  @str_Empty, // PT_DESKTOP
  @str_Empty, // PT_CLIENTSERVER
  @str_Empty // PT_CLIENTSERVER
   ),
  // DefDataAdapter.AssemblyInfo.GetIsDebug = true
   (
  @str_Empty, // PT_UNKNOWN
  @str_Empty, // PT_DVD
  @str_Empty, // PT_Mobile
  @str_Empty, // PT_FILESERVER
  @str_Empty, // PT_DESKTOP
  @str_Empty, // PT_CLIENTSERVER
  @str_Empty // PT_CLIENTSERVER
   )
  ),
  // DefDataAdapter.AssemblyInfo.GetBaseType = BT_TRIAL
  (
  // DefDataAdapter.AssemblyInfo.GetIsDebug = false
   (
  @str_cvkTrialNonDebugUnknown, // PT_UNKNOWN
  @str_cvkTrialNonDebugDVD, // PT_DVD
  @str_cvkTrialNonDebugMobile, // PT_MOBILE
  @str_cvkTrialNonDebugFileServer, // PT_FILESERVER
  @str_cvkTrialNonDebugDesktop, // PT_DESKTOP
  @str_cvkTrialNonDebugClientServer, // PT_CLIENTSERVER
  @str_cvkTrialNonDebugSuperMobile // PT_SUPERMOBILE
   ),
  // DefDataAdapter.AssemblyInfo.GetIsDebug = true
   (
  @str_cvkTrialDebugUnknown, // PT_UNKNOWN
  @str_cvkTrialDebugDVD, // PT_DVD
  @str_cvkTrialDebugMobile, // PT_MOBILE
  @str_cvkTrialDebugFileServer, // PT_FILESERVER
  @str_cvkTrialDebugDesktop, // PT_DESKTOP
  @str_cvkTrialDebugClientServer, // PT_CLIENTSERVER
  @str_cvkTrialDebugSuperMobile // PT_SUPERMOBILE
   )
  ),
  // DefDataAdapter.AssemblyInfo.GetBaseType = BT_COMMERCIAL
  (
  // DefDataAdapter.AssemblyInfo.GetIsDebug = false
   (
  @str_cvkCommerceNonDebugUnknown, // PT_UNKNOWN
  @str_cvkCommerceNonDebugDVD, // PT_DVD
  @str_cvkCommerceNonDebugMobile, // PT_MOBILE
  @str_cvkCommerceNonDebugFileServer, // PT_FILESERVER
  @str_cvkCommerceNonDebugDesktop, // PT_DESKTOP
  @str_cvkCommerceNonDebugClientServer, // PT_CLIENTSERVER
  @str_cvkCommerceNonDebugSuperMobile // PT_SUPERMOBILE
   ),
  // DefDataAdapter.AssemblyInfo.GetIsDebug = true
   (
  @str_cvkCommerceDebugUnknown, // PT_UNKNOWN
  @str_cvkCommerceDebugDVD, // PT_DVD
  @str_cvkCommerceDebugMobile, // PT_MOBILE
  @str_cvkCommerceDebugFileServer, // PT_FILESERVER
  @str_cvkCommerceDebugDesktop, // PT_DESKTOP
  @str_cvkCommerceDebugClientServer, // PT_CLIENTSERVER
  @str_cvkCommerceDebugSuperMobile // PT_SUPERMOBILE
   )
  ),
  // DefDataAdapter.AssemblyInfo.GetBaseType = BT_NON_COMMERCIAL
  (
  // DefDataAdapter.AssemblyInfo.GetIsDebug = false
   (
  @str_cvkNonCommerceNonDebugUnknown, // PT_UNKNOWN
  @str_cvkNonCommerceNonDebugDVD, // PT_DVD
  @str_cvkNonCommerceNonDebugMobile, // PT_MOBILE
  @str_cvkNonCommerceNonDebugFileServer, // PT_FILESERVER
  @str_cvkNonCommerceNonDebugDesktop, // PT_DESKTOP
  @str_cvkNonCommerceNonDebugClientServer, // PT_CLIENTSERVER
  @str_cvkNonCommerceNonDebugSuperMobile // PT_SUPERMOBILE
   ),
  // DefDataAdapter.AssemblyInfo.GetIsDebug = true
   (
  @str_cvkNonCommerceDebugUnknown, // PT_UNKNOWN
  @str_cvkNonCommerceDebugDVD, // PT_DVD
  @str_cvkNonCommerceDebugMobile, // PT_MOBILE
  @str_cvkNonCommerceDebugFileServer, // PT_FILESERVER
  @str_cvkNonCommerceDebugDesktop, // PT_DESKTOP
  @str_cvkNonCommerceDebugClientServer, // PT_CLIENTSERVER
  @str_cvkNonCommerceDebugSuperMobile // PT_SUPERMOBILE
   )
  ),
  // DefDataAdapter.AssemblyInfo.GetBaseType = BT_DEMO
  (
  // DefDataAdapter.AssemblyInfo.GetIsDebug = false
   (
  @str_cvkDemoNonDebugUnknown, // PT_UNKNOWN
  @str_cvkDemoNonDebugDVD, // PT_DVD
  @str_cvkDemoNonDebugMobile, // PT_MOBILE
  @str_cvkDemoNonDebugFileServer, // PT_FILESERVER
  @str_cvkDemoNonDebugDesktop, // PT_DESKTOP
  @str_cvkDemoNonDebugClientServer, // PT_CLIENTSERVER
  @str_cvkDemoNonDebugSuperMobile // PT_SUPERMOBILE
   ),
  // DefDataAdapter.AssemblyInfo.GetIsDebug = true
   (
  @str_cvkDemoDebugUnknown, // PT_UNKNOWN
  @str_cvkDemoDebugDVD, // PT_DVD
  @str_cvkDemoDebugMobile, // PT_MOBILE
  @str_cvkDemoDebugFileServer, // PT_FILESERVER
  @str_cvkDemoDebugDesktop, // PT_DESKTOP
  @str_cvkDemoDebugClientServer, // PT_CLIENTSERVER
  @str_cvkDemoDebugSuperMobile // PT_SUPERMOBILE
   )
  )
 );

 cServerMap: array [TCapacity] of PvcmStringID = (
  @str_EmptyStr, // C_32
  @str_x64Server // C_64
 );

 {$I nsBuildVersion.inc}
var
 l_UserCount: TLicenseRestrictions;


 function lp_ShowCount(aUserCount: TLicenseRestrictions): Boolean;
 const
  cUsersCountHack = 2000;
  cPermanentUsersCountHack = 0;
 begin
  if (aUserCount.rUsers = cUsersCountHack) and (aUserCount.rPermanentUsers = cPermanentUsersCountHack) then
   Result := False
  else
   Result := aUserCount.rUsers > 1;
 end;
//#UC END# *5006D2A60192_4ABB6F3F001B_var*
//#UC START# *5006D2BC03C1_4ABB6F3F001B_impl*
 UserNameLabel.CCaption := nil;
 LoginLabel.CCaption := nil;
 EMailLabel.CCaption := nil;

 l_UserManager := defDataAdapter.NativeAdapter.MakeUserManager;
 try
  l_UserManager.GetSelfProfile(l_Profile);
  try
   // Имя пользователя
   l_Profile.GetName(l_Name);
   try
    UserNameLabel.CCaption := nsCStr(l_Name);
   finally
    l_Name := nil;
   end;
   // Login
   l_Profile.GetLogin(l_Name);
   try
    LoginLabel.CCaption := nsCStr(l_Name);
   finally
    l_Name := nil;
   end;
   // E-Mail
   l_Profile.GetMail(l_Name);
   try
    EMailLabel.CCaption := nsCStr(l_Name);
   finally
    l_Name := nil;
   end;
  finally
   l_Profile := nil;
  end;
 finally
  l_UserManager := nil;
 end;
//#UC END# *5006D2BC03C1_4ABB6F3F001B_impl*
//#UC START# *5006D2BC03C1_4ABB6F3F001B_var*
var
 l_UserManager : IUserManager;
 l_Profile     : IUserProfile;
 l_Name        : IString;
//#UC END# *5006D2BC03C1_4ABB6F3F001B_var*
//#UC START# *5006D2D20048_4ABB6F3F001B_impl*
 OwnerLabel.CCaption := nil;
 l_ComplectInfo := defDataAdapter.NativeAdapter.MakeComplectInfo;
 try
  l_ComplectInfo.GetOwner(l_Name);
  try
   OwnerLabel.CCaption := nsCStr(l_Name);
  finally
   l_Name := nil;
  end;
 finally
  l_ComplectInfo := nil;
 end;
//#UC END# *5006D2D20048_4ABB6F3F001B_impl*
//#UC START# *5006D2D20048_4ABB6F3F001B_var*
var
 l_ComplectInfo : IComplectInfo;
 l_Name         : IString;
//#UC END# *5006D2D20048_4ABB6F3F001B_var*
//#UC START# *5006D77F038F_4ABB6F3F001B_impl*
 nsPaintImage(dmStdRes.ilLogo, pbLogo);
//#UC END# *5006D77F038F_4ABB6F3F001B_impl*
//#UC START# *5006D77F038F_4ABB6F3F001B_var*
//#UC END# *5006D77F038F_4ABB6F3F001B_var*
