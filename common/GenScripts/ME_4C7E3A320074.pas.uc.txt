//#UC START# *4989D06D014E_4C7E3A320074exec_impl*
 dsMedicFirmList.AddBookmark;
//#UC END# *4989D06D014E_4C7E3A320074exec_impl*
//#UC START# *4989D06D014E_4C7E3A320074exec_var*
//#UC END# *4989D06D014E_4C7E3A320074exec_var*
//#UC START# *4989D06D014E_4C7E3A320074test_impl*
 aParams.Op.Flag[vcm_ofEnabled] := Assigned(dsMedicFirmList) and HasCurrent;
//#UC END# *4989D06D014E_4C7E3A320074test_impl*
//#UC START# *4989D06D014E_4C7E3A320074test_var*
//#UC END# *4989D06D014E_4C7E3A320074test_var*
//#UC START# *4BDAF7B803CF_4C7E3A320074exec_impl*
 aParams.CallControl;
//#UC END# *4BDAF7B803CF_4C7E3A320074exec_impl*
//#UC START# *4BDAF7B803CF_4C7E3A320074exec_var*
//#UC END# *4BDAF7B803CF_4C7E3A320074exec_var*
//#UC START# *4BDAF7B803CF_4C7E3A320074test_impl*
 if not aParams.CallControl then
  aParams.Op.Flag[vcm_ofEnabled] := False;
//#UC END# *4BDAF7B803CF_4C7E3A320074test_impl*
//#UC START# *4BDAF7B803CF_4C7E3A320074test_var*
//#UC END# *4BDAF7B803CF_4C7E3A320074test_var*
//#UC START# *4C4EAC20007F_4C7E3A320074exec_impl*
 if Assigned(dsMedicFirmList) then
 begin
  // http://mdp.garant.ru/pages/viewpage.action?pageId=414849606
  l_Container := nsNewWindow(NativeMainForm);
  if (l_Container <> nil) then
  try
   TDocumentService.Instance.OpenDocument(dsMedicFirmList.MakeNewDocInfo, l_Container);
  finally
   l_Container := nil;
  end;
 end;
//#UC END# *4C4EAC20007F_4C7E3A320074exec_impl*
//#UC START# *4C4EAC20007F_4C7E3A320074exec_var*
var
 l_Container: IvcmContainer;
//#UC END# *4C4EAC20007F_4C7E3A320074exec_var*
//#UC START# *4C4EAC20007F_4C7E3A320074test_impl*
 aParams.Op.Flag[vcm_ofEnabled] := HasCurrent;
//#UC END# *4C4EAC20007F_4C7E3A320074test_impl*
//#UC START# *4C4EAC20007F_4C7E3A320074test_var*
//#UC END# *4C4EAC20007F_4C7E3A320074test_var*
//#UC START# *4C7E3A320074_ext:FileName
w:\garant6x\implementation\Garant\GbaNemesis\View\Inpharm\Forms\PrimMedicFirmListOptions_Form.pas
//#UC END# *4C7E3A320074_ext:FileName
//#UC START# *4C7E3A320074impl_uses*
 , Base_Operations_F1Services_Contracts
//#UC END# *4C7E3A320074impl_uses*
//#UC START# *4C7E4168031D_4C7E3A320074exec_impl*
 with ListTree do
 begin
  l_TreeSource := dsMedicFirmList.FiltrateByCountry(TreeStruct, GetCurrentNode,
   aParams.CurrentNode, l_Current);
  if Assigned(l_TreeSource) then
  begin
   Changing;
   try
    ContextFilter.BeginAssignState;
    try
     TreeStruct := l_TreeSource;
    finally
     ContextFilter.EndAssignState;
    end;
    vlbMakeItemVisible(Current);
   finally
    Changed;
   end;{try..finally}
  end;
 end;
//#UC END# *4C7E4168031D_4C7E3A320074exec_impl*
//#UC START# *4C7E4168031D_4C7E3A320074exec_var*
var
 l_TreeSource: Il3SimpleTree;
 l_Current: Integer;
//#UC END# *4C7E4168031D_4C7E3A320074exec_var*
//#UC START# *4C7E4168031D_4C7E3A320074test_impl*
 if Assigned(dsMedicFirmList) then
 begin
  with aParams do
  begin
   l_List := Op.SubNodes;
   if (l_List <> nil) then
   begin
    with l_List do
    begin
     ShowRoot := false;
     Tree := dsMedicFirmList.CountryFilterTree;
     if ((l_List.count = 0)) then
      Add(dsMedicFirmList.CountryFilterTree.RootNode);
     Current := dsMedicFirmList.CurrentCountryFilter;
     Op.SelectedString := nsCStr(dsMedicFirmList.CurrentCountryFilter.Text);
    end;//with l_List do
   end;//l_List <> nil
  end;//with aParams
 end;//if Assigned(CoDS) then
//#UC END# *4C7E4168031D_4C7E3A320074test_impl*
//#UC START# *4C7E4168031D_4C7E3A320074test_var*
var
 l_List : IvcmNodes;
//#UC END# *4C7E4168031D_4C7E3A320074test_var*
//#UC START# *54A2AF9C0157_4C7E3A320074exec_impl*
 if Assigned(dsMedicFirmList) then
 begin
  // http://mdp.garant.ru/pages/viewpage.action?pageId=414849606
  l_Container := nsNewWindow(NativeMainForm, vcm_okInNewTab);
  if (l_Container <> nil) then
  try
   TDocumentService.Instance.OpenDocument(dsMedicFirmList.MakeNewDocInfo, l_Container);
  finally
   l_Container := nil;
  end;
 end;
//#UC END# *54A2AF9C0157_4C7E3A320074exec_impl*
//#UC START# *54A2AF9C0157_4C7E3A320074exec_var*
var
 l_Container: IvcmContainer;
//#UC END# *54A2AF9C0157_4C7E3A320074exec_var*
