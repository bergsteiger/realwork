//#UC START# *479731C50290_54759BE1037A_impl*
 f_Finisher := nil;
 inherited;
//#UC END# *479731C50290_54759BE1037A_impl*
//#UC START# *479731C50290_54759BE1037A_var*
//#UC END# *479731C50290_54759BE1037A_var*
//#UC START# *54607DDC0159_54759BE1037A_impl*
 l_Message := aContext.rMessage as TncsDeliveryResult;
 if not TaskList.ForOneByIDF(L2AlcuTasksIteratorForOneByIDFAction(@DoProcess), l_Message.TaskID) then
  l3System.Msg2Log('Задача с идентификатором %s не найдена (результат передачи)', [l_Message.TaskID]);
 l3System.Msg2Log('Результат передачи %s - %s', [l_Message.TaskID, GetEnumName(TypeInfo(TncsResultKind), Ord(l_Message.ResultKind))]);
 l3System.Msg2Log('Передача результатов завершена');
//#UC END# *54607DDC0159_54759BE1037A_impl*
//#UC START# *54607DDC0159_54759BE1037A_var*
var
 l_Message: TncsDeliveryResult;

 function DoProcess(anItem: TddProcessTask): Boolean;
 begin
  Result := False;
  if l_Message.ResultKind = ncs_rkFail then
   anItem.Error('Доставка завершилась ошибкой');
  if l_Message.ResultKind <> ncs_rkRetry then
   f_Finisher.TaskDone(anItem)
  else
   anItem.RequestDelivery;
 end;

//#UC END# *54607DDC0159_54759BE1037A_var*
//#UC START# *5475AFFB0169_54759BE1037A_impl*
 inherited Create(aTaskList);
 f_FInisher := aFinisher;
//#UC END# *5475AFFB0169_54759BE1037A_impl*
//#UC START# *5475AFFB0169_54759BE1037A_var*
//#UC END# *5475AFFB0169_54759BE1037A_var*
