//#UC START# *479731C50290_578CA6EC0255_impl*
 FreeAndNil(f_Map);
 inherited;
//#UC END# *479731C50290_578CA6EC0255_impl*
//#UC START# *479731C50290_578CA6EC0255_var*
//#UC END# *479731C50290_578CA6EC0255_var*
//#UC START# *47A042E100E2_578CA6EC0255_impl*
 f_Map := TvcmAggregateContainerMap.Create;
//#UC END# *47A042E100E2_578CA6EC0255_impl*
//#UC START# *47A042E100E2_578CA6EC0255_var*
//#UC END# *47A042E100E2_578CA6EC0255_var*
//#UC START# *5609091B00C0_578CA7B90020_impl*
 Result := Integer(aB) - Integer(aA);
//#UC END# *5609091B00C0_578CA7B90020_impl*
//#UC START# *5609091B00C0_578CA7B90020_var*
//#UC END# *5609091B00C0_578CA7B90020_var*
//#UC START# *578CA6EC0255_ext:FileName
w:\common\components\gui\Garant\VCM\implementation\vcmAggregateContainerRegistry.pas
//#UC END# *578CA6EC0255_ext:FileName
//#UC START# *578CA8350324_578CA6EC0255_impl*
 Result := nil;
 for l_Index := 0 to Pred(f_Map.Count) do
  if (f_Map.Items[l_Index].rValue = Pointer(aAggregate)) then
  begin
   Result := IvcmContainer(f_Map.Items[l_Index].rKey);
   Break;
  end;
 if (Result = nil) then
  if Supports(aAggregate, IvcmFormSet, l_FormSet) then
   Result := TvcmFormSetContainerRegistry.Instance.GetFormSetContainer(l_FormSet);
//#UC END# *578CA8350324_578CA6EC0255_impl*
//#UC START# *578CA8350324_578CA6EC0255_var*
var
 l_Index: Integer;
 l_FormSet: IvcmFormSet;
//#UC END# *578CA8350324_578CA6EC0255_var*
//#UC START# *578CAABD001E_578CA6EC0255_impl*
 Result := nil;
 if (f_Map.Has(Pointer(aContainer))) then
  Result := IvcmAggregate(f_Map.ValueByKey(Pointer(aContainer)));
 if (Result = nil) then
  Result := TvcmFormSetContainerRegistry.Instance.GetContainedFormSet(aContainer);
//#UC END# *578CAABD001E_578CA6EC0255_impl*
//#UC START# *578CAABD001E_578CA6EC0255_var*
//#UC END# *578CAABD001E_578CA6EC0255_var*
//#UC START# *578CAAD80333_578CA6EC0255_impl*
 Assert(aContainer <> nil);
 f_Map.Add(Pointer(aContainer), Pointer(aAggregate));
//#UC END# *578CAAD80333_578CA6EC0255_impl*
//#UC START# *578CAAD80333_578CA6EC0255_var*
//#UC END# *578CAAD80333_578CA6EC0255_var*
//#UC START# *578CAAF1030D_578CA6EC0255_impl*
 l_AggrIndex := -1;
 for l_Index := 0 to Pred(f_Map.Count) do
  if (f_Map.Items[l_Index].rValue = Pointer(aAggregate)) then
  begin
   l_AggrIndex := l_Index;
   Break;
  end;
 if (l_AggrIndex <> -1) then
  f_Map.Delete(l_AggrIndex);
//#UC END# *578CAAF1030D_578CA6EC0255_impl*
//#UC START# *578CAAF1030D_578CA6EC0255_var*
var
 l_Index: Integer;
 l_AggrIndex: Integer;
//#UC END# *578CAAF1030D_578CA6EC0255_var*
//#UC START# *578CC3C40049_578CA6EC0255_impl*
 if (not (aForm.ZoneType in [vcm_ztModal, vcm_ztManualModal, vcm_ztSimpleFloat])) then
 begin
  l_Container := Pointer(aForm.NativeMainForm);
  if f_Map.Has(l_Container) then
   f_Map.Delete(f_Map.IndexByKey(l_Container));
  f_Map.Add(l_Container, Pointer(aForm.Aggregate));
 end;
//#UC END# *578CC3C40049_578CA6EC0255_impl*
//#UC START# *578CC3C40049_578CA6EC0255_var*
var
 l_Container: Pointer;
//#UC END# *578CC3C40049_578CA6EC0255_var*
