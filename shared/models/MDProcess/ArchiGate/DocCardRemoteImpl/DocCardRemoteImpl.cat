
(object Petal
    version    	50
    _written   	"Rose 2006.0.0.061205"
    charSet    	204)

(object Class_Category "DocCardRemoteImpl"
    is_unit    	TRUE
    is_loaded  	TRUE
    attributes 	(list Attribute_Set
	(object Attribute
	    tool       	"MDA Generator"
	    name       	"AbstarctOperation"
	    value      	"regular")
	(object Attribute
	    tool       	"MDA Generator"
	    name       	"GlobalLocally"
	    value      	"false")
	(object Attribute
	    tool       	"MDA Generator"
	    name       	"IsNative"
	    value      	"false")
	(object Attribute
	    tool       	"MDA Generator"
	    name       	"ElementCreationOrder"
	    value      	"77483533210")
	(object Attribute
	    tool       	"MDA Generator"
	    name       	"WikiPageID (wiki)"
	    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/ArchiGate/DocCardRemoteImpl|4E1444660220
	    ))
	(object Attribute
	    tool       	"MDA Generator"
	    name       	"SourceType (wiki)"
	    value      	"wiki")
	(object Attribute
	    tool       	"MDA Generator"
	    name       	"SELF GENERATED FILE (h)"
	    value      	"")
	(object Attribute
	    tool       	"MDA Generator"
	    name       	"SourceType (h)"
	    value      	"file")
	(object Attribute
	    tool       	"MDA Generator User Properties"
	    name       	"finished"
	    value      	"true")
	(object Attribute
	    tool       	"MDA Generator User Properties"
	    name       	"is namespace"
	    value      	"true")
	(object Attribute
	    tool       	"MDA Generator User Properties"
	    name       	"need UC"
	    value      	"false")
	(object Attribute
	    tool       	"MDA Generator"
	    name       	"ApplyedGens"
	    value      	"C++ интерфейсы и реализация|CORBA IDL|Java|Документация"))
    quid       	"4E1444660220"
    stereotype 	"Impl"
    visible_categories 	(list visibility_relationship_list
	(object Visibility_Relationship
	    quid       	"4E14461D02FB"
	    supplier   	"Logical View::MDProcess::ArchiGate::DocCardRemote"
	    quidu      	"4E14421B00DD"))
    exportControl 	"Public"
    logical_models 	(list unit_reference_list
	(object Class "SearcherImpl"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"76471955430")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/ArchiGate/DocCardRemoteImpl/SearcherImpl.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (fctr.java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/ArchiGate/DocCardRemoteImpl/SearcherImplFactoryImpl.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (fctr.java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4E14463002AC_CUSTOM_IMPORT*"
		    value      	"//#UC START# *4E14463002AC_CUSTOM_IMPORT*¤import ru.garant.shared.ConfluenceCore.Helpers.ContainerManager;¤import ru.garant.MDProcess.DocCardChange.DocCardChangeDAO.CopyDAO;¤import ru.garant.MDProcess.DocCardChange.DocCardChangeDAO.GarDocDAO;¤import ru.garant.MDProcess.DocCardChange.DocCardChangeDAO.PaperCopy;¤import ru.garant.MDProcess.DocCardChange.DocCardChangeDAO.Partner;¤import ru.garant.MDProcess.DocCardChange.DocCardChangeDAO.SiteCopyDAO;¤import ru.garant.MDProcess.DocCardChange.DocCardChangeDAO.UVSQuestDAO;¤import ru.garant.MDProcess.DocCardChange.DocCardCommon.MultiTiffCreator;¤import ru.garant.MDProcess.DocCardChange.DocCardCommon.PartnerManager;¤import ru.garant.MDProcess.DocCardChange.DocCardCommonImpl.CachedPartnerManager;¤import ru.garant.MDProcess.DocCardChange.DocCardSupport.DpoUvsHelper;¤import ru.garant.MDProcess.DocCardChange.Entities.ConnectedStatus;¤import ru.garant.MDProcess.DocCardChange.Entities.DocCard;¤import ru.garant.MDProcess.DocCardChange.Entities.InstancyTypes;¤import ru.garant.MDProcess.DocCardChange.Entities.UVSQuery;¤import ru.garant.MDProcess.ArchiGate.Images.PostProcessor;¤import ru.garant.MDProcess.ArchiGate.ImagesImpl.DocCardRemoteHelper;¤¤import java.io.IOException;¤import java.io.InputStream;¤import java.util.ArrayList;¤import java.util.Arrays;¤import java.util.Calendar;¤import java.util.Collections;¤import java.util.Comparator;¤import java.util.Date;¤import java.util.GregorianCalendar;¤import java.util.Iterator;¤import java.util.List;¤import java.util.Map;¤import java.util.Set;¤import java.util.TimeZone;¤import java.util.TreeMap;¤import java.util.TreeSet;¤¤import org.apache.commons.collections.CollectionUtils;¤import org.apache.commons.lang.StringUtils;¤¤import com.atlassian.confluence.labels.Label;¤import com.atlassian.confluence.pages.Attachment;¤import com.atlassian.confluence.pages.Page;¤import com.atlassian.confluence.setup.bandana.ConfluenceBandanaContext;¤import com.google.common.collect.Lists;¤¤import net.sf.hibernate.HibernateException;¤import net.sf.hibernate.Query;¤//#UC END# *4E14463002AC_CUSTOM_IMPORT*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4E14463002AC_CUSTOM_CLASS_DEFINITION*"
		    value      	"//#UC START# *4E14463002AC_CUSTOM_CLASS_DEFINITION*¤//#UC END# *4E14463002AC_CUSTOM_CLASS_DEFINITION*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4E14463002AC_CUSTOM_METHODS_AND_DATA*"
		    value      	(value Text 
|//#UC START# *4E14463002AC_CUSTOM_METHODS_AND_DATA*¤	static String[] docIssuersToStringArray (GarDocDAO gd) {¤		String[] ret = new String[gd.getAdditionalDocIssuers().size() + 1];¤		ret[0] = getDocIssuerPath(gd.getDocIssuer());¤		int index = 1;¤		for (Long id : gd.getAdditionalDocIssuers()) {¤			ret[index] = getDocIssuerPath(id);¤			index++;¤		}¤		return ret;¤	}¤¤	public static String getDocIssuerPath(long id){¤		String path = "";¤		Page docIssuer = (Page)ContainerManager.Factory.get().getPageManager().getAbstractPage(id);¤		path = docIssuer.getTitle();¤		Label labelOgvFolder = ContainerManager.Factory.get().getLabelManager().getLabel("ogv_folder");¤		while(docIssuer != null && !docIssuer.getLabels().contains(labelOgvFolder)){¤			docIssuer = docIssuer.getParent();¤			if(docIssuer != null && !docIssuer.getLabels().contains(labelOgvFolder)){¤				path = docIssuer.getTitle() + "\\" + path;¤			}¤		};¤		return path;¤	}¤¤	static String numbersToString (GarDocDAO gd) {¤		String ret = gd.getNumber();¤		for (String numb: gd.getAdditionalNumbers()) {¤			ret += "/" + numb;¤		}¤		return ret;¤	}¤	static String[] blocksToStringArray (GarDocDAO gd) {¤		String[] ret = new String[gd.getBlocks().size()];¤		for (int i = 0; i < gd.getBlocks().size(); i++) {¤			ret[i] = gd.getBlocks().get(i).getShortName();¤		}¤		return ret;¤	}¤¤	final public static class FiltrateUnExported implements Filter {¤		public void doFilter(List<GarDocDAO> garDocs, Map<GarDocDAO, List<UVSQuestDAO>> gardocsGrouped, Date since) {¤			Iterator<GarDocDAO> it = garDocs.iterator();¤			while (it.hasNext()) {¤				GarDocDAO gardoc = it.next();¤				//ОГВ не имеет метку uvs - удаляем из списка¤				long doIssuerId = gardoc.getDocIssuer();¤				Page docIssuer = ContainerManager.Factory.get().getPageManager().getPage(doIssuerId); ¤				if (docIssuer.getLabels().contains(ContainerManager.Factory.get().getLabelManager().getLabel("uvs")) == false) {¤					it.remove();¤					continue;¤				}¤¤				Iterator<UVSQuestDAO> uvsIt = gardocsGrouped.get(gardoc).iterator();¤				while (uvsIt.hasNext()) {¤					if (uvsIt.next().getPage().getLabels().contains(ContainerManager.Factory.get().getLabelManager().getLabel(DpoUvsHelper.NO_EXPORT)) == true) {¤						uvsIt.remove();¤					}¤				}¤¤				if (gardocsGrouped.get(gardoc).size() == 0) {¤					it.remove();¤				}¤			}¤		}	   ¤	}¤¤	final public static class FiltrateByMaxExportCount implements Filter {¤		private int maxExportCount_ = 1;¤		public FiltrateByMaxExportCount (int maxExportCount) {¤			maxExportCount_ = maxExportCount;¤		}¤¤		public void doFilter(List<GarDocDAO> garDocs, Map<GarDocDAO, List<UVSQuestDAO>> gardocsGrouped, Date since) {¤			//попросили 2500 тыщи доков - корба загнулась, будем отдавать максимум 50¤			Iterator<GarDocDAO> it = garDocs.iterator();¤			int i = 0;¤			Date lastTimestamp = null; ¤			while (it.hasNext()) {¤				i++;¤				GarDocDAO gd = it.next();¤				if (i > maxExportCount_) {¤					if (lastTimestamp == null) {¤						long timestamp = SearcherProcessor.getOldestCopyIn(SearcherProcessor.toCopyList(gardocsGrouped.get(gd))).getLastModificationDate().getTime();¤						//set millisecond to 0¤						timestamp = timestamp/1000*1000;¤						//add one second¤						timestamp += 1000;					   ¤						lastTimestamp = new Date(timestamp);¤					}				   ¤¤					if (lastTimestamp.before(SearcherProcessor.getOldestCopyIn(SearcherProcessor.toCopyList(gardocsGrouped.get(gd))).getLastModificationDate())) {					   ¤						Logs.LOG_D("MAX COUNT REJECT FOR: " + gd.getTopic() + "[" + gd.getId()+ "]");¤						it.remove();¤					}¤				}¤			}¤		}	   ¤	}¤¤	final public static class FiltrateWithBADAttachments implements Filter {¤		public void doFilter(List<GarDocDAO> garDocs, Map<GarDocDAO, List<UVSQuestDAO>> gardocsGrouped, Date since) {¤			//не экспортируем документы с битыми аттачами, такое редко, но бывает, обычно когда аттачей ну очень много и где-то не закрыли стримы¤			Iterator<GarDocDAO> it = garDocs.iterator();¤			while (it.hasNext()) {¤				GarDocDAO gardoc = it.next();¤				for (UVSQuestDAO uvs : gardocsGrouped.get(gardoc)) {¤					boolean isRemove = false;¤¤					List<Attachment> attList = DocCardRemoteHelper.getRealAttachments(uvs.getPage());¤					if (CollectionUtils.isEmpty(attList)) {¤						it.remove();¤						break;¤					}¤¤					for (Attachment a : attList) {¤						try {¤							InputStream is = a.getContentsAsStream();¤							if (is == null) {¤								Logs.LOG_E("Empty inputStream in attachment " + a.getFileName() + " with pageid=" + uvs.getId());¤								isRemove = true;¤								break;¤							}¤							is.close();¤						} catch (IOException e) {¤							Logs.LOG_E("Catch IOException in attachment " + a.getFileName() + " with pageid=" + uvs.getId());¤							Logs.LOG_SEX(e);¤							isRemove = true;¤							break;¤						}¤					}¤¤					if (isRemove) {¤						it.remove();¤						break;¤					}¤				}¤			}¤		}	   ¤	}¤¤¤	/*final public static class FiltrateByAttachmentsSize implements Filter {¤	   final long SIZE_LIMIT_IN_BYTES = 20*1024*1024;¤	   public void doFilter(List<GarDocDAO> garDocs, Map<GarDocDAO, List<UVSQuestDAO>> gardocsGrouped) {¤		   final Object limit = ContainerManager.Factory.get().getBandanaManager().getValue(¤				   new ConfluenceBandanaContext(), "SearcherImpl.EMAIL_SIZE_LIMIT_IN_BYTES"¤				   );¤		   Long sizeLimitInBytes = (limit != null && limit instanceof Long) ? (Long)limit: Long.valueOf(SIZE_LIMIT_IN_BYTES);		   ¤		   long currentSize = 0;¤		   Iterator<GarDocDAO> it = garDocs.iterator();¤		   while (it.hasNext()) {¤			   GarDocDAO gardoc = it.next();¤			   for (UVSQuestDAO uvs : gardocsGrouped.get(gardoc)) {¤				   List<Attachment> attList = DocCardRemoteHelper.getRealAttachments(uvs.getPage());¤				   for (Attachment a : attList) {¤						currentSize += a.getFileSize();¤				   }¤				   if (currentSize > sizeLimitInBytes) {¤					   it.remove();¤					   break;¤				   }¤			   }¤		   }¤	   }	   ¤   }*/¤¤¤	final static class LogExportedData {¤		private Set<GarDocDAO> allSearchedGarDocs_ = null;¤		public class LogExportedDataStart implements Filter {¤			public void doFilter(List<GarDocDAO> garDocs, Map<GarDocDAO, List<UVSQuestDAO>> gardocsGrouped, Date since) {¤				allSearchedGarDocs_ = new TreeSet<GarDocDAO> (new Comparator<GarDocDAO> () {¤					@Override¤					public int compare(GarDocDAO arg0, GarDocDAO arg1) {¤						return Long.valueOf(arg0.getId()).compareTo(arg1.getId());¤					}				   ¤				});¤¤				allSearchedGarDocs_.addAll(garDocs);¤			}¤		}¤¤		public class LogExportedDataFinish implements Filter {¤			public void doFilter(List<GarDocDAO> garDocs, Map<GarDocDAO, List<UVSQuestDAO>> gardocsGrouped, Date since) {¤				if (allSearchedGarDocs_ != null && allSearchedGarDocs_.size() > 0) {¤					StringBuffer sb = new StringBuffer();¤					for (GarDocDAO gd : garDocs) {¤						sb.append("\nEXPORTED TO ARCHI " + gd.getId() + "\t" + gd.getTopic() + "\t" + gd.getPage().getTitle());¤					}¤					if (sb.length() > 0) {¤						Logs.LOG_D("LogExportedData: ----------EXPORTED(" + garDocs.size() + ")----------" + sb.toString());¤					} else {¤						Logs.LOG_D("LogExportedData: nothing to export");¤					}¤¤					allSearchedGarDocs_.removeAll(garDocs);¤					sb = new StringBuffer();¤					for (GarDocDAO gd : allSearchedGarDocs_) {¤						sb.append("\nNOT EXPORTED TO ARCHI " + gd.getId() + "\t" + gd.getTopic() + "\t" + gd.getPage().getTitle());¤					}¤					if (sb.length() > 0) {¤						Logs.LOG_D("LogExportedData: ----------REMOVED(" + allSearchedGarDocs_.size() + ")----------" + sb.toString());¤					} else {¤						Logs.LOG_D("LogExportedData: nothing to remove");¤					}¤				}¤			}¤		}¤	}¤¤	public static class FiltrateForPartner implements Filter {¤		final static public int SEND_BY_EMAIL = 1;¤		final static public int EXPORT_TO_ARCHI = 2;¤		final int flag_;¤		public FiltrateForPartner (int flag) {¤			flag_ = flag;¤		}¤¤		public void doFilter(List<GarDocDAO> garDocs, Map<GarDocDAO, List<UVSQuestDAO>> gardocsGrouped, Date since) {¤			Iterator<GarDocDAO> it = garDocs.iterator();¤			while (it.hasNext()) {¤				GarDocDAO gardoc = it.next();¤				Partner p = new CachedPartnerManager(PartnerManager.Factory.get()).getPartnerForGarDoc(gardoc.getId(), gardoc.getBlocks(), gardoc.getAdditionalDocIssuers());¤				if (¤						(flag_ == EXPORT_TO_ARCHI && p.getIsExportToArchi())¤						|| (flag_ == SEND_BY_EMAIL && DpoUvsHelper.isSendMailForAllScriptsOfPartner(p, gardoc))¤				) {¤					//ok¤				} else {¤					it.remove();				   ¤				}¤			}¤		}	   ¤	}¤¤	final public static class FiltrateForSendByEmail extends FiltrateForPartner {¤		final long partnerId_;¤		public FiltrateForSendByEmail (long partnerId) {¤			super(SEND_BY_EMAIL);¤			partnerId_ = partnerId;¤		}¤¤		public void doFilter(List<GarDocDAO> garDocs, Map<GarDocDAO, List<UVSQuestDAO>> gardocsGrouped, Date since) {¤			Logs.LOG_D("FiltrateForSendByEmail::doFilter before super - " + garDocs.size());¤			super.doFilter(garDocs, gardocsGrouped, since);¤¤			Logs.LOG_D("FiltrateForSendByEmail::doFilter after super - " + garDocs.size());¤¤			Iterator<GarDocDAO> it = garDocs.iterator();¤			while (it.hasNext()) {¤				GarDocDAO gardoc = it.next();¤				Partner p =  new CachedPartnerManager(PartnerManager.Factory.get()).getPartnerForGarDoc(gardoc.getId(), gardoc.getBlocks(), gardoc.getAdditionalDocIssuers());¤				boolean ret = DpoUvsHelper.isSendMailForAllScriptsOfPartner(p, gardoc);¤				if (p.getId() != partnerId_ || ret == false) {¤					it.remove();	¤				}¤			}¤¤			Logs.LOG_D("FiltrateForSendByEmail::doFilter after filtrate - " + garDocs.size());¤		}	   ¤	}¤¤	final public static class FiltrateForExportToArchi extends FiltrateForPartner {¤		public FiltrateForExportToArchi () {¤			super(EXPORT_TO_ARCHI);¤		}¤	}¤¤	final public static class FiltrateForExportToArchiForPartner extends FiltrateForPartner {¤		final String partnerIdFromArchi_;¤		¤		public String getPartnerIdFromArchi () {¤			return partnerIdFromArchi_;¤		}¤		¤		public FiltrateForExportToArchiForPartner (String partnerIdFromArchi) {¤			super(EXPORT_TO_ARCHI);¤			partnerIdFromArchi_ = partnerIdFromArchi;¤		}¤		¤		public void doFilter(List<GarDocDAO> garDocs, Map<GarDocDAO, List<UVSQuestDAO>> gardocsGrouped, Date since) {			¤			Logs.LOG_D("FiltrateForExportToArchiForPartner::doFilter before super - " + garDocs.size() + ", archiId = " + partnerIdFromArchi_);¤			¤			super.doFilter(garDocs, gardocsGrouped, since);¤¤			Logs.LOG_D("FiltrateForExportToArchiForPartner::doFilter after super - " + garDocs.size());¤¤			Iterator<GarDocDAO> it = garDocs.iterator();¤			while (it.hasNext()) {¤				GarDocDAO gardoc = it.next();¤				Partner p =  new CachedPartnerManager(PartnerManager.Factory.get()).getPartnerForGarDoc(gardoc.getId(), gardoc.getBlocks(), gardoc.getAdditionalDocIssuers());¤				if (false == p.getArchiId().equals(partnerIdFromArchi_)) {¤					it.remove();	¤				}¤			}¤¤			Logs.LOG_D("FiltrateForExportToArchiForPartner::doFilter after filtrate - " + garDocs.size() + ", archiId = " + partnerIdFromArchi_);			¤		}¤	}¤	¤	final public static class FiltrateNTD implements Filter {¤		public void doFilter(List<GarDocDAO> garDocs, Map<GarDocDAO, List<UVSQuestDAO>> gardocsGrouped, Date since) {¤			Iterator<GarDocDAO> it = garDocs.iterator();¤			while (it.hasNext()) {¤				GarDocDAO gardoc = it.next();¤				long doIssuerId = gardoc.getDocIssuer();¤				Page docIssuer = ContainerManager.Factory.get().getPageManager().getPage(doIssuerId);¤				/*¤				 * Разработчик НТД - такого ОГВ нет в Арчи, по принятым соглашениям правильный ОГВ для таких документов указывается первым в списке  дополнительных¤				 * 	если соглашение нарушено - этот гардок так и отправляем, получим в Арчи ошибку, её увидят и поправят¤				 *  если не нарушено - устанавливаем главным ОГВ первый из дополнительных ¤				 */¤				if(docIssuer.getTitle().equals("Разработчик НТД")){¤					if(gardoc.getAdditionalDocIssuers().size() > 0) {¤						gardoc.setDocIssuer(gardoc.getAdditionalDocIssuers().get(0));¤					} ¤				}¤			}¤		}	   ¤	}¤¤	private final static String ARBITRAZHNIE_SUDI_IDS = "249954653, " + // Федеральный арбитражный суд Дальневосточного округа (ФАС Дальневосточного округа)¤			"249954658, " + // Федеральный арбитражный суд Уральского округа (ФАС Уральского округа) ¤			"249954655, " + // Федеральный арбитражный суд Поволжского округа (ФАС Поволжского округа) ¤			"249954659, " + // Федеральный арбитражный суд Центрального округа (ФАС Центрального округа) ¤			"241696802, " + // Федеральный арбитражный суд Московского округа (ФАС Московского округа)¤			"249954657, " + // Федеральный арбитражный суд Северо-Кавказского округа (ФАС Северо-Кавказского округа)¤			"249954654, " + // Федеральный арбитражный суд Западно-Сибирского округа (ФАС Западно-Сибирского округа)¤			"249954656, " + // Федеральный арбитражный суд Северо-Западного округа (ФАС Северо-Западного округа)¤			"249954652, " + // Федеральный арбитражный суд Восточно-Сибирского округа (ФАС Восточно-Сибирского округа)¤			"249954651, " + // Федеральный арбитражный суд Волго-Вятского округа (ФАС Волго-Вятского округа)¤			"249954661, " + // Первый арбитражный апелляционный суд ¤			"249954662, " + // Второй арбитражный апелляционный суд ¤			"249954663, " + // Третий арбитражный апелляционный суд ¤			"249954664, " + // Четвертый арбитражный апелляционный суд ¤			"249954665, " + // Пятый арбитражный апелляционный суд ¤			"249954666, " + // Шестой арбитражный апелляционный суд ¤			"249954667, " + // Седьмой арбитражный апелляционный суд ¤			"249954668, " + // Восьмой арбитражный апелляционный суд ¤			"249954669, " + // Девятый арбитражный апелляционный суд ¤			"249954670, " + // Десятый арбитражный апелляционный суд ¤			"249954671, " + // Одиннадцатый арбитражный апелляционный суд ¤			"249954672, " + // Двенадцатый арбитражный апелляционный суд ¤			"249954673, " + // Тринадцатый арбитражный апелляционный суд ¤			"249954674, " + // Четырнадцатый арбитражный апелляционный суд ¤			"249954675, " + // Пятнадцатый арбитражный апелляционный суд ¤			"249954676, " + // Шестнадцатый арбитражный апелляционный суд ¤			"249954677, " + // Семнадцатый арбитражный апелляционный суд ¤			"249954678, " + // Восемнадцатый арбитражный апелляционный суд ¤			"249954679, " + // Девятнадцатый арбитражный апелляционный суд ¤			"249954680, " + // Двадцатый арбитражный апелляционный суд ¤			"430282026, " + // Московский областной суд ¤			"430287915 "  // Московский городской суд ¤			;¤¤¤	final public static class FiltrateArbitrazhniejSudi  implements Filter {¤		public void doFilter(List<GarDocDAO> garDocs, Map<GarDocDAO, List<UVSQuestDAO>> gardocsGrouped, Date since) {¤			String[] idsArray = StringUtils.split(ARBITRAZHNIE_SUDI_IDS, ", ");¤			List<String> ids = Arrays.asList(idsArray);¤¤			Iterator<GarDocDAO> it = garDocs.iterator();¤			while (it.hasNext()) {¤				GarDocDAO gardoc = it.next();¤				if (ids.contains(String.valueOf(gardoc.getDocIssuer()))) {¤					it.remove();	¤				}¤			}¤		}	   ¤	}   ¤¤	public static List<UVSQuestDAO> filtrateForTop (GarDocDAO gardoc, List<UVSQuestDAO> copies, Date since) {¤		List<UVSQuestDAO> ret = new ArrayList<UVSQuestDAO>();¤		for (UVSQuestDAO q : copies) {¤			if (isTopDoc (gardoc, q, since)) {¤				ret.add(q);¤			}¤		}¤		return ret;	   ¤	}¤¤	public static List<UVSQuestDAO> filtrateForNoTop (GarDocDAO gardoc, List<UVSQuestDAO> copies, Date since) {¤		List<UVSQuestDAO> ret = new ArrayList<UVSQuestDAO>();¤		for (UVSQuestDAO q : copies) {¤			if (false == isTopDoc (gardoc, q, since)) {¤				ret.add(q);¤			}¤		}¤		return ret;	   ¤	}¤¤	private static boolean isTopDoc (GarDocDAO gardoc, UVSQuestDAO q, Date since) {¤		boolean isDoNothing = true;¤¤		UVSQuery uvs = UVSQuery.Factory.get(q.getId());¤		if (¤				DpoUvsHelper.hasDoNothingCommand(uvs)¤				|| (q.getCopy().getArchiExportDate() != null && q.getCopy().getCreationDate().before(since))¤				) {¤¤		} else {¤			isDoNothing = false;¤		}¤¤¤		if (isDoNothing) {¤			return false;¤		}¤¤		return gardoc.getInternet() || gardoc.getInstancy() == DpoUvsHelper.instancyTypesToByte(InstancyTypes.IN_VERSION) ||  gardoc.getInstancy() == DpoUvsHelper.instancyTypesToByte(InstancyTypes.QUICKLY);¤	}¤¤	final public static class FiltrateTopDocs implements Filter {¤		public void doFilter(List<GarDocDAO> garDocs, Map<GarDocDAO, List<UVSQuestDAO>> gardocsGrouped, Date since) {¤			Iterator<GarDocDAO> it = garDocs.iterator();¤			while (it.hasNext()) {¤				GarDocDAO gardoc = it.next();¤				List<UVSQuestDAO> cps = filtrateForTop(gardoc, gardocsGrouped.get(gardoc), since);¤				if (CollectionUtils.isEmpty(cps)) {¤					it.remove();¤				} else {¤					gardocsGrouped.put(gardoc, cps);¤				}¤			}¤		}	   ¤	}¤¤	final public static class FiltrateNoTopDocs implements Filter {¤		public void doFilter(List<GarDocDAO> garDocs, Map<GarDocDAO, List<UVSQuestDAO>> gardocsGrouped, Date since) {¤			Iterator<GarDocDAO> it = garDocs.iterator();¤			while (it.hasNext()) {¤				GarDocDAO gardoc = it.next();¤				List<UVSQuestDAO> cps = filtrateForNoTop(gardoc, gardocsGrouped.get(gardoc), since);¤				if (CollectionUtils.isEmpty(cps)) {¤					it.remove();¤				} else {¤					gardocsGrouped.put(gardoc, cps);¤				}¤			}¤¤		}	   ¤	}¤¤	final public static class FiltrateByMaxTiffCountInAttachment implements Filter {¤		public void doFilter(List<GarDocDAO> garDocs, Map<GarDocDAO, List<UVSQuestDAO>> gardocsGrouped, Date since) {¤			//если тифов на странице много мы пытаемся их в мультитиф засунуть и падаем, фиг - пусть руками добавляют¤			Iterator<GarDocDAO> it = garDocs.iterator();¤			while (it.hasNext()) {¤				GarDocDAO gardoc = it.next();¤				for (UVSQuestDAO uvs : gardocsGrouped.get(gardoc)) {¤					List<Attachment> atts = DocCardRemoteHelper.getRealAttachments(uvs.getPage());¤					if(DocCardRemoteHelper.allListHasTiffType(atts) && atts.size() > 100) {¤						it.remove();¤						break;¤					}				   ¤				}¤			}		   ¤		}¤	}¤¤	final public static class FiltrateWithNullTopic implements Filter {¤		public void doFilter(List<GarDocDAO> garDocs, Map<GarDocDAO, List<UVSQuestDAO>> gardocsGrouped, Date since) {¤			/*¤			 * нулевой топик у доков, которые при назначении топиков из арчи его не получили, т.е. не нашлось по реквизитам¤			 * что бы ничего не перетирать и не создавать дубли - удаляем¤			 */¤			Iterator<GarDocDAO> it = garDocs.iterator();¤			while (it.hasNext()) {¤				GarDocDAO gardoc = it.next();¤				if(gardoc.getTopic() == 0) {¤					it.remove();¤				}¤			}   ¤		}		¤	}¤¤	final public static class FiltrateDocumentWithoutBlocks implements Filter {¤		public void doFilter(List<GarDocDAO> garDocs, Map<GarDocDAO, List<UVSQuestDAO>> gardocsGrouped, Date since) {¤			//Если блоки не заданы, т.е. список блоков пустой - выкидывать из списка.¤			Iterator<GarDocDAO> it = garDocs.iterator();¤			while (it.hasNext()) {¤				GarDocDAO gardoc = it.next();¤				if(gardoc.getBlocks().size() == 0){¤					it.remove();¤				}¤			}   ¤		}   ¤	}¤¤	final public static class FiltrateDocumentCreationDateWhichMoreThanNow implements Filter {¤		public void doFilter(List<GarDocDAO> garDocs, Map<GarDocDAO, List<UVSQuestDAO>> gardocsGrouped, Date since) {¤			//проверяет что если дата документа (creationDate) больше текущей даты, то такой документ удаляется из списка экспорта¤			Iterator<GarDocDAO> it = garDocs.iterator();¤			while (it.hasNext()) {¤				GarDocDAO gardoc = it.next();¤				if(gardoc.getCreationDate() != null && new Date().before(gardoc.getCreationDate())){¤					it.remove();¤				}¤			}   ¤		}   ¤	}¤¤	final public static class FiltrateDocumentWithoutAttachments implements Filter {¤		public void doFilter(List<GarDocDAO> garDocs, Map<GarDocDAO, List<UVSQuestDAO>> gardocsGrouped, Date since) {¤			Iterator<GarDocDAO> it = garDocs.iterator();¤			while (it.hasNext()) {¤				GarDocDAO gardoc = it.next();¤				boolean needDelete = false;¤				for (UVSQuestDAO uvs : gardocsGrouped.get(gardoc)) {¤					if (DocCardRemoteHelper.getRealAttachments(uvs.getPage()).size() == 0) {¤						needDelete = true;¤						break;¤					}¤				}¤				if (needDelete) {¤					it.remove();¤				}¤			}   ¤		}   ¤	}¤¤	static Map<GarDocDAO, List<CopyDAO>> convert (final Map<GarDocDAO, List<UVSQuestDAO>> gardocAndReqs) {¤		Map<GarDocDAO, List<CopyDAO>> ret = new TreeMap<GarDocDAO, List<CopyDAO>> (GarDocDAO.GAR_DOC_COMPARATOR);¤		for (Map.Entry<GarDocDAO, List<UVSQuestDAO>> elem : gardocAndReqs.entrySet()) {¤			ret.put(elem.getKey(), SearcherProcessor.toCopyList(elem.getValue()));¤		}¤		return ret;¤	}¤¤	public static List<GarDocDAO> makeListOfClonesAndSortByCopyCreationDate (final Map<GarDocDAO, List<CopyDAO>> gardocAndCopies) throws CloneNotSupportedException {¤		//фильтры могут поменять поля - если не клонировать, эти изменения применятся к живому объекту¤		List<GarDocDAO> docsNew = new ArrayList<GarDocDAO>(gardocAndCopies.keySet().size());¤		for(GarDocDAO garDoc : gardocAndCopies.keySet()){¤			//надо синхронизовать копии и сам гардок с базой, иногда с кэшом какая-то муть наступает и кэш рассихронизируется¤¤			try {¤				ContainerManager.Factory.get().getSession().refresh(garDoc);¤			} catch (HibernateException he) {¤				Logs.LOG_SEX(he);¤			}¤¤			for (CopyDAO cp : garDoc.getCopies()) {¤				try {¤					ContainerManager.Factory.get().getSession().refresh(cp);¤				} catch (HibernateException he) {¤					Logs.LOG_SEX(he);¤				}¤			}¤¤			docsNew.add(garDoc.clone());¤		}¤¤¤¤		//должны отдавать список, отсортированный по дате создания образов, т.е. вначале списка гардок с самымй старым образом, в конце - с самым молодым¤		//такая сортировка позволяет в случае падений клиента получить не все заново, а только начиная с последнего после которого упали¤		Collections.sort(docsNew, new Comparator<GarDocDAO>() {¤			@Override¤			public int compare(GarDocDAO arg0, GarDocDAO arg1) {¤				//только сортировка по самой старой копии, иначе можем потерять образы, если документы будут отсечены фильтром ¤				//MAX REJECT COUNT¤				CopyDAO copy0 = SearcherProcessor.getOldestCopyIn(gardocAndCopies.get(arg0));¤				CopyDAO copy1 = SearcherProcessor.getOldestCopyIn(gardocAndCopies.get(arg1));¤				return SearcherProcessor.COPY_BY_DATE_COMPARATOR.compare(copy0, copy1);¤			}				¤		});¤¤		return docsNew;¤	}¤¤	public static List<UVSQuestDAO> sortByConnectToF1First (List<UVSQuestDAO> reqsIn) {¤		List<UVSQuestDAO> reqs = new ArrayList<UVSQuestDAO>(reqsIn);¤		Collections.sort(reqs, new Comparator<UVSQuestDAO>() {¤			@Override¤			public int compare(UVSQuestDAO o1, UVSQuestDAO o2) {¤				UVSQuery uvs1 = UVSQuery.Factory.get(o1.getId());¤				UVSQuery uvs2 = UVSQuery.Factory.get(o2.getId());¤				¤				if (!DpoUvsHelper.hasCommandForReplayImage(uvs1) && DpoUvsHelper.hasCommandForReplayImage(uvs2)) {¤					return -1;¤				} else if (DpoUvsHelper.hasCommandForReplayImage(uvs1) && !DpoUvsHelper.hasCommandForReplayImage(uvs2)) {¤					return 1;¤				} else {¤					return SearcherProcessor.COPY_BY_DATE_COMPARATOR.compare(o1.getCopy(), o2.getCopy());¤				}¤			}¤		});¤		return reqs;¤	}¤	¤	public static void makeCommentForInputTaskForArchi (Date since, GarDocDAO gardoc, List<UVSQuestDAO> reqsIn, Gardoc remote) {¤		try {¤			¤			List<UVSQuestDAO> reqs = sortByConnectToF1First(reqsIn);			¤¤¤			Iterator<UVSQuestDAO> it = reqs.iterator();¤			int i = 0;¤			List<String> majorComments = new ArrayList<String>(reqs.size());¤			List<String> minorComments = new ArrayList<String>(reqs.size());¤			do {¤¤				String comment = "";¤¤				UVSQuestDAO q = it.next();¤¤				DocCard dc = DocCard.Factory.get(q.getGardoc().getId());¤				UVSQuery uvs = UVSQuery.Factory.get(q.getId());¤¤				if (dc.getIsConnected() == ConnectedStatus.IS_NOT_CONNECTED	) {¤					//МДП получает по почте этот лог обратно и использует его что бы следить какие образы перелились, а какие нет.¤					comment += "КАРТОЧКА; K" + DpoUvsHelper.cutNumber(q.getPage().getTitle());¤¤					majorComments.add(comment);¤				} else if (DpoUvsHelper.hasDoNothingCommand(uvs)) {¤					//для последующийх образов смысла нет в этой фразе никакого¤					if (i == 0) {¤						comment += "ПОВТОР - НИЧЕГО НЕ ДЕЛАТЬ; K" + DpoUvsHelper.cutNumber(q.getPage().getTitle());¤					} else {¤						comment += "K" + DpoUvsHelper.cutNumber(q.getPage().getTitle());¤					}¤¤					minorComments.add(comment);¤				} else if (q.getCopy().getArchiExportDate() != null && q.getCopy().getCreationDate().before(since)) {¤					//это просто обновленный образ¤					if (i == 0) {¤						comment += "ПОВТОР - НИЧЕГО НЕ ДЕЛАТЬ; K" + DpoUvsHelper.cutNumber(q.getPage().getTitle());¤					} else {¤						comment += "K" + DpoUvsHelper.cutNumber(q.getPage().getTitle());¤					}¤¤					minorComments.add(comment);¤				} else {¤					if (DpoUvsHelper.hasManagerCommand(uvs)) {¤						comment += toPhrase(DpoUvsHelper.getAdditionalImageCommand(uvs), "; ") ;¤						comment += toPhrase(DpoUvsHelper.addRpCommentFromContent(uvs), "; ");¤¤					}¤¤					comment += toPhrase(DpoUvsHelper.makeInstancy (uvs), " ");¤					if (gardoc.getInternet()) {¤						comment += "ИНТЕРНЕТ. ";¤					}						¤					comment += toPhrase(DpoUvsHelper.getBlockNames(q.getGardoc().getBlocks()), "; ");¤					if (StringUtils.isNotBlank(q.getGardoc().getRegistrationNumber())) {¤						comment += "МинЮст; ";¤					}¤¤					comment += (q.getCopy() instanceof PaperCopy) ? "БУМ. ": "ЭЛ. ";¤¤¤					comment += "Cтраниц: " + getPagesCountInImage (q) + ", размер: " + remote.images[i].data.length/1024 + "Kb; ";¤¤					comment += makeCopyCaption(q.getCopy(), gardoc.getCopies());¤¤					if (!DpoUvsHelper.hasManagerCommand(uvs)) {¤						comment += toPhrase(DpoUvsHelper.addRpCommentFromContent(uvs), "; ");¤					}¤¤					if (DpoUvsHelper.hasUVSCommentAndNeedTranslateToArchi(uvs)) {¤						comment += toPhrase(DpoUvsHelper.getUVSCommentFromContent(uvs), "; ");¤					}¤¤					comment += "K" + DpoUvsHelper.cutNumber(q.getPage().getTitle()) + "; ";					¤¤					comment += "Путь:";¤					if (q.getCopy().getDepository() != null) {¤						comment += q.getCopy().getDepository();¤					} else {¤						comment += "только в К";¤					}¤¤					majorComments.add(comment);¤				}¤¤				i++;				¤			} while (it.hasNext());¤¤			remote.comment = "";¤			for (List<String> comments : Arrays.asList(majorComments, minorComments)) {¤				for (String c : comments) {¤					if (StringUtils.isNotBlank(remote.comment)) {¤						remote.comment += "; ";¤					}¤					remote.comment += c;¤				}¤			}¤¤		} catch (Exception e) {¤			Logs.LOG_SEX(e);¤		}	   ¤	}¤¤	public static String makeQuery (String partnerIdFromArchi) {¤		String sQuery;¤		if (StringUtils.isEmpty(partnerIdFromArchi)) {¤				sQuery =¤					"select uvs from UVSQuestDAO as uvs" +¤							" where uvs.copy.lastModificationDate > :SINCE_TIME" +  // дополнительные имиджи которых добавили только что (у них gardoc.connectToF1Date может быть до timeFrom)¤							" and uvs.copy.lastModificationDate <= :CURRENT_TIME"¤						;¤		} else {¤			List<Partner> partnerList = PartnerManager.Factory.get().getPartnersByArchiId(partnerIdFromArchi);¤			String s = null;¤			for (Partner partner : partnerList) {¤				if (s == null) {¤					s = "";¤				} else {¤					s += " OR ";¤				}¤				s += "(uvs.gardoc.topic >= " + partner.getRangeLo() + " and uvs.gardoc.topic <= " + partner.getRangeHi() + ")";¤			}¤			sQuery =¤				"select uvs from UVSQuestDAO as uvs" +¤						" where uvs.copy.lastModificationDate > :SINCE_TIME" +  // дополнительные имиджи которых добавили только что (у них gardoc.connectToF1Date может быть до timeFrom)¤						" and uvs.copy.lastModificationDate <= :CURRENT_TIME" +¤						" and (" + s + ")"¤					;			¤		}¤		Logs.LOG_D("getNewAndUpdated: query = [" + sQuery + "]");¤		¤		return sQuery;¤	}¤	¤	public static List getNewAndUpdated (Date timeFrom, String partnerIdFromArchi) throws HibernateException {¤		partnerIdFromArchi = null; //старые топики, который нет в базе перестают уезжать в арчи¤		¤		String sQuery = makeQuery(partnerIdFromArchi);¤¤		Query q = ContainerManager.Factory.get().getSession().createQuery(sQuery);¤		q.setTimestamp("SINCE_TIME", timeFrom);¤¤¤		q.setTimestamp("CURRENT_TIME", upperTimeForNewAndUpdated());¤¤		return q.list();¤	}¤	¤	public static Date upperTimeForNewAndUpdated () {¤		Calendar current = GregorianCalendar.getInstance();¤		current.set(Calendar.MILLISECOND, 0);¤¤		current.add(Calendar.MINUTE, -5); //чтобы не пропустить те, которые в паралельной транзакции создаются¤		¤		return current.getTime();¤	}¤¤	public static Date fromTotalSecondFromEpoch (long timeInSec) {¤		return new Date (timeInSec*1000 - TimeZone.getDefault().getRawOffset());¤	}¤¤	private static int getPagesCountInImage (UVSQuestDAO q) throws IOException {¤		List<Attachment> atts = DocCardRemoteHelper.getRealAttachments(q.getPage());¤		if (atts.size() == 1 && DocCardRemoteHelper.allListHasTiffType(atts)) {¤			return MultiTiffCreator.Factory.make().numberOfTiffPages(atts.get(0).getContentsAsStream());¤		} else {¤			return atts.size();¤		}¤	}¤¤	private static String toPhrase (String str, String after) {¤		if (StringUtils.isNotBlank(str)) {¤			return str + after;¤		}¤		return "";¤	}¤¤	private static long LIMIT_FOR_IMAGE_SIZE = 20*1024*1024;¤	//¤	public static class LimitBySize implements PostProcessor {¤		String key_ = null;¤		public LimitBySize (final String key) {¤			key_ = key;¤		}¤¤		public List<Gardoc> process(List<Gardoc> gardocs, Map<Image, UVSQuestDAO> imageToReq, Map<Gardoc, GarDocDAO> gardocToGarDocDAO) {¤			Object limit = ContainerManager.Factory.get().getBandanaManager().getValue(¤					new ConfluenceBandanaContext(), key_¤					);¤¤			Long sizeLimitInBytes = (limit != null && limit instanceof Long) ? (Long)limit: Long.valueOf(LIMIT_FOR_IMAGE_SIZE);¤¤			long currentSize = 0;¤			int index;¤			for (index = 0; index < gardocs.size(); index++) {¤				Gardoc gardoc = gardocs.get(index);¤				for (Image image : gardoc.images) {¤					currentSize += image.data.length;¤				}¤¤				if (currentSize > sizeLimitInBytes) {¤					break;¤				}¤			}¤¤			if (currentSize > sizeLimitInBytes) {¤				Gardoc big = gardocs.get(index);¤				int lastIndex;¤				for (lastIndex = index-1; lastIndex >= 0; lastIndex--) {¤					Gardoc prev = gardocs.get(lastIndex);¤					if (prev.timestamp != big.timestamp) {¤						break;¤					}¤				}¤				if (lastIndex >= 0) {¤					gardocs.subList(lastIndex+1, gardocs.size()).clear();¤				} else {¤					//иначе выливка замрет, мы конечно огребем задержку, но через письму её увидим¤					gardocs.subList(1, gardocs.size()).clear();¤				}¤			}¤¤			currentSize = 0;¤			for (Gardoc gardoc : gardocs) {¤				for (Image image : gardoc.images) {¤					currentSize += image.data.length;¤				}¤			}¤¤			Logs.LOG_D("LIMIT_BY_SIZE result = " + currentSize);¤			return gardocs;¤		}¤	};¤¤	//¤	public static class RemoveImageWithBigSize implements PostProcessor {¤		String key_ = null;¤		public RemoveImageWithBigSize (final String key) {¤			key_ = key;¤		}¤¤		public List<Gardoc> process(List<Gardoc> gardocs, Map<Image, UVSQuestDAO> imageToReq, Map<Gardoc, GarDocDAO> gardocToGarDocDAO) {¤			Object limit = ContainerManager.Factory.get().getBandanaManager().getValue(¤					new ConfluenceBandanaContext(), key_¤					);¤¤			Long sizeLimitInBytes = (limit != null && limit instanceof Long) ? (Long)limit: Long.valueOf(LIMIT_FOR_IMAGE_SIZE);¤¤			Iterator<Gardoc> it = gardocs.iterator();¤			while (it.hasNext()) {¤				Gardoc gardoc = it.next();¤				for (Image image : gardoc.images) {¤					if (image.data.length > sizeLimitInBytes) {¤						Logs.LOG_W("RemoveImageWithMaxSize: size = " + image.data.length + ", topic = " + gardoc.topic);¤						image.data = new byte[0];¤					}¤				}¤			}¤			return gardocs;¤		}¤	};	¤¤	public static String makeCopyCaption(CopyDAO copy, Set<CopyDAO> copies) {¤		String result = ""; ¤		if (copy.getSrcTitle() != null) {¤			List<String> strings = new ArrayList<String>();¤			if (StringUtils.isNotBlank(copy.getSrcTitle().getName())) {¤				strings.add(copy.getSrcTitle().getName());¤			}¤			if (StringUtils.isNotBlank(copy.getSrcNumber())) {¤				strings.add((strings.size() == 1) ? ",№": "№");¤				strings.add(copy.getSrcNumber());¤			}¤			if (StringUtils.isNotBlank(copy.getSrcPage())) {¤				strings.add((strings.size() == 3) ? ",": (strings.size() == 1) ? ",стр.": "стр.");¤				strings.add(copy.getSrcPage());¤			}¤			if (strings.size() > 0) {							¤				strings.add("; ");¤			}¤¤			for (int j = 0; j < strings.size(); j+=2) {¤				result += toPhrase(strings.get(j), strings.get(j+1));¤			}¤¤			result += "#" + toPhrase(¤					String.valueOf(DocCardRemoteHelper.indexOf (copy, copies) + 1)¤					, "; "¤					);			¤		} else if (copy instanceof SiteCopyDAO) {¤			String sws = toPhrase(((SiteCopyDAO)copy).getSourceWebSite(), "; ");						¤			result += "#" + toPhrase(¤					String.valueOf(DocCardRemoteHelper.indexOf (copy, copies) + 1)¤					, (StringUtils.isEmpty(sws)) ? "; ": ", " + sws¤					);¤		} else {¤			result += "#" + toPhrase(¤					String.valueOf(DocCardRemoteHelper.indexOf (copy, copies) + 1)¤					, "; "¤					);¤		}¤¤		return result;¤	}¤¤	//#UC END# *4E14463002AC_CUSTOM_METHODS_AND_DATA*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"WikiPageID (wiki)"
		    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/ArchiGate/DocCardRemoteImpl/SearcherImpl|4E14463002AC
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (wiki)"
		    value      	"wiki")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (fctr.h)"
		    value      	"")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (fctr.h)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (fctr.cpp)"
		    value      	"w:/MDProcess/ArchiGate/impl/DocCardRemoteImpl/SearcherImpl_factory.cpp")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (fctr.cpp)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (h)"
		    value      	"w:/MDProcess/ArchiGate/impl/DocCardRemoteImpl/SearcherImpl.h")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (h)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (cpp)"
		    value      	"w:/MDProcess/ArchiGate/impl/DocCardRemoteImpl/SearcherImpl.cpp")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (cpp)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"cpp:*4E14463002AC_DESTR_BODY*"
		    value      	(value Text 
|//#UC START# *4E14463002AC_DESTR_BODY*¤	//#UC END# *4E14463002AC_DESTR_BODY*
		    )))
	    quid       	"4E14463002AC"
	    stereotype 	"Servant"
	    realized_interfaces 	(list realize_rel_list
		(object Realize_Relationship
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"76492464428"))
		    quid       	"4E14464500BF"
		    supplier   	"Logical View::MDProcess::ArchiGate::DocCardRemote::Searcher"
		    quidu      	"4E1444FF01E5"))
	    language   	"MDA Generator")
	(object Class "ArchiEventsListenerImpl"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"589214596016")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (fctr.h)"
		    value      	"w:/MDProcess/ArchiGate/impl/DocCardRemoteImpl/ArchiEventsListenerImpl_factory.h")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (fctr.h)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (cpp)"
		    value      	"w:/MDProcess/ArchiGate/impl/DocCardRemoteImpl/ArchiEventsListenerImpl.cpp")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (cpp)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (fctr.cpp)"
		    value      	"w:/MDProcess/ArchiGate/impl/DocCardRemoteImpl/ArchiEventsListenerImpl_factory.cpp")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (fctr.cpp)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (fctr.java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/ArchiGate/DocCardRemoteImpl/ArchiEventsListenerImplFactoryImpl.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (fctr.java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (h)"
		    value      	"w:/MDProcess/ArchiGate/impl/DocCardRemoteImpl/ArchiEventsListenerImpl.h")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (h)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/ArchiGate/DocCardRemoteImpl/ArchiEventsListenerImpl.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"cpp:*4E8964B2030A_DESTR_BODY*"
		    value      	(value Text 
|//#UC START# *4E8964B2030A_DESTR_BODY*¤	//#UC END# *4E8964B2030A_DESTR_BODY*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4E8964B2030A_CUSTOM_IMPORT*"
		    value      	"//#UC START# *4E8964B2030A_CUSTOM_IMPORT*¤import ru.garant.MDProcess.DocCardChange.Entities.DocCard;¤//#UC END# *4E8964B2030A_CUSTOM_IMPORT*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4E8964B2030A_CUSTOM_CLASS_DEFINITION*"
		    value      	"//#UC START# *4E8964B2030A_CUSTOM_CLASS_DEFINITION*¤//#UC END# *4E8964B2030A_CUSTOM_CLASS_DEFINITION*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4E8964B2030A_CUSTOM_METHODS_AND_DATA*"
		    value      	(value Text 
|//#UC START# *4E8964B2030A_CUSTOM_METHODS_AND_DATA*¤	//#UC END# *4E8964B2030A_CUSTOM_METHODS_AND_DATA*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"WikiPageID (wiki)"
		    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/ArchiGate/DocCardRemoteImpl/ArchiEventsListenerImpl|4E8964B2030A
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (wiki)"
		    value      	"wiki"))
	    quid       	"4E8964B2030A"
	    documentation 	"ArchiEventsListenerImpl"
	    stereotype 	"Servant"
	    realized_interfaces 	(list realize_rel_list
		(object Realize_Relationship
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"589232885091"))
		    quid       	"4E8964C50040"
		    supplier   	"Logical View::MDProcess::ArchiGate::DocCardRemote::ArchiEventsListener"
		    quidu      	"4E896436005E"))
	    language   	"MDA Generator")
	(object Class "Searcher2Impl"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"1411039028470140")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (fctr.java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/ArchiGate/DocCardRemoteImpl/Searcher2ImplFactoryImpl.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (fctr.java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (cpp)"
		    value      	"w:/MDProcess/ArchiGate/impl/DocCardRemoteImpl/Searcher2Impl.cpp")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (cpp)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (h)"
		    value      	"w:/MDProcess/ArchiGate/impl/DocCardRemoteImpl/Searcher2Impl.h")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (h)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (fctr.cpp)"
		    value      	"w:/MDProcess/ArchiGate/impl/DocCardRemoteImpl/Searcher2Impl_factory.cpp")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (fctr.cpp)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (fctr.h)"
		    value      	"w:/MDProcess/ArchiGate/impl/DocCardRemoteImpl/Searcher2Impl_factory.h")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (fctr.h)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/ArchiGate/DocCardRemoteImpl/Searcher2Impl.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"cpp:*541ABF3401D6_DESTR_BODY*"
		    value      	(value Text 
|//#UC START# *541ABF3401D6_DESTR_BODY*¤	//#UC END# *541ABF3401D6_DESTR_BODY*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*541ABF3401D6_CUSTOM_IMPORT*"
		    value      	"//#UC START# *541ABF3401D6_CUSTOM_IMPORT*¤import java.sql.Connection;¤import java.sql.ResultSet;¤import java.sql.SQLException;¤import java.sql.Statement;¤import java.text.SimpleDateFormat;¤import java.util.Date;¤import java.util.List;¤¤¤import com.google.common.collect.Lists;¤//#UC END# *541ABF3401D6_CUSTOM_IMPORT*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*541ABF3401D6_CUSTOM_CLASS_DEFINITION*"
		    value      	"//#UC START# *541ABF3401D6_CUSTOM_CLASS_DEFINITION*¤//#UC END# *541ABF3401D6_CUSTOM_CLASS_DEFINITION*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*541ABF3401D6_CUSTOM_METHODS_AND_DATA*"
		    value      	(value Text 
|//#UC START# *541ABF3401D6_CUSTOM_METHODS_AND_DATA*¤	public long getCheckDateOrSaveParams(final String functionName, final String archiID, final long date, final Date checkDate){¤		Date since = SearcherImpl.fromTotalSecondFromEpoch(date);¤		//Ищем в таблице запись с Since равной дате из параметров¤		CreatedSince cs = getCheckDate(functionName, archiID, date, since);¤		//Если нет записи, сохраняем ее¤        //Если нашли и если Count == 0 (не null, а именно ноль), то¤		//берем из записи CheckDate¤		//Иначе - выполняем с датой из параметров¤		long resCheckDateTime = date;¤		if(cs == null){¤			saveRow(functionName, archiID, date, checkDate, since);¤		}else if(cs.getCount() != null && cs.getCount() == 0){¤			resCheckDateTime = DocCardRemoteHelper.toTotalSecondFromEpoch(cs.getResCheckDate());¤		}¤		¤		return resCheckDateTime;¤	}¤	¤	public CreatedSince getCheckDate(final String functionName, final String archiID, final long date, final Date since){¤		Statement st = null;¤		try{¤			Connection con = ContainerManager.Factory.get().getSession().connection();¤			st = con.createStatement();¤			ResultSet rs = st.executeQuery("SELECT * FROM GAR_SEARCHER2_CREATED_SINCE WHERE archi_id='" +¤					archiID + "' and function_name='" + functionName + "' and since='" + new SimpleDateFormat("yyyy-MM-dd HH:mm:ss").format(since) + "'");¤			if(rs.next()){¤				CreatedSince cs = new CreatedSince(rs.getInt("count"), rs.getTimestamp("check_date"));¤				return cs;¤			}¤		}catch(Exception ex){¤			Logs.LOG_SEX(ex);¤		}finally{¤			if(st != null){¤				try {¤					st.close();¤				} catch (SQLException e) {¤					Logs.LOG_SEX(e);¤				}¤			}¤		}¤		return null;¤	}¤	¤	public void saveRow(final String functionName, final String archiID, final long date, final Date checkDate, final Date since){¤		Statement st = null;¤		try{¤			Connection con = ContainerManager.Factory.get().getSession().connection();¤			st = con.createStatement();¤			st.execute("INSERT INTO GAR_SEARCHER2_CREATED_SINCE(FUNCTION_NAME, ARCHI_ID, SINCE, CHECK_DATE, COUNT) VALUES(" +¤					"'" + functionName + "', '" +¤					archiID + "', '" +¤					new SimpleDateFormat("yyyy-MM-dd HH:mm:ss").format(since) + "', '" +¤					new SimpleDateFormat("yyyy-MM-dd HH:mm:ss").format(checkDate) + "', " +¤					"NULL" +¤					")");¤		}catch(Exception ex){¤			Logs.LOG_SEX(ex);¤		}finally{¤			if(st != null){¤				try {¤					st.close();¤				} catch (SQLException e) {¤					Logs.LOG_SEX(e);¤				}¤			}¤		}¤	}¤¤	public void saveCount(final String functionName, final String archiID, final long date, final int count, final String curDateForCheckDate){¤		Statement st = null;¤		try{¤			Date since = SearcherImpl.fromTotalSecondFromEpoch(date);¤			Connection con = ContainerManager.Factory.get().getSession().connection();¤			st = con.createStatement();¤			st.execute("UPDATE GAR_SEARCHER2_CREATED_SINCE SET count=" + count + ", check_date='" + curDateForCheckDate + "' WHERE archi_id='" +¤					archiID + "' and function_name='" + functionName + "' and since='" + new SimpleDateFormat("yyyy-MM-dd HH:mm:ss").format(since) + "'");¤		}catch(Exception ex){¤			Logs.LOG_SEX(ex);¤		}finally{¤			if(st != null){¤				try {¤					st.close();¤				} catch (SQLException e) {¤					Logs.LOG_SEX(e);¤				}¤			}¤		}¤	}¤	¤	public CreatedSince getCreatedSince(final Integer count, final Date resCheckDate){¤		return new CreatedSince(count, resCheckDate);¤	}¤	¤	public class CreatedSince{¤		public CreatedSince(final Integer count, final Date resCheckDate){¤			count_ = count;¤			resCheckDate_ = resCheckDate;¤		}¤		¤		private Integer count_;¤		public Integer getCount(){¤			return count_;¤		}¤		private Date resCheckDate_;¤		public Date getResCheckDate(){¤			return resCheckDate_;¤		}¤	}¤	//#UC END# *541ABF3401D6_CUSTOM_METHODS_AND_DATA*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"WikiPageID (wiki)"
		    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/ArchiGate/DocCardRemoteImpl/Searcher2Impl|541ABF3401D6
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (wiki)"
		    value      	"wiki"))
	    quid       	"541ABF3401D6"
	    stereotype 	"Servant"
	    realized_interfaces 	(list realize_rel_list
		(object Realize_Relationship
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"1411039062062062"))
		    quid       	"541ABF56003E"
		    supplier   	"Logical View::MDProcess::ArchiGate::DocCardRemote::Searcher2"
		    quidu      	"541ABEBE0377"))
	    language   	"MDA Generator")
	(object Class "UtilsImpl"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"1419353781871367")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/ArchiGate/DocCardRemoteImpl/UtilsImpl.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (h)"
		    value      	"w:/MDProcess/ArchiGate/impl/DocCardRemoteImpl/UtilsImpl.h")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (h)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (fctr.java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/ArchiGate/DocCardRemoteImpl/UtilsImplFactoryImpl.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (fctr.java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (fctr.h)"
		    value      	"w:/MDProcess/ArchiGate/impl/DocCardRemoteImpl/UtilsImpl_factory.h")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (fctr.h)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (fctr.cpp)"
		    value      	"w:/MDProcess/ArchiGate/impl/DocCardRemoteImpl/UtilsImpl_factory.cpp")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (fctr.cpp)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (cpp)"
		    value      	"w:/MDProcess/ArchiGate/impl/DocCardRemoteImpl/UtilsImpl.cpp")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (cpp)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"WikiPageID (wiki)"
		    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/ArchiGate/DocCardRemoteImpl/UtilsImpl|54999EB50367
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (wiki)"
		    value      	"wiki")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"cpp:*54999EB50367_DESTR_BODY*"
		    value      	(value Text 
|//#UC START# *54999EB50367_DESTR_BODY*¤	//#UC END# *54999EB50367_DESTR_BODY*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*54999EB50367_CUSTOM_IMPORT*"
		    value      	"//#UC START# *54999EB50367_CUSTOM_IMPORT*¤//#UC END# *54999EB50367_CUSTOM_IMPORT*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*54999EB50367_CUSTOM_CLASS_DEFINITION*"
		    value      	"//#UC START# *54999EB50367_CUSTOM_CLASS_DEFINITION*¤//#UC END# *54999EB50367_CUSTOM_CLASS_DEFINITION*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*54999EB50367_CUSTOM_METHODS_AND_DATA*"
		    value      	(value Text 
|//#UC START# *54999EB50367_CUSTOM_METHODS_AND_DATA*¤	//#UC END# *54999EB50367_CUSTOM_METHODS_AND_DATA*
		    )))
	    quid       	"54999EB50367"
	    stereotype 	"Servant"
	    realized_interfaces 	(list realize_rel_list
		(object Realize_Relationship
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"1419353811410429"))
		    quid       	"54999ED3019A"
		    supplier   	"Logical View::MDProcess::ArchiGate::DocCardRemote::Utils"
		    quidu      	"549999D000FB"))
	    language   	"MDA Generator")
	(object Class "GardocGetterImpl"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"1419353793600394")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (fctr.cpp)"
		    value      	"w:/MDProcess/ArchiGate/impl/DocCardRemoteImpl/GardocGetterImpl_factory.cpp")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (fctr.cpp)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/ArchiGate/DocCardRemoteImpl/GardocGetterImpl.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"WikiPageID (wiki)"
		    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/ArchiGate/DocCardRemoteImpl/GardocGetterImpl|54999EC10258
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (wiki)"
		    value      	"wiki")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (h)"
		    value      	"w:/MDProcess/ArchiGate/impl/DocCardRemoteImpl/GardocGetterImpl.h")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (h)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (fctr.java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/ArchiGate/DocCardRemoteImpl/GardocGetterImplFactoryImpl.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (fctr.java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (fctr.h)"
		    value      	"w:/MDProcess/ArchiGate/impl/DocCardRemoteImpl/GardocGetterImpl_factory.h")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (fctr.h)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (cpp)"
		    value      	"w:/MDProcess/ArchiGate/impl/DocCardRemoteImpl/GardocGetterImpl.cpp")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (cpp)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"cpp:*54999EC10258_DESTR_BODY*"
		    value      	(value Text 
|//#UC START# *54999EC10258_DESTR_BODY*¤	//#UC END# *54999EC10258_DESTR_BODY*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*54999EC10258_CUSTOM_IMPORT*"
		    value      	"//#UC START# *54999EC10258_CUSTOM_IMPORT*¤import java.util.*;¤import ru.garant.MDProcess.DocCardChange.DocCardChangeDAO.GarDocDAO;¤import ru.garant.MDProcess.DocCardChange.DocCardChangeDAO.UVSQuestDAO;¤import ru.garant.MDProcess.DocCardChange.DocCardCommon.DocCardManager;¤¤//#UC END# *54999EC10258_CUSTOM_IMPORT*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*54999EC10258_CUSTOM_CLASS_DEFINITION*"
		    value      	"//#UC START# *54999EC10258_CUSTOM_CLASS_DEFINITION*¤//#UC END# *54999EC10258_CUSTOM_CLASS_DEFINITION*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*54999EC10258_CUSTOM_METHODS_AND_DATA*"
		    value      	(value Text 
|//#UC START# *54999EC10258_CUSTOM_METHODS_AND_DATA*¤	private Gardoc[] makeRemote (Map<GarDocDAO, List<UVSQuestDAO>> gardocToRecentReqsOnly) throws IllegalStateExceptionRemote {¤		List<Gardoc> ret = new ArrayList<Gardoc>();¤		for (GarDocDAO key : gardocToRecentReqsOnly.keySet()) {¤			Gardoc remote;¤			try {¤				remote = SearcherProcessor.makeForExport (key, gardocToRecentReqsOnly.get(key));¤				ret.add(remote);			¤			} catch (Exception e) {¤				Logs.LOG_SEX(e);¤				throw new IllegalStateExceptionRemote (e.getMessage());¤			}¤		}¤		return ret.toArray(new Gardoc[ret.size()]);		¤	}¤	//#UC END# *54999EC10258_CUSTOM_METHODS_AND_DATA*
		    )))
	    quid       	"54999EC10258"
	    stereotype 	"Servant"
	    realized_interfaces 	(list realize_rel_list
		(object Realize_Relationship
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"1419353814074436"))
		    quid       	"54999ED6004A"
		    supplier   	"Logical View::MDProcess::ArchiGate::DocCardRemote::GardocGetter"
		    quidu      	"54999D1F010A"))
	    language   	"MDA Generator")
	(object Class "BigFileIteratorImpl"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"1424177258630820")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (fctr.cpp)"
		    value      	"w:/MDProcess/ArchiGate/impl/DocCardRemoteImpl/BigFileIteratorImpl_factory.cpp")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (fctr.cpp)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/ArchiGate/DocCardRemoteImpl/BigFileIteratorImpl.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (h)"
		    value      	"w:/MDProcess/ArchiGate/impl/DocCardRemoteImpl/BigFileIteratorImpl.h")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (h)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (fctr.java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/ArchiGate/DocCardRemoteImpl/BigFileIteratorImplFactoryImpl.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (fctr.java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (fctr.h)"
		    value      	"w:/MDProcess/ArchiGate/impl/DocCardRemoteImpl/BigFileIteratorImpl_factory.h")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (fctr.h)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (cpp)"
		    value      	"w:/MDProcess/ArchiGate/impl/DocCardRemoteImpl/BigFileIteratorImpl.cpp")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (cpp)"
		    value      	"file"))
	    quid       	"54E3386A0275"
	    stereotype 	"Servant"
	    realized_interfaces 	(list realize_rel_list
		(object Realize_Relationship
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"1424177277252886"))
		    quid       	"54E3387D00FC"
		    supplier   	"Logical View::MDProcess::ArchiGate::DocCardRemote::BigFileIterator"
		    quidu      	"54E3357F0376"))
	    language   	"MDA Generator"))
    logical_presentations 	(list unit_reference_list
	(object ClassDiagram "Main"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsChanged"
		    value      	""))
	    quid       	"4E144618004D"
	    title      	"Main"
	    zoom       	100
	    max_height 	28350
	    max_width  	21600
	    origin_x   	363
	    origin_y   	44
	    items      	(list diagram_item_list
		(object ClassView "Class" "Logical View::MDProcess::ArchiGate::DocCardRemote::Searcher" @1
		    ShowCompartmentStereotypes 	TRUE
		    SuppressAttribute 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    location   	(1194, 294)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	16714250
			default_color 	FALSE)
		    label      	(object ItemLabel
			Parent_View 	@1
			location   	(1008, 266)
			nlines     	1
			max_width  	372
			justify    	0
			label      	"Searcher")
		    stereotype 	(object ItemLabel
			Parent_View 	@1
			location   	(1008, 216)
			anchor     	10
			nlines     	1
			max_width  	369
			justify    	0
			label      	"<<ServerInterface>>")
		    icon_style 	"Label"
		    line_color 	16714250
		    fill_color 	16777215
		    quidu      	"4E1444FF01E5"
		    width      	390
		    height     	180
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::ArchiGate::DocCardRemoteImpl::SearcherImpl" @2
		    ShowCompartmentStereotypes 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(1191, 690)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@2
			location   	(1053, 661)
			fill_color 	13434879
			nlines     	1
			max_width  	276
			justify    	0
			label      	"SearcherImpl")
		    stereotype 	(object ItemLabel
			Parent_View 	@2
			location   	(1053, 611)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	276
			justify    	0
			label      	"<<Servant>>")
		    icon_style 	"Label"
		    fill_color 	12842435
		    quidu      	"4E14463002AC"
		    width      	294
		    height     	182
		    annotation 	8
		    autoResize 	TRUE)
		(object RealizeView "" @3
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	TRUE
		    line_color 	3947680
		    quidu      	"4E14464500BF"
		    client     	@2
		    supplier   	@1
		    vertices   	(list Points
			(1191, 598)
			(1193, 384))
		    line_style 	0)
		(object ClassView "Class" "Logical View::MDProcess::ArchiGate::DocCardRemote::ArchiEventsListener" @4
		    ShowCompartmentStereotypes 	TRUE
		    SuppressAttribute 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    location   	(1884, 285)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	16714250
			default_color 	FALSE)
		    label      	(object ItemLabel
			Parent_View 	@4
			location   	(1684, 257)
			nlines     	1
			max_width  	400
			justify    	0
			label      	"ArchiEventsListener")
		    stereotype 	(object ItemLabel
			Parent_View 	@4
			location   	(1684, 207)
			anchor     	10
			nlines     	1
			max_width  	400
			justify    	0
			label      	"<<ServerInterface>>")
		    icon_style 	"Label"
		    line_color 	16714250
		    fill_color 	16777215
		    quidu      	"4E896436005E"
		    width      	418
		    height     	180
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::ArchiGate::DocCardRemoteImpl::ArchiEventsListenerImpl" @5
		    ShowCompartmentStereotypes 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(1884, 675)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@5
			location   	(1649, 646)
			fill_color 	13434879
			nlines     	1
			max_width  	470
			justify    	0
			label      	"ArchiEventsListenerImpl")
		    stereotype 	(object ItemLabel
			Parent_View 	@5
			location   	(1649, 596)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	470
			justify    	0
			label      	"<<Servant>>")
		    icon_style 	"Label"
		    fill_color 	12842435
		    quidu      	"4E8964B2030A"
		    width      	488
		    height     	182
		    annotation 	8
		    autoResize 	TRUE)
		(object RealizeView "" @6
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	TRUE
		    line_color 	3947680
		    quidu      	"4E8964C50040"
		    client     	@5
		    supplier   	@4
		    vertices   	(list Points
			(1884, 583)
			(1884, 375))
		    line_style 	0)
		(object ClassView "Class" "Logical View::MDProcess::ArchiGate::ImagesImpl::DocCardRemoteHelper" @7
		    ShowCompartmentStereotypes 	TRUE
		    SuppressAttribute 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(435, 639)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	705320
			default_color 	FALSE)
		    label      	(object ItemLabel
			Parent_View 	@7
			location   	(213, 611)
			nlines     	1
			max_width  	444
			justify    	0
			label      	"DocCardRemoteHelper")
		    stereotype 	(object ItemLabel
			Parent_View 	@7
			location   	(213, 561)
			anchor     	10
			nlines     	1
			max_width  	444
			justify    	0
			label      	"<<SimpleClass>>")
		    icon_style 	"Label"
		    line_color 	705320
		    fill_color 	16777215
		    quidu      	"4EDDDB900188"
		    width      	462
		    height     	180
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::ArchiGate::Images::ImagesCreator" @8
		    ShowCompartmentStereotypes 	TRUE
		    SuppressAttribute 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(2712, 948)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	16714250
			default_color 	FALSE)
		    label      	(object ItemLabel
			Parent_View 	@8
			location   	(2563, 920)
			nlines     	1
			max_width  	298
			justify    	0
			label      	"ImagesCreator")
		    stereotype 	(object ItemLabel
			Parent_View 	@8
			location   	(2563, 870)
			anchor     	10
			nlines     	1
			max_width  	298
			justify    	0
			label      	"<<Interface>>")
		    icon       	"Interface"
		    icon_style 	"Label"
		    line_color 	16714250
		    fill_color 	16777215
		    quidu      	"4EDDDBD7005E"
		    width      	316
		    height     	180
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::ArchiGate::Images::PostProcessor" @9
		    ShowCompartmentStereotypes 	TRUE
		    SuppressAttribute 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(1239, 1347)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	16714250
			default_color 	FALSE)
		    label      	(object ItemLabel
			Parent_View 	@9
			location   	(1089, 1319)
			nlines     	1
			max_width  	300
			justify    	0
			label      	"PostProcessor")
		    stereotype 	(object ItemLabel
			Parent_View 	@9
			location   	(1089, 1269)
			anchor     	10
			nlines     	1
			max_width  	300
			justify    	0
			label      	"<<Interface>>")
		    icon       	"Interface"
		    icon_style 	"Label"
		    line_color 	16714250
		    fill_color 	16777215
		    quidu      	"4EDDDC4201C6"
		    width      	318
		    height     	180
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::ArchiGate::DocCardRemote::Image" @10
		    ShowCompartmentStereotypes 	TRUE
		    SuppressAttribute 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    location   	(2850, 2106)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	2313060
			default_color 	FALSE)
		    label      	(object ItemLabel
			Parent_View 	@10
			location   	(2682, 2078)
			nlines     	1
			max_width  	336
			justify    	0
			label      	"• Image")
		    stereotype 	(object ItemLabel
			Parent_View 	@10
			location   	(2682, 2028)
			anchor     	10
			nlines     	1
			max_width  	336
			justify    	0
			label      	"<<Struct>>")
		    icon_style 	"Label"
		    line_color 	2313060
		    fill_color 	16777215
		    quidu      	"4E184EED01AB"
		    width      	354
		    height     	180
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::ArchiGate::DocCardRemote::Gardoc" @11
		    ShowCompartmentStereotypes 	TRUE
		    SuppressAttribute 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    location   	(2133, 1974)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	2313060
			default_color 	FALSE)
		    label      	(object ItemLabel
			Parent_View 	@11
			location   	(1965, 1946)
			nlines     	1
			max_width  	336
			justify    	0
			label      	"• Gardoc")
		    stereotype 	(object ItemLabel
			Parent_View 	@11
			location   	(1965, 1896)
			anchor     	10
			nlines     	1
			max_width  	336
			justify    	0
			label      	"<<Struct>>")
		    icon_style 	"Label"
		    line_color 	2313060
		    fill_color 	16777215
		    quidu      	"4E15ADCE0029"
		    width      	354
		    height     	180
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::ArchiGate::Images::GardocsList" @12
		    ShowCompartmentStereotypes 	TRUE
		    SuppressAttribute 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(2946, 1818)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	6572835
			default_color 	FALSE)
		    label      	(object ItemLabel
			Parent_View 	@12
			location   	(2821, 1790)
			nlines     	1
			max_width  	250
			justify    	0
			label      	"GardocsList")
		    stereotype 	(object ItemLabel
			Parent_View 	@12
			location   	(2821, 1740)
			anchor     	10
			nlines     	1
			max_width  	250
			justify    	0
			label      	"<<List>>")
		    icon_style 	"Label"
		    line_color 	6572835
		    fill_color 	16777215
		    quidu      	"4EDDDE9F016A"
		    width      	268
		    height     	180
		    annotation 	8
		    autoResize 	TRUE)
		(object AssociationViewNew "" @13
		    location   	(2560, 1891)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	TRUE
		    line_color 	3947680
		    quidu      	"4EDDDEAD02DA"
		    roleview_list 	(list RoleViews
			(object RoleView "" @14
			    Parent_View 	@13
			    location   	(559, -152)
			    stereotype 	TRUE
			    line_color 	3342489
			    quidu      	"4EDDDEAE0098"
			    client     	@13
			    supplier   	@11
			    vertices   	(list Points
				(2560, 1891)
				(2310, 1938))
			    line_style 	0)
			(object RoleView "" @15
			    Parent_View 	@13
			    location   	(559, -152)
			    stereotype 	TRUE
			    line_color 	3342489
			    quidu      	"4EDDDEAE009B"
			    client     	@13
			    supplier   	@12
			    vertices   	(list Points
				(2560, 1891)
				(2811, 1842))
			    line_style 	0)))
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardChangeDAO::GarDocDAO" @16
		    ShowCompartmentStereotypes 	TRUE
		    SuppressAttribute 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    location   	(3180, 2466)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	705320
			default_color 	FALSE)
		    label      	(object ItemLabel
			Parent_View 	@16
			location   	(2977, 2438)
			nlines     	1
			max_width  	406
			justify    	0
			label      	"GarDocDAO")
		    stereotype 	(object ItemLabel
			Parent_View 	@16
			location   	(2977, 2388)
			anchor     	10
			nlines     	1
			max_width  	406
			justify    	0
			label      	"<<SimpleClass>>")
		    icon_style 	"Label"
		    line_color 	705320
		    fill_color 	16777215
		    quidu      	"4C49A45E0184"
		    width      	424
		    height     	180
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::ArchiGate::Images::GardocToGarDocDAO" @17
		    ShowCompartmentStereotypes 	TRUE
		    SuppressAttribute 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(2100, 2529)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	6572835
			default_color 	FALSE)
		    label      	(object ItemLabel
			Parent_View 	@17
			location   	(1880, 2501)
			nlines     	1
			max_width  	440
			justify    	0
			label      	"GardocToGarDocDAO")
		    stereotype 	(object ItemLabel
			Parent_View 	@17
			location   	(1880, 2451)
			anchor     	10
			nlines     	1
			max_width  	440
			justify    	0
			label      	"<<Map>>")
		    icon_style 	"Label"
		    line_color 	6572835
		    fill_color 	16777215
		    quidu      	"4EDDE0C0002E"
		    width      	458
		    height     	180
		    annotation 	8
		    autoResize 	TRUE)
		(object AssociationViewNew "" @18
		    location   	(2648, 2496)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	TRUE
		    line_color 	3947680
		    quidu      	"4EDDE8C003E4"
		    roleview_list 	(list RoleViews
			(object RoleView "" @19
			    Parent_View 	@18
			    location   	(548, -33)
			    stereotype 	TRUE
			    line_color 	3342489
			    quidu      	"4EDDE8C200B0"
			    client     	@18
			    supplier   	@16
			    vertices   	(list Points
				(2648, 2496)
				(2967, 2477))
			    line_style 	0)
			(object RoleView "" @20
			    Parent_View 	@18
			    location   	(548, -33)
			    font       	(object Font
				size       	10
				face       	"Arial"
				charSet    	204
				bold       	FALSE
				italics    	FALSE
				underline  	FALSE
				strike     	FALSE
				color      	0
				default_color 	TRUE)
			    stereotype 	TRUE
			    line_color 	3342489
			    quidu      	"4EDDE8C200B6"
			    client     	@18
			    supplier   	@17
			    vertices   	(list Points
				(2648, 2496)
				(2329, 2514))
			    line_style 	0
			    label      	(object SegLabel @21
				Parent_View 	@20
				location   	(2505, 2514)
				font       	(object Font
				    size       	10
				    face       	"Arial"
				    charSet    	204
				    bold       	FALSE
				    italics    	FALSE
				    underline  	FALSE
				    strike     	FALSE
				    color      	0
				    default_color 	TRUE)
				anchor     	5
				anchor_loc 	1
				nlines     	1
				max_width  	316
				justify    	0
				label      	"gardocs : Gardoc"
				pctDist    	0.900000
				height     	12
				orientation 	1))))
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardChangeDAO::UVSQuestDAO" @22
		    ShowCompartmentStereotypes 	TRUE
		    SuppressAttribute 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    location   	(498, 2115)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	705320
			default_color 	FALSE)
		    label      	(object ItemLabel
			Parent_View 	@22
			location   	(295, 2087)
			nlines     	1
			max_width  	406
			justify    	0
			label      	"UVSQuestDAO")
		    stereotype 	(object ItemLabel
			Parent_View 	@22
			location   	(295, 2037)
			anchor     	10
			nlines     	1
			max_width  	406
			justify    	0
			label      	"<<SimpleClass>>")
		    icon_style 	"Label"
		    line_color 	705320
		    fill_color 	16777215
		    quidu      	"4C49AA1B03C3"
		    width      	424
		    height     	180
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::ArchiGate::Images::ImageToReq" @23
		    ShowCompartmentStereotypes 	TRUE
		    SuppressAttribute 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(1410, 2076)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	6572835
			default_color 	FALSE)
		    label      	(object ItemLabel
			Parent_View 	@23
			location   	(1278, 2048)
			nlines     	1
			max_width  	264
			justify    	0
			label      	"ImageToReq")
		    stereotype 	(object ItemLabel
			Parent_View 	@23
			location   	(1278, 1998)
			anchor     	10
			nlines     	1
			max_width  	264
			justify    	0
			label      	"<<Map>>")
		    icon_style 	"Label"
		    line_color 	6572835
		    fill_color 	16777215
		    quidu      	"4EDDDF820051"
		    width      	282
		    height     	180
		    annotation 	8
		    autoResize 	TRUE)
		(object AssociationViewNew "" @24
		    location   	(989, 2092)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	TRUE
		    line_color 	3947680
		    quidu      	"4EDDE8DE0219"
		    roleview_list 	(list RoleViews
			(object RoleView "" @25
			    Parent_View 	@24
			    location   	(-421, 16)
			    stereotype 	TRUE
			    line_color 	3342489
			    quidu      	"4EDDE8DF003E"
			    client     	@24
			    supplier   	@22
			    vertices   	(list Points
				(989, 2092)
				(710, 2104))
			    line_style 	0)
			(object RoleView "" @26
			    Parent_View 	@24
			    location   	(-421, 16)
			    font       	(object Font
				size       	10
				face       	"Arial"
				charSet    	204
				bold       	FALSE
				italics    	FALSE
				underline  	FALSE
				strike     	FALSE
				color      	0
				default_color 	TRUE)
			    stereotype 	TRUE
			    line_color 	3342489
			    quidu      	"4EDDE8DF0046"
			    client     	@24
			    supplier   	@23
			    vertices   	(list Points
				(989, 2092)
				(1268, 2081))
			    line_style 	0
			    label      	(object SegLabel @27
				Parent_View 	@26
				location   	(1119, 2079)
				font       	(object Font
				    size       	10
				    face       	"Arial"
				    charSet    	204
				    bold       	FALSE
				    italics    	FALSE
				    underline  	FALSE
				    strike     	FALSE
				    color      	0
				    default_color 	TRUE)
				anchor     	5
				anchor_loc 	1
				nlines     	1
				max_width  	256
				justify    	0
				label      	"image : Image"
				pctDist    	0.900000
				height     	12
				orientation 	0))))
		(object ClassView "Class" "Logical View::MDProcess::ArchiGate::ImagesImpl::ImageCreatorImpl" @28
		    ShowCompartmentStereotypes 	TRUE
		    SuppressAttribute 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(3039, 1416)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	705290
			default_color 	FALSE)
		    label      	(object ItemLabel
			Parent_View 	@28
			location   	(2861, 1388)
			nlines     	1
			max_width  	356
			justify    	0
			label      	"ImageCreatorImpl")
		    stereotype 	(object ItemLabel
			Parent_View 	@28
			location   	(2861, 1338)
			anchor     	10
			nlines     	1
			max_width  	356
			justify    	0
			label      	"<<Servant>>")
		    icon_style 	"Label"
		    line_color 	705290
		    fill_color 	16777215
		    quidu      	"4EDDF2F90048"
		    width      	374
		    height     	180
		    annotation 	8
		    autoResize 	TRUE)
		(object RealizeView "" @29
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	TRUE
		    line_color 	3947680
		    quidu      	"4EDDF3650385"
		    client     	@28
		    supplier   	@8
		    vertices   	(list Points
			(2974, 1325)
			(2774, 1038))
		    line_style 	0)
		(object ClassView "Class" "Logical View::MDProcess::ArchiGate::ImagesImpl::ArchiImagesPostProcessor" @30
		    ShowCompartmentStereotypes 	TRUE
		    SuppressAttribute 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(702, 1677)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	705290
			default_color 	FALSE)
		    label      	(object ItemLabel
			Parent_View 	@30
			location   	(436, 1649)
			nlines     	1
			max_width  	532
			justify    	0
			label      	"ArchiImagesPostProcessor")
		    stereotype 	(object ItemLabel
			Parent_View 	@30
			location   	(436, 1599)
			anchor     	10
			nlines     	1
			max_width  	532
			justify    	0
			label      	"<<Servant>>")
		    icon_style 	"Label"
		    line_color 	705290
		    fill_color 	16777215
		    quidu      	"4EDDF36A0186"
		    width      	550
		    height     	180
		    annotation 	8
		    autoResize 	TRUE)
		(object RealizeView "" @31
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	TRUE
		    line_color 	3947680
		    quidu      	"4EDDF39C0304"
		    client     	@30
		    supplier   	@9
		    vertices   	(list Points
			(846, 1586)
			(1089, 1437))
		    line_style 	0)
		(object ClassView "Class" "Logical View::MDProcess::ArchiGate::DocCardRemoteImpl::Searcher2Impl" @32
		    ShowCompartmentStereotypes 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(2571, 642)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@32
			location   	(2424, 613)
			fill_color 	13434879
			nlines     	1
			max_width  	294
			justify    	0
			label      	"Searcher2Impl")
		    stereotype 	(object ItemLabel
			Parent_View 	@32
			location   	(2424, 563)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	294
			justify    	0
			label      	"<<Servant>>")
		    icon_style 	"Label"
		    fill_color 	12842435
		    quidu      	"541ABF3401D6"
		    width      	312
		    height     	182
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::ArchiGate::DocCardRemote::Searcher2" @33
		    ShowCompartmentStereotypes 	TRUE
		    SuppressAttribute 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    location   	(2595, 219)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	16714250
			default_color 	FALSE)
		    label      	(object ItemLabel
			Parent_View 	@33
			location   	(2409, 191)
			nlines     	1
			max_width  	372
			justify    	0
			label      	"Searcher2")
		    stereotype 	(object ItemLabel
			Parent_View 	@33
			location   	(2409, 141)
			anchor     	10
			nlines     	1
			max_width  	369
			justify    	0
			label      	"<<ServerInterface>>")
		    icon_style 	"Label"
		    line_color 	16714250
		    fill_color 	16777215
		    quidu      	"541ABEBE0377"
		    width      	390
		    height     	180
		    annotation 	8
		    autoResize 	TRUE)
		(object RealizeView "" @34
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	TRUE
		    line_color 	3947680
		    quidu      	"541ABF56003E"
		    client     	@32
		    supplier   	@33
		    vertices   	(list Points
			(2575, 550)
			(2589, 309))
		    line_style 	0)
		(object ClassView "Class" "Logical View::MDProcess::ArchiGate::DocCardRemote::Utils" @35
		    ShowCompartmentStereotypes 	TRUE
		    SuppressAttribute 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    location   	(1836, 1044)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	16714250
			default_color 	FALSE)
		    label      	(object ItemLabel
			Parent_View 	@35
			location   	(1650, 1016)
			nlines     	1
			max_width  	372
			justify    	0
			label      	"• Utils")
		    stereotype 	(object ItemLabel
			Parent_View 	@35
			location   	(1650, 966)
			anchor     	10
			nlines     	1
			max_width  	369
			justify    	0
			label      	"<<ServerInterface>>")
		    icon_style 	"Label"
		    line_color 	16714250
		    fill_color 	16777215
		    quidu      	"549999D000FB"
		    width      	390
		    height     	180
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::ArchiGate::DocCardRemote::GardocGetter" @36
		    ShowCompartmentStereotypes 	TRUE
		    SuppressAttribute 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    location   	(3255, 231)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	16714250
			default_color 	FALSE)
		    label      	(object ItemLabel
			Parent_View 	@36
			location   	(3069, 203)
			nlines     	1
			max_width  	372
			justify    	0
			label      	"GardocGetter")
		    stereotype 	(object ItemLabel
			Parent_View 	@36
			location   	(3069, 153)
			anchor     	10
			nlines     	1
			max_width  	369
			justify    	0
			label      	"<<ServerInterface>>")
		    icon_style 	"Label"
		    line_color 	16714250
		    fill_color 	16777215
		    quidu      	"54999D1F010A"
		    width      	390
		    height     	180
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::ArchiGate::DocCardRemoteImpl::UtilsImpl" @37
		    ShowCompartmentStereotypes 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(1836, 1437)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@37
			location   	(1716, 1408)
			fill_color 	13434879
			nlines     	1
			max_width  	240
			justify    	0
			label      	"UtilsImpl")
		    stereotype 	(object ItemLabel
			Parent_View 	@37
			location   	(1716, 1358)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	238
			justify    	0
			label      	"<<Servant>>")
		    icon_style 	"Label"
		    fill_color 	12842435
		    quidu      	"54999EB50367"
		    width      	258
		    height     	182
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::ArchiGate::DocCardRemoteImpl::GardocGetterImpl" @38
		    ShowCompartmentStereotypes 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(3255, 678)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@38
			location   	(3077, 649)
			fill_color 	13434879
			nlines     	1
			max_width  	356
			justify    	0
			label      	"GardocGetterImpl")
		    stereotype 	(object ItemLabel
			Parent_View 	@38
			location   	(3077, 599)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	356
			justify    	0
			label      	"<<Servant>>")
		    icon_style 	"Label"
		    fill_color 	12842435
		    quidu      	"54999EC10258"
		    width      	374
		    height     	182
		    annotation 	8
		    autoResize 	TRUE)
		(object RealizeView "" @39
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	TRUE
		    line_color 	3947680
		    quidu      	"54999ED3019A"
		    client     	@37
		    supplier   	@35
		    vertices   	(list Points
			(1836, 1345)
			(1836, 1134))
		    line_style 	0)
		(object RealizeView "" @40
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	TRUE
		    line_color 	3947680
		    quidu      	"54999ED6004A"
		    client     	@38
		    supplier   	@36
		    vertices   	(list Points
			(3255, 586)
			(3255, 321))
		    line_style 	0)
		(object ClassView "Class" "Logical View::MDProcess::ArchiGate::DocCardRemoteImpl::BigFileIteratorImpl" @41
		    ShowCompartmentStereotypes 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(612, 2856)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@41
			location   	(430, 2827)
			fill_color 	13434879
			nlines     	1
			max_width  	364
			justify    	0
			label      	"BigFileIteratorImpl")
		    stereotype 	(object ItemLabel
			Parent_View 	@41
			location   	(430, 2777)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	364
			justify    	0
			label      	"<<Servant>>")
		    icon_style 	"Label"
		    fill_color 	12842435
		    quidu      	"54E3386A0275"
		    width      	382
		    height     	182
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::ArchiGate::DocCardRemote::BigFileIterator" @42
		    ShowCompartmentStereotypes 	TRUE
		    SuppressAttribute 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    location   	(615, 2418)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	16714250
			default_color 	FALSE)
		    label      	(object ItemLabel
			Parent_View 	@42
			location   	(429, 2390)
			nlines     	1
			max_width  	372
			justify    	0
			label      	"BigFileIterator")
		    stereotype 	(object ItemLabel
			Parent_View 	@42
			location   	(429, 2340)
			anchor     	10
			nlines     	1
			max_width  	369
			justify    	0
			label      	"<<ServerInterface>>")
		    icon_style 	"Label"
		    line_color 	16714250
		    fill_color 	16777215
		    quidu      	"54E3357F0376"
		    width      	390
		    height     	180
		    annotation 	8
		    autoResize 	TRUE)
		(object RealizeView "" @43
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	TRUE
		    line_color 	3947680
		    quidu      	"54E3387D00FC"
		    client     	@41
		    supplier   	@42
		    vertices   	(list Points
			(612, 2764)
			(614, 2508))
		    line_style 	0)))))
