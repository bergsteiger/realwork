
(object Petal
    version    	50
    _written   	"Rose 2006.0.0.060314"
    charSet    	204)

(object Class_Category "EntitiesImpl"
    is_unit    	TRUE
    is_loaded  	TRUE
    attributes 	(list Attribute_Set
	(object Attribute
	    tool       	"MDA Generator"
	    name       	"AbstarctOperation"
	    value      	"regular")
	(object Attribute
	    tool       	"MDA Generator"
	    name       	"IsNative"
	    value      	"false")
	(object Attribute
	    tool       	"MDA Generator"
	    name       	"WikiPageID (wiki)"
	    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/ÃÓ‰ÂÎ¸ ÔÓÂÍÚ‡ "MDProcess"/CaseAgreementChange/EntitiesImpl|4AFBFF7803E2
	    ))
	(object Attribute
	    tool       	"MDA Generator"
	    name       	"SourceType (wiki)"
	    value      	"wiki")
	(object Attribute
	    tool       	"MDA Generator"
	    name       	"ElementCreationOrder"
	    value      	"19022124254"))
    quid       	"4AFBFF7803E2"
    documentation 	"—ÓÓÚ‚ÂÚÒÚ‚Û˛˘‡ˇ Â‡ÎËÁ‡ˆËˇ"
    stereotype 	"Impl"
    visible_categories 	(list visibility_relationship_list
	(object Visibility_Relationship
	    quid       	"4AFBFF9F027E"
	    supplier   	"Logical View::MDProcess::CaseAgreementChange::Entities"
	    quidu      	"4AFBFF2C039E")
	(object Visibility_Relationship
	    quid       	"4AFBFFB30385"
	    supplier   	"Logical View::MDProcess::ConfluenceMDChange::RequestsImpl"
	    quidu      	"4741B70F01EA")
	(object Visibility_Relationship
	    quid       	"4AFC014303CD"
	    supplier   	"Logical View::MDProcess::CaseAgreementChange::CaseDAO"
	    quidu      	"4AFC012903D2")
	(object Visibility_Relationship
	    quid       	"4AFC015A0013"
	    supplier   	"Logical View::MDProcess::ConfluenceMDChange::Requests"
	    quidu      	"4741A5C102D5")
	(object Visibility_Relationship
	    quid       	"4AFC01B2033E"
	    supplier   	"Logical View::MDProcess::CaseAgreementChange::CaseSupportTypes"
	    quidu      	"4AFC017F02DA")
	(object Visibility_Relationship
	    quid       	"4AFC023601CF"
	    supplier   	"Logical View::MDProcess::ConfluenceMDChange::MDChangeDAO"
	    quidu      	"47B940BF00E5"))
    exportControl 	"Public"
    logical_models 	(list unit_reference_list
	(object Class "CaseS"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (fctr.java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/CaseAgreementChange/EntitiesImpl/CaseSFactoryImpl.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (fctr.java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/CaseAgreementChange/EntitiesImpl/CaseS.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"WikiPageID (wiki)"
		    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/ÃÓ‰ÂÎ¸ ÔÓÂÍÚ‡ "MDProcess"/CaseAgreementChange/EntitiesImpl/CaseS|4AFC06A802D0
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (wiki)"
		    value      	"wiki")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4AFC06A802D0_CUSTOM_IMPORT*"
		    value      	"//#UC START# *4AFC06A802D0_CUSTOM_IMPORT*§§import java.io.ByteArrayInputStream;§import java.io.ByteArrayOutputStream;§import java.io.IOException;§import java.util.*;§§import ru.garant.MDProcess.CaseAgreementChange.CaseSupport.CaseHelper;§import ru.garant.MDProcess.CaseAgreementChange.CaseSupport.PageCase;§import ru.garant.MDProcess.CaseAgreementChange.CaseSupportTypes.CaseType;§import org.apache.commons.collections.CollectionUtils;§import org.apache.commons.io.IOUtils;§import org.apache.commons.lang.StringUtils;§import org.apache.poi.openxml4j.exceptions.InvalidFormatException;§import org.apache.poi.ss.usermodel.Cell;§import org.apache.poi.ss.usermodel.Font;§import org.apache.poi.ss.usermodel.Row;§import org.apache.poi.ss.usermodel.Sheet;§import org.apache.poi.ss.usermodel.Workbook;§import org.apache.poi.ss.usermodel.WorkbookFactory;§§import com.atlassian.confluence.user.AuthenticatedUserThreadLocal;§import com.atlassian.confluence.user.UserAccessor;§import com.atlassian.user.User;§§import ru.garant.shared.FSM.ValidationFailed;§import ru.garant.shared.GCI.I18N.Messages;§import ru.garant.shared.GCL.DateUtils;§§import ru.garant.MDProcess.ConfluenceMDChange.RequestDashboard.DashboardCacheManager;§§import ru.garant.MDProcess.ConfluenceMDChange.MDChangeDAO.AbstractRequestDAOProxy;§import ru.garant.MDProcess.ConfluenceMDChange.MDChangeDAO.ExecutionGroupDecisionDAOProxy;§§import ru.garant.MDProcess.ConfluenceMDChange.RequestsImpl.ExecutionDecision;§import ru.garant.MDProcess.ConfluenceMDChange.RequestsImpl.ExecutionGroupDecision;§import ru.garant.MDProcess.ConfluenceMDChange.RequestsImpl.ExecutionGroupDecisionType;§§import ru.garant.MDProcess.CaseAgreementChange.MdcaCommon.MDCAManager;§§import ru.garant.MDProcess.HRChange.Entities.Worker;§import ru.garant.MDProcess.HRChange.HRSupport.HrHelper;§§//#UC END# *4AFC06A802D0_CUSTOM_IMPORT*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4AFC06A802D0_CUSTOM_CLASS_DEFINITION*"
		    value      	"//#UC START# *4AFC06A802D0_CUSTOM_CLASS_DEFINITION*§//#UC END# *4AFC06A802D0_CUSTOM_CLASS_DEFINITION*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4AFC06A802D0_4AFC0413024E_ON_RESURECT_ACTION_IMPL*"
		    value      	(value Text 
|//#UC START# *4AFC06A802D0_4AFC0413024E_ON_RESURECT_ACTION_IMPL*§		super.onResurect (event);§		//#UC END# *4AFC06A802D0_4AFC0413024E_ON_RESURECT_ACTION_IMPL*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4AFC06A802D0_4AFC0413024E_ACTION_ACTIVE_EXIT*"
		    value      	(value Text 
|//#UC START# *4AFC06A802D0_4AFC0413024E_ACTION_ACTIVE_EXIT*§		super.postActiveExit (event);§		//#UC END# *4AFC06A802D0_4AFC0413024E_ACTION_ACTIVE_EXIT*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4AFC06A802D0_4AFC0413024E_ACTION_CLOSED_ENTER*"
		    value      	(value Text 
|//#UC START# *4AFC06A802D0_4AFC0413024E_ACTION_CLOSED_ENTER*§		if(isCaseReport()){§			final CaseProlongationNotificationGateway notificationGateway = (CaseProlongationNotificationGateway) getNotificationGateway();§			notificationGateway.queueFinalEmailForAuthor((AbstractState)getCurrentState());§		}else{§			super.postClosedEnter (event);§			§			ru.garant.MDProcess.CaseAgreementChange.Entities.sm.CaseLifeCycle.Closed state = CaseLifeCycle.ST_CLOSED;§			final CaseNotificationGateway notificationGateway = (CaseNotificationGateway) getNotificationGateway();§			notificationGateway.queueFinalEmailForCurator(state);§			notificationGateway.queueFinalEmailForDevelopmentManager(state);§			notificationGateway.queueFinalEmailsForExternalAuthors(state);§			notificationGateway.queueFinalEmailsForWorkGroup(state);§			§			signCaseDocument();§		}§		//#UC END# *4AFC06A802D0_4AFC0413024E_ACTION_CLOSED_ENTER*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4AFC06A802D0_4AFC0413024E_CREATE_VALIDATE*"
		    value      	(value Text 
|//#UC START# *4AFC06A802D0_4AFC0413024E_CREATE_VALIDATE*§		super.validateCreate ();§		//#UC END# *4AFC06A802D0_4AFC0413024E_CREATE_VALIDATE*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4AFC06A802D0_4AFC0413024E_CREATE_PRE_ENTER*"
		    value      	(value Text 
|//#UC START# *4AFC06A802D0_4AFC0413024E_CREATE_PRE_ENTER*§		super.preEnterActionCreate (event);§		//#UC END# *4AFC06A802D0_4AFC0413024E_CREATE_PRE_ENTER*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4AFC06A802D0_4AFC0413024E_CREATE_PRE_EXIT*"
		    value      	(value Text 
|//#UC START# *4AFC06A802D0_4AFC0413024E_CREATE_PRE_EXIT*§		super.preExitActionCreate (event);§		//#UC END# *4AFC06A802D0_4AFC0413024E_CREATE_PRE_EXIT*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4AFC06A802D0_4AFC0413024E_ACTIVE_VALIDATE*"
		    value      	(value Text 
|//#UC START# *4AFC06A802D0_4AFC0413024E_ACTIVE_VALIDATE*§		super.validateActive ();§		//#UC END# *4AFC06A802D0_4AFC0413024E_ACTIVE_VALIDATE*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4AFC06A802D0_4AFC0413024E_ACTIVE_PRE_ENTER*"
		    value      	(value Text 
|//#UC START# *4AFC06A802D0_4AFC0413024E_ACTIVE_PRE_ENTER*§		super.preEnterActionActive (event);§		//#UC END# *4AFC06A802D0_4AFC0413024E_ACTIVE_PRE_ENTER*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4AFC06A802D0_4AFC0413024E_ACTIVE_PRE_EXIT*"
		    value      	(value Text 
|//#UC START# *4AFC06A802D0_4AFC0413024E_ACTIVE_PRE_EXIT*§		super.preExitActionActive (event);§		//#UC END# *4AFC06A802D0_4AFC0413024E_ACTIVE_PRE_EXIT*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4AFC06A802D0_4AFC0413024E_ONACCEPT_VALIDATE*"
		    value      	(value Text 
|//#UC START# *4AFC06A802D0_4AFC0413024E_ONACCEPT_VALIDATE*§		super.validateOnAccept ();§		//#UC END# *4AFC06A802D0_4AFC0413024E_ONACCEPT_VALIDATE*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4AFC06A802D0_4AFC0413024E_ONACCEPT_PRE_ENTER*"
		    value      	(value Text 
|//#UC START# *4AFC06A802D0_4AFC0413024E_ONACCEPT_PRE_ENTER*§		super.preEnterActionOnAccept (event);§		§		setExecutor(getCurator());§		//#UC END# *4AFC06A802D0_4AFC0413024E_ONACCEPT_PRE_ENTER*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4AFC06A802D0_4AFC0413024E_ONACCEPT_PRE_EXIT*"
		    value      	(value Text 
|//#UC START# *4AFC06A802D0_4AFC0413024E_ONACCEPT_PRE_EXIT*§		super.preExitActionOnAccept (event);§		//#UC END# *4AFC06A802D0_4AFC0413024E_ONACCEPT_PRE_EXIT*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4AFC06A802D0_4AFC0413024E_ASSIGNED_VALIDATE*"
		    value      	(value Text 
|//#UC START# *4AFC06A802D0_4AFC0413024E_ASSIGNED_VALIDATE*§		super.validateAssigned ();§		//#UC END# *4AFC06A802D0_4AFC0413024E_ASSIGNED_VALIDATE*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4AFC06A802D0_4AFC0413024E_ASSIGNED_PRE_ENTER*"
		    value      	(value Text 
|//#UC START# *4AFC06A802D0_4AFC0413024E_ASSIGNED_PRE_ENTER*§		super.preEnterActionAssigned (event);§		//#UC END# *4AFC06A802D0_4AFC0413024E_ASSIGNED_PRE_ENTER*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4AFC06A802D0_4AFC0413024E_ASSIGNED_PRE_EXIT*"
		    value      	(value Text 
|//#UC START# *4AFC06A802D0_4AFC0413024E_ASSIGNED_PRE_EXIT*§		super.preExitActionAssigned (event);§		//#UC END# *4AFC06A802D0_4AFC0413024E_ASSIGNED_PRE_EXIT*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4AFC06A802D0_4AFC0413024E_DISCARDED_VALIDATE*"
		    value      	(value Text 
|//#UC START# *4AFC06A802D0_4AFC0413024E_DISCARDED_VALIDATE*§		super.validateDiscarded ();§		//#UC END# *4AFC06A802D0_4AFC0413024E_DISCARDED_VALIDATE*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4AFC06A802D0_4AFC0413024E_DISCARDED_PRE_ENTER*"
		    value      	(value Text 
|//#UC START# *4AFC06A802D0_4AFC0413024E_DISCARDED_PRE_ENTER*§		super.preEnterActionDiscarded (event);§		//#UC END# *4AFC06A802D0_4AFC0413024E_DISCARDED_PRE_ENTER*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4AFC06A802D0_4AFC0413024E_DISCARDED_PRE_EXIT*"
		    value      	(value Text 
|//#UC START# *4AFC06A802D0_4AFC0413024E_DISCARDED_PRE_EXIT*§		super.preExitActionDiscarded (event);§		//#UC END# *4AFC06A802D0_4AFC0413024E_DISCARDED_PRE_EXIT*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4AFC06A802D0_4AFC0413024E_PAUSE_VALIDATE*"
		    value      	(value Text 
|//#UC START# *4AFC06A802D0_4AFC0413024E_PAUSE_VALIDATE*§		super.validatePause ();§		//#UC END# *4AFC06A802D0_4AFC0413024E_PAUSE_VALIDATE*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4AFC06A802D0_4AFC0413024E_PAUSE_PRE_ENTER*"
		    value      	(value Text 
|//#UC START# *4AFC06A802D0_4AFC0413024E_PAUSE_PRE_ENTER*§		super.preEnterActionPause (event);§		//#UC END# *4AFC06A802D0_4AFC0413024E_PAUSE_PRE_ENTER*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4AFC06A802D0_4AFC0413024E_PAUSE_PRE_EXIT*"
		    value      	(value Text 
|//#UC START# *4AFC06A802D0_4AFC0413024E_PAUSE_PRE_EXIT*§		super.preExitActionPause (event);§		//#UC END# *4AFC06A802D0_4AFC0413024E_PAUSE_PRE_EXIT*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4AFC06A802D0_4AFC0413024E_CLOSED_VALIDATE*"
		    value      	(value Text 
|//#UC START# *4AFC06A802D0_4AFC0413024E_CLOSED_VALIDATE*§		Attachment caseAttachment = getCaseAttachment();§		if(caseAttachment != null) {§			Workbook workbook = null;§			try {§				workbook = WorkbookFactory.create(caseAttachment.getContentsAsStream());§			} catch (Exception e) {§				Logs.LOG_E("CaseS::writeSignature - invalid case document format - " + e);§				//–ù–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç —Ñ–∞–π–ª–∞§				throw new ValidationFailed(1, "\u041D\u0435\u0020\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u044B\u0439\u0020\u0444\u043E\u0440\u043C\u0430\u0442\u0020\u0444\u0430\u0439\u043B\u0430!");§			}§			if(workbook != null){§				final Sheet protocolSheet = workbook.getSheet(PROTOCOL_SHEET_NAME);§				if(protocolSheet == null){§					//–ù–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç —Ñ–∞–π–ª–∞§					throw new ValidationFailed(1, "\u041D\u0435\u0020\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u044B\u0439\u0020\u0444\u043E\u0440\u043C\u0430\u0442\u0020\u0444\u0430\u0439\u043B\u0430!");§				}§			}§		}§		§§		super.validateClosed ();§		//#UC END# *4AFC06A802D0_4AFC0413024E_CLOSED_VALIDATE*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4AFC06A802D0_4AFC0413024E_CLOSED_PRE_ENTER*"
		    value      	(value Text 
|//#UC START# *4AFC06A802D0_4AFC0413024E_CLOSED_PRE_ENTER*§		super.preEnterActionClosed (event);§		//#UC END# *4AFC06A802D0_4AFC0413024E_CLOSED_PRE_ENTER*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4AFC06A802D0_4AFC0413024E_CLOSED_PRE_EXIT*"
		    value      	(value Text 
|//#UC START# *4AFC06A802D0_4AFC0413024E_CLOSED_PRE_EXIT*§		super.preExitActionClosed (event);§		//#UC END# *4AFC06A802D0_4AFC0413024E_CLOSED_PRE_EXIT*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4AFC06A802D0_4AFC0413024E_SAVE_IMPL*"
		    value      	(value Text 
|//#UC START# *4AFC06A802D0_4AFC0413024E_SAVE_IMPL*§		super.executeSave ();§		//#UC END# *4AFC06A802D0_4AFC0413024E_SAVE_IMPL*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4AFC06A802D0_4AFC0413024E_POST_COMMIT*"
		    value      	(value Text 
|//#UC START# *4AFC06A802D0_4AFC0413024E_POST_COMMIT*§		super.postCommit ();§		//#UC END# *4AFC06A802D0_4AFC0413024E_POST_COMMIT*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4AFC06A802D0_CUSTOM_METHODS_AND_DATA*"
		    value      	(value Text 
|//#UC START# *4AFC06A802D0_CUSTOM_METHODS_AND_DATA*§	§	private ExecutionGroupDecision previousExecutionDecision_;§	§	@Override§	protected CaseDAOProxy getProxy () {§		return (CaseDAOProxy) super.getProxy();§	}§	§	@Override§	protected AbstractRequestNotificationGateway createNotificationGateway () {§		if(isCaseReport()){§			return CaseProlongationNotificationGateway.Factory.make(this);§		}§		return CaseNotificationGateway.Factory.make(this);§	}§§	@Override§	protected AbstractRequestDAOProxy createProxy () {§		CaseDAOProxy proxy = new CaseDAOProxy();§		proxy.setReleasePriority(AbstractRequestDAOProxy.ACTIVE_RELEASE_PRIORITY);§		proxy.setSortRelease(AbstractRequestDAOProxy.stringSortLastValue);§		proxy.setSortExecutorName(AbstractRequestDAOProxy.stringSortLastValue);§		return proxy;§	}§§	@Override§	protected Class<? extends AbstractRequestDAOProxy> getProxyClass () {§		return CaseDAOProxy.class;§	}§§	@Override§	protected long getTimeDifference (long initialForecast, AbstractState currentState) {§		CaseManager cm = (CaseManager)getManager();§		if (cm.isInFinalState(currentState) || cm.isInDiscardedState(currentState) || cm.isInSuspendedState(currentState)) {§			long inWorkTime = getInActiveState() != null ? getInActiveState().getTime() : 0;§			return initialForecast - inWorkTime;§		} else {§			long forecast = getForecastTime() != null ? getForecastTime().getTime() : 0;§			return initialForecast - forecast;§		}§	}§	§	@Override§	protected long getCompletionTimeDifference (long initialForecast, AbstractState currentState) {§		CaseManager cm = (CaseManager)getManager();§		if (cm.isInFinalState(currentState) || cm.isInDiscardedState(currentState) || cm.isInSuspendedState(currentState)) {§			if(getWorkCompleteAt() != null) {§				return initialForecast - getWorkCompleteAt().getTime();§			}§			return 0;§		} else {§			return initialForecast != 0 ? initialForecast - new Date().getTime() : 0;§		}§	}§	§	@Override§	protected ExecutionGroupDecision createExecutionGroupDecision () {§		if (getProxy().getState() == CaseLifeCycle.ST_ON_WORK_GROUP_APPROVE.getSortValue() §				|| (CaseHelper.getHasProlongationDecision(getType(), getCurrentState()))§			) {§			ExecutionGroupDecision res = ExecutionGroupDecision.Factory.get(getProxy(),§														ExecutionGroupDecisionType.COMPLETE_PARTICIPATION);§			res.addCompletionListener(this);§			if(res.getMembers().size() > getExecutors().size()) {§				return res;§			}§			§			HrHelper hrHelper = new HrHelper();§			for (String executorLogin : getExecutorLogins()) {§				Worker executor = hrHelper.getWorker(executorLogin);§				boolean hasCollegueDecision = false;§				for (String decisionGroupMemberLogin : res.getMembers()) {§					Worker decisionGroupMember = hrHelper.getWorker(decisionGroupMemberLogin);§					if (decisionGroupMember.fromSameDepartment(executor)) {§						hasCollegueDecision = true;§						break;§					}§				}§				if (!hasCollegueDecision) {§					res.putMember(executorLogin);§				}§			}§			return res;§		}§		return super.createExecutionGroupDecision();§	}§	§	private long getPeriodToTheEndOfDay (int numberOfDays) {§		Date nDayEnd = new Date();§		nDayEnd = org.apache.commons.lang.time.DateUtils.truncate(nDayEnd, Calendar.DATE);§		nDayEnd = org.apache.commons.lang.time.DateUtils.addDays(nDayEnd, numberOfDays + 1);§		nDayEnd = org.apache.commons.lang.time.DateUtils.addSeconds(nDayEnd, -1);§		long fromTime = new Date().getTime();§		return nDayEnd.getTime() - fromTime;§	}§	§	private void signCaseDocument() {§		ByteArrayInputStream in = null;§		try {§			Attachment caseAttachment = getCaseAttachment();§			if(caseAttachment == null) {§				return;§			}§			§			final byte[] updatedContent = writeSignatureToCaseDocument(caseAttachment);§			in = new ByteArrayInputStream(updatedContent);§			§			Attachment previousCaseAttachmentVersion = (Attachment) caseAttachment.clone();§			caseAttachment.setFileSize(updatedContent.length);§			getPage().addAttachment(caseAttachment);§			ContainerManager.Factory.get().getAttachmentManager().saveAttachment(caseAttachment, previousCaseAttachmentVersion, in);§		} catch(InvalidFormatException e) {§			Logs.LOG_E("CaseS::writeSignature - invalid case document format - " + e);§		} catch(Exception e) {§			Logs.LOG_E("CaseS::writeSignature - can not write to attached case file - " + e);§		} finally {§			if (in != null) {§				IOUtils.closeQuietly(in);§			}§		}§	}§	§	private static final String PROTOCOL_SHEET_NAME = "–ü—Ä–æ—Ç–æ–∫–æ–ª";§	private static final int TARGET_ROW = 5;§	private static final short TARGET_CELL = 1;§	private static final int SIGNATURE_LINE_COUNT = 5;§	private static final String SIGNATURE_TEXT_KEY = "case.approved.by.director.";§	§	private byte[] writeSignatureToCaseDocument (Attachment caseAttachment) throws InvalidFormatException, IOException {§		final Messages i18n = Messages.Factory.messages();§§		ByteArrayOutputStream out = null;§		try {§			final Workbook workbook = WorkbookFactory.create(caseAttachment.getContentsAsStream());§			final Sheet protocolSheet = workbook.getSheet(PROTOCOL_SHEET_NAME);§§			final Font font = workbook.createFont();§			font.setBoldweight(Font.BOLDWEIGHT_BOLD);§§			for (int i = TARGET_ROW; i < TARGET_ROW + SIGNATURE_LINE_COUNT; i++) {§				int textIndex = i - TARGET_ROW;§				String textKey = SIGNATURE_TEXT_KEY + textIndex;§§				Cell cell = getCell(protocolSheet.getRow(i));§				cell.getCellStyle().setFont(font);§§				boolean lastSignatureLine = textIndex == (SIGNATURE_LINE_COUNT - 1);§				// last signature line should contain current date§				cell.setCellValue(lastSignatureLine ? DateUtils.formatDdMMyyyDate(new Date()) : i18n§						.get(textKey));§			}§§			out = new ByteArrayOutputStream();§			workbook.write(out);§			out.flush();§§			return out.toByteArray();§		} finally {§			if (out != null) {§				IOUtils.closeQuietly(out);§			}§		}§	}§	§	private Cell getCell(Row row){§		Cell cell = row.getCell(TARGET_CELL);§		if(cell == null){§			cell = row.createCell(TARGET_CELL);§		}§		return cell;§	}§§	@Override§	public boolean hasResultDecision() {§		boolean hasDecision = super.hasResultDecision();§		if(getLeaderDecision() != null){§			hasDecision = true;§		}§		return hasDecision;§	}§§	public void senMailWithChangesInProlongationCaseForAssign(List<String> executors, byte prevState){§		final CaseProlongationNotificationGateway notificationGateway = (CaseProlongationNotificationGateway) getNotificationGateway();§		notificationGateway.queueAssignmentEmails(executors, prevState);§	}§§	private String leaderDecision_ = null;§	//#UC END# *4AFC06A802D0_CUSTOM_METHODS_AND_DATA*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4AFC06A802D0_4AFC0413024E_ON_RESURRECT_ACTION_IMPL*"
		    value      	(value Text 
|//#UC START# *4AFC06A802D0_4AFC0413024E_ON_RESURRECT_ACTION_IMPL*§		//#UC END# *4AFC06A802D0_4AFC0413024E_ON_RESURRECT_ACTION_IMPL*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4AFC06A802D0_4AFC0413024E_ACTION_DISCARDED_ENTER*"
		    value      	(value Text 
|//#UC START# *4AFC06A802D0_4AFC0413024E_ACTION_DISCARDED_ENTER*§		if(isCaseReport() == false){§			ru.garant.MDProcess.CaseAgreementChange.Entities.sm.CaseLifeCycle.Discarded state = CaseLifeCycle.ST_DISCARDED;§			final CaseNotificationGateway notificationGateway = (CaseNotificationGateway) getNotificationGateway();§			notificationGateway.queueFinalEmailForCurator(state);§			notificationGateway.queueFinalEmailForDevelopmentManager(state);§			notificationGateway.queueFinalEmailsForExternalAuthors(state);§			notificationGateway.queueFinalEmailsForWorkGroup(state);§		}§		//#UC END# *4AFC06A802D0_4AFC0413024E_ACTION_DISCARDED_ENTER*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4AFC06A802D0_4AFC0413024E_ONWORKGROUPAPPROVE_VALIDATE*"
		    value      	(value Text 
|//#UC START# *4AFC06A802D0_4AFC0413024E_ONWORKGROUPAPPROVE_VALIDATE*§		commonValidation();§§		if (getExecutorLogins().isEmpty() || getWorkGroup().isEmpty()) {§			throw new ValidationFailed(1, Messages.Factory.messages()§					.get("cases.impossible.to.work.group.approve.necessary.input.work.group"));§		}§		//#UC END# *4AFC06A802D0_4AFC0413024E_ONWORKGROUPAPPROVE_VALIDATE*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4AFC06A802D0_4AFC0413024E_ONWORKGROUPAPPROVE_PRE_ENTER*"
		    value      	(value Text 
|//#UC START# *4AFC06A802D0_4AFC0413024E_ONWORKGROUPAPPROVE_PRE_ENTER*§		setExecutors(getWorkGroupLogins());§		setStateForecastTime(getPeriodToTheEndOfDay(1));§		//#UC END# *4AFC06A802D0_4AFC0413024E_ONWORKGROUPAPPROVE_PRE_ENTER*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4AFC06A802D0_4AFC0413024E_ONWORKGROUPAPPROVE_PRE_EXIT*"
		    value      	(value Text 
|//#UC START# *4AFC06A802D0_4AFC0413024E_ONWORKGROUPAPPROVE_PRE_EXIT*§		previousExecutionDecision_ = getExecutionGroupDecision();§		//#UC END# *4AFC06A802D0_4AFC0413024E_ONWORKGROUPAPPROVE_PRE_EXIT*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4AFC06A802D0_4AFC0413024E_ONANALYZE_VALIDATE*"
		    value      	(value Text 
|//#UC START# *4AFC06A802D0_4AFC0413024E_ONANALYZE_VALIDATE*§		//#UC END# *4AFC06A802D0_4AFC0413024E_ONANALYZE_VALIDATE*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4AFC06A802D0_4AFC0413024E_ONANALYZE_PRE_ENTER*"
		    value      	(value Text 
|//#UC START# *4AFC06A802D0_4AFC0413024E_ONANALYZE_PRE_ENTER*§		//#UC END# *4AFC06A802D0_4AFC0413024E_ONANALYZE_PRE_ENTER*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4AFC06A802D0_4AFC0413024E_ONANALYZE_PRE_EXIT*"
		    value      	(value Text 
|//#UC START# *4AFC06A802D0_4AFC0413024E_ONANALYZE_PRE_EXIT*§		//#UC END# *4AFC06A802D0_4AFC0413024E_ONANALYZE_PRE_EXIT*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4AFC06A802D0_4AFC0413024E_ONCCAPPROVE_VALIDATE*"
		    value      	(value Text 
|//#UC START# *4AFC06A802D0_4AFC0413024E_ONCCAPPROVE_VALIDATE*§		commonValidation();§		§		if (StringUtils.isEmpty(getCcManager())) {§			throw new ValidationFailed(2, Messages.Factory.messages()§					.get("cases.impossible.to.cc.approve.necessary.input.cc.manager"));§		}§		//#UC END# *4AFC06A802D0_4AFC0413024E_ONCCAPPROVE_VALIDATE*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4AFC06A802D0_4AFC0413024E_ONCCAPPROVE_PRE_ENTER*"
		    value      	(value Text 
|//#UC START# *4AFC06A802D0_4AFC0413024E_ONCCAPPROVE_PRE_ENTER*§		setExecutor(getCcManager());§		setStateForecastTime(getPeriodToTheEndOfDay(1));§		//#UC END# *4AFC06A802D0_4AFC0413024E_ONCCAPPROVE_PRE_ENTER*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4AFC06A802D0_4AFC0413024E_ONCCAPPROVE_PRE_EXIT*"
		    value      	(value Text 
|//#UC START# *4AFC06A802D0_4AFC0413024E_ONCCAPPROVE_PRE_EXIT*§		//#UC END# *4AFC06A802D0_4AFC0413024E_ONCCAPPROVE_PRE_EXIT*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4AFC06A802D0_4AFC0413024E_ONUVSAPPROVE_VALIDATE*"
		    value      	(value Text 
|//#UC START# *4AFC06A802D0_4AFC0413024E_ONUVSAPPROVE_VALIDATE*§		commonValidation();§		§		if (StringUtils.isEmpty(getUvsManager())) {§			throw new ValidationFailed(3, Messages.Factory.messages()§					.get("cases.impossible.to.uvs.approve.necessary.input.uvs.manager"));§		}§		//#UC END# *4AFC06A802D0_4AFC0413024E_ONUVSAPPROVE_VALIDATE*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4AFC06A802D0_4AFC0413024E_ONUVSAPPROVE_PRE_ENTER*"
		    value      	(value Text 
|//#UC START# *4AFC06A802D0_4AFC0413024E_ONUVSAPPROVE_PRE_ENTER*§		setExecutor(getUvsManager());§		setStateForecastTime(getPeriodToTheEndOfDay(1));§		//#UC END# *4AFC06A802D0_4AFC0413024E_ONUVSAPPROVE_PRE_ENTER*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4AFC06A802D0_4AFC0413024E_ONUVSAPPROVE_PRE_EXIT*"
		    value      	(value Text 
|//#UC START# *4AFC06A802D0_4AFC0413024E_ONUVSAPPROVE_PRE_EXIT*§		//#UC END# *4AFC06A802D0_4AFC0413024E_ONUVSAPPROVE_PRE_EXIT*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4AFC06A802D0_4AFC0413024E_ONAPPROVE_VALIDATE*"
		    value      	(value Text 
|//#UC START# *4AFC06A802D0_4AFC0413024E_ONAPPROVE_VALIDATE*§		//#UC END# *4AFC06A802D0_4AFC0413024E_ONAPPROVE_VALIDATE*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4AFC06A802D0_4AFC0413024E_ONAPPROVE_PRE_ENTER*"
		    value      	(value Text 
|//#UC START# *4AFC06A802D0_4AFC0413024E_ONAPPROVE_PRE_ENTER*§		//#UC END# *4AFC06A802D0_4AFC0413024E_ONAPPROVE_PRE_ENTER*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4AFC06A802D0_4AFC0413024E_ONAPPROVE_PRE_EXIT*"
		    value      	(value Text 
|//#UC START# *4AFC06A802D0_4AFC0413024E_ONAPPROVE_PRE_EXIT*§		//#UC END# *4AFC06A802D0_4AFC0413024E_ONAPPROVE_PRE_EXIT*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4AFC06A802D0_4AFC0413024E_ONANALYSE_VALIDATE*"
		    value      	(value Text 
|//#UC START# *4AFC06A802D0_4AFC0413024E_ONANALYSE_VALIDATE*§		//#UC END# *4AFC06A802D0_4AFC0413024E_ONANALYSE_VALIDATE*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4AFC06A802D0_4AFC0413024E_ONANALYSE_PRE_ENTER*"
		    value      	(value Text 
|//#UC START# *4AFC06A802D0_4AFC0413024E_ONANALYSE_PRE_ENTER*§		//#UC END# *4AFC06A802D0_4AFC0413024E_ONANALYSE_PRE_ENTER*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4AFC06A802D0_4AFC0413024E_ONANALYSE_PRE_EXIT*"
		    value      	(value Text 
|//#UC START# *4AFC06A802D0_4AFC0413024E_ONANALYSE_PRE_EXIT*§		//#UC END# *4AFC06A802D0_4AFC0413024E_ONANALYSE_PRE_EXIT*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4AFC06A802D0_4AFC0413024E_ONRESOLUTION_VALIDATE*"
		    value      	(value Text 
|//#UC START# *4AFC06A802D0_4AFC0413024E_ONRESOLUTION_VALIDATE*§		//#UC END# *4AFC06A802D0_4AFC0413024E_ONRESOLUTION_VALIDATE*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4AFC06A802D0_4AFC0413024E_ONRESOLUTION_PRE_ENTER*"
		    value      	(value Text 
|//#UC START# *4AFC06A802D0_4AFC0413024E_ONRESOLUTION_PRE_ENTER*§		setExecutor(getCurator());§		setStateForecastTime(getPeriodToTheEndOfDay(1));§		//#UC END# *4AFC06A802D0_4AFC0413024E_ONRESOLUTION_PRE_ENTER*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4AFC06A802D0_4AFC0413024E_ONRESOLUTION_PRE_EXIT*"
		    value      	(value Text 
|//#UC START# *4AFC06A802D0_4AFC0413024E_ONRESOLUTION_PRE_EXIT*§		//#UC END# *4AFC06A802D0_4AFC0413024E_ONRESOLUTION_PRE_EXIT*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4AFC06A802D0_4AFC0413024E_ONDIRECTORAPPROVE_VALIDATE*"
		    value      	(value Text 
|//#UC START# *4AFC06A802D0_4AFC0413024E_ONDIRECTORAPPROVE_VALIDATE*§		commonValidation();§		§		if (StringUtils.isEmpty(getDirector())) {§			throw new ValidationFailed(4, Messages.Factory.messages()§					.get("cases.impossible.to.director.approve.necessary.input.director"));§		}§		//#UC END# *4AFC06A802D0_4AFC0413024E_ONDIRECTORAPPROVE_VALIDATE*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4AFC06A802D0_4AFC0413024E_ONDIRECTORAPPROVE_PRE_ENTER*"
		    value      	(value Text 
|//#UC START# *4AFC06A802D0_4AFC0413024E_ONDIRECTORAPPROVE_PRE_ENTER*§		setExecutor(getDirector());§		setStateForecastTime(getPeriodToTheEndOfDay(1));§		//#UC END# *4AFC06A802D0_4AFC0413024E_ONDIRECTORAPPROVE_PRE_ENTER*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4AFC06A802D0_4AFC0413024E_ONDIRECTORAPPROVE_PRE_EXIT*"
		    value      	(value Text 
|//#UC START# *4AFC06A802D0_4AFC0413024E_ONDIRECTORAPPROVE_PRE_EXIT*§		//#UC END# *4AFC06A802D0_4AFC0413024E_ONDIRECTORAPPROVE_PRE_EXIT*
		    ))
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Factory auto reg"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Factory default impl"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Servant Pool"
		    value      	"none")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"debug log"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"factory priority"
		    value      	"0")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"local supervisor"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"need UC"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"singleton"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"DerivedOverload"
		    value      	(value Text 
|{"4B02D37403A3":{"need_collect_children":"false"},"4B0A66B000FA":{"need_collect_children":"false"}}
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ImplementSelectType"
		    value      	"all")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"OverloadSelectType"
		    value      	"include")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4AFC06A802D0_4AFC0413024E_ACTION_ONWORKGROUPAPPROVE_ENTER*"
		    value      	(value Text 
|//#UC START# *4AFC06A802D0_4AFC0413024E_ACTION_ONWORKGROUPAPPROVE_ENTER*§		if(isCaseReport() == false){§			final CaseNotificationGateway notificationGateway = (CaseNotificationGateway) getNotificationGateway();§			// previous state doesn't matter§			notificationGateway.queueAssignmentEmailForCurator((byte) 0);§			notificationGateway.queueEmailsForExternalAuthorsOnWorkgroupApproveState();§		}§		//#UC END# *4AFC06A802D0_4AFC0413024E_ACTION_ONWORKGROUPAPPROVE_ENTER*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4AFC06A802D0_4AFC0413024E_IS_UNANIMOUS_DECISION_GUARD_IMPL*"
		    value      	(value Text 
|//#UC START# *4AFC06A802D0_4AFC0413024E_IS_UNANIMOUS_DECISION_GUARD_IMPL*§		if(isCaseReport()){§			return true;§		}§		§		if(previousExecutionDecision_ == null) {§			return false;§		}§		String approveEventId = CaseLifeCycle.EV_WORK_GROUP_APPROVE.getGuid();§		for (ExecutionDecision decision : previousExecutionDecision_.getDecisions()) {§			if (!approveEventId.equals(decision.getEventId())) {§				return false;§			}§		}§		return true;§		//#UC END# *4AFC06A802D0_4AFC0413024E_IS_UNANIMOUS_DECISION_GUARD_IMPL*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4AFC06A802D0_4AFC0413024E_ACTION_ONACCEPT_ENTER*"
		    value      	(value Text 
|//#UC START# *4AFC06A802D0_4AFC0413024E_ACTION_ONACCEPT_ENTER*§		if (event != null) {§			AbstractEvent ae = (AbstractEvent)event;§			ContainerManager.Factory.get().getContentPropertyManager().setStringProperty(§				getPage()§				, "EVENT_BEFORE_ACCEPT"§				, event.getClass().getName()§			);§		}§		//#UC END# *4AFC06A802D0_4AFC0413024E_ACTION_ONACCEPT_ENTER*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4AFC06A802D0_4AFC0413024E_IS_FROM_DIRECTOR_GUARD_IMPL*"
		    value      	(value Text 
|//#UC START# *4AFC06A802D0_4AFC0413024E_IS_FROM_DIRECTOR_GUARD_IMPL*§		assert (false);§		return false;§		//#UC END# *4AFC06A802D0_4AFC0413024E_IS_FROM_DIRECTOR_GUARD_IMPL*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4AFC06A802D0_4AFC0413024E_IS_FROM_UVS_GUARD_IMPL*"
		    value      	(value Text 
|//#UC START# *4AFC06A802D0_4AFC0413024E_IS_FROM_UVS_GUARD_IMPL*§		assert (false);§		return false;§		//#UC END# *4AFC06A802D0_4AFC0413024E_IS_FROM_UVS_GUARD_IMPL*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4AFC06A802D0_4AFC0413024E_IS_FROM_CC_GUARD_IMPL*"
		    value      	(value Text 
|//#UC START# *4AFC06A802D0_4AFC0413024E_IS_FROM_CC_GUARD_IMPL*§		assert (false);§		return false;§		//#UC END# *4AFC06A802D0_4AFC0413024E_IS_FROM_CC_GUARD_IMPL*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"19022135343")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4AFC06A802D0_4AFC0413024E_IS_PREV_PHASE_WAS_DIRECTOR_APPROVE_GUARD_IMPL*"
		    value      	(value Text 
|//#UC START# *4AFC06A802D0_4AFC0413024E_IS_PREV_PHASE_WAS_DIRECTOR_APPROVE_GUARD_IMPL*§        String className = ContainerManager.Factory.get().getContentPropertyManager().getStringProperty(§                getPage()§                , "EVENT_BEFORE_ACCEPT"§        );§        if (className != null && CaseLifeCycle.NeedToWorkFromDirector.class.getName().equals(className)) {§            return true;§        }§        return false;§        //#UC END# *4AFC06A802D0_4AFC0413024E_IS_PREV_PHASE_WAS_DIRECTOR_APPROVE_GUARD_IMPL*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4AFC06A802D0_4AFC0413024E_IS_PREV_PHASE_WAS_UVS_APPROVE_GUARD_IMPL*"
		    value      	(value Text 
|//#UC START# *4AFC06A802D0_4AFC0413024E_IS_PREV_PHASE_WAS_UVS_APPROVE_GUARD_IMPL*§        String className = ContainerManager.Factory.get().getContentPropertyManager().getStringProperty(§                getPage()§                , "EVENT_BEFORE_ACCEPT"§        );§        if (className != null && CaseLifeCycle.NeedToWorkFromUVS.class.getName().equals(className)) {§            return true;§        }§        return false;§		//#UC END# *4AFC06A802D0_4AFC0413024E_IS_PREV_PHASE_WAS_UVS_APPROVE_GUARD_IMPL*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4AFC06A802D0_4AFC0413024E_IS_PREV_PHASE_WAS_CC_APPROVE_GUARD_IMPL*"
		    value      	(value Text 
|//#UC START# *4AFC06A802D0_4AFC0413024E_IS_PREV_PHASE_WAS_CC_APPROVE_GUARD_IMPL*§        String className = ContainerManager.Factory.get().getContentPropertyManager().getStringProperty(§                getPage()§                , "EVENT_BEFORE_ACCEPT"§        );§        if (className != null && CaseLifeCycle.NeedToWorkFromCc.class.getName().equals(className)) {§            return true;§        }§        return false;§		//#UC END# *4AFC06A802D0_4AFC0413024E_IS_PREV_PHASE_WAS_CC_APPROVE_GUARD_IMPL*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4AFC06A802D0_4AFC0413024E_SUSPENDED_VALIDATE*"
		    value      	(value Text 
|//#UC START# *4AFC06A802D0_4AFC0413024E_SUSPENDED_VALIDATE*§		//#UC END# *4AFC06A802D0_4AFC0413024E_SUSPENDED_VALIDATE*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4AFC06A802D0_4AFC0413024E_SUSPENDED_PRE_ENTER*"
		    value      	(value Text 
|//#UC START# *4AFC06A802D0_4AFC0413024E_SUSPENDED_PRE_ENTER*§		onPreFinalState();§		//#UC END# *4AFC06A802D0_4AFC0413024E_SUSPENDED_PRE_ENTER*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4AFC06A802D0_4AFC0413024E_SUSPENDED_PRE_EXIT*"
		    value      	(value Text 
|//#UC START# *4AFC06A802D0_4AFC0413024E_SUSPENDED_PRE_EXIT*§		//#UC END# *4AFC06A802D0_4AFC0413024E_SUSPENDED_PRE_EXIT*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4AFC06A802D0_4AFC0413024E_NO_DECISION_OR_WAS_DECISION_APPROVE_GUARD_IMPL*"
		    value      	(value Text 
|//#UC START# *4AFC06A802D0_4AFC0413024E_NO_DECISION_OR_WAS_DECISION_APPROVE_GUARD_IMPL*§		String approveEventId = CaseLifeCycle.EV_WORK_GROUP_APPROVE.getGuid();§		String discardEventId = CaseLifeCycle.EV_WORK_GROUP_DISCARD.getGuid();§		for (ExecutionDecision decision : previousExecutionDecision_.getDecisions()) {§			if (approveEventId.equals(decision.getEventId())) {§				return true;§			}else if(discardEventId.equals(decision.getEventId())){§				return false;§			}§		}§		return true;§		//#UC END# *4AFC06A802D0_4AFC0413024E_NO_DECISION_OR_WAS_DECISION_APPROVE_GUARD_IMPL*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4AFC06A802D0_4AFC0413024E_NO_DECISION_OR_WAS_DECISION_DISCARD_GUARD_IMPL*"
		    value      	(value Text 
|//#UC START# *4AFC06A802D0_4AFC0413024E_NO_DECISION_OR_WAS_DECISION_DISCARD_GUARD_IMPL*§		String approveEventId = CaseLifeCycle.EV_WORK_GROUP_APPROVE.getGuid();§		String discardEventId = CaseLifeCycle.EV_WORK_GROUP_DISCARD.getGuid();§		for (ExecutionDecision decision : previousExecutionDecision_.getDecisions()) {§			if (approveEventId.equals(decision.getEventId())) {§				return false;§			}else if(discardEventId.equals(decision.getEventId())){§				return true;§			}§		}§		return true;§		//#UC END# *4AFC06A802D0_4AFC0413024E_NO_DECISION_OR_WAS_DECISION_DISCARD_GUARD_IMPL*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4AFC06A802D0_4AFC0413024E_NO_DECISION_OR_WAS_DICISION_APPROVE_GUARD_IMPL*"
		    value      	(value Text 
|//#UC START# *4AFC06A802D0_4AFC0413024E_NO_DECISION_OR_WAS_DICISION_APPROVE_GUARD_IMPL*§		if(isCaseReport()){§			return false;§		}§		§		if(hasResultDecision()){§			return true;§		}§		§		String approveEventId = CaseLifeCycle.EV_WORK_GROUP_APPROVE.getGuid();§		String discardEventId = CaseLifeCycle.EV_WORK_GROUP_DISCARD.getGuid();§		User user = AuthenticatedUserThreadLocal.getUser();§		//–µ—Å–ª–∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è Job (–Ω–∞–ø—Ä–∏–º–µ—Ä, DeficitMonitoringJob)§		if(user == null){§			return true;§		}§		for (ExecutionDecision decision : getExecutionGroupDecision().getDecisions()) {§			if (user.getName().equals(decision.getLogin())){ §				if(approveEventId.equals(decision.getEventId())) {§					return true;§				}else if(discardEventId.equals(decision.getEventId())){§					return false;§				}§			}§		}§		if(getExecutionGroupDecision().getMembers().contains(user.getName())){§			return true;§		}else{§			return false;§		}§		//#UC END# *4AFC06A802D0_4AFC0413024E_NO_DECISION_OR_WAS_DICISION_APPROVE_GUARD_IMPL*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4AFC06A802D0_4AFC0413024E_NO_DECISION_OR_WAS_DICISION_DISCARD_GUARD_IMPL*"
		    value      	(value Text 
|//#UC START# *4AFC06A802D0_4AFC0413024E_NO_DECISION_OR_WAS_DICISION_DISCARD_GUARD_IMPL*§		if(isCaseReport()){§			return false;§		}§§		if(hasResultDecision()){§			return true;§		}§§		String approveEventId = CaseLifeCycle.EV_WORK_GROUP_APPROVE.getGuid();§		String discardEventId = CaseLifeCycle.EV_WORK_GROUP_DISCARD.getGuid();§		User user = AuthenticatedUserThreadLocal.getUser();§		//–µ—Å–ª–∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è Job (–Ω–∞–ø—Ä–∏–º–µ—Ä, DeficitMonitoringJob)§		if(user == null){§			return true;§		}§		for (ExecutionDecision decision : getExecutionGroupDecision().getDecisions()) {§			if (user.getName().equals(decision.getLogin())){ §				if (approveEventId.equals(decision.getEventId())) {§					return false;§				}else if(discardEventId.equals(decision.getEventId())){§					return true;§				}§			}§		}§		if(getExecutionGroupDecision().getMembers().contains(user.getName())){§			return true;§		}else{§			return false;§		}§		//#UC END# *4AFC06A802D0_4AFC0413024E_NO_DECISION_OR_WAS_DICISION_DISCARD_GUARD_IMPL*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4AFC06A802D0_4AFC0413024E_NOT_ALL_GROUP_MEMBERS_VOTED_GUARD_IMPL*"
		    value      	(value Text 
|//#UC START# *4AFC06A802D0_4AFC0413024E_NOT_ALL_GROUP_MEMBERS_VOTED_GUARD_IMPL*§		String userName = AuthenticatedUserThreadLocal.getUsername();§		if(userName != null && userName.equals(getCurator())){§			return true;§		}§		return false;§		//#UC END# *4AFC06A802D0_4AFC0413024E_NOT_ALL_GROUP_MEMBERS_VOTED_GUARD_IMPL*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4AFC06A802D0_4AFC0413024E_WAS_CASE_REPORT_AND_IN_ARCHIVE_GUARD_IMPL*"
		    value      	(value Text 
|//#UC START# *4AFC06A802D0_4AFC0413024E_WAS_CASE_REPORT_AND_IN_ARCHIVE_GUARD_IMPL*§		if(isCaseReport() == false){§			return false;§		}§§		if(hasResultDecision()){§			return true;§		}§§		String inArchiveEventId = CaseLifeCycle.EV_WORK_GROUP_IN_ARCHIVE.getGuid();§		String continueEventId = CaseLifeCycle.EV_WORK_GROUP_CONTINUE.getGuid();§		String changeRPEventId = CaseLifeCycle.EV_WORK_GROUP_CHANGE_RP.getGuid();§		User user = AuthenticatedUserThreadLocal.getUser();§		//–µ—Å–ª–∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è Job (–Ω–∞–ø—Ä–∏–º–µ—Ä, DeficitMonitoringJob)§		if(user == null){§			return true;§		}§		for (ExecutionDecision decision : getExecutionGroupDecision().getDecisions()) {§			if (user.getName().equals(decision.getLogin())){ §				if (inArchiveEventId.equals(decision.getEventId())) {§					return false;§				}else if(continueEventId.equals(decision.getEventId()) || changeRPEventId.equals(decision.getEventId())){§					return true;§				}§			}§		}§		if(getExecutionGroupDecision().getMembers().contains(user.getName())){§			return true;§		}else{§			return false;§		}§		//#UC END# *4AFC06A802D0_4AFC0413024E_WAS_CASE_REPORT_AND_IN_ARCHIVE_GUARD_IMPL*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4AFC06A802D0_4AFC0413024E_WAS_CASE_REPORT_AND_CONTINUE_GUARD_IMPL*"
		    value      	(value Text 
|//#UC START# *4AFC06A802D0_4AFC0413024E_WAS_CASE_REPORT_AND_CONTINUE_GUARD_IMPL*§		if(isCaseReport() == false){§			return false;§		}§§		if(hasResultDecision()){§			return true;§		}§§		String inArchiveEventId = CaseLifeCycle.EV_WORK_GROUP_IN_ARCHIVE.getGuid();§		String continueEventId = CaseLifeCycle.EV_WORK_GROUP_CONTINUE.getGuid();§		String changeRPEventId = CaseLifeCycle.EV_WORK_GROUP_CHANGE_RP.getGuid();§		User user = AuthenticatedUserThreadLocal.getUser();§		//–µ—Å–ª–∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è Job (–Ω–∞–ø—Ä–∏–º–µ—Ä, DeficitMonitoringJob)§		if(user == null){§			return true;§		}§		for (ExecutionDecision decision : getExecutionGroupDecision().getDecisions()) {§			if (user.getName().equals(decision.getLogin())){ §				if (continueEventId.equals(decision.getEventId())) {§					return false;§				}else if(inArchiveEventId.equals(decision.getEventId()) || changeRPEventId.equals(decision.getEventId())){§					return true;§				}§			}§		}§		if(getExecutionGroupDecision().getMembers().contains(user.getName())){§			return true;§		}else{§			return false;§		}§		//#UC END# *4AFC06A802D0_4AFC0413024E_WAS_CASE_REPORT_AND_CONTINUE_GUARD_IMPL*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4AFC06A802D0_4AFC0413024E_WAS_CASE_REPORT_AND_CHANGE_GUARD_IMPL*"
		    value      	(value Text 
|//#UC START# *4AFC06A802D0_4AFC0413024E_WAS_CASE_REPORT_AND_CHANGE_GUARD_IMPL*§		if(isCaseReport() == false){§			return false;§		}§§		if(hasResultDecision()){§			return true;§		}§§		String inArchiveEventId = CaseLifeCycle.EV_WORK_GROUP_IN_ARCHIVE.getGuid();§		String continueEventId = CaseLifeCycle.EV_WORK_GROUP_CONTINUE.getGuid();§		String changeRPEventId = CaseLifeCycle.EV_WORK_GROUP_CHANGE_RP.getGuid();§		User user = AuthenticatedUserThreadLocal.getUser();§		//–µ—Å–ª–∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è Job (–Ω–∞–ø—Ä–∏–º–µ—Ä, DeficitMonitoringJob)§		if(user == null){§			return true;§		}§		for (ExecutionDecision decision : getExecutionGroupDecision().getDecisions()) {§			if (user.getName().equals(decision.getLogin())){ §				if (changeRPEventId.equals(decision.getEventId())) {§					return false;§				}else if(continueEventId.equals(decision.getEventId()) || inArchiveEventId.equals(decision.getEventId())){§					return true;§				}§			}§		}§		if(getExecutionGroupDecision().getMembers().contains(user.getName())){§			return true;§		}else{§			return false;§		}§		//#UC END# *4AFC06A802D0_4AFC0413024E_WAS_CASE_REPORT_AND_CHANGE_GUARD_IMPL*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4AFC06A802D0_4AFC0413024E_IS_CASE_REPORT_GUARD_IMPL*"
		    value      	(value Text 
|//#UC START# *4AFC06A802D0_4AFC0413024E_IS_CASE_REPORT_GUARD_IMPL*§		return getType().equals(CaseType.PROLOGATION_REPORT);§		//#UC END# *4AFC06A802D0_4AFC0413024E_IS_CASE_REPORT_GUARD_IMPL*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4AFC06A802D0_4AFC0413024E_ACTION_ONCCAPPROVE_ENTER*"
		    value      	(value Text 
|//#UC START# *4AFC06A802D0_4AFC0413024E_ACTION_ONCCAPPROVE_ENTER*§		if(isCaseReport()){§			senMailWithChangesInProlongationCaseForAssign(getExecutorLogins(), getProxy().getPrevState());§		}	§		//#UC END# *4AFC06A802D0_4AFC0413024E_ACTION_ONCCAPPROVE_ENTER*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4AFC06A802D0_4AFC0413024E_ACTION_ONUVSAPPROVE_ENTER*"
		    value      	(value Text 
|//#UC START# *4AFC06A802D0_4AFC0413024E_ACTION_ONUVSAPPROVE_ENTER*§		if(isCaseReport()){§			senMailWithChangesInProlongationCaseForAssign(getExecutorLogins(), getProxy().getPrevState());§		}	§		//#UC END# *4AFC06A802D0_4AFC0413024E_ACTION_ONUVSAPPROVE_ENTER*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4AFC06A802D0_4AFC0413024E_ACTION_ONDIRECTORAPPROVE_ENTER*"
		    value      	(value Text 
|//#UC START# *4AFC06A802D0_4AFC0413024E_ACTION_ONDIRECTORAPPROVE_ENTER*§		if(isCaseReport()){§			senMailWithChangesInProlongationCaseForAssign(getExecutorLogins(), getProxy().getPrevState());§		}	§		//#UC END# *4AFC06A802D0_4AFC0413024E_ACTION_ONDIRECTORAPPROVE_ENTER*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"DerivedImplement"
		    value      	(value Text 
|{"4757F69E0296":{"need_collect_children":"true"},"4757F83900B2":{"need_collect_children":"true"},"4AFC045203AA":{"need_collect_children":"true"}}
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ApplyedGens"
		    value      	"All"))
	    quid       	"4AFC06A802D0"
	    documentation 	"Â‡ÎËÁ‡ˆËˇ"
	    stereotype 	"Servant"
	    superclasses 	(list inheritance_relationship_list
		(object Inheritance_Relationship
		    quid       	"4AFC06BC004D"
		    supplier   	"Logical View::MDProcess::ConfluenceMDChange::RequestsImpl::AbstractRequestS"
		    quidu      	"4757F83900B2"))
	    used_nodes 	(list uses_relationship_list
		(object Uses_Relationship
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"19022135753"))
		    quid       	"4AFC0772017A"
		    stereotype 	"uses"
		    supplier   	"Logical View::MDProcess::CaseAgreementChange::CaseDAO::CaseDAOProxy"
		    quidu      	"4AFC0375027F"))
	    realized_interfaces 	(list realize_rel_list
		(object Realize_Relationship
		    quid       	"4AFC06BA0135"
		    supplier   	"Logical View::MDProcess::CaseAgreementChange::Entities::Case"
		    quidu      	"4AFC045203AA"))
	    language   	"MDA Generator")
	(object Class "CaseManagerS"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"WikiPageID (wiki)"
		    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/ÃÓ‰ÂÎ¸ ÔÓÂÍÚ‡ "MDProcess"/CaseAgreementChange/EntitiesImpl/CaseManagerS|4AFC06E102F0
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (wiki)"
		    value      	"wiki")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (fctr.java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/CaseAgreementChange/EntitiesImpl/CaseManagerSFactoryImpl.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (fctr.java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/CaseAgreementChange/EntitiesImpl/CaseManagerS.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4AFC06E102F0_CUSTOM_IMPORT*"
		    value      	"//#UC START# *4AFC06E102F0_CUSTOM_IMPORT*§import ru.garant.MDProcess.ConfluenceMDChange.Requests.AbstractRequestLifeCycle.AbstractEvent;§§import java.util.*;§§import net.sf.hibernate.HibernateException;§import net.sf.hibernate.Query;§import net.sf.hibernate.Session;§§import org.springframework.orm.hibernate.SessionFactoryUtils;§§import com.atlassian.confluence.spaces.Space;§import com.atlassian.confluence.spaces.SpaceType;§import com.atlassian.user.Group;§§import ru.garant.shared.FSM.NotStarted;§import ru.garant.shared.FSM.PreEnterFailed;§import ru.garant.shared.FSM.PreExitFailed;§import ru.garant.shared.FSM.SaveFailed;§import ru.garant.shared.FSM.StateNotChanged;§import ru.garant.shared.FSM.ValidationFailed;§§import ru.garant.MDProcess.ConfluenceMDChange.MDChangeDAO.AbstractRequestDAOProxy;§import ru.garant.MDProcess.ConfluenceMDChange.MdcCommon.MDCManager;§import ru.garant.MDProcess.ContractChange.Entities.ContractRequestLifecycle;§import ru.garant.MDProcess.ContractChange.Entities.sm.ContractRequestLifecycle.OnVisa;§§import ru.garant.MDProcess.CaseAgreementChange.CaseDAO.CaseDAOProxy;§import ru.garant.MDProcess.CaseAgreementChange.CaseSupportTypes.CaseType;§§import ru.garant.MDProcess.CaseAgreementChange.MdcaCommon.MDCAManager;§§//#UC END# *4AFC06E102F0_CUSTOM_IMPORT*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4AFC06E102F0_CUSTOM_CLASS_DEFINITION*"
		    value      	"//#UC START# *4AFC06E102F0_CUSTOM_CLASS_DEFINITION*§//#UC END# *4AFC06E102F0_CUSTOM_CLASS_DEFINITION*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4AFC06E102F0_CUSTOM_METHODS_AND_DATA*"
		    value      	(value Text 
|//#UC START# *4AFC06E102F0_CUSTOM_METHODS_AND_DATA*§	§	@Override§	protected AbstractRequest doMoveRequest (AbstractRequest request) throws StateNotChanged, NotStarted,§			ValidationFailed, SaveFailed, PreEnterFailed, PreExitFailed {§		final Case aCase = (Case) request;§		final Page requestPage = aCase.getPage();§		§		Case movedCase = (Case) newRequest(aCase.getType(), requestPage);§		copyCommonProperties(aCase, movedCase);§		movedCase.setImportance(aCase.getImportance());§		movedCase.setCurator(aCase.getCurator());§		§		movedCase.commit();§		return movedCase;§	}§§§	@Override§	public MDCAManager getMdcManager(String spaceKey) {§		return MDCAManager.Factory.get(spaceKey);§	}§§§	@Override§	public boolean hasExecutionState() {§		// TODO Auto-generated method stub§		return false;§	}§	§	public final static String DATE_OF_SENDING_EMAIL_FOR_WORK_GROUP = "CaseManagerImpl.DateOfSendingEmailForWorkGroupJob";§	//#UC END# *4AFC06E102F0_CUSTOM_METHODS_AND_DATA*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"DerivedOverload"
		    value      	(value Text 
|{"476F868A0304":{"need_collect_children":"false"},"4862004501DC":{"need_collect_children":"false"},"48DCBB0900E0":{"need_collect_children":"false"},"49869EA401E2":{"need_collect_children":"false"},"49A7E4C401BE":{"need_collect_children":"false"},"4A2397620239":{"need_collect_children":"false"},"4A239DD00277":{"need_collect_children":"false"},"4A239DD8025E":{"need_collect_children":"false"},"4A239DDE02CB":{"need_collect_children":"false"},"4A239E4A020F":{"need_collect_children":"false"},"4DC11D800214":{"need_collect_children":"false"}}
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ImplementSelectType"
		    value      	"all")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"OverloadSelectType"
		    value      	"include")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Factory auto reg"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Factory default impl"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Servant Pool"
		    value      	"none")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"debug log"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"factory priority"
		    value      	"0")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"local supervisor"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"need UC"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"singleton"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"19022136398")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"DerivedImplement"
		    value      	(value Text 
|{"48E5FFCC0087":{"need_collect_children":"true"},"4AFC054A00F5":{"need_collect_children":"true"},"4B1F6D2D0121":{"need_collect_children":"true"}}
		    )))
	    quid       	"4AFC06E102F0"
	    documentation 	"Â‡ÎËÁ‡ˆËˇ"
	    stereotype 	"Servant"
	    superclasses 	(list inheritance_relationship_list
		(object Inheritance_Relationship
		    quid       	"4AFC06F00262"
		    supplier   	"Logical View::MDProcess::ConfluenceMDChange::RequestsImpl::AbstractRequestManagerS"
		    quidu      	"48EC4EA70206"))
	    realized_interfaces 	(list realize_rel_list
		(object Realize_Relationship
		    quid       	"4AFC06F20182"
		    supplier   	"Logical View::MDProcess::CaseAgreementChange::Entities::CaseManager"
		    quidu      	"4AFC054A00F5"))
	    language   	"MDA Generator")
	(object Class "CasePermissionManagerS"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/CaseAgreementChange/EntitiesImpl/CasePermissionManagerS.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"WikiPageID (wiki)"
		    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/ÃÓ‰ÂÎ¸ ÔÓÂÍÚ‡ "MDProcess"/CaseAgreementChange/EntitiesImpl/CasePermissionManagerS|4AFC070B03B1
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (wiki)"
		    value      	"wiki")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (fctr.java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/CaseAgreementChange/EntitiesImpl/CasePermissionManagerSFactoryImpl.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (fctr.java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4AFC070B03B1_CUSTOM_IMPORT*"
		    value      	"//#UC START# *4AFC070B03B1_CUSTOM_IMPORT*§import java.util.ArrayList;§import java.util.List;§§import com.atlassian.confluence.security.SpacePermission;§import com.atlassian.user.User;§§§import ru.garant.shared.FSM.NotStarted;§import ru.garant.shared.FSM.State;§import ru.garant.MDProcess.ConfluenceMDChange.Requests.sm.AbstractRequestLifeCycle.AbstractState;§import ru.garant.MDProcess.ConfluenceMDChange.Requests.sm.AbstractRequestLifeCycle.Closed;§import ru.garant.MDProcess.ConfluenceMDChange.Requests.sm.AbstractRequestLifeCycle.OnAccept;§import ru.garant.MDProcess.CaseAgreementChange.MdcaCommon.MDCAManager;§§import ru.garant.MDProcess.CaseAgreementChange.CaseSupport.CaseHelper;§import ru.garant.MDProcess.CaseAgreementChange.CaseSupportTypes.CasePermissions;§import ru.garant.MDProcess.CaseAgreementChange.CaseSupportTypes.CaseType;§§import ru.garant.MDProcess.CaseAgreementChange.Entities.sm.CaseLifeCycle.OnCcApprove;§import ru.garant.MDProcess.CaseAgreementChange.Entities.sm.CaseLifeCycle.OnResolution;§import ru.garant.MDProcess.CaseAgreementChange.Entities.sm.CaseLifeCycle.OnUvsApprove;§import ru.garant.MDProcess.CaseAgreementChange.Entities.sm.CaseLifeCycle.OnWorkGroupApprove;§import ru.garant.MDProcess.HRChange.Entities.Department;§import ru.garant.MDProcess.HRChange.Entities.Worker;§§//#UC END# *4AFC070B03B1_CUSTOM_IMPORT*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4AFC070B03B1_CUSTOM_CLASS_DEFINITION*"
		    value      	"//#UC START# *4AFC070B03B1_CUSTOM_CLASS_DEFINITION*§//#UC END# *4AFC070B03B1_CUSTOM_CLASS_DEFINITION*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4AFC070B03B1_CUSTOM_METHODS_AND_DATA*"
		    value      	(value Text 
|//#UC START# *4AFC070B03B1_CUSTOM_METHODS_AND_DATA*§	§	protected boolean canCreateExternalAuthors (final String spaceKey, final String user) {§		MDCAManager mdca = MDCAManager.Factory.get(spaceKey);§		return mdca.isCurator(user);§	}§	§	@Override§	protected boolean canEditExternalAuthors(final AbstractRequest request, final State currentState, final String user) {§			if (isTerminalState(currentState)) {§				return false;§			}§			String spaceKey = request.getPage().getSpaceKey();§			return canCreateExternalAuthors(spaceKey, user);§	}§§§	@Override§	protected boolean canReadExternalAuthors(String spaceKey, String user) {§		return true;§	}§§§	@Override§	protected boolean canEditState (final AbstractRequest request, final State currentState, final String user) {§			MDCAManager mdca = MDCAManager.Factory.get(request.getPage().getSpace());§			Case aCase = (Case) request;§			§			if (currentState instanceof Closed && (request.getPage().getCreatorName().equals(user) || mdca.isDevelopmentManager(user))) {§				return true;§			}§			§/*			if (currentState instanceof OnWorkGroupApprove) {§				if(request.hasExecutorDecision(user)) {§					return false;§				}§				§				// if current user is from the same department and is deputy from current executor - §				// give him an opportunity to vote instead of this colleague§				for (String executor : request.getExecutorLogins()) {§					final boolean hasExecutorDecision = request.hasExecutorDecision(executor);§					if (!hasExecutorDecision && isDeputy(executor, user, mdca)) {§							return true;§					}§				}§			}§			§			if(!super.canEditState(request, user)) {§				return false;§			}§*/			§			if (isTerminalState(currentState)) {§				return false;§			}§			§			final boolean currentCaseCurator = mdca.isCurator(user) && aCase.getCurator().equals(user);§			if(§				(§					currentState instanceof OnCcApprove §					|| currentState instanceof OnWorkGroupApprove§				)§				&& currentCaseCurator) {§				return true;§			}§			§			if (request.getExecutorLogins().contains(user)) {§				return true;§			}§			§			return currentState instanceof OnWorkGroupApprove == false && mdca.isDevelopmentManager(user);§	}§§	private boolean canEditWorkGroup (final AbstractRequest request, final State currentState, final String user) {§			if (isTerminalState(currentState)) {§				return false;§			}§			§			MDCAManager mdca = MDCAManager.Factory.get(request.getPage().getSpace());§			Case aCase = (Case) request;§			§			final boolean currentCaseCurator = mdca.isCurator(user) && aCase.getCurator().equals(user);§			if (!currentCaseCurator && !mdca.isDevelopmentManager(user)) {§				return false;§			}§			§			return currentState instanceof OnAccept || currentState instanceof OnWorkGroupApprove || currentState instanceof OnResolution;§	}§	§	private boolean canEditUvsManager (final AbstractRequest request, final State currentState, final String user) {§			MDCAManager mdca = MDCAManager.Factory.get(request.getPage().getSpace());§			if(mdca.isDevelopmentManager(user)){§				return true;§			}§§			if (isTerminalState(currentState)) {§				return false;§			}§			if(isStateOnAcceptAndExecutor(request, currentState, user)){§				return true;§			}§			§			if (!mdca.isInCcManagementGroup(user)) {§				return false;§			}§			§			return currentState instanceof OnCcApprove;§	}§§	//‰‡Ú¸ ÏÂÌˇÚ¸ Ì‡ÁÌ‡˜ÂÌÌÓÏÛ ÔÓÎˇ ÛÍ. ”¬—, ƒËÂÍÚÓ ‚ ‘‡ÁÂ - ÔËÌËÏ‡ÂÚÒˇ§	private boolean isStateOnAcceptAndExecutor(final AbstractRequest request, final State currentState, final String user){§		if(request.getType().equals(CaseType.PROLOGATION_REPORT) && currentState instanceof OnAccept && request.getExecutorLogins().contains(user)){§			return true;§		}§		return false;§	}§§	private boolean canEditDirector (final AbstractRequest request, final State currentState, final String user) {§			MDCAManager mdca = MDCAManager.Factory.get(request.getPage().getSpace());§			if(mdca.isDevelopmentManager(user)){§				return true;§			}§§			if (isTerminalState(currentState)) {§				return false;§			}§§			if(isStateOnAcceptAndExecutor(request, currentState, user)){§				return true;§			}§§			if (!mdca.isInUvsManagementGroup(user)) {§				return false;§			}§§			return currentState instanceof OnUvsApprove;§	}§§	private boolean canEditCcManager (final AbstractRequest request, final State currentState, final String user) {§			MDCAManager mdca = MDCAManager.Factory.get(request.getPage().getSpace());§			if(mdca.isDevelopmentManager(user)){§				return true;§			}§			if (isTerminalState(currentState)) {§				return false;§			}§§			Case aCase = (Case) request;§			§			final boolean currentCaseCurator = mdca.isCurator(user) && aCase.getCurator().equals(user);§			if (!currentCaseCurator) {§				return false;§			}§§			return currentState instanceof OnResolution || currentState instanceof OnAccept || currentState instanceof OnWorkGroupApprove;§	}§	§	private boolean canEditLocationSpace (AbstractRequest request, String user) {§		MDCAManager mdca = MDCAManager.Factory.get(request.getPage().getSpace());§		return mdca.isDevelopmentManager(user) || mdca.isCurator(user);§	}§/*	§	private boolean isDeputy (String mainWorkerName, String workerName, MDCAManager mdca) {§			Worker main = Worker.Factory.get(mainWorkerName);§			Worker deputy = Worker.Factory.get(workerName);§§			return mdca.getDeputyWorkGroup().contains(deputy) && fromSameDepartment(main, deputy);§	}§§	private boolean fromSameDepartment (Worker worker1, Worker worker2) {§		Department dep1 = worker1.getDepartment();§		Department dep2 = worker2.getDepartment();§		return dep1 != null ? dep1.equals(dep2) : false;§	}§	§	private boolean fromSameDepartment (String workerName, String workerName2) {§			Worker w1 = Worker.Factory.get(workerName);§			Worker w2 = Worker.Factory.get(workerName2);§			return fromSameDepartment(w1, w2);§	}§	§	protected boolean canEditPriority (AbstractRequest request, String user) {§		try {§			State currentState = request.getCurrentState();§			if (isFinalState(currentState) || isDiscardedState(currentState)) {§				return false;§			}§			return MDCManager.Factory.get(request.getPage().getSpaceKey()).isDevelopmentManager(user);§		}§		catch (NotStarted e) {§			Logs.LOG_E("AbstractRequestPermissionManagerS::canEditPriority: - catch NotStarted, how?!");§			throw new IllegalStateException(§					"AbstractRequestPermissionManagerS::canEditPriority: - catch NotStarted, how?!");§		}§	}*/§	§	protected boolean canEditPriority (final AbstractRequest request, final State currentState, final String user) {§			if (isTerminalState(currentState)) {§				return false;§			}§			final MDCAManager mdca = MDCAManager.Factory.get(request.getPage().getSpace());§			return mdca.isDevelopmentManager(user) || mdca.isCurator(user);§	}§	§	@Override§	protected boolean isDiscardedState (State state) {§		return CaseManager.Factory.get().isInDiscardedState((AbstractState) state);§	}§§	@Override§	protected boolean isFinalState (State state) {§		return CaseManager.Factory.get().isInFinalState((AbstractState) state);§	}§	§	protected boolean isSuspendedState (State state) {§		return CaseManager.Factory.get().isInSuspendedState((AbstractState) state);§	}§§	private static CanAddCaseFromDashboardCache canAddCaseFromDashboardCache = new CanAddCaseFromDashboardCache();§	§	private static class CanAddCaseFromDashboardCache extends UserSpaceCache {§§		public CanAddCaseFromDashboardCache() {§			super(900);§		}§		§		@Override§		protected Boolean loadData (String userName, String spaceKey) {§			final MDCAManager mdca = MDCAManager.Factory.get(spaceKey);§			return mdca.getEnabled() && mdca.isCurator(userName);§		}§		§	}§	§	private boolean isTerminalState(State currentState){§		if (isFinalState(currentState) || isDiscardedState(currentState) || isSuspendedState(currentState)) {§			return true;§		}§		return false;§	}§	§	private boolean canEditImportanceOrType(AbstractRequest request, String user){§		List<String> perms = new ArrayList<String>();§		perms.add(SpacePermission.ADMINISTER_SPACE_PERMISSION);§		List<User> administrators = ContainerManager.Factory.get().getSpacePermissionManager().getUsersForPermissions(perms, request.getPage().getSpace());§		boolean isTerminalState = isTerminalState(request.getCurrentState());§		if(canEditLocationSpace(request, user) && isTerminalState == false){§			return true;§		}§		for(User administrator : administrators){§			if(administrator.getName().equals(user) &&  isTerminalState == false){§				return true;§			}§		}§		return false;§	}§§	private boolean canEditType(AbstractRequest request, String user){§		boolean result = canEditImportanceOrType(request, user);§		if(request.getType().equals(CaseType.PROLOGATION_REPORT)){§			return false;§		}§		return result;§	}§	//#UC END# *4AFC070B03B1_CUSTOM_METHODS_AND_DATA*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"DerivedOverload"
		    value      	(value Text 
|{"4B4AC9DE025E":{"need_collect_children":"false"},"5360CCC60186":{"need_collect_children":"false"}}
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ImplementSelectType"
		    value      	"all")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"OverloadSelectType"
		    value      	"include")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"19022136940")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"DerivedImplement"
		    value      	(value Text 
|{"48EB593602EB":{"need_collect_children":"true"}}
		    )))
	    quid       	"4AFC070B03B1"
	    documentation 	"Â‡ÎËÁ‡ˆËˇ"
	    stereotype 	"Servant"
	    superclasses 	(list inheritance_relationship_list
		(object Inheritance_Relationship
		    quid       	"4AFC07230147"
		    supplier   	"Logical View::MDProcess::ConfluenceMDChange::RequestsImpl::AbstractRequestPermissionManagerS"
		    quidu      	"48EB5A1901CF"))
	    realized_interfaces 	(list realize_rel_list
		(object Realize_Relationship
		    quid       	"4AFC07250287"
		    supplier   	"Logical View::MDProcess::CaseAgreementChange::Entities::CasePermissionManager"
		    quidu      	"4AFC04CA024B"))
	    language   	"MDA Generator")
	(object Class "CaseNotificationGatewayS"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (fctr.java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/CaseAgreementChange/EntitiesImpl/CaseNotificationGatewaySFactoryImpl.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (fctr.java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"WikiPageID (wiki)"
		    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/ÃÓ‰ÂÎ¸ ÔÓÂÍÚ‡ "MDProcess"/CaseAgreementChange/EntitiesImpl/CaseNotificationGatewayS|4AFC07370298
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (wiki)"
		    value      	"wiki")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/CaseAgreementChange/EntitiesImpl/CaseNotificationGatewayS.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4AFC07370298_CUSTOM_IMPORT*"
		    value      	"//#UC START# *4AFC07370298_CUSTOM_IMPORT*§§import java.util.Arrays;§import java.util.List;§§import com.atlassian.confluence.pages.Attachment;§import com.atlassian.confluence.pages.Page;§import com.atlassian.gzipfilter.org.apache.commons.lang.StringUtils;§import com.atlassian.mail.Email;§import com.atlassian.user.User;§§import ru.garant.MDProcess.ConfluencePlugins.CommonVelocityContext.GlobalHelper;§import ru.garant.MDProcess.CaseAgreementChange.MdcaCommon.MDCAManager;§import ru.garant.MDProcess.HRChange.Entities.Worker;§import ru.garant.MDProcess.HRChange.HRSupport.HrHelper;§§import ru.garant.shared.ConfluenceCore.TaskSupport.RequestPriorityEmail;§//#UC END# *4AFC07370298_CUSTOM_IMPORT*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4AFC07370298_CUSTOM_CLASS_DEFINITION*"
		    value      	"//#UC START# *4AFC07370298_CUSTOM_CLASS_DEFINITION*§//#UC END# *4AFC07370298_CUSTOM_CLASS_DEFINITION*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4AFC07370298_CUSTOM_METHODS_AND_DATA*"
		    value      	(value Text 
|//#UC START# *4AFC07370298_CUSTOM_METHODS_AND_DATA*§	§	private boolean isExecutorDeputy (String userName, List<String> executorNames, List<Worker> deputies) {§		HrHelper hrHelper = new HrHelper();§		Worker current = hrHelper.getWorker(userName);§		for (String executorName : executorNames) {§			Worker executor = hrHelper.getWorker(executorName);§			final boolean isDeputy = current.fromSameDepartment(executor) && deputies.contains(current);§			final boolean noDecisionFromExecutor = !getRequest().hasExecutorDecision(executorName);§			if (isDeputy && noDecisionFromExecutor) {§				return true;§			}§		}§		return false;§	}§§	protected static final byte CURATOR_PRIORITY = 10;§	§	private final Case case_;§§	protected Email createAssignmentEmailFor (User executor, byte prevState) {§		if (getRequest().getCurator().equals(executor.getName())) {§			final Page requestPage = getRequest().getPage();§			§			String subj = getText("casenotificationgateways.subject.make.decision") + " ('" + requestPage.getTitle() + "')";§			String pageAddress = GlobalHelper.getPageUrl(requestPage);§			String body = getText("casenotificationgateways.dear.sir") + " " + executor.getFullName() + ",<br/>"§				+ getText("casenotificationgateways.please.make.changes") + " '" + requestPage.getTitle() + "'.<br/>"§				+ getText("casenotificationgateways.you.can.see.case.by.link") + " (<a href=\"" + pageAddress + "\">" + pageAddress + "</a>).<br/><br/>" §				+ getText("casenotificationgateways.best.regards.cac");§			String email = executor.getEmail();§			return createEmail(subj, body, email);			§		} else {§			final Page requestPage = getRequest().getPage();§	§			String subj = getText("casenotificationgateways.subject.make.decision") + " ('" + requestPage.getTitle() + "')";§			String pageAddress = GlobalHelper.getPageUrl(requestPage);§			String body = getText("requestnotificationgateways.good.day") + ", " + executor.getFullName() + "!<br/>"§				+ getText("casenotificationgateways.please.make.decision") + " '" + requestPage.getTitle() + "'.<br/>"§				+ getText("casenotificationgateways.you.can.see.case.by.link") + " (<a href=\"" + pageAddress + "\">" + pageAddress + "</a>).<br/><br/>" §				+ getText("casenotificationgateways.best.regards.cac");§			String email = executor.getEmail();§			return createEmail(subj, body, email);§		}§	}§§	@Override§	protected Email createAssignmentEmailForExternalAuthor (User prManager, Observer author) {§		// no email§		return null;§	}§§	@Override§	protected Email createFinalEmailFor (User user, AbstractState state) {§		boolean needCaseAttachment = getRequest().getCurator().equals(user.getName());§		return createFinalEmailFor(user.getEmail(), user.getFullName(), state, needCaseAttachment);§	}§	§	private Email createFinalEmailFor (String email, String fullName, AbstractState state, boolean needCaseAttachment) {§		final Page requestPage = getRequest().getPage();§		boolean closed = AbstractRequestLifeCycle.ST_CLOSED.getGuid().equals(state.getGuid());§		§		String subj = closed ? getText("casenotificationgateways.subject.approved") : getText("casenotificationgateways.case.subject.discarded");§		subj += " ('" + requestPage.getTitle() + "')";§		§		String pageAddress = GlobalHelper.getPageUrl(requestPage);§		String body = getText("requestnotificationgateways.good.day") + ", " + fullName + "!<br/>"§			+ (closed ? §					getText("casenotificationgateways.case.approved") + " '" + requestPage.getTitle() + "'" : §					getText("casenotificationgateways.case.discarded") + " '" + requestPage.getTitle() + "'"§				) + ".<br/>"§			+ getText("casenotificationgateways.you.can.see.case.by.link") + " (<a href=\"" + pageAddress + "\">" + pageAddress + "</a>).<br/><br/>"§			+ getText("casenotificationgateways.best.regards.cac");§		§		Attachment caseAttachment = getCaseAttachment();§		if (needCaseAttachment && closed && caseAttachment != null) {§			return createEmail(subj, body, email, Arrays.asList(caseAttachment));§		}§		return createEmail(subj, body, email);§	}§§	@Override§	protected Case getRequest () {§		return case_;§	}§	§	private Attachment getCaseAttachment () {§		final List<Attachment> attachments = getRequest().getPage().getAttachments();§		return attachments.isEmpty() ? null : attachments.get(0);§	}§	§	@Override§	protected MDCAManager getMDCManager () {§		return MDCAManager.Factory.get(getRequest().getPage().getSpace());§	}§§	@Override§	protected String makeFinalEmailBodyForPrManager (String prManagerName, boolean rejected) {§		// no pr-manager email§		return null;§	}§	§	private Email createOnWorkGroupEmailForEA(String mail, String fullName) {§		final Page requestPage = getRequest().getPage();§		String subj = getText("casenotificationgateways.subject.make.decision") + " ('" + requestPage.getTitle() + "')";§		String pageAddress = GlobalHelper.getPageUrl(requestPage);§		String body = getText("requestnotificationgateways.good.day") + ", " + fullName + "!<br/>"§			+ getText("casenotificationgateways.to.make.decision") + " '" + requestPage.getTitle() + "'" + ".<br/>"§			+ getText("casenotificationgateways.you.can.see.case.by.link") + " (<a href=\"" + pageAddress + "\">" + pageAddress + "</a>).<br/><br/>"§			+ getText("casenotificationgateways.best.regards.cac");§		return createEmail(subj, body, mail);§	}§§	protected Email createOnWorkGroupApproveEnterEmailForCurator (User executor, byte prevState) {§		final Page requestPage = getRequest().getPage();§§		String subj = getText("casenotificationgateways.subject.make.decision") + " ('" + requestPage.getTitle() + "')";§		String pageAddress = GlobalHelper.getPageUrl(requestPage);§		String body = getText("requestnotificationgateways.good.day") + ", " + executor.getFullName() + "!<br/>"§			+ getText("casenotificationgateways.please.make.decision") + " '" + requestPage.getTitle() + "'.<br/>"§			+ getText("casenotificationgateways.you.can.see.case.by.link") + " (<a href=\"" + pageAddress + "\">" + pageAddress + "</a>).<br/><br/>" §			+ getText("casenotificationgateways.best.regards.cac");§		String email = executor.getEmail();§		return createEmail(subj, body, email);§	}§§§	@Override§	protected boolean needEmailOnAssign(User executor) {§		// TODO Auto-generated method stub§		return getUserSettings(executor.getName()).contains("ON_ASSIGN");§	}§§§	@Override§	protected boolean needEmailOnFinal(User user) {§		// TODO Auto-generated method stub§		return getUserSettings(user.getName()).contains("ON_FINAL");§	}§§	//#UC END# *4AFC07370298_CUSTOM_METHODS_AND_DATA*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"DerivedOverload"
		    value      	"49007404033C|false,49007415025E|false,490583B001FF|false,49D9AFE900FB|false,4B6A917E0343|false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ImplementSelectType"
		    value      	"all")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"OverloadSelectType"
		    value      	"include")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Factory auto reg"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Factory default impl"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Servant Pool"
		    value      	"none")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"debug log"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"factory priority"
		    value      	"0")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"local supervisor"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"need UC"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"singleton"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"DerivedImplement"
		    value      	"490073B102E7,4AFC05190029")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"19022137440"))
	    quid       	"4AFC07370298"
	    documentation 	"Â‡ÎËÁ‡ˆËˇ"
	    stereotype 	"Servant"
	    superclasses 	(list inheritance_relationship_list
		(object Inheritance_Relationship
		    quid       	"4AFC074A01FF"
		    supplier   	"Logical View::MDProcess::ConfluenceMDChange::RequestsImpl::AbstractRequestNotificationGatewayS"
		    quidu      	"490074B702B8"))
	    used_nodes 	(list uses_relationship_list
		(object Uses_Relationship
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"19022137768"))
		    quid       	"4AFC188B0368"
		    stereotype 	"uses"
		    supplier   	"Logical View::MDProcess::CaseAgreementChange::CaseSupportTypes::CasePermissions"
		    quidu      	"4AFC02C20081"))
	    realized_interfaces 	(list realize_rel_list
		(object Realize_Relationship
		    quid       	"4AFC074C038C"
		    supplier   	"Logical View::MDProcess::CaseAgreementChange::Entities::CaseNotificationGateway"
		    quidu      	"4AFC05190029"))
	    language   	"MDA Generator")
	(object Class "CaseManagerGetterS"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (fctr.java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/CaseAgreementChange/EntitiesImpl/CaseManagerGetterSFactoryImpl.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (fctr.java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/CaseAgreementChange/EntitiesImpl/CaseManagerGetterS.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"WikiPageID (wiki)"
		    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/ÃÓ‰ÂÎ¸ ÔÓÂÍÚ‡ "MDProcess"/CaseAgreementChange/EntitiesImpl/CaseManagerGetterS|4B0F9F0E0295
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (wiki)"
		    value      	"wiki")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4B0F9F0E0295_CUSTOM_IMPORT*"
		    value      	"//#UC START# *4B0F9F0E0295_CUSTOM_IMPORT*§§import ru.garant.MDProcess.CaseAgreementChange.Entities.CaseManager;§§//#UC END# *4B0F9F0E0295_CUSTOM_IMPORT*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4B0F9F0E0295_CUSTOM_CLASS_DEFINITION*"
		    value      	"//#UC START# *4B0F9F0E0295_CUSTOM_CLASS_DEFINITION*§//#UC END# *4B0F9F0E0295_CUSTOM_CLASS_DEFINITION*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4B0F9F0E0295_CUSTOM_METHODS_AND_DATA*"
		    value      	(value Text 
|//#UC START# *4B0F9F0E0295_CUSTOM_METHODS_AND_DATA*§	//#UC END# *4B0F9F0E0295_CUSTOM_METHODS_AND_DATA*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"19022138344"))
	    quid       	"4B0F9F0E0295"
	    documentation 	"ÔÓÎÛ˜‡ÂÚ ÏÂÌÂ‰ÊÂ ƒÂÎ ÔÓ Ë‰ÂÌÚËÙËÍ‡ÚÓÛ ÒÚ‡ÌËˆ˚"
	    stereotype 	"Servant"
	    realized_interfaces 	(list realize_rel_list
		(object Realize_Relationship
		    quid       	"4B0F9F350054"
		    supplier   	"Logical View::MDProcess::ConfluenceMDChange::Requests::RequestManagerGetter"
		    quidu      	"48E073900264"))
	    class_attributes 	(list class_attribute_list
		(object ClassAttribute "key"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ValueInitialized"
			    value      	"true")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ResolvedTypeGuid"
			    value      	"452257A0036F")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"19022138642"))
		    quid       	"4B0F9F410149"
		    stereotype 	"switch"
		    type       	"a-string"
		    quidu      	"452257A0036F"
		    initv      	"case"
		    exportControl 	"Public"
		    Containment 	"By Value"))
	    language   	"MDA Generator")
	(object Class "CaseProlongationNotificationGatewayS"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"1344350784275095")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"DerivedImplement"
		    value      	(value Text 
|{"490073B102E7":{"need_collect_children":"true"}}
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"DerivedOverload"
		    value      	(value Text 
|{"4B6A917E0343":{"need_collect_children":"false"}}
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ImplementSelectType"
		    value      	"all")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"OverloadSelectType"
		    value      	"include")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ApplyedGens"
		    value      	"All")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (fctr.java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/CaseAgreementChange/EntitiesImpl/CaseProlongationNotificationGatewaySFactoryImpl.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (fctr.java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/CaseAgreementChange/EntitiesImpl/CaseProlongationNotificationGatewayS.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*50212A400112_CUSTOM_IMPORT*"
		    value      	"//#UC START# *50212A400112_CUSTOM_IMPORT*§import com.atlassian.confluence.pages.Page;§import com.atlassian.mail.Email;§import com.atlassian.user.User;§import java.util.List;§import ru.garant.shared.ConfluenceCore.TaskSupport.RequestPriorityEmail;§§import ru.garant.MDProcess.CaseAgreementChange.MdcaCommon.MDCAManager;§import ru.garant.MDProcess.ConfluenceMDChange.MdcCommon.MDCManager;§import ru.garant.MDProcess.ConfluenceMDChange.Requests.sm.AbstractRequestLifeCycle.AbstractState;§import ru.garant.MDProcess.ConfluencePlugins.CommonVelocityContext.GlobalHelper;§//#UC END# *50212A400112_CUSTOM_IMPORT*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*50212A400112_CUSTOM_CLASS_DEFINITION*"
		    value      	"//#UC START# *50212A400112_CUSTOM_CLASS_DEFINITION*§//#UC END# *50212A400112_CUSTOM_CLASS_DEFINITION*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*50212A400112_CUSTOM_METHODS_AND_DATA*"
		    value      	(value Text 
|//#UC START# *50212A400112_CUSTOM_METHODS_AND_DATA*§§	@Override§	protected Case getRequest() {§		return case_;§	}§§§	@Override§	protected MDCManager getMDCManager() {§		return MDCAManager.Factory.get(getRequest().getPage().getSpace());§	}§§§	@Override§	protected String makeFinalEmailBodyForPrManager(String prManagerName,§			boolean rejected) {§		// TODO Auto-generated method stub§		return null;§	}§§§	@Override§	protected Email createAssignmentEmailForExternalAuthor(User prManager,§			Observer author) {§		// TODO Auto-generated method stub§		return null;§	}§§§	@Override§	public Email createFinalEmailFor(User forUser, AbstractState state) {§		final Page requestPage = getRequest().getPage();§		String title = getTitle(requestPage);§		String subj = "œÓ‰ÎÂÌËÂ ÔÓÎÌÓÏÓ˜ËÈ \"" + title + "\"";§		§		String pageAddress = GlobalHelper.getPageUrl(requestPage);§		String body = getText("requestnotificationgateways.good.day") + ", " + forUser.getFullName() + "!<br/>"§			+ "œËÌˇÚÓ Â¯ÂÌËÂ ÔÓ ÔÓ‰ÎÂÌË˛ ÔÓ '" + title + "'.<br/>"§			+ getHistoryText(pageAddress) §			+ getEndText();§		§		return createEmail(subj, body, forUser.getEmail());§	}§	§	§§§	@Override§	public void queueAssignmentEmails(List<String> userNames, byte prevState) {§		for(String executorName : userNames) {§			User executor = getUserByName(executorName);§			try {§				Email email = createAssignmentEmailFor(executor, prevState);§				if(email == null){§					//ÁÌ‡˜ËÚ ÌÂ Ì‡‰Ó ÔÓÒ˚Î‡Ú¸ Û‚Â‰ÓÏÎÂÌËÂ ‰Îˇ ˝ÚÓ„Ó ÔÓÎ¸ÁÓ‚‡ÚÂÎˇ§					return;§				}§				queueEmail(email.getTo(), new RequestPriorityEmail(email, AUTHOR_PRIORITY, getRequest().getPage().getId()));§			} catch (IllegalArgumentException e) {§				Logs.LOG_E("AbstractRequestNotificationGateway::queueAssignmentlEmailForAuthor - " + e);§			}§		}§	}§§§	@Override§	public Email createAssignmentEmailFor(User executor, byte prevState) {§		final Page requestPage = getRequest().getPage();§		String title = getTitle(requestPage);§		String subj = "œÓ‰ÎÂÌËÂ ÔÓÎÌÓÏÓ˜ËÈ \"" + title + "\"";§		String pageAddress = GlobalHelper.getPageUrl(requestPage);§		if (getRequest().getExecutorLogins().contains(executor.getName()) && getRequest().getCurrentState().equals(CaseLifeCycle.ST_ON_WORK_GROUP_APPROVE)) {§			String body = getText("casenotificationgateways.dear.sir") + " " + executor.getFullName() + ",<br/>"§				+ "œÓ¯Û ÔËÌˇÚ¸ Â¯ÂÌËÂ ÔÓ ÔËÒÎ‡ÌÌÓÈ ÓÚ˜ÂÚÌÓÒÚË √” –œ ÔÓ '" + title + "'.<br/>"§				+ getHistoryText(pageAddress) §				+ getEndText();§			return createEmail(subj, body, executor.getEmail());§		}else if(getRequest().getCcManager().equals(executor.getName()) && getRequest().getCurrentState().equals(CaseLifeCycle.ST_ON_CC_APPROVE)§				|| getRequest().getUvsManager().equals(executor.getName()) && getRequest().getCurrentState().equals(CaseLifeCycle.ST_ON_UVS_APPROVE)§				|| getRequest().getDirector().equals(executor.getName()) && getRequest().getCurrentState().equals(CaseLifeCycle.ST_ON_DIRECTOR_APPROVE)){§			String body = getText("casenotificationgateways.dear.sir") + " " + executor.getFullName() + ",<br/>"§				+ "œÓ¯Û ÔËÌˇÚ¸ Â¯ÂÌËÂ ÔÓ ÔÓ‰ÎÂÌË˛ ÔÓ '" + title + "'.<br/>"§				+ getHistoryText(pageAddress) §				+ getEndText();§			return createEmail(subj, body, executor.getEmail());§		}§		return null;§	}§§§	private String getTitle(Page requestPage){§		String title = requestPage.getTitle();§		if(title.lastIndexOf(" - ") > 0){§			title = title.substring(0, title.lastIndexOf(" - "));§		}§		return title;§	}§	§	private String getHistoryText(String pageAddress){§		return "»ÒÚÓË˛ ÒÓ„Î‡ÒÓ‚‡ÌËˇ Ë ÓÚ˜ÂÚ ÏÓÊÌÓ ÔÓÒÏÓÚÂÚ¸ ÔÓ ÒÒ˚ÎÍÂ (<a href=\"" + pageAddress + "\">" + pageAddress + "</a>).<br/><br/>"; §	}§	§	private String getEndText(){§		return "— Û‚‡ÊÂÌËÂÏ, <br/>  ÓÓ‰ËÌ‡ˆËÓÌÌ˚È ˆÂÌÚ ÔÓ ‡·ÓÚÂ Ò    ";§	}§§	private final Case case_;§	//#UC END# *50212A400112_CUSTOM_METHODS_AND_DATA*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"WikiPageID (wiki)"
		    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/ÃÓ‰ÂÎ¸ ÔÓÂÍÚ‡ "MDProcess"/CaseAgreementChange/EntitiesImpl/CaseProlongationNotificationGatewayS|50212A400112
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (wiki)"
		    value      	"wiki"))
	    quid       	"50212A400112"
	    documentation 	"Â‡ÎËÁ‡ˆËˇ ‰Îˇ œÓ‰ÎÂÌËÂ ÔÓÎÌÓÏÓ˜ËÈ"
	    stereotype 	"Servant"
	    superclasses 	(list inheritance_relationship_list
		(object Inheritance_Relationship
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"1344350822075258"))
		    quid       	"50212A66004B"
		    supplier   	"Logical View::MDProcess::ConfluenceMDChange::RequestsImpl::AbstractRequestNotificationGatewayS"
		    quidu      	"490074B702B8"))
	    used_nodes 	(list uses_relationship_list
		(object Uses_Relationship
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"1344350826736525")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false"))
		    quid       	"50212A6A02DF"
		    stereotype 	"uses"
		    supplier   	"Logical View::MDProcess::CaseAgreementChange::CaseSupportTypes::CasePermissions"
		    quidu      	"4AFC02C20081"))
	    realized_interfaces 	(list realize_rel_list
		(object Realize_Relationship
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"1344350844324532"))
		    quid       	"50212A7C0143"
		    supplier   	"Logical View::MDProcess::CaseAgreementChange::Entities::CaseProlongationNotificationGateway"
		    quidu      	"5021299E02DA"))
	    language   	"MDA Generator"))
    logical_presentations 	(list unit_reference_list
	(object ClassDiagram "Main"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsChanged"
		    value      	""))
	    quid       	"4AFC062D01F5"
	    title      	"Main"
	    zoom       	65
	    max_height 	28350
	    max_width  	21600
	    origin_x   	0
	    origin_y   	0
	    items      	(list diagram_item_list
		(object ClassView "Class" "Logical View::MDProcess::CaseAgreementChange::Entities::Case" @1
		    ShowCompartmentStereotypes 	TRUE
		    SuppressAttribute 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    location   	(876, 267)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	16714250
			default_color 	FALSE)
		    label      	(object ItemLabel
			Parent_View 	@1
			location   	(705, 235)
			nlines     	1
			max_width  	342
			justify    	0
			label      	"Case")
		    stereotype 	(object ItemLabel
			Parent_View 	@1
			location   	(705, 185)
			anchor     	10
			nlines     	1
			max_width  	340
			justify    	0
			label      	"<<Interface>>")
		    icon       	"Interface"
		    icon_style 	"Label"
		    line_color 	16714250
		    fill_color 	16777215
		    quidu      	"4AFC045203AA"
		    width      	360
		    height     	188
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::CaseAgreementChange::Entities::CaseManager" @2
		    ShowCompartmentStereotypes 	TRUE
		    SuppressAttribute 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    location   	(2652, 276)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	16714250
			default_color 	FALSE)
		    label      	(object ItemLabel
			Parent_View 	@2
			location   	(2453, 244)
			nlines     	1
			max_width  	398
			justify    	0
			label      	"ï CaseManager")
		    stereotype 	(object ItemLabel
			Parent_View 	@2
			location   	(2453, 194)
			anchor     	10
			nlines     	1
			max_width  	398
			justify    	0
			label      	"<<Interface>>")
		    icon       	"Interface"
		    icon_style 	"Label"
		    line_color 	16714250
		    fill_color 	16777215
		    quidu      	"4AFC054A00F5"
		    width      	416
		    height     	188
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::CaseAgreementChange::Entities::CaseNotificationGateway" @3
		    ShowCompartmentStereotypes 	TRUE
		    SuppressAttribute 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    location   	(2748, 1428)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	16714250
			default_color 	FALSE)
		    label      	(object ItemLabel
			Parent_View 	@3
			location   	(2442, 1396)
			nlines     	1
			max_width  	612
			justify    	0
			label      	"CaseNotificationGateway")
		    stereotype 	(object ItemLabel
			Parent_View 	@3
			location   	(2442, 1346)
			anchor     	10
			nlines     	1
			max_width  	612
			justify    	0
			label      	"<<Interface>>")
		    icon       	"Interface"
		    icon_style 	"Label"
		    line_color 	16714250
		    fill_color 	16777215
		    quidu      	"4AFC05190029"
		    width      	630
		    height     	188
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::CaseAgreementChange::Entities::CasePermissionManager" @4
		    ShowCompartmentStereotypes 	TRUE
		    SuppressAttribute 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    location   	(1089, 1413)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	16714250
			default_color 	FALSE)
		    label      	(object ItemLabel
			Parent_View 	@4
			location   	(816, 1387)
			nlines     	1
			max_width  	546
			justify    	0
			label      	"ï CasePermissionManager")
		    stereotype 	(object ItemLabel
			Parent_View 	@4
			location   	(816, 1333)
			anchor     	10
			nlines     	1
			max_width  	546
			justify    	0
			label      	"<<Interface>>")
		    icon       	"Interface"
		    icon_style 	"Label"
		    line_color 	16714250
		    fill_color 	16777215
		    quidu      	"4AFC04CA024B"
		    width      	564
		    height     	184
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::ConfluenceMDChange::RequestsImpl::AbstractRequestManagerS" @5
		    ShowCompartmentStereotypes 	TRUE
		    SuppressAttribute 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    location   	(1989, 627)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	TRUE
			underline  	FALSE
			strike     	FALSE
			color      	705290
			default_color 	FALSE)
		    label      	(object ItemLabel
			Parent_View 	@5
			location   	(1646, 594)
			nlines     	1
			max_width  	686
			justify    	0
			label      	"ï AbstractRequestManagerS")
		    stereotype 	(object ItemLabel
			Parent_View 	@5
			location   	(1646, 544)
			anchor     	10
			nlines     	1
			max_width  	686
			justify    	0
			label      	"<<Servant>>")
		    icon_style 	"Label"
		    line_color 	705290
		    fill_color 	16777215
		    quidu      	"48EC4EA70206"
		    width      	704
		    height     	190
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::ConfluenceMDChange::RequestsImpl::AbstractRequestNotificationGatewayS" @6
		    ShowCompartmentStereotypes 	TRUE
		    SuppressAttribute 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    location   	(2043, 1728)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	TRUE
			underline  	FALSE
			strike     	FALSE
			color      	705290
			default_color 	FALSE)
		    label      	(object ItemLabel
			Parent_View 	@6
			location   	(1592, 1695)
			nlines     	1
			max_width  	902
			justify    	0
			label      	"AbstractRequestNotificationGatewayS")
		    stereotype 	(object ItemLabel
			Parent_View 	@6
			location   	(1592, 1645)
			anchor     	10
			nlines     	1
			max_width  	902
			justify    	0
			label      	"<<Servant>>")
		    icon_style 	"Label"
		    line_color 	705290
		    fill_color 	16777215
		    quidu      	"490074B702B8"
		    width      	920
		    height     	190
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::ConfluenceMDChange::RequestsImpl::AbstractRequestPermissionManagerS" @7
		    ShowCompartmentStereotypes 	TRUE
		    SuppressAttribute 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    location   	(465, 1704)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	TRUE
			underline  	FALSE
			strike     	FALSE
			color      	705290
			default_color 	FALSE)
		    label      	(object ItemLabel
			Parent_View 	@7
			location   	(49, 1684)
			nlines     	1
			max_width  	832
			justify    	0
			label      	"ï AbstractRequestPermissionManagerS")
		    stereotype 	(object ItemLabel
			Parent_View 	@7
			location   	(49, 1634)
			anchor     	10
			nlines     	1
			max_width  	832
			justify    	0
			label      	"<<Servant>>")
		    icon_style 	"Label"
		    line_color 	705290
		    fill_color 	16777215
		    quidu      	"48EB5A1901CF"
		    width      	850
		    height     	164
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::ConfluenceMDChange::RequestsImpl::AbstractRequestS" @8
		    ShowCompartmentStereotypes 	TRUE
		    SuppressAttribute 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    location   	(414, 576)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	TRUE
			underline  	FALSE
			strike     	FALSE
			color      	705290
			default_color 	FALSE)
		    label      	(object ItemLabel
			Parent_View 	@8
			location   	(191, 541)
			nlines     	1
			max_width  	446
			justify    	0
			label      	"ï AbstractRequestS")
		    stereotype 	(object ItemLabel
			Parent_View 	@8
			location   	(191, 491)
			anchor     	10
			nlines     	1
			max_width  	446
			justify    	0
			label      	"<<Servant>>")
		    icon_style 	"Label"
		    line_color 	705290
		    fill_color 	16777215
		    quidu      	"4757F83900B2"
		    width      	464
		    height     	194
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::CaseAgreementChange::EntitiesImpl::CaseS" @9
		    ShowCompartmentStereotypes 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(873, 1047)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@9
			location   	(763, 1021)
			fill_color 	13434879
			nlines     	1
			max_width  	220
			justify    	0
			label      	"CaseS")
		    stereotype 	(object ItemLabel
			Parent_View 	@9
			location   	(763, 971)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	220
			justify    	0
			label      	"<<Servant>>")
		    icon_style 	"Label"
		    fill_color 	12842435
		    quidu      	"4AFC06A802D0"
		    width      	238
		    height     	176
		    annotation 	8
		    autoResize 	TRUE)
		(object RealizeView "" @10
		    stereotype 	TRUE
		    line_color 	3342489
		    quidu      	"4AFC06BA0135"
		    client     	@9
		    supplier   	@1
		    vertices   	(list Points
			(873, 958)
			(875, 361))
		    line_style 	0)
		(object InheritView "" @11
		    stereotype 	TRUE
		    line_color 	3342489
		    quidu      	"4AFC06BC004D"
		    client     	@9
		    supplier   	@8
		    vertices   	(list Points
			(786, 958)
			(508, 673))
		    line_style 	0)
		(object ClassView "Class" "Logical View::MDProcess::CaseAgreementChange::EntitiesImpl::CaseManagerS" @12
		    ShowCompartmentStereotypes 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(2697, 1002)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@12
			location   	(2541, 976)
			fill_color 	13434879
			nlines     	1
			max_width  	312
			justify    	0
			label      	"CaseManagerS")
		    stereotype 	(object ItemLabel
			Parent_View 	@12
			location   	(2541, 926)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	312
			justify    	0
			label      	"<<Servant>>")
		    icon_style 	"Label"
		    fill_color 	12842435
		    quidu      	"4AFC06E102F0"
		    width      	330
		    height     	176
		    annotation 	8
		    autoResize 	TRUE)
		(object InheritView "" @13
		    stereotype 	TRUE
		    line_color 	3342489
		    quidu      	"4AFC06F00262"
		    client     	@12
		    supplier   	@5
		    vertices   	(list Points
			(2532, 913)
			(2171, 722))
		    line_style 	0)
		(object RealizeView "" @14
		    stereotype 	TRUE
		    line_color 	3342489
		    quidu      	"4AFC06F20182"
		    client     	@12
		    supplier   	@2
		    vertices   	(list Points
			(2691, 913)
			(2657, 370))
		    line_style 	0)
		(object ClassView "Class" "Logical View::MDProcess::CaseAgreementChange::EntitiesImpl::CasePermissionManagerS" @15
		    ShowCompartmentStereotypes 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(1110, 2073)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@15
			location   	(855, 2047)
			fill_color 	13434879
			nlines     	1
			max_width  	510
			justify    	0
			label      	"CasePermissionManagerS")
		    stereotype 	(object ItemLabel
			Parent_View 	@15
			location   	(855, 1997)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	510
			justify    	0
			label      	"<<Servant>>")
		    icon_style 	"Label"
		    fill_color 	12842435
		    quidu      	"4AFC070B03B1"
		    width      	528
		    height     	176
		    annotation 	8
		    autoResize 	TRUE)
		(object InheritView "" @16
		    stereotype 	TRUE
		    line_color 	3342489
		    quidu      	"4AFC07230147"
		    client     	@15
		    supplier   	@7
		    vertices   	(list Points
			(957, 1984)
			(608, 1786))
		    line_style 	0)
		(object RealizeView "" @17
		    stereotype 	TRUE
		    line_color 	3342489
		    quidu      	"4AFC07250287"
		    client     	@15
		    supplier   	@4
		    vertices   	(list Points
			(1106, 1984)
			(1091, 1505))
		    line_style 	0)
		(object ClassView "Class" "Logical View::MDProcess::CaseAgreementChange::EntitiesImpl::CaseNotificationGatewayS" @18
		    ShowCompartmentStereotypes 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(2826, 2001)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@18
			location   	(2569, 1975)
			fill_color 	13434879
			nlines     	1
			max_width  	514
			justify    	0
			label      	"CaseNotificationGatewayS")
		    stereotype 	(object ItemLabel
			Parent_View 	@18
			location   	(2569, 1925)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	514
			justify    	0
			label      	"<<Servant>>")
		    icon_style 	"Label"
		    fill_color 	12842435
		    quidu      	"4AFC07370298"
		    width      	532
		    height     	176
		    annotation 	8
		    autoResize 	TRUE)
		(object InheritView "" @19
		    stereotype 	TRUE
		    line_color 	3342489
		    quidu      	"4AFC074A01FF"
		    client     	@18
		    supplier   	@6
		    vertices   	(list Points
			(2576, 1912)
			(2317, 1823))
		    line_style 	0)
		(object RealizeView "" @20
		    stereotype 	TRUE
		    line_color 	3342489
		    quidu      	"4AFC074C038C"
		    client     	@18
		    supplier   	@3
		    vertices   	(list Points
			(2813, 1912)
			(2759, 1522))
		    line_style 	0)
		(object ClassView "Class" "Logical View::MDProcess::CaseAgreementChange::CaseDAO::CaseDAOProxy" @21
		    ShowCompartmentStereotypes 	TRUE
		    SuppressAttribute 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    location   	(1467, 1053)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	705320
			default_color 	FALSE)
		    label      	(object ItemLabel
			Parent_View 	@21
			location   	(1250, 1021)
			nlines     	1
			max_width  	434
			justify    	0
			label      	"CaseDAOProxy")
		    stereotype 	(object ItemLabel
			Parent_View 	@21
			location   	(1250, 971)
			anchor     	10
			nlines     	1
			max_width  	432
			justify    	0
			label      	"<<SimpleClass>>")
		    icon_style 	"Label"
		    line_color 	705320
		    fill_color 	16777215
		    quidu      	"4AFC0375027F"
		    width      	452
		    height     	188
		    annotation 	8
		    autoResize 	TRUE)
		(object UsesView "" @22
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	(object SegLabel @23
			Parent_View 	@22
			location   	(1117, 929)
			font       	(object Font
			    size       	10
			    face       	"Arial"
			    charSet    	204
			    bold       	FALSE
			    italics    	FALSE
			    underline  	FALSE
			    strike     	FALSE
			    color      	0
			    default_color 	TRUE)
			anchor     	10
			anchor_loc 	1
			nlines     	1
			max_width  	450
			justify    	0
			label      	"<<uses>>"
			pctDist    	0.500000
			height     	120
			orientation 	0)
		    line_color 	3342489
		    quidu      	"4AFC0772017A"
		    client     	@9
		    supplier   	@21
		    vertices   	(list Points
			(992, 1047)
			(1240, 1050))
		    line_style 	0)
		(object ClassView "Class" "Logical View::MDProcess::CaseAgreementChange::CaseSupportTypes::CasePermissions" @24
		    ShowCompartmentStereotypes 	TRUE
		    SuppressAttribute 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    location   	(3705, 2109)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	705320
			default_color 	FALSE)
		    label      	(object ItemLabel
			Parent_View 	@24
			location   	(3409, 2077)
			nlines     	1
			max_width  	592
			justify    	0
			label      	"CasePermissions")
		    stereotype 	(object ItemLabel
			Parent_View 	@24
			location   	(3409, 2027)
			anchor     	10
			nlines     	1
			max_width  	592
			justify    	0
			label      	"<<SimpleClass>>")
		    icon_style 	"Label"
		    line_color 	705320
		    fill_color 	16777215
		    quidu      	"4AFC02C20081"
		    width      	610
		    height     	188
		    annotation 	8
		    autoResize 	TRUE)
		(object UsesView "" @25
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	(object SegLabel @26
			Parent_View 	@25
			location   	(3255, 1968)
			font       	(object Font
			    size       	10
			    face       	"Arial"
			    charSet    	204
			    bold       	FALSE
			    italics    	FALSE
			    underline  	FALSE
			    strike     	FALSE
			    color      	0
			    default_color 	TRUE)
			anchor     	10
			anchor_loc 	1
			nlines     	1
			max_width  	450
			justify    	0
			label      	"<<uses>>"
			pctDist    	0.499412
			height     	85
			orientation 	0)
		    line_color 	3342489
		    quidu      	"4AFC188B0368"
		    client     	@18
		    supplier   	@24
		    vertices   	(list Points
			(3092, 2032)
			(3399, 2070))
		    line_style 	0)
		(object ClassView "Class" "Logical View::MDProcess::ConfluenceMDChange::Requests::RequestManagerGetter" @27
		    ShowCompartmentStereotypes 	TRUE
		    SuppressAttribute 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    location   	(3663, 267)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	16714250
			default_color 	FALSE)
		    label      	(object ItemLabel
			Parent_View 	@27
			location   	(3358, 235)
			nlines     	1
			max_width  	610
			justify    	0
			label      	"ï RequestManagerGetter")
		    stereotype 	(object ItemLabel
			Parent_View 	@27
			location   	(3358, 185)
			anchor     	10
			nlines     	1
			max_width  	610
			justify    	0
			label      	"<<Interface>>")
		    icon       	"Interface"
		    icon_style 	"Label"
		    line_color 	16714250
		    fill_color 	16777215
		    quidu      	"48E073900264"
		    width      	628
		    height     	188
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::CaseAgreementChange::EntitiesImpl::CaseManagerGetterS" @28
		    ShowCompartmentStereotypes 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(3669, 807)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@28
			location   	(3362, 753)
			fill_color 	13434879
			nlines     	1
			max_width  	614
			justify    	0
			label      	"CaseManagerGetterS")
		    stereotype 	(object ItemLabel
			Parent_View 	@28
			location   	(3362, 703)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	614
			justify    	0
			label      	"<<Servant>>")
		    icon_style 	"Label"
		    fill_color 	12842435
		    quidu      	"4B0F9F0E0295"
		    width      	632
		    height     	232
		    annotation 	8
		    autoResize 	TRUE)
		(object RealizeView "" @29
		    stereotype 	TRUE
		    line_color 	3342489
		    quidu      	"4B0F9F350054"
		    client     	@28
		    supplier   	@27
		    vertices   	(list Points
			(3667, 690)
			(3663, 361))
		    line_style 	0)
		(object ClassView "Class" "Logical View::MDProcess::CaseAgreementChange::EntitiesImpl::CaseProlongationNotificationGatewayS" @30
		    ShowCompartmentStereotypes 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(2130, 2532)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@30
			location   	(1759, 2506)
			fill_color 	13434879
			nlines     	1
			max_width  	742
			justify    	0
			label      	"CaseProlongationNotificationGatewayS")
		    stereotype 	(object ItemLabel
			Parent_View 	@30
			location   	(1759, 2456)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	742
			justify    	0
			label      	"<<Servant>>")
		    icon_style 	"Label"
		    fill_color 	12842435
		    quidu      	"50212A400112"
		    width      	760
		    height     	176
		    annotation 	8
		    autoResize 	TRUE)
		(object InheritView "" @31
		    stereotype 	TRUE
		    line_color 	3342489
		    quidu      	"50212A66004B"
		    client     	@30
		    supplier   	@6
		    vertices   	(list Points
			(2120, 2443)
			(2052, 1823))
		    line_style 	0)
		(object UsesView "" @32
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	(object SegLabel @33
			Parent_View 	@32
			location   	(2895, 2201)
			font       	(object Font
			    size       	10
			    face       	"Arial"
			    charSet    	204
			    bold       	FALSE
			    italics    	FALSE
			    underline  	FALSE
			    strike     	FALSE
			    color      	0
			    default_color 	TRUE)
			anchor     	10
			anchor_loc 	1
			nlines     	1
			max_width  	450
			justify    	0
			label      	"<<uses>>"
			pctDist    	0.500000
			height     	120
			orientation 	0)
		    line_color 	3342489
		    quidu      	"50212A6A02DF"
		    client     	@30
		    supplier   	@24
		    vertices   	(list Points
			(2452, 2443)
			(3399, 2189))
		    line_style 	0)
		(object ClassView "Class" "Logical View::MDProcess::CaseAgreementChange::Entities::CaseProlongationNotificationGateway" @34
		    ShowCompartmentStereotypes 	TRUE
		    SuppressAttribute 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    location   	(1344, 3165)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	16714250
			default_color 	FALSE)
		    label      	(object ItemLabel
			Parent_View 	@34
			location   	(893, 3133)
			nlines     	1
			max_width  	902
			justify    	0
			label      	"CaseProlongationNotificationGateway")
		    stereotype 	(object ItemLabel
			Parent_View 	@34
			location   	(893, 3083)
			anchor     	10
			nlines     	1
			max_width  	902
			justify    	0
			label      	"<<Interface>>")
		    icon       	"Interface"
		    icon_style 	"Label"
		    line_color 	16714250
		    fill_color 	16777215
		    quidu      	"5021299E02DA"
		    width      	920
		    height     	188
		    annotation 	8
		    autoResize 	TRUE)
		(object RealizeView "" @35
		    stereotype 	TRUE
		    line_color 	3342489
		    quidu      	"50212A7C0143"
		    client     	@30
		    supplier   	@34
		    vertices   	(list Points
			(2018, 2620)
			(1459, 3070))
		    line_style 	0)))))
