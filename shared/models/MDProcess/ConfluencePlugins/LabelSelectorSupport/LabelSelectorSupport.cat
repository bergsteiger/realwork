
(object Petal
    version    	50
    _written   	"Rose 2006.0.0.060314"
    charSet    	204)

(object Class_Category "LabelSelectorSupport"
    is_unit    	TRUE
    is_loaded  	TRUE
    attributes 	(list Attribute_Set
	(object Attribute
	    tool       	"MDA Generator"
	    name       	"AbstarctOperation"
	    value      	"regular")
	(object Attribute
	    tool       	"MDA Generator"
	    name       	"IsNative"
	    value      	"false")
	(object Attribute
	    tool       	"MDA Generator"
	    name       	"WikiPageID (wiki)"
	    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/ConfluencePlugins/LabelSelectorSupport|47FCC4EC002C
	    ))
	(object Attribute
	    tool       	"MDA Generator User Properties"
	    name       	"name"
	    value      	"Label Selector Support")
	(object Attribute
	    tool       	"MDA Generator User Properties"
	    name       	"vendor name"
	    value      	"ООО НПП 'Гарант-Сервис'")
	(object Attribute
	    tool       	"MDA Generator User Properties"
	    name       	"vendor url"
	    value      	"www.garant.ru")
	(object Attribute
	    tool       	"MDA Generator"
	    name       	"SourceType (wiki)"
	    value      	"wiki")
	(object Attribute
	    tool       	"MDA Generator"
	    name       	"ElementCreationOrder"
	    value      	"19011007086"))
    quid       	"47FCC4EC002C"
    documentation 	"Библиотека плагина поддержки работы с метками."
    stereotype 	"KPlugins"
    visible_categories 	(list visibility_relationship_list
	(object Visibility_Relationship
	    quid       	"47FCC9F50163"
	    supplier   	"Logical View::external::JavaConfluence::ConfluenceClassPack"
	    quidu      	"45DAC0AA0232")
	(object Visibility_Relationship
	    quid       	"4AA8B133033A"
	    supplier   	"Logical View::external::ConfluenceSupport::com.opensymphony.xwork"
	    quidu      	"4A8E4F8603BF")
	(object Visibility_Relationship
	    quid       	"4AE4713A030D"
	    supplier   	"Logical View::external::ConfluenceSupport::com.atlassian.confluence.pages.actions"
	    quidu      	"4795D23101A0")
	(object Visibility_Relationship
	    quid       	"53747ED803E2"
	    supplier   	"Logical View::external::ConfluenceSupport::com.atlassian.confluence.labels.actions"
	    quidu      	"4A55DC4701C1"))
    exportControl 	"Public"
    logical_models 	(list unit_reference_list
	(object Class "GarRemoveLabelFromEntityBean"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"DerivedOverload"
		    value      	"47FCCFAB02E3")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ImplementSelectType"
		    value      	"all")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"OverloadSelectType"
		    value      	"include")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/ConfluencePlugins/LabelSelectorSupport/GarRemoveLabelFromEntityBean.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"WikiPageID (wiki)"
		    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/ConfluencePlugins/LabelSelectorSupport/GarRemoveLabelFromEntityBean|47FCC6A40058
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*47FCC6A40058_CUSTOM_IMPORT*"
		    value      	"//#UC START# *47FCC6A40058_CUSTOM_IMPORT*¤import ru.garant.shared.ConfluenceCore.Helpers.ContainerManager;¤¤import com.atlassian.confluence.labels.Label;¤//#UC END# *47FCC6A40058_CUSTOM_IMPORT*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*47FCC6A40058_CUSTOM_CLASS_DEFINITION*"
		    value      	"//#UC START# *47FCC6A40058_CUSTOM_CLASS_DEFINITION*¤//#UC END# *47FCC6A40058_CUSTOM_CLASS_DEFINITION*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*47FCC6A40058_CUSTOM_METHODS_AND_DATA*"
		    value      	(value Text 
|//#UC START# *47FCC6A40058_CUSTOM_METHODS_AND_DATA*¤	public AjaxResponse removeLabelAny (final String entityIdString, final String labelIdString) throws java.lang.Exception {¤		return super.removeLabel(entityIdString, labelIdString);¤	}¤	¤	final private com.atlassian.confluence.pages.AbstractPage parseEntityIdString (final String entityIdString) {¤		long entityId = Long.parseLong(entityIdString);¤		return ContainerManager.Factory.get().getPageManager().getAbstractPage(entityId);¤	}¤	//#UC END# *47FCC6A40058_CUSTOM_METHODS_AND_DATA*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (wiki)"
		    value      	"wiki")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"19039099617"))
	    quid       	"47FCC6A40058"
	    documentation 	"Класс уточняющий поведегние при удалении метки. Запрещает удалять служебные метки."
	    stereotype 	"SimpleClass"
	    superclasses 	(list inheritance_relationship_list
		(object Inheritance_Relationship
		    quid       	"47FCC70C0025"
		    supplier   	"Logical View::external::JavaConfluence::ConfluenceClassPack::RemoveLabelFromEntityBean"
		    quidu      	"47FCC6F70264"))
	    operations 	(list Operations
		(object Operation "make_error_response"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"final")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*47FDCC810002*"
			    value      	(value Text 
|//#UC START# *47FDCC810002*¤		return AjaxResponse.failure(message);¤		//#UC END# *47FDCC810002*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ResolvedTypeGuid"
			    value      	"47FCC7FA03D0")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"19011019930"))
		    quid       	"47FDCC810002"
		    documentation 	"Создание объекта AjaxResponse с соответствующем сообщением."
		    parameters 	(list Parameters
			(object Parameter "message"
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ResolvedTypeGuid"
				    value      	"3DBFFE240068")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ElementCreationOrder"
				    value      	"19011020234"))
			    quid       	"47FDCC8F03D0"
			    type       	"string"
			    quidu      	"3DBFFE240068"))
		    result     	"AjaxResponse"
		    concurrency 	"Sequential"
		    opExportControl 	"Private"
		    uid        	0
		    quidu      	"47FCC7FA03D0"))
	    language   	"MDA Generator")
	(object Class "GarAddLabelToEntityBean"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"DerivedOverload"
		    value      	"47FCD005039C")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ImplementSelectType"
		    value      	"all")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"OverloadSelectType"
		    value      	"include")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/ConfluencePlugins/LabelSelectorSupport/GarAddLabelToEntityBean.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"WikiPageID (wiki)"
		    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/ConfluencePlugins/LabelSelectorSupport/GarAddLabelToEntityBean|47FCC761033D
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*47FCC761033D_CUSTOM_IMPORT*"
		    value      	"//#UC START# *47FCC761033D_CUSTOM_IMPORT*¤¤import java.util.Collection;¤¤import com.atlassian.confluence.util.LabelUtil;¤import com.atlassian.confluence.labels.Label;¤¤import ru.garant.shared.GCI.I18N.Messages;¤¤import ru.garant.MDProcess.ConfluenceMDChange.RequestSupport.AbstractRequestHelper;¤¤//#UC END# *47FCC761033D_CUSTOM_IMPORT*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*47FCC761033D_CUSTOM_CLASS_DEFINITION*"
		    value      	"//#UC START# *47FCC761033D_CUSTOM_CLASS_DEFINITION*¤//#UC END# *47FCC761033D_CUSTOM_CLASS_DEFINITION*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*47FCC761033D_CUSTOM_METHODS_AND_DATA*"
		    value      	(value Text 
|//#UC START# *47FCC761033D_CUSTOM_METHODS_AND_DATA*¤	¤	public AjaxResponse addLabelAny (final String entityIdString, final String labelIdString) throws java.lang.Exception {¤		long labelId = Long.parseLong(labelIdString);¤		Label label = ContainerManager.Factory.get().getLabelManager().getLabel(labelId);¤		if (label == null) {¤		    final String labelName = "unknown";¤		    return makeErrorResponse(¤		    		Messages.Factory.messages().get("garaddlabeltoentitybean.label") + " '" + labelName + "' " + Messages.Factory.messages().get("garaddlabeltoentitybean.is.service.and.can.not.remove.by.hand")¤		    );¤		}¤		return super.addLabel(entityIdString, label.getRealTitle());¤	}¤	¤	//#UC END# *47FCC761033D_CUSTOM_METHODS_AND_DATA*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (wiki)"
		    value      	"wiki")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"19039098240"))
	    quid       	"47FCC761033D"
	    documentation 	"Класс уточняющий поведегние при добавлении метки. Запрещает добавлять служебные метки."
	    stereotype 	"SimpleClass"
	    superclasses 	(list inheritance_relationship_list
		(object Inheritance_Relationship
		    quid       	"47FCC79D0287"
		    supplier   	"Logical View::external::JavaConfluence::ConfluenceClassPack::AddLabelToEntityBean"
		    quidu      	"47FCC73C0144"))
	    operations 	(list Operations
		(object Operation "make_error_response"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"final")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*47FDCBB9000D*"
			    value      	(value Text 
|//#UC START# *47FDCBB9000D*¤		return AjaxResponse.failure(message);¤		//#UC END# *47FDCBB9000D*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ResolvedTypeGuid"
			    value      	"47FCC7FA03D0")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"19011021163"))
		    quid       	"47FDCBB9000D"
		    documentation 	"Создание объекта AjaxResponse с соответствующем сообщением."
		    parameters 	(list Parameters
			(object Parameter "message"
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ResolvedTypeGuid"
				    value      	"3DBFFE240068")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ElementCreationOrder"
				    value      	"19011021473"))
			    quid       	"47FDCC200385"
			    type       	"string"
			    quidu      	"3DBFFE240068"))
		    result     	"AjaxResponse"
		    concurrency 	"Sequential"
		    opExportControl 	"Private"
		    uid        	0
		    quidu      	"47FCC7FA03D0"))
	    language   	"MDA Generator")
	(object Class "GarEditPageAction"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"WikiPageID (wiki)"
		    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/ConfluencePlugins/LabelSelectorSupport/GarEditPageAction|47FE1721019A
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/ConfluencePlugins/LabelSelectorSupport/GarEditPageAction.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"DerivedOverload"
		    value      	(value Text 
|{"47FE16A002A6":{"need_collect_children":"false"}}
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ImplementSelectType"
		    value      	"all")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"OverloadSelectType"
		    value      	"include")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*47FE1721019A_CUSTOM_IMPORT*"
		    value      	"//#UC START# *47FE1721019A_CUSTOM_IMPORT*¤import com.atlassian.confluence.user.AuthenticatedUserThreadLocal;¤import com.atlassian.confluence.util.EditPageBean;¤import com.atlassian.confluence.util.LabelUtil;¤import com.atlassian.confluence.util.PlainTextToHtmlConverter;¤¤import java.util.*;¤import org.apache.commons.lang.StringUtils;¤¤import com.atlassian.confluence.content.service.page.MovePageCommand;¤import com.atlassian.confluence.core.ContentEntityObject;¤import com.atlassian.confluence.event.events.content.page.PageUpdateEvent;¤import com.atlassian.confluence.labels.Label;¤import com.atlassian.confluence.pages.Page;¤¤import ru.garant.MDProcess.ConfluencePlugins.DiscussionsSupport.GarantViewPageAction;¤import ru.garant.MDProcess.ConfluencePlugins.DocumentWorkSupport.CreateAndEditPageAction;¤import ru.garant.MDProcess.DocCardChange.DocCardSupport.DpoUvsHelper;¤¤//#UC END# *47FE1721019A_CUSTOM_IMPORT*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*47FE1721019A_CUSTOM_CLASS_DEFINITION*"
		    value      	"//#UC START# *47FE1721019A_CUSTOM_CLASS_DEFINITION*¤//#UC END# *47FE1721019A_CUSTOM_CLASS_DEFINITION*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*47FE1721019A_CUSTOM_METHODS_AND_DATA*"
		    value      	(value Text 
|//#UC START# *47FE1721019A_CUSTOM_METHODS_AND_DATA*¤	¤	private String targetTitle_;¤	¤	public void setTargetTitle(String targetTitle) {¤		targetTitle_ = StringUtils.trimToEmpty(targetTitle);¤	}¤	¤	public String getActionName (String fullClassName) {¤		return super.getActionName("com.atlassian.confluence.pages.actions.EditPageAction");¤	}¤¤	public void prepare () throws Exception {¤		if (StringUtils.isBlank(targetTitle_) || getTargetId() > 0) {¤			return;¤		}¤		ContentEntityObject pageObj = pageManager.getPage(getNewSpaceKey(), targetTitle_);¤		if (pageObj != null) {¤			setTargetId(pageObj.getIdAsString());¤			setPosition(MovePageCommand.POSITION_APPEND);¤		}¤	}¤	¤	@Override¤	public void validate () {¤		super.validate();¤¤		if (StringUtils.isNotBlank(targetTitle_) && getTargetId() <= 0) {¤			addFieldError("parentPageString", getText("parent.page.doesnt.exist"));¤		}¤	}¤¤	@Override¤	public String doDefault() throws Exception {¤		String res =  super.doDefault();¤        if(StringUtils.isNotEmpty(getLabelsString())){¤        	String labels = ServiceLabelHelper.removeServiceLabels(getLabelsString());¤        	setLabelsString(labels);¤        }¤        return res;¤	}¤¤	@Override¤	protected void validateDuplicatePageTitle() {¤		if(getPage() instanceof Page && DpoUvsHelper.hasParentOGVFolderAndHasLabelOGVOrFolder((Page)getPage())){¤			return;¤		}¤		super.validateDuplicatePageTitle();¤	}¤¤	@Override¤	public String doEdit() throws Exception {¤		if(getPage() instanceof Page && DpoUvsHelper.hasParentOGVFolderAndHasLabelOGVOrFolder((Page)getPage())){¤			try {¤				Page p = (Page)getPage();¤				p.setTitle(getTitle());¤				p.setContent(getContent());¤				ContainerManager.Factory.get().getSession().saveOrUpdate(p);¤				CreateAndEditPageAction listener = new CreateAndEditPageAction();¤				PageUpdateEvent event = new PageUpdateEvent(p, p);¤				listener.handleEvent(event);¤				return SUCCESS;¤			} catch (Exception e) {¤				Logs.LOG_SEX(e);¤			}¤		}¤//		String result = super.doEdit();¤//		deleteContentCacheForPage(getPage().getId());¤		return super.doEdit();¤//		return result;¤	}	¤	/*¤	public void deleteContentCacheForPage(long pageId){¤		List<String> users = GarantViewPageAction.getBodyCache().getAllUsers(pageId);¤		if(users != null){¤			for(String user : users){¤				GarantViewPageAction.getBodyCache().remove (pageId + ";" + user);¤			}¤			GarantViewPageAction.getBodyCache().removeAllUsers(pageId);¤		}¤	}¤	*/¤	//#UC END# *47FE1721019A_CUSTOM_METHODS_AND_DATA*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (wiki)"
		    value      	"wiki")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"19039100956")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"DerivedImplement"
		    value      	"{}"))
	    quid       	"47FE1721019A"
	    documentation 	"Перекрывает методы родного класса К., чтобы не допустить редактирования служебных меток."
	    stereotype 	"SimpleClass"
	    superclasses 	(list inheritance_relationship_list
		(object Inheritance_Relationship
		    quid       	"47FE1752019F"
		    supplier   	"Logical View::external::JavaConfluence::ConfluenceClassPack::EditPageAction"
		    quidu      	"47FE164E005D"))
	    used_nodes 	(list uses_relationship_list
		(object Uses_Relationship
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"19011022423"))
		    quid       	"4AE46F960143"
		    stereotype 	"uses"
		    supplier   	"Logical View::MDProcess::ConfluencePlugins::LabelSelectorSupport::ServiceLabelHelper"
		    quidu      	"4AE46DDD014C"))
	    realized_interfaces 	(list realize_rel_list
		(object Realize_Relationship
		    quid       	"4AA8B0E4009F"
		    supplier   	"Logical View::external::ConfluenceSupport::com.opensymphony.xwork::Preparable"
		    quidu      	"4A8E4F9B0196"))
	    language   	"MDA Generator")
	(object Class "ServiceLabelHelper"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Need assign op"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Need copy ctor"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Refcount"
		    value      	"none")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"debug log"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"finished"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"local supervisor"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"need UC"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"need dctor"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"need objcounter"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"no hands"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"non virtual base"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"singleton"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/ConfluencePlugins/LabelSelectorSupport/ServiceLabelHelper.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"WikiPageID (wiki)"
		    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/ConfluencePlugins/LabelSelectorSupport/ServiceLabelHelper|4AE46DDD014C
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (wiki)"
		    value      	"wiki")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4AE46DDD014C_CUSTOM_IMPORT*"
		    value      	"//#UC START# *4AE46DDD014C_CUSTOM_IMPORT*¤import com.atlassian.confluence.util.LabelUtil;¤¤import org.apache.commons.collections.CollectionUtils;¤import org.apache.commons.collections.Predicate;¤¤import java.util.*;¤//#UC END# *4AE46DDD014C_CUSTOM_IMPORT*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4AE46DDD014C_CUSTOM_CLASS_DEFINITION*"
		    value      	"//#UC START# *4AE46DDD014C_CUSTOM_CLASS_DEFINITION*¤//#UC END# *4AE46DDD014C_CUSTOM_CLASS_DEFINITION*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4AE46DDD014C_CUSTOM_METHODS_AND_DATA*"
		    value      	(value Text 
|//#UC START# *4AE46DDD014C_CUSTOM_METHODS_AND_DATA*¤	//#UC END# *4AE46DDD014C_CUSTOM_METHODS_AND_DATA*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"19027260306"))
	    quid       	"4AE46DDD014C"
	    documentation 	"предотвращает попытки удаления/добавления служебных лэйблов"
	    stereotype 	"UtilityClass"
	    operations 	(list Operations
		(object Operation "remove_service_labels"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"final")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4AE46E7F0321*"
			    value      	(value Text 
|//#UC START# *4AE46E7F0321*¤		List<String> labelsList = LabelUtil.split(labelsString);¤		 CollectionUtils.filter(labelsList, new Predicate() {¤			 public boolean evaluate(Object o) {¤				 String label = (String)o;¤				 return ru.garant.MDProcess.ConfluenceMDChange.RequestSupport.RequestHelper.canChangeLabel(label);¤			 }¤		 });¤		 return LabelUtil.convertToDelimitedString(labelsList);¤		//#UC END# *4AE46E7F0321*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ResolvedTypeGuid"
			    value      	"3DBFFE240068")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"19011023491"))
		    quid       	"4AE46E7F0321"
		    documentation 	"Фильтруем служебные лейблы."
		    parameters 	(list Parameters
			(object Parameter "labels_string"
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ResolvedTypeGuid"
				    value      	"3DBFFE240068")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ElementCreationOrder"
				    value      	"19011023799"))
			    quid       	"4AE46E7F0330"
			    type       	"string"
			    quidu      	"3DBFFE240068"))
		    result     	"string"
		    concurrency 	"Sequential"
		    opExportControl 	"Public"
		    uid        	0
		    quidu      	"3DBFFE240068")
		(object Operation "only_service_labels"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"final")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4AE46E8201BB*"
			    value      	(value Text 
|//#UC START# *4AE46E8201BB*¤		List<String> labelsList = LabelUtil.split(labelsString);¤		 CollectionUtils.filter(labelsList, new Predicate() {¤			 public boolean evaluate(Object o) {¤				 String label = (String)o;¤				 return !ru.garant.MDProcess.ConfluenceMDChange.RequestSupport.RequestHelper.canChangeLabel(label);¤			 }¤		 });¤		 return LabelUtil.convertToDelimitedString(labelsList);¤		//#UC END# *4AE46E8201BB*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ResolvedTypeGuid"
			    value      	"3DBFFE240068")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"19011024222"))
		    quid       	"4AE46E8201BB"
		    documentation 	"Фильтруем, оставляя только служебные лейблы."
		    parameters 	(list Parameters
			(object Parameter "labels_string"
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ResolvedTypeGuid"
				    value      	"3DBFFE240068")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ElementCreationOrder"
				    value      	"19011024554"))
			    quid       	"4AE46E8201CE"
			    type       	"string"
			    quidu      	"3DBFFE240068"))
		    result     	"string"
		    concurrency 	"Sequential"
		    opExportControl 	"Public"
		    uid        	0
		    quidu      	"3DBFFE240068"))
	    language   	"MDA Generator")
	(object Class "GarEditBlogPostAction"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"WikiPageID (wiki)"
		    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/ConfluencePlugins/LabelSelectorSupport/GarEditBlogPostAction|4AE46FA3010E
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (wiki)"
		    value      	"wiki")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/ConfluencePlugins/LabelSelectorSupport/GarEditBlogPostAction.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4AE46FA3010E_CUSTOM_IMPORT*"
		    value      	"//#UC START# *4AE46FA3010E_CUSTOM_IMPORT*¤import java.util.ArrayList;¤import java.util.Collection;¤import java.util.HashSet;¤import java.util.Iterator;¤import java.util.List;¤import java.util.Set;¤¤import org.apache.commons.lang.StringUtils;¤¤import com.atlassian.confluence.security.ContentPermission;¤import com.atlassian.confluence.security.ContentPermissionSet;¤import com.atlassian.confluence.util.EditPageBean;¤import com.atlassian.confluence.util.GeneralUtil;¤import com.atlassian.confluence.util.LabelUtil;¤import com.atlassian.confluence.event.events.security.ContentPermissionEvent;¤import com.atlassian.user.User;¤//#UC END# *4AE46FA3010E_CUSTOM_IMPORT*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4AE46FA3010E_CUSTOM_CLASS_DEFINITION*"
		    value      	"//#UC START# *4AE46FA3010E_CUSTOM_CLASS_DEFINITION*¤//#UC END# *4AE46FA3010E_CUSTOM_CLASS_DEFINITION*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4AE46FA3010E_CUSTOM_METHODS_AND_DATA*"
		    value      	(value Text 
|//#UC START# *4AE46FA3010E_CUSTOM_METHODS_AND_DATA*¤	@Override¤	public String doSaveEditPageBean() {¤		final String originalLabelsString = ServiceLabelHelper.onlyServiceLabels(¤				LabelUtil.convertToDelimitedString(getPage(), getRemoteUser())¤		);¤¤		int oldPrevVersion = getPage().getPreviousVersion();¤¤        List viewPermissions = createPermissions("View", getViewPermissionsGroups(), getViewPermissionsUsers(), getRemoteUser());¤        List editPermissions = createPermissions("Edit", getEditPermissionsGroups(), getEditPermissionsUsers(), getRemoteUser());¤        contentPermissionManager.setContentPermissions(editPermissions, getPage(), "Edit");¤        contentPermissionManager.setContentPermissions(viewPermissions, getPage(), "View");¤	¤		String res = super.doSaveEditPageBean();¤¤		List<String> originalLabelsList = LabelUtil.split(originalLabelsString);¤		List<String> currentLabelsList = LabelUtil.split(getLabelsString());¤¤		Set<String> unitedLabelsSet = new HashSet<String>(originalLabelsList);¤		unitedLabelsSet.addAll(currentLabelsList);¤		List<String> uniqueLabelsList = new ArrayList<String>(unitedLabelsSet);¤¤		final String uniqueLabelsString = LabelUtil.convertToDelimitedString(uniqueLabelsList);¤¤		LabelUtil.syncState(uniqueLabelsString, getLabelManager(), getRemoteUser(), getPage(), true);¤		¤		return res;¤	}¤¤	@Override¤	public void setLabelsString(String labelsString) {¤		super.setLabelsString(ServiceLabelHelper.removeServiceLabels(labelsString));¤	}¤¤	@Override¤	public String doEdit() throws Exception {¤        if(hasSetPagePermissionsPermission())¤        {¤            eventManager.publishEvent(new ContentPermissionEvent(this, getPage(), null));¤        }¤¤		return super.doEdit();¤	}¤¤	@Override¤	public String doDefault() throws Exception {¤		// TODO Auto-generated method stub¤        if(getPage().hasPermissions("View"))¤        {¤            ContentPermissionSet viewContentPermissionSet = getPage().getContentPermissionSet("View");¤            List escapedGroupNames = GeneralUtil.escapeCommas(viewContentPermissionSet.getGroupNames());¤            setViewPermissionsGroups(StringUtils.join(escapedGroupNames.iterator(), ", "));¤            List escapedUserNames = GeneralUtil.escapeCommas(viewContentPermissionSet.getUserNames());¤            setViewPermissionsUsers(StringUtils.join(escapedUserNames.iterator(), ", "));¤        }¤        if(getPage().hasPermissions("Edit"))¤        {¤            ContentPermissionSet editContentPermissionSet = getPage().getContentPermissionSet("Edit");¤            List escapedGroupNames = GeneralUtil.escapeCommas(editContentPermissionSet.getGroupNames());¤            setEditPermissionsGroups(StringUtils.join(escapedGroupNames.iterator(), ", "));¤            List escapedUserNames = GeneralUtil.escapeCommas(editContentPermissionSet.getUserNames());¤            setEditPermissionsUsers(StringUtils.join(escapedUserNames.iterator(), ", "));¤        }¤        return super.doDefault();¤	}	¤	¤    private List createPermissions(String contentPermissionType, String permissionsGroups, String permissionsUsers, User user)¤    {¤        List permissions = new ArrayList();¤        permissions.addAll(getGroupNamesAsPermissions(contentPermissionType, permissionsGroups));¤        permissions.addAll(getUserNamesAsPermissions(contentPermissionType, permissionsUsers));¤        if(user != null && isUserLockedOut(permissions, user))¤            permissions.add(ContentPermission.createUserPermission(contentPermissionType, user.getName()));¤        return permissions;¤    }¤    private List getGroupNamesAsPermissions(String type, String concatenatedGroupNames)¤    {¤        List result = new ArrayList();¤        String groupNames[] = GeneralUtil.splitCommaDelimitedString(concatenatedGroupNames);¤        String arr$[] = groupNames;¤        int len$ = arr$.length;¤        for(int i$ = 0; i$ < len$; i$++)¤        {¤            String groupName = arr$[i$];¤            if(StringUtils.isNotEmpty(groupName))¤            {¤                ContentPermission groupPermission = ContentPermission.createGroupPermission(type, groupName);¤                result.add(groupPermission);¤            }¤        }¤¤        return result;¤    }¤¤    private List getUserNamesAsPermissions(String type, String concatenatedUserNames)¤    {¤        List result = new ArrayList();¤        String userNames[] = GeneralUtil.splitCommaDelimitedString(concatenatedUserNames);¤        String arr$[] = userNames;¤        int len$ = arr$.length;¤        for(int i$ = 0; i$ < len$; i$++)¤        {¤            String userName = arr$[i$];¤            if(StringUtils.isNotEmpty(userName))¤            {¤                ContentPermission userPermission = ContentPermission.createUserPermission(type, userName);¤                result.add(userPermission);¤            }¤        }¤¤        return result;¤    }¤    private boolean isUserLockedOut(Collection contentPermissions, User user)¤    {¤        if(user == null)¤            throw new IllegalArgumentException("This method can only be called for a valid user.");¤        if(contentPermissions == null || contentPermissions.isEmpty())¤            return false;¤        for(Iterator i$ = contentPermissions.iterator(); i$.hasNext();)¤        {¤            ContentPermission contentPermission = (ContentPermission)i$.next();¤            if(contentPermission.isPermitted(user))¤                return false;¤        }¤¤        return true;¤    }¤¤	//#UC END# *4AE46FA3010E_CUSTOM_METHODS_AND_DATA*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"19039056749"))
	    quid       	"4AE46FA3010E"
	    documentation 	"перекрываем экшан редактирования новости, что бы контролировать служебные лэйблы"
	    stereotype 	"SimpleClass"
	    superclasses 	(list inheritance_relationship_list
		(object Inheritance_Relationship
		    quid       	"4AE470D20312"
		    supplier   	"Logical View::external::ConfluenceSupport::com.atlassian.confluence.pages.actions::EditBlogPostAction"
		    quidu      	"4AE470590391"))
	    used_nodes 	(list uses_relationship_list
		(object Uses_Relationship
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"19011025483"))
		    quid       	"4AE4700702C6"
		    stereotype 	"uses"
		    supplier   	"Logical View::MDProcess::ConfluencePlugins::LabelSelectorSupport::ServiceLabelHelper"
		    quidu      	"4AE46DDD014C"))
	    language   	"MDA Generator")
	(object Class "GarViewLabelAction"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"1396507622009291")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/ConfluencePlugins/LabelSelectorSupport/GarViewLabelAction.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*533D03E60009_CUSTOM_IMPORT*"
		    value      	"//#UC START# *533D03E60009_CUSTOM_IMPORT*¤import com.atlassian.confluence.core.ContentEntityObject;¤import com.atlassian.confluence.core.ListQuery;¤import com.atlassian.confluence.core.SmartListManager;¤import com.atlassian.confluence.labels.CombinedLabel;¤import com.atlassian.confluence.labels.DisplayableLabel;¤import com.atlassian.confluence.labels.Label;¤import com.atlassian.confluence.labels.LabelManager;¤import com.atlassian.confluence.labels.Namespace;¤import com.opensymphony.webwork.ServletActionContext;¤¤import java.util.ArrayList;¤import java.util.Collections;¤import java.util.List;¤¤import javax.servlet.http.HttpServletResponse;¤¤import org.apache.commons.lang.ArrayUtils;¤import org.apache.lucene.search.BooleanClause;¤//#UC END# *533D03E60009_CUSTOM_IMPORT*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*533D03E60009_CUSTOM_CLASS_DEFINITION*"
		    value      	"//#UC START# *533D03E60009_CUSTOM_CLASS_DEFINITION*¤//#UC END# *533D03E60009_CUSTOM_CLASS_DEFINITION*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*533D03E60009_CUSTOM_METHODS_AND_DATA*"
		    value      	(value Text 
|//#UC START# *533D03E60009_CUSTOM_METHODS_AND_DATA*¤	@Override¤	public String execute() throws Exception {¤        if (hasErrors())¤        {¤            return ERROR;¤        }¤        labels = retrieveLabels();¤        if (labels.size() == 0)¤        {¤            getPaginationSupport().setItems(Collections.EMPTY_LIST);¤            ServletActionContext.getResponse().sendError(HttpServletResponse.SC_NOT_FOUND);¤            return ERROR;¤        }¤        List content = getSearchResults(labels);¤        getPaginationSupport().setItems(content);¤        preloadResults();¤		return SUCCESS;¤	}¤	¤    private void preloadResults()¤    {¤        preloadedPage = getPaginationSupport().getPage();¤        for (Object aPreloadedPage : preloadedPage)¤        {¤            ContentEntityObject c = (ContentEntityObject) aPreloadedPage;¤            c.getUrlPath();¤        }¤        getPaginationSupport().getPreviousStartIndexes();¤    }¤¤    private List getSearchResults(List<DisplayableLabel> labels)¤    {¤        ListQuery query = new ListQuery();¤        query.addSpace(getSpace());¤        query.setLabelList(labels);¤        query.setLabelOccur(BooleanClause.Occur.MUST);¤        query.setTypeList(LabelManager.CONTENT_TYPES);¤        query.setUser(getRemoteUser());¤        query.setMaxResults(10);     ¤        ¤        List results = smartListManager.getListQueryResults(query, true);¤        return results;¤    }¤¤¤	private List<DisplayableLabel> retrieveLabels()¤    {¤        List<DisplayableLabel> labels = new ArrayList<DisplayableLabel>();¤¤        if (!ArrayUtils.isEmpty(ids))¤        {¤            for (long id : ids)¤            {¤                Label label = getLabelManager().getLabel(id);¤                if (label != null)¤                    labels.add(label);¤            }¤        }¤¤        return labels;¤    }¤	¤    public List<DisplayableLabel> getOtherLabels(ContentEntityObject content)¤    {¤        List<DisplayableLabel> otherLabels = new ArrayList<DisplayableLabel>();¤        //noinspection unchecked¤        for (Label label : (List<Label>) content.getLabels())¤        {¤            if (this.labels.contains(label))¤                continue;¤            if (!Namespace.GLOBAL.equals(label.getNamespace()))¤                continue;¤¤            otherLabels.add(label);¤            if (otherLabels.size() >= 8) break;¤        }¤¤        return otherLabels;¤    }¤¤¤	private String getSpaceKey()¤    {¤        return getSpace() != null ? getSpace().getKey() : "";¤    }¤¤    public DisplayableLabel getLabel()¤    {¤        if (combinedLabel == null && labels != null && labels.size() > 0)¤            combinedLabel = new CombinedLabel(labels);¤¤        return combinedLabel;¤    }¤¤    private DisplayableLabel combinedLabel;¤¤    private long[] ids;¤    public void setIds(long[] ids)¤    {¤        this.ids = ids;¤        super.setIds(ids);¤    }¤    private static final int MAX_RELATED_LABELS_PER_LABEL = 100;¤    private SmartListManager smartListManager;¤    public void setSmartListManager(SmartListManager smartListManager)¤    {¤        this.smartListManager = smartListManager;¤    }¤    public List preloadedPage;¤    public List getPreloadedPage()¤    {¤        return preloadedPage;¤    }¤¤    private List<DisplayableLabel> labels;¤	//#UC END# *533D03E60009_CUSTOM_METHODS_AND_DATA*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"WikiPageID (wiki)"
		    value      	
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/ConfluencePlugins/LabelSelectorSupport/GarViewLabelAction|533D03E60009
		    )
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (wiki)"
		    value      	"wiki"))
	    quid       	"533D03E60009"
	    documentation 	"Класс перекрывающий поведение при просмотре меток. "
	    stereotype 	"SimpleClass"
	    superclasses 	(list inheritance_relationship_list
		(object Inheritance_Relationship
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"1400143401938695"))
		    quid       	"53747E2903AA"
		    supplier   	"Logical View::external::ConfluenceSupport::com.atlassian.confluence.labels.actions::ViewLabelAction"
		    quidu      	"533D032103A8"))
	    language   	"MDA Generator"))
    logical_presentations 	(list unit_reference_list
	(object ClassDiagram "Main"
	    quid       	"47FCC51F0292"
	    title      	"Main"
	    zoom       	100
	    max_height 	28350
	    max_width  	21600
	    origin_x   	661
	    origin_y   	0
	    items      	(list diagram_item_list
		(object ClassView "Class" "Logical View::MDProcess::ConfluencePlugins::LabelSelectorSupport::GarRemoveLabelFromEntityBean" @1
		    ShowCompartmentStereotypes 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(582, 468)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@1
			location   	(48, 409)
			fill_color 	13434879
			nlines     	1
			max_width  	1068
			justify    	0
			label      	"• GarRemoveLabelFromEntityBean")
		    stereotype 	(object ItemLabel
			Parent_View 	@1
			location   	(48, 359)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	1068
			justify    	0
			label      	"<<SimpleClass>>")
		    icon_style 	"Label"
		    fill_color 	12842465
		    quidu      	"47FCC6A40058"
		    compartment 	(object Compartment
			Parent_View 	@1
			location   	(48, 470)
			font       	(object Font
			    size       	10
			    face       	"Arial"
			    charSet    	204
			    bold       	FALSE
			    italics    	FALSE
			    underline  	FALSE
			    strike     	FALSE
			    color      	0
			    default_color 	TRUE)
			icon_style 	"Icon"
			fill_color 	16777215
			anchor     	2
			nlines     	2
			max_width  	1075
			justify    	1)
		    width      	1086
		    height     	242
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::external::JavaConfluence::ConfluenceClassPack::RemoveLabelFromEntityBean" @2
		    ShowCompartmentStereotypes 	TRUE
		    SuppressAttribute 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    location   	(582, 132)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	658120
			default_color 	FALSE)
		    label      	(object ItemLabel
			Parent_View 	@2
			location   	(281, 104)
			fill_color 	13434879
			nlines     	1
			max_width  	602
			justify    	0
			label      	"• RemoveLabelFromEntityBean")
		    stereotype 	(object ItemLabel
			Parent_View 	@2
			location   	(281, 54)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	602
			justify    	0
			label      	"<<SimpleClass>>")
		    icon_style 	"Label"
		    line_color 	14803425
		    fill_color 	14803425
		    quidu      	"47FCC6F70264"
		    width      	620
		    height     	180
		    annotation 	8
		    autoResize 	TRUE)
		(object InheritView "" @3
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	TRUE
		    line_color 	3947680
		    quidu      	"47FCC70C0025"
		    client     	@1
		    supplier   	@2
		    vertices   	(list Points
			(582, 346)
			(582, 222))
		    line_style 	0)
		(object ClassView "Class" "Logical View::external::JavaConfluence::ConfluenceClassPack::AddLabelToEntityBean" @4
		    ShowCompartmentStereotypes 	TRUE
		    SuppressAttribute 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    location   	(1830, 108)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	658120
			default_color 	FALSE)
		    label      	(object ItemLabel
			Parent_View 	@4
			location   	(1579, 80)
			fill_color 	13434879
			nlines     	1
			max_width  	502
			justify    	0
			label      	"• AddLabelToEntityBean")
		    stereotype 	(object ItemLabel
			Parent_View 	@4
			location   	(1579, 30)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	502
			justify    	0
			label      	"<<SimpleClass>>")
		    icon_style 	"Label"
		    line_color 	14803425
		    fill_color 	14803425
		    quidu      	"47FCC73C0144"
		    width      	520
		    height     	180
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::ConfluencePlugins::LabelSelectorSupport::GarAddLabelToEntityBean" @5
		    ShowCompartmentStereotypes 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(1830, 456)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@5
			location   	(1296, 397)
			fill_color 	13434879
			nlines     	1
			max_width  	1068
			justify    	0
			label      	"• GarAddLabelToEntityBean")
		    stereotype 	(object ItemLabel
			Parent_View 	@5
			location   	(1296, 347)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	1068
			justify    	0
			label      	"<<SimpleClass>>")
		    icon_style 	"Label"
		    fill_color 	12842465
		    quidu      	"47FCC761033D"
		    compartment 	(object Compartment
			Parent_View 	@5
			location   	(1296, 458)
			font       	(object Font
			    size       	10
			    face       	"Arial"
			    charSet    	204
			    bold       	FALSE
			    italics    	FALSE
			    underline  	FALSE
			    strike     	FALSE
			    color      	0
			    default_color 	TRUE)
			icon_style 	"Icon"
			fill_color 	16777215
			anchor     	2
			nlines     	2
			max_width  	1075
			justify    	1)
		    width      	1086
		    height     	242
		    annotation 	8
		    autoResize 	TRUE)
		(object InheritView "" @6
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	TRUE
		    line_color 	3947680
		    quidu      	"47FCC79D0287"
		    client     	@5
		    supplier   	@4
		    vertices   	(list Points
			(1830, 334)
			(1830, 198))
		    line_style 	0)
		(object ClassView "Class" "Logical View::MDProcess::ConfluencePlugins::LabelSelectorSupport::GarEditPageAction" @7
		    ShowCompartmentStereotypes 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(561, 1155)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@7
			location   	(368, 1125)
			fill_color 	13434879
			nlines     	1
			max_width  	386
			justify    	0
			label      	"GarEditPageAction")
		    stereotype 	(object ItemLabel
			Parent_View 	@7
			location   	(368, 1075)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	386
			justify    	0
			label      	"<<SimpleClass>>")
		    icon_style 	"Label"
		    fill_color 	12842465
		    quidu      	"47FE1721019A"
		    width      	404
		    height     	184
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::external::JavaConfluence::ConfluenceClassPack::EditPageAction" @8
		    ShowCompartmentStereotypes 	TRUE
		    SuppressAttribute 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    location   	(561, 768)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	658120
			default_color 	FALSE)
		    label      	(object ItemLabel
			Parent_View 	@8
			location   	(357, 740)
			fill_color 	13434879
			nlines     	1
			max_width  	408
			justify    	0
			label      	"• EditPageAction")
		    stereotype 	(object ItemLabel
			Parent_View 	@8
			location   	(357, 690)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	408
			justify    	0
			label      	"<<SimpleClass>>")
		    icon_style 	"Label"
		    line_color 	14803425
		    fill_color 	14803425
		    quidu      	"47FE164E005D"
		    width      	426
		    height     	180
		    annotation 	8
		    autoResize 	TRUE)
		(object InheritView "" @9
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	TRUE
		    line_color 	3947680
		    quidu      	"47FE1752019F"
		    client     	@7
		    supplier   	@8
		    vertices   	(list Points
			(561, 1062)
			(561, 858))
		    line_style 	0)
		(object ClassView "Class" "Logical View::external::ConfluenceSupport::com.opensymphony.xwork::Preparable" @10
		    ShowCompartmentStereotypes 	TRUE
		    SuppressAttribute 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    location   	(1188, 756)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	658120
			default_color 	FALSE)
		    label      	(object ItemLabel
			Parent_View 	@10
			location   	(949, 728)
			fill_color 	13434879
			nlines     	1
			max_width  	478
			justify    	0
			label      	"• Preparable")
		    stereotype 	(object ItemLabel
			Parent_View 	@10
			location   	(949, 678)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	478
			justify    	0
			label      	"<<Facet>>")
		    icon_style 	"Label"
		    line_color 	14803425
		    fill_color 	14803425
		    quidu      	"4A8E4F9B0196"
		    width      	496
		    height     	180
		    annotation 	8
		    autoResize 	TRUE)
		(object RealizeView "" @11
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	TRUE
		    line_color 	3947680
		    quidu      	"4AA8B0E4009F"
		    client     	@7
		    supplier   	@10
		    vertices   	(list Points
			(704, 1062)
			(1042, 846))
		    line_style 	0)
		(object ClassView "Class" "Logical View::MDProcess::ConfluencePlugins::LabelSelectorSupport::ServiceLabelHelper" @12
		    ShowCompartmentStereotypes 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(1362, 1863)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@12
			location   	(881, 1784)
			fill_color 	13434879
			nlines     	1
			max_width  	962
			justify    	0
			label      	"• ServiceLabelHelper")
		    stereotype 	(object ItemLabel
			Parent_View 	@12
			location   	(881, 1734)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	962
			justify    	0
			label      	"<<UtilityClass>>")
		    icon_style 	"Label"
		    fill_color 	14145535
		    quidu      	"4AE46DDD014C"
		    compartment 	(object Compartment
			Parent_View 	@12
			location   	(881, 1845)
			font       	(object Font
			    size       	10
			    face       	"Arial"
			    charSet    	204
			    bold       	FALSE
			    italics    	FALSE
			    underline  	FALSE
			    strike     	FALSE
			    color      	0
			    default_color 	TRUE)
			icon_style 	"Icon"
			fill_color 	16777215
			anchor     	2
			nlines     	3
			max_width  	990
			justify    	1)
		    width      	980
		    height     	282
		    annotation 	8
		    autoResize 	TRUE)
		(object UsesView "" @13
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	(object SegLabel @14
			Parent_View 	@13
			location   	(741, 1490)
			font       	(object Font
			    size       	10
			    face       	"Arial"
			    charSet    	204
			    bold       	FALSE
			    italics    	FALSE
			    underline  	FALSE
			    strike     	FALSE
			    color      	0
			    default_color 	TRUE)
			anchor     	10
			anchor_loc 	1
			nlines     	1
			max_width  	450
			justify    	0
			label      	"<<uses>>"
			pctDist    	0.305498
			height     	132
			orientation 	1)
		    line_color 	3342489
		    quidu      	"4AE46F960143"
		    client     	@7
		    supplier   	@12
		    vertices   	(list Points
			(666, 1247)
			(1201, 1721))
		    line_style 	0)
		(object ClassView "Class" "Logical View::MDProcess::ConfluencePlugins::LabelSelectorSupport::GarEditBlogPostAction" @15
		    ShowCompartmentStereotypes 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(1872, 1206)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@15
			location   	(1653, 1177)
			fill_color 	13434879
			nlines     	1
			max_width  	438
			justify    	0
			label      	"GarEditBlogPostAction")
		    stereotype 	(object ItemLabel
			Parent_View 	@15
			location   	(1653, 1127)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	438
			justify    	0
			label      	"<<SimpleClass>>")
		    icon_style 	"Label"
		    fill_color 	12842465
		    quidu      	"4AE46FA3010E"
		    width      	456
		    height     	182
		    annotation 	8
		    autoResize 	TRUE)
		(object UsesView "" @16
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	(object SegLabel @17
			Parent_View 	@16
			location   	(1730, 1582)
			font       	(object Font
			    size       	10
			    face       	"Arial"
			    charSet    	204
			    bold       	FALSE
			    italics    	FALSE
			    underline  	FALSE
			    strike     	FALSE
			    color      	0
			    default_color 	TRUE)
			anchor     	10
			anchor_loc 	1
			nlines     	1
			max_width  	450
			justify    	0
			label      	"<<uses>>"
			pctDist    	0.500000
			height     	120
			orientation 	0)
		    line_color 	3342489
		    quidu      	"4AE4700702C6"
		    client     	@15
		    supplier   	@12
		    vertices   	(list Points
			(1800, 1297)
			(1470, 1721))
		    line_style 	0)
		(object ClassView "Class" "Logical View::external::ConfluenceSupport::com.atlassian.confluence.pages.actions::EditBlogPostAction" @18
		    ShowCompartmentStereotypes 	TRUE
		    SuppressAttribute 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    location   	(1875, 750)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	658120
			default_color 	FALSE)
		    label      	(object ItemLabel
			Parent_View 	@18
			location   	(1499, 718)
			fill_color 	13434879
			nlines     	1
			max_width  	752
			justify    	0
			label      	"• EditBlogPostAction")
		    stereotype 	(object ItemLabel
			Parent_View 	@18
			location   	(1499, 668)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	752
			justify    	0
			label      	"<<SimpleClass>>")
		    icon_style 	"Label"
		    line_color 	14803425
		    fill_color 	14803425
		    quidu      	"4AE470590391"
		    width      	770
		    height     	188
		    annotation 	8
		    autoResize 	TRUE)
		(object InheritView "" @19
		    stereotype 	TRUE
		    line_color 	3342489
		    quidu      	"4AE470D20312"
		    client     	@15
		    supplier   	@18
		    vertices   	(list Points
			(1872, 1114)
			(1874, 844))
		    line_style 	0)
		(object ClassView "Class" "Logical View::external::ConfluenceSupport::com.atlassian.confluence.labels.actions::ViewLabelAction" @20
		    ShowCompartmentStereotypes 	TRUE
		    SuppressAttribute 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    location   	(2826, 984)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	658120
			default_color 	FALSE)
		    label      	(object ItemLabel
			Parent_View 	@20
			location   	(2487, 956)
			fill_color 	13434879
			nlines     	1
			max_width  	678
			justify    	0
			label      	"• ViewLabelAction")
		    stereotype 	(object ItemLabel
			Parent_View 	@20
			location   	(2487, 906)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	678
			justify    	0
			label      	"<<SimpleClass>>")
		    icon_style 	"Label"
		    line_color 	14803425
		    fill_color 	14803425
		    quidu      	"533D032103A8"
		    width      	696
		    height     	180
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::ConfluencePlugins::LabelSelectorSupport::GarViewLabelAction" @21
		    ShowCompartmentStereotypes 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(2928, 1449)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@21
			location   	(2729, 1420)
			fill_color 	13434879
			nlines     	1
			max_width  	398
			justify    	0
			label      	"GarViewLabelAction")
		    stereotype 	(object ItemLabel
			Parent_View 	@21
			location   	(2729, 1370)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	398
			justify    	0
			label      	"<<SimpleClass>>")
		    icon_style 	"Label"
		    fill_color 	12842465
		    quidu      	"533D03E60009"
		    width      	416
		    height     	182
		    annotation 	8
		    autoResize 	TRUE)
		(object CategoryView "Logical View::MDProcess::ConfluencePlugins::LabelView" @22
		    location   	(330, 1584)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@22
			location   	(95, 1549)
			fill_color 	13434879
			nlines     	2
			max_width  	470
			justify    	0
			label      	"LabelView")
		    stereotype 	(object ItemLabel
			Parent_View 	@22
			location   	(95, 1499)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	470
			justify    	0
			label      	"<<HtmlUnit>>")
		    icon_style 	"Icon"
		    line_color 	3342489
		    fill_color 	13434879
		    quidu      	"533D334E0003"
		    width      	482
		    height     	182)
		(object InheritView "" @23
		    stereotype 	TRUE
		    line_color 	3342489
		    quidu      	"53747E2903AA"
		    client     	@21
		    supplier   	@20
		    vertices   	(list Points
			(2907, 1357)
			(2844, 1074))
		    line_style 	0)))))
