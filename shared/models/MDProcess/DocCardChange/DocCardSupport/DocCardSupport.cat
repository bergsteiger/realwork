
(object Petal
    version    	50
    _written   	"Rose 2006.0.0.060314"
    charSet    	204)

(object Class_Category "DocCardSupport"
    is_unit    	TRUE
    is_loaded  	TRUE
    attributes 	(list Attribute_Set
	(object Attribute
	    tool       	"MDA Generator"
	    name       	"AbstarctOperation"
	    value      	"regular")
	(object Attribute
	    tool       	"MDA Generator"
	    name       	"GlobalLocally"
	    value      	"false")
	(object Attribute
	    tool       	"MDA Generator"
	    name       	"IsNative"
	    value      	"false")
	(object Attribute
	    tool       	"MDA Generator User Properties"
	    name       	"name"
	    value      	"DocCardSupport")
	(object Attribute
	    tool       	"MDA Generator User Properties"
	    name       	"vendor name"
	    value      	"ООО НПП 'Гарант-Сервис'")
	(object Attribute
	    tool       	"MDA Generator User Properties"
	    name       	"vendor url"
	    value      	"www.garant.ru")
	(object Attribute
	    tool       	"MDA Generator"
	    name       	"WikiPageID (wiki)"
	    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport|4C3F058C039B
	    ))
	(object Attribute
	    tool       	"MDA Generator"
	    name       	"SourceType (wiki)"
	    value      	"wiki")
	(object Attribute
	    tool       	"MDA Generator"
	    name       	"NESTED GENERATED FILES (java)"
	    value      	"")
	(object Attribute
	    tool       	"MDA Generator"
	    name       	"ElementCreationOrder"
	    value      	"20609446642")
	(object Attribute
	    tool       	"MDA Generator"
	    name       	"NESTED GENERATED WikiPageID (wiki)"
	    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/AddUOCurrentDocFromOGVWebItem|4E23D90401AB::4E23D90401AB;MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/AddUOCurrentDocWithSavedFieldsFromOGVWebItem|5152DCF303C0::5152DCF303C0;MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/AddUOCurrentDoc|4E16F78E0270::4E16F78E0270
	    )))
    quid       	"4C3F058C039B"
    documentation 	"содержит web-функциональность для работы с Документами"
    stereotype 	"KPlugins"
    visible_categories 	(list visibility_relationship_list
	(object Visibility_Relationship
	    quid       	"4C3F0CB40113"
	    supplier   	"Logical View::MDProcess::DocCardChange::DocCardView"
	    quidu      	"4C3F088702FF")
	(object Visibility_Relationship
	    quid       	"4C3F0CB60393"
	    supplier   	"Logical View::MDProcess::ConfluenceMDChange::RequestSupport"
	    quidu      	"46309F330128")
	(object Visibility_Relationship
	    quid       	"4C455BA402DE"
	    supplier   	"Logical View::external::JavaConfluence::ConfluenceClassPack"
	    quidu      	"45DAC0AA0232")
	(object Visibility_Relationship
	    quid       	"4C47E4CE009E"
	    supplier   	"Logical View::MDProcess::ConfluencePlugins::CommentLocationSupport"
	    quidu      	"462E25C400DA")
	(object Visibility_Relationship
	    quid       	"4C497149035D"
	    supplier   	"Logical View::MDProcess::DocCardChange::DocCardCommon"
	    quidu      	"4C3FF78C02C8")
	(object Visibility_Relationship
	    quid       	"4C4972AB01E0"
	    supplier   	"Logical View::MDProcess::DocCardChange::DocCardChangeDAO"
	    quidu      	"4C40189C0104")
	(object Visibility_Relationship
	    quid       	"4C60E98E03CD"
	    supplier   	"Logical View::MDProcess::DocCardChange::DocCardSupportTypes"
	    quidu      	"4C60E93100E2")
	(object Visibility_Relationship
	    quid       	"4C7B60AE002B"
	    supplier   	"Logical View::external::ConfluenceSupport::com.opensymphony.xwork"
	    quidu      	"4A8E4F8603BF")
	(object Visibility_Relationship
	    quid       	"4C7B60C90286"
	    supplier   	"Logical View::MDProcess::ConfluenceMDChange::ReportSupport"
	    quidu      	"46309F5301E4")
	(object Visibility_Relationship
	    quid       	"4C7B7A6E02C5"
	    supplier   	"Logical View::MDProcess::ConfluencePlugins::SearchSupport"
	    quidu      	"465FE3730399")
	(object Visibility_Relationship
	    quid       	"4C7B7AAF0126"
	    supplier   	"Logical View::external::ConfluenceSupport::com.atlassian.user"
	    quidu      	"4614A1C20186")
	(object Visibility_Relationship
	    quid       	"4C7B7AFD018E"
	    supplier   	"Logical View::MDProcess::ConfluenceMDChange::Requests"
	    quidu      	"4741A5C102D5")
	(object Visibility_Relationship
	    quid       	"4C7B7B9A0324"
	    supplier   	"Logical View::MDProcess::ConfluenceMDChange::RequestSearch"
	    quidu      	"4762820600B0")
	(object Visibility_Relationship
	    quid       	"4C7B7CAC0069"
	    supplier   	"Logical View::MDProcess::ConfluencePlugins::Search"
	    quidu      	"474D3CA60168")
	(object Visibility_Relationship
	    quid       	"4C7BA09A00F2"
	    supplier   	"Logical View::MDProcess::ConfluenceMDChange::RequestWebConvertedSystemObjects"
	    quidu      	"47A831190254")
	(object Visibility_Relationship
	    quid       	"4C7F6D4F00DD"
	    supplier   	"Logical View::MDProcess::ConfluencePlugins::EntitySupport"
	    quidu      	"4B1F4958003C")
	(object Visibility_Relationship
	    quid       	"4C7F76C8020F"
	    supplier   	"Logical View::MDProcess::DocCardChange::Entities"
	    quidu      	"4C37135C025B")
	(object Visibility_Relationship
	    quid       	"4C85DB8E008D"
	    supplier   	"Logical View::MDProcess::ConfluenceMDChange::RequestSearchSupportTypes"
	    quidu      	"4AE961B003C3")
	(object Visibility_Relationship
	    quid       	"4CA9ACD0021F"
	    supplier   	"Logical View::MDProcess::ConfluencePlugins::EventsLog"
	    quidu      	"47C430D9027D")
	(object Visibility_Relationship
	    quid       	"4D0088DB02D9"
	    supplier   	"Logical View::external::ConfluenceSupport::com.atlassian.confluence.plugin.descriptor.web.conditions"
	    quidu      	"49523C25001F")
	(object Visibility_Relationship
	    quid       	"4D3D37030312"
	    supplier   	"Logical View::external::ConfluenceSupport::com.atlassian.confluence.pages.actions"
	    quidu      	"4795D23101A0")
	(object Visibility_Relationship
	    quid       	"4FA11F8001DB"
	    supplier   	"Logical View::MDProcess::ConfluencePlugins::IndexingSupport"
	    quidu      	"4A7151BC03C5")
	(object Visibility_Relationship
	    quid       	"504DC3660191"
	    supplier   	"Logical View::MDProcess::ConfluencePlugins::EntityView"
	    quidu      	"4B1F49D102D6")
	(object Visibility_Relationship
	    quid       	"53E897030351"
	    supplier   	"Logical View::external::ConfluenceSupport::com.atlassian.confluence.coreImpl"
	    quidu      	"4649E1A40231")
	(object Visibility_Relationship
	    quid       	"55AE182801D1"
	    supplier   	"Logical View::external::ConfluenceSupport::com.atlassian.bonnie"
	    quidu      	"468E63F0030D")
	(object Visibility_Relationship
	    quid       	"55AE33710355"
	    supplier   	"Logical View::MDProcess::DocCardChange::DocCardSearch"
	    quidu      	"55A60C540115")
	(object Visibility_Relationship
	    quid       	"55CDA56903D9"
	    supplier   	"Logical View::external::ConfluenceSupport::com.atlassian.renderer.v2.macro"
	    quidu      	"55CDA4AE026D"))
    exportControl 	"Public"
    logical_models 	(list unit_reference_list
	(object Class "DPOUVSSpaceConfig"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/DocCardChange/DocCardSupport/DPOUVSSpaceConfig.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C3F05E80307_CUSTOM_IMPORT*"
		    value      	"//#UC START# *4C3F05E80307_CUSTOM_IMPORT*¤import ru.garant.shared.GCI.I18N.Messages;¤import ru.garant.MDProcess.DocCardChange.DocCardChangeDAO.OGVLinksDAO;¤import ru.garant.MDProcess.DocCardChange.DocCardCommon.OGVLinksManager;¤import ru.garant.MDProcess.DocCardChange.DocCardCommon.DPOUVSManager;¤¤import java.util.ArrayList;¤import java.util.List;¤import com.atlassian.user.Group;¤import com.atlassian.user.User;¤¤//#UC END# *4C3F05E80307_CUSTOM_IMPORT*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C3F05E80307_CUSTOM_CLASS_DEFINITION*"
		    value      	"//#UC START# *4C3F05E80307_CUSTOM_CLASS_DEFINITION*¤//#UC END# *4C3F05E80307_CUSTOM_CLASS_DEFINITION*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C3F05E80307_ACTION_NAME*"
		    value      	(value Text 
|//#UC START# *4C3F05E80307_ACTION_NAME*¤		return Messages.Factory.messages().get("settings.ooduvs.space");¤		//#UC END# *4C3F05E80307_ACTION_NAME*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C3F05E80307_CUSTOM_METHODS_AND_DATA*"
		    value      	(value Text 
|//#UC START# *4C3F05E80307_CUSTOM_METHODS_AND_DATA*¤	private String leaderUvs_ = null;¤	private String leaderDpoUvs_ = null;¤	private String leaderUo_ = null;¤	private String leaderOdUo_ = null;¤	private String leaderRib_ = null;¤	private String uvsGroup_ = null;¤	private String responsible_ = null;¤	private String odUoResponsible_ = null;¤	private String odUoResponsibleForProjectRequest_ = null;¤	private String ogvList_ = null;¤	private String odUoOgvList_ = null;¤	private String spaceKey_ = null;¤	private String odUoForProjectRequestOgvList_ = null;¤	private String regionPartnersGroupsList_ = null;¤	private String responsibleSetLabelsInPaperCopy_ = null;¤	¤	public void setLeaderUvs (String leaderUvs) {¤		leaderUvs_ = leaderUvs;¤	}¤¤	public String getLeaderUvs () {¤		return leaderUvs_;¤	}¤	¤	public void setLeaderDpoUvs (String leaderDpoUvs) {¤		leaderDpoUvs_ = leaderDpoUvs;¤	}¤¤	public String getLeaderDpoUvs () {¤		return leaderDpoUvs_;¤	}¤¤	public void setLeaderUo (String leaderUo) {¤		leaderUo_ = leaderUo;¤	}¤¤	public String getLeaderUo () {¤		return leaderUo_;¤	}¤¤	public void setLeaderOdUo (String leaderOdUo) {¤		leaderOdUo_ = leaderOdUo;¤	}¤¤	public String getLeaderOdUo () {¤		return leaderOdUo_;¤	}¤¤	public void setUvsGroup (String uvsGroup) {¤		uvsGroup_ = uvsGroup;¤	}¤¤	public String getUvsGroup () {¤		return uvsGroup_;¤	}¤¤	public void setLeaderRib (String leaderRib) {¤		leaderRib_ = leaderRib;¤	}¤¤	public String getLeaderRib () {¤		return leaderRib_;¤	}¤	¤	public String getResponsible () {¤		return responsible_;¤	}¤	¤	public void setResponsible (String responsible) {¤		responsible_ = responsible;¤	}¤¤	public String getOdUoResponsible () {¤		return odUoResponsible_;¤	}¤	¤	public void setOdUoResponsible (String odUoResponsible) {¤		odUoResponsible_ = odUoResponsible;¤	}¤	¤	public String getOdUoResponsibleForProjectRequest () {¤		return odUoResponsibleForProjectRequest_;¤	}¤	¤	public void setOdUoResponsibleForProjectRequest (String odUoResponsibleForProjectRequest) {¤		odUoResponsibleForProjectRequest_ = odUoResponsibleForProjectRequest;¤	}¤¤	public String getOgvList () {¤		return ogvList_;¤	}¤	¤	public void setOgvList (String ogvList) {¤		ogvList_ = ogvList;¤	}¤¤	public String getOdUoOgvList () {¤		return odUoOgvList_;¤	}¤	¤	public void setOdUoOgvList (String odUoOgvList) {¤		odUoOgvList_ = odUoOgvList;¤	}¤¤	public String getOdUoForProjectRequestOgvList () {¤		return odUoForProjectRequestOgvList_;¤	}¤	¤	public void setOdUoForProjectRequestOgvList (String odUoForProjectRequestOgvList) {¤		odUoForProjectRequestOgvList_ = odUoForProjectRequestOgvList;¤	}¤¤	public String getRegionPartnersGroupsList () {¤		return regionPartnersGroupsList_;¤	}¤	¤	public void setRegionPartnersGroupsList (String regionPartnersGroupsList) {¤		regionPartnersGroupsList_ = regionPartnersGroupsList;¤	}¤¤	public void setResponsibleSetLabelsInPaperCopy (String responsibleSetLabelsInPaperCopy) {¤		responsibleSetLabelsInPaperCopy_ = responsibleSetLabelsInPaperCopy;¤	}¤¤	public String getResponsibleSetLabelsInPaperCopy () {¤		return responsibleSetLabelsInPaperCopy_;¤	}¤¤	public String getSpaceKey () {¤		return spaceKey_;¤	}¤	¤	public void setSpaceKey (String spaceKey) {¤		spaceKey_ = spaceKey;¤	}¤¤	@Override¤	protected DPOUVSManager getMdcManager() {¤		// TODO Auto-generated method stub¤		return DPOUVSManager.Factory.get(getSpace());¤	}¤¤	@Override¤	public String doAdd() throws Exception {¤		// TODO Auto-generated method stub¤		try {¤			DPOUVSManager mdcooduvs = getMdcManager();¤			mdcooduvs.setEnabled(getEnabled());¤			if(getEnabled()){¤				mdcooduvs.setLeaderUvs(filterUndefined(leaderUvs_));¤				mdcooduvs.setLeaderDpoUvs(filterUndefined(leaderDpoUvs_));¤				mdcooduvs.setLeaderUo(filterUndefined(leaderUo_));¤				mdcooduvs.setLeaderOdUo(filterUndefined(leaderOdUo_));¤				mdcooduvs.setLeaderRib(filterUndefined(leaderRib_));¤				mdcooduvs.setResponsibleSetLabelsInPaperCopy(filterUndefined(getResponsibleSetLabelsInPaperCopy ()));¤				mdcooduvs.setQueryPostersGroupInUO(filterUndefined(getQueryPostersGroupInUO()));¤				mdcooduvs.setUvsGroupWhoTransferDocsToUO(filterUndefined(getUvsGroupWhoTransferDocsToUO()));¤				mdcooduvs.setDocsAcceptorsInUO(filterUndefined(getDocsAcceptorsInUO()));¤				mdcooduvs.setGardocUoDocPosters(filterUndefined(getGardocUoDocPosters()));¤				mdcooduvs.setRegionPartnersGroups(filterUndefined(getRegionPartnersGroupsList()));¤				if(uvsGroup_ != null || getProjectManagersGroupsInOdUo() != null){¤					if(uvsGroup_ != null){¤						mdcooduvs.setUvsGroup(filterUndefined(uvsGroup_));¤					}¤					if(getProjectManagersGroupsInOdUo() != null){¤						mdcooduvs.setProjectManagersGroupsInOdUo(filterUndefined(getProjectManagersGroupsInOdUo()));¤					}¤				¤					if(responsible_ != null || odUoResponsible_ != null || odUoResponsibleForProjectRequest_ != null){¤						if(responsible_ != null){¤							mdcooduvs.setResponsible(responsible_);¤						}¤						if(odUoResponsible_ != null){¤							mdcooduvs.setOdUoResponsible(odUoResponsible_);¤						}¤						if(odUoResponsibleForProjectRequest_ != null){¤							mdcooduvs.setOdUoResponsibleForProjectRequest(odUoResponsibleForProjectRequest_);¤						}¤						List<OGVLinksDAO> availableLinks = OGVLinksManager.Factory.get(spaceKey_).getOgvLinks("ogv");¤						List<OGVLinksDAO> linksToAdd = new ArrayList<OGVLinksDAO>(); ¤						List<OGVLinksDAO> linksToRemove = new ArrayList<OGVLinksDAO>(); ¤						for(OGVLinksDAO link : availableLinks){¤							if(ogvList_ != null && responsible_ != null){¤								if(ogvList_.contains(" " + link.getId() + " ")){¤									if(!responsible_.equals(link.getLogin())){¤										link.setLogin(responsible_);¤										link.setPage(ContainerManager.Factory.get().getPageManager().getPage(link.getId()));¤										linksToAdd.add(link);¤									}¤								}else if(responsible_.equals(link.getLogin()) && !ogvList_.contains(" " + link.getId() + " ")){¤									link.setLogin(null);¤									linksToRemove.add(link);¤								}¤							}¤							if(odUoResponsible_ != null && odUoOgvList_ != null){¤								if(odUoOgvList_.contains(" " + link.getId() + " ")){¤									if(!odUoResponsible_.equals(link.getLoginOdUoUser())){¤										link.setLoginOdUoUser(odUoResponsible_);¤										link.setPage(ContainerManager.Factory.get().getPageManager().getPage(link.getId()));¤										linksToAdd.add(link);¤									}¤								}else if(odUoResponsible_.equals(link.getLoginOdUoUser()) && !odUoOgvList_.contains(" " + link.getId() + " ")){¤									link.setLoginOdUoUser(null);¤									linksToRemove.add(link);¤								}¤							}¤							if(odUoResponsibleForProjectRequest_ != null && odUoForProjectRequestOgvList_ != null){¤								if(odUoForProjectRequestOgvList_.contains(" " + link.getId() + " ")){¤									if(!odUoResponsibleForProjectRequest_.equals(link.getLoginOdUoUserForProjectRequest())){¤										link.setLoginOdUoUserForProjectRequest(odUoResponsibleForProjectRequest_);¤										link.setPage(ContainerManager.Factory.get().getPageManager().getPage(link.getId()));¤										linksToAdd.add(link);¤									}¤								}else if(odUoResponsibleForProjectRequest_.equals(link.getLoginOdUoUserForProjectRequest()) && !odUoForProjectRequestOgvList_.contains(" " + link.getId() + " ")){¤									link.setLoginOdUoUserForProjectRequest(null);¤									linksToRemove.add(link);¤								}¤							}¤						}¤						OGVLinksManager.Factory.get(spaceKey_).doAdd(linksToAdd);¤						OGVLinksManager.Factory.get(spaceKey_).doRemove(linksToRemove);¤					}¤				}¤			}	¤			return SUCCESS;¤		} catch (Exception ex) {¤			return ERROR;¤		}¤	}¤¤	@Override¤	public String execute() throws Exception {¤		// TODO Auto-generated method stub¤		return SUCCESS;¤	}¤¤	private String uvsGroupWhoTransferDocsToUO_ = null;¤	public String getUvsGroupWhoTransferDocsToUO() {¤		return uvsGroupWhoTransferDocsToUO_;¤	}¤	public void setUvsGroupWhoTransferDocsToUO(String uvsGroup) {¤		uvsGroupWhoTransferDocsToUO_ = uvsGroup;¤	}¤¤	private String docsAcceptorsInUO_ = null;¤	public String getDocsAcceptorsInUO() {¤		return docsAcceptorsInUO_;¤	}¤	public void setDocsAcceptorsInUO(String docsAcceptorsInUO) {¤		docsAcceptorsInUO_ = docsAcceptorsInUO;¤	}¤¤	private String queryPostersGroupInUO_ = null;¤	public String getQueryPostersGroupInUO() {¤		return queryPostersGroupInUO_;¤	}¤	public void setQueryPostersGroupInUO(String queryPostersGroupInUO) {¤		queryPostersGroupInUO_ = queryPostersGroupInUO;¤	}¤¤	private String gardocUoDocPosters_;¤	public String getGardocUoDocPosters() {¤		return gardocUoDocPosters_;¤	}¤	public void setGardocUoDocPosters(String gardocUoDocPosters) {¤		gardocUoDocPosters_ = gardocUoDocPosters;¤	}¤	¤	private String projectManagersGroupsInOdUo_;¤	public String getProjectManagersGroupsInOdUo() {¤		return projectManagersGroupsInOdUo_;¤	}¤	public void setProjectManagersGroupsInOdUo(String projectManagersGroupsInOdUo) {¤		projectManagersGroupsInOdUo_ = projectManagersGroupsInOdUo;¤	}¤¤	//#UC END# *4C3F05E80307_CUSTOM_METHODS_AND_DATA*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"WikiPageID (wiki)"
		    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/DPOUVSSpaceConfig|4C3F05E80307
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (wiki)"
		    value      	"wiki")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"20609447970"))
	    quid       	"4C3F05E80307"
	    documentation 	
|занимается конфигурированием "документной" функциональности, разной в каждом спэйсе
	    
	    stereotype 	"KActionPlugin"
	    superclasses 	(list inheritance_relationship_list
		(object Inheritance_Relationship
		    quid       	"4C3F06DF03BA"
		    supplier   	"Logical View::MDProcess::ConfluenceMDChange::RequestSupport::AbstractMdcSpaceConfigAction"
		    quidu      	"49F6C9D50375"))
	    language   	"MDA Generator")
	(object Class "DocCardXPlugin"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"WikiPageID (wiki)"
		    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/DocCardXPlugin|4C3F07400293
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (wiki)"
		    value      	"wiki")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"20609449241"))
	    quid       	"4C3F07400293"
	    documentation 	"содержит функциональность связанную с документами, реализованную c помощью технологии XWork"
	    stereotype 	"KXWorkPlugin"
	    language   	"MDA Generator"
	    nestedClasses 	(list nestedClasses
		(object Class "DocCardXPackage"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"WikiPageID (wiki)"
			    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/DocCardXPlugin/DocCardXPackage|4C3F0795012B
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"SourceType (wiki)"
			    value      	"wiki")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"20609450073")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"NESTED GENERATED WikiPageID (wiki)"
			    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/DocCardXPlugin/DocCardXPackage/SearchRepeatsWithLucene|4E78793F0353::4E78793F0353
			    )))
		    quid       	"4C3F0795012B"
		    documentation 	"XWork контейнер для экшанов"
		    stereotype 	"XPackage"
		    superclasses 	(list inheritance_relationship_list
			(object Inheritance_Relationship
			    quid       	"4C3F07B6023E"
			    supplier   	"Logical View::external::JavaConfluence::ConfluencePlugins::XWork::pages"
			    quidu      	"477DDB6001CD"))
		    nestedClasses 	(list nestedClasses
			(object Class "DPOUVSSpaceConfig"
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"AbstarctOperation"
				    value      	"regular")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"IsNative"
				    value      	"false")
				(object Attribute
				    tool       	"MDA Generator User Properties"
				    name       	"interceptor"
				    value      	"defaultStack")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"WikiPageID (wiki)"
				    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/DocCardXPlugin/DocCardXPackage/DPOUVSSpaceConfig|4C3F07FC0353
				    ))
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"SourceType (wiki)"
				    value      	"wiki")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ElementCreationOrder"
				    value      	"20609450975"))
			    quid       	"4C3F07FC0353"
			    documentation 	"экшн для отрисовки настроек ДПО УВС спейса "
			    stereotype 	"XAction"
			    used_nodes 	(list uses_relationship_list
				(object Uses_Relationship
				    attributes 	(list Attribute_Set
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"AbstarctOperation"
					    value      	"regular")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"IsNative"
					    value      	"false")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"ElementCreationOrder"
					    value      	"20609483396"))
				    quid       	"4C3F082C01ED"
				    stereotype 	"call"
				    supplier   	"Logical View::MDProcess::DocCardChange::DocCardSupport::DPOUVSSpaceConfig"
				    quidu      	"4C3F05E80307"))
			    class_attributes 	(list class_attribute_list
				(object ClassAttribute "success"
				    attributes 	(list Attribute_Set
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"AbstarctOperation"
					    value      	"regular")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"ValueInitialized"
					    value      	"true")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"IsNative"
					    value      	"false")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"ElementCreationOrder"
					    value      	"20609452033"))
				    quid       	"4C401DDF0123"
				    stereotype 	"rawText"
				    exportControl 	"Public"
				    Containment 	"By Value")
				(object ClassAttribute "error"
				    attributes 	(list Attribute_Set
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"AbstarctOperation"
					    value      	"regular")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"ValueInitialized"
					    value      	"true")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"IsNative"
					    value      	"false")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"ElementCreationOrder"
					    value      	"20609480432"))
				    quid       	"4C401DF003DC"
				    stereotype 	"rawText"
				    exportControl 	"Public"
				    Containment 	"By Value")))
			(object Class "DPOUVSSpaceConfigSave"
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"AbstarctOperation"
				    value      	"regular")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"IsNative"
				    value      	"false")
				(object Attribute
				    tool       	"MDA Generator User Properties"
				    name       	"interceptor"
				    value      	"defaultStack")
				(object Attribute
				    tool       	"MDA Generator User Properties"
				    name       	"method"
				    value      	"doAdd")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"WikiPageID (wiki)"
				    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/DocCardXPlugin/DocCardXPackage/DPOUVSSpaceConfigSave|4C3F08160234
				    ))
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"SourceType (wiki)"
				    value      	"wiki")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ElementCreationOrder"
				    value      	"20609485148"))
			    quid       	"4C3F08160234"
			    documentation 	"экшн для сохранения настроек ДПО УВС спейса "
			    stereotype 	"XAction"
			    used_nodes 	(list uses_relationship_list
				(object Uses_Relationship
				    attributes 	(list Attribute_Set
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"AbstarctOperation"
					    value      	"regular")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"IsNative"
					    value      	"false")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"ElementCreationOrder"
					    value      	"20609486158"))
				    quid       	"4C3F08310066"
				    stereotype 	"call"
				    supplier   	"Logical View::MDProcess::DocCardChange::DocCardSupport::DPOUVSSpaceConfig"
				    quidu      	"4C3F05E80307")))
			(object Class "ResponsibleDataLoader"
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"AbstarctOperation"
				    value      	"regular")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"IsNative"
				    value      	"false")
				(object Attribute
				    tool       	"MDA Generator User Properties"
				    name       	"interceptor"
				    value      	"none")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"WikiPageID (wiki)"
				    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/DocCardXPlugin/DocCardXPackage/ResponsibleDataLoader|4C455B14034D
				    ))
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"SourceType (wiki)"
				    value      	"wiki")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ElementCreationOrder"
				    value      	"20609487875"))
			    quid       	"4C455B14034D"
			    documentation 	"экшн для подгрузки ответственных за ОГВ ООД УВС спейса "
			    stereotype 	"XAction"
			    used_nodes 	(list uses_relationship_list
				(object Uses_Relationship
				    attributes 	(list Attribute_Set
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"AbstarctOperation"
					    value      	"regular")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"IsNative"
					    value      	"false")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"ElementCreationOrder"
					    value      	"20609490669"))
				    quid       	"4C455B3502CA"
				    stereotype 	"call"
				    supplier   	"Logical View::MDProcess::DocCardChange::DocCardSupport::ResponsibleDataLoader"
				    quidu      	"4C4558CD02DC"))
			    class_attributes 	(list class_attribute_list
				(object ClassAttribute "success"
				    attributes 	(list Attribute_Set
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"AbstarctOperation"
					    value      	"regular")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"ValueInitialized"
					    value      	"true")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"IsNative"
					    value      	"false")
					(object Attribute
					    tool       	"MDA Generator User Properties"
					    name       	"xml_name"
					    value      	"ConfluencePlugins/AjaxResponse.xml")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"ElementCreationOrder"
					    value      	"20609488827"))
				    quid       	"4C457F6F01A2"
				    stereotype 	"velocity-xml"
				    exportControl 	"Public"
				    Containment 	"By Value")))
			(object Class "CreateOGVFromFile"
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"AbstarctOperation"
				    value      	"regular")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"IsNative"
				    value      	"false")
				(object Attribute
				    tool       	"MDA Generator User Properties"
				    name       	"interceptor"
				    value      	"none")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"WikiPageID (wiki)"
				    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/DocCardXPlugin/DocCardXPackage/CreateOGVFromFile|4C481A15029E
				    ))
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"SourceType (wiki)"
				    value      	"wiki")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ElementCreationOrder"
				    value      	"20609492324"))
			    quid       	"4C481A15029E"
			    documentation 	"создает огв"
			    stereotype 	"XAction"
			    used_nodes 	(list uses_relationship_list
				(object Uses_Relationship
				    attributes 	(list Attribute_Set
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"AbstarctOperation"
					    value      	"regular")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"IsNative"
					    value      	"false")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"ElementCreationOrder"
					    value      	"20609493308"))
				    quid       	"4C481A2F0208"
				    stereotype 	"call"
				    supplier   	"Logical View::MDProcess::DocCardChange::DocCardSupport::CreateOGVFromFile"
				    quidu      	"4C47E3350327")))
			(object Class "CreateSettingsDpoUvs"
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"AbstarctOperation"
				    value      	"regular")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"IsNative"
				    value      	"false")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"WikiPageID (wiki)"
				    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/DocCardXPlugin/DocCardXPackage/CreateSettingsDpoUvs|4C481D2800A5
				    ))
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"SourceType (wiki)"
				    value      	"wiki")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ElementCreationOrder"
				    value      	"20609494963"))
			    quid       	"4C481D2800A5"
			    documentation 	"создание настроек"
			    stereotype 	"XAction"
			    used_nodes 	(list uses_relationship_list
				(object Uses_Relationship
				    attributes 	(list Attribute_Set
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"AbstarctOperation"
					    value      	"regular")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"IsNative"
					    value      	"false")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"ElementCreationOrder"
					    value      	"20609495923"))
				    quid       	"4C481D4403D4"
				    stereotype 	"call"
				    supplier   	"Logical View::MDProcess::DocCardChange::DocCardSupport::CreateSettingsDpoUvs"
				    quidu      	"4C481CD10276")))
			(object Class "CreateUvsQuery"
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"AbstarctOperation"
				    value      	"regular")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"IsNative"
				    value      	"false")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"WikiPageID (wiki)"
				    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/DocCardXPlugin/DocCardXPackage/CreateUvsQuery|4C652D23033C
				    ))
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"SourceType (wiki)"
				    value      	"wiki")
				(object Attribute
				    tool       	"MDA Generator User Properties"
				    name       	"interceptor"
				    value      	"none")
				(object Attribute
				    tool       	"MDA Generator User Properties"
				    name       	"method"
				    value      	"doDefaultWindow")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ElementCreationOrder"
				    value      	"20609497573"))
			    quid       	"4C652D23033C"
			    documentation 	"экшн создания запроса ДПО УВС"
			    stereotype 	"XAction"
			    used_nodes 	(list uses_relationship_list
				(object Uses_Relationship
				    attributes 	(list Attribute_Set
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"AbstarctOperation"
					    value      	"regular")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"IsNative"
					    value      	"false")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"ElementCreationOrder"
					    value      	"20609502296"))
				    quid       	"4C652D50026E"
				    stereotype 	"call"
				    supplier   	"Logical View::MDProcess::DocCardChange::DocCardSupport::CreateUvsQuery"
				    quidu      	"4C652CD603D7"))
			    class_attributes 	(list class_attribute_list
				(object ClassAttribute "success"
				    attributes 	(list Attribute_Set
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"AbstarctOperation"
					    value      	"regular")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"ValueInitialized"
					    value      	"true")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"IsNative"
					    value      	"false")
					(object Attribute
					    tool       	"MDA Generator User Properties"
					    name       	"xml_name"
					    value      	"ConfluencePlugins/AjaxResponse.xml")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"ElementCreationOrder"
					    value      	"20609498582"))
				    quid       	"4C6A6A500060"
				    stereotype 	"velocity-xml"
				    exportControl 	"Public"
				    Containment 	"By Value")
				(object ClassAttribute "error"
				    attributes 	(list Attribute_Set
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"AbstarctOperation"
					    value      	"regular")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"ValueInitialized"
					    value      	"true")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"IsNative"
					    value      	"false")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"ElementCreationOrder"
					    value      	"20609500500"))
				    quid       	"4C6A6A9A01AB"
				    stereotype 	"rawText"
				    exportControl 	"Public"
				    Containment 	"By Value")))
			(object Class "DoCreateUvsQuery"
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"AbstarctOperation"
				    value      	"regular")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"IsNative"
				    value      	"false")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"WikiPageID (wiki)"
				    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/DocCardXPlugin/DocCardXPackage/DoCreateUvsQuery|4C652EC60067
				    ))
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"SourceType (wiki)"
				    value      	"wiki")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ElementCreationOrder"
				    value      	"20609503944")
				(object Attribute
				    tool       	"MDA Generator User Properties"
				    name       	"interceptor"
				    value      	"garOptimizedStack"))
			    quid       	"4C652EC60067"
			    documentation 	"подтвердить создание новой заявки"
			    stereotype 	"XAction"
			    used_nodes 	(list uses_relationship_list
				(object Uses_Relationship
				    attributes 	(list Attribute_Set
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"AbstarctOperation"
					    value      	"regular")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"IsNative"
					    value      	"false")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"ElementCreationOrder"
					    value      	"20609505878"))
				    quid       	"4C652F0100B6"
				    stereotype 	"call"
				    supplier   	"Logical View::MDProcess::DocCardChange::DocCardSupport::CreateUvsQuery"
				    quidu      	"4C652CD603D7")))
			(object Class "EditUvsQuery"
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"AbstarctOperation"
				    value      	"regular")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"IsNative"
				    value      	"false")
				(object Attribute
				    tool       	"MDA Generator User Properties"
				    name       	"interceptor"
				    value      	"defaultStack")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"WikiPageID (wiki)"
				    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/DocCardXPlugin/DocCardXPackage/EditUvsQuery|4C6E6C2D03B0
				    ))
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"SourceType (wiki)"
				    value      	"wiki")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ElementCreationOrder"
				    value      	"20609507587"))
			    quid       	"4C6E6C2D03B0"
			    documentation 	"экшн для редактирования запросов в ДПО УВС"
			    stereotype 	"XAction"
			    used_nodes 	(list uses_relationship_list
				(object Uses_Relationship
				    attributes 	(list Attribute_Set
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"AbstarctOperation"
					    value      	"regular")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"IsNative"
					    value      	"false")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"ElementCreationOrder"
					    value      	"20609510325"))
				    quid       	"4C6E6C4A022E"
				    stereotype 	"call"
				    supplier   	"Logical View::MDProcess::DocCardChange::DocCardSupport::EditUvsQuery"
				    quidu      	"4C6E6BA901D1"))
			    class_attributes 	(list class_attribute_list
				(object ClassAttribute "success"
				    attributes 	(list Attribute_Set
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"AbstarctOperation"
					    value      	"regular")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"ValueInitialized"
					    value      	"true")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"IsNative"
					    value      	"false")
					(object Attribute
					    tool       	"MDA Generator User Properties"
					    name       	"xml_name"
					    value      	"ConfluencePlugins/AjaxResponse.xml")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"ElementCreationOrder"
					    value      	"20609508521"))
				    quid       	"4C6E6C3F02D7"
				    stereotype 	"velocity-xml"
				    exportControl 	"Public"
				    Containment 	"By Value")))
			(object Class "CreateUvsQueryWithoutDocCard"
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"AbstarctOperation"
				    value      	"regular")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"IsNative"
				    value      	"false")
				(object Attribute
				    tool       	"MDA Generator User Properties"
				    name       	"interceptor"
				    value      	"none")
				(object Attribute
				    tool       	"MDA Generator User Properties"
				    name       	"method"
				    value      	"doCreateUvsQueryWithoutDocCard")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"WikiPageID (wiki)"
				    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/DocCardXPlugin/DocCardXPackage/CreateUvsQueryWithoutDocCard|4C74FCB20062
				    ))
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"SourceType (wiki)"
				    value      	"wiki")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ElementCreationOrder"
				    value      	"20609512025"))
			    quid       	"4C74FCB20062"
			    documentation 	"карточка есть, запроса нет"
			    stereotype 	"XAction"
			    used_nodes 	(list uses_relationship_list
				(object Uses_Relationship
				    attributes 	(list Attribute_Set
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"AbstarctOperation"
					    value      	"regular")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"IsNative"
					    value      	"false")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"ElementCreationOrder"
					    value      	"20609513968"))
				    quid       	"4C74FCF7025D"
				    stereotype 	"call"
				    supplier   	"Logical View::MDProcess::DocCardChange::DocCardSupport::CreateUvsQuery"
				    quidu      	"4C652CD603D7")))
			(object Class "SearchUvsQuery"
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"AbstarctOperation"
				    value      	"regular")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"IsNative"
				    value      	"false")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"WikiPageID (wiki)"
				    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/DocCardXPlugin/DocCardXPackage/SearchUvsQuery|4C7B612902D7
				    ))
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"SourceType (wiki)"
				    value      	"wiki")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ElementCreationOrder"
				    value      	"20609515641")
				(object Attribute
				    tool       	"MDA Generator User Properties"
				    name       	"interceptor"
				    value      	"none"))
			    quid       	"4C7B612902D7"
			    documentation 	"экшн для поиска запросов в ДПО УВС"
			    stereotype 	"XAction"
			    used_nodes 	(list uses_relationship_list
				(object Uses_Relationship
				    attributes 	(list Attribute_Set
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"AbstarctOperation"
					    value      	"regular")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"IsNative"
					    value      	"false")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"ElementCreationOrder"
					    value      	"20609518496"))
				    quid       	"4C7B616A0339"
				    stereotype 	"call"
				    supplier   	"Logical View::MDProcess::DocCardChange::DocCardSupport::SearchUvsQuery"
				    quidu      	"4C7B5C0402FD")))
			(object Class "EditDocCard"
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"AbstarctOperation"
				    value      	"regular")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"IsNative"
				    value      	"false")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"WikiPageID (wiki)"
				    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/DocCardXPlugin/DocCardXPackage/EditDocCard|4C7F6C98039B
				    ))
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"SourceType (wiki)"
				    value      	"wiki")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ElementCreationOrder"
				    value      	"20609520170"))
			    quid       	"4C7F6C98039B"
			    documentation 	"экшн для редактирования карточки"
			    stereotype 	"XAction"
			    used_nodes 	(list uses_relationship_list
				(object Uses_Relationship
				    attributes 	(list Attribute_Set
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"AbstarctOperation"
					    value      	"regular")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"IsNative"
					    value      	"false")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"ElementCreationOrder"
					    value      	"20609522930"))
				    quid       	"4C7F6CD90006"
				    stereotype 	"call"
				    supplier   	"Logical View::MDProcess::DocCardChange::DocCardSupport::EditDocCard"
				    quidu      	"4C7F6BDB0380"))
			    class_attributes 	(list class_attribute_list
				(object ClassAttribute "success"
				    attributes 	(list Attribute_Set
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"AbstarctOperation"
					    value      	"regular")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"ValueInitialized"
					    value      	"true")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"IsNative"
					    value      	"false")
					(object Attribute
					    tool       	"MDA Generator User Properties"
					    name       	"xml_name"
					    value      	"ConfluencePlugins/AjaxResponse.xml")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"ElementCreationOrder"
					    value      	"20609521080"))
				    quid       	"4C7F6CC301E5"
				    stereotype 	"velocity-xml"
				    exportControl 	"Public"
				    Containment 	"By Value")))
			(object Class "RemoveDocCard"
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ElementCreationOrder"
				    value      	"9831202313")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"AbstarctOperation"
				    value      	"regular")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"IsNative"
				    value      	"false")
				(object Attribute
				    tool       	"MDA Generator User Properties"
				    name       	"interceptor"
				    value      	"none")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"WikiPageID (wiki)"
				    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/DocCardXPlugin/DocCardXPackage/RemoveDocCard|4D00976A02F2
				    ))
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"SourceType (wiki)"
				    value      	"wiki")
				(object Attribute
				    tool       	"MDA Generator User Properties"
				    name       	"method"
				    value      	"doRemove"))
			    quid       	"4D00976A02F2"
			    documentation 	"экшн для удаления карточки"
			    stereotype 	"XAction"
			    used_nodes 	(list uses_relationship_list
				(object Uses_Relationship
				    attributes 	(list Attribute_Set
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"ElementCreationOrder"
					    value      	"9853728988")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"AbstarctOperation"
					    value      	"regular")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"IsNative"
					    value      	"false"))
				    quid       	"4D0097810113"
				    stereotype 	"call"
				    supplier   	"Logical View::MDProcess::DocCardChange::DocCardSupport::RemoveDocCard"
				    quidu      	"4D0095AC00E6"))
			    class_attributes 	(list class_attribute_list
				(object ClassAttribute "success"
				    attributes 	(list Attribute_Set
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"ElementCreationOrder"
					    value      	"21811322075")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"AbstarctOperation"
					    value      	"regular")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"ValueInitialized"
					    value      	"true")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"IsNative"
					    value      	"false")
					(object Attribute
					    tool       	"MDA Generator User Properties"
					    name       	"params"
					    value      	"${redirectUrl}"))
				    quid       	"4D00C63303CD"
				    stereotype 	"redirect"
				    exportControl 	"Public"
				    Containment 	"By Value")))
			(object Class "RemoveUvsQuery"
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ElementCreationOrder"
				    value      	"15184922207")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"AbstarctOperation"
				    value      	"regular")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"IsNative"
				    value      	"false")
				(object Attribute
				    tool       	"MDA Generator User Properties"
				    name       	"interceptor"
				    value      	"none")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"WikiPageID (wiki)"
				    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/DocCardXPlugin/DocCardXPackage/RemoveUvsQuery|4D00AC53011B
				    ))
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"SourceType (wiki)"
				    value      	"wiki")
				(object Attribute
				    tool       	"MDA Generator User Properties"
				    name       	"method"
				    value      	"doRemove"))
			    quid       	"4D00AC53011B"
			    documentation 	"удаление запроса в Гардоке"
			    stereotype 	"XAction"
			    used_nodes 	(list uses_relationship_list
				(object Uses_Relationship
				    attributes 	(list Attribute_Set
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"ElementCreationOrder"
					    value      	"15215062354")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"AbstarctOperation"
					    value      	"regular")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"IsNative"
					    value      	"false"))
				    quid       	"4D00AC71019F"
				    stereotype 	"call"
				    supplier   	"Logical View::MDProcess::DocCardChange::DocCardSupport::RemoveUvsQuery"
				    quidu      	"4D00ABF5021A"))
			    class_attributes 	(list class_attribute_list
				(object ClassAttribute "success"
				    attributes 	(list Attribute_Set
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"ElementCreationOrder"
					    value      	"21857890135")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"AbstarctOperation"
					    value      	"regular")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"ValueInitialized"
					    value      	"true")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"IsNative"
					    value      	"false")
					(object Attribute
					    tool       	"MDA Generator User Properties"
					    name       	"params"
					    value      	"${redirectUrl}"))
				    quid       	"4D00C66201E8"
				    stereotype 	"redirect"
				    exportControl 	"Public"
				    Containment 	"By Value")))
			(object Class "MoveDocCard"
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ElementCreationOrder"
				    value      	"23337655137")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"AbstarctOperation"
				    value      	"regular")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"IsNative"
				    value      	"false")
				(object Attribute
				    tool       	"MDA Generator User Properties"
				    name       	"interceptor"
				    value      	"none")
				(object Attribute
				    tool       	"MDA Generator User Properties"
				    name       	"method"
				    value      	"doMove")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"WikiPageID (wiki)"
				    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/DocCardXPlugin/DocCardXPackage/MoveDocCard|4D021D0500BF
				    ))
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"SourceType (wiki)"
				    value      	"wiki"))
			    quid       	"4D021D0500BF"
			    documentation 	"экшн перемещения запроса и удаления карточки"
			    stereotype 	"XAction"
			    used_nodes 	(list uses_relationship_list
				(object Uses_Relationship
				    attributes 	(list Attribute_Set
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"ElementCreationOrder"
					    value      	"23388631451")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"AbstarctOperation"
					    value      	"regular")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"IsNative"
					    value      	"false"))
				    quid       	"4D021D3800A0"
				    stereotype 	"call"
				    supplier   	"Logical View::MDProcess::DocCardChange::DocCardSupport::EditDocCard"
				    quidu      	"4C7F6BDB0380"))
			    class_attributes 	(list class_attribute_list
				(object ClassAttribute "success"
				    attributes 	(list Attribute_Set
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"ElementCreationOrder"
					    value      	"23398895968")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"AbstarctOperation"
					    value      	"regular")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"ValueInitialized"
					    value      	"true")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"IsNative"
					    value      	"false")
					(object Attribute
					    tool       	"MDA Generator User Properties"
					    name       	"xml_name"
					    value      	"ConfluencePlugins/AjaxResponse2.xml"))
				    quid       	"4D021D42019A"
				    stereotype 	"velocity-xml"
				    exportControl 	"Public"
				    Containment 	"By Value")))
			(object Class "SearchDocIssuers"
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ElementCreationOrder"
				    value      	"7427013168")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"AbstarctOperation"
				    value      	"regular")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"IsNative"
				    value      	"false")
				(object Attribute
				    tool       	"MDA Generator User Properties"
				    name       	"interceptor"
				    value      	"none")
				(object Attribute
				    tool       	"MDA Generator User Properties"
				    name       	"method"
				    value      	"doQuickSearch")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"WikiPageID (wiki)"
				    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/DocCardXPlugin/DocCardXPackage/SearchDocIssuers|4D09C64F0039
				    ))
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"SourceType (wiki)"
				    value      	"wiki"))
			    quid       	"4D09C64F0039"
			    documentation 	"быстрый поиск эмитентов карточек"
			    stereotype 	"XAction"
			    used_nodes 	(list uses_relationship_list
				(object Uses_Relationship
				    attributes 	(list Attribute_Set
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"ElementCreationOrder"
					    value      	"7582497898")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"AbstarctOperation"
					    value      	"regular")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"IsNative"
					    value      	"false"))
				    quid       	"4D09C6EA01FF"
				    stereotype 	"call"
				    supplier   	"Logical View::MDProcess::DocCardChange::DocCardSupport::SearchDocIssuers"
				    quidu      	"4D09C6B90102"))
			    class_attributes 	(list class_attribute_list
				(object ClassAttribute "success"
				    attributes 	(list Attribute_Set
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"ElementCreationOrder"
					    value      	"7643683069")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"AbstarctOperation"
					    value      	"regular")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"ValueInitialized"
					    value      	"true")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"IsNative"
					    value      	"false")
					(object Attribute
					    tool       	"MDA Generator User Properties"
					    name       	"xml_name"
					    value      	"ConfluencePlugins/AjaxResponse2.xml"))
				    quid       	"4D09C7270297"
				    stereotype 	"velocity-xml"
				    exportControl 	"Public"
				    Containment 	"By Value")
				(object ClassAttribute "error"
				    attributes 	(list Attribute_Set
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"ElementCreationOrder"
					    value      	"7659962469")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"AbstarctOperation"
					    value      	"regular")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"ValueInitialized"
					    value      	"true")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"IsNative"
					    value      	"false"))
				    quid       	"4D09C73703B1"
				    stereotype 	"rawText"
				    exportControl 	"Public"
				    Containment 	"By Value")))
			(object Class "OpenWindowChooseDocCard"
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ElementCreationOrder"
				    value      	"23949557379")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"AbstarctOperation"
				    value      	"regular")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"IsNative"
				    value      	"false")
				(object Attribute
				    tool       	"MDA Generator User Properties"
				    name       	"interceptor"
				    value      	"none")
				(object Attribute
				    tool       	"MDA Generator User Properties"
				    name       	"method"
				    value      	"openWindowChooseDocCard"))
			    quid       	"4D109ED30339"
			    documentation 	"выбор карточки для переноса запроса"
			    stereotype 	"XAction"
			    used_nodes 	(list uses_relationship_list
				(object Uses_Relationship
				    attributes 	(list Attribute_Set
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"ElementCreationOrder"
					    value      	"24007771902")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"AbstarctOperation"
					    value      	"regular")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"IsNative"
					    value      	"false"))
				    quid       	"4D109F0E001B"
				    stereotype 	"call"
				    supplier   	"Logical View::MDProcess::DocCardChange::DocCardSupport::EditDocCard"
				    quidu      	"4C7F6BDB0380")))
			(object Class "CreateUvsQueryMonthlyReport"
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ElementCreationOrder"
				    value      	"12098855402")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"AbstarctOperation"
				    value      	"regular")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"IsNative"
				    value      	"false")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"WikiPageID (wiki)"
				    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/DocCardXPlugin/DocCardXPackage/CreateUvsQueryMonthlyReport|4D3D412E036F
				    ))
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"SourceType (wiki)"
				    value      	"wiki")
				(object Attribute
				    tool       	"MDA Generator User Properties"
				    name       	"interceptor"
				    value      	"none")
				(object Attribute
				    tool       	"MDA Generator User Properties"
				    name       	"method"
				    value      	"doDefault"))
			    quid       	"4D3D412E036F"
			    documentation 	"экшн отображения формы для создания отчета по запросам на документы"
			    stereotype 	"XAction"
			    used_nodes 	(list uses_relationship_list
				(object Uses_Relationship
				    attributes 	(list Attribute_Set
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"ElementCreationOrder"
					    value      	"12189864421")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"AbstarctOperation"
					    value      	"regular")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"IsNative"
					    value      	"false"))
				    quid       	"4D3D41890362"
				    stereotype 	"call"
				    supplier   	"Logical View::MDProcess::DocCardChange::DocCardSupport::CreateUvsQueryMonthlyReport"
				    quidu      	"4D3D3600026A"))
			    class_attributes 	(list class_attribute_list
				(object ClassAttribute "success"
				    attributes 	(list Attribute_Set
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"ElementCreationOrder"
					    value      	"10747114473")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"AbstarctOperation"
					    value      	"regular")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"ValueInitialized"
					    value      	"true")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"IsNative"
					    value      	"false")
					(object Attribute
					    tool       	"MDA Generator User Properties"
					    name       	"xml_name"
					    value      	"ConfluencePlugins/AjaxResponse2.xml"))
				    quid       	"4D41306701D4"
				    stereotype 	"velocity-xml"
				    exportControl 	"Public"
				    Containment 	"By Value")))
			(object Class "DoCreateUvsQueryMonthlyReport"
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ElementCreationOrder"
				    value      	"13055922417")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"AbstarctOperation"
				    value      	"regular")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"IsNative"
				    value      	"false")
				(object Attribute
				    tool       	"MDA Generator User Properties"
				    name       	"interceptor"
				    value      	"none")
				(object Attribute
				    tool       	"MDA Generator User Properties"
				    name       	"method"
				    value      	"doCreate")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"WikiPageID (wiki)"
				    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/DocCardXPlugin/DocCardXPackage/DoCreateUvsQueryMonthlyReport|4D3D44EB02DD
				    ))
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"SourceType (wiki)"
				    value      	"wiki"))
			    quid       	"4D3D44EB02DD"
			    documentation 	"экшн создания отчета по запросам на документы"
			    stereotype 	"XAction"
			    used_nodes 	(list uses_relationship_list
				(object Uses_Relationship
				    attributes 	(list Attribute_Set
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"ElementCreationOrder"
					    value      	"13119537739")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"AbstarctOperation"
					    value      	"regular")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"IsNative"
					    value      	"false"))
				    quid       	"4D3D452B014C"
				    stereotype 	"call"
				    supplier   	"Logical View::MDProcess::DocCardChange::DocCardSupport::CreateUvsQueryMonthlyReport"
				    quidu      	"4D3D3600026A"))
			    class_attributes 	(list class_attribute_list
				(object ClassAttribute "success"
				    attributes 	(list Attribute_Set
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"ElementCreationOrder"
					    value      	"13309559758")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"AbstarctOperation"
					    value      	"regular")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"ValueInitialized"
					    value      	"true")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"IsNative"
					    value      	"false")
					(object Attribute
					    tool       	"MDA Generator User Properties"
					    name       	"params"
					    value      	"/pages/viewpage.action?pageId=${pageId}"))
				    quid       	"4D3D45E90124"
				    stereotype 	"redirect"
				    exportControl 	"Public"
				    Containment 	"By Value")))
			(object Class "SearchSiteAndSuffixFromDocIssuer"
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ElementCreationOrder"
				    value      	"18479349135")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"AbstarctOperation"
				    value      	"regular")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"IsNative"
				    value      	"false")
				(object Attribute
				    tool       	"MDA Generator User Properties"
				    name       	"interceptor"
				    value      	"none")
				(object Attribute
				    tool       	"MDA Generator User Properties"
				    name       	"method"
				    value      	"doSearchSiteAndSuffix")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"WikiPageID (wiki)"
				    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/DocCardXPlugin/DocCardXPackage/SearchSiteAndSuffixFromDocIssuer|4DA575B000FA
				    ))
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"SourceType (wiki)"
				    value      	"wiki"))
			    quid       	"4DA575B000FA"
			    documentation 	"получить сайт и суффикс из ОГВ"
			    stereotype 	"XAction"
			    used_nodes 	(list uses_relationship_list
				(object Uses_Relationship
				    attributes 	(list Attribute_Set
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"ElementCreationOrder"
					    value      	"18535413759")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"AbstarctOperation"
					    value      	"regular")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"IsNative"
					    value      	"false"))
				    quid       	"4DA575E8013E"
				    stereotype 	"call"
				    supplier   	"Logical View::MDProcess::DocCardChange::DocCardSupport::SearchDocIssuers"
				    quidu      	"4D09C6B90102"))
			    class_attributes 	(list class_attribute_list
				(object ClassAttribute "success"
				    attributes 	(list Attribute_Set
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"ElementCreationOrder"
					    value      	"18548200838")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"AbstarctOperation"
					    value      	"regular")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"ValueInitialized"
					    value      	"true")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"IsNative"
					    value      	"false")
					(object Attribute
					    tool       	"MDA Generator User Properties"
					    name       	"xml_name"
					    value      	"ConfluencePlugins/AjaxResponse2.xml"))
				    quid       	"4DA575F50057"
				    stereotype 	"velocity-xml"
				    exportControl 	"Public"
				    Containment 	"By Value")
				(object ClassAttribute "error"
				    attributes 	(list Attribute_Set
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"ElementCreationOrder"
					    value      	"18558085267")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"AbstarctOperation"
					    value      	"regular")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"ValueInitialized"
					    value      	"true")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"IsNative"
					    value      	"false"))
				    quid       	"4DA575FE03C6"
				    stereotype 	"rawText"
				    exportControl 	"Public"
				    Containment 	"By Value")))
			(object Class "SearchFieldsInDepository"
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ElementCreationOrder"
				    value      	"19275714735")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"AbstarctOperation"
				    value      	"regular")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"IsNative"
				    value      	"false")
				(object Attribute
				    tool       	"MDA Generator User Properties"
				    name       	"interceptor"
				    value      	"none")
				(object Attribute
				    tool       	"MDA Generator User Properties"
				    name       	"method"
				    value      	"doSearchFieldsInDepository")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"WikiPageID (wiki)"
				    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/DocCardXPlugin/DocCardXPackage/SearchFieldsInDepository|4DD508D2015F
				    ))
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"SourceType (wiki)"
				    value      	"wiki"))
			    quid       	"4DD508D2015F"
			    documentation 	"извлечение полей из строчки местоположения файла"
			    stereotype 	"XAction"
			    used_nodes 	(list uses_relationship_list
				(object Uses_Relationship
				    attributes 	(list Attribute_Set
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"ElementCreationOrder"
					    value      	"19308459129")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"AbstarctOperation"
					    value      	"regular")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"IsNative"
					    value      	"false"))
				    quid       	"4DD508F30053"
				    stereotype 	"call"
				    supplier   	"Logical View::MDProcess::DocCardChange::DocCardSupport::SearchFiledsInDepositoryString"
				    quidu      	"4DD50866035F"))
			    class_attributes 	(list class_attribute_list
				(object ClassAttribute "success"
				    attributes 	(list Attribute_Set
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"ElementCreationOrder"
					    value      	"19375828971")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"AbstarctOperation"
					    value      	"regular")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"ValueInitialized"
					    value      	"true")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"IsNative"
					    value      	"false")
					(object Attribute
					    tool       	"MDA Generator User Properties"
					    name       	"xml_name"
					    value      	"ConfluencePlugins/AjaxResponse2.xml"))
				    quid       	"4DD50936019B"
				    stereotype 	"velocity-xml"
				    exportControl 	"Public"
				    Containment 	"By Value")))
			(object Class "SearchGarDocSources"
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ElementCreationOrder"
				    value      	"10696637907")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"AbstarctOperation"
				    value      	"regular")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"IsNative"
				    value      	"false")
				(object Attribute
				    tool       	"MDA Generator User Properties"
				    name       	"interceptor"
				    value      	"none")
				(object Attribute
				    tool       	"MDA Generator User Properties"
				    name       	"method"
				    value      	"doQuickSearchGarDocSources")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"WikiPageID (wiki)"
				    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/DocCardXPlugin/DocCardXPackage/SearchGarDocSources|4DF08881006E
				    ))
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"SourceType (wiki)"
				    value      	"wiki"))
			    quid       	"4DF08881006E"
			    documentation 	"поиск источников карточек"
			    stereotype 	"XAction"
			    used_nodes 	(list uses_relationship_list
				(object Uses_Relationship
				    attributes 	(list Attribute_Set
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"ElementCreationOrder"
					    value      	"10771232414")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"AbstarctOperation"
					    value      	"regular")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"IsNative"
					    value      	"false"))
				    quid       	"4DF088CB0329"
				    stereotype 	"call"
				    supplier   	"Logical View::MDProcess::DocCardChange::DocCardSupport::SearchDocIssuers"
				    quidu      	"4D09C6B90102"))
			    class_attributes 	(list class_attribute_list
				(object ClassAttribute "success"
				    attributes 	(list Attribute_Set
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"ElementCreationOrder"
					    value      	"10748592815")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"AbstarctOperation"
					    value      	"regular")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"ValueInitialized"
					    value      	"true")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"IsNative"
					    value      	"false")
					(object Attribute
					    tool       	"MDA Generator User Properties"
					    name       	"xml_name"
					    value      	"ConfluencePlugins/AjaxResponse2.xml"))
				    quid       	"4DF088B500A0"
				    stereotype 	"velocity-xml"
				    exportControl 	"Public"
				    Containment 	"By Value")
				(object ClassAttribute "error"
				    attributes 	(list Attribute_Set
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"ElementCreationOrder"
					    value      	"10761024055")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"AbstarctOperation"
					    value      	"regular")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"ValueInitialized"
					    value      	"true")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"IsNative"
					    value      	"false"))
				    quid       	"4DF088C1024A"
				    stereotype 	"rawText"
				    exportControl 	"Public"
				    Containment 	"By Value")))
			(object Class "RemoveExternalAuthor"
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ElementCreationOrder"
				    value      	"22129965300")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"AbstarctOperation"
				    value      	"regular")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"IsNative"
				    value      	"false")
				(object Attribute
				    tool       	"MDA Generator User Properties"
				    name       	"interceptor"
				    value      	"none")
				(object Attribute
				    tool       	"MDA Generator User Properties"
				    name       	"method"
				    value      	"doRemoveExternalAuthor")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"WikiPageID (wiki)"
				    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/DocCardXPlugin/DocCardXPackage/RemoveExternalAuthor|4E7C660903D3
				    ))
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"SourceType (wiki)"
				    value      	"wiki"))
			    quid       	"4E7C660903D3"
			    documentation 	"удаление внешнего автора"
			    stereotype 	"XAction"
			    used_nodes 	(list uses_relationship_list
				(object Uses_Relationship
				    attributes 	(list Attribute_Set
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"ElementCreationOrder"
					    value      	"22172997668")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"AbstarctOperation"
					    value      	"regular")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"IsNative"
					    value      	"false"))
				    quid       	"4E7C66350000"
				    stereotype 	"call"
				    supplier   	"Logical View::MDProcess::DocCardChange::DocCardSupport::EditUvsQuery"
				    quidu      	"4C6E6BA901D1"))
			    class_attributes 	(list class_attribute_list
				(object ClassAttribute "success"
				    attributes 	(list Attribute_Set
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"ElementCreationOrder"
					    value      	"22181560980")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"AbstarctOperation"
					    value      	"regular")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"ValueInitialized"
					    value      	"true")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"IsNative"
					    value      	"false")
					(object Attribute
					    tool       	"MDA Generator User Properties"
					    name       	"xml_name"
					    value      	"ConfluencePlugins/AjaxResponse.xml"))
				    quid       	"4E7C663D0224"
				    stereotype 	"velocity-xml"
				    exportControl 	"Public"
				    Containment 	"By Value")))
			(object Class "MoveUvsQueryToAnotherDocCard"
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ElementCreationOrder"
				    value      	"1327302446459522")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"AbstarctOperation"
				    value      	"regular")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"IsNative"
				    value      	"false")
				(object Attribute
				    tool       	"MDA Generator User Properties"
				    name       	"interceptor"
				    value      	"none")
				(object Attribute
				    tool       	"MDA Generator User Properties"
				    name       	"method"
				    value      	"doMoveUvsQuery")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"WikiPageID (wiki)"
				    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/DocCardXPlugin/DocCardXPackage/MoveUvsQueryToAnotherDocCard|4F1D072E01C5
				    ))
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"SourceType (wiki)"
				    value      	"wiki"))
			    quid       	"4F1D072E01C5"
			    documentation 	"перенос запроса в другую карточку"
			    stereotype 	"XAction"
			    used_nodes 	(list uses_relationship_list
				(object Uses_Relationship
				    attributes 	(list Attribute_Set
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"ElementCreationOrder"
					    value      	"1327302490564046")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"AbstarctOperation"
					    value      	"regular")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"IsNative"
					    value      	"false"))
				    quid       	"4F1D075A0232"
				    stereotype 	"call"
				    supplier   	"Logical View::MDProcess::DocCardChange::DocCardSupport::MoveUvsQueryToAnotherDocCard"
				    quidu      	"4F1D06060397"))
			    class_attributes 	(list class_attribute_list
				(object ClassAttribute "success"
				    attributes 	(list Attribute_Set
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"ElementCreationOrder"
					    value      	"1327305149514131")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"AbstarctOperation"
					    value      	"regular")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"ValueInitialized"
					    value      	"true")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"IsNative"
					    value      	"false")
					(object Attribute
					    tool       	"MDA Generator User Properties"
					    name       	"xml_name"
					    value      	"ConfluencePlugins/AjaxResponse2.xml"))
				    quid       	"4F1D11BD01F7"
				    stereotype 	"velocity-xml"
				    exportControl 	"Public"
				    Containment 	"By Value")))
			(object Class "DocCardLuceneReIndex"
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ElementCreationOrder"
				    value      	"1335448864126321")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"AbstarctOperation"
				    value      	"regular")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"IsNative"
				    value      	"false")
				(object Attribute
				    tool       	"MDA Generator User Properties"
				    name       	"interceptor"
				    value      	"none")
				(object Attribute
				    tool       	"MDA Generator User Properties"
				    name       	"method"
				    value      	"doIndex")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"WikiPageID (wiki)"
				    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/DocCardXPlugin/DocCardXPackage/DocCardLuceneReIndex|4F995520007D
				    ))
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"SourceType (wiki)"
				    value      	"wiki"))
			    quid       	"4F995520007D"
			    documentation 	"индексация lucene индекса карточек"
			    stereotype 	"XAction"
			    used_nodes 	(list uses_relationship_list
				(object Uses_Relationship
				    attributes 	(list Attribute_Set
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"ElementCreationOrder"
					    value      	"1335448877845106")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"AbstarctOperation"
					    value      	"regular")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"IsNative"
					    value      	"false"))
				    quid       	"4F99552D034B"
				    stereotype 	"call"
				    supplier   	"Logical View::MDProcess::DocCardChange::DocCardSupport::DocCardLuceneReIndex"
				    quidu      	"4F9953C90234")))
			(object Class "DocCardLuceneSearchIndex"
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ElementCreationOrder"
				    value      	"1336718963955347")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"AbstarctOperation"
				    value      	"regular")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"IsNative"
				    value      	"false")
				(object Attribute
				    tool       	"MDA Generator User Properties"
				    name       	"interceptor"
				    value      	"none")
				(object Attribute
				    tool       	"MDA Generator User Properties"
				    name       	"method"
				    value      	"doSearch")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"WikiPageID (wiki)"
				    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/DocCardXPlugin/DocCardXPackage/DocCardLuceneSearchIndex|4FACB67303BA
				    ))
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"SourceType (wiki)"
				    value      	"wiki"))
			    quid       	"4FACB67303BA"
			    documentation 	"поиск в lucene индексе карточек"
			    stereotype 	"XAction"
			    used_nodes 	(list uses_relationship_list
				(object Uses_Relationship
				    attributes 	(list Attribute_Set
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"ElementCreationOrder"
					    value      	"1336718989981837")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"AbstarctOperation"
					    value      	"regular")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"IsNative"
					    value      	"false"))
				    quid       	"4FACB68D03D3"
				    stereotype 	"call"
				    supplier   	"Logical View::MDProcess::DocCardChange::DocCardSupport::DocCardLuceneSearchIndex"
				    quidu      	"4F99538D0325"))
			    class_attributes 	(list class_attribute_list
				(object ClassAttribute "success"
				    attributes 	(list Attribute_Set
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"ElementCreationOrder"
					    value      	"1336724895278621")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"AbstarctOperation"
					    value      	"regular")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"ValueInitialized"
					    value      	"true")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"IsNative"
					    value      	"false")
					(object Attribute
					    tool       	"MDA Generator User Properties"
					    name       	"xml_name"
					    value      	"ConfluencePlugins/AjaxResponse2.xml"))
				    quid       	"4FACCD9F0108"
				    stereotype 	"velocity-xml"
				    exportControl 	"Public"
				    Containment 	"By Value")))
			(object Class "ImportSynonymsFromFileToDatabase"
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ElementCreationOrder"
				    value      	"1336805796082270")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"AbstarctOperation"
				    value      	"regular")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"IsNative"
				    value      	"false")
				(object Attribute
				    tool       	"MDA Generator User Properties"
				    name       	"interceptor"
				    value      	"none")
				(object Attribute
				    tool       	"MDA Generator User Properties"
				    name       	"method"
				    value      	"doImport")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"WikiPageID (wiki)"
				    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/DocCardXPlugin/DocCardXPackage/ImportSynonymsFromFileToDatabase|4FAE09A40051
				    ))
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"SourceType (wiki)"
				    value      	"wiki"))
			    quid       	"4FAE09A40051"
			    documentation 	"импорт синонимов из файла в бд"
			    stereotype 	"XAction"
			    used_nodes 	(list uses_relationship_list
				(object Uses_Relationship
				    attributes 	(list Attribute_Set
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"ElementCreationOrder"
					    value      	"1336805805895832")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"AbstarctOperation"
					    value      	"regular")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"IsNative"
					    value      	"false"))
				    quid       	"4FAE09AD037D"
				    stereotype 	"call"
				    supplier   	"Logical View::MDProcess::DocCardChange::DocCardSupport::ImportSynonymsFromFileToDatabase"
				    quidu      	"4FAE005F03C8")))
			(object Class "CreateOGV"
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ElementCreationOrder"
				    value      	"1347272154702650")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"AbstarctOperation"
				    value      	"regular")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"IsNative"
				    value      	"false")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"WikiPageID (wiki)"
				    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/DocCardXPlugin/DocCardXPackage/CreateOGV|504DBDDA02BD
				    ))
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"SourceType (wiki)"
				    value      	"wiki"))
			    quid       	"504DBDDA02BD"
			    documentation 	"создать ОГВ"
			    stereotype 	"XAction"
			    used_nodes 	(list uses_relationship_list
				(object Uses_Relationship
				    attributes 	(list Attribute_Set
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"ElementCreationOrder"
					    value      	"1347272217838262")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"AbstarctOperation"
					    value      	"regular")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"IsNative"
					    value      	"false"))
				    quid       	"504DBE190345"
				    stereotype 	"call"
				    supplier   	"Logical View::MDProcess::DocCardChange::DocCardSupport::CreateOGV"
				    quidu      	"504DBBDC01C3")))
			(object Class "DoCreateOGV"
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ElementCreationOrder"
				    value      	"1347272310597573")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"AbstarctOperation"
				    value      	"regular")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"IsNative"
				    value      	"false")
				(object Attribute
				    tool       	"MDA Generator User Properties"
				    name       	"interceptor"
				    value      	"validatingStack")
				(object Attribute
				    tool       	"MDA Generator User Properties"
				    name       	"method"
				    value      	"doAdd")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"WikiPageID (wiki)"
				    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/DocCardXPlugin/DocCardXPackage/DoCreateOGV|504DBE760254
				    ))
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"SourceType (wiki)"
				    value      	"wiki"))
			    quid       	"504DBE760254"
			    documentation 	"выполняет сохранение нового ОГВ"
			    stereotype 	"XAction"
			    used_nodes 	(list uses_relationship_list
				(object Uses_Relationship
				    attributes 	(list Attribute_Set
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"ElementCreationOrder"
					    value      	"1347272355824161")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"AbstarctOperation"
					    value      	"regular")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"IsNative"
					    value      	"false"))
				    quid       	"504DBEA30336"
				    stereotype 	"call"
				    supplier   	"Logical View::MDProcess::DocCardChange::DocCardSupport::CreateOGV"
				    quidu      	"504DBBDC01C3"))
			    class_attributes 	(list class_attribute_list
				(object ClassAttribute "success"
				    attributes 	(list Attribute_Set
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"ElementCreationOrder"
					    value      	"1347272540820752")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"AbstarctOperation"
					    value      	"regular")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"ValueInitialized"
					    value      	"true")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"IsNative"
					    value      	"false")
					(object Attribute
					    tool       	"MDA Generator User Properties"
					    name       	"params"
					    value      	"/pages/viewpage.action?pageId=${pageId}"))
				    quid       	"504DBF5C0328"
				    stereotype 	"redirect"
				    exportControl 	"Public"
				    Containment 	"By Value")))
			(object Class "DoccardLuceneSearchRepeats"
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ElementCreationOrder"
				    value      	"1350908546943602")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"AbstarctOperation"
				    value      	"regular")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"IsNative"
				    value      	"false")
				(object Attribute
				    tool       	"MDA Generator User Properties"
				    name       	"interceptor"
				    value      	"none")
				(object Attribute
				    tool       	"MDA Generator User Properties"
				    name       	"method"
				    value      	"doSearchOnlyRepeats")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"WikiPageID (wiki)"
				    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/DocCardXPlugin/DocCardXPackage/DoccardLuceneSearchRepeats|50853A8203AE
				    ))
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"SourceType (wiki)"
				    value      	"wiki"))
			    quid       	"50853A8203AE"
			    documentation 	"поиск повторов в lucene индексе карточек"
			    stereotype 	"XAction"
			    used_nodes 	(list uses_relationship_list
				(object Uses_Relationship
				    attributes 	(list Attribute_Set
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"ElementCreationOrder"
					    value      	"1350908572507065")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"AbstarctOperation"
					    value      	"regular")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"IsNative"
					    value      	"false"))
				    quid       	"50853A9C01F9"
				    stereotype 	"call"
				    supplier   	"Logical View::MDProcess::DocCardChange::DocCardSupport::SearchFiledsInDepositoryString"
				    quidu      	"4DD50866035F"))
			    class_attributes 	(list class_attribute_list
				(object ClassAttribute "success"
				    attributes 	(list Attribute_Set
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"ElementCreationOrder"
					    value      	"1350908586080842")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"AbstarctOperation"
					    value      	"regular")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"ValueInitialized"
					    value      	"true")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"IsNative"
					    value      	"false")
					(object Attribute
					    tool       	"MDA Generator User Properties"
					    name       	"xml_name"
					    value      	"ConfluencePlugins/AjaxResponse2.xml"))
				    quid       	"50853AAA0041"
				    stereotype 	"velocity-xml"
				    exportControl 	"Public"
				    Containment 	"By Value")))
			(object Class "ChangeIncludeInVersion"
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ElementCreationOrder"
				    value      	"1358249386606977")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"AbstarctOperation"
				    value      	"regular")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"IsNative"
				    value      	"false")
				(object Attribute
				    tool       	"MDA Generator User Properties"
				    name       	"interceptor"
				    value      	"none")
				(object Attribute
				    tool       	"MDA Generator User Properties"
				    name       	"method"
				    value      	"doChange")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"WikiPageID (wiki)"
				    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/DocCardXPlugin/DocCardXPackage/ChangeIncludeInVersion|50F53DAA025E
				    ))
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"SourceType (wiki)"
				    value      	"wiki"))
			    quid       	"50F53DAA025E"
			    documentation 	"вычисляет дату включения в версию"
			    stereotype 	"XAction"
			    used_nodes 	(list uses_relationship_list
				(object Uses_Relationship
				    attributes 	(list Attribute_Set
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"ElementCreationOrder"
					    value      	"1358249403611007")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"AbstarctOperation"
					    value      	"regular")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"IsNative"
					    value      	"false"))
				    quid       	"50F53DBB0253"
				    stereotype 	"call"
				    supplier   	"Logical View::MDProcess::DocCardChange::DocCardSupport::ChangeIncludeInVersionDate"
				    quidu      	"50F53B25033A"))
			    class_attributes 	(list class_attribute_list
				(object ClassAttribute "success"
				    attributes 	(list Attribute_Set
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"ElementCreationOrder"
					    value      	"1358249575195710")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"AbstarctOperation"
					    value      	"regular")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"ValueInitialized"
					    value      	"true")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"IsNative"
					    value      	"false")
					(object Attribute
					    tool       	"MDA Generator User Properties"
					    name       	"xml_name"
					    value      	"ConfluencePlugins/AjaxResponse2.xml"))
				    quid       	"50F53E6700B4"
				    stereotype 	"velocity-xml"
				    exportControl 	"Public"
				    Containment 	"By Value")))
			(object Class "MoveCopyToAnotherUvsQuery"
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ElementCreationOrder"
				    value      	"1367846142285950")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"AbstarctOperation"
				    value      	"regular")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"IsNative"
				    value      	"false")
				(object Attribute
				    tool       	"MDA Generator User Properties"
				    name       	"interceptor"
				    value      	"none")
				(object Attribute
				    tool       	"MDA Generator User Properties"
				    name       	"method"
				    value      	"doMoveUvsQuery")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"WikiPageID (wiki)"
				    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/DocCardXPlugin/DocCardXPackage/MoveCopyToAnotherUvsQuery|5187ACFE0118
				    ))
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"SourceType (wiki)"
				    value      	"wiki"))
			    quid       	"5187ACFE0118"
			    documentation 	"перенос копии запроса в другой запрос"
			    stereotype 	"XAction"
			    used_nodes 	(list uses_relationship_list
				(object Uses_Relationship
				    attributes 	(list Attribute_Set
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"ElementCreationOrder"
					    value      	"1367846182931275")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"AbstarctOperation"
					    value      	"regular")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"IsNative"
					    value      	"false"))
				    quid       	"5187AD2603A1"
				    stereotype 	"call"
				    supplier   	"Logical View::MDProcess::DocCardChange::DocCardSupport::MoveCopyToAnotherUvsQuery"
				    quidu      	"5187AC54013E"))
			    class_attributes 	(list class_attribute_list
				(object ClassAttribute "success"
				    attributes 	(list Attribute_Set
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"ElementCreationOrder"
					    value      	"1367846208125717")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"AbstarctOperation"
					    value      	"regular")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"ValueInitialized"
					    value      	"true")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"IsNative"
					    value      	"false")
					(object Attribute
					    tool       	"MDA Generator User Properties"
					    name       	"xml_name"
					    value      	"ConfluencePlugins/AjaxResponse2.xml"))
				    quid       	"5187AD400070"
				    stereotype 	"velocity-xml"
				    exportControl 	"Public"
				    Containment 	"By Value")))
			(object Class "RemoveOGV"
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ElementCreationOrder"
				    value      	"1369898180223790")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"AbstarctOperation"
				    value      	"regular")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"IsNative"
				    value      	"false")
				(object Attribute
				    tool       	"MDA Generator User Properties"
				    name       	"interceptor"
				    value      	"none")
				(object Attribute
				    tool       	"MDA Generator User Properties"
				    name       	"method"
				    value      	"doRemove")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"WikiPageID (wiki)"
				    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/DocCardXPlugin/DocCardXPackage/RemoveOGV|51A6FCC400DA
				    ))
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"SourceType (wiki)"
				    value      	"wiki"))
			    quid       	"51A6FCC400DA"
			    documentation 	"удаление ОГВ"
			    stereotype 	"XAction"
			    used_nodes 	(list uses_relationship_list
				(object Uses_Relationship
				    attributes 	(list Attribute_Set
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"ElementCreationOrder"
					    value      	"1369898227359487")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"AbstarctOperation"
					    value      	"regular")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"IsNative"
					    value      	"false"))
				    quid       	"51A6FCF30165"
				    stereotype 	"call"
				    supplier   	"Logical View::MDProcess::DocCardChange::DocCardSupport::RemoveOGV"
				    quidu      	"51A6FC740350"))
			    class_attributes 	(list class_attribute_list
				(object ClassAttribute "success"
				    attributes 	(list Attribute_Set
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"ElementCreationOrder"
					    value      	"1369898261887463")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"AbstarctOperation"
					    value      	"regular")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"ValueInitialized"
					    value      	"true")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"IsNative"
					    value      	"false")
					(object Attribute
					    tool       	"MDA Generator User Properties"
					    name       	"params"
					    value      	"${redirectUrl}"))
				    quid       	"51A6FD15036C"
				    stereotype 	"redirect"
				    exportControl 	"Public"
				    Containment 	"By Value")))
			(object Class "MoveOGVFromFolderAction"
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ElementCreationOrder"
				    value      	"1380713225527036")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"AbstarctOperation"
				    value      	"regular")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"IsNative"
				    value      	"false")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"WikiPageID (wiki)"
				    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/DocCardXPlugin/DocCardXPackage/MoveOGVFromFolderAction|524C0309020E
				    ))
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"SourceType (wiki)"
				    value      	"wiki"))
			    quid       	"524C0309020E"
			    documentation 	"перенос ОГВ"
			    stereotype 	"XAction"
			    used_nodes 	(list uses_relationship_list
				(object Uses_Relationship
				    attributes 	(list Attribute_Set
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"ElementCreationOrder"
					    value      	"1380713252365572")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"AbstarctOperation"
					    value      	"regular")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"IsNative"
					    value      	"false"))
				    quid       	"524C0324016B"
				    stereotype 	"call"
				    supplier   	"Logical View::MDProcess::DocCardChange::DocCardSupport::MoveOGVFromFolderAction"
				    quidu      	"524C02F201F1"))
			    class_attributes 	(list class_attribute_list
				(object ClassAttribute "success"
				    attributes 	(list Attribute_Set
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"ElementCreationOrder"
					    value      	"1380713273954808")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"AbstarctOperation"
					    value      	"regular")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"ValueInitialized"
					    value      	"true")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"IsNative"
					    value      	"false")
					(object Attribute
					    tool       	"MDA Generator User Properties"
					    name       	"params"
					    value      	"/pages/viewpage.action?pageId=${pageId}"))
				    quid       	"524C033903A9"
				    stereotype 	"redirect"
				    exportControl 	"Public"
				    Containment 	"By Value")))
			(object Class "LoadWaitingFromOGV"
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ElementCreationOrder"
				    value      	"1401884994123364")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"AbstarctOperation"
				    value      	"regular")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"IsNative"
				    value      	"false")
				(object Attribute
				    tool       	"MDA Generator User Properties"
				    name       	"interceptor"
				    value      	"none")
				(object Attribute
				    tool       	"MDA Generator User Properties"
				    name       	"method"
				    value      	"doLoadWaitingFromOGV")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"WikiPageID (wiki)"
				    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/DocCardXPlugin/DocCardXPackage/LoadWaitingFromOGV|538F1142007A
				    ))
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"SourceType (wiki)"
				    value      	"wiki"))
			    quid       	"538F1142007A"
			    documentation 	"загрузка списка фильтра по клику"
			    stereotype 	"XAction"
			    used_nodes 	(list uses_relationship_list
				(object Uses_Relationship
				    attributes 	(list Attribute_Set
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"ElementCreationOrder"
					    value      	"1401885017234686")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"AbstarctOperation"
					    value      	"regular")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"IsNative"
					    value      	"false"))
				    quid       	"538F115900E8"
				    stereotype 	"call"
				    supplier   	"Logical View::MDProcess::DocCardChange::DocCardSupport::RequestListFilters"
				    quidu      	"538F10F201C1"))
			    class_attributes 	(list class_attribute_list
				(object ClassAttribute "success"
				    attributes 	(list Attribute_Set
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"ElementCreationOrder"
					    value      	"1401885050880612")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"AbstarctOperation"
					    value      	"regular")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"ValueInitialized"
					    value      	"true")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"IsNative"
					    value      	"false")
					(object Attribute
					    tool       	"MDA Generator User Properties"
					    name       	"xml_name"
					    value      	"ConfluencePlugins/AjaxResponse2.xml"))
				    quid       	"538F117A0365"
				    stereotype 	"velocity-xml"
				    exportControl 	"Public"
				    Containment 	"By Value")
				(object ClassAttribute "error"
				    attributes 	(list Attribute_Set
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"ElementCreationOrder"
					    value      	"1401885063887357")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"AbstarctOperation"
					    value      	"regular")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"ValueInitialized"
					    value      	"true")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"IsNative"
					    value      	"false"))
				    quid       	"538F1187036B"
				    stereotype 	"rawText"
				    exportControl 	"Public"
				    Containment 	"By Value")))
			(object Class "MoveAllDocCardsFromOGVAction"
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ElementCreationOrder"
				    value      	"1404307425149436")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"AbstarctOperation"
				    value      	"regular")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"IsNative"
				    value      	"false")
				(object Attribute
				    tool       	"MDA Generator User Properties"
				    name       	"interceptor"
				    value      	"none")
				(object Attribute
				    tool       	"MDA Generator User Properties"
				    name       	"method"
				    value      	"doMove")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"WikiPageID (wiki)"
				    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/DocCardXPlugin/DocCardXPackage/MoveAllDocCardsFromOGVAction|53B407E10094
				    ))
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"SourceType (wiki)"
				    value      	"wiki"))
			    quid       	"53B407E10094"
			    documentation 	"перенос всех карточек одного ОГВ в другое ОГВ"
			    stereotype 	"XAction"
			    used_nodes 	(list uses_relationship_list
				(object Uses_Relationship
				    attributes 	(list Attribute_Set
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"ElementCreationOrder"
					    value      	"1404307446896681")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"AbstarctOperation"
					    value      	"regular")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"IsNative"
					    value      	"false"))
				    quid       	"53B407F6037E"
				    stereotype 	"call"
				    supplier   	"Logical View::MDProcess::DocCardChange::DocCardSupport::MoveAllDocCardsFromOGV"
				    quidu      	"53B407A40338"))
			    class_attributes 	(list class_attribute_list
				(object ClassAttribute "success"
				    attributes 	(list Attribute_Set
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"ElementCreationOrder"
					    value      	"1404307479838566")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"AbstarctOperation"
					    value      	"regular")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"ValueInitialized"
					    value      	"true")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"IsNative"
					    value      	"false")
					(object Attribute
					    tool       	"MDA Generator User Properties"
					    name       	"params"
					    value      	"${redirectUrl}"))
				    quid       	"53B408170337"
				    stereotype 	"redirect"
				    exportControl 	"Public"
				    Containment 	"By Value")))
			(object Class "GetTopicsFromSearchUvsQuery"
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ElementCreationOrder"
				    value      	"1422358572250908")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"AbstarctOperation"
				    value      	"regular")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"IsNative"
				    value      	"false")
				(object Attribute
				    tool       	"MDA Generator User Properties"
				    name       	"interceptor"
				    value      	"none")
				(object Attribute
				    tool       	"MDA Generator User Properties"
				    name       	"method"
				    value      	"getTopics")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"WikiPageID (wiki)"
				    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/DocCardXPlugin/DocCardXPackage/GetTopicsFromSearchUvsQuery|54C7782C00F6
				    ))
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"SourceType (wiki)"
				    value      	"wiki"))
			    quid       	"54C7782C00F6"
			    documentation 	"экшн для получения всех топиков из поиска"
			    stereotype 	"XAction"
			    used_nodes 	(list uses_relationship_list
				(object Uses_Relationship
				    attributes 	(list Attribute_Set
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"ElementCreationOrder"
					    value      	"1422358618002526")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"AbstarctOperation"
					    value      	"regular")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"IsNative"
					    value      	"false"))
				    quid       	"54C7785A0000"
				    stereotype 	"call"
				    supplier   	"Logical View::MDProcess::DocCardChange::DocCardSupport::SearchUvsQuery"
				    quidu      	"4C7B5C0402FD"))
			    class_attributes 	(list class_attribute_list
				(object ClassAttribute "success"
				    attributes 	(list Attribute_Set
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"ElementCreationOrder"
					    value      	"1422359860060569")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"AbstarctOperation"
					    value      	"regular")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"ValueInitialized"
					    value      	"true")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"IsNative"
					    value      	"false")
					(object Attribute
					    tool       	"MDA Generator User Properties"
					    name       	"xml_name"
					    value      	"ConfluencePlugins/AjaxResponse2.xml"))
				    quid       	"54C77D340032"
				    stereotype 	"velocity-xml"
				    exportControl 	"Public"
				    Containment 	"By Value")
				(object ClassAttribute "error"
				    attributes 	(list Attribute_Set
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"ElementCreationOrder"
					    value      	"1422359949283673")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"AbstarctOperation"
					    value      	"regular")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"ValueInitialized"
					    value      	"true")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"IsNative"
					    value      	"false"))
				    quid       	"54C77D8D010F"
				    stereotype 	"rawText"
				    exportControl 	"Public"
				    Containment 	"By Value")))
			(object Class "dobatchoperationsearchuvsquery"
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ElementCreationOrder"
				    value      	"1437053580681724")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"AbstarctOperation"
				    value      	"regular")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"IsNative"
				    value      	"false")
				(object Attribute
				    tool       	"MDA Generator User Properties"
				    name       	"interceptor"
				    value      	"none")
				(object Attribute
				    tool       	"MDA Generator User Properties"
				    name       	"method"
				    value      	"doBatchOperation"))
			    quid       	"55A7B28C02A8"
			    documentation 	"выполнение групповых операций из поиска карточек"
			    stereotype 	"XAction"
			    used_nodes 	(list uses_relationship_list
				(object Uses_Relationship
				    attributes 	(list Attribute_Set
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"ElementCreationOrder"
					    value      	"1437053592415396")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"AbstarctOperation"
					    value      	"regular")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"IsNative"
					    value      	"false"))
				    quid       	"55A7B298019D"
				    stereotype 	"call"
				    supplier   	"Logical View::MDProcess::DocCardChange::DocCardSupport::SearchUvsQuery"
				    quidu      	"4C7B5C0402FD"))
			    class_attributes 	(list class_attribute_list
				(object ClassAttribute "success"
				    attributes 	(list Attribute_Set
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"ElementCreationOrder"
					    value      	"1437053719555669")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"AbstarctOperation"
					    value      	"regular")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"ValueInitialized"
					    value      	"true")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"IsNative"
					    value      	"false")
					(object Attribute
					    tool       	"MDA Generator User Properties"
					    name       	"params"
					    value      	"${actionParent}?queryId=${queryId}"))
				    quid       	"55A7B317021E"
				    stereotype 	"redirect"
				    exportControl 	"Public"
				    Containment 	"By Value")))
			(object Class "DoViewAttachmentsSavedFromDisk"
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ElementCreationOrder"
				    value      	"1445436309760353")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"AbstarctOperation"
				    value      	"regular")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"IsNative"
				    value      	"false"))
			    quid       	"56279B9502F7"
			    stereotype 	"XAction"
			    used_nodes 	(list uses_relationship_list
				(object Uses_Relationship
				    attributes 	(list Attribute_Set
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"ElementCreationOrder"
					    value      	"1445503168100467")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"AbstarctOperation"
					    value      	"regular")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"IsNative"
					    value      	"false"))
				    quid       	"5628A0C00062"
				    stereotype 	"call"
				    supplier   	"Logical View::MDProcess::DocCardChange::DocCardSupport::GarViewLastAddedAttachmentsAction"
				    quidu      	"5603F12B0180")))))))
	(object Class "DpoUvsHelper"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Factory auto reg"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Factory default impl"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Servant Pool"
		    value      	"none")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"context-key"
		    value      	"garDpoUvsHelper")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"debug log"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"factory priority"
		    value      	"0")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"local supervisor"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"need UC"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"singleton"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/DocCardChange/DocCardSupport/DpoUvsHelper.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C40200B0007_CUSTOM_IMPORT*"
		    value      	"//#UC START# *4C40200B0007_CUSTOM_IMPORT*¤import java.io.BufferedReader;¤import java.io.ByteArrayInputStream;¤import java.io.File;¤import java.io.FileDescriptor;¤import java.io.FileInputStream;¤import java.io.FileNotFoundException;¤import java.io.FileOutputStream;¤import java.io.FileReader;¤import java.io.IOException;¤import java.io.InputStream;¤import java.io.InputStreamReader;¤import java.io.Reader;¤import java.io.StringReader;¤import java.sql.Connection;¤import java.sql.ResultSet;¤import java.sql.SQLException;¤import java.sql.Statement;¤import java.text.ParseException;¤import java.text.SimpleDateFormat;¤import java.util.*;¤import java.util.concurrent.ExecutionException;¤import java.util.concurrent.TimeUnit;¤import java.util.prefs.Preferences;¤import java.util.regex.Matcher;¤import java.util.regex.Pattern;¤¤import javax.naming.directory.BasicAttributes;¤¤import javassist.Modifier;¤¤import org.apache.commons.collections.CollectionUtils;¤import org.apache.commons.io.IOUtils;¤import org.apache.commons.lang.StringUtils;¤import org.apache.poi.openxml4j.exceptions.InvalidFormatException;¤import org.apache.poi.ss.usermodel.*;¤import org.hsqldb.lib.StringInputStream;¤import org.ini4j.IniFile;¤import org.reflections.Reflections;¤import org.springframework.orm.hibernate.SessionFactoryUtils;¤import net.sf.hibernate.HibernateException;¤import net.sf.hibernate.Query;¤import net.sf.hibernate.Session;¤¤import com.atlassian.confluence.core.ContentEntityObject;¤import com.atlassian.confluence.json.json.JsonArray;¤import com.atlassian.confluence.labels.Label;¤import com.atlassian.confluence.pages.AbstractPage;¤import com.atlassian.confluence.pages.Attachment;¤import com.atlassian.confluence.pages.Page;¤import com.atlassian.confluence.renderer.PageContext;¤import com.atlassian.confluence.security.SpacePermission;¤import com.atlassian.confluence.setup.bandana.ConfluenceBandanaContext;¤import com.atlassian.confluence.spaces.Space;¤import com.atlassian.confluence.spaces.SpaceType;¤import com.atlassian.confluence.user.AuthenticatedUserThreadLocal;¤¤import com.atlassian.user.Group;¤import com.atlassian.user.User;¤import com.atlassian.user.search.page.Pager;¤import com.google.common.cache.CacheBuilder;¤import com.google.common.cache.CacheLoader;¤import com.google.common.cache.LoadingCache;¤import com.google.common.cache.RemovalCause;¤import com.google.common.cache.RemovalListener;¤import com.google.common.cache.RemovalNotification;¤import com.google.common.collect.Lists;¤import com.google.common.io.Files;¤¤import ru.garant.shared.ConfluenceCore.TaskSupport.PostProcessorTask;¤¤import ru.garant.MDProcess.DocCardChange.DocCardChangeDAO.*;¤import ru.garant.MDProcess.DocCardChange.DocCardCommon.*;¤import ru.garant.MDProcess.DocCardChange.DocCardCommonImpl.CachedPartnerManager;¤import ru.garant.MDProcess.DocCardChange.DocCardSupport.DocCardLuceneReIndex.DocCardAttributes;¤import ru.garant.MDProcess.DocCardChange.Entities.*;¤import ru.garant.MDProcess.HRChange.Entities.Leader;¤import ru.garant.MDProcess.HRChange.HRSupport.HrHelper;¤import ru.garant.MDProcess.ConfluenceMDChange.MdcCommon.AbstractMDCPermissionManager;¤import ru.garant.MDProcess.ConfluenceMDChange.RequestSupport.AbstractPageRequest;¤import ru.garant.MDProcess.ConfluenceMDChange.RequestSupportTypes.AbstractRequestType;¤import ru.garant.MDProcess.ConfluenceMDChange.Requests.AbstractRequestManager;¤import ru.garant.MDProcess.ConfluenceMDChange.Requests.AbstractRequestLifeCycle.AbstractEvent;¤import ru.garant.MDProcess.ConfluenceMDChange.Requests.sm.AbstractRequestLifeCycle.AbstractState;¤import ru.garant.MDProcess.ConfluencePlugins.SelectBoxPair;¤import ru.garant.MDProcess.ConfluencePlugins.AutoCompleteValues.AutoCompleteProvider;¤import ru.garant.MDProcess.ConfluencePlugins.CommonVelocityContext.GlobalHelper;¤import ru.garant.MDProcess.ConfluencePlugins.DiscussionsSupport.GarantViewPageAction;¤import ru.garant.MDProcess.ConfluencePlugins.Entities.RealizeContentInFileOnDisk;¤import ru.garant.MDProcess.ConfluencePlugins.IconSupport.Icon;¤import ru.garant.MDProcess.ConfluencePlugins.IconsSelectorSupport.IconSelectorInVelocity;¤import ru.garant.MDProcess.ConfluencePlugins.LabelSupport.LabelElement;¤import ru.garant.MDProcess.ConfluencePlugins.LabelSupport.LabelElementType;¤import ru.garant.MDProcess.ConfluencePlugins.LabelSupportImpl.DefaultLabelGroup;¤import ru.garant.MDProcess.ConfluencePlugins.Search.LogicOperation;¤import ru.garant.MDProcess.ConfluencePlugins.Search.QueryLabelGroup;¤import ru.garant.MDProcess.ConfluencePlugins.UserSupport.UserHelper;¤import ru.garant.MDProcess.ConfluenceMDChange.RequestSearch.RequestSearchQueryData;¤import ru.garant.MDProcess.ConfluenceMDChange.RequestSearchSupportTypes.RequestSearchQueryResultType;¤import ru.garant.MDProcess.ConfluenceMDChange.RequestWebConvertedSystemObjects.OGVLinksAttributesStruct;¤import ru.garant.shared.ConfluenceCore.ActionSupport.ActionContextThreadLocalFactory;¤import ru.garant.shared.GCI.I18N.Messages;¤import ru.garant.shared.GCL.DateUtils;¤import ru.garant.MDProcess.ConfluenceMDChange.ReportSupport.SearchRequest.AssignedToTypeValues;¤//#UC END# *4C40200B0007_CUSTOM_IMPORT*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C40200B0007_CUSTOM_CLASS_DEFINITION*"
		    value      	"//#UC START# *4C40200B0007_CUSTOM_CLASS_DEFINITION*¤//#UC END# *4C40200B0007_CUSTOM_CLASS_DEFINITION*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C40200B0007_CUSTOM_METHODS_AND_DATA*"
		    value      	(value Text 
|//#UC START# *4C40200B0007_CUSTOM_METHODS_AND_DATA*¤	@Override¤	public String getAddRequestURL(AbstractPage currentPage) {¤		// TODO Auto-generated method stub¤		return null;¤	}¤¤	@Override¤	protected AbstractRequestManager getEntityManager() {¤		// TODO Auto-generated method stub¤		return UVSQueryManager.Factory.get();¤	}¤¤	@Override¤	public String getFilterLabelStringForPageSelection(User user, Space space) {¤		// TODO Auto-generated method stub¤		List<String> allowedLabels = new ArrayList<String>();¤		allowedLabels.add("ogv");¤		if (allowedLabels.isEmpty()) {¤			return "";¤		}¤		StringBuilder result = new StringBuilder();¤		for (String label : allowedLabels) {¤			result.append(FILTER_LABELS_QUERY_PARAMETER).append(label);¤		}¤		return result.toString();¤¤	}¤¤	@Override¤	protected DPOUVSManager getMDCManager(String spaceKey) {¤		return DPOUVSManager.Factory.get(spaceKey);¤	}¤¤	@Override¤	public AbstractPageRequest getPageRequest(long pageId) {¤		// TODO Auto-generated method stub¤		return new PageUvsQuery(pageId);¤	}¤¤	@Override¤	public AbstractMDCPermissionManager getPermissionManager() {¤		// TODO Auto-generated method stub¤		return UVSQueryPermissionManager.Factory.get();¤	}¤¤	public DocCardPermissionManager getDocCardPermissionManager() {¤		// TODO Auto-generated method stub¤		return DocCardPermissionManager.Factory.get();¤	}¤¤	@Override¤	public List<? extends AbstractRequestType> getRecentAndPopularTypes(¤			Page page) {¤		// TODO Auto-generated method stub¤		return null;¤	}¤¤	@Override¤	public List<? extends AbstractRequestType> getRequestTypesForPage(¤			User user, AbstractPage currentPage) {¤		// TODO Auto-generated method stub¤		return null;¤	}¤¤	@Override¤	protected Map<AbstractEvent, AbstractState> getUnrecoverableEventStateMap() {¤		Map<AbstractEvent, AbstractState> result = new HashMap<AbstractEvent, AbstractState>(¤				1);¤		result.put(UVSStateMachine.EV_HAS_DOC, UVSStateMachine.ST_CLOSED);¤		return result;¤	}¤¤	public String getDpoUvsGroup(String spaceKey) {¤		return getEntityName(getMDCManager(spaceKey).getUvsGroup());¤	}¤¤	public String getUvsLeader(String spaceKey) {¤		return getEntityName(getMDCManager(spaceKey).getLeaderUvs());¤	}¤¤	public String getRibLeader(String spaceKey) {¤		return getEntityName(getMDCManager(spaceKey).getLeaderRib());¤	}¤¤	public String getDpoUvsLeader(String spaceKey) {¤		return getEntityName(getMDCManager(spaceKey).getLeaderDpoUvs());¤	}¤¤	public String getUoLeader(String spaceKey) {¤		return getEntityName(getMDCManager(spaceKey).getLeaderUo());¤	}¤¤	public String getOdUoLeader(String spaceKey) {¤		return getEntityName(getMDCManager(spaceKey).getLeaderOdUo());¤	}¤	¤	public String getResponsibleSetLabelsInPaperCopy(String spaceKey) {¤		return getEntityName(getMDCManager(spaceKey).getResponsibleSetLabelsInPaperCopy());¤	}¤	¤	public String getDpoUvsResponsible(String spaceKey) {¤		return getEntityName(getMDCManager(spaceKey).getResponsible());¤	}¤¤	public String getOdUoResponsible(String spaceKey) {¤		return getEntityName(getMDCManager(spaceKey).getOdUoResponsible());¤	}¤¤	public String getOdUoResponsibleForProjectRequest(String spaceKey) {¤		return getEntityName(getMDCManager(spaceKey)¤				.getOdUoResponsibleForProjectRequest());¤	}¤¤	public String getUvsGroupWhoTransferDocsToUO(String spaceKey) {¤		return getEntityName(getMDCManager(spaceKey)¤				.getUvsGroupWhoTransferDocsToUO());¤	}¤¤	public String getProjectManagersGroupsInOdUo(String spaceKey) {¤		return getEntityName(getMDCManager(spaceKey)¤				.getProjectManagersGroupsInOdUo());¤	}¤¤	public String getGardocUoDocPosters(String spaceKey) {¤		return getEntityName(getMDCManager(spaceKey).getGardocUoDocPosters());¤	}¤¤	public String getQueryPostersGroupInUO(String spaceKey) {¤		return getEntityName(getMDCManager(spaceKey).getQueryPostersGroupInUO());¤	}¤¤	public String getDocsAcceptorsInUO(String spaceKey) {¤		return getEntityName(getMDCManager(spaceKey).getDocsAcceptorsInUO());¤	}¤¤	public Collection<User> getResponsibles(String groupName) {¤		List<User> users = ContainerManager.Factory.get().getUserAccessor()¤				.getUsersByGroupName(groupName);¤		Collection<User> result = new UserHelper.UserSortedSet(users);¤		return result;¤	}¤¤	public String getOvgLinksOptionsForDpoUvs(String spaceKey) {¤		String result = getOvgLinksOptions(spaceKey, true, false, false);¤		return result;¤	}¤¤	Map<String, List<OGVLinksAttributesStruct>> links_ = new HashMap<String, List<OGVLinksAttributesStruct>>();¤	public String getOvgLinksOptions(String spaceKey,¤			boolean isDpoUvsResponsible, boolean isOdUoResponsible,¤			boolean isOdUoResponsibleForProjectRequest) {¤		StringBuilder result = new StringBuilder();¤		¤		long newTime = new Date().getTime();¤		ConfluenceBandanaContext cbc = new ConfluenceBandanaContext(spaceKey);¤		if(links_.get(spaceKey) != null){¤			Long ret = (Long)ru.garant.shared.ConfluenceCore.Helpers.ContainerManager.Factory.get().getBandanaManager().getValue(cbc, OPTIONS_CACHE);¤			if(ret != null && (newTime - ret) > 600000){¤				links_.remove(spaceKey);¤			}¤		}¤		if(links_.get(spaceKey) == null){¤			ru.garant.shared.ConfluenceCore.Helpers.ContainerManager.Factory.get().getBandanaManager().setValue(cbc, OPTIONS_CACHE, newTime);¤			links_.put(spaceKey, OGVLinksManager.Factory.get(spaceKey).getOgvAttributesForAvailableOgvInConfig());¤		}¤		for (OGVLinksAttributesStruct ogvLink : links_.get(spaceKey)) {¤			if(isDpoUvsResponsible && ogvLink.getIsDpoUvsResponsible() ||¤					isOdUoResponsible && ogvLink.getIsOdUOResponsible() ||¤					isOdUoResponsibleForProjectRequest && ogvLink.getIsOdUOResponsibleForProjectRequest()){¤				String title = ogvLink.getTitle();¤				String parentTitle = ogvLink.getParentTitle();¤				result.append("<option title='" + title + " (" + parentTitle + ")"¤						+ "' value=" + ogvLink.getId() + ">"¤						+ title + " (" + parentTitle + ")" + "</option>");¤			}¤		}¤		return result.toString();¤	}¤¤	public String getOvgLinksOptionsForOdUo(String spaceKey) {¤		String result = getOvgLinksOptions(spaceKey, false, true, false);¤		return result;¤	}¤¤	public String getOvgLinksOptionsForOdUoProjectRequest(String spaceKey) {¤		String result = getOvgLinksOptions(spaceKey, false, false, true);¤		return result;¤	}¤¤	public static void sort(List<OGVLinksAttributesStruct> links) {¤		Collections.sort(links, new Comparator<OGVLinksAttributesStruct>() {¤			@Override¤			public int compare(OGVLinksAttributesStruct arg0, OGVLinksAttributesStruct arg1) {¤				return arg0.getTitle().toLowerCase()¤						.compareTo(arg1.getTitle().toLowerCase());¤			}¤¤		});¤¤	}¤¤	public String getOvgLinksForResponsible(String spaceKey, String user,¤			boolean isOdUoResponsible,¤			boolean isOdUoResponsibleForProjectRequest) {¤		StringBuilder result = new StringBuilder();¤		List<OGVLinksAttributesStruct> links = OGVLinksManager.Factory.get(spaceKey)¤				.getOgvLinksByResponsible(user, isOdUoResponsible, isOdUoResponsibleForProjectRequest);¤		List<Long> pageIdsWithOGVNotCurrentLabel = DpoUvsHelper.getPagesIdsFromLabelAndSpaceKey(DpoUvsHelper.OGV_NOT_CURRENT_LABEL_NAME, spaceKey);¤		sort(links);¤		for (OGVLinksAttributesStruct ogvLink : links) {¤			String title = ogvLink.getTitle();¤			if(pageIdsWithOGVNotCurrentLabel.contains(ogvLink.getId())){¤				title = "!" + title;¤			}¤			result.append("<option title='" + title + " (" + ogvLink.getParentTitle() + ")"¤					+ "' value=" + ogvLink.getId() + ">"¤					+ title + " (" + ogvLink.getParentTitle() + ")" + "</option>");¤		}¤		return result.toString();¤	}¤¤	public String getRegionPartnersGroupsWhoCanCreatePages(String spaceKey) {¤		StringBuilder result = new StringBuilder();¤		String groupNamesString = getMDCManager(spaceKey).getRegionPartnersGroups();¤		if (groupNamesString == null) {¤			return null;¤		}¤		String[] groupNames = groupNamesString.split(",");¤		for (String groupName : groupNames) {¤			result.append("<option value=" + groupName + ">" + groupName¤					+ "</option>");¤		}¤		return result.toString();¤	}¤¤	public String getGroupsWhoCanCreatePages(String spaceKey) {¤		StringBuilder result = new StringBuilder();¤		Space space = ContainerManager.Factory.get().getSpaceManager()¤				.getSpace(spaceKey);¤		Map mapa = ContainerManager.Factory¤				.get()¤				.getSpacePermissionManager()¤				.getGroupsForPermissionType(¤						SpacePermission.CREATEEDIT_PAGE_PERMISSION, space);¤		Set<String> groupNames = mapa.keySet();¤		String groupNamesString = DPOUVSManager.Factory.get(spaceKey)¤				.getRegionPartnersGroups();¤		for (String groupName : groupNames) {¤			if (groupNamesString == null¤					|| !groupNamesString.contains(groupName))¤				result.append("<option value=" + groupName + ">" + groupName¤						+ "</option>");¤		}¤		return result.toString();¤	}¤¤//	public static final String[] MESSAGES_COPIES = { new PaperCopy().getType(),¤//			new ECopyDAO().getType(), new SiteCopyDAO().getType() };¤	public static final String[] MESSAGES_RESTRICTED_STATUS = {¤			"uvsquery.restricted.status.dsp",¤			"uvsquery.restricted.status.not.dsp" };¤	public static final String[] MESSAGES_FOR_SPECIFY_SEARCH_BY_COPIES = {¤			"searchgroup.with.copies.not.important",¤			"searchgroup.with.copies.in.e.copy",¤			"searchgroup.with.copies.in.paper.copy",¤			"searchgroup.with.copies.only.in.e.copy",¤			"searchgroup.with.copies.all.copes",¤			"searchgroup.with.copies.one.copies",¤			"searchgroup.with.copies.no.one.copies" };¤	public static final String[] MESSAGES_IS_CONNECTED = {¤			"uvsquery.status.name.unknown",¤			"uvsquery.status.name.is.not.connected",¤			"uvsquery.status.name.is.connected",¤			"uvsquery.status.name.is.connected.in.version" };¤¤	public static final String[] MESSAGES_CREATE_UVS_QUERY_IS_CONNECTED = {¤			"uvsquery.create.uvsquery.status.name.not.connect",¤			"uvsquery.create.uvsquery.status.name.connect" };¤	¤	public static final String[] MESSAGES_CREATE_UVS_QUERY_IS_CONNECTED_WITH_ON_DOC_CARD = {¤		"uvsquery.create.uvsquery.status.name.not.connect.with.on.doccad",¤		"uvsquery.create.uvsquery.status.name.connect" };¤¤	public static final String[] MESSAGES_INSTANCY = {¤			"uvsquery.instancy.unknown", "uvsquery.instancy.ordinary",¤			"uvsquery.instancy.quickly", "uvsquery.instancy.in.version" };¤¤	public static final Integer MESSAGES_INSTANCY_ORDINARY = 0;¤	public static final Integer MESSAGES_INSTANCY_QUICKLY = 1;¤	public static final Integer MESSAGES_INSTANCY_IN_VERSION = 2;¤¤	public static final Integer MESSAGES_INTERNET_YES = 0;¤	public static final Integer MESSAGES_INTERNET_NO = 1;¤¤	public static final String[] MESSAGES_INSTANCY_WITHOUT_UNKNOWN = {¤			"uvsquery.instancy.ordinary", "uvsquery.instancy.quickly",¤			"uvsquery.instancy.in.version" };¤¤	public static final String[] MESSAGES_INTERNET = { "uvsquery.internet.yes",¤			"uvsquery.internet.no" };¤¤	public String getTypeDocument(String spaceKey, String selectedItem) {¤		Long selectedItemId = (StringUtils.isNotEmpty(selectedItem))?Long.parseLong(selectedItem):0;¤		StringBuilder result = new StringBuilder();¤		List<DocTypeDAO> listDocTypeDAO = DocCardManager.Factory.get().getDocTypeDAO();¤		if (listDocTypeDAO != null) {¤			Map<String, List<DocTypeDAO>> mapa = listDocTypeToMapWithList(listDocTypeDAO);¤			¤			String message = ru.garant.shared.GCI.I18N.Messages.Factory¤					.messages().get("uvsquery.type.not.specified");¤			result.append(getOptionRow(0l, message, selectedItemId, ""));¤¤			for (String docTypeName : mapa.keySet()) {¤				List<DocTypeDAO> docTypes = mapa.get(docTypeName);¤				if(docTypes.size() == 1){¤					DocTypeDAO docTypeDAO = docTypes.get(0);¤					result.append(getOptionRow(docTypeDAO.getId(), docTypeName, selectedItemId, ""));¤				}else if(docTypes.size() > 1){¤					for(DocTypeDAO docTypeDAO : docTypes){¤						int index = 0;¤						if(docTypeDAO.getPath() != null){¤							index = docTypeDAO.getPath().toUpperCase().indexOf(docTypeName.toUpperCase());¤						}¤						if(index <= 0){¤							result.append(getOptionRow(docTypeDAO.getId(), docTypeName, selectedItemId, ""));¤						}else{¤							String parentName = "[" + docTypeDAO.getPath().substring(0, index - 1) + "] ";¤							result.append(getOptionRow(docTypeDAO.getId(), docTypeName, selectedItemId, parentName));¤						}¤					}¤					¤				}¤				¤			}¤		}¤		return result.toString();¤	}¤	¤	public static Map<String, List<DocTypeDAO>> listDocTypeToMapWithList(List<DocTypeDAO> listDocTypeDAO){¤		Map<String, List<DocTypeDAO>> mapa = new TreeMap<String, List<DocTypeDAO>>();¤		for (DocTypeDAO docTypeDAO : listDocTypeDAO) {¤			List<DocTypeDAO> docTypes = mapa.get(docTypeDAO.getName());¤			if(docTypes == null){¤				docTypes = new ArrayList<DocTypeDAO>();¤			}¤			docTypes.add(docTypeDAO);¤			mapa.put(docTypeDAO.getName(), docTypes);¤		}¤		return mapa;¤	}¤¤	public static String getOptionRow(Long docTypeId, String docTypeName, Long selectedItem, String parentName){¤		String row; ¤		if (selectedItem.equals(docTypeId)) {¤			row = "<option id=\"" + docTypeId¤					+ "\" value=\"" + docTypeId¤					+ "\" selected='selected'>" + parentName + docTypeName¤					+ "</option>";¤		} else {¤			row = "<option id=\"" + docTypeId¤					+ "\" value=\"" + docTypeId + "\">"¤					 + parentName + docTypeName ¤					+ "</option>";¤		}¤		return row;¤	}¤	¤	public static List<DocTypeDAO> getDocumentTypes() {¤		return DocCardManager.Factory.get().getDocumentTypes();¤	}¤¤	public static Map<String, Set<Page>> putPageToMap(List<Page> pageList){¤		Map<String, Set<Page>> pagesMap = new TreeMap<String, Set<Page>>();¤		¤		for(Page page : pageList){¤			String title = page.getTitle();¤			Set<Page> pages = new TreeSet<Page>(new Comparator<Page>() {¤				public int compare (Page a, Page b) {¤					return a.getParent().getTitle().compareToIgnoreCase(b.getParent().getTitle());¤				}			¤			});		¤			if(pagesMap.containsKey(title)){¤				pages = pagesMap.get(title);¤			}¤			pages.add(page);¤			pagesMap.put(title, pages);¤		}¤		return pagesMap;¤	}¤	¤	public static List<Object[]> getPageAttributes(Map<String, Set<Page>> pagesMap){¤		List<Object[]> pageList = new ArrayList<Object[]>(); ¤		for(String title : pagesMap.keySet()){¤			Set<Page> pages = pagesMap.get(title);¤			¤			for (Page page : pages) {¤				String currentPageTitle = (pages.size() > 1)?page.getParent().getTitle() + "\\" + page.getTitle():page.getTitle();¤	 			Object[] objs = new Object[2];¤				objs[0] = page.getId();¤				objs[1] = currentPageTitle;¤				pageList.add(objs);¤			}	¤		}¤		return pageList;¤	}¤¤	public String getAvailableDocIssuers(String spaceKey,¤			String selectedItems) {¤		StringBuilder result = new StringBuilder();¤		result.append("<option value='0'></option>");¤		List<OGVLinksAttributesStruct> attributes = OGVLinksManager.Factory.get(spaceKey).getAttributesFromOgvLinksForSearch();¤		Collections.sort(attributes, new OgvComparator());¤		if (attributes == null || attributes.size() == 0)¤			return "";¤		for(OGVLinksAttributesStruct ogvLink : attributes){¤			if(ogvLink.getHasLabelUvs()){¤				if (selectedItems.contains(ogvLink.getId() + "")) {¤					result.append("<option title='" + ogvLink.getTitle() + "' value='" + ogvLink.getId()¤							+ "' selected='selected'>"¤							+ ogvLink.getTitle() + "</option>");¤				} else {¤					result.append("<option title='" + ogvLink.getTitle() + "' value='" + ogvLink.getId() + "'>"¤							+ ogvLink.getTitle() + "</option>");¤				}¤			}¤		}¤		return result.toString();¤	}¤¤	private static final class OgvComparator implements Comparator<OGVLinksAttributesStruct> {¤		public int compare (OGVLinksAttributesStruct c1, OGVLinksAttributesStruct c2) {¤			String title1 = c1.getTitle();¤			if(title1.contains("\\")){¤				title1 = title1.substring(title1.indexOf("\\") + 1);¤			}¤			String title2 = c2.getTitle();¤			if(title2.contains("\\")){¤				title2 = title2.substring(title2.indexOf("\\") + 1);¤			}¤			return title1.compareTo(title2);¤		}¤	}¤¤¤	public static String getAvailableCopies(String selectedItem, String state, String spaceKey) {¤		StringBuilder result = new StringBuilder();¤		if ((UVSStateMachine.ST_WAITING_FROM_OGV.getSortValue() + "")¤				.equals(state)) {¤			//здесь не надо править, т.к. в permission делаем проверку чтобы не давать редактировать тип носителя документа, если не указан бумажный тип¤			String messageName = new PaperCopy().getType();¤			String message = ru.garant.shared.GCI.I18N.Messages.Factory¤					.messages().get(messageName);¤			result.append("<option value='" + messageName¤					+ "' selected='selected'>" + message + "</option>");¤		} else {¤			try {¤				if(StringUtils.isEmpty(spaceKey)){¤					spaceKey = "DPOUVS";¤				}¤				String partnerCopiesClassesString = PartnerManager.Factory.get().getPartnerCopiesClassesBySpaceKey(spaceKey);¤				String[] partnerCopiesClasses = StringUtils.split(partnerCopiesClassesString, ",");¤				List<CopyDAO> allCopies = getAllCopiesSubclasses();¤				List<CopyDAO> availableCopies = new ArrayList<CopyDAO>();¤				for(int i = 0; i < partnerCopiesClasses.length; i++){¤					for(CopyDAO copy : allCopies){¤						String partnerCopyClass = partnerCopiesClasses[i].trim();¤						if(copy.getClass().getSimpleName().equals(partnerCopyClass)){¤							availableCopies.add(copy);¤						}¤					}¤				}¤				for(CopyDAO copy : availableCopies){¤					String messageName = copy.getType();¤					String message = ru.garant.shared.GCI.I18N.Messages.Factory¤							.messages().get(messageName);¤					if (selectedItem.equals(messageName)) {¤						result.append("<option value='" + messageName¤								+ "' selected='selected'>" + message + "</option>");¤					} else {¤						result.append("<option value='" + messageName + "'>"¤								+ message + "</option>");¤					}¤				}¤			} catch (Exception ex) {¤				Logs.LOG_SEX(ex);¤			}¤		}¤		return result.toString();¤	}¤¤	public static String getAvailableRestrictedStatus(String selectedItems) {¤		StringBuilder result = new StringBuilder();¤		for (int i = 0; i < MESSAGES_RESTRICTED_STATUS.length; i++) {¤			String messageName = MESSAGES_RESTRICTED_STATUS[i];¤			String message = ru.garant.shared.GCI.I18N.Messages.Factory¤					.messages().get(messageName);¤			if (selectedItems.contains((i + 1) + "")) {¤				result.append("<option value='" + (i + 1)¤						+ "' selected='selected'>" + message + "</option>");¤			} else {¤				result.append("<option value='" + (i + 1) + "'>" + message¤						+ "</option>");¤			}¤		}¤		return result.toString();¤	}¤¤	public static boolean isAbstractECopyType(String copyType) {¤		if (copyType == null) {¤			return false;¤		}¤		if (copyType.equals(new ECopyDAO().getType())¤				|| copyType.equals(new SiteCopyDAO().getType())¤				|| copyType.equals(new PaperScanCopy().getType())) {¤			return true;¤		}¤		return false;¤	}¤¤	public static boolean isDocCard(final long pageId) {¤		return DocCardManager.Factory.get().isDocCard(pageId);¤	}¤	¤	public static boolean isUvsQuery(final long pageId) {¤		return UVSQueryManager.Factory.get().isRequest(pageId);¤	}¤¤	¤	public static boolean isOGV(final Page page) {¤		if(page.getLabels().contains(DpoUvsHelper.getOGVLabel())){¤			return true;¤		}¤		return false;¤	}¤¤	public static PageDocCard getPageDocCard(long pageId) {¤		// TODO Auto-generated method stub¤		return new PageDocCard(pageId);¤	}¤¤	public static List<String> getRestrctedStatusNamesList() {¤		List<String> namesList = new ArrayList<String>();¤		for (String mes : MESSAGES_RESTRICTED_STATUS) {¤			namesList.add(ru.garant.shared.GCI.I18N.Messages.Factory.messages()¤					.get(mes));¤		}¤		return namesList;¤	}¤¤	public static List<String> getIsConnectedNamesList() {¤		List<String> namesList = new ArrayList<String>();¤		for (ConnectedStatus val : ConnectedStatus.values()) {¤			namesList.add(val.name());¤		}¤		return namesList;¤	}¤¤	public static List<String> getCreateUvsQueryConnectedNamesList() {¤		List<String> namesList = new ArrayList<String>();¤		namesList.add(ConnectedStatus.IS_CONNECTED.name());¤		namesList.add(ConnectedStatus.IS_NOT_CONNECTED.name());¤		return namesList;¤	}¤¤	public static List<String> getBlocksNamesList() {¤		List<String> namesList = new ArrayList<String>();¤		List<Space> spaces = DpoUvsHelper.getSpacesWhichHasGardocSettings();¤		for(Space space : spaces){¤			for (String mes : DocCardManager.Factory.get().getAllBlocksNames(space.getKey())) {¤				namesList.add(mes);¤			}¤		}¤		return namesList;¤	}¤¤	public static List<String> getBlocksNamesList(String spaceKey) {¤		List<String> namesList = new ArrayList<String>();¤		for (String mes : DocCardManager.Factory.get().getAllBlocksNames(spaceKey)) {¤			namesList.add(mes);¤		}¤		return namesList;¤	}¤¤	public static Byte instancyTypesToByte(InstancyTypes var) {¤		if (var == null) {¤			return null;¤		} else if (var.equals(InstancyTypes.IN_VERSION)) {¤			return 3;¤		} else if (var.equals(InstancyTypes.QUICKLY)) {¤			return 2;¤		} else if (var.equals(InstancyTypes.ORDINARY)) {¤			return 1;¤		} else {¤			return 0;¤		}¤	}¤¤	public static Byte instancyTypesToByte(String var) {¤		if (var == null) {¤			return null;¤		} else if (var.equals(InstancyTypes.IN_VERSION.name())) {¤			return 3;¤		} else if (var.equals(InstancyTypes.QUICKLY.name())) {¤			return 2;¤		} else if (var.equals(InstancyTypes.ORDINARY.name())) {¤			return 1;¤		} else {¤			return 0;¤		}¤	}¤¤	public static String createUvsQueryConnectedStatusToString(String var) {¤		return MESSAGES_CREATE_UVS_QUERY_IS_CONNECTED[createUvsQueryConnectedStatusToByte(var)];¤	}¤¤	public static String createUvsQueryConnectedStatusToStringWithOnDocCard(String var) {¤		return MESSAGES_CREATE_UVS_QUERY_IS_CONNECTED_WITH_ON_DOC_CARD[createUvsQueryConnectedStatusToByte(var)];¤	}¤¤	public static String connectedStatusToString(String var) {¤		return MESSAGES_IS_CONNECTED[connectedStatusToByte(var)];¤	}¤¤	public static String convertInstancyTypeAndBooleanFromMessageString(¤			InstancyTypes instacy) {¤		if (instacy.equals(InstancyTypes.ORDINARY)) {¤			return MESSAGES_INSTANCY_WITHOUT_UNKNOWN[MESSAGES_INSTANCY_ORDINARY];¤		} else if (instacy.equals(InstancyTypes.QUICKLY)) {¤			return MESSAGES_INSTANCY_WITHOUT_UNKNOWN[MESSAGES_INSTANCY_QUICKLY];¤		} else if (instacy.equals(InstancyTypes.IN_VERSION)) {¤			return MESSAGES_INSTANCY_WITHOUT_UNKNOWN[MESSAGES_INSTANCY_IN_VERSION];¤		}¤		return "";¤	}¤¤	public static Byte createUvsQueryConnectedStatusToByte(String var) {¤		if (var == null) {¤			return null;¤		} else if (var.equals(ConnectedStatus.IS_CONNECTED.name())) {¤			return 1;¤		} else if (var.equals(ConnectedStatus.IS_NOT_CONNECTED.name())) {¤			return 0;¤		}¤		return null;¤	}¤¤	public static Byte connectedStatusToByte(ConnectedStatus var) {¤		if (var == null) {¤			return null;¤		} else if (var.equals(ConnectedStatus.IS_CONNECTED_IN_VERSION)) {¤			return 3;¤		} else if (var.equals(ConnectedStatus.IS_CONNECTED)) {¤			return 2;¤		} else if (var.equals(ConnectedStatus.IS_NOT_CONNECTED)) {¤			return 1;¤		} else {¤			return 0;¤		}¤	}¤¤	public static Byte connectedStatusToByte(String var) {¤		if (var == null) {¤			return null;¤		} else if (var.equals(ConnectedStatus.IS_CONNECTED_IN_VERSION.name())) {¤			return 3;¤		} else if (var.equals(ConnectedStatus.IS_CONNECTED.name())) {¤			return 2;¤		} else if (var.equals(ConnectedStatus.IS_NOT_CONNECTED.name())) {¤			return 1;¤		} else {¤			return 0;¤		}¤	}¤¤	public static ConnectedStatus connectedStatusNameToConnectedStatus(¤			String var) {¤		if (var == null) {¤			return null;¤		} else if (var.equals(ConnectedStatus.IS_CONNECTED_IN_VERSION.name())) {¤			return ConnectedStatus.IS_CONNECTED_IN_VERSION;¤		} else if (var.equals(ConnectedStatus.IS_CONNECTED.name())) {¤			return ConnectedStatus.IS_CONNECTED;¤		} else if (var.equals(ConnectedStatus.IS_NOT_CONNECTED.name())) {¤			return ConnectedStatus.IS_NOT_CONNECTED;¤		} else {¤			return ConnectedStatus.UNKNOWN;¤		}¤	}¤¤	public static String instancyTypesToString(String var) {¤		return MESSAGES_INSTANCY[instancyTypesToByte(var)];¤	}¤¤	public static List<String> getInstancyMessages() {¤		List<String> namesList = new ArrayList<String>();¤		for (String mes : MESSAGES_INSTANCY_WITHOUT_UNKNOWN) {¤			namesList.add(mes);¤		}¤		return namesList;¤	}¤¤	public static InstancyTypes convertStringToInstancyType(String name) {¤		if (name.equals(DpoUvsHelper.MESSAGES_INSTANCY_WITHOUT_UNKNOWN[DpoUvsHelper.MESSAGES_INSTANCY_QUICKLY])) {¤			return InstancyTypes.QUICKLY;¤		} else if (name.equals(DpoUvsHelper.MESSAGES_INSTANCY_WITHOUT_UNKNOWN[DpoUvsHelper.MESSAGES_INSTANCY_ORDINARY])) {¤			return InstancyTypes.ORDINARY;¤		} else if (name.equals(DpoUvsHelper.MESSAGES_INSTANCY_WITHOUT_UNKNOWN[DpoUvsHelper.MESSAGES_INSTANCY_IN_VERSION])) {¤			return InstancyTypes.IN_VERSION;¤		}¤		return null;¤	}¤¤	public static InstancyTypes convertNameToInstancyType(String name) {¤		if (name == null) {¤			return InstancyTypes.UNKNOWN;¤		} else if (name.equals(InstancyTypes.IN_VERSION.name())) {¤			return InstancyTypes.IN_VERSION;¤		} else if (name.equals(InstancyTypes.QUICKLY.name())) {¤			return InstancyTypes.QUICKLY;¤		} else if (name.equals(InstancyTypes.ORDINARY.name())) {¤			return InstancyTypes.ORDINARY;¤		} else {¤			return InstancyTypes.UNKNOWN;¤		}¤	}¤¤	public static List<String> getInstancyNamesList() {¤		List<String> namesList = new ArrayList<String>();¤		for (InstancyTypes var : InstancyTypes.values()) {¤			namesList.add(var.name());¤		}¤		return namesList;¤	}¤¤	public static Map<Long, List<Object>> listToMap(List items) {¤		Map<Long, List<Object>> result = new HashMap<Long, List<Object>>();¤		List<Object> uvsQueryParams;¤		for (Object item : items) {¤			Object[] info = (Object[]) item;¤			long docIssuer = (Long) info[0];¤			uvsQueryParams = new ArrayList<Object>();¤			if (result.containsKey(docIssuer)) {¤				uvsQueryParams = result.get(docIssuer);¤			}¤			uvsQueryParams.add(item);¤			result.put(docIssuer, uvsQueryParams);¤		}¤		return result;¤	}¤¤	public static String listBlocksToString(List<BlockDAO> items) {¤		String result = "";¤		for (BlockDAO item : items) {¤			if (!StringUtils.isEmpty(result)) {¤				result += ", ";¤			}¤			result += item.getShortName();¤		}¤		return result;¤	}¤¤	@Override¤	public boolean getMonthlyReport(String spaceKey) {¤		// TODO Auto-generated method stub¤		HrHelper hrHelper = new HrHelper();¤		if (getMDCManager(spaceKey).getLeaderDpoUvs() != null) {¤			Leader leader = hrHelper.getLeader(getMDCManager(spaceKey).getLeaderDpoUvs().getName());¤			if (leader == null || leader.getDepartment() == null) {¤				return false;¤			}¤			return getMDCManager(spaceKey).getEnabled();¤		}¤		return false;¤	}¤¤	public boolean isDevelopmentManager(String spaceKey, User user) {¤		if (getMDCManager(spaceKey) != null && user != null)¤			return getMDCManager(spaceKey).isLeader(user.getName());¤¤		Logs.LOG_W("DpoUvsHelper : isDevelopmentManager : Invalid parameters");¤		return false;¤	}¤¤	public static String makePageTitle(String typeName, long ogvPageId,¤			String number, Date creationDate, String title) {¤		if(typeName != null && typeName.equals(ru.garant.shared.GCI.I18N.Messages.Factory.messages().get("uvsquery.type.not.specified"))){¤			typeName = "";¤		}¤		String docCardTitle = replaceSymbolsInTitle(makeDocCardName(ogvPageId, number, typeName, creationDate, title));¤		return docCardTitle;¤	}¤	¤	public static String replaceSymbolsInTitle(String title){¤		return title¤				.replaceAll("[\\[\\{]", "(")¤				.replaceAll("[\\<\\>]", "")¤				.replaceAll("&lt;", "")¤				.replaceAll("&gt;", "")¤				.replaceAll("&amp;", "")¤				.replaceAll("[\\]\\}]", ")")¤				.replaceAll("[\\/\\\\\\|\\:]", "-")¤				.replaceAll("[\\^\\#\\;]", "?")¤				.replaceAll("[\\@]", "a")¤				.replaceAll("[\\r]", " ")¤				.replaceAll("[\\n]", " ");¤	}¤¤	public static String getECopyFilePath(String suffix, Date date,¤			String copyType, String isUOCurrentDoc, String spaceKey) {¤		if (StringUtils.isEmpty(suffix) || StringUtils.isEmpty(copyType)) {¤			return null;¤		}¤		if (isUOCurrentDoc.equals("true")) {¤			return getPrefixCopyFilePathForUO(spaceKey)¤					+ getPartECopyFilePath(suffix, date);¤		} else if (copyType.equals(new SiteCopyDAO().getType())) {¤			return getPrefixSiteCopyFilePath(spaceKey)¤					+ getPartECopyFilePath(suffix, date);¤		} else if (copyType.equals(new ECopyDAO().getType())) {¤			return getPrefixECopyFilePath(spaceKey)¤					+ getPartECopyFilePath(suffix, date);¤		}¤		return null;¤	}¤¤	public static String getPartECopyFilePath(String suffix, Date date) {¤		return new SimpleDateFormat("MM_dd").format(date) + "\\" + suffix;¤	}¤¤	public static String getPrefixECopyFilePath(String spaceKey) {¤		return getCurrentDocLocalDiskName(spaceKey) + "PO1\\FROM_OGV\\";¤	}¤¤	public static String getPrefixSiteCopyFilePath(String spaceKey) {¤		return getCurrentDocLocalDiskName(spaceKey) + "PO1\\";¤	}¤¤	public static String getPrefixCopyFilePathForUO(String spaceKey) {¤		return getUOCurrentDocLocalDiskName(spaceKey) + "CRDR\\";¤	}¤¤	public static String getRowInOGVList(DocCard dc) {¤		return makeDocCardName(dc.getDocIssuer(), dc.getNumber(), dc.getType(),¤				dc.getCreationDate(), dc.getName());¤	}¤¤	public static String predefinedConvertsToServerPath(String path) {¤		if (path.startsWith("I:\\CRDR\\TO1")) {¤			return "I:\\I-CRDR\\TO1" + path.substring("I:\\CRDR\\TO1".length());¤		}¤		return path;¤	}¤	¤	public static String convertToServerPathToFileWithCopy(String path, String spaceKey) {¤		if (StringUtils.isNotEmpty(path) && isServerOnLinux(spaceKey)) {¤			¤			path = predefinedConvertsToServerPath (path);¤			¤			return getServerFolder(spaceKey) + path.substring(3).replace("\\", "/");¤		} else {¤			return path;¤		}¤	}¤¤	public static String convertToClientPathToFileWithCopy(String path,¤			String isUOCurrentDoc, String spaceKey) {¤		if (StringUtils.isNotEmpty(path) && isServerOnLinux(spaceKey)) {¤			if (isUOCurrentDoc.equals("true")) {¤				return getUOCurrentDocLocalDiskName(spaceKey).replace("/", "\\") + path.substring(5).replace("/", "\\");¤			} else {¤				return getCurrentDocLocalDiskName(spaceKey).replace("/", "\\") + path.substring(5).replace("/", "\\");¤			}¤		} else {¤			return path;¤		}¤	}¤	¤	public static boolean isLocalPath(String currentPath, String spaceKey){¤		return verifyNotOneOfThePath(currentPath, getDepositoryPaths(spaceKey));¤	}¤¤	public static boolean isLocalPathWithLinuxPath(String currentPath, String spaceKey){¤		return verifyNotOneOfThePath(currentPath, getDepositoryPaths(spaceKey).concat(", " + getServerFolder(spaceKey)));¤	}¤¤	public static boolean verifyNotOneOfThePath(String currentPath, String depositoryPaths){¤		String[] paths = StringUtils.split(depositoryPaths, ", ");¤		String replacingCurPath = currentPath.replace("/", "\\");¤		for(String path : paths){¤			String depPath = path.replace("/", "\\");¤			if(replacingCurPath.startsWith(depPath)){¤				return false;¤			}¤		}¤		return true;¤	}¤	¤	public static String getServerFolder(final String spaceKey){¤		String currentSpaceKey = spaceKey;¤		if(StringUtils.isEmpty(spaceKey)){¤			currentSpaceKey = "DPOUVS";¤		}¤		ConfluenceBandanaContext cbc = new ConfluenceBandanaContext(currentSpaceKey);¤		String folder = (String)ru.garant.shared.ConfluenceCore.Helpers.ContainerManager.Factory.get().getBandanaManager().getValue(cbc, "DpoUvsHelper.ServerFolder");¤		if(folder == null){¤			folder = "//mnt//";¤		}¤		return folder;¤	}¤¤¤	public static String getCurrentDocLocalDiskName(final String spaceKey){¤		String currentSpaceKey = spaceKey;¤		if(StringUtils.isEmpty(spaceKey)){¤			currentSpaceKey = "DPOUVS";¤		}¤		ConfluenceBandanaContext cbc = new ConfluenceBandanaContext(currentSpaceKey);¤		String path = (String)ru.garant.shared.ConfluenceCore.Helpers.ContainerManager.Factory.get().getBandanaManager().getValue(cbc, "DpoUvsHelper.CurrentDocLocalDiskName");¤		if(path == null){¤			path = "I:\\";¤		}¤		return path;¤	}¤¤	public static String getUOCurrentDocLocalDiskName(final String spaceKey){¤		String currentSpaceKey = spaceKey;¤		if(StringUtils.isEmpty(spaceKey)){¤			currentSpaceKey = "DPOUVS";¤		}¤		ConfluenceBandanaContext cbc = new ConfluenceBandanaContext(currentSpaceKey);¤		String path = (String)ru.garant.shared.ConfluenceCore.Helpers.ContainerManager.Factory.get().getBandanaManager().getValue(cbc, "DpoUvsHelper.UOCurrentDocLocalDiskName");¤		if(path == null){¤			path = "L:\\";¤		}¤		return path;¤	}¤¤	public static final int ADD_DOCUMENT_UO = 0;//rt_uo_query с ПУ¤	public static final int ADD_CURRENT_DOCUMENT_UVS = 1;//rt_current_doc с ПУ и со страницы¤	public static final int ADD_UO_CURRENT_DOCUMENT_UVS = 2;//potrehaeva со страницы¤//	public static final int ADD_UO_CURRENT_DOCUMENT_UVS_FROM_DASHBOARD = 3;//potrehaeva с ПУ¤	public static final int ADD_REGION_PARTNER_DOCUMENT_UO = 4;	//региональные партнеры с ПУ¤	public static final int ADD_AUTO_MAILING_PROCESSING = 5;	//работа с почтой¤	public static final int DOCCARD_IS_RETURN_IN_WORK = 6;	//вернуть в работу¤	public static final int ADD_AUTO_MAILING_PROCESSING_UVS = 7;	//работа с почтой¤	¤	public static final int FROM_DASHBOARD = 0;¤	public static final int FROM_LIST = 1;¤	public static final int FROM_ISSUER = 2;¤	public static final int FROM_DOCCARD = 3;¤¤	public static int getFromDashboard(){¤		return FROM_DASHBOARD;¤	}¤	¤	public static int getFromList(){¤		return FROM_LIST;¤	}¤¤	public static int getFromIssuer(){¤		return FROM_ISSUER;¤	}¤¤	public static int getFromDoccard(){¤		return FROM_DOCCARD;¤	}¤¤	public static int getAddAutoMailing() {¤		return ADD_AUTO_MAILING_PROCESSING;¤	}¤	¤	public static int getAddAutoMailingUvs() {¤		return ADD_AUTO_MAILING_PROCESSING_UVS;¤	}¤¤	public static int getReturnInWorkDoc() {¤		return DOCCARD_IS_RETURN_IN_WORK;¤	}¤¤	public static int getAddDocumentUO() {¤		return ADD_DOCUMENT_UO;¤	}¤¤	public static int getAddCurrentDocumentUvs() {¤		return ADD_CURRENT_DOCUMENT_UVS;¤	}¤¤	public static int getAddUoCurrentDocumentUvs() {¤		return ADD_UO_CURRENT_DOCUMENT_UVS;¤	}¤/*¤	public static int getAddUoCurrentDocumentUvsFromDashboard() {¤		return ADD_UO_CURRENT_DOCUMENT_UVS_FROM_DASHBOARD;¤	}¤*/¤	public static int getAddRegionPartnerQuery() {¤		return ADD_REGION_PARTNER_DOCUMENT_UO;¤	}¤¤	public static boolean isServerOnLinux(String spaceKey) {¤		String g = System.getenv("DOCCARD_E_COPY_DEPOSITORY");¤		if(StringUtils.isNotEmpty(g) && true == g.equalsIgnoreCase(getServerFolder(spaceKey))){¤			return true;¤		}¤		return false;¤	}¤¤	public static String makeDocCardName(DocCard docCard) {¤		return makeDocCardName(docCard.getDocIssuer(), docCard.getNumber(), docCard.getType(),  docCard.getCreationDate(), docCard.getName());¤	}¤	¤	public static String makeDocCardName(GarDocDAO docCard) {¤		return makeDocCardName(docCard.getDocIssuer(), docCard.getNumber(), (docCard.getType()!=null)?docCard.getType().getName():null,  docCard.getCreationDate(), docCard.getName());¤	}¤	¤	¤	public static String makeDocCardName(Long ogvPageId, String number,¤			String typeName, Date creationDate, String title) {¤		return makeDocCardName(ContainerManager.Factory.get().getPageManager()¤				.getPage(ogvPageId).getTitle(), number, typeName, creationDate, title);¤	}¤¤	public static String makeDocCardName(String ogvPageName, String number,¤			String typeName, Date creationDate, String title) {¤		String docCardTitle = null;¤		if (StringUtils.isEmpty(number)) {¤			docCardTitle = ((StringUtils.isNotEmpty(typeName))?typeName+ " ":"")¤					+ ogvPageName¤					+ ((null == creationDate) ? "" : " от "¤							+ new SimpleDateFormat("dd.MM.yyyy")¤									.format(creationDate))¤					+ ((StringUtils.isEmpty(title)) ? "" : " \"" + title + "\"");¤¤		} else {¤			docCardTitle = ((StringUtils.isNotEmpty(typeName))?typeName+ " ":"")¤					+ ogvPageName¤					+ ((null == creationDate) ? "" : " от "¤							+ new SimpleDateFormat("dd.MM.yyyy")¤									.format(creationDate)) + " № " + number¤					+ ((StringUtils.isEmpty(title)) ? "" : " \"" + title + "\"");¤		}¤		return docCardTitle;¤	}¤¤	final private static String TEXT_ESCAPED_SYMBOLS = "[]{}*!-+";¤¤	public static String encodeToWiki(String str) {¤		for (int i = 0; i < TEXT_ESCAPED_SYMBOLS.length(); i++) {¤			String s = String.valueOf(TEXT_ESCAPED_SYMBOLS.charAt(i));¤			str = str.replace(s, String.format("\\%s", s));¤		}¤		return str;¤	}¤¤	public static String decodeFromWiki(String str) {¤		for (int i = 0; i < TEXT_ESCAPED_SYMBOLS.length(); i++) {¤			String s = String.valueOf(TEXT_ESCAPED_SYMBOLS.charAt(i));¤			str = str.replace(String.format("\\%s", s), s);¤		}¤		return str;¤	}¤¤	public static List<String> getUsersNameFromUsers(List<User> users) {¤		List<String> userNames = new ArrayList<String>(users.size());¤		for (User user : users) {¤			userNames.add(user.getName());¤		}¤		return userNames;¤	}¤¤	public static String getDescriptionForECopyInViewPage(UVSQuery q) {¤		String ret = "";¤		if (isAbstractECopyType(q.getCopyType())) {¤			ret += "(";¤			if (q.getCopyType().equals(new SiteCopyDAO().getType())) {¤				ret += (StringUtils.isEmpty(q.getSourceWebSite())) ? "источник не известен"¤						: "скачан с "¤								+ ("<a href=\"http://" + q.getSourceWebSite()¤										+ "\">" + q.getSourceWebSite() + "</a>");¤				ret += ", ";¤			}else if (q.getCopyType().equals(new ECopyDAO().getType())) {¤				ret += "получен по рассылке";¤				ret += ", ";¤			}¤¤			if (false == StringUtils.isEmpty(q.getDepositoryEcopy())) {¤				ret += q.getDepositoryEcopy();¤			} else {¤				ret += "местонахождение не известно";¤			}¤			ret += ")";¤¤		}¤		return ret;¤	}¤¤	public static String getOldGarDocNumber(UVSQuery uvs) {¤		// "{note}" + "*" + getText("uvsquery.number.request.in.gardoc") + "*" +¤		// ": " + getReqNumberInGarDoc () + "{note}";¤		Pattern p = Pattern.compile("\\{note\\}\\*"¤				+ ru.garant.shared.GCI.I18N.Messages.Factory.messages().get(¤						"uvsquery.number.request.in.gardoc")¤				+ "\\*\\: ([0-9 ,]+?)\\{note\\}");¤		Matcher m = p.matcher(uvs.getPage().getContent());¤		if (m.find()) {¤			return decodeFromWiki(m.group(1));¤		}¤		return "";¤	}¤¤	public static String getUOSummary(UVSQuery uvs) {¤		// "{note}" + "*" + getText("uvsquery.number.request.in.gardoc") + "*" +¤		// ": " + getReqNumberInGarDoc () + "{note}";¤		Pattern p = Pattern.compile("\\{note\\}\\*"¤				+ ru.garant.shared.GCI.I18N.Messages.Factory.messages().get(¤						"uvsquery.uo.comment") + "\\*\\: (.+?)\\{note\\}");¤		Matcher m = p.matcher(uvs.getPage().getContent());¤		if (m.find()) {¤			String tp =  decodeFromWiki(m.group(1));¤			return tp;¤		}¤		return "";¤	}¤	¤	public static String getHead(UVSQuery uvs){¤		Pattern p = Pattern.compile("(\\{note\\}\\*"¤				+ ru.garant.shared.GCI.I18N.Messages.Factory.messages().get(¤						"uvsquery.uo.comment") + "\\*\\: .+?\\{note\\})");¤		Matcher m = p.matcher(uvs.getPage().getContent());¤		if (m.find()) {¤			return  ContainerManager.Factory.get().getWikiStyleRenderer().convertWikiToXHtml(new PageContext(), m.group(1));¤		}¤		return "";¤	}¤¤	¤	public static String getUVSCommentFromContent(UVSQuery uvs) {¤		String ret = "";¤		Pattern p = Pattern.compile("\\{note\\}\\*"¤				+ ru.garant.shared.GCI.I18N.Messages.Factory.messages().get(¤						"createuvsquery.notice") + "\\*\\: (.+?)\\{note\\}");¤		Matcher m = p.matcher(uvs.getPage().getContent());¤		if (m.find()) {¤			ret += decodeFromWiki(m.group(1));¤		}¤		return ret;¤	}¤¤	¤	¤	public static String getUVSSummary(UVSQuery uvs) {¤		String ret = "";¤		if (StringUtils.isNotBlank(uvs.getCopySpecification())) {¤			ret += "Копия " + uvs.getCopySpecification();¤		}¤		String uvsComment = getUVSCommentFromContent(uvs);¤		if (StringUtils.isNotBlank(ret) && StringUtils.isNotBlank(uvsComment)) {¤			ret += ". ";¤		}¤		if(StringUtils.isNotBlank(uvsComment)){¤			ret += uvsComment;¤		}¤		¤		return ret.trim();¤	}¤¤	public static String getUOCurrentDocSummary(UVSQuery uvs) {¤		// "{note}" + "*" + getText("uvsquery.number.request.in.gardoc") + "*" +¤		// ": " + getReqNumberInGarDoc () + "{note}";¤		Pattern p = Pattern.compile("\\{note\\}\\*Примечание РП\\*\\: (.+?)\\{note\\}");¤		Matcher m = p.matcher(uvs.getPage().getContent());¤		if (m.find()) {¤			return decodeFromWiki(m.group(1));¤		}¤		return "";¤	}¤¤	public final static String NO_EXPORT = "gardoc_noexport";¤	public final static String DO_NOTHING = "gardoc_donothing";¤	public final static String NEED_REREDING_LABEL_NAME = "gardoc_rereading";¤	public final static String ADD_TO_TOPIK_LABEL_NAME = "gardoc_addtotopik";¤	public final static String OGV_NOT_CURRENT_LABEL_NAME = "ogv_not_current";¤	public final static String GARDOC_UVSCOMMENT_TO_ARCHI_LABEL_NAME = "gardoc_uvscomment_to_archi";¤	public final static String KARTOCHKA = "gardoc_kart";¤¤	public static Map<String, String> managerCommandsList_ = null;¤	public static Set<String> commandsForReplayImage_ = null;¤	¤	public static Set<String> getCommandsForReplayImage(){¤		if (commandsForReplayImage_ == null) {¤			synchronized (DpoUvsHelper.class) {¤				if (commandsForReplayImage_ == null) {¤					commandsForReplayImage_ = new HashSet<String>();¤					commandsForReplayImage_.add(DO_NOTHING);¤					commandsForReplayImage_.add(NEED_REREDING_LABEL_NAME);¤					commandsForReplayImage_.add(ADD_TO_TOPIK_LABEL_NAME);¤				}¤			}			¤		}¤		return commandsForReplayImage_;¤	}¤	¤	public static Map<String, String> getManagerCommands(){¤		 if(managerCommandsList_ == null){¤			 managerCommandsList_ = new HashMap<String, String>();¤			 managerCommandsList_.put(DO_NOTHING, "ПОВТОР");¤			 managerCommandsList_.put(ADD_TO_TOPIK_LABEL_NAME, "ДОБАВИТЬ К ТОПИКУ");¤			 managerCommandsList_.put(NEED_REREDING_LABEL_NAME, "НЕОБХОДИМА ПОВТОРНАЯ ВЫЧИТКА");¤			 managerCommandsList_.put(NO_EXPORT, "НЕ ЭКСПОРТИРОВАТЬ В АРЧИ");¤		 }¤		 return managerCommandsList_;¤	}¤	¤	public static Set<String> getManagerCommandsKeys(){¤		return getManagerCommands().keySet();¤	}¤¤	public static CopyDAO getRecentlyAddedCopy(GarDocDAO gardoc)¤			throws HibernateException {¤		CopyDAO recentlyAddedCopy = Collections.max(gardoc.getCopies(),¤				new Comparator<CopyDAO>() {¤					@Override¤					public int compare(CopyDAO arg0, CopyDAO arg1) {¤						return arg0.getCreationDate().compareTo(¤								arg1.getCreationDate());¤					}¤				});¤		return recentlyAddedCopy;¤	}¤¤	public static String getSummary(UVSQuery r, GarDocDAO gardoc) {¤		String ret = "";¤		if (1 == gardoc.getRestrictedStatus()) {¤			ret += "ДСП.";¤		}¤¤		if (StringUtils.isNotBlank(r.getCopyType())) {¤			if (r.getCopyType().equals(new PaperCopy().getType())) {¤				ret += " Бумажный.";¤			} else if (r.getCopyType().equals(new PaperScanCopy().getType())) {¤				ret += " Бумажный (скан)";¤				if (StringUtils.isNotEmpty(r.getDepositoryEcopy())) {¤					ret += ", " + r.getDepositoryEcopy() + ".";¤				} else {¤					ret += ".";¤				}¤			} else if (r.getCopyType().equals(new ECopyDAO().getType())) {¤				ret += " Электронный (рассылка)";¤				if (StringUtils.isNotEmpty(r.getDepositoryEcopy())) {¤					ret += ", " + r.getDepositoryEcopy() + ".";¤				} else {¤					ret += ".";¤				}¤			} else if (r.getCopyType().equals(new SiteCopyDAO().getType())) {¤				if (StringUtils.isNotEmpty(r.getSourceWebSite())) {¤					ret += " Электронный (сайт: <a href="¤							+ r.getSourceWebSite() + ">" + r.getSourceWebSite()¤							+ "</a>)";¤				} else {¤					ret += " Электронный (сайт)";¤				}¤¤				if (StringUtils.isNotEmpty(r.getDepositoryEcopy())) {¤					ret += ", " + r.getDepositoryEcopy() + ".";¤				} else {¤					ret += ".";¤				}¤			}¤		}¤¤		String uoSummary = null;¤		if (StringUtils.isNotBlank(getOldGarDocNumber(r))) {¤			uoSummary = "<br>ГЛ ЮО. ГАРДок: " + getOldGarDocNumber(r) + ".";¤		}¤		if (StringUtils.isNotBlank(getExternalAuthorsFromHelpDesk(r))) {¤			if (uoSummary == null) {¤				uoSummary = "<br>ГЛ ЮО. ";¤			}¤			uoSummary += getExternalAuthorsFromHelpDesk(r);¤		}¤¤		String s = getUOSummary(r);¤		if (StringUtils.isNotBlank(s)) {¤			if (uoSummary == null) {¤				uoSummary = "<br>ГЛ ЮО.";¤			}¤			uoSummary += " " + s;¤		}¤¤		if (uoSummary != null) {¤			ret += uoSummary;¤		}¤¤		s = DpoUvsHelper.getUVSSummary(r);¤		if (StringUtils.isNotBlank(s)) {¤			ret += "<br>УВС. " + s;¤		}¤¤		s = DpoUvsHelper.getRPSummary(r, gardoc);¤		s += getUOCurrentDocSummary(r);¤		if (StringUtils.isNotBlank(s)) {¤			ret += "<br>РП: " + s;¤		}¤		if (gardoc.getTopic() != 0) {¤			ret += "<br>Топик: " + gardoc.getTopic();¤		}¤		return ret.trim();¤	}¤¤	public static String getExternalAuthorsFromHelpDesk(UVSQuery request) {¤		if (request.getExternalAuthors() == null¤				|| request.getExternalAuthors().size() == 0) {¤			return "";¤		}¤		String result = "";¤¤		for (ru.garant.MDProcess.ConfluenceMDChange.Requests.Observer observer : request¤				.getExternalAuthors()) {¤			if (StringUtils.isNotEmpty(result)) {¤				result += ", ";¤			} else {¤				result = ru.garant.shared.GCI.I18N.Messages.Factory¤						.messages()¤						.get("uvsquerymanager.externalauthorsfromhelpdesk.request.number")¤						+ ": ";¤			}¤			result += observer.getHelpDeskQuery();¤		}¤		return result;¤	}¤¤	public static String makeInstancy (UVSQuery request) {¤		String ret = "";¤		if (InstancyTypes.IN_VERSION == request.getDocCard().getInstancy()) {¤			ret += "В ВЕРСИЮ!";¤		}¤		if (InstancyTypes.QUICKLY == request.getDocCard().getInstancy()) {¤			ret += "СРОЧНО!";¤		}¤		return ret;		¤	}¤¤	public static boolean hasManagerCommand (UVSQuery request) {¤		Label labelAddToTopik = ContainerManager.Factory.get().getLabelManager().getLabel(ADD_TO_TOPIK_LABEL_NAME);¤		Label needReReading = ContainerManager.Factory.get().getLabelManager().getLabel(NEED_REREDING_LABEL_NAME);¤		if (labelAddToTopik != null && request.getPage().getLabels().contains(labelAddToTopik)) {¤			return true;¤		} else if (needReReading != null && request.getPage().getLabels().contains(needReReading)) {¤			return true;¤		}¤		¤		return false;¤	}¤	¤	public static boolean hasUVSCommentAndNeedTranslateToArchi(UVSQuery request) {¤		//если указан лэйбл УВС_комментарий_в_Арчи  И   есть коммент УВС ТО возращаем ТРУ¤		Label labelPropertyUvsComment = ContainerManager.Factory.get().getLabelManager().getLabel(GARDOC_UVSCOMMENT_TO_ARCHI_LABEL_NAME);¤		if(labelPropertyUvsComment != null ¤				&& request.getPage().getLabels().contains(labelPropertyUvsComment) ¤				&& StringUtils.isNotEmpty(getUVSCommentFromContent(request))¤		){¤			return true;¤		}¤		return false;¤	}¤	¤	public static boolean hasCommandForReplayImage (UVSQuery request) {¤		for (String s : getCommandsForReplayImage()) {¤			Label label = ContainerManager.Factory.get().getLabelManager().getLabel(s);¤			if (label != null && request.getPage().getLabels().contains(label)) {¤				return true;¤			}¤		}¤		return false;¤	}¤	¤	public static boolean hasDoNothingCommand (UVSQuery request) {¤		Label label = ContainerManager.Factory.get().getLabelManager().getLabel(DO_NOTHING);¤		if (label != null && request.getPage().getLabels().contains(label)) {¤			return true;¤		}¤		return false;¤	}¤	¤	public static String getAdditionalImageCommand (UVSQuery request) {¤		String ret = "";¤		Label labelAddToTopik = ContainerManager.Factory.get().getLabelManager().getLabel(ADD_TO_TOPIK_LABEL_NAME);¤		Label needReReading = ContainerManager.Factory.get().getLabelManager().getLabel(NEED_REREDING_LABEL_NAME);¤		if (labelAddToTopik != null && request.getPage().getLabels().contains(labelAddToTopik)) {¤			ret += "ДОБАВИТЬ К ТОПИКУ";¤		} else if (needReReading != null && request.getPage().getLabels().contains(needReReading)) {¤			ret += "НЕОБХОДИМА ПОВТОРНАЯ ВЫЧИТКА";¤		}¤		return ret;¤	}¤	public static String getRPSummary(UVSQuery request, GarDocDAO gardoc) {¤		String ret = "";¤¤		if (DPOUVSManager.Factory.get(request.getPage().getSpaceKey()).hasAnotherSource(request)) {¤			ret += getAdditionalImageCommand(request) + ".";¤		} else {¤			if (InstancyTypes.IN_VERSION.ordinal() == gardoc.getInstancy()) {¤				ret += "В ВЕРСИЮ! ";¤			}¤			if (InstancyTypes.QUICKLY.ordinal() == gardoc.getInstancy()) {¤				ret += "СРОЧНО! ";¤			}¤¤			if (gardoc.getInternet()) {¤				ret += "ИНТЕРНЕТ. ";¤			}¤¤			if (gardoc.getIsConnected() == ConnectedStatus.IS_CONNECTED.ordinal()) {¤				if (gardoc.getBlocks() != null¤						&& gardoc.getBlocks().size() > 0) {¤					ret += "Будет подключен в "¤							+ DpoUvsHelper.getBlockNames(gardoc.getBlocks()) + ".";¤				} else {¤					ret += "Будет подключен.";¤				}¤			} else if (gardoc.getIsConnected() == ConnectedStatus.IS_NOT_CONNECTED.ordinal()) {¤				if (gardoc.getBlocks() != null¤						&& gardoc.getBlocks().size() > 0) {¤					ret += "НЕ будет подключен. Карточка. Блоки: "¤							+ DpoUvsHelper.getBlockNames(gardoc.getBlocks()) + ".";¤				} else {¤					ret += "НЕ будет подключен. Карточка.";¤				}¤			} else {¤				if (gardoc.getBlocks() != null¤						&& gardoc.getBlocks().size() > 0) {¤					ret += "Блоки: "¤							+ DpoUvsHelper.getBlockNames(gardoc.getBlocks()) + ".";¤				}¤			}¤		}¤		ret += addRpCommentFromContent(request);¤		return ret.trim();¤	}¤¤	public static String addRpCommentFromContent(UVSQuery request) {¤		String ret = "";¤		Pattern p = Pattern.compile("\\{note\\}\\*"¤				+ ru.garant.shared.GCI.I18N.Messages.Factory.messages().get(¤						"uvsquery.rp.comment") + "\\*\\: (.+?)\\{note\\}");¤		Matcher m = p.matcher(request.getPage().getContent());¤		if (m.find()) {¤			ret += " " + decodeFromWiki(m.group(1));¤		}¤¤		ret += " ";¤		return ret;¤	}¤¤	public static boolean isUVSSearchByMainAttrOnly(¤			RequestSearchQueryData requestSearchQueryData) {¤		final RequestSearchQueryResultType searchQueryResultType = requestSearchQueryData¤				.getRequestSearchQueryResultType();¤		if (RequestSearchQueryResultType.UVSQUERY == searchQueryResultType) {¤			String actionName = ActionContextThreadLocalFactory.Factory.get()¤					.getContext().getName();¤			if (StringUtils.isNotEmpty(actionName)¤					&& actionName.equals("searchuvsquery.action")) {¤				if (CollectionUtils.isNotEmpty(requestSearchQueryData¤						.getAuthors())¤						|| CollectionUtils.isNotEmpty(requestSearchQueryData¤								.getExecutors())¤						|| CollectionUtils.isNotEmpty(requestSearchQueryData¤								.getExecutorsInHistory())¤						|| CollectionUtils.isNotEmpty(requestSearchQueryData¤								.getGroups()) // ses: так разделяем поиск по¤												// текущим и запросным¤												// документам¤						|| CollectionUtils.isNotEmpty(requestSearchQueryData¤								.getSources())) {¤					return false;¤				} else {¤					return true;¤				}¤			}¤		}¤		return false;¤	}¤¤	public static boolean haveDepositoryInitialValue(String spaceKey) {¤		User user = AuthenticatedUserThreadLocal.getUser();¤		if (user == null)¤			return false;¤		AutoCompleteProvider autoCompleteProvider = getAutoCompleteProvider(¤				spaceKey, user);¤		String depository = autoCompleteProvider¤				.getFirstSuggestedValue("listrequest.action.depository");¤		String date = new SimpleDateFormat("MM_dd").format(new Date());¤		if (depository.contains(date)) {¤			return true;¤		}¤		return false;¤	}¤¤	public static AutoCompleteProvider getAutoCompleteProvider(String spaceKey,¤			User user) {¤		AutoCompleteProvider autoComplete = AutoCompleteProvider.Factory.get(¤				user.getName(), "UVSQUERY" + spaceKey);¤		if (!autoComplete.getInitialized()) {¤			autoComplete.setMaxValues(1);¤			autoComplete.setInitialized();¤		}¤		return autoComplete;¤	}¤¤	public static String getTitleFromId(String idString) {¤		if (StringUtils.isNotEmpty(idString) && StringUtils.isNumeric(idString)) {¤			long id = Long.parseLong(idString);¤			if (id > 0) {¤				Page page = ContainerManager.Factory.get().getPageManager()¤						.getPage(id);¤				return page.getTitle();¤			}¤		}¤		return "";¤	}¤¤	public static void importOGVandIDFromFile() {¤		Map<String, List<Long>> ogvList = getOGVandIDFromFile();¤		Set<String> ogvNames = ogvList.keySet();¤		Session session = SessionFactoryUtils.getSession(¤				ContainerManager.Factory.get().getSessionFactory(), false);¤		boolean isOdUoResponsible = false;¤		boolean isOdUoResponsibleForProjectRequerst = false;¤		try {¤			for (String ogvName : ogvNames) {¤				List<Long> idsList = ogvList.get(ogvName);¤				String title = ogvName.trim();¤				for (long id : idsList) {¤					OGVLinksDAO ogvLinks = OGVLinksDAO.get(id);¤					if (ogvLinks == null) {¤						ogvLinks = new OGVLinksDAO();¤						ogvLinks.setId(id);¤						Page page = ContainerManager.Factory.get()¤								.getPageManager().getPage(id);¤						ogvLinks.setPage(page);¤					}¤					if (ogvLinks.getLogin() == null) {¤						List<String> userNames = OGVLinksManager.Factory.get(ogvLinks.getPage().getSpaceKey()).getResponsiblesByTitle(title, isOdUoResponsible,	isOdUoResponsibleForProjectRequerst);¤						if (userNames != null && userNames.size() > 0) {¤							if (userNames.size() == 1) {¤								String userName = userNames.get(0);¤								ogvLinks.setLogin(userName);¤							} else {¤								Logs.LOG_E("DpoUvsHelper::importOGVandIDFromFile - unable to set responsible, find "¤										+ userNames.size()¤										+ " responsibles for title: " + title);¤							}¤						}¤					}¤					ogvLinks.setTitle(title);¤					session.save(ogvLinks);¤				}¤			}¤		} catch (HibernateException e) {¤			Logs.LOG_E("DpoUvsHelper::importOGVandIDFromFile - invalid document format - "¤					+ e);¤		}¤	}¤¤	public static Map<String, List<Long>> getOGVandIDFromFile() {¤		Map<String, List<Long>> ogvList = new HashMap<String, List<Long>>();¤		try {¤			InputStream io = ru.garant.MDProcess.ConfluencePluginTarget.ConfluencePluginTargetMain.class¤					.getResourceAsStream("Updates/" + ATTACH_NAME);¤			final Workbook workbook = WorkbookFactory.create(io);¤			final Sheet protocolSheet = workbook.getSheetAt(0);¤¤			int i = TARGET_ROW;¤			Cell cell = null;¤			Row row = null;¤			String title = null;¤			do {¤				row = protocolSheet.getRow(i);¤				if (row != null) {¤					cell = row.getCell(TARGET_CELL);¤					if (cell != null) {¤						title = cell.getStringCellValue();¤						String idsString = null;¤						if (title.length() > 0) {¤							if (title != null && title.contains("(")¤									&& title.contains(")")) {¤								String ogvName = title.substring(0,¤										title.lastIndexOf("("));¤								idsString = title.substring(¤										title.lastIndexOf("(") + 1,¤										title.lastIndexOf(")"));¤								String[] ids = idsString.split(",");¤								List<Long> idsList = new ArrayList<Long>();¤								if (ogvList.containsKey(ogvName)) {¤									idsList = ogvList.get(ogvName);¤								}¤								for (String ogvId : ids) {¤									if (StringUtils.isNotEmpty(ogvId)¤											&& StringUtils.isNumeric(ogvId)) {¤										idsList.add(Long.parseLong(ogvId));¤									}¤								}¤¤								ogvList.put(ogvName, idsList);¤							}¤						}¤					}¤				}¤				i++;¤			} while (cell != null && row != null);¤¤		} catch (InvalidFormatException e) {¤			Logs.LOG_E("DpoUvsHelper::importOGVandIDFromFile - invalid document format - "¤					+ e);¤		} catch (Exception e) {¤			Logs.LOG_SEX(e);¤			Logs.LOG_E("DpoUvsHelper::importOGVandIDFromFile - can not read from attached file - "¤					+ e);¤		}¤		return ogvList;¤	}¤¤	public static void changeUvsQueryVersionsGardoc(long uvsQueryId,¤			GarDocDAO garDocDAO) throws Exception {¤		List<UVSQuestDAO> uvsQueries = UVSQueryManager.Factory.get()¤				.getAllVersions(uvsQueryId);¤		for (UVSQuestDAO uvsQuest : uvsQueries) {¤			uvsQuest.setGardoc(garDocDAO);¤			SessionFactoryUtils.getSession(¤					ContainerManager.Factory.get().getSessionFactory(), false)¤					.flush();¤		}¤	}¤¤	public static String getIsConnectedName(DocCard docCard) {¤		return docCard.getIsConnected().name();¤	}¤¤	public static String getInstancyName(DocCard docCard) {¤		return docCard.getInstancy().name();¤	}¤¤	public static String getIncludeInVersionDate(DocCard docCard) {¤		if(docCard.getIncludeInVersionDate() == null){¤			return  "";¤		}¤		return new SimpleDateFormat("dd.MM.yyyy").format(docCard.getIncludeInVersionDate());¤	}¤¤	public static String getBlockNames(List<BlockDAO> blocks) {¤		String blockNames = "";¤		Iterator iter = blocks.iterator();¤		while (iter.hasNext()) {¤			BlockDAO block = (BlockDAO) iter.next();¤			if (StringUtils.isNotBlank(blockNames)) {¤				blockNames += ", ";¤			}¤			blockNames += block.getShortName();¤		}¤		return blockNames;¤	}¤¤	public static boolean getIsConnectedBlock(String name,¤			java.util.List<BlockDAO> blocks) {¤		Iterator iter = blocks.iterator();¤		while (iter.hasNext()) {¤			BlockDAO block = (BlockDAO) iter.next();¤			if (block.getShortName().equals(name) && block.getIsUsed()) {¤				return true;¤			}¤		}¤		return false;¤	}¤¤	public String getWikiToShowAttachedFiles(Page req) {¤		String ret = "";¤		return ret;¤	}¤¤	public String convertWikiToHTML(Page content, String str) {¤		return ContainerManager.Factory.get().getWikiStyleRenderer()¤				.convertWikiToXHtml(content.toPageContext(), str);¤	}¤¤	public static final String IS_UO_RP_EVENT = "IS_UO_RP_EVENT";¤¤	public String getRequestFormBackgroundColor(long requestId)¤			throws Exception {¤		return super.getRequestFormBackgroundColor(requestId);¤	}¤¤	public static String getMainConnectedBlockName(List<BlockDAO> blocks) {¤		if (blocks.size() > 0) {¤			String blockString = blocks.get(0).getShortName();¤			String notMainBlocks = "";¤			for(int i = 1; i < blocks.size(); i++){¤				if(StringUtils.isNotEmpty(notMainBlocks)){¤					notMainBlocks += ", ";¤				}¤				notMainBlocks += blocks.get(i).getShortName();¤			}¤			if(StringUtils.isNotEmpty(notMainBlocks)){¤				blockString += " (" + notMainBlocks + ")";¤			}¤			return blockString;¤		}¤		return "нет";¤	}¤¤	public static List<String> getInitialBlockNames(List<BlockDAO> blocks) {¤		List<String> blockNames = new ArrayList<String>();¤		if (blocks != null) {¤			for (Iterator iterator = blocks.iterator(); iterator.hasNext();) {¤				BlockDAO block = (BlockDAO) iterator.next();¤				blockNames.add(block.getShortName());¤			}¤		}¤		return blockNames;¤	}¤¤	public static boolean isProjectManager(String user, String spaceKey) {¤		Group group = DPOUVSManager.Factory.get(spaceKey)¤				.getProjectManagersGroupsInOdUo();¤		boolean userGroup = false;¤		if (group != null) {¤			userGroup = ContainerManager.Factory.get().getUserAccessor()¤					.hasMembership(group.getName(), user);¤		}¤¤		return userGroup;¤	}¤¤	public static boolean isProjectManager(String user, String spaceKey,¤			boolean isProject) {¤		Group group = DPOUVSManager.Factory.get(spaceKey)¤				.getProjectManagersGroupsInOdUo();¤		if (group != null) {¤			return ContainerManager.Factory.get().getUserAccessor()¤					.hasMembership(group.getName(), user);¤		}¤¤		return false;¤	}¤¤	public static AutoCompleteProvider getAutoCompleteProvider(String user,¤			String spaceKey) {¤		AutoCompleteProvider autoComplete = AutoCompleteProvider.Factory.get(¤				user, "UVSQUERY" + spaceKey);¤		if (!autoComplete.getInitialized()) {¤			autoComplete.setMaxValues(1);¤			autoComplete.setInitialized();¤		}¤		return autoComplete;¤	}¤¤	public static boolean getPaperCopyNotification(String user,¤			String spaceKey, long docCardId) {¤		AutoCompleteProvider autoComplete = DpoUvsHelper¤				.getAutoCompleteProvider(user, spaceKey);¤		String values = autoComplete¤				.getFirstSuggestedValue("creation.paper.copy.notification.for.rp");¤		if (values.contains(docCardId + "")) {¤			return true;¤		}¤		return false;¤	}¤¤	private static Label draftUvsLabel_ = null;¤¤	public static Label getLabelDraftUvs() {¤		if (draftUvsLabel_ == null) {¤			draftUvsLabel_ = ContainerManager.Factory.get().getLabelManager()¤					.getLabel("draft_uvs");¤		}¤		return draftUvsLabel_;¤	}¤¤	public static boolean isProject(Page page) {¤		if (page.getLabels().contains(getLabelDraftUvs())) {¤			return true;¤		} else {¤			return false;¤		}¤	}¤¤	public static List<String> getBlockNamesFromBlockDAO(List<BlockDAO> blocks) {¤		List<String> blockNames = new ArrayList<String>();¤		if (blocks != null) {¤			for (BlockDAO block : blocks) {¤				blockNames.add(block.getShortName());¤			}¤		}¤		return blockNames;¤	}¤¤	private static final String ATTACH_NAME = "ogv_report.xls";¤	private static final int TARGET_ROW = 6;¤	private static final short TARGET_CELL = 2;¤¤	public final static long NTDIssuerPageId_ = 252084514;¤	public final static long RosstandartIssuerPageId_ = 244193874;¤	public final static long GOS_DUMA_PAGE_ID = 241696954;¤	public final static long MinFinId_ = 241696803;¤	public final static long VishijArbitrazhnijSudId_ = 241696800;¤	public final static long OSJDId_ = 249955389;¤	¤	protected static final String OTHER_OWN_BACKGROUND_COLOR = "#FFFFCC";¤¤	public final static long PismoId_ = 8;¤	public final static long OpredelenieId_ = 45;¤	public final static long IzmeneniaIDopolneniaId_ = 122;¤¤	¤	public static class NumberEqualsRules {¤		static public boolean isEquals(String n1, String n2) {¤			return normalize(n1).equals(normalize(n2));¤		}¤¤		static public String normalize(String n) {¤			n = n.trim().toUpperCase();¤			if (n.endsWith("@")) {¤				return getAnotherFrom(n);¤			}¤			return n;¤		}¤¤		static public String getAnotherFrom(String n) {¤			return (n.endsWith("@")) ? n.substring(0, n.length() - 1) : n + "@";¤		}¤	}¤¤	public static String getDailyPathForPaperImages(final String path, final String spaceKey) {¤		return DpoUvsHelper¤				.convertToServerPathToFileWithCopy(path¤						+ new SimpleDateFormat("MM_dd").format(new Date()), spaceKey);¤	}¤¤	public static String getDailyPathForClearPaperImages(final String path, final String spaceKey) {¤		return DpoUvsHelper¤				.convertToServerPathToFileWithCopy(path¤						+ new SimpleDateFormat("MM_dd").format(new Date()), spaceKey) + "_clear";¤	}¤¤	public static List<File> getPaperImageFilesFromDir(File directory) {¤		List<File> images = new ArrayList<File>();¤		if (directory.isDirectory()) {¤			List<File> files = Arrays.asList(directory.listFiles());¤			for (File file : files) {¤				if (file.getName().startsWith("!")¤						&& StringUtils.isNumeric(file.getName().substring(1,¤								file.getName().lastIndexOf(".")))) {¤					images.add(file);¤				}¤			}¤			¤		}¤		return images;¤	}¤¤	public static String getQueryName(String fileName) {¤		return fileName.substring(1, fileName.lastIndexOf("."));¤	}¤¤	public static Date getSrcDate(String srcDateString) {¤		if (srcDateString == null) {¤			return null;¤		}¤		srcDateString = srcDateString.trim();¤		Date srcDate = null;¤		String dateString = null;¤		if (srcDateString.length() == 4 && StringUtils.isNumeric(srcDateString)) {¤			dateString = "01.01." + srcDateString;¤		} else if (srcDateString.length() == 7¤				&& srcDateString.indexOf(".") == 2) {¤			dateString = "01." + srcDateString;¤		} else if (srcDateString.length() == 10¤				&& srcDateString.indexOf(".") == 2¤				&& srcDateString.lastIndexOf(".") == 5) {¤			dateString = srcDateString;¤		} else {¤			return null;¤		}¤¤		try {¤			srcDate = new SimpleDateFormat("dd.MM.yyyy").parse(dateString);¤		} catch (ParseException e) {¤			Logs.LOG_SEX(e);¤		}¤		return srcDate;¤	}¤¤	public static String getSrcDateString(Date date) {¤		String dateString = DateUtils.formatDdMMyyyDate(date);¤		String beginWith = "01.01.";¤		if (dateString.startsWith(beginWith)) {¤			dateString = dateString.substring(beginWith.length());¤		}¤		return dateString;¤	}¤¤	public static String getExternalAuthorFromHelpDeskDAOString(¤			ru.garant.MDProcess.ConfluenceMDChange.Requests.Observer observer) {¤		return (StringUtils.isEmpty(observer.getHelpDeskQuery()) ? "" : "<a href='http://opp1.garant.ru/helpdesk/-/index.phtml?ac=showtask&task=" + observer.getHelpDeskQuery() + "'>" + observer.getHelpDeskQuery() + "</a>")¤				+ " "¤				+ (StringUtils.isEmpty(observer.getFullName()) && StringUtils.isEmpty(observer.getEmail()) ? "" : Messages.Factory.messages().get("uvsquerymanager.externalauthorsfromhelpdesk.from"))¤				+ " "¤				+ (StringUtils.isEmpty(observer.getFullName()) ? "" : observer.getFullName())¤				+ (StringUtils.isEmpty(observer.getEmail()) ? "" : "(" + observer.getEmail()¤						+ ")")¤				+ (StringUtils.isEmpty(observer.getComment()) ? "" : ", " + observer.getComment())¤				;¤	}¤¤	public static String getExternalAuthorFromHelpDeskDAOStringForSummary(¤			ru.garant.MDProcess.ConfluenceMDChange.Requests.Observer observer) {¤		return (StringUtils.isEmpty(observer.getHelpDeskQuery()) ? "" : observer.getHelpDeskQuery())¤				+ " "¤				+ (StringUtils.isEmpty(observer.getFullName()) && StringUtils.isEmpty(observer.getEmail()) ? "" : Messages.Factory.messages().get("uvsquerymanager.externalauthorsfromhelpdesk.from"))¤				+ " "¤				+ (StringUtils.isEmpty(observer.getFullName()) ? "" : observer.getFullName())¤				+ (StringUtils.isEmpty(observer.getEmail()) ? "" : "(" + observer.getEmail()¤						+ ")");¤	}¤¤	private static Label uoQueryLabel_ = null;¤¤	public static Label getUoQueryLabel() {¤		if (uoQueryLabel_ == null) {¤			uoQueryLabel_ = ContainerManager.Factory.get().getLabelManager()¤					.getLabel("rt_uo_query");¤		}¤		return uoQueryLabel_;¤	}¤¤	private static Label currentDocLabel_ = null;¤¤	public static Label getCurrentDocLabel() {¤		if (currentDocLabel_ == null) {¤			currentDocLabel_ = ContainerManager.Factory.get().getLabelManager()¤					.getLabel("rt_current_doc");¤		}¤		return currentDocLabel_;¤	}¤¤	private static Label uoCurrentDocLabel_ = null;¤¤	public static Label getUoCurrentDocLabel() {¤		if (uoCurrentDocLabel_ == null) {¤			uoCurrentDocLabel_ = ContainerManager.Factory.get().getLabelManager()¤					.getLabel("rt_uo_current_doc");¤		}¤		return uoCurrentDocLabel_;¤	}¤¤	private static Label regionQueryLabel_ = null;¤¤	public static Label getRegionQueryLabel() {¤		if (regionQueryLabel_ == null) {¤			regionQueryLabel_ = ContainerManager.Factory.get()¤					.getLabelManager().getLabel("rt_region_query");¤		}¤		return regionQueryLabel_;¤	}¤	¤	public static Label getGardocNoExportLabel() {¤		if (gardocNoExportLabel_ == null) {¤			gardocNoExportLabel_ = ContainerManager.Factory.get()¤					.getLabelManager().getLabel("gardoc_noexport");¤		}¤		return gardocNoExportLabel_;¤	}¤	private static Label gardocNoExportLabel_ = null;¤¤	private static Label uvsQueryLabel_ = null;¤¤	public static Label getUvsQueryLabel() {¤		if (uvsQueryLabel_ == null) {¤			uvsQueryLabel_ = ContainerManager.Factory.get()¤					.getLabelManager().getLabel("uvs_query");¤		}¤		return uvsQueryLabel_;¤	}¤¤	private static Label ogvLabel_ = null;¤¤	public static Label getOGVLabel() {¤		if (ogvLabel_ == null) {¤			ogvLabel_ = ContainerManager.Factory.get()¤					.getLabelManager().getLabel("ogv");¤		}¤		return ogvLabel_;¤	}¤¤	private static Label uvsLabel_ = null;¤¤	public static Label getUvsLabel() {¤		if (uvsLabel_ == null) {¤			uvsLabel_ = ContainerManager.Factory.get()¤					.getLabelManager().getLabel("uvs");¤		}¤		return uvsLabel_;¤	}¤¤	private static Label ogvFromHDLabel_ = null;¤¤	public static Label getOgvFromHDLabel() {¤		if (ogvFromHDLabel_ == null) {¤			ogvFromHDLabel_ = ContainerManager.Factory.get()¤					.getLabelManager().getLabel("ogv_from_hd");¤		}¤		return ogvFromHDLabel_;¤	}¤¤	private static Label docCardLabel_ = null;¤¤	public static Label getDocCardLabel() {¤		if (docCardLabel_ == null) {¤			docCardLabel_ = ContainerManager.Factory.get()¤					.getLabelManager().getLabel("doccard");¤		}¤		return docCardLabel_;¤	}¤¤	private static Label ogvNotCurrentLabel_ = null;¤¤	public static Label getOgvNotCurrentLabel() {¤		if (ogvNotCurrentLabel_ == null) {¤			ogvNotCurrentLabel_ = ContainerManager.Factory.get()¤					.getLabelManager().getLabel(OGV_NOT_CURRENT_LABEL_NAME);¤		}¤		return ogvNotCurrentLabel_;¤	}¤¤	public static boolean isUoQueryOrRegionPartnerQuery(Page page) {¤		boolean isUoQuery = page.getLabels().contains(getUoQueryLabel());¤		boolean isRegionPartnerQuery = page.getLabels().contains(¤				getRegionQueryLabel());¤		if (isUoQuery || isRegionPartnerQuery) {¤			return true;¤		}¤		return false;¤¤	}¤¤	public static String getCurrentUser() {¤		return AuthenticatedUserThreadLocal.getUsername();¤	}¤¤	public static String makeProperiesStringForFindRepeats(String type,¤			String number, Date date, String titleDocIssuer, String name) {¤		String docTypeName = "";¤		if (StringUtils.isNotEmpty(type)) {¤			int typeId = Integer.parseInt(type);¤			docTypeName = DocCardManager.Factory.get().getDocTypeDAONameById(¤					typeId);¤		}¤¤		String uvsQueryProperties = (StringUtils.isEmpty(docTypeName)) ? ""¤				: docTypeName + " ";¤		uvsQueryProperties += titleDocIssuer;¤		uvsQueryProperties += (StringUtils.isEmpty(number)) ? "" : " "¤				+ number.replaceAll("/", "_").replaceAll(" ", "_")¤						.replaceAll("-", "_");¤		uvsQueryProperties += (date == null) ? "" : " "¤				+ new SimpleDateFormat("ddMMyyyy").format(date);¤		uvsQueryProperties += (name == null) ? "" : " " + name;¤		return uvsQueryProperties;¤	}¤¤	private static AutoCompleteProvider getAutoCompleteProvider() {¤		AutoCompleteProvider autoComplete = AutoCompleteProvider.Factory.get(¤				AuthenticatedUserThreadLocal.getUser().getName(),¤				"UVSQUERYDPOUVS");¤		if (!autoComplete.getInitialized()) {¤			autoComplete.setMaxValues(1);¤			autoComplete.setInitialized();¤		}¤		return autoComplete;¤	}¤¤	public static String makeProperiesStringForNameDocument(String type,¤			String number, Date date, String titleDocIssuer, String name, boolean showFullTitle) {¤¤		String uvsQueryProperties = (StringUtils.isEmpty(type)) ? "" : type¤				+ " ";¤		if(showFullTitle){¤			uvsQueryProperties += titleDocIssuer;¤		}else{¤			uvsQueryProperties += titleDocIssuer.split("[)(]")[0].trim();¤		}¤		uvsQueryProperties += (StringUtils.isEmpty(number)) ? "" : " № "¤				+ number;¤		uvsQueryProperties += (date == null) ? "" : " "¤				+ Messages.Factory.messages().get(¤						"uvsquerymanager.externalauthorsfromhelpdesk.from")¤				+ " " + new SimpleDateFormat("dd.MM.yyyy").format(date);¤		uvsQueryProperties += (StringUtils.isEmpty(name)) ? "" : " \"" + name + "\"";¤		return uvsQueryProperties;¤	}¤¤	public static String getHtmlRepeatsString(List<DocCardAttributes> attrs, List<GarDocDAO> garDocs){¤		String responseContent = "";¤		for(DocCardAttributes attr : attrs){¤			if(attr.contentid_ == 0){¤				if (StringUtils.isNotEmpty(responseContent)) {¤					responseContent += "<br/>";¤				} else {¤					responseContent = "";¤				}¤				String smallTitle = "";¤				smallTitle += "[" + attr.topic_ + "] ";¤				String title = attr.name_;¤				String titleForHint = title.replaceAll("\"", "&quot;").trim();¤				smallTitle += title;¤				if (smallTitle.length() > 100) {¤					smallTitle = smallTitle.substring(0, 90) + "...";¤				}¤				responseContent += "<span title='"¤						+ titleForHint + "'>"¤						+ "<input type='checkbox' " + "'/>"¤						+ smallTitle.replaceAll("\"", "&quot;")¤						+ "</span>";¤			}else{¤				for (GarDocDAO garDoc : garDocs) {¤					if(attr != null && garDoc != null && attr.contentid_ == garDoc.getId()){¤						if (StringUtils.isNotEmpty(responseContent)) {¤							responseContent += "<br/>";¤						} else {¤							responseContent = "";¤						}¤						String smallTitle = "";¤						if(garDoc.getTopic() != 0){¤							smallTitle += "[" + garDoc.getTopic() + "] ";¤						}else{¤							smallTitle += "[0] ";¤						}¤						Page parent = garDoc.getPage().getParent();¤						String repeatDocTypeName = garDoc.getType() == null ? "" : garDoc¤								.getType().getName();¤						String title = makeProperiesStringForNameDocument(¤								repeatDocTypeName, garDoc.getNumber(),¤								garDoc.getCreationDate(), parent.getTitle(),¤								garDoc.getName(), false);¤						String titleForHint = makeProperiesStringForNameDocument(¤								repeatDocTypeName, garDoc.getNumber(),¤								garDoc.getCreationDate(), parent.getTitle(),¤								garDoc.getName(), true).replaceAll("\"", "&quot;").trim();¤						smallTitle += title;¤						if (smallTitle.length() > 100) {¤							smallTitle = smallTitle.substring(0, 90) + "...";¤						}¤						¤						String docName = StringUtils.isEmpty(garDoc.getName()) ? ""¤								: garDoc.getName().trim();¤			¤						String docDate = garDoc.getCreationDate() == null ? ""¤								: new SimpleDateFormat("dd.MM.yyyy").format(garDoc¤										.getCreationDate());¤						String docNumber = garDoc.getNumber() == null ? "" : garDoc¤								.getNumber();¤						String typeId = garDoc.getType() == null ? "0" : garDoc.getType()¤								.getId() + "";¤						¤						long requestId = DocCardManager.Factory.get().getLastModifiedUvsQueryIdForDocCard(garDoc.getId());¤						Icon garIcon = IconSelectorInVelocity.getIcon("rt_current_doc!ri_normal");¤						if(requestId > 0){¤							Page page = ContainerManager.Factory.get().getPageManager().getPage(requestId);¤							garIcon = IconSelectorInVelocity.getGarIcon(page);¤						}¤						String requestIcon = "";¤						if(garIcon != null){¤							requestIcon = garIcon.toHtml();¤						}¤						responseContent += "<span title='"¤								+ titleForHint + "'>"¤								+ "<input id='repeat_id_" + garDoc.getId()¤								+ "' name='repeatId' type='checkbox' "¤								+ "onclick=\"uncheckedAnotherButtonForCreate('repeat_id_"¤								+ garDoc.getId() + "','repeatId');" + "changeAttributes("¤								+ typeId + ", " + parent.getId() + ", '"¤								+ parent.getTitle().replaceAll("\"", "") + "', '"¤								+ docNumber + "', '" + docDate + "', '"¤								+ docName.replaceAll("\"", "") + "')\" " + "value='"¤								+ garDoc.getId() + "'/>"¤								+ requestIcon¤								+ "<a href=\"/pages/viewpage.action?pageId=" + garDoc.getId() + "\" target=\"_blank\">"¤								+ smallTitle.replaceAll("\"", "&quot;")¤								+ "</a>"¤								+ "</span>";¤					}¤				}¤			}¤		}¤		if (garDocs.size() < 5) {¤			for (int i = 0; i < 5 - garDocs.size(); i++) {¤				responseContent += "</br>";¤			}¤		}¤		return responseContent;¤	}¤	¤	public static String replaceLatSymbByRus(String s) {¤		return s.replaceAll("a", "а").replaceAll("a", "а").replaceAll("A", "А")¤				.replaceAll("c", "с").replaceAll("C", "С").replaceAll("e", "е")¤				.replaceAll("E", "Е").replaceAll("T", "Т").replaceAll("H", "Н")¤				.replaceAll("o", "о").replaceAll("O", "О").replaceAll("p", "р")¤				.replaceAll("P", "Р").replaceAll("k", "к").replaceAll("K", "К")¤				.replaceAll("x", "х").replaceAll("X", "Х").replaceAll("B", "В")¤				.replaceAll("M", "М").replaceAll("--", "-").replaceAll("–", "-")¤				// .replaceAll("b", "ь")¤				// .replaceAll("r", "г")¤				.replaceAll("y", "у")¤		// .replaceAll("Y", "У")¤		;¤	}¤	¤	public static String replaceNolByO(String s) {¤		return s.replaceAll("0", "О");¤	}¤¤	public static String replaceSlashByWhitespace(String s) {¤		return s.replaceAll("/", " ");¤	}¤¤	public static List<UvsQueryEvents> getUvsQueryDiscardedEvents(¤			Page requestPage) {¤		List<UvsQueryEvents> events = new ArrayList<UvsQueryEvents>();¤		List<Page> responses = getDiscardedResponsesPages(requestPage);¤		for (Page response : responses) {¤			UvsQueryEvents event = new UvsQueryEvents(¤					UVSStateMachine.EV_DISCARDED_RESPONSE.getGuid()¤							+ response.getIdAsString(), response.getTitle(),¤					response.getContent());¤			events.add(event);¤		}¤		return events;¤	}¤¤	public static List<Page> getDiscardedResponsesPages(Page requestPage) {¤		List<Page> responses = null;¤		if (requestPage.getLabels().contains(getRegionQueryLabel())) {¤			responses = ResponseTemplateManager.Factory.get().getResponses(¤					"rib_response", requestPage.getSpaceKey()¤					);¤		} else {¤			responses = ResponseTemplateManager.Factory.get().getResponses(¤					"uvs_response", requestPage.getSpaceKey()¤					);¤		}¤		return responses;¤	}¤¤	public static List<Page> getAllDiscardedResponsesPages(String spaceKey) {¤		List<Page> responses = ResponseTemplateManager.Factory.get()¤				.getResponses("rib_response", spaceKey);¤		responses.addAll(ResponseTemplateManager.Factory.get().getResponses(¤				"uvs_response", spaceKey));¤		return responses;¤	}¤	¤	¤	public static List<UvsQueryEvents> getAllUvsQueryDiscardedEvents(String spaceKey) {¤		List<UvsQueryEvents> events = new ArrayList<UvsQueryEvents>();¤		List<Page> responses = getAllDiscardedResponsesPages(spaceKey);¤		for (Page response : responses) {¤			UvsQueryEvents event = new UvsQueryEvents(¤					UVSStateMachine.EV_DISCARDED_RESPONSE.getGuid()¤							+ response.getIdAsString(), response.getTitle(),¤					response.getContent());¤			events.add(event);¤		}¤		return events;¤	}¤¤	public static class UvsQueryEvents {¤		String guid_;¤		String title_;¤		String reason_;¤¤		public UvsQueryEvents(String guid, String title, String reason) {¤			guid_ = guid;¤			title_ = title;¤			reason_ = reason;¤		}¤¤		public String getGuid() {¤			return guid_;¤		}¤¤		public String getTitle() {¤			return title_;¤		}¤¤		public String getReason() {¤			return reason_;¤		}¤	}¤¤	static public void afterUpdateIsConnected(GarDocDAO gardoc, byte oldVal) {¤		if (oldVal != gardoc.getIsConnected()) {¤			TopicHelper.Factory.make().assignTo(gardoc, new CachedPartnerManager(PartnerManager.Factory.get()).getPartnerForGarDoc(gardoc.getId(), gardoc.getBlocks(), gardoc.getAdditionalDocIssuers()).getId());¤			if (gardoc.getIsConnected() == DpoUvsHelper.connectedStatusToByte(ConnectedStatus.IS_CONNECTED)) {¤				gardoc.setConnectToF1Date(new Date()); ¤			}¤		}¤	}¤¤	public static long cutNumber (String lastTitle) {¤		java.util.regex.Matcher m = java.util.regex.Pattern.compile("DPOUVS-([0-9]+?) от").matcher(lastTitle);¤		if (!m.find()) {¤			throw new IllegalStateException("Request name is invalid!");¤		}¤		return Long.valueOf(m.group(1));		¤	}¤	¤	@Override¤	public boolean canCurrentUserDoSpecificSearch(String spaceKey) {¤		if(StringUtils.isNotEmpty(spaceKey)){¤			return getMDCManager(spaceKey).getEnabled();¤		}¤¤		return super.canCurrentUserDoSpecificSearch(spaceKey);¤	}¤¤	public static String getResponsibleByRequest(UVSQuestDAO uvs){¤		boolean isOdUoResponsibleForProjectRequerst = false;¤		boolean isOdUoResponsible = true;¤		if(uvs.getPage().getLabels().contains(DpoUvsHelper.getLabelDraftUvs())){¤			isOdUoResponsibleForProjectRequerst = true;¤			isOdUoResponsible = false;¤		}¤       return OGVLinksManager.Factory.get(uvs.getPage().getSpaceKey()).getResponsibleByOgv(uvs.getGardoc().getDocIssuer(), isOdUoResponsible, isOdUoResponsibleForProjectRequerst);¤	}¤	¤	public static String getDepositoryPathsWithEscapeJavascript(String spaceKey) {¤		String ret  = getDepositoryPaths(spaceKey);¤		GlobalHelper glHelper = new GlobalHelper();¤		¤		return glHelper.escapeJavaScript(ret);¤	}¤¤	public static String getDepositoryPaths(String spaceKey) {¤		ConfluenceBandanaContext cbc = new ConfluenceBandanaContext(spaceKey);¤		String ret = (String)ru.garant.shared.ConfluenceCore.Helpers.ContainerManager.Factory.get().getBandanaManager().getValue(¤			cbc¤			, DEPOSITORY_PATHS¤		);¤		return (ret == null)? "" : ret;¤	}¤¤	public static DocTypeDAO getDocTypeByName(final String typeName, final String spaceKey){¤		if(typeName == null)¤			return null;¤		List<DocTypeDAO> docTypes = DocCardManager.Factory.get().getDocumentTypes();¤		for(DocTypeDAO docType : docTypes){¤			if(docType.getName().equals(typeName)){¤				return docType;¤			}¤		}¤		return null;¤	}¤	¤¤	public static boolean haveRemoveOGV(Page page){¤		long id = page.getId();¤		boolean hasDocCards = DocCardManager.Factory.get().getCountDocCardsFromOgv(id) > 0;¤		if(hasDocCards){¤			return false;¤		}¤		return true;¤	}¤	¤	public static boolean hasParentOGVFolderAndHasLabelOGVOrFolder(Page page){¤		Label labelOgvFolder = ContainerManager.Factory.get().getLabelManager().getLabel("ogv_folder");¤		Page parent = page;¤		while(parent != null && (parent.getLabels().contains(labelOgvFolder) == false)){¤			parent = parent.getParent();¤		}¤		if(parent == null){¤			return false;¤		}¤		¤		Label labelFolder = ContainerManager.Factory.get().getLabelManager().getLabel("folder");¤		return page.getLabels().contains(labelFolder) || page.getLabels().contains(getOGVLabel());¤	}¤¤	public static boolean hasDiscardedMessageAndIsUoQuery(String message, Page page){¤		Label labelRtUoQuery = ContainerManager.Factory.get().getLabelManager().getLabel("rt_uo_query");¤		if(StringUtils.isNotEmpty(message) && message.contains("Эмитент отказал в предоставлении документа") && page.getLabels().contains(labelRtUoQuery)){¤			return true;¤		}¤		return false;¤	}¤	¤	¤	public static String getDiscardedCause(Page pageUvsQuery){¤		String uvsHeader = ru.garant.shared.GCI.I18N.Messages.Factory.messages().get("uvsquery.rejected.header");¤		String message = null;¤¤		String content = pageUvsQuery.getContent();¤		Pattern p = Pattern.compile(".*\\{warning\\}\\{?\\*\\}?" + uvsHeader + "\\* \\((.+)\\).*\\{warning\\}.*");¤		Matcher m = p.matcher(content);¤		if (m.find()) {¤			message = m.group(1);¤		}¤				¤		return message;¤	}¤¤	public static String getIncludeInVersionDate(String instancy){¤		ChangeIncludeInVersionDate action = new ChangeIncludeInVersionDate();¤		action.setInstancy(instancy);¤		action.doChange();¤		return action.getResponseContent();¤	}¤	¤	public static  List<Label> labelNamesToLabels(String[] labelNames){¤		List<Label> labels = new ArrayList<Label>();			¤		if(labelNames != null && labelNames.length > 0){¤			for(String s : labelNames){¤				Label label = getLabel(s);¤				labels.add(label);¤			}			¤		}¤		return labels;¤	}¤	¤	public static  List<String> labelsToLabelNames(List<ru.garant.MDProcess.ConfluencePlugins.LabelSupport.Label> labels){¤		List<String> labelNames = new ArrayList<String>();			¤		if(labels != null && labels.size() > 0){¤			for(ru.garant.MDProcess.ConfluencePlugins.LabelSupport.Label label : labels){¤				String labelName = label.getName();¤				labelNames.add(labelName);¤			}			¤		}¤		return labelNames;¤	}¤	¤	public static Label getLabel(String name){¤		Label label = ContainerManager.Factory.get().getLabelManager().getLabel(name);¤		if(label ==  null){¤			label = new Label(name);¤			label.setCreationDate(new Date());¤			label = ContainerManager.Factory.get().getLabelManager().createLabel(label);¤		}¤		return label;¤	}¤	¤¤	public static List<String> extractAssignedTo (List<String> selected, Collection<SelectBoxPair> all, String selectedType) {¤		List<String> result = new ArrayList<String>();¤		AssignedToTypeValues assignedToType = AssignedToTypeValues.valueOf(selectedType);¤		if (selected != null && selected.size() > 0) {¤			if (assignedToType == AssignedToTypeValues.ASSIGNED_TO_TYPE_GROUPS) {¤				Pager pager = ContainerManager.Factory.get().getUserAccessor().getMemberNames(selected.iterator());¤				Iterator<?> iter = pager.iterator();¤				while (iter.hasNext())¤					result.add((String) iter.next());¤			} else {¤				result.addAll(selected);¤			}¤		} else {¤			List<String> assignedTo = new ArrayList<String>();¤			if (assignedToType == AssignedToTypeValues.ASSIGNED_TO_TYPE_GROUPS) {¤				assignedTo.addAll(getUserNames(all));¤			} else if (assignedToType != AssignedToTypeValues.ASSIGNED_TO_TYPE_ALL) {¤				assignedTo.addAll(SelectBoxPair.toStringList(all));¤			}¤			result.addAll(assignedTo);¤		}¤		return result;¤	}¤	¤	public static List<String> getUserNames(Collection<SelectBoxPair> groups) {¤		List<String> users = new ArrayList<String>();¤		¤		for (SelectBoxPair group : groups) {¤			Group cGroup = ContainerManager.Factory.get().getUserAccessor().getGroup(group.getKey());¤			CollectionUtils.addAll(users, ContainerManager.Factory.get().getUserAccessor().getMemberNames(cGroup).iterator());¤		}¤		¤		return users;¤	}¤¤¤	public static String getPageTitle(String id){¤		if(StringUtils.isEmpty(id)){¤			return "";¤		}¤		Long pageId = Long.parseLong(id);¤		Page page = ContainerManager.Factory.get().getPageManager().getPage(pageId);¤		if(page == null){¤			return "";¤		}¤		if(page.getLabels().contains(getOgvNotCurrentLabel())){¤			return "!" + page.getTitle();¤		}¤		return page.getTitle();¤	}¤	¤	public static void addLabelGardocMinust(DocCard docCard, String regNumber, Date regDate){¤		if(StringUtils.isNotEmpty(regNumber) || regDate != null){¤			Label label = ContainerManager.Factory.get().getLabelManager().getLabel("gardoc_minust");¤			if(label == null){¤				label = new Label("gardoc_minust");¤				label.setCreationDate(new Date());¤				label.setLastModificationDate(new Date());¤				label = ContainerManager.Factory.get().getLabelManager().createLabel(label);¤			}¤			¤			boolean hasLabel = docCard.getPage().getLabels().contains(label);¤			if(hasLabel == false){¤				ContainerManager.Factory.get().getLabelManager().addLabel(docCard.getPage(), "gardoc_minust");¤			}¤		}¤	}¤¤	public static List<String> getSpaceKeysWhichHasGardocSettingsFromSpacesList(List<Space> spaces){¤		List<String> spaceKeysWhichHasGardocSettings = new ArrayList<String>();¤		for(Space space : spaces){¤			if(DPOUVSManager.Factory.get(space.getKey()).getEnabled()){¤				spaceKeysWhichHasGardocSettings.add(space.getKey());¤			}¤		}¤		return spaceKeysWhichHasGardocSettings;¤	}¤¤	public static List<String> getSpaceKeysWhichHasGardocSettingsFromSpaceList(List<String> spaceKeys){¤		List<String> spaceKeysWhichHasGardocSettings = new ArrayList<String>();¤		for(String spaceKey : spaceKeys){¤			if(DPOUVSManager.Factory.get(spaceKey).getEnabled()){¤				spaceKeysWhichHasGardocSettings.add(spaceKey);¤			}¤		}¤		return spaceKeysWhichHasGardocSettings;¤	}¤	¤	public static List<Space> getSpacesWhichHasGardocSettingsFromSpaceList(List<Space> spaces){¤		List<Space> spaceKeysWhichHasGardocSettings = new ArrayList<Space>();¤		for(Space space : spaces){¤			if(DPOUVSManager.Factory.get(space).getEnabled()){¤				spaceKeysWhichHasGardocSettings.add(space);¤			}¤		}¤		return spaceKeysWhichHasGardocSettings;¤	}¤¤	public static List<Space> getSpacesWhichHasGardocSettings(User user){¤		List<Space> spaces = ContainerManager.Factory.get().getSpaceManager().getPermittedSpacesByType(user, SpaceType.GLOBAL);¤		return getSpacesWhichHasGardocSettingsFromSpaceList(spaces);¤	}¤¤	¤	public static String getSpaceKeysStringWhichHasGardocSettingsFromAuthenticatedUser(){¤		User user = AuthenticatedUserThreadLocal.getUser();¤		List<Space> spaces = getSpacesWhichHasGardocSettings(user);¤		String spaceKeys = "";¤		for(Space space : spaces){¤			if(StringUtils.isNotEmpty(spaceKeys)){¤				spaceKeys += ", ";¤			}¤			spaceKeys += space.getKey();¤		}¤		return spaceKeys;¤	}¤	¤	public static List<Space> getSpacesWhichHasGardocSettings(){¤		List<Space> spaces = ContainerManager.Factory.get().getSpaceManager().getAllSpaces();¤		return getSpacesWhichHasGardocSettingsFromSpaceList(spaces);¤	}¤¤	public static List<Long> pagesListToIdsList(List<Page> rootPagesList){¤		List<Long> rootPagesIdsList = new ArrayList<Long>();¤		for(Page rootPage : rootPagesList){¤			rootPagesIdsList.add(rootPage.getId());¤		}¤		return rootPagesIdsList;¤	}¤¤	public static String getRobotUsername(String spaceKey){¤		ConfluenceBandanaContext context = new ConfluenceBandanaContext(spaceKey);¤		String robotInBandana = (String) ContainerManager.Factory.get ().getBandanaManager ().getValue (context, "DpoUvsHelper.getRobotUsername");¤		if(robotInBandana != null){¤			return robotInBandana;¤		}¤		return "robot";¤	}¤	¤	¤	public static boolean isSendMailForAllScriptsOfPartner(Partner p, GarDocDAO gardoc){¤		for(PartnerReceiverMail receiver : p.getReceivers()){¤			if(isSendMail(receiver, p, gardoc)){¤				return true;¤			}¤		}¤		return false;¤	}¤	¤	public static boolean isSendMail(PartnerReceiverMail receiver, Partner p, GarDocDAO gardoc){¤		final List<Page> ai = new ArrayList<Page>();¤		if (CollectionUtils.isNotEmpty(gardoc.getAdditionalDocIssuers())) {¤			for (Long id : gardoc.getAdditionalDocIssuers()) {¤				ai.add(ContainerManager.Factory.get().getPageManager().getPage(id));¤			}¤		}¤		final List<String> blockNames = new ArrayList<String>();¤		if (CollectionUtils.isNotEmpty(gardoc.getBlocks())) {¤			for (BlockDAO bd : gardoc.getBlocks()) {¤				blockNames.add(bd.getShortName());¤			}¤		}				¤¤		¤		return new CachedPartnerManager(PartnerManager.Factory.get()).runRulesScriptForPartnerAndReciever(gardoc.getId(), p, receiver, blockNames, ai);¤	}¤¤	public static void updateTask(byte operation, Page page){¤		List<PostProcessorTask> tasks = (List<PostProcessorTask>)  ActionContextThreadLocalFactory.Factory.get().getContext().get(TASK_LIST_KEY);¤		if (tasks == null) {¤			tasks = new ArrayList<PostProcessorTask>();¤			 ActionContextThreadLocalFactory.Factory.get().getContext().put(TASK_LIST_KEY, tasks);¤		}¤		UpdateConfigOGVTask updateConfigOGVTask = new UpdateConfigOGVTask(page, operation);¤		tasks.add(updateConfigOGVTask);¤		Logs.LOG_D("DpoUvsHelper::updateTask::operation=" + operation + " pageId=" + page.getId());¤	}¤	¤	public int getIssuerChildrenSize(long issuerId){¤		return DocCardManager.Factory.get().getCountDocCardsFromOgv(issuerId);¤	}¤	¤	public static List<Long> getOGVFolderIds(final String spaceKey){¤		try {¤			return getCachePageIdsFromSpaceKeyForOGVFolder(15, TimeUnit.MINUTES).get(spaceKey);¤		} catch (ExecutionException e) {¤			Logs.LOG_SEX(e);¤		}¤		return new ArrayList<Long>();¤//		return getPagesIdsFromLabelAndSpaceKey("ogv_folder", spaceKey);¤/*		Label label = ContainerManager.Factory.get().getLabelManager().getLabel("ogv_folder");¤		List<Page> rootPages = ContainerManager.Factory.get().getLabelManager().getCurrentContentForLabelAndSpace(label, spaceKey);¤		return DpoUvsHelper.pagesListToIdsList(rootPages);¤		*/¤	}¤	¤	public void clearCachePageIdsFromSpaceKeyForOGVFolder(){¤		cachePageIdsFromSpaceKeyForOGVFolder_ = null;¤	}¤¤    private static LoadingCache<String, List<Long>> cachePageIdsFromSpaceKeyForOGVFolder_;¤¤    public static LoadingCache<String, List<Long>> getCachePageIdsFromSpaceKeyForOGVFolder(long duration, TimeUnit unit){¤ 		if(cachePageIdsFromSpaceKeyForOGVFolder_ == null){¤ 			synchronized(DpoUvsHelper.class){¤ 				if(cachePageIdsFromSpaceKeyForOGVFolder_ == null){¤ 					cachePageIdsFromSpaceKeyForOGVFolder_ = CacheBuilder.newBuilder()¤ 						.maximumSize(1000)¤ 						.expireAfterWrite(duration, unit)¤ 						.build(new CacheLoader<String, List<Long>>() {¤ 							@Override¤ 							public List<Long> load(String spaceKey) {¤ 								return getPagesIdsFromLabelAndSpaceKey("ogv_folder", spaceKey);¤ 							}¤ 					});¤ 				}¤ 			}¤ 		}¤ 		return cachePageIdsFromSpaceKeyForOGVFolder_;¤    }¤¤¤	public static List<Page> getPagesFromLabelAndSpaceKey(String labelName, String spaceKey){¤		Session session = ContainerManager.Factory.get().getSession();¤		Query q;¤		List<Page> result = new ArrayList<Page>();¤		try {¤			q = session.createQuery("SELECT page FROM Labelling l, Page page WHERE l.label.name='" + labelName + "' and l.content.id=page.id and page.space.key='" + spaceKey + "'");¤			result = q.list();¤		} catch (HibernateException e) {¤			Logs.LOG_SEX(e);¤		}¤		return result;¤	}¤	¤	public static List<Long> getPagesIdsFromLabelAndSpaceKey(String labelName, String spaceKey){¤		Session session = ContainerManager.Factory.get().getSession();¤		Query q;¤		List<Long> result = new ArrayList<Long>();¤		try {¤			String sQuery = "SELECT page.id FROM Labelling l, Page page WHERE l.label.name='" + labelName + "' and l.content.id=page.id";¤			if(StringUtils.isNotEmpty(spaceKey)){¤				sQuery += " and page.space.key='" + spaceKey + "'";¤			}¤			¤			q = session.createQuery(sQuery);¤			result = q.list();¤		} catch (HibernateException e) {¤			Logs.LOG_SEX(e);¤		}¤		return result;¤	}¤	¤¤	public static String getPagePathFromPageId(final long pageId, final List<Long> rootPagesIdsList){¤		Query q;¤		String path = "";¤		boolean rootFlag = false;¤		Statement st = null;¤		try {¤			Connection con = ContainerManager.Factory.get().getSession().connection();¤			st = con.createStatement();¤			ResultSet rs = st.executeQuery("SELECT ca.ancestorid, page.title FROM confancestors ca, content page WHERE page.content_status='current' and page.prevver is null and ca.ancestorid=page.contentid and ca.descendentid=" + pageId);¤			while(rs.next()){¤				long id = rs.getLong(1);¤				String title = rs.getString(2);¤				if(rootPagesIdsList.contains(id)){¤					rootFlag = true;¤				}else if(rootFlag){¤					if(StringUtils.isNotEmpty(path)){¤						path = path + "\\";¤					}¤					path = path + title;¤				}¤			}¤		} catch (Exception e) {¤			Logs.LOG_SEX(e);¤		}finally{¤			if(st != null){¤				try {¤					st.close();¤				} catch (SQLException ex) {¤					Logs.LOG_SEX(ex);¤				}¤			}¤		}¤		return path;¤	}¤	¤	public static Map<String, Object> readBandanaList(Page page){¤		Map<String, Object> bandanas = new HashMap<String, Object>();¤		String content = page.getContent();¤		if(StringUtils.isEmpty(content)){¤			return new HashMap<String, Object>();¤		}¤		String noformat = "{noformat}";¤		content = content.substring(content.indexOf(noformat) + noformat.length());¤		content = content.substring(0, content.indexOf(noformat));¤		¤		Properties properties = new Properties();¤		try {¤			///IOUtils.toInputStream(content);¤			Reader in = new StringReader(content);¤			¤			properties.load(in);¤			¤			Enumeration enumeration = properties.keys();¤			 ¤            while (enumeration.hasMoreElements()){¤            	String key = (String)enumeration.nextElement();¤            	String val = properties.getProperty(key);¤            	key = key.trim();¤            	if(val.matches("\\[.*\\]")){¤	                List<String> values = new ArrayList<String>();¤	                String regString = "(\\[([^\\[\\]]*)\\][,]?[ ]*?)+";¤					Pattern p = Pattern.compile(regString);¤	        		Matcher m = p.matcher(val);¤	        		while (m.find()) {¤	       				values.add(m.group(2));¤	                    bandanas.put(key, values);¤	                }¤            	}¤        		if(bandanas.get(key) == null){	¤                    bandanas.put(key, val);¤                }¤            }¤		} catch (Exception e) {¤			Logs.LOG_SEX(e);¤		}¤		return bandanas;¤	}¤	¤	public static void setGardocBandanaValues(Map<String, Object> bandanas, String spaceKey){¤		ConfluenceBandanaContext context = new ConfluenceBandanaContext(spaceKey);¤		for(String key : bandanas.keySet()){¤			Object obj = bandanas.get(key);¤			if(obj instanceof String){¤				String val = (String)obj;¤				if(StringUtils.isNumeric(val)){¤					Long valLong = Long.parseLong(val);¤					ContainerManager.Factory.get ().getBandanaManager ().setValue (context, key, valLong);¤				}else{¤					ContainerManager.Factory.get ().getBandanaManager ().setValue (context, key, val);¤				}¤			}else if(obj instanceof List){¤				List<String> values = (List<String>)obj;¤				ContainerManager.Factory.get ().getBandanaManager ().setValue (context, key, values);¤			}¤		}¤	}¤¤	public static void changeBandanaValueForGardocConfigIni(Page page){¤		List<Label> labels = page.getLabels();¤		Label gardocConfigIniLabel = ru.garant.shared.ConfluenceCore.Helpers.ContainerManager.Factory.get().getLabelManager().getLabel(GARDOC_CONFIG_INI_LABEL_NAME);¤		if(gardocConfigIniLabel == null){¤			Label label = new Label(GARDOC_CONFIG_INI_LABEL_NAME);¤			gardocConfigIniLabel = ru.garant.shared.ConfluenceCore.Helpers.ContainerManager.Factory.get().getLabelManager().createLabel(label);¤		}¤		if(labels.contains(gardocConfigIniLabel)){¤			Map<String, Object> gardocbandanas = readBandanaList(page);¤			setGardocBandanaValues(gardocbandanas, page.getSpaceKey());¤		}¤	}¤	¤	public static boolean hasSystemGetenvValue(final String systemGetenvName, final String valueSystemGetenv){¤		String g = System.getenv(systemGetenvName);¤		if(StringUtils.isNotEmpty(g)){¤			String[] values = g.split(",");¤			for(int i = 0; i < values.length; i++){¤				if(StringUtils.isNotEmpty(values[i]) && values[i].trim().equals(valueSystemGetenv)){¤					return true;¤				}¤			}¤		}¤		return false;¤	}¤¤	public static boolean isGardoc(){¤		return hasSystemGetenvValue("SERVER_TYPE", "GARDOC");¤	}¤¤	public static Map<String, List<String>> getLabelNamesFromQueryLabelGroupList(List<QueryLabelGroup> groups){¤		List<String> includedLabelNames = new ArrayList<String>();¤		List<String> excludedLabelNames = new ArrayList<String>();¤		Map<String, List<String>> mapa = new HashMap<String, List<String>>();¤		if(groups != null){¤			for(QueryLabelGroup group : groups){¤				LabelElement le = group.getLabelElement();¤				if(le.getType() == LabelElementType.LABEL){¤					if(group.getLogicOperation() == LogicOperation.AND){¤						includedLabelNames.add(le.getName());¤					}else if(group.getLogicOperation() == LogicOperation.NOT_OR){¤						excludedLabelNames.add(le.getName());¤					}¤				}else if(le.getType() == LabelElementType.GROUP){¤					DefaultLabelGroup dlg = (DefaultLabelGroup)le;¤					List<ru.garant.MDProcess.ConfluencePlugins.LabelSupport.Label> labels = dlg.getLabels();¤					if(group.getLogicOperation() == LogicOperation.AND){¤						includedLabelNames.addAll(DpoUvsHelper.labelsToLabelNames(labels));¤					}else if(group.getLogicOperation() == LogicOperation.NOT_OR){¤						excludedLabelNames.addAll(DpoUvsHelper.labelsToLabelNames(labels));¤					}¤				}¤			}		¤		}¤		mapa.put("included", includedLabelNames);¤		mapa.put("excluded", excludedLabelNames);¤		return mapa;¤	}¤	¤	public static List<String> getPaperCopiesSubclassesTypes() throws Exception{¤		List<String> copies = new ArrayList<String>();¤	/*	Reflections reflections = new Reflections("ru.garant.MDProcess.DocCardChange.DocCardChangeDAO");¤		Set<Class<? extends AbstractPaperCopyDAO>> subTypeClasses = reflections.getSubTypesOf(AbstractPaperCopyDAO.class);¤		for(Class<? extends AbstractPaperCopyDAO> subTypeClass : subTypeClasses){¤			int mods = subTypeClass.getModifiers(); ¤			¤			if (Modifier.isAbstract(mods) == false) { ¤				CopyDAO copy = subTypeClass.newInstance();¤				copies.add(copy.getType());¤			}¤		}¤		*/¤		CopyDAO pcopy = new PaperCopy();¤		copies.add(pcopy.getType());¤		CopyDAO pscopy = new PaperScanCopy();¤		copies.add(pscopy.getType());¤¤		return copies;¤	}¤	¤	public static List<String> getECopiesSubclassesTypes() throws Exception{¤		List<String> copies = new ArrayList<String>();¤/*		Reflections reflections = new Reflections("ru.garant.MDProcess.DocCardChange.DocCardChangeDAO");¤		Set<Class<? extends AbstractECopyDAO>> subTypeClasses = reflections.getSubTypesOf(AbstractECopyDAO.class);¤		for(Class<? extends AbstractECopyDAO> subTypeClass : subTypeClasses){¤			int mods = subTypeClass.getModifiers(); ¤			¤			if (Modifier.isAbstract(mods) == false) { ¤				CopyDAO copy = subTypeClass.newInstance();¤				copies.add(copy.getType());¤			}¤		}¤		*/¤		CopyDAO ecopy = new ECopyDAO();¤		copies.add(ecopy.getType());¤		CopyDAO scopy = new SiteCopyDAO();¤		copies.add(scopy.getType());¤		return copies;¤	}¤¤	public static List<CopyDAO> getAllCopiesSubclasses() throws Exception{¤		List<CopyDAO> copies = new ArrayList<CopyDAO>();¤		Reflections reflections = new Reflections("ru.garant.MDProcess.DocCardChange.DocCardChangeDAO");¤		Set<Class<? extends CopyDAO>> subTypeClasses = reflections.getSubTypesOf(CopyDAO.class);¤		for(Class<? extends CopyDAO> subTypeClass : subTypeClasses){¤			int mods = subTypeClass.getModifiers(); ¤			¤			if (Modifier.isAbstract(mods) == false) { ¤				CopyDAO copy = subTypeClass.newInstance();¤				copies.add(copy);¤			}¤		}¤		return copies;¤	}¤	¤	public static File getFileForCreatedUvsQueryForm(final String userName, final String choosedFileName){¤		List<File> files = getLastAddedFilesForCreatedUvsQueryForm(userName);¤		for(File file : files){¤			if(file.getName().equals(choosedFileName)){¤				return file;¤			}¤		}¤		return null;¤	}¤	¤	public static void saveLocalFilesForCreatedUvsQueryForm(final String userName, List<Attachment> attachments) throws IOException{¤		String fileNamesPath = getLastAddedFilePath(userName);¤		for(Attachment a : attachments){¤			saveFile(fileNamesPath, a.getFileName(), a.getContentsAsStream());¤		}¤	}¤	¤	public static void saveFile(String path, String fileName, InputStream io){¤		try {¤			File dir = new File(path);¤			if(dir.exists() == false){¤				dir.mkdirs();¤			}¤			File file = new File(path + "/" + fileName);¤			FileOutputStream fos = new FileOutputStream(file);¤			byte[] b = new byte[io.available()];¤			io.read(b);¤			fos.write(b);¤			fos.close();¤		} catch (Exception e) {¤			Logs.LOG_SEX(e);¤		}¤	}¤	¤	public static int getLastAddedFileSize(){¤		String fileNamesSize = (String)ContainerManager.Factory.get().getBandanaManager().getValue(ConfluenceBandanaContext.GLOBAL_CONTEXT, "CREATEDUVSQUERYFORM_LASTADDEDFILESSIZE");¤		int fileSize = 5;¤		if(StringUtils.isEmpty(fileNamesSize)){ ¤			ContainerManager.Factory.get().getBandanaManager().setValue(ConfluenceBandanaContext.GLOBAL_CONTEXT, "CREATEDUVSQUERYFORM_LASTADDEDFILESSIZE", String.valueOf(fileSize));¤		}else if(StringUtils.isNumeric(fileNamesSize)){	¤			fileSize = Integer.valueOf(fileNamesSize);¤		}¤		return fileSize;¤	}¤	¤	public static String getLastAddedFilePath(final String userName){¤		return getLastAddedFilePath() + "/" + userName;¤	}¤		¤	public static String getLastAddedFilePath(){¤		String fileNamesPath = (String)ContainerManager.Factory.get().getBandanaManager().getValue(ConfluenceBandanaContext.GLOBAL_CONTEXT, "CREATEDUVSQUERYFORM_LASTADDEDFILESPATH");¤		¤		if(StringUtils.isEmpty(fileNamesPath)){¤			fileNamesPath = "//rest/home/temp-files";¤			ContainerManager.Factory.get().getBandanaManager().setValue(ConfluenceBandanaContext.GLOBAL_CONTEXT, "CREATEDUVSQUERYFORM_LASTADDEDFILESPATH", fileNamesPath);¤		}¤		return fileNamesPath;¤	}¤¤	public static List<File> getLastAddedFilesForCreatedUvsQueryForm(final String userName){¤		String fileNamesPath = getLastAddedFilePath(userName);¤		int fileSize = getLastAddedFileSize();¤		¤		File directory = new File(fileNamesPath);¤		if(directory.exists()){¤			File[] files = directory.listFiles();¤			List<File> fileList = sortFiles(files);¤			if(fileList.size() > fileSize){¤				return fileList.subList(0, fileSize);¤			}¤			return fileList;¤		}¤		return new ArrayList<File>();¤	}¤	¤	public static  List<File> sortFiles(File[] initFiles){¤		List<File> files = Arrays.asList(initFiles);¤		Collections.sort(files, new Comparator<File>(){¤			@Override¤			public int compare(File arg0, File arg1) {¤				Date date1 = new Date(arg0.lastModified());¤				Date date2 = new Date(arg1.lastModified());¤				return (date1).compareTo(date2);¤			}				   ¤		});¤		Collections.reverse(files);¤		return files;¤	}¤	¤	public static List<Attachment> getLastAddedFileList(){¤		List<Attachment> fileNames = new ArrayList<Attachment>();¤		String userName = AuthenticatedUserThreadLocal.getUsername();¤		List<File> files = getLastAddedFilesForCreatedUvsQueryForm(userName);¤		¤		for(File file : files){¤			Attachment attach = new Attachment();¤			attach.setFileName(file.getName());¤			attach.setLastModificationDate(new Date(file.lastModified()));¤			fileNames.add(attach);¤		}¤		return fileNames;¤	}¤¤	public static final String GARDOC_CONFIG_INI_LABEL_NAME = "gardoc_config_ini";¤	¤	protected static final String TASK_LIST_KEY = "DefaultPostProcessorImpl.TASK_LIST_KEY";¤	public final static String DEPOSITORY_PATHS = "DocCardSupport.DepositoryPaths";¤	public final static String OPTIONS_CACHE = "DocCardSupport.OptionsCache";¤	public static final String IMAGE_COME_FROM_MAIL = "Добавлен роботом из почтовой рассылки";¤¤	//#UC END# *4C40200B0007_CUSTOM_METHODS_AND_DATA*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"WikiPageID (wiki)"
		    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/DpoUvsHelper|4C40200B0007
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (wiki)"
		    value      	"wiki")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"20609525191"))
	    quid       	"4C40200B0007"
	    documentation 	"вспомогательный класс для доступа к основным интерфейсам из velocity"
	    stereotype 	"KVelocityContextPlugin"
	    superclasses 	(list inheritance_relationship_list
		(object Inheritance_Relationship
		    quid       	"4C40204002C6"
		    supplier   	"Logical View::MDProcess::ConfluenceMDChange::RequestSupport::AbstractRequestHelper"
		    quidu      	"48E5A4A503B4"))
	    used_nodes 	(list uses_relationship_list
		(object Uses_Relationship
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"20609527015"))
		    quid       	"4C6E87C2028F"
		    stereotype 	"uses"
		    supplier   	"Logical View::MDProcess::DocCardChange::DocCardSupport::PageUvsQuery"
		    quidu      	"4C6E879E002F"))
	    operations 	(list Operations
		(object Operation "ctor"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"final")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4C40201D00A6_BODY*"
			    value      	(value Text 
|//#UC START# *4C40201D00A6_BODY*¤		//#UC END# *4C40201D00A6_BODY*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"20609526029"))
		    quid       	"4C40201D00A6"
		    documentation 	"конструктор"
		    stereotype 	"ctor"
		    concurrency 	"Sequential"
		    opExportControl 	"Public"
		    uid        	0))
	    language   	"MDA Generator")
	(object Class "ResponsibleDataLoader"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/DocCardChange/DocCardSupport/ResponsibleDataLoader.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C4558CD02DC_CUSTOM_IMPORT*"
		    value      	"//#UC START# *4C4558CD02DC_CUSTOM_IMPORT*¤import java.util.Collection;¤import java.util.LinkedHashSet;¤import java.util.List;¤¤import ru.garant.MDProcess.ConfluenceMDChange.RequestWebConvertedSystemObjects.OGVLinksAttributesStruct;¤import ru.garant.MDProcess.ConfluencePlugins.UserSupport.UserHelper;¤import ru.garant.MDProcess.DocCardChange.DocCardChangeDAO.OGVLinksDAO;¤import ru.garant.MDProcess.DocCardChange.DocCardCommon.OGVLinksManager;¤import com.atlassian.confluence.pages.Page;¤¤import com.atlassian.user.User;¤//#UC END# *4C4558CD02DC_CUSTOM_IMPORT*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C4558CD02DC_CUSTOM_CLASS_DEFINITION*"
		    value      	"//#UC START# *4C4558CD02DC_CUSTOM_CLASS_DEFINITION*¤//#UC END# *4C4558CD02DC_CUSTOM_CLASS_DEFINITION*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C4558CD02DC_ACTION_NAME*"
		    value      	(value Text 
|//#UC START# *4C4558CD02DC_ACTION_NAME*¤		return new String (getClass ().getName ());¤		//#UC END# *4C4558CD02DC_ACTION_NAME*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C4558CD02DC_CUSTOM_METHODS_AND_DATA*"
		    value      	(value Text 
|//#UC START# *4C4558CD02DC_CUSTOM_METHODS_AND_DATA*¤	private StringBuilder result_ = new StringBuilder();¤	¤	public String execute () throws Exception {¤		if(loadGroups_){¤			loadResponsibles();¤		}else{¤			loadOgv ();¤		}¤		return SUCCESS;¤	}¤¤	public String getResponseContent () {¤		return "<result>" + result_.toString() + "</result>";¤	}¤	//#UC END# *4C4558CD02DC_CUSTOM_METHODS_AND_DATA*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"WikiPageID (wiki)"
		    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/ResponsibleDataLoader|4C4558CD02DC
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (wiki)"
		    value      	"wiki")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"20609528518"))
	    quid       	"4C4558CD02DC"
	    documentation 	"загружает ответственных за ОГВ"
	    stereotype 	"KActionPlugin"
	    superclasses 	(list inheritance_relationship_list
		(object Inheritance_Relationship
		    quid       	"4C455964024E"
		    supplier   	"Logical View::external::JavaConfluence::ConfluenceClassPack::ConfluenceActionSupport"
		    quidu      	"465ADCCA036B"))
	    operations 	(list Operations
		(object Operation "load_responsibles"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ResolvedTypeGuid"
			    value      	"")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4C455A1700FA*"
			    value      	(value Text 
|//#UC START# *4C455A1700FA*¤		final Collection<User> responsibles = new LinkedHashSet<User>();¤		final GarUserAccessor ua = ContainerManager.Factory.get().getUserAccessor();¤		responsibles.addAll(new UserHelper.UserSortedSet(ua.getUsersByGroupName(groupName_)));¤		for(User user : responsibles){¤			if(result_.length() != 0){¤				result_.append(",");¤			}¤			result_.append("name=\"" + user.getName() + "\" fullName=\"" + user.getFullName() + "\"");¤		}¤		¤		//#UC END# *4C455A1700FA*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"20609536035"))
		    quid       	"4C455A1700FA"
		    documentation 	"получает всех ответственных"
		    stereotype 	"chg"
		    concurrency 	"Sequential"
		    opExportControl 	"Public"
		    uid        	0)
		(object Operation "load_ogv"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4C4567150179*"
			    value      	(value Text 
|//#UC START# *4C4567150179*¤		boolean isOdUoResponsible = false;¤		boolean isOdUoResponsibleForProjectRequest = false;¤		if(isOdUoResponsible_ != null && isOdUoResponsible_.equals("true")){¤			isOdUoResponsible = true;¤		}¤¤		if(isOdUoResponsibleForProjectRequest_ != null && isOdUoResponsibleForProjectRequest_.equals("true")){¤			isOdUoResponsibleForProjectRequest = true;¤		}¤			¤		List<OGVLinksAttributesStruct> ogvLinks = OGVLinksManager.Factory.get(spaceKey_).getOgvLinksByResponsible(responsibleName_, isOdUoResponsible, isOdUoResponsibleForProjectRequest);¤		List<Long> pageIdsWithOGVNotCurrentLabel = DpoUvsHelper.getPagesIdsFromLabelAndSpaceKey(DpoUvsHelper.OGV_NOT_CURRENT_LABEL_NAME, spaceKey_);¤		DpoUvsHelper.sort(ogvLinks);¤¤		for(OGVLinksAttributesStruct ogvLink : ogvLinks){¤			if(result_.length() != 0){¤				result_.append(",");¤			}¤			String title = ogvLink.getTitle();¤			if(pageIdsWithOGVNotCurrentLabel.contains(ogvLink.getId())){¤				title = "!" + title;¤			}¤¤			result_.append("id=\"" + ogvLink.getId() + "\" title=\"" + title+ " (" + ogvLink.getParentTitle() + ")"  + "\"");¤		}¤		//#UC END# *4C4567150179*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"20609537005"))
		    quid       	"4C4567150179"
		    documentation 	"подгружаем ОГВ"
		    stereotype 	"chg"
		    concurrency 	"Sequential"
		    opExportControl 	"Public"
		    uid        	0))
	    class_attributes 	(list class_attribute_list
		(object ClassAttribute "group_name"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"final")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ValueInitialized"
			    value      	"true")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ResolvedTypeGuid"
			    value      	"3DBFFE240068")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4C4559A003E6_SET_ACCESSOR*"
			    value      	(value Text 
|//#UC START# *4C4559A003E6_SET_ACCESSOR*¤		groupName_ = groupName;¤		//#UC END# *4C4559A003E6_SET_ACCESSOR*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"20609529402"))
		    quid       	"4C4559A003E6"
		    documentation 	"название группы, для которой надо подгрузить ответственных"
		    stereotype 	"writeonly"
		    type       	"string"
		    quidu      	"3DBFFE240068"
		    exportControl 	"Public"
		    Containment 	"By Value")
		(object ClassAttribute "space_key"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"final")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ValueInitialized"
			    value      	"true")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ResolvedTypeGuid"
			    value      	"3DBFFE240068")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4C4563A503C8_SET_ACCESSOR*"
			    value      	(value Text 
|//#UC START# *4C4563A503C8_SET_ACCESSOR*¤		spaceKey_ = spaceKey;¤		//#UC END# *4C4563A503C8_SET_ACCESSOR*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"20609531035"))
		    quid       	"4C4563A503C8"
		    stereotype 	"writeonly"
		    type       	"string"
		    quidu      	"3DBFFE240068"
		    exportControl 	"Public"
		    Containment 	"By Value")
		(object ClassAttribute "load_groups"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"final")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ValueInitialized"
			    value      	"true")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ResolvedTypeGuid"
			    value      	"3DBFFE100240")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4C4566EE0359_SET_ACCESSOR*"
			    value      	(value Text 
|//#UC START# *4C4566EE0359_SET_ACCESSOR*¤		loadGroups_ = loadGroups;¤		//#UC END# *4C4566EE0359_SET_ACCESSOR*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"20609532746"))
		    quid       	"4C4566EE0359"
		    documentation 	"подгружаем список сотрудников или список ОГВ"
		    stereotype 	"writeonly"
		    type       	"boolean"
		    quidu      	"3DBFFE100240"
		    exportControl 	"Public"
		    Containment 	"By Value")
		(object ClassAttribute "responsible_name"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"final")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ValueInitialized"
			    value      	"true")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ResolvedTypeGuid"
			    value      	"3DBFFE240068")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4C45683801E1_SET_ACCESSOR*"
			    value      	(value Text 
|//#UC START# *4C45683801E1_SET_ACCESSOR*¤		responsibleName_ = responsibleName;¤		//#UC END# *4C45683801E1_SET_ACCESSOR*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"20609534366"))
		    quid       	"4C45683801E1"
		    documentation 	"ответственный за ОГВ"
		    stereotype 	"writeonly"
		    type       	"string"
		    quidu      	"3DBFFE240068"
		    exportControl 	"Public"
		    Containment 	"By Value")
		(object ClassAttribute "is_od_uo_responsible"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"9036278400")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"final")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ValueInitialized"
			    value      	"true")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ResolvedTypeGuid"
			    value      	"3DBFFE240068")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4DAD345E00B1_SET_ACCESSOR*"
			    value      	(value Text 
|//#UC START# *4DAD345E00B1_SET_ACCESSOR*¤		isOdUoResponsible_ = isOdUoResponsible;¤		//#UC END# *4DAD345E00B1_SET_ACCESSOR*
			    )))
		    quid       	"4DAD345E00B1"
		    documentation 	"ответственный со стороны ЮО"
		    stereotype 	"writeonly"
		    type       	"string"
		    quidu      	"3DBFFE240068"
		    exportControl 	"Public"
		    Containment 	"By Value")
		(object ClassAttribute "is_od_uo_responsible_for_project_request"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"33960620524")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"final")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ValueInitialized"
			    value      	"true")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ResolvedTypeGuid"
			    value      	"3DBFFE240068")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4E130D960049_SET_ACCESSOR*"
			    value      	(value Text 
|//#UC START# *4E130D960049_SET_ACCESSOR*¤		isOdUoResponsibleForProjectRequest_ = isOdUoResponsibleForProjectRequest;¤		//#UC END# *4E130D960049_SET_ACCESSOR*
			    )))
		    quid       	"4E130D960049"
		    documentation 	"ответственный за огв со стороны юо для запросов с проектами"
		    stereotype 	"writeonly"
		    type       	"string"
		    quidu      	"3DBFFE240068"
		    exportControl 	"Public"
		    Containment 	"By Value"))
	    language   	"MDA Generator")
	(object Class "CreateOGVFromFile"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Factory auto reg"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Factory default impl"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Servant Pool"
		    value      	"none")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"debug log"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"factory priority"
		    value      	"0")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"force usage"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"local supervisor"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"need UC"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"singleton"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"WikiPageID (wiki)"
		    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/CreateOGVFromFile|4C47E3350327
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (wiki)"
		    value      	"wiki")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/DocCardChange/DocCardSupport/CreateOGVFromFile.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C47E3350327_CUSTOM_IMPORT*"
		    value      	"//#UC START# *4C47E3350327_CUSTOM_IMPORT*¤import ru.garant.MDProcess.ConfluencePlugins.CommonVelocityContext.GlobalHelper;¤¤import java.io.FileInputStream;¤import java.io.IOException;¤import java.io.InputStream;¤import java.util.ArrayList;¤import java.util.Date;¤import java.util.List;¤¤import net.sf.hibernate.Session;¤¤import org.apache.poi.openxml4j.exceptions.InvalidFormatException;¤import org.apache.poi.ss.usermodel.Cell;¤import org.apache.poi.ss.usermodel.Row;¤import org.apache.poi.ss.usermodel.Sheet;¤import org.apache.poi.ss.usermodel.Workbook;¤import org.apache.poi.ss.usermodel.WorkbookFactory;¤import org.springframework.orm.hibernate.SessionFactoryUtils;¤¤import com.atlassian.confluence.labels.Label;¤import com.atlassian.confluence.pages.Attachment;¤import com.atlassian.confluence.pages.Page;¤import com.atlassian.confluence.spaces.Space;¤import com.atlassian.confluence.util.velocity.VelocityUtils;¤import com.atlassian.core.util.ClassLoaderUtils;¤¤import ru.garant.MDProcess.DocCardChange.DocCardCommon.OGVLinksManager;¤//#UC END# *4C47E3350327_CUSTOM_IMPORT*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C47E3350327_CUSTOM_CLASS_DEFINITION*"
		    value      	"//#UC START# *4C47E3350327_CUSTOM_CLASS_DEFINITION*¤//#UC END# *4C47E3350327_CUSTOM_CLASS_DEFINITION*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C47E3350327_ACTION_NAME*"
		    value      	(value Text 
|//#UC START# *4C47E3350327_ACTION_NAME*¤		return new String (getClass ().getName ());¤		//#UC END# *4C47E3350327_ACTION_NAME*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C47E3350327_CUSTOM_METHODS_AND_DATA*"
		    value      	(value Text 
|//#UC START# *4C47E3350327_CUSTOM_METHODS_AND_DATA*¤	¤	@Override¤	public String execute() throws Exception {¤		// TODO Auto-generated method stub¤		List<String> ogvList = signDocument();¤		if(ogvList == null || ogvList.size() == 0){¤			return ERROR;¤		}¤		int i = 0;¤		for(i=0; i < ogvList.size(); i++){¤			String ogvName = ogvList.get(i);¤			createOGV(ogvName);¤			if(i > 0 && i % 50 == 0){¤				getSession (true).flush();¤			}¤		}¤		¤		return SUCCESS;¤	}¤¤	private void createOGV(String ogvName){¤		String[] labelNames = new String[1];¤		labelNames[0] = "ogv";¤		try {¤			ru.garant.MDProcess.ConfluencePlugins.CommonVelocityContext.GlobalHelper.createPage(ogvName, getOGVFolder().getId(), "admin", new Date(), spaceKey_, labelNames);¤		} catch (Exception ex) {¤			Logs.LOG_E(ex.getMessage());¤		}¤¤	}¤¤	private List<String> signDocument() {¤		List<String> ogvList = new ArrayList<String>(); ¤		try {¤			ogvList = readOGVFromDocument(¤				ru.garant.MDProcess.ConfluencePluginTarget.ConfluencePluginTargetMain.class.getResourceAsStream("Updates/"+ATTACH_NAME)¤			);¤		} catch(InvalidFormatException e) {¤			Logs.LOG_E("CreateOGVFromFile::writeSignature - invalid document format - " + e);¤		} catch(Exception e) {¤			Logs.LOG_SEX(e);¤			Logs.LOG_E("CreateOGVFromFile::writeSignature - can not read from attached file - " + e);¤		}¤		return ogvList;¤	}¤	¤	//извлечение из файла ОГВ ¤	private List<String> readOGVFromDocument (InputStream io) throws InvalidFormatException, IOException {¤		final Workbook workbook = WorkbookFactory.create(io);¤		final Sheet protocolSheet = workbook.getSheetAt(0);¤¤		int i = TARGET_ROW;¤		Cell cell = null;¤		Row row = null;¤		String ogvName = null;¤		List<String> ogvList = new ArrayList<String>(); ¤		do{¤			row = protocolSheet.getRow(i);¤			if(row != null){¤				cell = row.getCell(TARGET_CELL);¤				if(cell != null){¤					ogvName = cell.getStringCellValue();¤					if (ogvName.length() > 0) {¤						ogvList.add(ogvName);¤					}¤				}¤			}	¤			i++;¤		}while(cell != null && row != null);¤¤		return ogvList;¤	}¤	//получаем спейс, где находится папка с ОГВ¤	public String getSpaceKey(){¤		if(spaceKey_ == null){¤			Label label  = ContainerManager.Factory.get().getLabelManager().getLabel(LABEL_NAME);¤			List<Space> spacesList = ContainerManager.Factory.get().getLabelManager().getSpacesContainingContentWithLabel(label);¤			Space space = spacesList.get(0);¤			spaceKey_ = space.getKey();¤		}	¤		return spaceKey_;¤	}¤¤	private Page getOGVFolder(){¤		if(ogvFolder_ == null){¤			ogvFolder_ = OGVLinksManager.Factory.get(getSpaceKey()).getOgvFolder();¤		}¤		return ogvFolder_;¤	}¤	private String spaceKey_;¤	private Page ogvFolder_;¤	private final String LABEL_NAME = "ogv_folder";¤	private final String ATTACH_NAME = "ogv-users.xls";¤	private static final int TARGET_ROW = 0;¤	private static final short TARGET_CELL = 2;¤¤	private Session getSession (boolean createNew) {¤		if (session_ == null) {¤			session_ = SessionFactoryUtils.getSession(ContainerManager.Factory.get().getSessionFactory(),¤														createNew);¤		}¤		return session_;¤	}¤	¤	private Session session_;¤	¤	//#UC END# *4C47E3350327_CUSTOM_METHODS_AND_DATA*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"20609538226"))
	    quid       	"4C47E3350327"
	    documentation 	"создает ОГВ из заданного файла"
	    stereotype 	"KActionPlugin"
	    superclasses 	(list inheritance_relationship_list
		(object Inheritance_Relationship
		    quid       	"4C47E45A00BF"
		    supplier   	"Logical View::MDProcess::ConfluencePlugins::CommentLocationSupport::GarantCreatePageAction"
		    quidu      	"46444CDD031C"))
	    language   	"MDA Generator")
	(object Class "CreateSettingsDpoUvs"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/DocCardChange/DocCardSupport/CreateSettingsDpoUvs.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C481CD10276_CUSTOM_IMPORT*"
		    value      	"//#UC START# *4C481CD10276_CUSTOM_IMPORT*¤import com.atlassian.confluence.pages.Page;¤import com.atlassian.confluence.pages.PageManager;¤import com.atlassian.confluence.setup.bandana.ConfluenceBandanaContext;¤import com.atlassian.confluence.spaces.Space;¤import com.atlassian.user.User;¤import com.atlassian.confluence.labels.Label;¤import com.atlassian.confluence.pages.Attachment;¤import com.atlassian.confluence.core.ContentEntityObject;¤¤import java.io.IOException;¤import java.io.InputStream;¤import java.util.ArrayList;¤import java.util.Arrays;¤import java.util.Collection;¤import java.util.List;¤¤import net.sf.hibernate.HibernateException;¤import net.sf.hibernate.Query;¤import net.sf.hibernate.Session;¤¤import org.apache.commons.collections.CollectionUtils;¤import org.apache.commons.lang.StringUtils;¤import org.apache.poi.openxml4j.exceptions.InvalidFormatException;¤import org.apache.poi.ss.usermodel.Cell;¤import org.apache.poi.ss.usermodel.Row;¤import org.apache.poi.ss.usermodel.Sheet;¤import org.apache.poi.ss.usermodel.Workbook;¤import org.apache.poi.ss.usermodel.WorkbookFactory;¤import org.springframework.orm.hibernate.SessionFactoryUtils;¤¤import ru.garant.MDProcess.ConfluenceMDChange.RequestSupport.RequestHelper;¤import ru.garant.MDProcess.ConfluencePlugins.CommonVelocityContext.GlobalHelper;¤import ru.garant.MDProcess.DocCardChange.DocCardChangeDAO.OGVLinksDAO;¤import ru.garant.MDProcess.DocCardChange.DocCardCommon.DPOUVSManager;¤import ru.garant.MDProcess.DocCardChange.DocCardCommon.OGVLinksManager;¤//#UC END# *4C481CD10276_CUSTOM_IMPORT*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C481CD10276_CUSTOM_CLASS_DEFINITION*"
		    value      	"//#UC START# *4C481CD10276_CUSTOM_CLASS_DEFINITION*¤//#UC END# *4C481CD10276_CUSTOM_CLASS_DEFINITION*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C481CD10276_ACTION_NAME*"
		    value      	(value Text 
|//#UC START# *4C481CD10276_ACTION_NAME*¤		return new String (getClass ().getName ());¤		//#UC END# *4C481CD10276_ACTION_NAME*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C481CD10276_CUSTOM_METHODS_AND_DATA*"
		    value      	(value Text 
|//#UC START# *4C481CD10276_CUSTOM_METHODS_AND_DATA*¤¤	@Override¤	public String execute() throws Exception {¤		// TODO Auto-generated method stub¤		List<OgvLinkFromFile> ogvList = signDocument();¤		if(ogvList == null || ogvList.size() == 0){¤			return ERROR;¤		}¤		PageManager pageManager = ContainerManager.Factory.get().getPageManager();¤		OGVLinksManager ogvLinksManager = OGVLinksManager.Factory.get(getSpaceKey());¤		List<User> users = ContainerManager.Factory.get().getUserAccessor().getUsersByGroupName(getGroupName());¤		if(users == null || users.size() == 0)¤			return ERROR;¤		for(int i=0; i < ogvList.size(); i++){¤			OgvLinkFromFile link = ogvList.get(i);¤			createLinkOGV(link, pageManager, ogvLinksManager, users);¤			if(i > 0 && i % 50 == 0){¤				getSession (false).flush();¤			}¤		}¤		¤		DPOUVSManager mdcooduvs = DPOUVSManager.Factory.get(getSpaceKey());¤		mdcooduvs.setEnabled(true);¤		mdcooduvs.setLeaderDpoUvs(getLeaderDpoUvs());¤		mdcooduvs.setUvsGroup(getGroupName());¤		mdcooduvs.setUvsGroupWhoTransferDocsToUO(getGroupNameForDocTransfer());¤		mdcooduvs.setQueryPostersGroupInUO(getQueryPostersInUO());¤		mdcooduvs.setDocsAcceptorsInUO(getDocAcceptorsInUO());¤		¤		return SUCCESS;¤	}¤	¤	public String getLeaderDpoUvs(){¤		DPOUVSManager.Factory.get(getSpaceKey()).getLeaderDpoUvs();¤		return "";¤	}¤¤	public String getDocAcceptorsInUO(){¤		DPOUVSManager.Factory.get(getSpaceKey()).getDocsAcceptorsInUO();¤		return "";¤	}¤¤	public String getQueryPostersInUO(){¤		DPOUVSManager.Factory.get(getSpaceKey()).getQueryPostersGroupInUO();¤		return "";¤	}¤¤	public String getGroupName(){¤		DPOUVSManager.Factory.get(getSpaceKey()).getUvsGroup();¤		return "";¤	}¤¤	public String getGroupNameForDocTransfer(){¤		DPOUVSManager.Factory.get(getSpaceKey()).getUvsGroupWhoTransferDocsToUO();¤		return "";¤	}¤¤	private void createLinkOGV(OgvLinkFromFile link, PageManager pageManager, OGVLinksManager ogvLinksManager, List<User> users){¤		User currentUser = null;¤		for(User user : users){¤			if(user.getFullName().toLowerCase().contains(link.getResponsibleName().toLowerCase())){¤				currentUser = user;¤			}¤		}¤		if(currentUser == null)¤			return;¤		¤		Page page = pageManager.getPage(getSpaceKey(), link.getOgvName());¤		if(page == null)¤			return;¤¤		try {¤			OGVLinksDAO linkDAO = OGVLinksDAO.get(page.getId());¤			if (linkDAO == null) {¤				linkDAO = new OGVLinksDAO ();¤				linkDAO.setId(page.getId());				¤				linkDAO.setPage(page);¤			}¤			linkDAO.setLogin(currentUser.getName());¤			ogvLinksManager.doAdd(linkDAO);¤		} catch (Exception ex) {¤			Logs.LOG_E(ex.getMessage());¤		}¤¤	}¤¤	private List<OgvLinkFromFile> signDocument() {¤		List<OgvLinkFromFile> ogvList = new ArrayList<OgvLinkFromFile>(); ¤		try {¤			ogvList = readOGVFromDocument(¤				ru.garant.MDProcess.ConfluencePluginTarget.ConfluencePluginTargetMain.class.getResourceAsStream("Updates/"+ATTACH_NAME)					¤			);¤		} catch(InvalidFormatException e) {¤			Logs.LOG_E("CreateOGVFromFile::writeSignature - invalid document format - " + e);¤		} catch(Exception e) {¤			Logs.LOG_E("CreateOGVFromFile::writeSignature - can not read from attached file - " + e);¤		}¤		return ogvList;¤	}¤¤	//извлечение из файла ОГВ ¤	private List<OgvLinkFromFile> readOGVFromDocument (InputStream io) throws InvalidFormatException, IOException {¤		final Workbook workbook = WorkbookFactory.create(io);¤		final Sheet protocolSheet = workbook.getSheetAt(0);¤¤		int i = TARGET_ROW;¤		Cell cellOGV = null;¤		Cell cellResponsible = null;¤		String previousRowName = null;¤		Row row = null;¤		OgvLinkFromFile link = null;¤		List<OgvLinkFromFile> ogvList = new ArrayList<OgvLinkFromFile>(); ¤		do{¤			row = protocolSheet.getRow(i);¤			if(row != null){¤				link = new OgvLinkFromFile();¤¤				cellResponsible = row.getCell(TARGET_CELL_RESPONSIBLE);¤				if(cellResponsible != null){¤					if(!cellResponsible.getStringCellValue().isEmpty()){¤						link.setResponsibleName(cellResponsible.getStringCellValue());¤						previousRowName = cellResponsible.getStringCellValue();¤					}else{¤						link.setResponsibleName(previousRowName);¤					}¤					¤				}¤¤				cellOGV = row.getCell(TARGET_CELL_OGV);¤				if(cellOGV != null){¤					String s = cellOGV.getStringCellValue();¤					if (!StringUtils.isEmpty(s)) {¤						link.setOgvName(s);¤					}¤				}¤				¤				ogvList.add(link);¤			}	¤			i++;¤		}while(row != null);¤¤		return ogvList;¤	}¤	//получаем спейс, где находится папка с ОГВ¤	public String getSpaceKey(){¤		if(spaceKey_ == null){¤			Label label  = ContainerManager.Factory.get().getLabelManager().getLabel(LABEL_NAME);¤			List<Space> spacesList = ContainerManager.Factory.get().getLabelManager().getSpacesContainingContentWithLabel(label);¤			Space space = spacesList.get(0);¤			spaceKey_ = space.getKey();¤		}	¤		return spaceKey_;¤	}¤¤	private Page getOGVFolder(){¤		if(ogvFolder_ == null){¤			ogvFolder_ = OGVLinksManager.Factory.get(getSpaceKey()).getOgvFolder();¤		}¤		return ogvFolder_;¤	}¤	private String spaceKey_;¤	private Page ogvFolder_;¤	private final String LABEL_NAME = "ogv_folder";¤	private static final int TARGET_ROW = 0;¤	private static final short TARGET_CELL_RESPONSIBLE = 1;¤	private static final short TARGET_CELL_OGV = 2;¤	private final String ATTACH_NAME = "ogv-users.xls";¤	¤	class OgvLinkFromFile{¤		private String responsibleName_ = null;¤		private String ogvName_ = null;¤¤		public void setResponsibleName(String responsibleName){¤			responsibleName_ = responsibleName;¤		}¤¤		public String getResponsibleName(){¤			return responsibleName_;¤		}¤¤		public void setOgvName(String ogvName){¤			ogvName_ = ogvName;¤		}¤¤		public String getOgvName(){¤			return ogvName_;¤		}¤¤	}¤	¤	private Session getSession (boolean createNew) {¤		if (session_ == null) {¤			session_ = SessionFactoryUtils.getSession(ContainerManager.Factory.get().getSessionFactory(),¤														createNew);¤		}¤		return session_;¤	}¤	¤	private Session session_;¤¤	//#UC END# *4C481CD10276_CUSTOM_METHODS_AND_DATA*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"WikiPageID (wiki)"
		    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/CreateSettingsDpoUvs|4C481CD10276
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (wiki)"
		    value      	"wiki")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"20609539371"))
	    quid       	"4C481CD10276"
	    documentation 	"создание настроек ответственных"
	    stereotype 	"KActionPlugin"
	    superclasses 	(list inheritance_relationship_list
		(object Inheritance_Relationship
		    quid       	"4C481D070202"
		    supplier   	"Logical View::external::JavaConfluence::ConfluenceClassPack::ConfluenceActionSupport"
		    quidu      	"465ADCCA036B"))
	    language   	"MDA Generator")
	(object Class "CreateUvsQuery"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/DocCardChange/DocCardSupport/CreateUvsQuery.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C652CD603D7_CUSTOM_IMPORT*"
		    value      	"//#UC START# *4C652CD603D7_CUSTOM_IMPORT*¤import ru.garant.MDProcess.ConfluenceMDChange.RequestSearch.RequestSearchQueryData;¤import ru.garant.MDProcess.ConfluenceMDChange.RequestSearch.RequestSearchQueryType;¤import ru.garant.MDProcess.ConfluenceMDChange.RequestSearchSupportTypes.RequestSearchQueryResultType;¤import ru.garant.MDProcess.ConfluenceMDChange.RequestSupportTypes.RequestImportance;¤import ru.garant.MDProcess.ConfluenceMDChange.Requests.AbstractRequestLifeCycle;¤import ru.garant.MDProcess.ConfluenceMDChange.Requests.CanNotStore;¤import ru.garant.MDProcess.ConfluenceMDChange.Requests.Observer;¤import ru.garant.MDProcess.ConfluencePlugins.AutoCompleteValues.AutoCompleteProvider;¤import ru.garant.MDProcess.ConfluencePlugins.CommonVelocityContext.GlobalHelper;¤import ru.garant.MDProcess.ConfluencePlugins.LabelSupport.LabelGroup;¤import ru.garant.MDProcess.ConfluencePlugins.LabelSupport.LabelGroupName;¤import ru.garant.MDProcess.ConfluencePlugins.Search.*;¤import ru.garant.MDProcess.ConfluencePlugins.SearchSupportTypes.SortingType;¤import ru.garant.MDProcess.DocCardChange.DocCardChangeDAO.*;¤import ru.garant.MDProcess.DocCardChange.DocCardCommon.*;¤import ru.garant.MDProcess.DocCardChange.Entities.*;¤import ru.garant.MDProcess.DocCardChange.Entities.UVSStateMachine.HasDoc;¤import ru.garant.shared.GCI.I18N.Messages;¤import ru.garant.shared.GCL.DateUtils;¤import ru.garant.shared.Core.Root.NoActiveFactory;¤¤import java.io.ByteArrayInputStream;¤import java.io.ByteArrayOutputStream;¤import java.io.File;¤import java.io.FileInputStream;¤import java.io.FileNotFoundException;¤import java.io.IOException;¤import java.io.InputStream;¤import java.text.ParseException;¤import java.text.SimpleDateFormat;¤import java.util.ArrayList;¤import java.util.Arrays;¤import java.util.Calendar;¤import java.util.Collection;¤import java.util.Collections;¤import java.util.Date;¤import java.util.List;¤import java.util.Map;¤import java.util.regex.Matcher;¤import java.util.regex.Pattern;¤¤import javax.servlet.http.HttpServletRequest;¤¤import net.sf.hibernate.HibernateException;¤¤import org.apache.commons.collections.CollectionUtils;¤import org.apache.commons.io.IOUtils;¤import org.apache.commons.lang.StringUtils;¤¤import com.atlassian.confluence.labels.Label;¤import com.atlassian.confluence.pages.Attachment;¤import com.atlassian.confluence.pages.Draft;¤import com.atlassian.confluence.pages.DraftManager;¤import com.atlassian.confluence.pages.FileUploadManager;¤import com.atlassian.confluence.pages.Page;¤import com.atlassian.confluence.renderer.radeox.macros.MacroUtils;¤import com.atlassian.confluence.spaces.Space;¤import com.atlassian.confluence.user.AuthenticatedUserThreadLocal;¤import com.atlassian.confluence.util.GeneralUtil;¤import com.atlassian.confluence.util.velocity.VelocityUtils;¤import com.atlassian.renderer.util.FileTypeUtil;¤import com.atlassian.user.Group;¤import com.atlassian.xwork.FileUploadUtils;¤¤import com.lowagie.text.Document;¤import com.lowagie.text.DocumentException;¤import com.lowagie.text.pdf.PdfContentByte;¤import com.lowagie.text.pdf.PdfImportedPage;¤import com.lowagie.text.pdf.PdfReader;¤import com.lowagie.text.pdf.PdfWriter;¤//#UC END# *4C652CD603D7_CUSTOM_IMPORT*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C652CD603D7_CUSTOM_CLASS_DEFINITION*"
		    value      	"//#UC START# *4C652CD603D7_CUSTOM_CLASS_DEFINITION*¤//#UC END# *4C652CD603D7_CUSTOM_CLASS_DEFINITION*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C652CD603D7_ACTION_NAME*"
		    value      	(value Text 
|//#UC START# *4C652CD603D7_ACTION_NAME*¤		return super.getActionName(fullClassName);¤		//#UC END# *4C652CD603D7_ACTION_NAME*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C652CD603D7_CUSTOM_METHODS_AND_DATA*"
		    value      	(value Text 
|//#UC START# *4C652CD603D7_CUSTOM_METHODS_AND_DATA*¤	¤	private static final String VIEWPAGE = "viewpage.action";¤	private static final String LISTREQUESTACTION = "listrequest.action";¤	¤	public void correctUvsQueryIfItCurrentRegionQuery(Page page, long docIssuerId){¤		Page docIssuer = ContainerManager.Factory.get().getPageManager().getPage(docIssuerId);¤		boolean hasLabelUvs = docIssuer.getLabels().contains(DpoUvsHelper.getUvsLabel());¤		if(hasLabelUvs == false &&¤			(getAddDocumentIndication() == DpoUvsHelper.ADD_CURRENT_DOCUMENT_UVS ¤			|| getAddDocumentIndication() == DpoUvsHelper.ADD_UO_CURRENT_DOCUMENT_UVS)¤		){	¤			if(getAddDocumentIndication() == DpoUvsHelper.ADD_CURRENT_DOCUMENT_UVS){¤				ContainerManager.Factory.get().getLabelManager().removeLabel(page, "rt_current_doc");¤			}else{¤				ContainerManager.Factory.get().getLabelManager().removeLabel(page, "rt_uo_current_doc");¤			}¤			ContainerManager.Factory.get().getLabelManager().addLabel(page, "rt_region_query");¤			setAddDocumentIndication(DpoUvsHelper.ADD_REGION_PARTNER_DOCUMENT_UO);¤		}¤	}¤	¤	public void changeMainAttributesIfRepeatSelected() throws HibernateException{¤		if(getSelectedId() != 0){¤			GarDocDAO dc = GarDocDAO.get(getSelectedId());¤			if(dc != null){¤				//делаем все не через set функции, потому что в них меняются некоторые символы, а потом аттрибуты не совпадают с повтором, хотя должны и не присоединяется к повтору запрос.¤				if(StringUtils.isNotEmpty(dc.getName())){¤					title_ = dc.getName();¤				}¤				if(StringUtils.isNotEmpty(dc.getNumber())){¤					numbers_ = Arrays.asList(dc.getNumber());¤				}	¤				if(dc.getCreationDate() != null){¤					setCreationDate(dc.getCreationDate());¤				}¤				setDocIssuers(Arrays.asList(String.valueOf(dc.getDocIssuer())));¤				if(dc.getType() != null){¤					setTypeDocument(String.valueOf(dc.getType().getId()));¤				}¤				if(StringUtils.isNotEmpty(dc.getRegistrationNumber())){¤					registrationNumber_ = dc.getRegistrationNumber();¤				}¤				if(dc.getRegistrationDate() !=null){¤					setRegistrationDate(dc.getRegistrationDate());¤				}¤			}¤		}¤	}¤	/*¤	public void removeDraft(String draftType){¤		Draft draft = draftManager.getOrCreate(AuthenticatedUserThreadLocal.getUsername(), draftType, getSpaceKey());¤		if(draft != null){¤			draftManager.removeDraftById(draft.getId());¤		}¤	}¤	¤	public List<Attachment> getUploadedFiles(){¤		if(getAddDocumentIndication() == DpoUvsHelper.ADD_CURRENT_DOCUMENT_UVS || getAddDocumentIndication() == DpoUvsHelper.ADD_UO_CURRENT_DOCUMENT_UVS){¤			if(attachments_ == null){¤				Draft draft = draftManager.getOrCreate(AuthenticatedUserThreadLocal.getUsername(), "uvs_query", getSpaceKey());¤				if(draft != null){¤					attachments_ = ContainerManager.Factory.get().getAttachmentManager().getAttachments(draft);¤				}else{¤					attachments_ = new ArrayList<Attachment>();¤				}¤			}¤			return attachments_;¤		}else{¤			return new ArrayList<Attachment>();¤		}¤		¤	}¤	¤	List<Attachment> attachments_ = null;¤	¤	public Attachment getUploadedFileForCut(){¤		if(getAddDocumentIndication() == DpoUvsHelper.ADD_CURRENT_DOCUMENT_UVS || getAddDocumentIndication() == DpoUvsHelper.ADD_UO_CURRENT_DOCUMENT_UVS){¤			if(attachmentForCut_ == null){¤				Draft draft = draftManager.getOrCreate(AuthenticatedUserThreadLocal.getUsername(), "uvs_query_cut", getSpaceKey());¤				if(draft != null){¤					List<Attachment> attaches = ContainerManager.Factory.get().getAttachmentManager().getAttachments(draft);¤					if(attaches.size() > 0){¤						attachmentForCut_ = attaches.get(0);¤					}¤				}¤			}¤			return attachmentForCut_;¤		}else{¤			return null;¤		}¤		¤	}¤	Attachment attachmentForCut_ = null;¤¤	private DraftManager draftManager;¤    public void setDraftManager(DraftManager draftManager)¤    {¤        this.draftManager = draftManager;¤    }¤*/¤    public String execute() {¤		try {¤		addPublishDate ();¤		changeMainAttributesIfRepeatSelected();¤		¤		if(getParentPageId() == 0 && getDocCardId() != 0){¤			Page page = ContainerManager.Factory.get().getPageManager().getPage(getDocCardId());¤			setParentPageId(page.getParent().getId());¤			setDocIssuersLong(Arrays.asList(getParentPageId()));¤		}¤		findedGarDocs_ = new ArrayList<Long>();¤		¤		validate();¤		orderIssuersByOGVExecutor ();¤		¤		if(getHasError()) {¤			return SUCCESS;¤		}¤		¤		if(StringUtils.isNotEmpty(getSrcTitle())){¤			String srcTitle =  getSrcTitle().trim();¤			setSrc(GarDocSourceTitles.getSrcTitle(srcTitle));¤		}¤		Observer externalAuthorFromHelpDesk = getExternalAuthor();¤			Collection<GarDocDAO> gardocList = new ArrayList<GarDocDAO>();¤			if(isReturnInWork()){¤				long gardocId = getDocCardId();¤				List<UVSQuestDAO> inWorkQueries = DocCardManager.Factory.get().getUvsQueryByDocCardId(gardocId, UVSStateMachine.ST_CLOSED.getSortValue() + "," + UVSStateMachine.ST_DISCARDED.getSortValue());¤				if (inWorkQueries.size() == 0 && StringUtils.isNotBlank(getUoComment())) {¤					DocCard dc = DocCard.Factory.get(gardocId);¤					if (ContainerManager.Factory.get().getPageManager().getPage(dc.getDocIssuer()).getLabels().contains(¤							DpoUvsHelper.getUvsLabel()¤					)) {¤						UVSQuery uvs = CreateActionResult.Factory.get().createNewUoQueryAndAttachToDocCard(¤								dc, importance_, getUoComment(), (externalAuthorFromHelpDesk != null)?Arrays.asList(externalAuthorFromHelpDesk):null¤						);¤						return onSuccessfullyCreationResponseForUOQueryAndReturn(uvs);¤					} else {¤						UVSQuery uvs = CreateActionResult.Factory.get().createNewRegionPartnerQueryAndAttachToDocCard(¤								dc, importance_, getUoComment(), externalAuthorFromHelpDesk¤						);¤						return onSuccessfullyCreationResponseForUOQueryAndReturn(uvs);¤					}¤				} else {¤					return onCreationNotAllowedResponseAndReturn (gardocId);					¤				}¤			} else {	¤				//проверка на повторы¤				if(¤						getAddDocumentIndication() == DpoUvsHelper.ADD_CURRENT_DOCUMENT_UVS ¤						|| getAddDocumentIndication() == DpoUvsHelper.ADD_UO_CURRENT_DOCUMENT_UVS ¤						|| getAddDocumentIndication() == DpoUvsHelper.ADD_AUTO_MAILING_PROCESSING¤						|| getAddDocumentIndication() == DpoUvsHelper.ADD_AUTO_MAILING_PROCESSING_UVS¤				) {¤					gardocList = CurrentDocFinderManager.Factory.get().getDocCardForAdd(¤							getMainIssuer()¤							, getMainNumber()¤							, getCreationDate()¤							, getRegistrationNumber()¤							, getRegistrationDate()¤							, getTitle()¤							, new ArrayList(getAdditionalIssuers())¤							, new ArrayList(getAdditionalNumbers())¤							, getTypeDocument()¤							, 0¤							, getSpaceKey()¤					);¤					if (gardocList.size() == 0) {¤						//теперь вызывается только для mailing¤						if(¤								getAddDocumentIndication() == DpoUvsHelper.ADD_AUTO_MAILING_PROCESSING ||¤								getAddDocumentIndication() ==  DpoUvsHelper.ADD_AUTO_MAILING_PROCESSING_UVS¤						){¤						UVSQuery uvs = null;¤						if(getAddDocumentIndication() == DpoUvsHelper.ADD_AUTO_MAILING_PROCESSING_UVS){¤							Logs.LOG_W("CreateUvsQuery::createNewWhenUvsCurrentDoc::start");¤							uvs = CreateActionResult.Factory.get().createNewWhenUvsCurrentDoc(getDocCardAttributies());¤							Logs.LOG_W("CreateUvsQuery::createNewWhenUvsCurrentDoc::end");¤						}else{¤							uvs = CreateActionResult.Factory.get().createNewWhenUoCurrentDoc(getDocCardAttributies());¤						}¤						Logs.LOG_W("CreateUvsQuery::saveAttachments::start");¤ 						saveAttachments(uvs.getPage());¤						Logs.LOG_W("CreateUvsQuery::saveAttachments::end");¤ 						correctUvsQueryIfItCurrentRegionQuery(uvs.getPage(), uvs.getDocCard().getDocIssuer());¤						return onSuccessfullyCreationResponseForUVSQueryAndReturn(uvs.getPage().getId());¤						}else{//во всех остальных случаях выводится форма "присоединить"¤							return onAskForLinkResponseAndReturn(new ArrayList<GarDocDAO> ());¤						}¤						¤					} else {¤						if (¤								StringUtils.isNotBlank(getCopySpecification())¤								|| ((StringUtils.isNotBlank(getSrcTitle()) && StringUtils.isNotBlank(getSrcNumber()))¤										&& getAddDocumentIndication() != DpoUvsHelper.ADD_AUTO_MAILING_PROCESSING && getAddDocumentIndication() != DpoUvsHelper.ADD_AUTO_MAILING_PROCESSING_UVS) ¤								¤						) {¤							return onAskForLinkResponseAndReturn (new ArrayList<GarDocDAO> (gardocList));¤						} else {¤							boolean isDuplicateDocCardProject = false;¤							List<GarDocDAO> notAllowedDocs = new ArrayList<GarDocDAO>();¤							for (GarDocDAO gd :  gardocList) {¤								for (CopyDAO cd : gd.getCopies()) {¤									if (cd.getType().equals(getCopyType())) {¤										if(DpoUvsHelper.isProject(gd.getPage())){¤											isDuplicateDocCardProject = true;¤										}else{¤											notAllowedDocs.add(gd);¤										}¤										break;¤									}¤								}¤							}¤							if (notAllowedDocs.containsAll(gardocList) && (¤									(isDuplicateDocCardProject == false && getIsProject() == false) ¤									|| isDuplicateDocCardProject == true && getIsProject() == true)¤								) {¤								return onCreationNotAllowedResponseAndReturn (gardocList.iterator().next().getId());¤							} else {¤								if (gardocList.size() == 1) {¤									List<UVSQuestDAO> inWorkQueries = DocCardManager.Factory.get().getRtUoQueryByDocCardIdNotInStates(gardocList.iterator().next().getId(), UVSStateMachine.ST_CLOSED.getSortValue() + "," + AbstractRequestLifeCycle.ST_DISCARDED.getSortValue());¤									if (inWorkQueries.size() == 1) {¤										if (¤											(inWorkQueries.get(0).getState() == UVSStateMachine.ST_TRANSFER_TO_UO.getSortValue()¤											||inWorkQueries.get(0).getState() == UVSStateMachine.ST_ON_ACCEPT_IN_UO.getSortValue()¤											||inWorkQueries.get(0).getState() == UVSStateMachine.ST_ON_ACCEPT_BY_UO_MANAGER.getSortValue()¤											)		¤											&& inWorkQueries.get(0).getCopy() != null && inWorkQueries.get(0).getCopy().getType().equals(getCopyType())¤											&& StringUtils.isBlank(getCopySpecification())¤										) {¤											return onCreationNotAllowedResponseAndReturn(gardocList.iterator().next().getId());¤										} else {¤											return onAskForLinkResponseAndReturn(new ArrayList<GarDocDAO> (gardocList));¤										}¤									}else if (inWorkQueries.size() == 0) {¤										List<GarDocDAO> allowedDocs = new ArrayList<GarDocDAO> (gardocList);¤										allowedDocs.removeAll(notAllowedDocs);¤										if (getAddDocumentIndication() != DpoUvsHelper.ADD_AUTO_MAILING_PROCESSING && getAddDocumentIndication() != DpoUvsHelper.ADD_AUTO_MAILING_PROCESSING_UVS) {¤											return onAskForLinkResponseAndReturn(allowedDocs);¤										} else {¤											return onCreationNotAllowedResponseAndReturn(gardocList.iterator().next().getId());¤										}¤									} else {¤										throw new IllegalStateException("Find two query in work, how?!");¤									}¤								} else {¤									List<GarDocDAO> allowedDocs = new ArrayList<GarDocDAO> (gardocList);¤									allowedDocs.removeAll(notAllowedDocs);¤									return onAskForLinkResponseAndReturn(allowedDocs);¤								}							¤							}¤						}	¤					}¤				}else{¤					gardocList = UOQueryFinderManager.Factory.get().getDocCardForAdd(¤							getMainIssuer()¤							, getMainNumber()¤							, getCreationDate()¤							, getRegistrationNumber()¤							, getRegistrationDate()¤							, getTitle()¤							, getAdditionalIssuers()¤							, getAdditionalNumbers()¤							, getTypeDocument()¤							, 0¤							, getSpaceKey()¤					);¤					if (gardocList.size() == 0) {¤						UVSQuery uvs = null;¤						List<Label> labels = ContainerManager.Factory.get().getPageManager().getPage(getMainIssuer()).getLabels();¤						if (false == labels.contains(DpoUvsHelper.getUvsLabel())) {¤							//ГЛ ЮО узнает что какой-то документ никогда им не получить - это знание необходимо сохранить в К,¤							//поэтому запрос сразу попадает в отклоненные¤							if(getSendInRejected()){¤								createRegionQueryAndRejected();¤								return SUCCESS;¤							}else{¤								uvs = CreateActionResult.Factory.get().createNewWhenRegionPartnerQuery(¤										getDocIssuers(), getTypeDocument(), getNumbers(), getCreationDate(), getTitle()¤										, getRegistrationNumber(), getRegistrationDate(), importance_, getUoComment(), externalAuthorFromHelpDesk¤								);¤							}¤						} else {¤							//ГЛ ЮО узнает что какой-то документ никогда им не получить - это знание необходимо сохранить в К,¤							//поэтому запрос сразу попадает в отклоненные¤							if(getSendInRejected()){¤								createUoQueryAndRejected();¤								return SUCCESS;¤							}else{¤								uvs = CreateActionResult.Factory.get().createNewWhenUoQuery(¤										getDocIssuers(), getTypeDocument(), getNumbers(), getCreationDate(), getTitle()¤										, getRegistrationNumber(), getRegistrationDate(), importance_, getUoComment(), externalAuthorFromHelpDesk¤								);¤								storeReqAuthorAttributes();¤							}¤						}	¤						return onSuccessfullyCreationResponseForUOQueryAndReturn(uvs);											¤					} else {¤						return onCreationNotAllowedResponseAndReturn (gardocList.iterator().next().getId());¤					}¤				}¤			}	¤		} catch (Exception e) {¤			Logs.LOG_SEX(e);¤			¤			addExceptionCode (e); //обязательно до setRollbackOnly¤¤			try{¤				com.atlassian.xwork.interceptors.XWorkTransactionInterceptor.currentTransactionStatus().setRollbackOnly();¤			}finally{¤				setErrorCode(CATCH_EXCEPTION);¤				setErrorMessage("Во время сохранения запроса произошла ошибка. Запрос не создался.");¤			}			¤		}¤		return SUCCESS;¤	}¤	¤	public void storeReqAuthorAttributes(){¤		AutoCompleteProvider autoComplete = getAutoCompleteProvider();¤		if(StringUtils.isNotEmpty(getReqAuthorFioInGarDoc())){¤			autoComplete.pushSuggestedValue(LISTREQUESTACTION + ".reqauthorfio", getReqAuthorFioInGarDoc());¤		}else{¤			autoComplete.pushSuggestedValue(LISTREQUESTACTION + ".reqauthorfio", "");¤		}¤		if(StringUtils.isNotEmpty(getReqAuthorEmailInGarDoc())){¤			autoComplete.pushSuggestedValue(LISTREQUESTACTION + ".reqauthoremail", getReqAuthorEmailInGarDoc());¤		}else{¤			autoComplete.pushSuggestedValue(LISTREQUESTACTION + ".reqauthoremail", "");¤		}¤		autoComplete.store();¤	}¤	¤	public Observer getExternalAuthor(){¤		Observer externalAuthorFromHelpDesk = null;¤		if(StringUtils.isNotEmpty(getReqNumberInGarDoc())){¤			externalAuthorFromHelpDesk = new Observer(0, getReqAuthorFioInGarDoc(), getReqAuthorEmailInGarDoc(), getReqAuthorCommentInGarDoc(), getReqNumberInGarDoc());¤		}¤		return externalAuthorFromHelpDesk;¤	}¤	¤	public DocCardAttributiesForCreate getDocCardAttributies(){¤		DocCardAttributiesForCreate attributies = new DocCardAttributiesForCreate();¤		attributies.setDocIssuers(getDocIssuers());¤		attributies.setBlocks(getBlocks());¤		attributies.setCopySpecification(getCopySpecification());¤		attributies.setCopyType(getCopyType());¤		attributies.setCreateQueryNotice(getCreateQueryNotice());¤		attributies.setCreationDate(getCreationDate());¤		attributies.setDepository(getDepository());¤		attributies.setDocumentNumbers(getNumbers());¤		attributies.setDocumentType(getTypeDocument());¤		attributies.setImportance(getImportance());¤		if(StringUtils.isNotEmpty(getInstancy())){¤			attributies.setInstancy(DpoUvsHelper.convertNameToInstancyType(getInstancy()).name());¤		}¤		if(getIncludeInVersionDate() != null){¤			attributies.setIncludeInVersionDate(getIncludeInVersionDate());¤		}¤		attributies.setInternet(getInternet());¤		attributies.setIsProject(getIsProject());¤		attributies.setRegistrationDate(getRegistrationDate());¤		attributies.setRegistrationNumber(getRegistrationNumber());¤		attributies.setRestrictedStatus(restrictedStatus_);¤		attributies.setSite(getSite());¤		attributies.setIsConnected(getIsConnected());¤		attributies.setSrc(getSrc());¤		¤		if(StringUtils.isEmpty(getSrcStartDate())&&StringUtils.isNotEmpty(getSrcEndDate())){¤			setSrcStartDate(getSrcEndDate());¤		}¤		if(StringUtils.isEmpty(getSrcEndDate())&& StringUtils.isNotEmpty(getSrcStartDate())){¤			setSrcEndDate(getSrcStartDate());¤		}¤		attributies.setSrcStartDate(DpoUvsHelper.getSrcDate(getSrcStartDate()));¤		attributies.setSrcEndDate(DpoUvsHelper.getSrcDate(getSrcEndDate()));¤		attributies.setSrcNumber(getSrcNumber());¤		attributies.setSrcPage(getSrcPageNumber());¤		attributies.setTitle(getTitle());¤		attributies.setTopic(getTopic());¤		return attributies;¤	}¤	public String getInitialDate(){¤		String dateString = getAutoCompleteProvider ().getFirstSuggestedValue("documentDate");¤		//long time = DateUtils.parseCombinedDate (dateString, true);¤		//Date  date = new Date(time);¤		//retun date;¤		return dateString;¤	}¤	¤	public AutoCompleteProvider getAutoCompleteProvider () {¤		AutoCompleteProvider autoComplete = AutoCompleteProvider.Factory¤				.get(getRemoteUser().getName(), "UVSQUERY" + getSpaceKey());¤		if (!autoComplete.getInitialized()) {¤			autoComplete.setMaxValues(1);¤			autoComplete.setInitialized();¤		}¤		return autoComplete;¤	}¤¤	private String typeDocument_;¤	public String getTypeDocument(){¤		return typeDocument_;¤	}¤	public void setTypeDocument(String typeDocument){¤		typeDocument_ = typeDocument;¤		setIsProject();¤	}¤	¤	private String importance_ = "3";¤	public String getImportance(){¤		return importance_;¤	}¤	public void setImportance(String importance){¤		importance_ = importance;¤	}¤	¤	protected String getImportanceLabelById(String id) {¤		return RequestImportance.getById(Integer.valueOf(id)).getLabel();¤	}¤¤	public long getMainIssuer (){¤		return getDocIssuers().get(0);¤	}¤¤	private java.util.Date creationDate_ = null;¤	public java.util.Date getCreationDate () {¤		return creationDate_;¤	}¤¤	public void setCreationDate (final java.util.Date creationDate) {¤		creationDate_ = creationDate;¤	}¤¤	private long topic_ = 0;¤	public long getTopic () {¤		return topic_;¤	}¤¤	public void setTopic (final long topic) {¤		topic_ = topic;¤	}¤¤	public String getMainNumber () {¤		return (getNumbers().size() > 0) ? getNumbers().get(0): "";¤	}¤¤	private String registrationNumber_ = null;¤	public String getRegistrationNumber () {¤		return registrationNumber_;¤	}¤¤	public void setRegistrationNumber (final String registrationNumber) {¤		if(StringUtils.isNotEmpty(registrationNumber)){¤			registrationNumber_ = registrationNumber.trim();¤		}else{¤			registrationNumber_ = registrationNumber;¤		}¤	}¤¤	private java.util.Date registrationDate_ = null;¤	public java.util.Date getRegistrationDate () {¤		return registrationDate_;¤	}¤	¤	private String title_ = "Надо тайтл";¤	public String getTitle () {¤		return title_;¤	}¤¤	public void setTitle (final String title) {¤		if(title != null && title.length() > 512){¤			title_ = title.substring(0, 511);¤		}else{¤			title_ = title;¤		}¤		¤		if(title_ != null) {¤			title_ = title_.replaceAll("\\s", " ");¤		}¤	}¤	¤¤	public void setRegistrationDate (final java.util.Date registrationDate) {¤		registrationDate_ = registrationDate;¤	}¤	¤	String copySpecification_ = null;¤	public void setCopySpecification (final String copySpecification) {¤		copySpecification_ = copySpecification;¤	}¤¤	public String getCopySpecification() {¤		return copySpecification_;¤	}¤	¤	String createQueryNotice_ = null;¤	public void setCreateQueryNotice (final String createQueryNotice) {¤		createQueryNotice_ = createQueryNotice;¤	}¤¤	public String getCreateQueryNotice () {¤		return createQueryNotice_;¤	}¤¤	String reqNumberInGarDoc_ = null;¤	public void setReqNumberInGarDoc (final String reqNumberInGarDoc) {¤		reqNumberInGarDoc_ = reqNumberInGarDoc.trim();¤	}¤¤	public String getReqNumberInGarDoc () {¤		return reqNumberInGarDoc_;¤	}¤¤	String reqAuthorFioInGarDoc_ = null;¤	public void setReqAuthorFioInGarDoc (final String reqAuthorFioInGarDoc) {¤		reqAuthorFioInGarDoc_ = reqAuthorFioInGarDoc.trim();¤	}¤¤	public String getReqAuthorFioInGarDoc () {¤		return reqAuthorFioInGarDoc_;¤	}¤¤	String reqAuthorEmailInGarDoc_ = null;¤	public void setReqAuthorEmailInGarDoc (final String reqAuthorEmailInGarDoc) {¤		reqAuthorEmailInGarDoc_ = reqAuthorEmailInGarDoc.trim();¤	}¤¤	public String getReqAuthorEmailInGarDoc () {¤		return reqAuthorEmailInGarDoc_;¤	}¤¤	String reqAuthorCommentInGarDoc_ = null;¤	public void setReqAuthorCommentInGarDoc (final String reqAuthorCommentInGarDoc) {¤		reqAuthorCommentInGarDoc_ = reqAuthorCommentInGarDoc.trim();¤	}¤¤	public String getReqAuthorCommentInGarDoc () {¤		return reqAuthorCommentInGarDoc_;¤	}¤¤	String uoComment_ = null;¤	public void setUoComment (final String uoComment) {¤		uoComment_ = uoComment;¤	}¤¤	public String getUoComment () {¤		return uoComment_;¤	}¤¤	¤	String restrictedStatus_ = null;¤	public void setRestrictedStatus (final String restrictedStatus) {¤		restrictedStatus_ = restrictedStatus;¤	}¤		¤	String copyType_ = null;¤	public void setCopyType (final String copyType) {¤		copyType_ = copyType;¤	}¤		¤	public String getCopyType () {¤		return copyType_;¤	}¤	¤	Long imageStart_ = 0l;¤	public void setImageStart (final Long imageStart) {¤		imageStart_ = imageStart;¤	}¤		¤	public Long getImageStart () {¤		return imageStart_;¤	}¤	¤	Long imageEnd_ = 0l;¤	public void setImageEnd (final Long imageEnd) {¤		imageEnd_ = imageEnd;¤	}¤		¤	public Long getImageEnd () {¤		return imageEnd_;¤	}¤	¤	public void validate() {¤		validateImpl();¤	}¤	¤	public boolean validateImpl(){¤		if(getAddDocumentIndication() == DpoUvsHelper.ADD_CURRENT_DOCUMENT_UVS || ¤				getAddDocumentIndication() == DpoUvsHelper.ADD_UO_CURRENT_DOCUMENT_UVS || ¤				getAddDocumentIndication() == DpoUvsHelper.DOCCARD_IS_RETURN_IN_WORK){¤				return validateImplCurrentDocAndUoCurrentDoc ();¤			}else {¤				return validateImplOther ();¤			}¤	}¤	¤	public boolean validateAttributes (boolean hasType, boolean hasNumber, boolean hasCreationDate, boolean hasTitle) {¤		int validCount = 0;¤		for (boolean has : new boolean[] {hasType, hasNumber, hasCreationDate, hasTitle}) {¤			validCount += has ? 1: 0;¤		}¤		return validCount >= 2;¤	}¤	¤	public boolean validateImplCurrentDocAndUoCurrentDoc(){¤		if(validateDocIssuer() == false){¤			setErrorCode(VALIDATION_FAILED_DOC_ISSUER);¤			setErrorMessage(Messages.Factory.messages()¤					.get("createuvsquery.necessary.to.input.docissuer.with.label.uvs"));¤			return false;¤		}¤		¤		if(isReturnInWork() == false &&	StringUtils.isEmpty(restrictedStatus_)){¤			setErrorCode(VALIDATION_FAILED_RESTRICTED_STATUS);¤			setErrorMessage("Не задано ограничение распространения");¤			return false;¤		}¤		¤		boolean hasType =¤				false == StringUtils.isEmpty(getTypeDocument())¤				&& false == getTypeDocument().equals("0")¤				&& false == getTypeDocument().equals(ru.garant.shared.GCI.I18N.Messages.Factory.messages().get("uvsquery.type.not.specified"))¤			;¤¤		boolean hasNumber = getNumbers().size() > 0;¤		boolean hasCreationDate = getCreationDate() != null;¤		boolean hasTitle = StringUtils.isNotEmpty(getTitle());¤		¤//		long issuerId = (isReturnInWork())? getDocCardId() : getDocIssuers().get(0);¤//		boolean issuerNTD = issuerId == DpoUvsHelper.NTDIssuerPageId_;¤//		boolean issuerRosstandart = issuerId == DpoUvsHelper.RosstandartIssuerPageId_;¤//		boolean issuerGosDuma = issuerId == DpoUvsHelper.GOS_DUMA_PAGE_ID;¤¤//		boolean isNTDAndNumberOrTitleOrType = issuerNTD && (hasNumber || hasTitle || hasType);¤//		boolean isRosstandartAndTypeAndNumberOrTitle = true && hasType && (hasNumber || hasTitle);¤//		boolean isGosDumaAndType = issuerGosDuma && hasType && (getTypeDocument().equals("ЗАКОН") || getTypeDocument().equals("ПРОЕКТ ЗАКОНА"));¤		¤		if (false == validateAttributes (hasType, hasNumber, hasCreationDate, hasTitle)) {¤			setErrorCode(VALIDATION_FAILED_DOCUMENT_NUMBER);¤			setErrorMessage("Должны быть заданы хотя бы 2 из 4 атрибутов: тип, номер, дата, название");¤			return false;¤		}¤¤		if (¤			(StringUtils.isNotEmpty(getCopyType()) && ¤					(¤						(	¤							(false == getCopyType().equals(new PaperCopy().getType()) ¤							&& StringUtils.isBlank(getDepository()))¤						|| (StringUtils.isNotBlank(getDepository()) && false == validateImage())¤						)¤						&& CollectionUtils.isEmpty(images_)¤						&& localFiles_.size() == 0¤					)¤			)		¤		) {¤			¤			Logs.LOG_D("Depository: " + getDepository());¤			Logs.LOG_D("Copy Type: " + getCopyType());¤			¤			setErrorCode(VALIDATION_FAILED_IMAGE_NOT_FOUND);¤			setErrorMessage("Образ не найден. Укажите в поле Местоположение Файла полный путь до образа");¤			return false;¤		}¤		¤		if(StringUtils.isNotEmpty(getIsConnected()) ¤				&& DpoUvsHelper.connectedStatusNameToConnectedStatus(getIsConnected()) == ConnectedStatus.IS_CONNECTED¤				&& (getBlocks() == null || getBlocks().size() == 0)){¤			setErrorCode(VALIDATION_FAILED_IS_CONNECTED_NO_BLOCKS);¤			setErrorMessage("Указан тип подключения: ПОДКЛЮЧАТЬ К F1, но НЕ указаны блоки");¤			return false;¤		}¤		if(StringUtils.isNotEmpty(getSrcTitle())){¤			GarDocSourceTitles gdst = GarDocSourceTitles.get(getSrcTitle().trim());¤			if(gdst == null){¤				setErrorCode(VALIDATION_FAILED_NO_TITLE);¤				setErrorMessage("Такой источник опубликования не существует");¤			}¤		}¤		return true;¤	}¤¤	public boolean validateImplOther(){¤		if(validateDocIssuer() == false){¤			setErrorCode(VALIDATION_FAILED_DOC_ISSUER);¤			setErrorMessage(Messages.Factory.messages()¤					.get("createuvsquery.necessary.to.input.docissuer.with.label.uvs"));¤			return false;¤		}¤¤		boolean hasType =¤				false == StringUtils.isEmpty(getTypeDocument())¤				&& false == getTypeDocument().equals("0")¤				&& false == getTypeDocument().equals(ru.garant.shared.GCI.I18N.Messages.Factory.messages().get("uvsquery.type.not.specified"))¤			;¤		boolean hasNumber = getNumbers().size() > 0;¤		boolean hasCreationDate = getCreationDate() != null;		¤		boolean hasTitle = StringUtils.isNotEmpty(getTitle());¤		¤		if (false == validateAttributes (hasType, hasNumber, hasCreationDate, hasTitle)) {¤			setErrorCode(VALIDATION_FAILED_DOCUMENT_NUMBER);¤			setErrorMessage("Должны быть заданы хотя бы 2 из 4 атрибутов: тип, номер, дата, название");¤			return false;¤		}¤		¤		if (¤			(StringUtils.isNotEmpty(getCopyType()) && ¤				(¤					(	¤						(¤							false == getCopyType().equals(new PaperCopy().getType()) ¤							&& StringUtils.isBlank(getDepository()) ¤						)¤						|| (StringUtils.isNotBlank(getDepository()) && false == validateImage())¤					)¤					&& CollectionUtils.isEmpty(images_)¤					&& localFiles_.size() == 0¤				)¤			)		¤		) {¤			Logs.LOG_D("Depository: " + getDepository());¤			Logs.LOG_D("Copy Type: " + getCopyType());¤			¤			setErrorCode(VALIDATION_FAILED_IMAGE_NOT_FOUND);¤			setErrorMessage("Образ не найден. Укажите в поле Местоположение Файла полный путь до образа");¤			return false;¤		}¤			¤		if(StringUtils.isNotEmpty(getIsConnected()) ¤				&& DpoUvsHelper.connectedStatusNameToConnectedStatus(getIsConnected()) == ConnectedStatus.IS_CONNECTED¤				&& (getBlocks() == null || getBlocks().size() == 0)){¤			setErrorCode(VALIDATION_FAILED_IS_CONNECTED_NO_BLOCKS);¤			setErrorMessage("Указан тип подключения: ПОДКЛЮЧАТЬ К F1, но НЕ указаны блоки");¤			return false;¤		}¤		return true;¤	}¤¤	private boolean validateImage () {¤		if(DpoUvsHelper.isLocalPathWithLinuxPath(getDepository(), getSpaceKey()) == false){¤			String[] path = getDepository().split("\\\\");¤			if (path.length < 5 || path.length > 6) {¤				return false;¤			}¤		}¤		¤		File f = getInitialImage(getDepository());¤		if (f == null) {¤			return false;¤		}¤		¤		List<Attachment> ret = new ArrayList<Attachment> ();¤		makeAttachmentsFor(f, ret);¤		if (ret.size() == 0) {¤			return false;¤		}¤		return true;¤	}¤¤	¤	private boolean validateDocIssuer(){¤		if(getDocIssuers().size() == 0){¤			return false;¤		}¤		Page issuer = ContainerManager.Factory.get().getPageManager().getPage(getMainIssuer());¤		if((getAddDocumentIndication() == DpoUvsHelper.ADD_CURRENT_DOCUMENT_UVS || getAddDocumentIndication() == DpoUvsHelper.ADD_UO_CURRENT_DOCUMENT_UVS)¤				&& issuer.getLabels().contains(DpoUvsHelper.getUvsLabel()) == false){¤			return false;¤		}¤		return true;¤	}¤	¤	protected UVSQueryPermissionManager getPermissionManager() {¤		return UVSQueryPermissionManager.Factory.get();¤	}¤	¤	protected DpoUvsHelper getRequestHelper() {¤		return new DpoUvsHelper();¤	}¤¤	public String getOrgan(String spaceKey, long ogvId){¤		StringBuilder result = new StringBuilder();¤		if(getSpaceKey() == null)¤			return "";¤		OGVLinksDAO ogvLink = OGVLinksManager.Factory.get(getSpaceKey()).getOgvById(ogvId);¤		if(ogvLink == null)¤			return "";¤		result.append("<option value=\"" + ogvLink.getId() + "\" selected=\"true\">" + ogvLink.getPage().getTitle() + "</option>");¤		return result.toString();¤	}¤¤	public String doDefaultWindow(){¤		responseContent = renderTooltip();¤		return SUCCESS;¤	}¤¤	public String doCreateUvsQueryWithoutDocCard () {¤		try {¤			if(getAddDocumentIndication() == DpoUvsHelper.ADD_UO_CURRENT_DOCUMENT_UVS && getAddRequestFromWhere() == DpoUvsHelper.FROM_DOCCARD){¤				validate();¤				if(getHasError()) {¤					return SUCCESS;¤				}¤			}¤			if (getAddDocumentIndication() == DpoUvsHelper.ADD_CURRENT_DOCUMENT_UVS || getAddDocumentIndication() == DpoUvsHelper.ADD_UO_CURRENT_DOCUMENT_UVS¤					|| getAddDocumentIndication() == DpoUvsHelper.ADD_AUTO_MAILING_PROCESSING¤					|| getAddDocumentIndication() == DpoUvsHelper.ADD_AUTO_MAILING_PROCESSING_UVS) {¤				¤				addPublishDate ();¤				changeMainAttributesIfRepeatSelected();¤				¤				if(StringUtils.isNotEmpty(getSrcTitle())){¤					String srcTitle =  getSrcTitle().trim();¤					setSrc(GarDocSourceTitles.getSrcTitle(srcTitle));¤				}¤				if(getAddDocumentIndication() != DpoUvsHelper.ADD_AUTO_MAILING_PROCESSING && getAddDocumentIndication() != DpoUvsHelper.ADD_AUTO_MAILING_PROCESSING_UVS){¤					Collection<GarDocDAO> gardocList = new ArrayList<GarDocDAO>();¤					if(getSelectedId() > 0){¤						gardocList = CurrentDocFinderManager.Factory.get().getDocCardForAdd(¤								getMainIssuer()¤								, getMainNumber()¤								, getCreationDate()¤								, getRegistrationNumber()¤								, getRegistrationDate()¤								, getTitle()¤								, new ArrayList(getAdditionalIssuers())¤								, new ArrayList(getAdditionalNumbers())¤								, getTypeDocument()¤								, 0¤								, getSpaceKey()¤						);¤						¤					}¤					¤					if (getSelectedId() == 0 || gardocList.size() == 0) {¤						UVSQuery uvs = null;¤						if(getAddDocumentIndication() == DpoUvsHelper.ADD_CURRENT_DOCUMENT_UVS){¤							Logs.LOG_W("CreateUvsQuery::doCreateUvsQueryWithoutDocCard::createNewWhenUvsCurrentDoc::start");¤							uvs = CreateActionResult.Factory.get().createNewWhenUvsCurrentDoc(getDocCardAttributies());¤							Logs.LOG_W("CreateUvsQuery::doCreateUvsQueryWithoutDocCard::createNewWhenUvsCurrentDoc::end");¤						}else{¤							uvs = CreateActionResult.Factory.get().createNewWhenUoCurrentDoc(getDocCardAttributies());¤						}¤						¤							saveAttachments(uvs.getPage());¤							correctUvsQueryIfItCurrentRegionQuery(uvs.getPage(), uvs.getDocCard().getDocIssuer());¤						return onSuccessfullyCreationResponseForUVSQueryAndReturn(uvs.getPage().getId());¤					} ¤					¤				}¤¤				List<UVSQuestDAO> inWorkQueries;¤				if (getInWorkQueryId() != 0) {¤					inWorkQueries = new ArrayList<UVSQuestDAO>();¤					inWorkQueries.add((UVSQuestDAO)UVSQuestDAO.get(getInWorkQueryId()));¤					¤					setSelectedId(inWorkQueries.get(0).getGardoc().getId());¤				} else {¤					inWorkQueries = DocCardManager.Factory.get().getRtUoQueryByDocCardIdNotInStates(¤							getSelectedId()¤							, UVSStateMachine.ST_CLOSED.getSortValue() + ","¤								+ UVSStateMachine.ST_DISCARDED.getSortValue() + ","¤								+ UVSStateMachine.ST_TRANSFER_TO_UO.getSortValue() + ","¤								+ UVSStateMachine.ST_ANALYSE_REPEATS_DOCS.getSortValue() + ","¤								+ UVSStateMachine.ST_ON_ACCEPT_IN_UO.getSortValue() + ","¤								+ UVSStateMachine.ST_MARKING_PAPER_COPY.getSortValue() + ","¤								+ UVSStateMachine.ST_ON_ACCEPT_BY_UO_MANAGER.getSortValue()¤					);¤				}¤				if (inWorkQueries.size() == 1) {¤					UVSQuery uvs = UVSQuery.Factory.getForSystemLogic(inWorkQueries.get(0).getId());¤					if(getHasRepeat()){¤						ContainerManager.Factory.get().getContentPropertyManager().setStringProperty(uvs.getPage(), "isRepeat", String.valueOf(getHasRepeat()));¤					}¤				¤					if (getAddDocumentIndication() == DpoUvsHelper.ADD_CURRENT_DOCUMENT_UVS || getAddDocumentIndication() == DpoUvsHelper.ADD_AUTO_MAILING_PROCESSING_UVS){¤						Logs.LOG_W("CreateUvsQuery::doCreateUvsQueryWithoutDocCard::changeStateOnExistQueryWhenUvsCurrentDoc::start");¤						CreateActionResult.Factory.get().changeStateOnExistQueryWhenUvsCurrentDoc (uvs, getDocCardAttributies());¤						Logs.LOG_W("CreateUvsQuery::doCreateUvsQueryWithoutDocCard::changeStateOnExistQueryWhenUvsCurrentDoc::end");¤					}else{¤						CreateActionResult.Factory.get().changeStateOnExistQueryWhenUoCurrentDoc (uvs, getDocCardAttributies());¤					}¤					¤					if(uvs.getDocCard().getTopic() > 0 &&¤							(uvs.getDocCard().getRegistrationNumber() == null || uvs.getDocCard().getRegistrationNumber().equals(getRegistrationNumber()) == false) &&¤							(uvs.getDocCard().getRegistrationDate() == null || uvs.getDocCard().getRegistrationDate().equals(getRegistrationDate()) == false)¤					){¤						DpoUvsHelper.addLabelGardocMinust(uvs.getDocCard(), getRegistrationNumber(), getRegistrationDate());					¤					}¤					¤					if(getRegistrationDate() != null) {¤						uvs.getDocCard().setRegistrationDate(getRegistrationDate());¤					}¤					if(getRegistrationNumber() != null) {¤						uvs.getDocCard().setRegistrationNumber(getRegistrationNumber());¤					}¤					if(StringUtils.isNotEmpty(getTitle()) && uvs.getDocCard().getName() == null){¤						uvs.getDocCard().setName(getTitle());¤					}¤					if(getNumbers().size() > 0 && uvs.getDocCard().getNumber() == null){¤						uvs.getDocCard().setNumber(getNumbers().get(0));¤					}¤					if(getCreationDate() != null && uvs.getDocCard().getCreationDate() == null){¤						uvs.getDocCard().setCreationDate(getCreationDate());¤					}¤					if((StringUtils.isNotEmpty(getTypeDocument()) || uvs.getDocCard().getType().equals("НЕ УКАЗАН")) ¤							&& StringUtils.isEmpty(uvs.getDocCard().getType())){¤						uvs.getDocCard().setType(getTypeDocument());¤					}¤					// здесь коммит нужен, потому-что в changeStateOnExistQueryWhenXXX меняются поля в doccard-е¤					uvs.getDocCard().commit();¤					¤					saveAttachments(uvs.getPage());¤					String ret = onSuccessfullyCreationResponseForUVSQueryAndReturn (uvs.getPage().getId());¤					¤					findedGarDocs_= Arrays.asList(Long.valueOf(getSelectedId()));¤					findedRequestId_ = uvs.getPage().getId();¤					setSuccesfulErrorCode(SUCCESFUL_ERROR_CODE_ATTACH_TO_EXISTING_QUERY_FOR_EXISTING_DOCCARD);¤¤					return ret;¤				} else if (inWorkQueries.size() == 0) {¤					DocCard dc = DocCard.Factory.get(getSelectedId());¤					if(dc.getTopic() > 0 &&¤							(dc.getRegistrationNumber() == null || dc.getRegistrationNumber().equals(getRegistrationNumber()) == false) &&¤							(dc.getRegistrationDate() == null || dc.getRegistrationDate().equals(getRegistrationDate()) == false)¤					){¤						DpoUvsHelper.addLabelGardocMinust(dc, getRegistrationNumber(), getRegistrationDate());¤					}¤					if(getRegistrationDate() != null) {¤						dc.setRegistrationDate(getRegistrationDate());¤					}¤					if(StringUtils.isNotEmpty(getRegistrationNumber())) {¤						dc.setRegistrationNumber(getRegistrationNumber());¤					}¤					if(StringUtils.isNotEmpty(getTitle()) && StringUtils.isEmpty(dc.getName())){¤						dc.setName(getTitle());¤					}¤					if((StringUtils.isEmpty(dc.getType()) || dc.getType().equals("НЕ УКАЗАН")) && StringUtils.isNotEmpty(getTypeDocument())){¤						dc.setType(getTypeDocument());¤					}¤					if(getCreationDate() != null && dc.getCreationDate() == null){¤						dc.setCreationDate(getCreationDate());¤					}¤					if(getNumbers().size() > 0 && dc.getNumber() == null){¤						dc.setNumber(getNumbers().get(0));¤					}¤¤¤					UVSQuery uvs = null;¤¤					if (getAddDocumentIndication() == DpoUvsHelper.ADD_CURRENT_DOCUMENT_UVS){¤						Logs.LOG_W("CreateUvsQuery::doCreateUvsQueryWithoutDocCard::createNewUvsCurrentDocAndAttachToDocCard::start");¤						uvs = CreateActionResult.Factory.get().createNewUvsCurrentDocAndAttachToDocCard(dc, getDocCardAttributies());¤						Logs.LOG_W("CreateUvsQuery::doCreateUvsQueryWithoutDocCard::createNewUvsCurrentDocAndAttachToDocCard::end");¤					}else{¤						uvs = CreateActionResult.Factory.get().createNewUoCurrentDocAndAttachToDocCard(dc, getDocCardAttributies());¤					}¤¤					if(getHasRepeat()){¤						ContainerManager.Factory.get().getContentPropertyManager().setStringProperty(uvs.getPage(), "isRepeat", String.valueOf(getHasRepeat()));¤					}¤					Logs.LOG_W("CreateUvsQuery::doCreateUvsQueryWithoutDocCard::saveAttachments::start");¤					saveAttachments(uvs.getPage());¤					Logs.LOG_W("CreateUvsQuery::doCreateUvsQueryWithoutDocCard::saveAttachments::end");¤¤					String ret = onSuccessfullyCreationResponseForUVSQueryAndReturn (uvs.getPage().getId());¤					¤					findedGarDocs_= Arrays.asList(Long.valueOf(getSelectedId()));¤					findedRequestId_ = uvs.getPage().getId();¤					setSuccesfulErrorCode(SUCCESFUL_ERROR_CODE_CREATE_NEW_QUERY_FOR_EXISTING_DOCCARD);¤¤					return ret;¤				} else {¤					throw new IllegalStateException ("Has more then one worked query, how?! Please, contact with system administrator");¤				}¤			} else {¤				throw new IllegalStateException ("UOQuery can not created in that function. Please, contact with system administrator");¤			}¤			¤		} catch (IllegalStateException ee) {¤			Logs.LOG_I("ERROR: " + ee.getMessage());¤			¤			addExceptionCode (ee); //обязательно до setRollbackOnly¤¤			try{¤				com.atlassian.xwork.interceptors.XWorkTransactionInterceptor.currentTransactionStatus().setRollbackOnly();¤			}finally{¤				setErrorCode(CATCH_EXCEPTION);¤				setErrorMessage("Во время сохранения запроса произошла ошибка. Запрос не создался.");¤			}¤		} catch (Exception e) {¤			Logs.LOG_SEX(e);¤			¤			addExceptionCode (e); //обязательно до setRollbackOnly¤			¤			try{¤				com.atlassian.xwork.interceptors.XWorkTransactionInterceptor.currentTransactionStatus().setRollbackOnly();¤			}finally{¤				setErrorCode(CATCH_EXCEPTION);¤				setErrorMessage("Во время сохранения запроса произошла ошибка. Запрос не создался.");¤			}¤		}¤		return SUCCESS;¤	}¤¤	private static final String TOOLTIP_TEMPLATE_PATH = "/DocCardChange/DocCardView/createuvsquery.vm";¤	¤	public Map<String, Object> getMacroContextMap(){¤		return MacroUtils.defaultVelocityContext();¤	}¤	¤	public Map<String, Object> getContextParams() {¤		Map<String, Object> contextMap = getMacroContextMap();¤		if(getSpaceKey() != null && getSpaceKey().isEmpty()){¤			List<Space> spaces = UVSQueryManager.Factory.get().getMdcSpaces();¤			for(Space space : spaces){¤				boolean enabled = DPOUVSManager.Factory.get(space).getEnabled();¤				Group uvsGroup = DPOUVSManager.Factory.get(space).getUvsGroup(); ¤				if(enabled && ContainerManager.Factory.get().getUserAccessor().hasMembership(uvsGroup, getRemoteUser())){¤					setSpaceKey(space.getKey());¤					break;¤				}¤			}¤		}¤		contextMap.put("spaceKey", getSpaceKey());¤		contextMap.put("action", this);¤		contextMap.put("addDocumentIndication", getAddDocumentIndication());¤		if(getAddDocumentIndication() == DpoUvsHelper.ADD_UO_CURRENT_DOCUMENT_UVS && getAddRequestFromWhere() == DpoUvsHelper.getFromDoccard() && getShowSavedFields()){¤			DocCard dc = DocCard.Factory.get(getParentPageId());¤			if(StringUtils.isNotEmpty(dc.getType()) && (dc.getType().equals(ru.garant.shared.GCI.I18N.Messages.Factory.messages().get("uvsquery.type.not.specified")) == false)){¤				contextMap.put("initialDocumentType", dc.getType());¤				contextMap.put("initialDocumentTypeId", dc.getTypeId());¤				¤			}¤			contextMap.put("number", dc.getNumber());	¤			if(dc.getCreationDate() != null){¤				contextMap.put("docDate", getParseDate(DateUtils.formatDdMMyyyDate(dc.getCreationDate())));¤			}	¤			if(StringUtils.isNotEmpty(dc.getRegistrationNumber())){¤				contextMap.put("regNumber", dc.getRegistrationNumber());¤			}¤			if(dc.getRegistrationDate() != null){¤				contextMap.put("regDate", getParseDate(DateUtils.formatDdMMyyyDate(dc.getRegistrationDate())));¤			}	¤			contextMap.put("restrictedStatus", dc.getRestrictedStatus());	¤			if(StringUtils.isNotEmpty(dc.getName())){¤				contextMap.put("docName", dc.getName());¤			}¤			contextMap.put("initialDocIssuer", dc.getDocIssuer());¤			String docIssuer = String.valueOf(dc.getDocIssuer());¤			if(StringUtils.isNotEmpty(docIssuer)){¤				contextMap.put("initialTitle", new GlobalHelper().escapeHtml(DpoUvsHelper.getTitleFromId(docIssuer)));¤			}¤			¤			contextMap.put("connectedStatus", dc.getIsConnected().name());¤			if(dc.getBlocks() != null && dc.getBlocks().size() > 0){¤				contextMap.put("blocks", DpoUvsHelper.getBlockNames(dc.getBlocks()));¤				contextMap.put("mainBlock", dc.getBlocks().get(0).getShortName());¤			}¤			contextMap.put("internet", dc.getInternet());¤			contextMap.put("instancy", DpoUvsHelper.convertInstancyTypeAndBooleanFromMessageString(dc.getInstancy()));¤			contextMap.put("showInstancy", false);¤			contextMap.put("disableInstancy", true);¤			contextMap.put("showAutoComplete", true);¤¤			String copyType = getAutoCompleteProvider().getFirstSuggestedValue("listrequest.action.copyType");¤			if(StringUtils.isNotEmpty(copyType)){¤				contextMap.put("initialCopyType", copyType);¤			}else{¤				contextMap.put("initialCopyType", new ECopyDAO().getType());¤			}¤			¤			String depository = getAutoCompleteProvider().getFirstSuggestedValue("listrequest.action.depository");¤			if(StringUtils.isNotEmpty(depository)){¤				contextMap.put("initialDepository", depository);¤			}¤¤			String srcTitle = getAutoCompleteProvider().getFirstSuggestedValue("listrequest.action.srcTitle");¤			if(StringUtils.isNotEmpty(srcTitle)){¤				contextMap.put("initialGarDocSourceTitle", new GlobalHelper().escapeHtml(srcTitle));¤			}¤			String srcNumber = getAutoCompleteProvider().getFirstSuggestedValue("listrequest.action.srcNumber");¤			if(StringUtils.isNotEmpty(srcNumber)){¤				contextMap.put("initialSrcNumber", srcNumber);¤			}¤			String srcStartDate = getAutoCompleteProvider().getFirstSuggestedValue("listrequest.action.srcStartDate");¤			if(StringUtils.isNotEmpty(srcStartDate)){¤				contextMap.put("initialSrcStartDate", srcStartDate);¤			}¤			String srcEndDate = getAutoCompleteProvider().getFirstSuggestedValue("listrequest.action.srcEndDate");¤			if(StringUtils.isNotEmpty(srcEndDate)){¤				contextMap.put("initialSrcEndDate", srcEndDate);¤			}¤¤			setParentPageId(DocCard.Factory.get(getParentPageId()).getDocIssuer());¤			¤		}else if(isReturnInWork()){¤			DocCard dc = DocCard.Factory.get(getDocCardId());¤			contextMap.put("returnInWork", true);	¤			contextMap.put("docCardId", getDocCardId());¤			if(StringUtils.isNotEmpty(dc.getNumber())){¤				contextMap.put("number", dc.getNumber());	¤			}¤			if(dc.getCreationDate() != null){¤				contextMap.put("docDate", getParseDate(DateUtils.formatDdMMyyyDate(dc.getCreationDate())));¤			}¤			if(StringUtils.isNotEmpty(dc.getRegistrationNumber())){¤				contextMap.put("regNumber", dc.getRegistrationNumber());¤			}	¤			if(dc.getRegistrationDate() != null){¤				contextMap.put("regDate", getParseDate(DateUtils.formatDdMMyyyDate(dc.getRegistrationDate())));¤			}¤			contextMap.put("restrictedStatus", dc.getRestrictedStatus());	¤			if(StringUtils.isNotEmpty(dc.getName())){¤				contextMap.put("docName", dc.getName());¤			}¤			contextMap.put("initialDocIssuer", dc.getDocIssuer());¤			String docIssuer = String.valueOf(dc.getDocIssuer());¤			if(StringUtils.isNotEmpty(docIssuer)){¤				contextMap.put("initialTitle", new GlobalHelper().escapeHtml(DpoUvsHelper.getTitleFromId(docIssuer)));¤			}¤			if(StringUtils.isNotEmpty(dc.getType()) && (dc.getType().equals(ru.garant.shared.GCI.I18N.Messages.Factory.messages().get("uvsquery.type.not.specified")) == false)){¤				contextMap.put("initialDocumentType", dc.getType());¤				contextMap.put("initialDocumentTypeId", dc.getTypeId());¤			}¤			contextMap.put("showInstancy", true);¤			contextMap.put("disableInstancy", true);¤			contextMap.put("showAutoComplete", false);¤		}else if(getAddDocumentIndication() == DpoUvsHelper.ADD_CURRENT_DOCUMENT_UVS || getAddDocumentIndication() == DpoUvsHelper.ADD_UO_CURRENT_DOCUMENT_UVS){¤			String docTypeName = getAutoCompleteProvider().getFirstSuggestedValue("listrequest.action.documentType");¤			if(StringUtils.isNotEmpty(docTypeName) && (docTypeName.equals(ru.garant.shared.GCI.I18N.Messages.Factory.messages().get("uvsquery.type.not.specified")) == false)){¤				contextMap.put("initialDocumentType", docTypeName);¤				String docTypeId = getAutoCompleteProvider().getFirstSuggestedValue("listrequest.action.documentTypeId");¤				if(StringUtils.isNotEmpty(docTypeId)){¤					contextMap.put("initialDocumentTypeId", docTypeId);¤				}else{¤					DocTypeDAO docType = DpoUvsHelper.getDocTypeByName(docTypeName, getSpaceKey());¤					if(docType != null){¤						contextMap.put("initialDocumentTypeId", docType.getId());¤					}¤				}¤			}¤			String docIssuer = null;¤			if(getParentPageId() == 0 || (getAddDocumentIndication() == DpoUvsHelper.ADD_UO_CURRENT_DOCUMENT_UVS && getAddRequestFromWhere() == DpoUvsHelper.getFromDoccard() && getShowSavedFields() == false)){¤				docIssuer = getAutoCompleteProvider().getFirstSuggestedValue("listrequest.action.docIssuer");¤				if(StringUtils.isNotEmpty(docIssuer)){¤					contextMap.put("initialDocIssuer", docIssuer);¤				}	¤			}else{¤				docIssuer = String.valueOf(getParentPageId());¤				contextMap.put("initialDocIssuer", docIssuer);¤			}¤			if(StringUtils.isNotEmpty(docIssuer)){¤				contextMap.put("initialTitle", new GlobalHelper().escapeHtml(DpoUvsHelper.getTitleFromId(docIssuer)));¤			}¤			String docDateString = getAutoCompleteProvider().getFirstSuggestedValue("listrequest.action.documentDate");¤			if(StringUtils.isNotEmpty(docDateString)){¤				contextMap.put("docDate", docDateString);¤			}	¤			if(getAddDocumentIndication() == DpoUvsHelper.ADD_UO_CURRENT_DOCUMENT_UVS){¤				contextMap.put("showInstancy", false);¤			}else{¤				contextMap.put("showInstancy", true);¤			}¤			contextMap.put("disableInstancy", true);¤			contextMap.put("showAutoComplete", true);¤			¤			String depository = getAutoCompleteProvider().getFirstSuggestedValue("listrequest.action.depository");¤			if(StringUtils.isNotEmpty(depository) && getAddDocumentIndication() == DpoUvsHelper.ADD_UO_CURRENT_DOCUMENT_UVS){¤				contextMap.put("initialDepository", depository);¤			}¤			¤			String copyType = getAutoCompleteProvider().getFirstSuggestedValue("listrequest.action.copyType");¤			if(StringUtils.isNotEmpty(copyType)){¤				contextMap.put("initialCopyType", copyType);¤			}else{¤				contextMap.put("initialCopyType", new ECopyDAO().getType());¤			}¤			String srcTitle = getAutoCompleteProvider().getFirstSuggestedValue("listrequest.action.srcTitle");¤			if(StringUtils.isNotEmpty(srcTitle)){¤				contextMap.put("initialGarDocSourceTitle", new GlobalHelper().escapeHtml(srcTitle));¤			}¤			String srcNumber = getAutoCompleteProvider().getFirstSuggestedValue("listrequest.action.srcNumber");¤			if(StringUtils.isNotEmpty(srcNumber)){¤				contextMap.put("initialSrcNumber", srcNumber);¤			}¤			String srcStartDate = getAutoCompleteProvider().getFirstSuggestedValue("listrequest.action.srcStartDate");¤			if(StringUtils.isNotEmpty(srcStartDate)){¤				contextMap.put("initialSrcStartDate", srcStartDate);¤			}¤			String srcEndDate = getAutoCompleteProvider().getFirstSuggestedValue("listrequest.action.srcEndDate");¤			if(StringUtils.isNotEmpty(srcEndDate)){¤				contextMap.put("initialSrcEndDate", srcEndDate);¤			}¤¤			¤		}else{//ADD_DOCUMENT_UO, ADD_REGION_PARTNER_DOCUMENT_UO¤			contextMap.put("showInstancy", true);¤			contextMap.put("disableInstancy", false);¤			contextMap.put("showAutoComplete", false);¤		}¤		contextMap.put("parentPageId", getParentPageId());¤		return contextMap;¤	}¤		¤	private String renderTooltip() {¤		return VelocityUtils.getRenderedTemplate(TOOLTIP_TEMPLATE_PATH,	getContextParams());¤	}¤	¤	private String getParseDate(String date){¤		if(date.equals(Messages.Factory.messages().get("no.data"))){¤			date = "";¤		}¤		return date;¤	}¤¤	private String responseContent = null;¤¤	public String getResponseContent() {¤		return this.responseContent;¤	}¤¤	private String spaceKey_;¤	¤	public String getSpaceKey() {¤		return spaceKey_;¤	}¤	¤	public void setSpaceKey(String spaceKey) {¤		spaceKey_ = spaceKey;¤	}¤¤	private long parentPageId_;¤	¤	public long getParentPageId() {¤		return parentPageId_;¤	}¤	¤	public void setParentPageId(long parentPageId) {¤		parentPageId_ = parentPageId;¤	}¤¤	private long selectedId_;¤	¤	public long getSelectedId() {¤		return selectedId_;¤	}¤	¤	public void setSelectedId(long selectedId) {¤		selectedId_ = selectedId;¤	}¤	¤	private long queryIdForm_ = 0;¤	public long getQueryIdForm () {¤		return queryIdForm_;¤	}¤	¤	public void setQueryIdForm (long queryIdForm) {¤		queryIdForm_ = queryIdForm;¤	}¤	¤¤	public String getResponse() {¤		String ret = "";¤		String a = getErrorHTMLString();¤		if (getHasError()) {¤			ret += "<has-error code=\"" + getErrorCode() + "\"><![CDATA[";¤				if (isHTMLResponse_) {¤					ret += "<span class=\"errorMessage\">";¤					if (a != null)¤						ret += a;¤					ret += "</span>";¤				} else {¤					if (a != null)¤						ret += a.replaceAll("<.+>", "");¤				}¤		¤			ret += "]]></has-error>";¤		}else if (a != null) {¤			ret += a;¤		}¤		return ret;¤	}¤¤	private boolean isHTMLResponse_ = true;¤	private String errorMessage_ = null;¤¤	protected String getErrorMessage() {¤		return errorMessage_;¤	}¤¤	public void clearErrorMessage() {¤		errorMessage_ = null;¤	}¤		¤	public void setErrorMessage(String errorMessage) {¤		if(errorMessage_ == null){¤			errorMessage_ = errorMessage;¤		}else{¤			errorMessage_ += "<br>" + errorMessage;¤		}¤	}¤¤	private int succesfulErrorCode_ = 0;¤¤	public int getSuccesfulErrorCode() {¤		return succesfulErrorCode_;¤	}¤¤	public void setSuccesfulErrorCode(int succesfulErrorCode) {¤		succesfulErrorCode_ = succesfulErrorCode;¤	}¤¤	private int errorCode_ = 0;¤¤	protected int getErrorCode() {¤		return errorCode_;¤	}¤¤	public void setErrorCode(int code) {¤		errorCode_ = code;¤	}¤	¤	private int exceptionCode_ = 0;¤	¤	public void setExceptionCode(int code) {¤		exceptionCode_ = code;¤	}¤	¤	public long getExceptionCode() {¤		return exceptionCode_;¤	}¤	¤¤	public boolean getHasError() {¤		return (errorCode_ != 0);¤	}¤¤	public String getErrorHTMLString() {¤		return errorMessage_;¤	}¤	¤	public boolean isReturnInWork(){¤		if(getAddDocumentIndication() == DpoUvsHelper.DOCCARD_IS_RETURN_IN_WORK){¤			return true;¤		}¤		return false;¤	}¤	¤	private int addDocumentIndication_;¤	¤	public int getAddDocumentIndication(){¤		return addDocumentIndication_;¤	}¤	¤	public void setAddDocumentIndication(int addDocumentIndication){¤		addDocumentIndication_ = addDocumentIndication;¤	}¤	¤	private int addRequestFromWhere_;¤	¤	public int getAddRequestFromWhere(){¤		return addRequestFromWhere_;¤	}¤	¤	public void setAddRequestFromWhere(int addRequestFromWhere){¤		addRequestFromWhere_ = addRequestFromWhere;¤	}¤/*¤	private long createFromDoccardId_;¤¤	public long getCreateFromDoccardId(){¤		return createFromDoccardId_;¤	}¤	¤	public void setCreateFromDoccardId(long createFromDoccardId){¤		createFromDoccardId_ = createFromDoccardId;¤	}¤*/¤	/*¤	public static final int ADD_DOCUMENT_UO = 0;//rt_uo_query с ПУ¤	public static final int ADD_CURRENT_DOCUMENT_UVS = 1;//rt_current_doc с ПУ и со страницы¤	public static final int ADD_UO_CURRENT_DOCUMENT_UVS = 2;//potrehaeva со страницы¤//	public static final int ADD_UO_CURRENT_DOCUMENT_UVS_FROM_DASHBOARD = 3;//potrehaeva с ПУ¤	public static final int ADD_REGION_PARTNER_DOCUMENT_UO = 4;	//региональные партнеры с ПУ¤	public static final int ADD_AUTO_MAILING_PROCESSING = 5;	//работа с почтой¤	public static final int DOCCARD_IS_RETURN_IN_WORK = 6;	//вернуть в работу¤	public static final int ADD_AUTO_MAILING_PROCESSING_UVS = 7;	//работа с почтой¤	¤	public static final int FROM_DASHBOARD = 0;¤	public static final int FROM_LIST = 1;¤	public static final int FROM_ISSUER = 2;¤	public static final int FROM_DOCCARD = 3;¤	*/¤	private List<String> numbers_ = new ArrayList<String>();	¤	public List<String> getNumbers() {¤		return numbers_;¤	}¤	¤	final static List<String> EMPTY_NUMBERS = Arrays.asList(¤		"Б/Н", "Б\\Н", "ББН", "БН", "Б-Н"¤	);¤	¤	public void setNumbers (List<String> numbers) {¤		if(numbers != null && numbers.size() > 0){¤			List<String> trimNumbers = new ArrayList<String>();¤			for(String number : numbers){¤				String s = number.trim();¤				boolean isEmptyNumber = false; ¤				for (String bn : EMPTY_NUMBERS) {¤					if (s.toUpperCase().startsWith(bn)) {¤						isEmptyNumber = true;¤						break;¤					}¤				}¤				String trimNumber = (isEmptyNumber) ? "б/н": DpoUvsHelper.replaceLatSymbByRus(number.trim());¤				¤				trimNumbers.add((trimNumber.length() > 254)?trimNumber.substring(0, 254):trimNumber);¤			}¤			numbers_ = trimNumbers;¤		}else{¤			numbers_ = numbers;¤		}¤	}¤	¤	private long docCardId_;¤	public void setDocCardId(long docCardId){¤		docCardId_ = docCardId;¤	}¤	¤	public long getDocCardId(){¤		return docCardId_;¤	}¤¤	private List<Long> docIssuers_ = new ArrayList<Long>();	¤	public List<Long> getDocIssuers() {¤		return docIssuers_;¤	}¤	¤	public void setDocIssuers (List<String> docIssuers) {¤		//ses: XWORK - docIssuers оказывается массив строк¤		docIssuers_.clear();¤		for (String i : docIssuers) {¤			if(StringUtils.isNotEmpty(i) && StringUtils.isNumeric(i)){¤				docIssuers_.add(Long.valueOf(i));¤			}	¤		}¤	}¤¤	public void setDocIssuersLong (List<Long> docIssuers) {¤		//ses: XWORK - docIssuers оказывается массив строк¤		docIssuers_.clear();¤		docIssuers_.addAll(docIssuers);¤	}¤	¤	public List<Long> getAdditionalIssuers () {¤		if (getDocIssuers().size() > 1) {¤			return getDocIssuers().subList(1, getDocIssuers().size());¤		}¤		return new ArrayList<Long> ();¤	}¤	¤	public List<String> getAdditionalNumbers () {¤		if (getNumbers().size() > 1) {¤			return getNumbers().subList(1, getNumbers().size());¤		}¤		return new ArrayList<String> ();¤	}¤	¤	private String site_ = null;¤	public String getSite() {¤		return site_;¤	}¤¤	public static List<String> getSitesForAutoCompleteCopyDate(){¤		return SRC_TO_AUTOCOMPLETE;¤	}¤	¤	final static List<String> SRC_TO_AUTOCOMPLETE = Collections.synchronizedList(Arrays.asList("pravo.gov.ru", "eurasiancommission.org"));¤	public void setSite(String site) {¤		site_ = site.trim();¤	}¤	¤	public void addPublishDate () {¤		if(StringUtils.isNotEmpty(site_)){¤			for (String s : SRC_TO_AUTOCOMPLETE) {¤				¤				if (site_.contains(s)) {¤					try {¤						List gdstList = ru.garant.shared.ConfluenceCore.Helpers.ContainerManager.Factory.get().getSession()¤								.createQuery("select gdst from GarDocSourceTitles gdst where gdst.name like '%" + s + "%'")¤								.list()¤								;¤						if (CollectionUtils.isNotEmpty(gdstList) ) {¤							setSrcTitle (((GarDocSourceTitles)gdstList.get(0)).getName());¤							String resDate = changeSrcDatesIfDepositoryHasDates(getDepository());¤							if(StringUtils.isNotEmpty(resDate)){¤								setSrcStartDate (resDate);¤								setSrcEndDate (resDate);¤							}else{¤								setSrcStartDate (new SimpleDateFormat("dd.MM.yyyy").format(new Date()));¤								setSrcEndDate (new SimpleDateFormat("dd.MM.yyyy").format(new Date()));¤							}¤	¤						}¤					} catch (HibernateException e) {¤						Logs.LOG_SEX(e);¤					}¤				}¤				¤			}		¤		}¤	}¤	¤	public String changeSrcDatesIfDepositoryHasDates(String depository){¤		if(StringUtils.isNotEmpty(depository)){¤			Pattern p = Pattern.compile(".*\\\\([\\d]{2})_([\\d]{2})\\\\.*");¤			Matcher m = p.matcher(depository);¤			if(m.find() & m.groupCount() == 2){¤				String month = m.group(1);¤				String day = m.group(2);¤				Calendar cal = Calendar.getInstance();¤				return day + "." + month + "." + cal.get(Calendar.YEAR);¤			}¤		}¤		return null;¤	}¤	¤	private String depository_ = null;¤	public String getDepository() {¤		return depository_;¤	}¤¤	public void setDepository(String depository) {¤		depository_ = depository;¤	}¤	¤	private List<String> localFiles_ = new ArrayList<String>();¤	¤	public List<String> getLocalFiles() {¤		return localFiles_;¤	}¤	¤	public void setLocalFiles(final List<String> localFiles) {¤		localFiles_ = localFiles;¤	}¤¤	static public class ImageFile {¤		public String fileName;¤		public String fileComment;¤		public InputStream input;¤		¤		public void setFileName(String fn){¤			fileName = fn;¤		}¤¤		public void setInput(InputStream i){¤			input = i;¤		}¤		¤		public void setFileComment(String fn){¤			fileComment = fn;¤		}¤	}¤	¤	private List<ImageFile> images_ = null;¤	public void setImages(List<ImageFile> images) {¤		images_ = images;¤	}¤	¤	public List<ImageFile> getImages() {¤		return images_;¤	}	¤¤	private boolean isProject_ = false;¤	public boolean getIsProject() {¤		return isProject_;¤	}¤¤	public void setIsProject() {¤		if(StringUtils.isNotEmpty(getTypeDocument())){¤			if(StringUtils.isNumeric(getTypeDocument())){¤				int typeId = Integer.parseInt(getTypeDocument());¤				String docTypeName = DocCardManager.Factory.get().getDocTypeDAONameById(typeId);¤				if(docTypeName != null && docTypeName.contains(ru.garant.shared.GCI.I18N.Messages.Factory.messages().get("createuvsquery.substring.project"))){¤					isProject_ = true;¤				}else{¤					isProject_ = false;¤				}¤			}else if(getTypeDocument().contains(ru.garant.shared.GCI.I18N.Messages.Factory.messages().get("createuvsquery.substring.project"))){¤				isProject_ = true;¤			}¤		}¤	}¤¤	private String srcTitle_ = null;¤	public String getSrcTitle() {¤		return srcTitle_;¤	}¤¤	public void setSrcTitle(String srcTitle) {¤		srcTitle_ = (StringUtils.isNotBlank(srcTitle)) ? srcTitle.trim(): null;¤	}¤¤	private String srcNumber_ = null;¤	public String getSrcNumber() {¤		return srcNumber_;¤	}¤¤	public void setSrcNumber(String srcNumber) {¤		srcNumber_ = srcNumber;¤	}¤¤	private String srcStartDate_ = null;¤	public String getSrcStartDate() {¤		return srcStartDate_;¤	}¤¤	public void setSrcStartDate(String srcStartDate) {¤		srcStartDate_ = srcStartDate;¤	}¤¤	private String srcEndDate_ = null;¤	public String getSrcEndDate() {¤		return srcEndDate_;¤	}¤¤	public void setSrcEndDate(String srcEndDate) {¤		srcEndDate_ = srcEndDate;¤	}¤¤	private String srcPageNumber_ = null;¤	public String getSrcPageNumber() {¤		return srcPageNumber_;¤	}¤¤	public void setSrcPageNumber(String srcPageNumber) {¤		srcPageNumber_ = srcPageNumber;¤	}¤¤	private GarDocSourceTitles src_;¤	public void setSrc(GarDocSourceTitles src){¤		src_ = src;¤	}¤	¤	public GarDocSourceTitles getSrc(){¤		return src_;¤	}¤¤¤	private String internet_;¤	public String getInternet () {¤		return internet_;¤	}¤¤	public void setInternet (final String internet) {¤		internet_ = internet;¤	}¤¤	private boolean sendInRejected_;¤	public boolean getSendInRejected () {¤		return sendInRejected_;¤	}¤¤	public void setSendInRejected (final boolean sendInRejected) {¤		sendInRejected_ = sendInRejected;¤	}¤/*¤	private InstancyTypes instancy_;¤	¤	public InstancyTypes getInstancy(){¤		return instancy_;¤	}¤	public void setInstancy(final String instancy) {¤		if(StringUtils.isNotEmpty(instancy)){¤			instancy_ = DpoUvsHelper.convertStringToInstancyType(instancy);¤		}¤	}¤*/¤	private String instancy_;¤	¤	public String getInstancy(){¤		return instancy_;¤	}¤¤	public void setInstancy(final String instancy) {¤			instancy_ = instancy;¤	}¤	¤	private Date includeInVersionDate_;¤	¤	public Date getIncludeInVersionDate(){¤		return includeInVersionDate_;¤	}¤¤	public void setIncludeInVersionDate(final Date includeInVersionDate) {¤		includeInVersionDate_ = includeInVersionDate;¤	}¤¤	private java.util.List<String> blocksDAO_;¤	public void setBlocks(final java.util.List<String> blocks) {¤		blocksDAO_ = blocks;¤	}¤¤	public java.util.List<String> getBlocks() {¤		return blocksDAO_;¤	}¤¤	private String isConnected_ = null;¤	public String getIsConnected() {¤		return isConnected_;¤	}¤¤	public void setIsConnected(String isConnected) {¤		isConnected_ = isConnected;¤	}¤¤	public String onSuccessfullyCreationResponseForUVSQueryAndReturn (long newUVSQueryId) throws UnsupportedQueryDataException {¤		DocCard dc = UVSQuery.Factory.get(newUVSQueryId).getDocCard();¤		String url = GlobalHelper.getBaseUrl();		¤		RequestSearchQueryData queryData = RequestSearchQueryData.Factory.make();¤		List<String> spaces = new ArrayList<String>();¤		spaces.add(dc.getPage().getSpaceKey());¤		queryData.setSpaces(spaces);¤		queryData.setIgnorePermissions(true);¤		queryData.setSearchInPage(true);¤		queryData.addExecutor(AuthenticatedUserThreadLocal.getUsername());¤		queryData.setRequestSearchQueryType(RequestSearchQueryType.NEW_IN_ASSIGNED);¤		queryData.addLabelGroup(LogicOperation.OR, LabelGroup.Factory.get(LabelGroupName.LIFE_CYCLE_STATE_TRANSFER_TO_UO.toString()));¤		queryData.setRequestSearchQueryResultType(RequestSearchQueryResultType.UVSQUERY);¤		queryData.setSortingConditions(new ArrayList<SortingCondition>());¤		queryData.addSortingCondition(SortingCondition.Factory.make(SortingType.LAST_MODIFICATION_DATE, false));¤		SearchQuery searchQuery = SearchQuery.Factory.make(queryData, 10);¤		¤		findedGarDocs_ = Arrays.asList(Long.valueOf(dc.getPage().getId()));¤		findedRequestId_ = newUVSQueryId;¤		setSuccesfulErrorCode(SUCCESFUL_ERROR_CODE_CREATE_FIRST_DOCCARD);¤		¤		setErrorMessage(CREATED_QUERY_TAG + url + "/ru/garant/MDProcess/ConfluenceMDChange/ReportSupport/ReportXPlugin/ReportXPackage/listrequest.action?queryId=" + searchQuery.getId()+ "&amp;positionTo=" + newUVSQueryId + toClose(CREATED_QUERY_TAG));¤		if(getRemoteUser() == null){¤			return SUCCESS;¤		}¤		if(getAddDocumentIndication() != DpoUvsHelper.ADD_AUTO_MAILING_PROCESSING && getAddDocumentIndication() != DpoUvsHelper.ADD_AUTO_MAILING_PROCESSING_UVS){¤			AutoCompleteProvider autoComplete = getAutoCompleteProvider();¤			//if (false == DPOUVSManager.Factory.get(getSpaceKey()).isInGardocUoDocPosters(getRemoteUser().getName())) {¤			autoComplete.pushSuggestedValue(LISTREQUESTACTION + ".documentDate", (dc.getCreationDate() == null)? "":DateUtils.formatDdMMyyyDate(dc.getCreationDate()));¤			autoComplete.pushSuggestedValue(LISTREQUESTACTION + ".docIssuer", String.valueOf(dc.getDocIssuer()));¤			autoComplete.pushSuggestedValue(LISTREQUESTACTION + ".documentType", dc.getType());¤			autoComplete.pushSuggestedValue(LISTREQUESTACTION + ".documentTypeId", String.valueOf(dc.getTypeId()));¤			autoComplete.pushSuggestedValue(LISTREQUESTACTION + ".copyType", getCopyType());¤			if(getDepository() != null && StringUtils.isNotEmpty(getDepository())){¤				autoComplete.pushSuggestedValue(LISTREQUESTACTION + ".depository", getDepository());¤			}¤			if(getSrcTitle() != null && StringUtils.isNotEmpty(getSrcTitle())) {¤				autoComplete.pushSuggestedValue(LISTREQUESTACTION + ".srcTitle", getSrcTitle());¤			}else{¤				autoComplete.pushSuggestedValue(LISTREQUESTACTION + ".srcTitle", "");¤			}¤			if(getSrcNumber() != null && StringUtils.isNotEmpty(getSrcNumber())) {¤				autoComplete.pushSuggestedValue(LISTREQUESTACTION + ".srcNumber", getSrcNumber());¤			}else{¤				autoComplete.pushSuggestedValue(LISTREQUESTACTION + ".srcNumber", "");¤			}¤			if(getSrcStartDate() != null) {¤				autoComplete.pushSuggestedValue(LISTREQUESTACTION + ".srcStartDate", getSrcStartDate());¤			}else{¤				autoComplete.pushSuggestedValue(LISTREQUESTACTION + ".srcStartDate", "");¤			}¤			if(getSrcEndDate() != null) {¤				autoComplete.pushSuggestedValue(LISTREQUESTACTION + ".srcEndDate", getSrcEndDate());¤			}else{¤				autoComplete.pushSuggestedValue(LISTREQUESTACTION + ".srcEndDate", "");¤			}¤			if(getSrcPageNumber() != null && StringUtils.isNotEmpty(getSrcPageNumber())) {¤				autoComplete.pushSuggestedValue(LISTREQUESTACTION + ".srcPage", getSrcPageNumber());¤			}else{¤				autoComplete.pushSuggestedValue(LISTREQUESTACTION + ".srcPage", "");¤			}¤			autoComplete.store();¤		}¤		//ses: возможно понадобится вместо текущего поведения¤		/*SearchQuery sq = SearchQuery.Factory.loadSearchQuery(getQueryIdForm());¤		if (sq != null) {¤			try {¤				SearchQuery sqNew = SearchQuery.Factory.make(sq.getQueryData(), sq.getPaginationSupport().getPageSize());¤				setErrorMessage(¤					CREATED_QUERY_TAG"¤					+ url + "/ru/garant/MDProcess/ConfluenceMDChange/ReportSupport/ReportXPlugin/ReportXPackage/listrequest.action?queryId=" + sqNew.getId()¤					+ "&amp;positionTo=" + uvsQuery.getPage().getId() + ¤					"</createdquery>"¤				);¤			} catch (UnsupportedQueryDataException e) {¤				Logs.LOG_SEX(e);¤				throw new IllegalStateException (e);¤			}¤		} else {¤			Logs.LOG_W("CreateUVSQuery: query with id " + getQueryIdForm() + "exparied in cache, redirect to page");¤			setErrorMessage(CREATED_QUERY_TAG" + url + "/pages/viewpage.action?pageId=" + uvsQuery.getPage().getId() + "</createdquery>");				¤		}*/¤		return SUCCESS;¤	}¤	¤	public final static String ERROR_SAVE_ATTACH_QUERY_TAG = "<errorsaveattach>"; ¤	public final static String CREATED_QUERY_TAG = "<createdquery>"; ¤	public final static String EXISTING_QUERY_TAG = "<existingquery>";¤	public final static String QUESTION_TAG = "<question>";¤	¤	public String toClose (String openTag) {¤		return "</" + openTag.substring(1);¤	}¤	¤	private String onSuccessfullyCreationResponseForUOQueryAndReturn (UVSQuery uvs) {¤		String url = GlobalHelper.getBaseUrl();¤		¤		findedGarDocs_= Arrays.asList(Long.valueOf(uvs.getDocCard().getPage().getId()));¤		findedRequestId_ = uvs.getPage().getId();¤		setSuccesfulErrorCode(SUCCESFUL_ERROR_CODE_CREATE_FIRST_DOCCARD);¤		¤		¤		setErrorMessage(CREATED_QUERY_TAG + url + "/pages/viewpage.action?pageId=" + uvs.getPage().getId() + toClose(CREATED_QUERY_TAG));¤		return SUCCESS;¤	}¤	¤	public String onCreationNotAllowedResponseAndReturn (long gardocid) {¤		findedGarDocs_ = Arrays.asList(Long.valueOf(gardocid));¤		setSuccesfulErrorCode(SUCCESFUL_ERROR_CODE_EXISTING);¤		¤		setErrorMessage(EXISTING_QUERY_TAG + GlobalHelper.getBaseUrl() + "/pages/viewpage.action?pageId=" + gardocid + toClose(EXISTING_QUERY_TAG));¤		return SUCCESS;¤	}¤¤	public String onAskForLinkResponseAndReturn (Collection tryToLinkTo)  throws CanNotStore{¤		long time = new Date().getTime();¤		Logs.LOG_W("CreateUvsQuery::onAskForLinkResponseAndReturn::start");¤		setSuccesfulErrorCode(SUCCESFUL_ERROR_CODE_QUESTION);¤		¤		if(getAddDocumentIndication() == DpoUvsHelper.ADD_AUTO_MAILING_PROCESSING && tryToLinkTo.size() == 1){¤			GarDocDAO garDoc = (GarDocDAO)tryToLinkTo.iterator().next();¤			setSelectedId(garDoc.getId());¤			if (DpoUvsHelper.isProject(garDoc.getPage())) {¤				return doCreateUvsQueryWithoutDocCard();¤			}¤			if (!garDoc.getPage().getLabels().contains(ContainerManager.Factory.get().getLabelManager().getLabel("done"))) {¤				return doCreateUvsQueryWithoutDocCard();¤			}¤			return onCreationNotAllowedResponseAndReturn (garDoc.getId());¤			¤		}else{¤			String docTypeName = (StringUtils.isEmpty(getTypeDocument()))? "": DocCardManager.Factory.get().getDocTypeDAONameById(Integer.parseInt(getTypeDocument()));¤			String numbers = "";¤			if(getNumbers().size() > 0){¤				numbers = DpoUvsHelper.listToStringWithSlashes((List)getNumbers());¤			}¤			if(StringUtils.isNotEmpty(getRegistrationNumber())){¤				if(StringUtils.isNotEmpty(numbers)){¤					numbers += "/";¤				}¤				numbers += getRegistrationNumber();¤			}¤			String dates = "";¤			if(getCreationDate() != null){¤				dates = new SimpleDateFormat("dd.MM.yyyy").format(getCreationDate());¤			}¤			¤			if(getRegistrationDate() != null){¤				if(StringUtils.isNotEmpty(dates)){¤					dates += "/";¤				}¤				dates += new SimpleDateFormat("dd.MM.yyyy").format(getRegistrationDate());¤			}¤			String issuers = "";¤			for(Long issuerId : getDocIssuers()){¤				if(StringUtils.isNotEmpty(issuers)){¤					issuers += "/"; ¤				}		¤				issuers += ContainerManager.Factory.get().getPageManager().getPage(issuerId).getTitle();¤			}¤			List<GarDocDAO> repeatsList = DocCardIndexManager.Factory.get().getFiveResultsInRepeats(docTypeName, issuers, numbers, dates, getSpaceKey());¤			for(GarDocDAO gardoc : (List<GarDocDAO>)tryToLinkTo){¤				repeatsList.remove(gardoc);¤			}¤			if(tryToLinkTo.size() == 0 && repeatsList.size() == 0){¤				doCreateUvsQueryWithoutDocCard ();¤				Logs.LOG_W("CreateUvsQuery::onAskForLinkResponseAndReturn::doCreateUvsQueryWithoutDocCard");¤			}else{¤			¤				String resp =  DocCardManager.Factory.get().renderSelectAdditionalSource((List<GarDocDAO>)tryToLinkTo, repeatsList);¤				boolean hassametitle = false;¤				String docCardTitle = DpoUvsHelper.makePageTitle(docTypeName, getMainIssuer(), getMainNumber(), getCreationDate(), getTitle());¤				for(GarDocDAO gardoc : (List<GarDocDAO>)tryToLinkTo){¤					if(gardoc.getPage().getTitle().equals(docCardTitle)){¤						hassametitle = true;¤					}¤				}	¤				setErrorMessage(QUESTION_TAG¤						+ Messages.Factory.messages().get("createuvsquery.question.find.doccard.notfind.query")¤						+ toClose(QUESTION_TAG) ¤						+ "<newwindow>" ¤						+ resp¤						+ "</newwindow>"¤						+ "<hassametitle>" ¤						+ String.valueOf(hassametitle)¤						+ "</hassametitle>"¤				);¤			}¤		}¤		Logs.LOG_W("CreateUvsQuery::onAskForLinkResponseAndReturn::time=" + (new Date().getTime()-time));¤		return SUCCESS;¤	}¤	¤	public String getRightCommentForAttachmentIfPathGetFromDepositry(Attachment a){¤		String comment;¤		if(DpoUvsHelper.isLocalPath(a.getComment(), getSpaceKey())){¤			comment = "Образ взят с локального диска";¤		} else {¤			comment = DpoUvsHelper.convertToClientPathToFileWithCopy(a.getComment(), (getAddDocumentIndication() == DpoUvsHelper.ADD_UO_CURRENT_DOCUMENT_UVS || getAddDocumentIndication() == DpoUvsHelper.ADD_UO_CURRENT_DOCUMENT_UVS && getAddRequestFromWhere() == DpoUvsHelper.FROM_DASHBOARD) + "", getSpaceKey());			¤		}¤		return comment;¤	}¤	¤	public String getUserName(){¤		return AuthenticatedUserThreadLocal.getUsername();¤	}¤	¤	public void saveAttachments (Page page) {¤		if (CollectionUtils.isNotEmpty(images_)) {¤			for (ImageFile is : images_) {¤				try {¤					Attachment a = new Attachment();¤					String type = FileTypeUtil.getContentType(is.fileName);¤					InputStream inStream = is.input;¤					a.setFileName(is.fileName);¤					if(StringUtils.isNotEmpty(is.fileComment)){¤						a.setComment(is.fileComment);¤					}¤					a.setContentType(type);¤					saveAttachment (page, a, is.fileName, inStream);¤				} catch (IOException ioe) {¤					setErrorMessage(ERROR_SAVE_ATTACH_QUERY_TAG + "Не можем вырезать или сохранить указанные страницы, возможно плохой файл!" + toClose(ERROR_SAVE_ATTACH_QUERY_TAG));¤					Logs.LOG_SEX(ioe);¤					throw new IllegalStateException (ioe);¤				} catch (Exception e) {¤					Logs.LOG_SEX(e);¤					throw new IllegalStateException (e);¤				}¤			}¤		}else if (localFiles_.size() > 0) {¤			//если локальных файлов больше одного, не известно из какого вырезать, по этому эти параметры зануляем и ничего вырезать не будем¤			if(localFiles_.size() > 1){¤				setImageStart(0l);¤				setImageEnd(0l);¤			}¤			for(String localFile : localFiles_){¤				File file = DpoUvsHelper.getFileForCreatedUvsQueryForm(getUserName(), localFile);¤				if(file != null){¤					try {¤						FileInputStream fio = new FileInputStream(file);¤						Attachment a = new Attachment();¤						String type = FileTypeUtil.getContentType(localFile);¤						InputStream inStream = fio;¤						a.setFileName(localFile);¤						a.setComment("Локальный файл");¤						a.setContentType(type);¤						saveAttachment (page, a, localFile, inStream);¤					} catch (IOException ioe) {¤						setErrorMessage(ERROR_SAVE_ATTACH_QUERY_TAG + "Не можем вырезать или сохранить указанные страницы, возможно плохой файл!" + toClose(ERROR_SAVE_ATTACH_QUERY_TAG));¤						Logs.LOG_SEX(ioe);¤						throw new IllegalStateException (ioe);¤					} catch (Exception e) {¤						Logs.LOG_SEX(e);¤						throw new IllegalStateException (e);¤					}¤				}¤			}¤		}else if (StringUtils.isNotEmpty(depository_)) {¤			String fileName = depository_;¤			List<Attachment> attaches = new ArrayList<Attachment> (); ¤			makeAttachmentsFor (getInitialImage(fileName), attaches);¤			¤			for (Attachment a : attaches) {¤				try {¤					String type = FileTypeUtil.getContentType(a.getFileName());¤					InputStream inStream = new FileInputStream(a.getComment());¤					¤					a.setComment(getRightCommentForAttachmentIfPathGetFromDepositry(a));¤					a.setContentType(type);¤					saveAttachment (page, a, fileName, inStream);¤					inStream.close();¤				} catch (IOException ioe) {¤					setErrorMessage(ERROR_SAVE_ATTACH_QUERY_TAG + "Не можем вырезать или сохранить указанные страницы, возможно плохой файл!" + toClose(ERROR_SAVE_ATTACH_QUERY_TAG));¤					Logs.LOG_SEX(ioe);¤					throw new IllegalStateException (ioe);¤				} catch (Exception e) {¤					Logs.LOG_SEX(e);¤					throw new IllegalStateException (e);¤				}¤			}¤		}¤		/*¤		if(getUploadedFiles().size() > 0){¤			try {¤				for(Attachment attach : getUploadedFiles()){¤					saveLocalFile(attach, page);¤				}¤				removeDraft("uvs_query");¤			} catch (IOException ioe) {¤				setErrorMessage(ERROR_SAVE_ATTACH_QUERY_TAG + "Не можем вырезать или сохранить указанные страницы, возможно плохой файл!" + toClose(ERROR_SAVE_ATTACH_QUERY_TAG));¤				Logs.LOG_SEX(ioe);¤				throw new IllegalStateException (ioe);¤			} catch (Exception e) {¤				Logs.LOG_SEX(e);¤				throw new IllegalStateException(e);¤			}¤			¤		}¤		if(getUploadedFileForCut() != null){¤			try {¤				saveLocalFile(getUploadedFileForCut(), page);¤				removeDraft("uvs_query_cut");¤			} catch (IOException ioe) {¤				setErrorMessage(ERROR_SAVE_ATTACH_QUERY_TAG + "Не можем вырезать или сохранить указанные страницы, возможно плохой файл!" + toClose(ERROR_SAVE_ATTACH_QUERY_TAG));¤				Logs.LOG_SEX(ioe);¤				throw new IllegalStateException (ioe);¤			} catch (Exception e) {¤				Logs.LOG_SEX(e);¤				throw new IllegalStateException(e);¤			}¤		}¤		*/¤	}¤	¤	public void saveLocalFile(Attachment attach, Page page) throws Exception{¤		Attachment a = new Attachment();¤		a.setContent(page);				¤		a.setComment("Локальный файл");¤		a.setContentType(attach.getContentType());¤		a.setFileName(attach.getFileName());¤		a.setFileSize(attach.getFileSize());¤		InputStream is = attach.getContentsAsStream();¤		saveAttachment(page, a, attach.getFileName(), is);¤	}¤	¤	public boolean hasImagesToAdd () {¤		return CollectionUtils.isNotEmpty(images_) || StringUtils.isNotEmpty(depository_)  || (localFiles_.size() > 0);¤	}¤	¤	public byte[] cutPDFAttachment(String fileName, InputStream inStream) throws IOException, DocumentException{¤		PdfReader pdfReader = new PdfReader(inStream);¤		ByteArrayOutputStream ret = new ByteArrayOutputStream ();¤		int imageStart = 1;¤		if (getImageStart() != 0) {¤			imageStart = getImageStart().intValue();¤		}¤		int imageFinish = pdfReader.getNumberOfPages();¤		if (getImageEnd() != 0 && getImageEnd() < imageFinish) {¤			imageFinish = getImageEnd().intValue();¤		}¤¤		int start = Integer.parseInt(getImageStart() + "");¤		Document document = new Document(pdfReader.getPageSize(start));¤		PdfWriter pdfWriter = PdfWriter.getInstance(document, ret);¤		document.open();¤		PdfContentByte cb = pdfWriter.getDirectContent();¤		float xz = 0;¤		float yz = 0;¤		for (int i = imageStart; i <= imageFinish; i++) {¤			if(pdfReader.getPageSize(i).getWidth() > xz){¤				xz = pdfReader.getPageSize(i).getWidth();¤			}¤			if(pdfReader.getPageSize(i).getHeight() > yz){¤				yz = pdfReader.getPageSize(i).getHeight();¤			}¤		}¤		¤		float x = xz - (xz%100);¤		float y = yz - (yz%100);¤¤		for (int i = imageStart; i <= imageFinish; i++) {¤			document.newPage();¤			PdfImportedPage pdfPage = pdfWriter.getImportedPage(pdfReader, i);¤			¤			if(pdfReader.getPageSize(i).getWidth() > pdfReader.getPageSize(i).getHeight()){¤	            float  Scale  = x/pdfReader.getPageSize(i).getWidth();¤	            cb.addTemplate(pdfPage, Scale, 0, 0, Scale, 18, 18);¤	        }else{¤	            float Scale = y/pdfReader.getPageSize(i).getHeight();¤	            cb.addTemplate(pdfPage, Scale, 0, 0, Scale, 18, 18);¤	        }¤		}¤		document.close();¤		¤		byte[] outputArray = ret.toByteArray();¤		return outputArray;¤	}¤¤	private void saveTiffAttachment(Page page, Attachment a, String fileName, InputStream inStream) throws IOException, DocumentException{¤		//извлечь multi-tif¤		InputStream isout = MultiTiffCreator.Factory.make().makeFromTiff(inStream, getImageStart().intValue(), getImageEnd().intValue());¤		byte[] content = IOUtils.toByteArray (isout);¤		//положить его в аттач¤		fileName = fileName.substring(fileName.lastIndexOf("\\") + 1, fileName.length()) + ".tif";¤		Attachment a1 = new Attachment(fileName, "image/tiff", content.length, a.getComment());¤		page.addAttachment(a1);			¤		a1.setContent(page);				¤		ContainerManager.Factory.get().getAttachmentManager().saveAttachment(¤			a1, null, new ByteArrayInputStream(content)¤		);¤		¤	}¤	¤	private void saveAttachment (Page page, Attachment a, String fileName, InputStream inStream) throws IOException, DocumentException {¤		String type = fileName.substring(fileName.lastIndexOf(".") + 1).toUpperCase();¤		if (¤			("TIFF".equals(type) || "TIF".equals(type))¤			&& (getImageStart() != 0 || getImageEnd() != 0)¤		) {¤			saveTiffAttachment(page, a, fileName, inStream);¤		} else if("PDF".equals(type) && (getImageStart() != null && getImageStart() > 0 || getImageEnd() != null && getImageEnd() > 0)){¤			byte[] outputArray = cutPDFAttachment(fileName, inStream);¤			Attachment a1 = new Attachment(a.getFileName(), "application/pdf", outputArray.length, a.getComment());¤			page.addAttachment(a1);			¤			a1.setContent(page);¤			ContainerManager.Factory.get().getAttachmentManager().saveAttachment(a1, null, new ByteArrayInputStream(outputArray));			¤		} else {¤				page.addAttachment(a);			¤				a.setContent(page);				¤				a.setFileSize(inStream.available());¤				¤				ContainerManager.Factory.get().getAttachmentManager().saveAttachment(¤					a, null, inStream¤				);			¤		}¤	}¤	¤	public File getInitialImage (String fileName) {¤		String realFilename = DpoUvsHelper.convertToServerPathToFileWithCopy(fileName, getSpaceKey());¤		File initialFile = new File(realFilename);¤		if(initialFile.exists() == false){¤			Logs.LOG_W("File not exist: " + realFilename);¤			return null;¤		}¤		return initialFile;¤	}¤	¤	private static String replacingSymbolsForRegex(String name){¤		return name.replace(")", "-").replace("(", "-");¤	}¤	¤	private static String getFileNameWithoutExtension(String filename){¤		return 	(filename.lastIndexOf(".") > 0)¤				? filename.substring(0, filename.lastIndexOf("."))¤				: filename;¤¤	}¤	¤	private static List<File> searchAppendixFor(File initialFile) {¤		List<File> ret = new ArrayList<File> ();¤		if (initialFile.isDirectory() == false) {¤			String initialFileName = getFileNameWithoutExtension(initialFile.getName());¤			for (File file : initialFile.getParentFile().listFiles()) {¤				if(false == initialFile.getPath().equals(file.getPath())){¤					String fileName = getFileNameWithoutExtension(file.getName());¤					String regex = "^" + initialFileName + "\\..*$|^" + initialFileName + "#w.*$|^" + initialFileName + "$";¤					Pattern p = Pattern.compile(replacingSymbolsForRegex(regex));¤					Matcher m = p.matcher(replacingSymbolsForRegex(fileName));¤					if(m.find()){¤						ret.add(file);¤					}¤				}¤			}¤		}¤		return ret;¤	}¤	¤	private static void collectAllFilesFor(List<File> files, List<Attachment> ret, List<String> fileNames) {¤		for (File file : files) {¤			if (file.isDirectory()) {¤				collectAllFilesFor(Arrays.asList(file.listFiles()), ret, fileNames);¤			} else {¤				Attachment a = new Attachment ();¤				String parentDirectoryFile = file.getPath().substring(0, (file.getPath().length() - file.getName().length()) - 1);¤				parentDirectoryFile = parentDirectoryFile.substring(parentDirectoryFile.lastIndexOf("\\") + 1);¤				if(fileNames.contains(file.getName())){¤					a.setFileName("[" + parentDirectoryFile + "]" + file.getName());¤				}else{¤					fileNames.add(file.getName());¤					a.setFileName(file.getName());¤				}¤				a.setComment(file.getPath());¤				ret.add(a);¤			}¤		}¤	}¤¤	public static void makeAttachmentsFor(File file, List<Attachment> ret) {¤		List<File> fileToAttach = new ArrayList<File> ();¤		fileToAttach.add(file);¤		fileToAttach.addAll(searchAppendixFor (file));¤		List<String> fileNames = new ArrayList<String>();¤		collectAllFilesFor (fileToAttach, ret, fileNames);¤		if (ret.size() == 1) {¤			ret.get(0).setFileName(ret.get(0).getFileName().substring(ret.get(0).getFileName().indexOf("]") + 1));¤		}¤	}¤	¤	private static final int VALIDATION_FAILED_DOCUMENT_TYPE = 1000;¤	private static final int VALIDATION_FAILED_DOCUMENT_NUMBER = 1010;¤	private static final int VALIDATION_FAILED_DOCUMENT_DATE = 1020;¤	private static final int VALIDATION_FAILED_DOC_ISSUER = 1030;¤	private static final int VALIDATION_FAILED_IMAGE_NOT_FOUND = 1050;¤	private static final int VALIDATION_FAILED_IS_CONNECTED_NO_BLOCKS = 1060;¤	private static final int VALIDATION_FAILED_NO_TITLE = 1070;¤	private static final int VALIDATION_FAILED_RESTRICTED_STATUS = 1080;¤	private static final int CATCH_EXCEPTION = 1040;¤	¤	public static final int EXCEPTION_PAGE_ALREADY_EXISTS = 2001;¤¤	public static final int SUCCESFUL_ERROR_CODE_EXISTING  = 5000;¤	public static final int SUCCESFUL_ERROR_CODE_CREATE_FIRST_DOCCARD  = 5001;¤	public static final int SUCCESFUL_ERROR_CODE_CREATE_NEW_QUERY_FOR_EXISTING_DOCCARD  = 50011;¤	public static final int SUCCESFUL_ERROR_CODE_ATTACH_TO_EXISTING_QUERY_FOR_EXISTING_DOCCARD  = 50012;¤	public static final int SUCCESFUL_ERROR_CODE_QUESTION  = 5002;¤	public static final int SUCCESFUL_ERROR_CODE_QUESTION_FOR_MAILING  = 5003;¤	¤	public void orderIssuersByOGVExecutor () {¤		List<Long> ordered = new ArrayList<Long> ();¤		Long empty = null;¤		boolean hasResponsible = false;¤		for (Long id : getDocIssuers()) {¤			String spaceKey = getSpaceKey();¤			if(StringUtils.isEmpty(spaceKey)){¤				spaceKey = ContainerManager.Factory.get().getPageManager().getPage(id).getSpaceKey();¤			}	¤			String responsible = OGVLinksManager.Factory.get(spaceKey).getResponsibleByOgv(id, false, false);¤			if(StringUtils.isNotEmpty(responsible)){¤				hasResponsible = true;¤			}¤			if (empty == null && StringUtils.isEmpty(responsible)) {¤				empty = id;¤			} else {¤				ordered.add(id);¤			}¤		}¤		//значит ни у одного ОГВ нет назначенных, соответственно порядок менять не нужно¤		if(hasResponsible == false){¤			return;¤		}¤		¤		//у каких-то ОГВ есть назначенные, значит меняем порядок¤		if (empty != null) {¤			ordered.add(empty);¤		}¤		setDocIssuersLong(ordered);¤	}¤	¤¤	public String attachImageToExistingDocCardAndClose () {¤		DocCard dc = DocCard.Factory.get(getSelectedId());¤		UVSQuery uvs = null;¤		if (dc != null){¤			if(getAddDocumentIndication() == DpoUvsHelper.ADD_AUTO_MAILING_PROCESSING){¤				uvs = CreateActionResult.Factory.get().createNewUoCurrentDocAndAttachToDocCardAndClose(dc, getDocCardAttributies());¤			}else{¤				uvs = CreateActionResult.Factory.get().createNewCurrentDocAndAttachToDocCardAndClose(dc, getDocCardAttributies());¤			}¤			if(uvs != null){¤				saveAttachments (uvs.getPage());¤				findedGarDocs_ = Arrays.asList(Long.valueOf(getSelectedId()));¤				findedRequestId_ = uvs.getPage().getId();¤			}¤		}¤		return SUCCESS;¤	}¤¤	public String attachImageToExistingDocCardAndGotoManager () {¤		DocCard dc = DocCard.Factory.get(getSelectedId());¤		UVSQuery uvs = null;¤		if (dc != null){¤			if(getAddDocumentIndication() == DpoUvsHelper.ADD_AUTO_MAILING_PROCESSING){¤				uvs = CreateActionResult.Factory.get().createNewUoCurrentDocAndAttachToDocCardAndGotoManager(dc, getDocCardAttributies());¤			}else{¤				uvs = CreateActionResult.Factory.get().createNewCurrentDocAndAttachToDocCardAndGotoManager(dc, getDocCardAttributies());¤			}¤			if(uvs != null){¤				saveAttachments (uvs.getPage());¤				findedGarDocs_ = Arrays.asList(Long.valueOf(getSelectedId()));¤				findedRequestId_ = uvs.getPage().getId();¤			}¤		}¤		return SUCCESS;¤	}¤¤	public String createUoQueryAndRejected () throws CanNotStore{¤		UVSQuery uvs = CreateActionResult.Factory.get().createNewWhenUoQueryAndRejected(¤					getDocIssuers(), getTypeDocument(), getNumbers(), getCreationDate(), getTitle()¤					, getRegistrationNumber(), getRegistrationDate(), importance_, getUoComment(), getExternalAuthor()¤			);¤		String res = onSuccessfullyCreationResponseForUOQueryAndReturn(uvs);¤		findedRequestId_ = uvs.getPage().getId();¤		findedGarDocs_ = Arrays.asList(Long.valueOf(uvs.getDocCard().getPage().getId()));¤		return res;¤	}¤¤	public String createRegionQueryAndRejected () throws CanNotStore{¤		UVSQuery uvs = CreateActionResult.Factory.get().createNewWhenRegionQueryAndRejected(¤					getDocIssuers(), getTypeDocument(), getNumbers(), getCreationDate(), getTitle()¤					, getRegistrationNumber(), getRegistrationDate(), importance_, getUoComment(), getExternalAuthor()¤			);¤		String res = onSuccessfullyCreationResponseForUOQueryAndReturn(uvs);¤		findedRequestId_ = uvs.getPage().getId();¤		findedGarDocs_ = Arrays.asList(Long.valueOf(uvs.getDocCard().getPage().getId()));¤		return res;¤	}¤¤	public String createCurrentDocWithoutRepeats (){¤		try {¤			UVSQuery uvs = null;¤			if(getAddDocumentIndication() == DpoUvsHelper.ADD_AUTO_MAILING_PROCESSING){¤				uvs = CreateActionResult.Factory.get().createNewWhenUoCurrentDoc(getDocCardAttributies());¤			}else{¤				uvs = CreateActionResult.Factory.get().createNewWhenUvsCurrentDoc(getDocCardAttributies());¤			}¤			saveAttachments(uvs.getPage());¤			setSuccesfulErrorCode(SUCCESFUL_ERROR_CODE_CREATE_FIRST_DOCCARD);¤			findedRequestId_ = uvs.getPage().getId();¤			findedGarDocs_ = Arrays.asList(Long.valueOf(uvs.getDocCard().getPage().getId()));¤		} catch (Exception e) {¤			Logs.LOG_SEX(e);¤		}¤¤		return SUCCESS;											¤	}¤¤	List<Long> findedGarDocs_ = new ArrayList<Long>();¤	public List<Long> getFindedGarDocId () {¤		return findedGarDocs_;¤	}¤¤	long findedRequestId_ = 0;¤	public long getFindedRequestId () {¤		return findedRequestId_;¤	}¤	¤	public boolean getHasRepeat () {¤		return hasRepeat_;¤	}¤¤	public void setHasRepeat (final boolean hasRepeat) {¤		hasRepeat_ = hasRepeat;¤	}¤	private boolean hasRepeat_ = false;¤¤	public boolean getShowSavedFields () {¤		return showSavedFields_;¤	}¤¤	public void setShowSavedFields (final boolean showSavedFields) {¤		showSavedFields_ = showSavedFields;¤	}¤	private boolean showSavedFields_ = false;¤	¤	long inWorkQueryId_ = 0;¤	public long getInWorkQueryId () {¤		return inWorkQueryId_;¤	}¤	¤	public void setInWorkQueryId (long inWorkQueryId) {¤		inWorkQueryId_ = inWorkQueryId;¤	}¤	¤	public void addExceptionCode (Exception e) {¤		for (Throwable ex : Arrays.asList(e, e.getCause())) {¤			if (ex instanceof CanNotStore) {¤				CanNotStore cns = (CanNotStore)ex;¤				setExceptionCode(cns.getCreateCode());¤				setErrorMessage(cns.getMessage());¤			}¤		}¤	}¤	¤	¤//#UC END# *4C652CD603D7_CUSTOM_METHODS_AND_DATA*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"WikiPageID (wiki)"
		    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/CreateUvsQuery|4C652CD603D7
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (wiki)"
		    value      	"wiki")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"20609540541")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"DerivedImplement"
		    value      	"{}")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"DerivedOverload"
		    value      	"{}")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ImplementSelectType"
		    value      	"all")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"OverloadSelectType"
		    value      	"include"))
	    quid       	"4C652CD603D7"
	    documentation 	"создание запроса  в ДПО УВС"
	    stereotype 	"KActionPlugin"
	    superclasses 	(list inheritance_relationship_list
		(object Inheritance_Relationship
		    quid       	"4C6A352A01DF"
		    supplier   	"Logical View::external::JavaConfluence::ConfluenceClassPack::ConfluenceActionSupport"
		    quidu      	"465ADCCA036B"))
	    language   	"MDA Generator")
	(object Class "EditUvsQuery"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/DocCardChange/DocCardSupport/EditUvsQuery.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C6E6BA901D1_CUSTOM_IMPORT*"
		    value      	"//#UC START# *4C6E6BA901D1_CUSTOM_IMPORT*¤import ru.garant.shared.Core.Root.NoActiveFactory;¤¤import ru.garant.MDProcess.ConfluenceMDChange.RequestSearch.RequestSearchQueryData;¤import ru.garant.MDProcess.ConfluenceMDChange.RequestSearch.RequestSearchQueryType;¤import ru.garant.MDProcess.ConfluenceMDChange.RequestSearchSupportTypes.RequestSearchQueryResultType;¤import ru.garant.MDProcess.ConfluenceMDChange.RequestSupport.AbstractPageRequest;¤import ru.garant.MDProcess.ConfluenceMDChange.RequestSupport.AbstractRequestHelper;¤import ru.garant.MDProcess.ConfluenceMDChange.Requests.AbstractRequestLifeCycle.AbstractEvent;¤import ru.garant.MDProcess.ConfluenceMDChange.Requests.Observer;¤import ru.garant.MDProcess.ConfluenceMDChange.Requests.sm.AbstractRequestLifeCycle.AbstractState;¤import ru.garant.MDProcess.ConfluencePlugins.AutoCompleteValues.AutoCompleteProvider;¤import ru.garant.MDProcess.ConfluencePlugins.CommonVelocityContext.GlobalHelper;¤import ru.garant.MDProcess.ConfluencePlugins.LabelSupport.LabelGroup;¤import ru.garant.MDProcess.ConfluencePlugins.LabelSupport.LabelGroupName;¤import ru.garant.MDProcess.ConfluencePlugins.Search.LogicOperation;¤import ru.garant.MDProcess.ConfluencePlugins.Search.SearchQuery;¤import ru.garant.MDProcess.ConfluencePlugins.Search.UnsupportedQueryDataException;¤import ru.garant.MDProcess.DocCardChange.DocCardChangeDAO.GarDocDAO;¤import ru.garant.MDProcess.DocCardChange.DocCardChangeDAO.GarDocSourceTitles;¤import ru.garant.MDProcess.DocCardChange.DocCardCommon.DocCardManager;¤import ru.garant.MDProcess.DocCardChange.Entities.ConnectedStatus;¤import ru.garant.MDProcess.DocCardChange.Entities.InstancyTypes;¤import ru.garant.MDProcess.DocCardChange.Entities.UVSQuery;¤import ru.garant.MDProcess.DocCardChange.Entities.UVSQueryManager;¤import ru.garant.MDProcess.DocCardChange.Entities.UVSStateMachine;¤¤import ru.garant.shared.GCI.I18N.Messages;¤¤import java.util.Arrays;¤import java.util.Date;¤import java.util.List;¤¤¤import org.apache.commons.lang.StringUtils;¤//#UC END# *4C6E6BA901D1_CUSTOM_IMPORT*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C6E6BA901D1_CUSTOM_CLASS_DEFINITION*"
		    value      	"//#UC START# *4C6E6BA901D1_CUSTOM_CLASS_DEFINITION*¤//#UC END# *4C6E6BA901D1_CUSTOM_CLASS_DEFINITION*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C6E6BA901D1_ACTION_NAME*"
		    value      	(value Text 
|//#UC START# *4C6E6BA901D1_ACTION_NAME*¤		return new String (getClass ().getName ());¤		//#UC END# *4C6E6BA901D1_ACTION_NAME*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C6E6BA901D1_CUSTOM_METHODS_AND_DATA*"
		    value      	(value Text 
|//#UC START# *4C6E6BA901D1_CUSTOM_METHODS_AND_DATA*¤	private static final String FORM_NAME = "UVSQUERY";¤	¤	private static String TEMPLATE_PATH = "/DocCardChange/DocCardView/uvsquery-prop-include.vm";¤	¤	@Override¤	protected void changePriority() {¤		// TODO Auto-generated method stub¤		¤	}¤¤	@Override¤	protected String getAutoCompleteProviderForm() {¤		// TODO Auto-generated method stub¤		return FORM_NAME + getSpaceKey();¤	}¤¤	@Override¤	protected AbstractPageRequest getPageRequest() {¤		// TODO Auto-generated method stub¤		return new PageUvsQuery(getEntity());¤	}¤¤	@Override¤	protected AbstractRequestHelper getRequestHelper() {¤		// TODO Auto-generated method stub¤		return new DpoUvsHelper();¤	}¤¤	@Override¤	protected String getTemplatePath() {¤		// TODO Auto-generated method stub¤		return TEMPLATE_PATH;¤	}¤¤	@Override¤	protected UVSQuery getEntity() {¤		// TODO Auto-generated method stub¤		return (UVSQuery)super.getEntity();¤	}¤¤	private String copies_;¤	¤	protected String getCopies () {¤		return copies_;¤	}¤¤	public void setCopies (String copies) {¤		copies_ = copies;¤	}¤	¤	private String depository_ = null;¤	public String getDepository() {¤		return depository_;¤	}¤¤	public void setDepository(String depository) {¤		depository_ = depository;¤	}¤¤	private String site_ = null;¤	public String getSite() {¤		return site_;¤	}¤¤	public void setSite(String site) {¤		site_ = site;¤	}¤¤	¤	private String restrictedStatus_;¤	¤	protected String getRestrictedStatus () {¤		return restrictedStatus_;¤	}¤¤	public void setRestrictedStatus (String restrictedStatus) {¤		restrictedStatus_ = restrictedStatus;¤	}¤¤	private ConnectedStatus isConnected_ = null;¤	¤	protected ConnectedStatus getIsConnected () {¤		return isConnected_;¤	}¤¤	public void setIsConnected (ConnectedStatus isConnected) {¤		isConnected_ = isConnected;¤	}¤¤	private java.util.List<String> blocks_;¤	public void setBlocks (final java.util.List<String> blocks) {¤		blocks_ = blocks;¤	}¤¤	public java.util.List<String> getBlocks(){¤		return blocks_;¤	}¤¤	private String internet_ = null;¤	¤	protected String getInternet () {¤		return internet_;¤	}¤¤	public void setInternet (String internet) {¤			internet_ = internet;¤	}¤	¤	private InstancyTypes instancy_;¤	¤	protected InstancyTypes getInstancy () {¤		return instancy_;¤	}¤¤	public void setInstancy (String instancy) {¤		if(instancy == null){¤			instancy_ = null;¤		} else if(instancy.equals(InstancyTypes.IN_VERSION.name())){¤			instancy_ = InstancyTypes.IN_VERSION;¤		} else if(instancy.equals(InstancyTypes.ORDINARY.name())){¤			instancy_ = InstancyTypes.ORDINARY;¤		} else if(instancy.equals(InstancyTypes.QUICKLY.name())){¤			instancy_ = InstancyTypes.QUICKLY;¤		}else{¤			instancy_ = InstancyTypes.UNKNOWN;¤		}¤	}¤	¤	private Date includeInVersionDate_;¤	¤	public Date getIncludeInVersionDate(){¤		return includeInVersionDate_;¤	}¤¤	public void setIncludeInVersionDate(final Date includeInVersionDate) {¤		includeInVersionDate_ = includeInVersionDate;¤	}¤¤¤	private String garDocSourceTitle_ = null;¤	public String getGarDocSourceTitle() {¤		return garDocSourceTitle_;¤	}¤¤	public void setGarDocSourceTitle(String garDocSourceTitle) {¤		garDocSourceTitle_ = (StringUtils.isNotBlank(garDocSourceTitle)) ? garDocSourceTitle.trim(): "";¤	}¤¤	private String garDocSourceNumber_ = null;¤	public String getGarDocSourceNumber() {¤		return garDocSourceNumber_;¤	}¤¤	public void setGarDocSourceNumber(String garDocSourceNumber) {¤		garDocSourceNumber_ = garDocSourceNumber;¤	}¤¤	private String garDocSourceStartDate_ = null;¤	public String getGarDocSourceStartDate() {¤		return garDocSourceStartDate_;¤	}¤¤	public void setGarDocSourceStartDate(String garDocSourceStartDate) {¤		garDocSourceStartDate_ = garDocSourceStartDate;¤	}¤¤	private String garDocSourceEndDate_ = null;¤	public String getGarDocSourceEndDate() {¤		return garDocSourceEndDate_;¤	}¤¤	public void setGarDocSourceEndDate(String garDocSourceEndDate) {¤		garDocSourceEndDate_ = garDocSourceEndDate;¤	}¤¤	private String garDocSourcePage_ = null;¤	public String getGarDocSourcePage() {¤		return garDocSourcePage_;¤	}¤¤	public void setGarDocSourcePage(String garDocSourcePage) {¤		garDocSourcePage_ = garDocSourcePage;¤	}¤¤	private GarDocSourceTitles src_ = null;¤	public void setSrc(GarDocSourceTitles src){¤		src_ = src;¤	}¤	¤	public GarDocSourceTitles getSrc(){¤		return src_;¤	}¤¤	String rpComment_ = null;¤	public void setRpComment (final String rpComment) {¤		rpComment_ = rpComment.replace("\n", "").replace("\r", "");¤	}¤¤	public String getRpComment () {¤		return rpComment_;¤	}¤¤	boolean paperCopyNotification_ = false;¤	public void setPaperCopyNotification (final boolean paperCopyNotification) {¤		paperCopyNotification_ = paperCopyNotification;¤	}¤¤	public boolean getPaperCopyNotification () {¤		return paperCopyNotification_;¤	}¤	¤	String reqNumberInGarDoc_ = null;¤	public void setReqNumberInGarDoc (final String reqNumberInGarDoc) {¤		reqNumberInGarDoc_ = reqNumberInGarDoc.trim();¤	}¤¤	public String getReqNumberInGarDoc () {¤		return reqNumberInGarDoc_;¤	}¤¤	String reqAuthorFioInGarDoc_ = null;¤	public void setReqAuthorFioInGarDoc (final String reqAuthorFioInGarDoc) {¤		reqAuthorFioInGarDoc_ = reqAuthorFioInGarDoc.trim();¤	}¤¤	public String getReqAuthorFioInGarDoc () {¤		return reqAuthorFioInGarDoc_;¤	}¤¤	String reqAuthorEmailInGarDoc_ = null;¤	public void setReqAuthorEmailInGarDoc (final String reqAuthorEmailInGarDoc) {¤		reqAuthorEmailInGarDoc_ = reqAuthorEmailInGarDoc.trim();¤	}¤¤	public String getReqAuthorEmailInGarDoc () {¤		return reqAuthorEmailInGarDoc_;¤	}¤¤	String reqAuthorCommentInGarDoc_ = null;¤	public void setReqAuthorCommentInGarDoc (final String reqAuthorCommentInGarDoc) {¤		reqAuthorCommentInGarDoc_ = reqAuthorCommentInGarDoc.trim();¤	}¤¤	public String getReqAuthorCommentInGarDoc () {¤		return reqAuthorCommentInGarDoc_;¤	}¤¤	private long externalAuthorId_;¤	public void setExternalAuthorId (final long externalAuthorId) {¤		externalAuthorId_ = externalAuthorId;¤	}¤¤	public long getExternalAuthorId () {¤		return externalAuthorId_;¤	}¤¤/*	private void changeDocCardAttributes() throws Exception{¤		UVSQuery uvsquery = getEntity();¤		DocCard docCard = DocCard.Factory.get(uvsquery.getGardoc().getPage().getId());¤		if (getRestrictedStatus() != null && getRestrictedStatus().length() > 0) {¤			if (getRestrictedStatus().matches("[0-9]{0,2}")) {¤				docCard.setRestrictedStatus(Byte.parseByte(getRestrictedStatus()));¤			} else {¤				throw new IllegalStateException("setRestrictedStatus: unknown status id - " + getRestrictedStatus());¤			}¤		}¤		¤		if(getBlocks() != null){¤			java.util.List<BlockDAO> blocksDAO = DocCardManager.Factory.get().getBlocksFromNames(getBlocks());¤			docCard.setBlocks(blocksDAO);¤		}¤		if(StringUtils.isNotEmpty(getInternet())){¤			if(getInternet().equals("true")){¤				docCard.setInternet(true);¤			}else{¤				docCard.setInternet(false);¤			}¤		}¤		if(getInstancy() != null){¤			docCard.setInstancy(getInstancy());¤			getAutoCompleteProvider().pushSuggestedValue("viewpage.instancy", DpoUvsHelper.instancyTypesToByte(getInstancy ()) + "");¤		}¤		¤		if(StringUtils.isNotEmpty(getForemost ())){¤			boolean val = Boolean.parseBoolean(getForemost());¤			docCard.setForemost(val);¤		}¤		if (getEvent() != null){¤			if (getEvent().equals(UVSStateMachine.EV_CONNECT_TO_F1.getGuid())) {¤				ConnectedStatus oldVal = docCard.getIsConnected();¤				docCard.setIsConnected(ConnectedStatus.IS_CONNECTED);¤				if (!oldVal.name().equals(docCard.getIsConnected().name())) {¤					docCard.setTopic(DpoUvsHelper.getAssignTopicTo(docCard));¤//					docCard.setConnectToF1Date(new Date());¤				}¤			} else if (getEvent().equals(UVSStateMachine.EV_NO_CONNECT_TO_F1.getGuid())) {¤				ConnectedStatus oldVal = docCard.getIsConnected();¤				docCard.setIsConnected(ConnectedStatus.IS_NOT_CONNECTED);¤				docCard.setTopic(DpoUvsHelper.getAssignTopicTo(docCard));¤			}¤		}¤		docCard.commit();¤	}¤*/¤	¤	boolean hasDocCardChanges_ = false;¤	@Override¤	protected void doPreSave() throws Exception {¤		// TODO Auto-generated method stub¤		super.doPreSave();¤		UVSQuery uvsquery = getEntity();¤		AutoCompleteProvider autoComplete = getAutoCompleteProvider();¤		¤		if (getCopies() != null) {¤			uvsquery.setCopyType(getCopies());¤			uvsquery.setSourceWebSite(getSite());¤			uvsquery.setDepositoryEcopy(getDepository());¤		}¤		if (getRestrictedStatus() != null) {¤			uvsquery.setRestrictedStatus(getRestrictedStatus());¤			hasDocCardChanges_ |= true;¤		}¤		¤		if(getBlocks() != null){¤			uvsquery.setBlocks(getBlocks());¤			hasDocCardChanges_ |= true;¤		}¤		if(getInternet() != null){¤			uvsquery.setInternet(getInternet());¤			hasDocCardChanges_ |= true;¤		}¤		if(getInstancy() != null){¤			uvsquery.setInstancy(getInstancy());¤			autoComplete.pushSuggestedValue("viewpage.instancy", DpoUvsHelper.instancyTypesToByte(getInstancy ()) + "");¤			hasDocCardChanges_ |= true;¤		}¤		¤		if(getIncludeInVersionDate() != null){¤			uvsquery.setIncludeInVersionDate(getIncludeInVersionDate());¤		}¤		¤		if (getGarDocSourceTitle() != null) {¤			setSrc(StringUtils.isNotEmpty(getGarDocSourceTitle())?GarDocSourceTitles.getSrcTitle(getGarDocSourceTitle()):null);¤			uvsquery.setCopySrcTitle(getSrc());¤		}¤		¤		if(StringUtils.isEmpty(getGarDocSourceStartDate()) && uvsquery.getCopySrcStartDate() == null && StringUtils.isNotEmpty(getGarDocSourceEndDate())){¤			setGarDocSourceStartDate(getGarDocSourceEndDate());¤		}¤		if(StringUtils.isEmpty(getGarDocSourceEndDate()) && uvsquery.getCopySrcEndDate() == null && StringUtils.isNotEmpty(getGarDocSourceStartDate())){¤			setGarDocSourceEndDate(getGarDocSourceStartDate());¤		}¤		if(getGarDocSourceStartDate() != null){¤			uvsquery.setCopySrcStartDate(DpoUvsHelper.getSrcDate(getGarDocSourceStartDate()));¤		}¤		if(getGarDocSourceEndDate() != null){¤			uvsquery.setCopySrcEndDate(DpoUvsHelper.getSrcDate(getGarDocSourceEndDate()));¤		}	¤		if(getGarDocSourceNumber() != null){¤			uvsquery.setCopySrcNumber(getGarDocSourceNumber());¤		}	¤		if(getGarDocSourcePage() != null){¤			uvsquery.setCopySrcPage(getGarDocSourcePage());¤		}	¤		¤		updateExternalAuthors();¤		¤        uvsquery.setDiscardedResponse(getDiscardedResponse());		¤¤		if(getPaperCopyNotification ()){¤			String values = autoComplete.getFirstSuggestedValue("creation.paper.copy.notification.for.rp");¤			long id = getEntity().getDocCard().getPage().getId();¤			if(values != null & StringUtils.isNotEmpty(values)){¤				values += ", " + id;¤			}else{¤				values = id + "";¤			}¤			autoComplete.pushSuggestedValue("creation.paper.copy.notification.for.rp", values);¤			autoComplete.store();¤		}¤	}¤	¤	private static final String LISTREQUESTACTION = "listrequest.action";¤¤	public void updateExternalAuthors(){¤		if(StringUtils.isNotEmpty(getReqNumberInGarDoc())){¤			Observer externalAuthorFromHelpDesk = new Observer(0, getReqAuthorFioInGarDoc(), getReqAuthorEmailInGarDoc(), getReqAuthorCommentInGarDoc(), getReqNumberInGarDoc());¤			getEntity().setExternalAuthors(Arrays.asList(externalAuthorFromHelpDesk));¤			¤			AutoCompleteProvider provider = getAutoCompleteProvider();¤			provider.pushSuggestedValue(LISTREQUESTACTION + ".reqauthorfio", getReqAuthorFioInGarDoc());¤			provider.pushSuggestedValue(LISTREQUESTACTION + ".reqauthoremail", getReqAuthorEmailInGarDoc());¤			provider.store();¤		}¤	}¤¤	public void vaidateEditUvsQuery(UVSQuery uvsquery, GarDocDAO gardoc) throws Exception{¤		List<GarDocDAO> gardocFiltrated = DocCardManager.Factory.get().filtratedInCurrentGarDocs(Arrays.asList(gardoc), uvsquery.getCopySpecification(), Arrays.asList(getCopies ()), Arrays.asList(uvsquery.getPage().getId()));¤		if(gardocFiltrated.size() == 0){¤			setErrorCode(VALIDATION_EXISTING_UVS_QUERY);¤			setErrorMessage(Messages.Factory.messages().get("editdoccard.validation.exist.doccard.with.this.copy"));¤		}else if(UVSStateMachine.EV_CONNECT_TO_F1.getGuid().equals(getEvent()) && ¤				((uvsquery.getDocCard().getBlocks() == null || uvsquery.getDocCard().getBlocks().size() == 0) && (getBlocks() == null || getBlocks().size() == 0))){¤			setErrorCode(VALIDATION_EXISTING_CONNECTTOF1_NO_BLOCKS);¤			setErrorMessage(Messages.Factory.messages().get("uvsquerypropincludejs.connecttof1.no.blocks"));¤		}else if(UVSStateMachine.EV_NO_CONNECT_TO_F1.getGuid().equals(getEvent()) && ¤				((uvsquery.getDocCard().getBlocks() != null && uvsquery.getDocCard().getBlocks().size() > 0) || (getBlocks() != null && getBlocks().size() > 0))){¤			setErrorCode(VALIDATION_EXISTING_NOCONNECTTOF1_EXISTS_BLOCKS);¤			setErrorMessage(Messages.Factory.messages().get("uvsquerypropincludejs.noconnecttof1.exist.blocks"));¤		}¤	}¤	¤	@Override¤	public String execute() throws Exception {¤		UVSQuery uvsquery = getEntity();¤		AbstractState curState = (AbstractState)uvsquery.getCurrentState();¤		GarDocDAO gardoc = GarDocDAO.get(uvsquery.getDocCard().getPage().getId());¤		vaidateEditUvsQuery(uvsquery, gardoc);¤		if(getHasError()){¤			return SUCCESS;¤		}¤	¤		List<String> executorNames = uvsquery.getExecutorLogins();¤		String content = getEntity().getPage().getContent();¤		String comment= getRpComment();¤¤		if(!StringUtils.isEmpty(comment)){¤			if (!StringUtils.isEmpty(content)) {¤				content += "\n";¤			}¤			content += "{note}" + "*" + Messages.Factory.messages().get("uvsquery.rp.comment") + "*" + ": " + DpoUvsHelper.encodeToWiki(comment) + "{note}";¤			getEntity().getPage().setContent(content);¤		}¤¤		String result = super.execute();¤//		changeDocCardAttributes();¤		//надо, что бы сделать версию карточки, что бы обновленны текст попал в страницу, что бы заработал поиск¤		//коммит - умный, если текст не менялс, версия не меняется.¤		for(AbstractEvent event : UVSQueryManager.Factory.get().getEventsForDocCardChanges()){¤			hasDocCardChanges_ |= event.getGuid().equals(getEvent());¤		}¤		if (hasDocCardChanges_) {¤			 getEntity().getDocCard().commit();¤		}¤		¤		addReloadLink(curState, uvsquery.getPage().getId(), executorNames);¤		return result;¤	}¤¤	private void addReloadLink(AbstractState curState, long currentRequestId, List<String> executorNames){¤		AbstractState state = UVSStateMachine.ST_ON_ACCEPT_BY_UO_MANAGER;¤		if(getEvent() != null && curState.getSortValue() == state.getSortValue()){¤			String url = GlobalHelper.getBaseUrl();¤			SearchQuery searchQuery = getSearchUvsQuery(executorNames);¤			setResponse ("<createdquery>" + url + "/ru/garant/MDProcess/ConfluenceMDChange/ReportSupport/ReportXPlugin/ReportXPackage/listrequest.action?queryId=" + searchQuery.getId() + "</createdquery>");¤		}¤	}¤	¤	private SearchQuery getSearchUvsQuery(List<String> executorNames){¤		RequestSearchQueryData queryData = RequestSearchQueryData.Factory.make();¤		queryData.setSpaces(Arrays.asList(getSpaceKey()));¤		queryData.setIgnorePermissions(true);¤		queryData.setSearchInPage(true);¤		queryData.addExecutors(executorNames);¤		queryData.setRequestSearchQueryType(RequestSearchQueryType.NEW_IN_ASSIGNED);¤		queryData.addLabelGroup(LogicOperation.OR, LabelGroup.Factory.get(LabelGroupName.LIFE_CYCLE_STATE_ON_ACCEPT_BY_UO_MANAGER.toString()));¤		queryData.setRequestSearchQueryResultType(RequestSearchQueryResultType.UVSQUERY);¤		try {¤			long time = new Date().getTime();¤			SearchQuery query = SearchQuery.Factory.make(queryData, 10);¤			Logs.LOG_W("EditUvsQuery::getSearchUvsQuery::time=" + (new Date().getTime() - time));¤			return query;¤		} catch (NoActiveFactory e) {¤			Logs.LOG_SEX(e);¤		} catch (UnsupportedQueryDataException e) {¤			Logs.LOG_SEX(e);¤		}¤		return null;¤	}¤¤	public String doRemoveExternalAuthor(){¤		UVSQuery.Factory.get(getEntityId()).removeExternalAuthor(getExternalAuthorId());¤		return SUCCESS;¤	}¤	¤	public void setDiscardedResponse(final String discardedResponse){¤		discardedResponse_ = discardedResponse;¤	}¤¤	public String getDiscardedResponse(){¤		return discardedResponse_;¤	}¤¤	private String discardedResponse_;¤¤	protected static final int VALIDATION_EXISTING_UVS_QUERY = 1010;¤	protected static final int VALIDATION_EXISTING_UVS_QUERY_COPY = 1020;¤	protected static final int VALIDATION_EXISTING_CONNECTTOF1_NO_BLOCKS = 1030;¤	protected static final int VALIDATION_EXISTING_NOCONNECTTOF1_EXISTS_BLOCKS = 1040;¤	//#UC END# *4C6E6BA901D1_CUSTOM_METHODS_AND_DATA*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"WikiPageID (wiki)"
		    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/EditUvsQuery|4C6E6BA901D1
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (wiki)"
		    value      	"wiki")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"20609541766"))
	    quid       	"4C6E6BA901D1"
	    documentation 	"редактирование запроса в ДПО УВС"
	    stereotype 	"KActionPlugin"
	    superclasses 	(list inheritance_relationship_list
		(object Inheritance_Relationship
		    quid       	"4C6E6BD902F8"
		    supplier   	"Logical View::MDProcess::ConfluenceMDChange::RequestSupport::AbstractEditRequest"
		    quidu      	"48A5037E037F"))
	    used_nodes 	(list uses_relationship_list
		(object Uses_Relationship
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"20609542700"))
		    quid       	"4C7F71C80125"
		    stereotype 	"uses"
		    supplier   	"Logical View::MDProcess::DocCardChange::DocCardSupport::PageUvsQuery"
		    quidu      	"4C6E879E002F"))
	    language   	"MDA Generator")
	(object Class "PageUvsQuery"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/DocCardChange/DocCardSupport/PageUvsQuery.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"DerivedImplement"
		    value      	"{}")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"DerivedOverload"
		    value      	(value Text 
|{"4B03C4BD0296":{"need_collect_children":"false"}}
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ImplementSelectType"
		    value      	"all")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"OverloadSelectType"
		    value      	"include")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ApplyedGens"
		    value      	"All")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C6E879E002F_CUSTOM_IMPORT*"
		    value      	"//#UC START# *4C6E879E002F_CUSTOM_IMPORT*¤import ru.garant.MDProcess.DocCardChange.DocCardCommon.DPOUVSManager;¤import ru.garant.MDProcess.DocCardChange.DocCardCommon.DocCardManager;¤import ru.garant.MDProcess.DocCardChange.DocCardCommon.ResponseTemplateManager;¤import ru.garant.MDProcess.DocCardChange.Entities.ConnectedStatus;¤import ru.garant.MDProcess.DocCardChange.Entities.DocCard;¤import ru.garant.MDProcess.DocCardChange.Entities.InstancyTypes;¤import ru.garant.MDProcess.DocCardChange.Entities.UVSQuery;¤import ru.garant.MDProcess.DocCardChange.Entities.UVSQueryManager;¤import ru.garant.MDProcess.DocCardChange.Entities.UVSStateMachine;¤import ru.garant.MDProcess.DocCardChange.Entities.sm.UVSStateMachine.Assigned;¤import ru.garant.MDProcess.DocCardChange.Entities.sm.UVSStateMachine.MakeAnswer;¤import ru.garant.MDProcess.DocCardChange.Entities.sm.UVSStateMachine.OnAccept;¤import ru.garant.MDProcess.DocCardChange.Entities.sm.UVSStateMachine.OnAcceptByUOManager;¤import ru.garant.MDProcess.DocCardChange.Entities.sm.UVSStateMachine.OnAcceptInUO;¤import ru.garant.MDProcess.DocCardChange.Entities.sm.UVSStateMachine.TransferToUO;¤import ru.garant.MDProcess.DocCardChange.Entities.sm.UVSStateMachine.WaitingFromOGV;¤import ru.garant.MDProcess.ConfluenceMDChange.RequestSupport.AbstractRequestHelper;¤import java.util.ArrayList;¤import java.util.Collection;¤import java.util.List;¤import java.util.Map;¤import java.util.TreeMap;¤¤import org.python.modules.struct;¤¤import com.atlassian.confluence.labels.Label;¤import com.atlassian.confluence.pages.Page;¤import com.atlassian.confluence.user.AuthenticatedUserThreadLocal;¤import com.atlassian.gzipfilter.org.apache.commons.lang.StringUtils;¤import com.atlassian.user.Group;¤import com.atlassian.user.User;¤¤import ru.garant.shared.FSM.NotStarted;¤import ru.garant.shared.FSM.State;¤import ru.garant.shared.GCI.I18N.Messages;¤import ru.garant.shared.GCL.DateUtils;¤import ru.garant.MDProcess.ConfluenceMDChange.Requests.AbstractRequest;¤import ru.garant.MDProcess.ConfluenceMDChange.Requests.AbstractRequestManager;¤import ru.garant.MDProcess.ConfluenceMDChange.Requests.Observer;¤import ru.garant.MDProcess.ConfluenceMDChange.Requests.AbstractRequestLifeCycle.AbstractEvent;¤import ru.garant.MDProcess.ConfluenceMDChange.Requests.sm.AbstractRequestLifeCycle.AbstractState;¤import ru.garant.MDProcess.ConfluencePlugins.UserSupport.UserHelper;¤¤//#UC END# *4C6E879E002F_CUSTOM_IMPORT*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C6E879E002F_CUSTOM_CLASS_DEFINITION*"
		    value      	"//#UC START# *4C6E879E002F_CUSTOM_CLASS_DEFINITION*¤//#UC END# *4C6E879E002F_CUSTOM_CLASS_DEFINITION*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C6E879E002F_CUSTOM_METHODS_AND_DATA*"
		    value      	(value Text 
|//#UC START# *4C6E879E002F_CUSTOM_METHODS_AND_DATA*¤	public PageUvsQuery(AbstractRequest request) {¤		super(request);¤		// TODO Auto-generated constructor stub¤	}¤¤	public PageUvsQuery(long requestId) {¤		super(requestId);¤		// TODO Auto-generated constructor stub¤	}¤	@Override¤	public Collection<User> getAvailableExecutors() {¤			final Page requestPage = getRequest().getPage();¤			final String spaceKey = requestPage.getSpaceKey();¤			final DPOUVSManager dpoUvsManager = DPOUVSManager.Factory.get(spaceKey);¤			Map<String, User> result = new TreeMap<String, User>();¤			List<User> users = new ArrayList<User>();¤			State state = null;¤			try {¤				state = getRequest().getCurrentState();¤			}¤			catch (NotStarted e) {¤				Logs.LOG_E("AbstractLifeCycleErrorS::canEditState: catch NotStarted, how?!");¤			}¤			Group group = null;¤			if((state instanceof Assigned) || (state instanceof WaitingFromOGV) || (state instanceof OnAccept)){¤				group = dpoUvsManager.getUvsGroup();¤			}else if(state instanceof OnAcceptInUO){¤				group = dpoUvsManager.getDocsAcceptorsInUO();¤			}else if(state instanceof TransferToUO){¤				group = dpoUvsManager.getUvsGroupWhoTransferDocsToUO();¤			}else if(state instanceof OnAcceptByUOManager){¤				group = dpoUvsManager.getProjectManagersGroupsInOdUo();¤			}¤			if(group != null){¤				users = ContainerManager.Factory.get().getUserAccessor().getUsersByGroup(group);¤				for (User user : users) {¤					result.put(user.getFullName(), user);¤				}¤			}¤			return new UserHelper().filterUsersByEditPagePermission(result.values(), requestPage);¤	}¤¤	@Override¤	protected AbstractRequestManager getRequestManager() {¤		// TODO Auto-generated method stub¤		return UVSQueryManager.Factory.get();¤	}¤¤	@Override¤	protected String getTimeStatisticsMacroName() {¤		// TODO Auto-generated method stub¤		return null;¤	}¤¤	@Override¤	public UVSQuery getRequest() {¤		// TODO Auto-generated method stub¤		return (UVSQuery) request_;¤	}¤¤	¤	public boolean getIsUvsQuery() {¤		return true;¤	}¤¤	public DocCard getGardoc(){¤		return getRequest().getDocCard();¤	}¤¤	¤	public String getDocIssuerName(){¤		long id = getRequest().getDocCard().getDocIssuer();¤		Page page = ContainerManager.Factory.get().getPageManager().getPage(id);¤		return page.getTitle();¤	}¤	¤	public String getDocumentDate(){¤		java.util.Date date = getRequest().getDocCard().getCreationDate();¤		return DateUtils.formatDdMMyyyDate(date);¤		¤	}¤¤	public String getRegistrationDate(){¤		java.util.Date date = getRequest().getDocCard().getRegistrationDate();¤		return DateUtils.formatDdMMyyyDate(date);¤	}¤	¤	public String getIncludeInVersionDate(){¤		return DpoUvsHelper.getIncludeInVersionDate(getRequest().getDocCard());¤	}¤	¤	public String getRestrictedStatus(){¤		int restrictedStatus = getRequest().getDocCard().getRestrictedStatus();¤		if(restrictedStatus > 0)¤			return ru.garant.shared.GCI.I18N.Messages.Factory.messages().get(DpoUvsHelper.MESSAGES_RESTRICTED_STATUS[restrictedStatus - 1]);¤		else¤			return "";¤	}¤¤	public ConnectedStatus getIsConnected(){¤		return getRequest().getDocCard().getIsConnected();¤	}¤	¤	public InstancyTypes getInstancy(){¤		return getRequest().getDocCard().getInstancy();¤	}¤¤	public String getInstancyName(){¤		byte val = DpoUvsHelper.instancyTypesToByte(getInstancy());¤		String value = DpoUvsHelper.getAutoCompleteProvider(getRequest().getPage().getSpaceKey(), AuthenticatedUserThreadLocal.getUser()).getFirstSuggestedValue("viewpage.instancy");¤		if(StringUtils.isNotEmpty(value) && val == 0){¤			val = Byte.parseByte(value);¤		}¤		return InstancyTypes.values()[val].name();¤	}¤¤¤	public boolean getInternet(){¤		return getRequest().getDocCard().getInternet();¤	}¤¤	public String getIsConnectedName(){¤		return DpoUvsHelper.getIsConnectedName(getRequest().getDocCard());¤	}¤¤	public boolean getIsConnectedBlock(String name){¤		return DpoUvsHelper.getIsConnectedBlock(name, getRequest().getDocCard().getBlocks());¤	}¤¤	public String getCopies(){¤		return DocCardManager.Factory.get().getCopyFromRequest(getRequest());¤	}¤¤	public String getSite(){¤		return DocCardManager.Factory.get().getSiteFromRequest(getRequest());¤	}¤¤	public String getPath(){¤		return DocCardManager.Factory.get().getSuffixForECopyFilePathFromRequest(getRequest());¤	}¤¤	public byte getStateSortValue(){¤		AbstractState state =  (AbstractState)getRequest().getCurrentState();¤		return state.getSortValue();¤	}¤¤	public String getMainConnectedBlockName(){¤		return DpoUvsHelper.getMainConnectedBlockName(getRequest().getDocCard().getBlocks());¤	}¤	¤	public List<String> getInitialBlockNames(){¤		return DpoUvsHelper.getInitialBlockNames(getRequest().getDocCard().getBlocks());¤	}¤	¤	public String getGarDocSourceTitle(){¤		if(getRequest().getCopySrcTitle() == null){¤			return "";¤		}¤		return getRequest().getCopySrcTitle().getName();¤	}¤¤	public long getGarDocSourceId(){¤		if(getRequest().getCopySrcTitle() == null){¤			return 0;¤		}¤		return getRequest().getCopySrcTitle().getId();¤	}¤¤	public String getGarDocSourceStartDate(){¤		if(getRequest().getCopySrcStartDate() == null){¤			return "";¤		}¤		return DpoUvsHelper.getSrcDateString(getRequest().getCopySrcStartDate());¤	}¤¤	public String getGarDocSourceEndDate(){¤		if(getRequest().getCopySrcEndDate() == null){¤			return "";¤		}¤		return DpoUvsHelper.getSrcDateString(getRequest().getCopySrcEndDate());¤	}¤¤	public String getGarDocSourceNumber(){¤		return getRequest().getCopySrcNumber();¤	}¤¤	public String getGarDocSourcePage(){¤		if(StringUtils.isEmpty(getRequest().getCopySrcPage())){¤			return "";¤		}¤		return getRequest().getCopySrcPage() + "";¤	}¤	¤¤	public String getExternalAuthorsFromHelpDesk(){¤		if(getRequest().getExternalAuthors() == null || getRequest().getExternalAuthors().size() == 0){¤			return null;¤		}¤		String ret = "";¤		for(Observer obs : getRequest().getExternalAuthors()){¤			if(StringUtils.isNotEmpty(ret)){¤				ret += "; ";¤			}¤			ret += DpoUvsHelper.getExternalAuthorFromHelpDeskDAOStringForSummary(obs);¤		}¤		return ret;¤	}¤¤	public List<DpoUvsHelper.UvsQueryEvents> getAvailableEvents() {¤		List<AbstractEvent> events = getRequest().getAvailableEvents();¤		List<DpoUvsHelper.UvsQueryEvents> resultEvents = new ArrayList<DpoUvsHelper.UvsQueryEvents>();¤		for(AbstractEvent event : events){¤			if(!event.getGuid().equals(UVSStateMachine.EV_DISCARDED_RESPONSE.getGuid())){¤				DpoUvsHelper.UvsQueryEvents resultEvent = new DpoUvsHelper.UvsQueryEvents(event.getGuid(), event.getTitle(), "");¤				resultEvents.add(resultEvent);¤			}¤		}¤		if(getRequest().getCurrentState() instanceof Assigned¤				|| getRequest().getCurrentState() instanceof WaitingFromOGV¤				|| getRequest().getCurrentState() instanceof OnAccept¤				|| getRequest().getCurrentState() instanceof MakeAnswer){¤			resultEvents.addAll(DpoUvsHelper.getUvsQueryDiscardedEvents(getRequest().getPage()));¤		}¤		return resultEvents;¤	}¤	¤	public AbstractRequestHelper getHelper(){¤		return new DpoUvsHelper();¤	}¤	¤	public List<String> getSitesForAutoCompleteCopyDate(){¤		return CreateUvsQuery.getSitesForAutoCompleteCopyDate();¤	}¤¤	public String getReqInfo(){¤		String reqInfo = ContainerManager.Factory.get().getContentPropertyManager().getStringProperty(getRequest().getPage(), "requestInfo");¤		return reqInfo;¤	}¤	//#UC END# *4C6E879E002F_CUSTOM_METHODS_AND_DATA*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"WikiPageID (wiki)"
		    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/PageUvsQuery|4C6E879E002F
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (wiki)"
		    value      	"wiki")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"20609544184"))
	    quid       	"4C6E879E002F"
	    documentation 	"обертка для сущности запроса в ДПО УВС, предоставляющие данные в удобном для web-форм виде"
	    stereotype 	"SimpleClass"
	    superclasses 	(list inheritance_relationship_list
		(object Inheritance_Relationship
		    quid       	"4C6E87BF0264"
		    supplier   	"Logical View::MDProcess::ConfluenceMDChange::RequestSupport::AbstractPageRequest"
		    quidu      	"48E5C6730255"))
	    language   	"MDA Generator")
	(object Class "AddUvsQueryCondition"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/DocCardChange/DocCardSupport/AddUvsQueryCondition.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C762A2702EB_CUSTOM_IMPORT*"
		    value      	"//#UC START# *4C762A2702EB_CUSTOM_IMPORT*¤import ru.garant.MDProcess.DocCardChange.DocCardCommon.DPOUVSManager;¤import ru.garant.MDProcess.DocCardChange.Entities.UVSQueryPermissionManager;¤import ru.garant.MDProcess.ConfluenceMDChange.Requests.AbstractRequestPermissionManager;¤¤import com.atlassian.confluence.pages.AbstractPage;¤import com.atlassian.confluence.pages.Page;¤import com.atlassian.confluence.plugin.descriptor.web.WebInterfaceContext;¤import com.atlassian.confluence.user.AuthenticatedUserThreadLocal;¤import com.atlassian.user.Group;¤import com.atlassian.user.User;¤//#UC END# *4C762A2702EB_CUSTOM_IMPORT*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C762A2702EB_CUSTOM_CLASS_DEFINITION*"
		    value      	"//#UC START# *4C762A2702EB_CUSTOM_CLASS_DEFINITION*¤//#UC END# *4C762A2702EB_CUSTOM_CLASS_DEFINITION*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C762A2702EB_CUSTOM_METHODS_AND_DATA*"
		    value      	(value Text 
|//#UC START# *4C762A2702EB_CUSTOM_METHODS_AND_DATA*¤	@Override¤	protected AbstractRequestPermissionManager getRequestPermissionManager() {¤		// TODO Auto-generated method stub¤		return UVSQueryPermissionManager.Factory.get();¤	}¤¤	@Override¤	protected boolean shouldDisplay(WebInterfaceContext context) {¤		// TODO Auto-generated method stub¤		final AbstractPage pageObj = context.getPage();¤		if((pageObj instanceof Page) == false){¤			return false;¤		}¤		Group group = DPOUVSManager.Factory.get(pageObj.getSpaceKey()).getUvsGroupWhoTransferDocsToUO();¤		User user = AuthenticatedUserThreadLocal.getUser();¤		boolean hasRightCurrentUser = ContainerManager.Factory.get().getUserAccessor().hasMembership(group, user);¤		Page page = (Page)pageObj;¤		boolean isUvs = page.getLabels().contains(DpoUvsHelper.getUvsLabel());¤		¤		return super.shouldDisplay(context) && hasRightCurrentUser && isUvs;¤	}¤	¤	¤	//#UC END# *4C762A2702EB_CUSTOM_METHODS_AND_DATA*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"WikiPageID (wiki)"
		    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/AddUvsQueryCondition|4C762A2702EB
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (wiki)"
		    value      	"wiki")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"20609545371"))
	    quid       	"4C762A2702EB"
	    documentation 	
|определяет будет ли показываться ссылка "добавить запрос в ДПО УВС" в меню страницы
	    
	    stereotype 	"SimpleClass"
	    superclasses 	(list inheritance_relationship_list
		(object Inheritance_Relationship
		    quid       	"4C762A880342"
		    supplier   	"Logical View::MDProcess::ConfluenceMDChange::RequestSupport::AbstractAddRequestCondition"
		    quidu      	"4A5355390002"))
	    language   	"MDA Generator")
	(object Class "AddUvsQueryWebItem"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"accessKey"
		    value      	"")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"need UC"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"section"
		    value      	"system.content.add/space")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"styleClass"
		    value      	"add-uvscurrentdoc")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"weight"
		    value      	"11")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"label key"
		    value      	"uvsquery.add.uvs")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"output.xml:*4C762ADB00FBLABEL_CONTENT*"
		    value      	(value Text 
|<!--UC_BEGIN*4C762ADB00FBLABEL_CONTENT*-->¤			<!--UC_END*4C762ADB00FBLABEL_CONTENT*-->
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"WikiPageID (wiki)"
		    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/AddUvsQueryWebItem|4C762ADB00FB
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (wiki)"
		    value      	"wiki")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"20609546582"))
	    quid       	"4C762ADB00FB"
	    documentation 	"контролирует показ линка добавить запрос"
	    stereotype 	"WebItem"
	    used_nodes 	(list uses_relationship_list
		(object Uses_Relationship
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"params"
			    value      	"")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"20609548422")
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"id"
			    value      	"createUVSQuery"))
		    quid       	"4C762C6C0053"
		    stereotype 	"link"
		    supplier   	"Logical View::MDProcess::DocCardChange::DocCardSupport::DocCardXPlugin::DocCardXPackage::CreateUvsQuery"
		    quidu      	"4C652D23033C"))
	    language   	"MDA Generator")
	(object Class "SearchUvsQuery"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/DocCardChange/DocCardSupport/SearchUvsQuery.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C7B5C0402FD_CUSTOM_IMPORT*"
		    value      	"//#UC START# *4C7B5C0402FD_CUSTOM_IMPORT*¤import bucket.core.actions.PaginationSupport;¤import bucket.core.persistence.hibernate.HibernateHandle;¤import ru.garant.MDProcess.ConfluencePlugins.Search.IllegalResultStateException;¤import ru.garant.MDProcess.ConfluencePlugins.Search.SearchFailedException;¤import ru.garant.MDProcess.ConfluenceMDChange.ReportSupport.RequestBatchHelper;¤¤import com.atlassian.bonnie.ILuceneConnection;¤import com.atlassian.bonnie.LuceneUtils;¤import com.atlassian.bonnie.search.BaseDocumentBuilder;¤import com.atlassian.confluence.pages.Page;¤import com.atlassian.confluence.search.lucene.DocumentFieldName;¤import com.atlassian.confluence.search.lucene.LabelExtractor;¤import com.atlassian.confluence.search.lucene.extractor.ContentEntityMetadataExtractor;¤¤import ru.garant.MDProcess.ConfluencePlugins.SearchSupport.AuthorExtractor;¤import ru.garant.MDProcess.ConfluencePlugins.SearchSupport.BaseSearchForm;¤import ru.garant.MDProcess.ConfluencePlugins.SearchSupport.BaseSearchForm.AuthorTypeValues;¤import ru.garant.MDProcess.ConfluencePlugins.IndexingSupport.GarConfluenceAnalyzer;¤import ru.garant.MDProcess.ConfluencePlugins.LabelSupport.LabelGroupName;¤import ru.garant.MDProcess.ConfluencePlugins.Search.SortingCondition;¤import ru.garant.MDProcess.DocCardChange.DocCardChangeDAO.AbstractECopyDAO;¤import ru.garant.MDProcess.DocCardChange.DocCardChangeDAO.AbstractPaperCopyDAO;¤import ru.garant.MDProcess.DocCardChange.DocCardChangeDAO.CopyDAO;¤import ru.garant.MDProcess.DocCardChange.DocCardChangeDAO.ECopyDAO;¤import ru.garant.MDProcess.DocCardChange.DocCardChangeDAO.PaperCopy;¤import ru.garant.MDProcess.DocCardChange.DocCardChangeDAO.SiteCopyDAO;¤import ru.garant.MDProcess.DocCardChange.DocCardChangeDAO.UVSQuestDAO;¤import ru.garant.MDProcess.DocCardChange.DocCardCommon.DoInNewTransactionCallback;¤¤import net.sf.hibernate.HibernateException;¤¤import org.apache.commons.lang.ArrayUtils;¤import org.apache.commons.lang.StringUtils;¤import org.apache.lucene.analysis.TokenStream;¤import org.apache.lucene.analysis.tokenattributes.TermAttribute;¤import org.apache.lucene.document.Document;¤import org.apache.lucene.index.IndexReader;¤import org.apache.lucene.index.IndexReader.FieldOption;¤import org.apache.lucene.index.Term;¤import org.apache.lucene.search.BooleanClause;¤import org.apache.lucene.search.BooleanQuery;¤import org.apache.lucene.search.IndexSearcher;¤import org.apache.lucene.search.PhraseQuery;¤import org.apache.lucene.search.Query;¤import org.apache.lucene.search.RangeQuery;¤import org.apache.lucene.search.Searcher;¤import org.apache.lucene.search.Sort;¤import org.apache.lucene.search.SortField;¤import org.apache.lucene.search.TermQuery;¤import org.apache.lucene.search.TermRangeQuery;¤import org.apache.lucene.search.TopDocs;¤import org.apache.lucene.search.BooleanClause.Occur;¤import org.apache.lucene.search.WildcardQuery;¤import org.reflections.Reflections;¤¤import ru.garant.shared.GCI.I18N.Messages;¤¤import ru.garant.MDProcess.DocCardChange.DocCardSearch.UvsQuerySearchQueryData;¤import ru.garant.MDProcess.DocCardChange.Entities.ConnectedStatus;¤import ru.garant.MDProcess.DocCardChange.Entities.InstancyTypes;¤import ru.garant.MDProcess.DocCardChange.Entities.UVSQuery;¤import ru.garant.MDProcess.DocCardChange.Entities.UVSQueryManager;¤import ru.garant.MDProcess.ConfluenceMDChange.ReportSupport.SearchRequest.AssignedToTypeValues;¤import ru.garant.MDProcess.ConfluenceMDChange.RequestSearchSupportTypes.RequestSortingType;¤¤import java.text.ParseException;¤import java.text.SimpleDateFormat;¤import java.util.ArrayList;¤import java.util.Arrays;¤import java.util.Date;¤import java.util.List;¤import java.util.Set;¤¤import java.awt.Label;¤import java.io.StringReader;¤¤import ru.garant.MDProcess.DocCardChange.DocCardSupport.SearchUvsQueryForm.CopySourceItem;¤¤//#UC END# *4C7B5C0402FD_CUSTOM_IMPORT*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C7B5C0402FD_CUSTOM_CLASS_DEFINITION*"
		    value      	"//#UC START# *4C7B5C0402FD_CUSTOM_CLASS_DEFINITION*¤//#UC END# *4C7B5C0402FD_CUSTOM_CLASS_DEFINITION*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C7B5C0402FD_ACTION_NAME*"
		    value      	(value Text 
|//#UC START# *4C7B5C0402FD_ACTION_NAME*¤		String actionNameKey = String.format("search%s.%s.search", getEntityType(), getEntityType());¤		return Messages.Factory.messages().get(actionNameKey);¤¤		//#UC END# *4C7B5C0402FD_ACTION_NAME*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C7B5C0402FD_CUSTOM_METHODS_AND_DATA*"
		    value      	(value Text 
|//#UC START# *4C7B5C0402FD_CUSTOM_METHODS_AND_DATA*¤	private String collapsedSearchBlockIds_ = "";¤	¤	final public String getCollapsedSearchBlockIds () {¤		return collapsedSearchBlockIds_;¤	}¤¤	final public void setCollapsedSearchBlockIds (final String collapsedSearchBlockIds) {¤		collapsedSearchBlockIds_ = collapsedSearchBlockIds;¤	}¤¤	public String getText (String key) {¤		if ("uvsquery.search".equals(key)) {¤			String actionNameKey = String.format("%s.search", getEntityType());¤			return Messages.Factory.messages().get(actionNameKey);¤		}¤		return super.getText(key);¤	}¤¤	@Override¤	public void prepare() throws Exception {¤		// TODO Auto-generated method stub¤		if (!initialized_) {¤			initialized_ = initialize();¤		}¤		¤	}¤¤	@Override¤	public SearchUvsQueryForm getForm() {¤		// TODO Auto-generated method stub¤		if(uvsQueryForm_ == null){¤			if (getSearchQuery() != null && getSearchQuery().getQueryData() != null) {¤				UvsQuerySearchQueryData queryData = (UvsQuerySearchQueryData) getSearchQuery().getQueryData();¤				uvsQueryForm_ = new SearchUvsQueryForm(getRemoteUser(), queryData, UVSQueryManager.Factory.get());¤				setForm(uvsQueryForm_);¤			} else {¤				uvsQueryForm_ = new SearchUvsQueryForm(getRemoteUser());¤				setForm(uvsQueryForm_);¤			}¤		}¤		return uvsQueryForm_;¤¤	}¤	¤	¤	@Override¤	public void setSearchResultType_(String type) {¤		// TODO Auto-generated method stub¤		final SearchUvsQueryForm form = getForm();¤		if (form != null) {¤			form.setRequestManager(UVSQueryManager.Factory.get());¤		}¤		super.setSearchResultType_(type);¤	}¤¤	public void setForm(SearchUvsQueryForm uvsQueryForm){¤		uvsQueryForm_ = uvsQueryForm;¤	}¤	¤	private SearchUvsQueryForm uvsQueryForm_ = null;¤	private boolean hasInitialBatch_ = false;¤	¤	public class GardocResult {¤		public ArrayList<Long> searchedDocs = new ArrayList<Long>();¤		public long allCount;¤		public int startIndex_;¤		public int numItems_;¤		public Sort sorter_;¤		public int totalHits_ = 0;¤		¤		public void setStartIndex(int startIndex){¤			startIndex_ = startIndex;¤		}¤		¤		public void setSorter(Sort sorter){¤			sorter_ = sorter;¤		}¤¤		public void setNumItems(int numItems){¤			numItems_ = numItems;¤		}¤¤¤		public String convertDate(String initDate) throws ParseException{¤			String newDate = null;¤			if(StringUtils.isNotEmpty(initDate)){¤				Date date = new SimpleDateFormat("dd.MM.yyyy").parse(initDate);¤				newDate = new SimpleDateFormat("yyyyMMdd").format(date);¤			}¤			return newDate;¤		}¤		¤		public void createDateTerm(BooleanQuery result, String fieldName, String beginDate, String endDate, String dateRangePredefined) throws Exception{¤			String newBeginDate = convertDate(beginDate);¤			String newEndDate = convertDate(endDate);¤			if(dateRangePredefined != null ¤					&& (¤							dateRangePredefined.equals(Messages.Factory.messages().get(BaseSearchForm.DATE_RANGE_PREDEFINED_ANYDATE)) == false &&¤							(¤									dateRangePredefined.equals(Messages.Factory.messages().get(BaseSearchForm.DATE_RANGE_PREDEFINED_CUSTOM)) && ¤									StringUtils.isEmpty(newBeginDate) && ¤									StringUtils.isEmpty(newEndDate)¤							) == false	¤						)	¤					¤			){¤				UvsQueryDataProvider provider = new UvsQueryDataProvider(null, getForm());¤				long documentBeginDate = provider.getDateFrom(dateRangePredefined, beginDate);¤				long documentEndDate = provider.getDateTo(dateRangePredefined, endDate);¤				if (documentBeginDate != 0){¤					Date date = new Date(documentBeginDate);¤					newBeginDate = new SimpleDateFormat("yyyyMMdd").format(date);¤				}¤				if (documentEndDate != 0) {¤					Date date = new Date(documentEndDate);¤					newEndDate = new SimpleDateFormat("yyyyMMdd").format(date);¤				}¤			}¤¤			createRangeQueryTerm(result, fieldName, newBeginDate, newEndDate, dateRangePredefined);¤		}¤		¤		public void createDateTermForCreationDate(BooleanQuery result, String fieldName, String beginDate, String endDate, String dateRangePredefined) throws Exception{¤			String newBeginDate = null;¤			if(beginDate != null){¤				Date date = new SimpleDateFormat("dd.MM.yyyy").parse(beginDate);¤				newBeginDate = LuceneUtils.dateToString(date);¤			}¤			String newEndDate = null;¤			if(endDate != null){¤				Date date = new SimpleDateFormat("dd.MM.yyyy").parse(endDate);¤				newEndDate = LuceneUtils.dateToString(date);¤			}¤			if(dateRangePredefined != null && dateRangePredefined.equals(Messages.Factory.messages().get(BaseSearchForm.DATE_RANGE_PREDEFINED_ANYDATE)) == false){¤				UvsQueryDataProvider provider = new UvsQueryDataProvider(null, getForm());¤				long documentBeginDate = provider.getDateFrom(dateRangePredefined, beginDate);¤				long documentEndDate = provider.getDateTo(dateRangePredefined, endDate);¤				if (documentBeginDate != 0){¤					Date date = new Date(documentBeginDate);¤					newBeginDate = new SimpleDateFormat("yyyyMMdd").format(date);¤				}¤				if (documentEndDate != 0) {¤					Date date = new Date(documentEndDate);¤					newEndDate = new SimpleDateFormat("yyyyMMdd").format(date);¤				}¤			}¤¤			createRangeQueryTerm(result, fieldName, newBeginDate, newEndDate, dateRangePredefined);¤		}¤¤		public Query createPhraseQuery(String fieldName, String value) throws Exception{¤			PhraseQuery pq = new PhraseQuery();¤			pq.setSlop(100);¤			GarConfluenceAnalyzer an = new GarConfluenceAnalyzer(ContainerManager.Factory.get().getSettingsManager());¤			TokenStream ts = an.tokenStream(fieldName, new StringReader(value));¤			TermAttribute ta = (TermAttribute)ts.addAttribute(TermAttribute.class);¤			while (ts.incrementToken()) {¤				pq.add(new Term(fieldName, ta.term()));¤			}¤			return pq;¤		}¤		¤		public void execute() throws Exception{¤			if (!StringUtils.isEmpty(search_) && initialized_) {¤				setStartIndex(0);¤				setSearchQuery(createSearchQuery(createQueryData()));¤			}¤¤			ILuceneConnection luceneConn= ContainerManager.Factory.get().getLuceneConnection();¤			Searcher searcher = null;¤			try {¤			searcher = luceneConn.leakSearcher();¤			final BooleanQuery result = new BooleanQuery();¤			boolean isUvs = isUvsQuery();¤			boolean isDocCard = isDocCard(isUvs);¤			if(StringUtils.isNotEmpty(getForm().getWordsToSearch())){¤				List<Query> context = new ArrayList<Query>();¤				if (getForm().getSearchInHeaders()) {¤					context.add(createPhraseQuery(DocumentFieldName.TITLE, getForm().getWordsToSearch()));¤				}¤				if (getForm().getSearchInText()) {¤					context.add(createPhraseQuery(BaseDocumentBuilder.FieldName.CONTENT_BODY, getForm().getWordsToSearch()));¤				}¤				if (context.size() == 1) {¤					result.add(context.get(0), Occur.MUST);¤				} else {¤					BooleanQuery bq = new BooleanQuery();¤					for (Query q: context) {¤						bq.add(q, Occur.SHOULD);¤					}¤					result.add(bq, Occur.MUST);¤				}¤				¤				BooleanQuery type = new BooleanQuery();¤				type.add(new TermQuery(new Term(GardocExtractor.GAR_FIELD_NAME_IS_DOCCARD,"0")), Occur.SHOULD);¤				type.add(new TermQuery(new Term(GardocExtractor.GAR_FIELD_NAME_IS_DOCCARD,"1")), Occur.SHOULD);¤				result.add(type, Occur.MUST);¤			} else if (isUvs || isDocCard){¤				createTerm(result, GardocExtractor.GAR_FIELD_NAME_IS_DOCCARD, isUvs? "0": "1");¤			}¤			if(getForm().getTopic() != 0){¤				createTerm(result, GardocExtractor.GAR_FIELD_NAME_TOPIC, String.valueOf(getForm().getTopic()));¤			}¤			createTerm(result, GardocExtractor.GAR_FIELD_NAME_DOC_ISSUER, getForm().getDocIssuer());¤			createDateTerm(result, GardocExtractor.GAR_FIELD_NAME_DOC_DATE, getForm().getDocumentBeginDate(), getForm().getDocumentEndDate(), getForm().getDocumentDateRangePredefined());¤//			createTerm(result, GardocExtractor.GAR_FIELD_NAME_DOC_NUMBER, getForm().getDocumentNumber());¤			if(StringUtils.isNotEmpty(getForm().getDocumentNumber())){¤				createWildTerm(result, GardocExtractor.GAR_FIELD_NAME_DOC_NUMBER, getForm().getDocumentNumber().toUpperCase());¤			}¤			createTerm(result, GardocExtractor.GAR_FIELD_NAME_DOC_TYPE, getForm().getDocumentType());¤			createDateTerm(result, GardocExtractor.GAR_FIELD_NAME_DOC_MU_DATE, getForm().getRegistrationBeginDate(), getForm().getRegistrationEndDate(), getForm().getRegistrationDateRangePredefined());¤			if(StringUtils.isNotEmpty(getForm().getRegistrationNumber())){¤				createWildTerm(result, GardocExtractor.GAR_FIELD_NAME_DOC_MU_NUMBER, getForm().getRegistrationNumber().toUpperCase());¤			}¤			if(getForm().getRestrictedStatus() != 0){¤				createTerm(result, GardocExtractor.GAR_FIELD_NAME_DOC_RESTRICTED_STATUS, String.valueOf(getForm().getRestrictedStatus()));¤			}¤¤			if(getForm().getAssignedTo() != null && getForm().getAssignedTo().size() > 0){¤				if(getForm().getRadioAssignedTo() != null && getForm().getRadioAssignedTo().equals("CURRENT_ASSIGNED_TO")){¤					createTerm(result, GardocExtractor.GAR_FIELD_NAME_ASSIGNED_TO, getForm().getAssignedTo());¤				}¤			}¤			createDateTerm(result,GardocExtractor.GAR_FIELD_NAME_REQ_CREATION_DATE, getForm().getDateFrom(), getForm().getDateTo(), getForm().getDateRangePredefined());¤			createDateTerm(result, GardocExtractor.GAR_FIELD_NAME_REQ_WAITING_FROM_OGV_DATE, getForm().getWaitingFromOgvDateFrom(), getForm().getWaitingFromOgvDateTo(), getForm().getWaitingFromOgvDateRangePredefined());¤			createDateTerm(result, GardocExtractor.GAR_FIELD_NAME_REQ_SEND_IN_UO_DATE, getForm().getSendInUoDateFrom(), getForm().getSendInUoDateTo(), getForm().getSendInUoDateRangePredefined());¤			if(getForm().getCurrentStateLabels() != null && getForm().getCurrentStateLabels().size() > 0){¤				createTerm(result, LabelExtractor.LABEL_TEXT_FIELD, getForm().getCurrentStateLabels());¤			}else if(StringUtils.isNotEmpty(getForm().getCurrentState()) && getForm().getCurrentState().equals(LabelGroupName.LIFE_CYCLE_STATE_ALL.name()) == false){¤				List<String> labelsList = new ArrayList<String>();¤				¤				for(ru.garant.MDProcess.ConfluencePlugins.LabelSupport.Label lab : getForm().getAllCurrentStateLabels()){¤					labelsList.add(lab.getName());¤				}¤				createTerm(result, LabelExtractor.LABEL_TEXT_FIELD, labelsList);¤			}¤			if(getForm().getAuthors() != null && getForm().getAuthorIsCreator()){¤				createTerm(result, AuthorExtractor.GarFieldNameAuthorCreator, getForm().getAuthors());¤			}¤			if(getForm().getAuthors() != null && getForm().getAuthorIsLastModifier()){¤				createTerm(result, AuthorExtractor.GarFieldNameAuthorLastModifier, getForm().getAuthors());¤			}¤¤			if(StringUtils.isNotEmpty(getForm().getInternet())){¤				createTerm(result, GardocExtractor.GAR_FIELD_NAME_DOC_INTERNET, getForm().getInternet());¤			}¤			if(getForm().getInstancyUnknown() || getForm().getInstancyQuickly() || getForm().getInstancyOrdinary() || getForm().getInstancyInVersion()){¤				List<String> values = new ArrayList<String>();¤				if(getForm().getInstancyUnknown()){¤					values.add(String.valueOf(DpoUvsHelper.instancyTypesToByte(InstancyTypes.UNKNOWN)));¤				}¤				if(getForm().getInstancyQuickly()){¤					values.add(String.valueOf(DpoUvsHelper.instancyTypesToByte(InstancyTypes.QUICKLY)));¤				}¤				if(getForm().getInstancyOrdinary()){¤					values.add(String.valueOf(DpoUvsHelper.instancyTypesToByte(InstancyTypes.ORDINARY)));¤				}¤				if(getForm().getInstancyInVersion()){¤					values.add(String.valueOf(DpoUvsHelper.instancyTypesToByte(InstancyTypes.IN_VERSION)));¤				}¤				createTerm(result, GardocExtractor.GAR_FIELD_NAME_DOC_INSTANCY, values);¤			}¤			if(getForm().getStatusIsConnected() || getForm().getStatusIsConnectedInVersion() || getForm().getStatusIsNotConnected() || getForm().getStatusUnknown()){¤				List<String> values = new ArrayList<String>();¤				if(getForm().getStatusUnknown()){¤					values.add(String.valueOf(DpoUvsHelper.connectedStatusToByte(ConnectedStatus.UNKNOWN)));¤				}¤				if(getForm().getStatusIsNotConnected()){¤					values.add(String.valueOf(DpoUvsHelper.connectedStatusToByte(ConnectedStatus.IS_NOT_CONNECTED)));¤				}¤				if(getForm().getStatusIsConnected()){¤					values.add(String.valueOf(DpoUvsHelper.connectedStatusToByte(ConnectedStatus.IS_CONNECTED)));¤				}¤				if(getForm().getStatusIsConnectedInVersion()){¤					values.add(String.valueOf(DpoUvsHelper.connectedStatusToByte(ConnectedStatus.IS_CONNECTED_IN_VERSION)));¤				}¤				createTerm(result, GardocExtractor.GAR_FIELD_NAME_DOC_IS_CONNECTED, values);¤			}¤			¤			createTerm(result, GardocExtractor.GAR_FIELD_NAME_DOC_BLOCKS, StringUtils.isEmpty(getForm().getBlocks())?null:Arrays.asList(getForm().getBlocks().split(",")));¤			if(StringUtils.isNotBlank(getForm().getCopies())){¤				List<String> copies = new ArrayList<String>();¤				if(getForm().getCopies().equals(DpoUvsHelper.MESSAGES_FOR_SPECIFY_SEARCH_BY_COPIES[1])){¤//					copies.add(new ECopyDAO().getType());¤//					copies.add(new SiteCopyDAO().getType());¤					copies.addAll(DpoUvsHelper.getECopiesSubclassesTypes());¤					createTerm(result, GardocExtractor.GAR_FIELD_NAME_DOC_COPIES, copies);¤				}else if(getForm().getCopies().equals(DpoUvsHelper.MESSAGES_FOR_SPECIFY_SEARCH_BY_COPIES[2])){¤//					copies.add(new PaperCopy().getType());¤					copies.addAll(DpoUvsHelper.getPaperCopiesSubclassesTypes());¤					createTerm(result, GardocExtractor.GAR_FIELD_NAME_DOC_COPIES, copies);¤				}else if(getForm().getCopies().equals(DpoUvsHelper.MESSAGES_FOR_SPECIFY_SEARCH_BY_COPIES[3])){¤//					copies.add(new ECopyDAO().getType());¤//					copies.add(new SiteCopyDAO().getType());¤					copies.addAll(DpoUvsHelper.getECopiesSubclassesTypes());¤					createTerm(result, GardocExtractor.GAR_FIELD_NAME_DOC_COPIES, copies);¤					createNotTerm(result, GardocExtractor.GAR_FIELD_NAME_DOC_COPIES, Arrays.asList(new PaperCopy().getType()));¤				}else if(getForm().getCopies().equals(DpoUvsHelper.MESSAGES_FOR_SPECIFY_SEARCH_BY_COPIES[4])){¤//					copies.add(new PaperCopy().getType());¤//					copies.add(new ECopyDAO().getType());¤//					copies.add(new SiteCopyDAO().getType());¤					copies.addAll(DpoUvsHelper.getPaperCopiesSubclassesTypes());¤					copies.addAll(DpoUvsHelper.getECopiesSubclassesTypes());¤¤					createAllMustTerm(result, GardocExtractor.GAR_FIELD_NAME_DOC_COPIES, copies);¤				}else if(getForm().getCopies().equals(DpoUvsHelper.MESSAGES_FOR_SPECIFY_SEARCH_BY_COPIES[5])){¤//					copies.add(new PaperCopy().getType());¤//					copies.add(new ECopyDAO().getType());¤//					copies.add(new SiteCopyDAO().getType());¤					copies.addAll(DpoUvsHelper.getPaperCopiesSubclassesTypes());¤					copies.addAll(DpoUvsHelper.getECopiesSubclassesTypes());¤¤					createTerm(result, GardocExtractor.GAR_FIELD_NAME_DOC_COPIES, copies);¤				}else if(getForm().getCopies().equals(DpoUvsHelper.MESSAGES_FOR_SPECIFY_SEARCH_BY_COPIES[6])){¤//					copies.add(new PaperCopy().getType());¤//					copies.add(new ECopyDAO().getType());¤//					copies.add(new SiteCopyDAO().getType());¤					copies.addAll(DpoUvsHelper.getPaperCopiesSubclassesTypes());¤					copies.addAll(DpoUvsHelper.getECopiesSubclassesTypes());¤					createNotTerm(result, GardocExtractor.GAR_FIELD_NAME_DOC_COPIES, copies);¤				}¤			}¤ 	¤			if(getForm().getSources() != null && getForm().getSources().size() > 0){¤				List<String> copies = new ArrayList<String>();¤				try{¤					List<CopyDAO> findedCopies = DpoUvsHelper.getAllCopiesSubclasses();¤					for(String initSource : getForm().getSources()){¤						for(CopyDAO copy : findedCopies){¤							if(copy.getClass().getSimpleName().equals(initSource)){¤								copies.add(copy.getType());¤							}¤						}¤					}¤				}catch(Exception ex){¤					Logs.LOG_SEX(ex);¤				}¤				¤				createTerm(result, GardocExtractor.GAR_FIELD_NAME_DOC_COPIES, copies);¤			}¤			¤			List<String> queryUVSTypes = new ArrayList<String>();¤			if(getForm().getUoQueryActive()){¤				//createTerm(result, LabelExtractor.LABEL_TEXT_FIELD, "rt_uo_query");¤				queryUVSTypes.add("rt_uo_query");¤			}¤			if(getForm().getRpQueryActive()){¤				//createTerm(result, LabelExtractor.LABEL_TEXT_FIELD, "rt_region_query");¤				queryUVSTypes.add("rt_region_query");¤			}¤			if(getForm().getUvsCurrentDocActive()){¤				//createTerm(result, LabelExtractor.LABEL_TEXT_FIELD, "rt_current_doc");¤				queryUVSTypes.add("rt_current_doc");¤			}¤			if(getForm().getUoCurrentDocActive()){¤				//createTerm(result, LabelExtractor.LABEL_TEXT_FIELD, "rt_uo_current_doc");¤				queryUVSTypes.add("rt_uo_current_doc");¤			}¤			¤			if (queryUVSTypes.size() > 0) {¤				createTerm(result, LabelExtractor.LABEL_TEXT_FIELD, queryUVSTypes);¤			}¤			¤			¤			if(getForm().getSelectedUserPropertyLabels().size() > 0){¤				for(String labelName : getForm().getSelectedUserPropertyLabels()){¤					createTerm(result, LabelExtractor.LABEL_TEXT_FIELD, labelName);¤				}¤			}¤			¤			if(getForm().getExcludedUserPropertyLabels().size() > 0){¤				createNotTerm(result, LabelExtractor.LABEL_TEXT_FIELD, getForm().getExcludedUserPropertyLabels());¤			}¤			¤			if(getForm().getManagerCommands().size() > 0){¤				createTerm(result, LabelExtractor.LABEL_TEXT_FIELD, getForm().getManagerCommands());¤			}¤			¤			¤			if(StringUtils.isNotEmpty(getForm().getSelectedItems())){¤				String[] ids= StringUtils.split(getForm().getSelectedItems(), ",");¤				List<String> idsList = Arrays.asList(ids);¤				createTerm(result, GardocExtractor.GAR_FIELD_NAME_SORT_PAGE_ID, idsList);¤			}¤			¤			Logs.LOG_W("SearchUvsQuery::execute::" + ((isUvs)?"поиск образов":"поиск карточек"));¤			¤			TopDocs matches = null;¤			if(isUvs && ¤					(¤							StringUtils.isNotEmpty(getExecutors()) || ¤							StringUtils.isNotEmpty(getHistoryState()) || ¤							(¤									StringUtils.isNotEmpty(getHistoryBeginDate()) &&¤									StringUtils.isNotEmpty(getHistoryEndDate())¤							)¤					)¤			){¤				IndexReader r = ((IndexSearcher)searcher).getIndexReader();¤				final Set<String> fields = (Set<String>)r.getFieldNames(FieldOption.ALL);¤				int maxVersion = -1;¤				for (String f : fields) {¤					if (f.startsWith("HISTORY_VERSION.")) {¤						final String val = f.split("[.]")[2];¤						final Integer valAsInt = Integer.valueOf(val);¤						if (valAsInt > maxVersion) {¤							maxVersion = valAsInt;¤						}¤					}¤				}¤				¤				BooleanQuery history = new BooleanQuery();¤				for (int i = 0; i <= maxVersion; i++) {¤					final List<Query> queries = new ArrayList<Query>();¤					if (StringUtils.isNotEmpty(getExecutors())) {¤						final String[] values = getExecutors().split("[ ]");¤						if (values.length == 1) {¤							queries.add(new TermQuery(new Term("HISTORY_VERSION.E."+i, values[0])));¤						} else {¤							BooleanQuery bq = new BooleanQuery();¤							for (String v : values) {¤								bq.add(new TermQuery(new Term("HISTORY_VERSION.E."+i, v)), Occur.SHOULD);¤							}¤							queries.add(bq);¤						}¤					}¤					¤					if (StringUtils.isNotEmpty(getHistoryState())) {¤						final String[] values = getHistoryState().split("[ ]");¤						if (values.length == 1) {¤							queries.add(new TermQuery(new Term("HISTORY_VERSION.S."+i, values[0])));¤						} else {¤							BooleanQuery bq = new BooleanQuery();¤							for (String v : values) {¤								bq.add(new TermQuery(new Term("HISTORY_VERSION.S."+i, v)), Occur.SHOULD);¤							}¤							queries.add(bq);¤						}¤					}¤					¤					final String newBeginDate = convertDate(getHistoryBeginDate());¤					final String newEndDate = convertDate(getHistoryEndDate());¤					if (StringUtils.isNotEmpty(newBeginDate) || StringUtils.isNotEmpty(newEndDate)) {¤						final String begin = StringUtils.isBlank(newBeginDate) ? "19700101": newBeginDate;¤						final String end = StringUtils.isBlank(newEndDate) ? new SimpleDateFormat("yyyyMMdd").format(new Date()): newEndDate;¤						queries.add(new TermRangeQuery("HISTORY_VERSION.D."+i, begin, end, true, true));¤					}¤					¤					if (queries.size() == 1) {¤						history.add(queries.get(0), Occur.SHOULD);¤					} else {¤						final BooleanQuery bq = new BooleanQuery();¤						for (Query q : queries) {¤							bq.add(q, Occur.MUST);¤						}¤						history.add(bq, Occur.SHOULD);¤					}¤				}¤				¤				¤				result.add(history, Occur.MUST);¤				¤				if(sorter_ != null){¤					matches = searcher.search(result, null, numItems_+startIndex_, sorter_);¤				}else{¤					matches = searcher.search(result, null, numItems_+startIndex_);¤				}¤				¤				//test¤				//matches = searcher.search(history, null, numItems_+startIndex_);				¤			} else {¤				if(sorter_ != null){¤					matches = searcher.search(result, null, numItems_+startIndex_, sorter_);¤				}else{¤					matches = searcher.search(result, null, numItems_+startIndex_);¤				}¤			}¤¤			totalHits_ = matches.totalHits;¤			allCount = matches.scoreDocs.length;¤			searchedDocs.ensureCapacity(startIndex_ + numItems_);¤			int count = matches.scoreDocs.length;¤			if(count > (startIndex_ + numItems_)){¤				count = startIndex_ + numItems_;¤			}¤			¤			for (int i = startIndex_; i < count; i++) {¤				int docId = matches.scoreDocs[i].doc;¤				final Document doc = searcher.doc(docId);¤				¤				final String handle = doc.get(BaseDocumentBuilder.FieldName.HANDLE);¤				final HibernateHandle hh = new HibernateHandle(handle);¤				long id = hh.getId();¤				searchedDocs.add(id);¤			}¤			¤			¤			} finally {¤				if (searcher != null) {¤					searcher.close();¤				}¤			}¤		}¤		¤		public void createTerm(BooleanQuery result, String field, String value){¤			if(StringUtils.isNotEmpty(value)){¤				TermQuery termquery = new TermQuery(new Term(field, value));¤				result.add(new BooleanClause(termquery, Occur.MUST));¤			}¤		}¤		¤		public void createWildTerm(BooleanQuery result, String field, String value){¤			if(StringUtils.isNotEmpty(value)){¤				WildcardQuery termquery = new WildcardQuery(new Term(field, value));¤				result.add(new BooleanClause(termquery, Occur.MUST));¤			}¤		}¤¤		public void createAllMustTerm(BooleanQuery result, String field, List values){¤			createTerm(result, field, values, Occur.MUST, Occur.MUST);¤		}¤¤		public void createNotTerm(BooleanQuery result, String field, List values){¤			createTerm(result, field, values, Occur.SHOULD, Occur.MUST_NOT);¤		}¤¤		public void createTerm(BooleanQuery result, String field, List values){¤			createTerm(result, field, values, Occur.SHOULD, Occur.MUST);¤			¤		}¤		¤		public void createTerm(BooleanQuery result, String field, List values, Occur occur, Occur occurAll){¤			if(values != null && values.size() > 0){¤				BooleanQuery clause = new BooleanQuery();¤				for(Object object : values){¤					String value = String.valueOf(object);¤					TermQuery termquery = new TermQuery(new Term(field, value));¤					clause.add(new BooleanClause(termquery, occur));¤				}¤				result.add(new BooleanClause(clause, occurAll));¤			}¤		}¤¤		public void createRangeQueryTerm(BooleanQuery result, String field, String dateFrom, String dateTo, String rangePredefined){¤			if(¤					StringUtils.isNotEmpty(dateFrom) || ¤					StringUtils.isNotEmpty(dateTo) ¤			){¤				Query termquery = new RangeQuery(new Term(field, dateFrom), new Term(field, dateTo), true);¤				result.add(new BooleanClause(termquery, Occur.MUST));¤			}¤		}¤		¤¤		private String executors_ = null;¤		¤		public String getExecutors(){¤			if(executors_ == null){¤	 			StringBuffer executors = new StringBuffer();¤				if(AssignedToInVersionsAsValues.PREVIOUS_ASSIGNED_TO.name().equals(getForm().getRadioAssignedTo())){¤					for(String executor : DpoUvsHelper.extractAssignedTo(getForm().getAssignedTo(), getForm().getAllAssignedTo(), getForm().getAssignedToType())){¤						executors.append(executor + " ");¤					}¤					if(executors.length() > 0){¤						executors_ = executors.toString().trim();¤					}¤				}¤			}¤			return executors_;¤		}¤		¤		public String getHistoryState(){¤			return getForm().getHistoryState();¤		}¤		¤		public String getHistoryBeginDate(){¤			return getForm().getHistoryBeginDate();¤		}¤		¤		public String getHistoryEndDate(){¤			return getForm().getHistoryEndDate();¤		}¤¤		public String getInstancy(){¤			String isConnected = null;¤			if(getForm().getInstancyUnknown()){¤				isConnected = String.valueOf(DpoUvsHelper.instancyTypesToByte(InstancyTypes.UNKNOWN));¤			}else if(getForm().getInstancyOrdinary()){	¤				isConnected = String.valueOf(DpoUvsHelper.instancyTypesToByte(InstancyTypes.ORDINARY));¤			}else if(getForm().getInstancyQuickly()){¤				isConnected = String.valueOf(DpoUvsHelper.instancyTypesToByte(InstancyTypes.QUICKLY));¤			}else if(getForm().getInstancyInVersion()){¤				isConnected = String.valueOf(DpoUvsHelper.instancyTypesToByte(InstancyTypes.IN_VERSION));¤			}¤			return isConnected;¤		}¤¤	}¤	¤	public boolean isUvsQuery(){¤		String messageAnyDate = Messages.Factory.messages().get(BaseSearchForm.DATE_RANGE_PREDEFINED_ANYDATE);¤		String messageCustom = Messages.Factory.messages().get(BaseSearchForm.DATE_RANGE_PREDEFINED_CUSTOM);¤		boolean notCustomOrHasDateForDateRangeFlag = ¤				messageCustom.equals(getForm().getDateRangePredefined()) == false ¤				|| StringUtils.isNotEmpty(getForm().getDateFrom()) ¤				|| StringUtils.isNotEmpty(getForm().getDateTo());¤		boolean notCustomOrHasDateForSendInUORangeFlag = ¤				messageCustom.equals(getForm().getSendInUoDateRangePredefined()) == false ¤				|| StringUtils.isNotEmpty(getForm().getSendInUoDateFrom()) ¤				|| StringUtils.isNotEmpty(getForm().getSendInUoDateTo());¤		boolean notCustomOrHasDateForWaitingFromOGVRangeFlag = ¤				messageCustom.equals(getForm().getWaitingFromOgvDateRangePredefined()) == false ¤				|| StringUtils.isNotEmpty(getForm().getWaitingFromOgvDateFrom()) ¤				|| StringUtils.isNotEmpty(getForm().getWaitingFromOgvDateTo());¤		if(¤				getForm().getAssignedTo().size() > 0 ||¤				getForm().getCurrentStateLabels().size() > 0 ||¤				(StringUtils.isNotEmpty(getForm().getCurrentState()) && getForm().getCurrentState().equals(LabelGroupName.LIFE_CYCLE_STATE_ALL.name()) == false) ||¤				(StringUtils.isNotEmpty(getForm().getDateRangePredefined()) ¤						&& getForm().getDateRangePredefined().equals(messageAnyDate) == false ¤						&& notCustomOrHasDateForDateRangeFlag ¤				) ||¤				(StringUtils.isNotEmpty(getForm().getSendInUoDateRangePredefined()) ¤						&& getForm().getSendInUoDateRangePredefined().equals(messageAnyDate) == false ¤						&& notCustomOrHasDateForSendInUORangeFlag¤				) ||¤				(StringUtils.isNotEmpty(getForm().getWaitingFromOgvDateRangePredefined()) ¤						&& getForm().getWaitingFromOgvDateRangePredefined().equals(messageAnyDate) == false ¤						&& notCustomOrHasDateForWaitingFromOGVRangeFlag¤				) || ¤				getForm().getUoQueryActive() == true ||¤				getForm().getUoCurrentDocActive() == true ||¤				getForm().getUvsCurrentDocActive() == true ||¤				getForm().getRpQueryActive() == true ||¤				getForm().getAuthors().size() > 0 ||¤				getForm().getSelectedUserPropertyLabels().size() > 0 ||¤				getForm().getExcludedUserPropertyLabels().size() > 0 ||¤				StringUtils.isNotEmpty(getForm().getHistoryState()) ||¤				StringUtils.isNotEmpty(getForm().getHistoryBeginDate()) ||¤				StringUtils.isNotEmpty(getForm().getHistoryEndDate()) ||¤				getForm().getSources() != null && getForm().getSources().size() > 0 ||¤				(StringUtils.isNotEmpty(getForm().getCopies()) && DpoUvsHelper.MESSAGES_FOR_SPECIFY_SEARCH_BY_COPIES[0].equals(getForm().getCopies()) == false) ||¤				getForm().getManagerCommands().size() > 0¤				¤		){¤			return true;¤		}¤		return false;¤	}¤¤	public boolean isDocCard(boolean isUvs){¤		if(isUvs){¤			return false;¤		}¤		String messageAnyDate = Messages.Factory.messages().get(BaseSearchForm.DATE_RANGE_PREDEFINED_ANYDATE);¤		String messageCustom = Messages.Factory.messages().get(BaseSearchForm.DATE_RANGE_PREDEFINED_CUSTOM);¤		boolean notCustomOrHasDateForDocumentDateRangeFlag = ¤				messageCustom.equals(getForm().getDocumentDateRangePredefined()) == false ¤				|| StringUtils.isNotEmpty(getForm().getDocumentBeginDate()) ¤				|| StringUtils.isNotEmpty(getForm().getDocumentEndDate());¤		boolean notCustomOrHasDateForRegistrationDateRangeFlag = ¤				messageCustom.equals(getForm().getRegistrationDateRangePredefined()) == false ¤				|| StringUtils.isNotEmpty(getForm().getRegistrationBeginDate()) ¤				|| StringUtils.isNotEmpty(getForm().getRegistrationEndDate());¤		if(¤			getForm().getTopic() > 0 ||¤			getForm().getDocIssuer().size() > 0 ||¤			(StringUtils.isNotEmpty(getForm().getDocumentDateRangePredefined()) ¤					&& messageAnyDate.equals(getForm().getDocumentDateRangePredefined()) == false ¤					&& notCustomOrHasDateForDocumentDateRangeFlag¤			) ||¤			StringUtils.isNotEmpty(getForm().getDocumentNumber()) ||¤			(StringUtils.isNotEmpty(getForm().getRegistrationDateRangePredefined()) ¤					&& messageAnyDate.equals(getForm().getRegistrationDateRangePredefined()) == false¤					&& notCustomOrHasDateForRegistrationDateRangeFlag¤			) ||¤			StringUtils.isNotEmpty(getForm().getRegistrationNumber()) ||¤			getForm().getDocumentType().size() > 0 ||¤			StringUtils.isNotEmpty(getForm().getInternet()) ||¤			StringUtils.isNotEmpty(getForm().getBlocks()) ||¤			getForm().getRestrictedStatus() > 0 ||¤			getForm().getInstancyUnknown() || getForm().getInstancyInVersion() || getForm().getInstancyOrdinary() || getForm().getInstancyQuickly() ||¤			getForm().getStatusUnknown() || getForm().getStatusIsConnected() || getForm().getStatusIsConnectedInVersion() || getForm().getStatusIsNotConnected()¤		){¤			return true;¤		}¤		return false;¤	}¤	¤	public GardocResult doInternalSearchResult(int startIndex, int numItems, Sort sorter) throws Exception {¤		GardocResult result = new GardocResult();¤		result.setNumItems(numItems);¤		result.setStartIndex(startIndex);¤		result.setSorter(sorter);¤		result.execute();¤		return result;¤	}¤	¤	public String executeForNewSearch (int countOnEachPage) throws Exception {¤		long startH = System.currentTimeMillis();¤		¤		if(StringUtils.isNotEmpty(getSelectedItems())){¤			getForm().setSelectedItems(getSelectedItems());¤		}¤		¤		if(getForm().getCopies() == null){¤			getForm().setCopies("searchgroup.with.copies.not.important");¤		}¤		¤		if(!getForm().getCopies().equals("searchgroup.with.copies.not.important")){¤			setColumns(new SearchUvsQuerySpecifedByCopiesColumnList(getSearchResultType()));¤		}else{¤			setColumns(new SearchUvsQueryColumnList(getSearchResultType()));¤		}¤		if(getPaginationSupport() == null){¤			PaginationSupport ps = new PaginationSupport(100);¤			ps.setStartIndex(getStartIndex());¤			ps.setPageSize(countOnEachPage);¤			ps.setTotal(100);¤			setPaginationSupport(ps);¤		}¤		initBatchHelper();¤	¤		Sort sorter = new Sort(new SortField(GardocExtractor.GAR_FIELD_NAME_SORT_PAGE_ID, SortField.INT, false));¤		¤		GardocResult gdr = doInternalSearchResult(getStartIndex(), countOnEachPage, sorter);¤		List<Page> pages = new ArrayList<Page>();¤		if(gdr.totalHits_ > 0){¤			int count = gdr.numItems_;¤			if(gdr.totalHits_ < gdr.numItems_){¤				count = gdr.totalHits_;¤			}else if((gdr.totalHits_ - gdr.startIndex_) < gdr.numItems_){¤				count = gdr.totalHits_ - gdr.startIndex_;¤			}¤			for(int i = 0; i < count; i++){¤				long searched = gdr.searchedDocs.get(i).longValue();¤				Page page = ContainerManager.Factory.get().getPageManager().getPage(searched);¤				pages.add(page);¤			}¤			setSearchResult(pages);¤		}¤		getPaginationSupport().setTotal(gdr.totalHits_);¤		getPaginationSupport().setStartIndex(gdr.startIndex_);¤		long resH = System.currentTimeMillis() - startH;¤		Logs.LOG_D("FINISH SearchUvsQuery execute in " + resH + "ms");¤¤		return SUCCESS;¤	}¤	¤	public String executeForOldHibernateSearch () throws Exception {¤		long startH = System.currentTimeMillis();¤		if (!StringUtils.isEmpty(search_) && initialized_) {¤			setStartIndex(0);¤			setSearchQuery(createSearchQuery(createQueryData()));¤		}¤		¤		if(getSearchQueryData() != null) {¤			getForm().setSearchQueryData(getSearchQueryData());¤		}¤		if(getForm().getCopies() == null){¤			getForm().setCopies("searchgroup.with.copies.not.important");¤		}¤		¤		if(!getForm().getCopies().equals("searchgroup.with.copies.not.important")){¤			setColumns(new SearchUvsQuerySpecifedByCopiesColumnList(getSearchResultType()));¤		}else{¤			setColumns(new SearchUvsQueryColumnList(getSearchResultType()));¤		}¤		if(getSearchQueryData() != null){¤			getSearchQueryData().setSortingConditions(new ArrayList<SortingCondition>());¤			getSearchQueryData().addSortingCondition(SortingCondition.Factory.make(RequestSortingType.PAGE_ID, false));¤			UvsQuerySearchQueryData rsqd = (UvsQuerySearchQueryData)getSearchQueryData();¤			rsqd.setCanBatchSearchUvsQuery(hasInitialBatch_);¤		}¤		String p = super.execute();¤		long resH = System.currentTimeMillis() - startH;¤		Logs.LOG_D("FINISH SearchUvsQuery execute in " + resH + "ms");¤¤		return p;¤	}	¤	¤	protected List<?> getFullSearchResult () throws SearchFailedException, IllegalResultStateException {¤		List<Object> result = new ArrayList<Object>();¤		try {¤			PaginationSupport oldPS = getPaginationSupport();¤			int startIndex = getStartIndex();¤			int countOnEachPage = getCountOnEachPage();¤			setPaginationSupport(new PaginationSupport(Short.MAX_VALUE));¤			setStartIndex(0);¤			setCountOnEachPage(Short.MAX_VALUE);¤			executeForNewSearch(Short.MAX_VALUE);¤			setPaginationSupport(oldPS);¤			setStartIndex(startIndex);¤			setCountOnEachPage(countOnEachPage);¤			result = (List<Object>)getSearchResult();¤		} catch (Exception e) {¤			Logs.LOG_SEX(e);¤		}¤		return result;¤	}¤¤	private String responseContent = null;¤	¤	public String getResponseContent() {¤		return responseContent;¤	}¤	¤	public String getTopics() throws SearchFailedException, IllegalResultStateException {¤		List<Object> results = (List<Object>)getFullSearchResult ();¤		String docIds = "";		¤		String reqIds = "";¤¤		String topics = "";¤		if(results != null){¤			for(Object result : results){¤				if(result instanceof Page){¤					Page page = (Page) result;¤					long pageId = page.getId();¤					if(page.getTitle().contains("DPOUVS")){¤						if(StringUtils.isNotEmpty(reqIds)){¤							reqIds += ", ";¤						}¤						reqIds += pageId;¤					}else{¤						if(StringUtils.isNotEmpty(docIds)){¤							docIds += ", ";¤						}¤						docIds += pageId;¤					}¤				}¤			}¤			if(StringUtils.isNotEmpty(docIds) || StringUtils.isNotEmpty(reqIds)){¤				topics = DpoUvsHelper.listToString(getTopics(docIds, reqIds));¤			}¤		}¤		responseContent = topics;¤		return SUCCESS;¤	}¤	¤	private List<String> getTopics(String docIds, String reqIds){¤		List res = new ArrayList<String>();¤		try{¤			String sQuery = "select r.gardoc.topic from UVSQuestDAO r where ";¤			if(StringUtils.isNotEmpty(docIds)){¤				sQuery += "r.gardoc.id in (" + docIds + ") ";¤			}¤			if(StringUtils.isNotEmpty(docIds) && StringUtils.isNotEmpty(reqIds)){¤				sQuery += "and ";¤			}¤			if(StringUtils.isNotEmpty(reqIds)){¤				sQuery += "r.id in (" + reqIds + ") ";¤			}¤			sQuery += "and r.gardoc.topic > 0 group by r.gardoc.topic";¤			net.sf.hibernate.Query q = ContainerManager.Factory.get().getSession().createQuery(sQuery);¤			res = q.list();¤		}catch(Exception ex){¤			Logs.LOG_SEX(ex);¤		}¤		return res;¤	}¤	¤	public String getResultColumnsInformation() throws SearchFailedException, IllegalResultStateException{¤		Set<Long> requestIds = getAllRequestIdsInMap();¤		String result = "";¤		for(long reqId : requestIds){¤			if(StringUtils.isNotEmpty(result)){¤				result += ",";¤			}¤			result += reqId;¤		}¤		return result;¤	}¤	¤	@Override¤	public void loadAllRequestsInMap (final String ids) {¤		if(StringUtils.isEmpty(ids)){¤			return;¤		}	¤		final String sQuery = "select req from UVSQuestDAO as req "¤			+ "where req.id in (" + ids + ") " ¤			+ "and  req.page.contentStatus='current' and req.page.originalVersion is null "¤			+ "order by req.id asc";¤		net.sf.hibernate.Query q;¤		try {¤			q = getCurrentSession().createQuery(sQuery);¤			List<UVSQuestDAO> requests = q.list();¤			for(UVSQuestDAO request : requests){¤				if(request != null){¤					requests_.put(request.getId(), UVSQuery.Factory.get(request.getId()));¤				}¤			}¤			¤			loadGardocs (ids);¤		} catch (HibernateException e) {¤			Logs.LOG_SEX(e);¤		}		¤	}¤	¤	private void loadGardocs (final String ids) {¤		if(StringUtils.isEmpty(ids)){¤			return;¤		}	¤		final String sQuery = "select req from UVSQuestDAO as req "¤			+ "where req.gardoc.id in (" + ids + ") " ¤			+ "and  req.page.contentStatus='current' and req.page.originalVersion is null "¤			+ "order by req.id asc";¤		net.sf.hibernate.Query q;¤		try {¤			q = getCurrentSession().createQuery(sQuery);¤			List<UVSQuestDAO> requests = q.list();¤			for(UVSQuestDAO request : requests){¤				if(request != null){¤					requests_.put(request.getId(), UVSQuery.Factory.get(request.getId()));¤				}¤			}¤		} catch (HibernateException e) {¤			Logs.LOG_SEX(e);¤		}¤	}¤	¤¤	public Set<Long> getAllRequestIdsInMap () {¤		return requests_.keySet();¤	}¤	¤	public void initBatchHelper(){¤		UvsQuerySearchQueryData uqsqd = UvsQuerySearchQueryData.Factory.make();¤		uqsqd.setExecutors(getForm().getAssignedTo());¤¤		if(getSearchQueryData() != null){¤			getBatchHelper().init(getSearchQueryData());¤		}else{¤			getBatchHelper().init(uqsqd);¤		}¤		//делаем заточку чтоб показывался блок групповых операций, т.к. он показывается только если пользователь может менять атрибуты запроса в 1 спейсе¤		if(StringUtils.isNotEmpty(getSpaceKeys())){¤			String[] sk = getSpaceKeys().split(",");¤			List<String> spaceKeysList = Arrays.asList(sk);¤			getBatchHelper().setSpaceKeys(spaceKeysList);¤			uqsqd.setSpaces(spaceKeysList);¤		}¤	}¤	¤	public String doBatchOperation() throws Exception {¤		try {¤			initBatchHelper();¤			if (getBatchHelper().shouldExecuteBatch()) {¤				//делаем в отдельной транзакции каждый запрос по id-шникам¤				getBatchHelper().executeBatch(getSelectionHelper().getRequestIds(), getSelectionHelper().getCurrentSelectedRequestIds());¤			}¤			¤			new TransactionDecorator(true).doInNewTransaction(new DoInNewTransactionCallback() {¤				public void execute() {¤					try {¤						executeForNewSearch(getCountOnEachPage());¤					} catch (Exception e) {¤						Logs.LOG_SEX(e);¤					}¤				}¤			});	¤		} catch (Exception e) {¤			Logs.LOG_SEX(e);¤		}¤		return SUCCESS;¤	}¤	¤	//#UC END# *4C7B5C0402FD_CUSTOM_METHODS_AND_DATA*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"WikiPageID (wiki)"
		    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/SearchUvsQuery|4C7B5C0402FD
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (wiki)"
		    value      	"wiki")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"20609549890")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"DerivedImplement"
		    value      	"{}")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"DerivedOverload"
		    value      	"{}")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ImplementSelectType"
		    value      	"all")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"OverloadSelectType"
		    value      	"include"))
	    quid       	"4C7B5C0402FD"
	    documentation 	"action для обработки панели поиска"
	    stereotype 	"KActionPlugin"
	    superclasses 	(list inheritance_relationship_list
		(object Inheritance_Relationship
		    quid       	"4C7B5C4A0371"
		    supplier   	"Logical View::MDProcess::ConfluenceMDChange::ReportSupport::ListRequest"
		    quidu      	"4745321903C6"))
	    used_nodes 	(list uses_relationship_list
		(object Uses_Relationship
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"20609561025"))
		    quid       	"4C7CC7350077"
		    stereotype 	"uses"
		    supplier   	"Logical View::MDProcess::DocCardChange::DocCardSupport::UvsQueryDataProvider"
		    quidu      	"4C7CC70102E7")
		(object Uses_Relationship
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"20609562282"))
		    quid       	"4C85D6CD0328"
		    stereotype 	"uses"
		    supplier   	"Logical View::MDProcess::DocCardChange::DocCardSupport::SearchUvsQueryColumnList"
		    quidu      	"4C85D5C40369")
		(object Uses_Relationship
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"20609563532"))
		    quid       	"4C88D18F03AD"
		    stereotype 	"uses"
		    supplier   	"Logical View::MDProcess::DocCardChange::DocCardSupport::SearchUvsQuerySpecifedByCopiesColumnList"
		    quidu      	"4C88D0EB023F")
		(object Uses_Relationship
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"12335802688")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false"))
		    quid       	"4CADA0B60389"
		    stereotype 	"uses"
		    supplier   	"Logical View::MDProcess::DocCardChange::DocCardSupport::SearchUvsQueryForm::AssignedToInVersionsAsValues"
		    quidu      	"4CAD9E51036F"))
	    realized_interfaces 	(list realize_rel_list
		(object Realize_Relationship
		    quid       	"4C7B5C3702B5"
		    supplier   	"Logical View::external::ConfluenceSupport::com.opensymphony.xwork::Preparable"
		    quidu      	"4A8E4F9B0196"))
	    operations 	(list Operations
		(object Operation "execute"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ResolvedTypeGuid"
			    value      	"3DBFFE240068")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4C7B67300110*"
			    value      	(value Text 
|//#UC START# *4C7B67300110*¤		if (!StringUtils.isEmpty(getProcessor())) {¤			processSearchResult(getProcessor());¤			Logs.LOG_W("ListRequest::doExecute::результаты видимые, скрытые, все, не все");¤		}¤¤		return executeForNewSearch(getCountOnEachPage());¤//		return executeForOldHibernateSearch();¤		//#UC END# *4C7B67300110*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"GetRaises"
			    value      	"47720AA401AF")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"20609554037"))
		    quid       	"4C7B67300110"
		    documentation 	"поиск запросов "
		    result     	"string"
		    concurrency 	"Sequential"
		    opExportControl 	"Public"
		    uid        	0
		    quidu      	"3DBFFE240068")
		(object Operation "initialize"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ResolvedTypeGuid"
			    value      	"3DBFFE100240")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4C7B675803C4*"
			    value      	(value Text 
|//#UC START# *4C7B675803C4*¤		boolean result = false;¤		¤		getForm().setReportType("");¤		¤		if(StringUtils.isEmpty(getForm().getWordsToSearch()))¤			getForm().setWordsToSearch("");¤		else¤			result = true;¤		¤		getForm().setSearchInHeaders(true);¤		getForm().setSearchInText(true);¤		getForm().setCurrentState(LabelGroupName.LIFE_CYCLE_STATE_ALL.name());¤		getForm().setAssignedToType(AssignedToTypeValues.ASSIGNED_TO_TYPE_ALL.name());¤		if(StringUtils.isEmpty(getForm().getDateRangePredefined())){¤			getForm().setDateRangePredefined(Messages.Factory.messages().get(BaseSearchForm.DATE_RANGE_PREDEFINED_ANYDATE));¤		}¤		getForm().setSendInUoDateRangePredefined (Messages.Factory.messages().get(BaseSearchForm.DATE_RANGE_PREDEFINED_ANYDATE));¤		getForm().setWaitingFromOgvDateRangePredefined(Messages.Factory.messages().get(BaseSearchForm.DATE_RANGE_PREDEFINED_ANYDATE));¤		getForm().setGardocDateRangePredefined(Messages.Factory.messages().get(BaseSearchForm.DATE_RANGE_PREDEFINED_ANYDATE));¤		getForm().setRegistrationDateRangePredefined(Messages.Factory.messages().get(BaseSearchForm.DATE_RANGE_PREDEFINED_ANYDATE));¤		getForm().setRadioAssignedTo(AssignedToInVersionsAsValues.CURRENT_ASSIGNED_TO.name());¤¤		getForm().setAuthorType(AuthorTypeValues.AUTHOR_TYPE_ALL.name());¤		getForm().setAuthorIsCreator(true);¤		getForm().setAuthorIsLastModifier(true);¤		¤		if(StringUtils.isNotEmpty(getSelectedItems())){¤			getForm().setSelectedItems(getSelectedItems());¤			result=true;¤			search_="Искать";¤			setSearchResultType_("uvs_query");¤		}else if(getDocIssuer() > 0){¤			List docIssuers = Arrays.asList(String.valueOf(getDocIssuer()));¤			getForm().setDocIssuer(docIssuers);¤			result=true;¤			search_="Искать";¤			setSearchResultType_("uvs_query");¤		}¤		hasInitialBatch_ = true;¤		return result;¤		//#UC END# *4C7B675803C4*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"20609554987"))
		    quid       	"4C7B675803C4"
		    documentation 	"инициализация полей поиска"
		    stereotype 	"chg"
		    result     	"boolean"
		    concurrency 	"Sequential"
		    opExportControl 	"Private"
		    uid        	0
		    quidu      	"3DBFFE100240")
		(object Operation "SearchUvsQuery"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"final")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4C7B6779004A_BODY*"
			    value      	(value Text 
|//#UC START# *4C7B6779004A_BODY*¤		setBatchHelper(new RequestBatchHelper());¤		//#UC END# *4C7B6779004A_BODY*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"20609555992"))
		    quid       	"4C7B6779004A"
		    documentation 	"конструктор"
		    stereotype 	"ctor"
		    concurrency 	"Sequential"
		    opExportControl 	"Public"
		    uid        	0)
		(object Operation "create_search_query"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ResolvedTypeGuid"
			    value      	"474D3E2201B2")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"GetRaises"
			    value      	"474D6B430053")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4C7B679F0270*"
			    value      	(value Text 
|//#UC START# *4C7B679F0270*¤		SearchQuery searchQuery = SearchQuery.Factory.make(queryData, 10);¤		return searchQuery;¤		//#UC END# *4C7B679F0270*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"20609556948"))
		    quid       	"4C7B679F0270"
		    documentation 	"создание search query"
		    parameters 	(list Parameters
			(object Parameter "query_data"
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ResolvedTypeGuid"
				    value      	"474C22A90245")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ElementCreationOrder"
				    value      	"20609557864"))
			    quid       	"4C7B67A600B0"
			    type       	"SearchQueryData"
			    quidu      	"474C22A90245"))
		    result     	"SearchQuery"
		    concurrency 	"Sequential"
		    opExportControl 	"Private"
		    uid        	0
		    quidu      	"474D3E2201B2")
		(object Operation "is_search_block_collapsed"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ResolvedTypeGuid"
			    value      	"3DBFFE100240")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4C7B67BF0012*"
			    value      	(value Text 
|//#UC START# *4C7B67BF0012*¤		String collapsedIdsStr = getCollapsedSearchBlockIds();¤		String[] collapsedIds = !StringUtils.isEmpty(collapsedIdsStr) ? collapsedIdsStr.split(",")¤				: new String[0];¤		return ArrayUtils.contains(collapsedIds, id);¤		//#UC END# *4C7B67BF0012*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"20609558490"))
		    quid       	"4C7B67BF0012"
		    documentation 	"свернуто ли поле"
		    parameters 	(list Parameters
			(object Parameter "id"
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ResolvedTypeGuid"
				    value      	"3DBFFE240068")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ElementCreationOrder"
				    value      	"20609559407"))
			    quid       	"4C7B67C0030C"
			    type       	"string"
			    quidu      	"3DBFFE240068"))
		    result     	"boolean"
		    concurrency 	"Sequential"
		    opExportControl 	"Public"
		    uid        	0
		    quidu      	"3DBFFE100240")
		(object Operation "create_query_data"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ResolvedTypeGuid"
			    value      	"474C22A90245")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4C7CBDD9028E*"
			    value      	(value Text 
|//#UC START# *4C7CBDD9028E*¤		UvsQuerySearchQueryData queryData = UvsQuerySearchQueryData.Factory.make();¤		queryData.setRequestSearchQueryResultType(getSearchResultType());¤		¤		UvsQueryDataProvider dataProvider = new UvsQueryDataProvider(queryData, getForm());¤		dataProvider.setData();¤		return dataProvider.getQueryData();¤		//#UC END# *4C7CBDD9028E*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"20609560027"))
		    quid       	"4C7CBDD9028E"
		    documentation 	"создания query data"
		    result     	"SearchQueryData"
		    concurrency 	"Sequential"
		    opExportControl 	"Private"
		    uid        	0
		    quidu      	"474C22A90245")
		(object Operation "is_show_information_can_batch"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"1322119185675920")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ResolvedTypeGuid"
			    value      	"3DBFFE100240")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4ECDF011028F*"
			    value      	(value Text 
|//#UC START# *4ECDF011028F*¤		if(getSearchQueryData() == null){¤			return true;¤		}¤		UvsQuerySearchQueryData rsqd = (UvsQuerySearchQueryData)getSearchQueryData();¤		return !rsqd.getCanBatchSearchUvsQuery();¤		//#UC END# *4ECDF011028F*
			    )))
		    quid       	"4ECDF011028F"
		    documentation 	"показать информацию для групповых операций"
		    result     	"boolean"
		    concurrency 	"Sequential"
		    opExportControl 	"Public"
		    uid        	0
		    quidu      	"3DBFFE100240"))
	    class_attributes 	(list class_attribute_list
		(object ClassAttribute "initialized"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"final")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ValueInitialized"
			    value      	"true")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ResolvedTypeGuid"
			    value      	"3DBFFE100240")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4C7B66DC03AC_GET_ACCESSOR*"
			    value      	(value Text 
|//#UC START# *4C7B66DC03AC_GET_ACCESSOR*¤		return initialized_;¤		//#UC END# *4C7B66DC03AC_GET_ACCESSOR*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4C7B66DC03AC_SET_ACCESSOR*"
			    value      	(value Text 
|//#UC START# *4C7B66DC03AC_SET_ACCESSOR*¤		initialized_ = initialized;¤		//#UC END# *4C7B66DC03AC_SET_ACCESSOR*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"20609550753"))
		    quid       	"4C7B66DC03AC"
		    stereotype 	"property"
		    type       	"boolean"
		    quidu      	"3DBFFE100240"
		    initv      	"false"
		    exportControl 	"Public"
		    Containment 	"By Value")
		(object ClassAttribute "search"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"final")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ValueInitialized"
			    value      	"true")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ResolvedTypeGuid"
			    value      	"3DBFFE240068")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4C7B6708024B_GET_ACCESSOR*"
			    value      	(value Text 
|//#UC START# *4C7B6708024B_GET_ACCESSOR*¤		return search_;¤		//#UC END# *4C7B6708024B_GET_ACCESSOR*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4C7B6708024B_SET_ACCESSOR*"
			    value      	(value Text 
|//#UC START# *4C7B6708024B_SET_ACCESSOR*¤		search_ = search;¤		//#UC END# *4C7B6708024B_SET_ACCESSOR*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"20609552386"))
		    quid       	"4C7B6708024B"
		    documentation 	"содержит непустую строку, если нажата клавиша поиска"
		    stereotype 	"property"
		    type       	"string"
		    quidu      	"3DBFFE240068"
		    initv      	"EMPTY_STR"
		    exportControl 	"Public"
		    Containment 	"By Value")
		(object ClassAttribute "selected_items"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"83855656089")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"final")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ValueInitialized"
			    value      	"true")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ResolvedTypeGuid"
			    value      	"3DBFFE240068")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4E4D0A3001E5_GET_ACCESSOR*"
			    value      	(value Text 
|//#UC START# *4E4D0A3001E5_GET_ACCESSOR*¤		return selectedItems_;¤		//#UC END# *4E4D0A3001E5_GET_ACCESSOR*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4E4D0A3001E5_SET_ACCESSOR*"
			    value      	(value Text 
|//#UC START# *4E4D0A3001E5_SET_ACCESSOR*¤		selectedItems_ = selectedItems;¤		//#UC END# *4E4D0A3001E5_SET_ACCESSOR*
			    )))
		    quid       	"4E4D0A3001E5"
		    stereotype 	"property"
		    type       	"string"
		    quidu      	"3DBFFE240068"
		    exportControl 	"Public"
		    Containment 	"By Value")
		(object ClassAttribute "doc_issuer"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"1409219969777670")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ValueInitialized"
			    value      	"true")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ResolvedTypeGuid"
			    value      	"3DBFFD860205")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*53FEFD8102ED_GET_ACCESSOR*"
			    value      	(value Text 
|//#UC START# *53FEFD8102ED_GET_ACCESSOR*¤		return docIssuer_;¤		//#UC END# *53FEFD8102ED_GET_ACCESSOR*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*53FEFD8102ED_SET_ACCESSOR*"
			    value      	(value Text 
|//#UC START# *53FEFD8102ED_SET_ACCESSOR*¤		docIssuer_ = docIssuer;¤		//#UC END# *53FEFD8102ED_SET_ACCESSOR*
			    )))
		    quid       	"53FEFD8102ED"
		    stereotype 	"property"
		    type       	"long long"
		    quidu      	"3DBFFD860205"
		    exportControl 	"Public"
		    Containment 	"By Value"))
	    language   	"MDA Generator")
	(object Class "SearchUvsQueryForm"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/DocCardChange/DocCardSupport/SearchUvsQueryForm.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C7B6E4F001F_CUSTOM_IMPORT*"
		    value      	"//#UC START# *4C7B6E4F001F_CUSTOM_IMPORT*¤import ru.garant.MDProcess.ConfluencePlugins.SelectBoxPair;¤import ru.garant.MDProcess.ConfluencePlugins.Search.QueryLabelGroup;¤import ru.garant.MDProcess.ConfluencePlugins.SearchSupport.BaseSearchForm;¤import ru.garant.MDProcess.ConfluencePlugins.SearchSupport.BaseSearchSummaryBuilder;¤import ru.garant.MDProcess.DocCardChange.Entities.UVSStateMachine;¤import ru.garant.MDProcess.DocCardChange.DocCardChangeDAO.CopyDAO;¤import ru.garant.MDProcess.DocCardChange.DocCardChangeDAO.DocTypeDAO;¤import ru.garant.MDProcess.DocCardChange.DocCardCommon.DocCardManager;¤import ru.garant.MDProcess.DocCardChange.DocCardCommon.DpoUvsService;¤¤import ru.garant.MDProcess.ConfluenceMDChange.MdcCommon.RequestUserProperty;¤¤import ru.garant.shared.GCI.I18N.Messages;¤import ru.garant.MDProcess.ConfluenceMDChange.ReportSupport.SearchRequest.AssignedToTypeValues;¤¤import java.lang.reflect.Method;¤import java.text.SimpleDateFormat;¤import java.util.ArrayList;¤import java.util.Arrays;¤import java.util.Collections;¤import java.util.Date;¤import java.util.HashSet;¤import java.util.List;¤import java.util.Map;¤import java.util.Set;¤¤import javassist.Modifier;¤¤import javax.naming.directory.SearchControls;¤¤import org.apache.commons.lang.StringUtils;¤import org.reflections.Reflections;¤¤import ru.garant.MDProcess.ConfluenceMDChange.Requests.AbstractRequestLifeCycle.AbstractEvent;¤//#UC END# *4C7B6E4F001F_CUSTOM_IMPORT*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C7B6E4F001F_CUSTOM_CLASS_DEFINITION*"
		    value      	"//#UC START# *4C7B6E4F001F_CUSTOM_CLASS_DEFINITION*¤//#UC END# *4C7B6E4F001F_CUSTOM_CLASS_DEFINITION*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C7B6E4F001F_CUSTOM_METHODS_AND_DATA*"
		    value      	(value Text 
|//#UC START# *4C7B6E4F001F_CUSTOM_METHODS_AND_DATA*¤	protected BaseSearchSummaryBuilder getSearchSummaryBuilder() {¤		return new SearchUvsQuerySummaryBuilder(this);¤	}¤¤	protected java.util.Collection<SelectBoxPair> getAllAssignedTo (String type) {¤		return super.getAllAssignedTo(type);¤	}¤	¤	public static class OptionUIValue {¤		private String value_;¤		private String description_;¤¤		¤		OptionUIValue (String value, String description) {¤			value_ = value;¤			if (description.indexOf(":") > 0) {¤				description_ = description.substring(¤						description.indexOf(":")+2¤						, description.length()¤				);¤			} else {¤				description_ = description;¤			}¤		}¤		¤		public String getValue() {¤			return value_;¤		}¤		public String getDescription() {¤			return description_;¤		}¤	}¤	¤	private static List<AbstractEvent> sRejectedEvents = Collections.synchronizedList(Arrays.asList(¤		(AbstractEvent)UVSStateMachine.EV_DISCARDED_RESPONSE¤	));¤	¤	public List<OptionUIValue> getAllRejectedReasons () {¤		List<OptionUIValue> ret = new ArrayList<OptionUIValue> ();¤		¤		for (AbstractEvent ae : sRejectedEvents) {¤			ret.add(new OptionUIValue(ae.getGuid(), ae.getTitle()));¤		}¤		/*Collections.sort(ret, new Comparator<OptionUIValue> () {¤			public int compare (OptionUIValue a, OptionUIValue b) {¤				return a.getDescription().compareTo(b.getDescription());¤			}¤		});*/¤		return ret;¤	}¤¤	List<String> rejectedReason_ = new ArrayList<String> ();¤	public void setRejectedReason (List<String> rejectedReason) {¤		rejectedReason_ = rejectedReason;¤	}¤	¤	public List<String> getRejectedReason () {¤		return rejectedReason_;¤	}¤	¤	public List<String> getDAOIdForSelectedRejectedReason () {¤		List<String> ret = new ArrayList<String> ();¤		for (String s : getRejectedReason ()) {¤			for (AbstractEvent ae : sRejectedEvents) {¤				if (s.equals(ae.getGuid())) {¤					ret.add(ae.getClass().getName());¤					break;¤				}¤			}¤		}¤		return ret;¤	}¤	¤	private boolean containsListString(List<String> nameList, String title){¤		for(String name : nameList){¤			if(name.equals(title)){¤				return true;¤			}¤		}¤		return false;¤	}¤¤	protected List<RequestUserProperty> getRequestProps(){¤		return DpoUvsService.Factory.get().getAllRequestUserProperties();¤	}¤	¤	public String getHistoryState(){¤		return state_;¤	}¤	¤	public void setHistoryState(String state){¤		state_ = state;¤	}¤¤	public String getHistoryBeginDate(){¤		return beginDate_;¤	}¤	¤	public void setHistoryBeginDate(String beginDate){¤		beginDate_ = beginDate;¤	}¤¤	public String getHistoryEndDate(){¤		return endDate_;¤	}¤	¤	public void setHistoryEndDate(String endDate){¤		endDate_ = endDate;¤	}¤¤	public void setManagerCommands(List<String> managerCommands){¤		managerCommands_ = managerCommands;¤	}¤	¤	public List<String> getManagerCommands(){¤		return managerCommands_;¤	}¤¤	static private java.util.List<String> initManagerCommands () {¤		return new java.util.ArrayList<String> ();¤	}¤¤	public List<CopySourceItem> getCopiesSourcesItems(){¤		List<CopySourceItem> items = new ArrayList<CopySourceItem>();¤		try{¤			List<CopyDAO> copies = DpoUvsHelper.getAllCopiesSubclasses();¤			for(CopyDAO copy : copies){¤				CopySourceItem item = new CopySourceItem();¤				item.copyIdName_ = copy.getClass().getSimpleName();¤				item.copyText_ = copy.getSearchingPanelText();¤				if(getSources() != null){¤					for(String source : getSources()){¤						if(source.equals(copy.getClass().getSimpleName())){¤							item.isChecked_ = true;¤						}¤					}¤				}¤				items.add(item);¤			}¤		}catch(Exception ex){¤			Logs.LOG_SEX(ex);¤		}¤		return items;¤	}¤	¤	public class CopySourceItem{¤		private String copyIdName_;¤		public String getCopyIdName(){¤			return copyIdName_;¤		}¤		private String copyText_;¤		public String getCopyText(){¤			return copyText_;¤		}¤		private boolean isChecked_;¤		public boolean getIsChecked(){¤			return isChecked_;¤		}¤	}¤	¤	private List<String> managerCommands_ = initManagerCommands ();¤	private String state_ = null;¤	private String beginDate_ = null;¤	private String endDate_ = null;¤	//#UC END# *4C7B6E4F001F_CUSTOM_METHODS_AND_DATA*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"WikiPageID (wiki)"
		    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/SearchUvsQueryForm|4C7B6E4F001F
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (wiki)"
		    value      	"wiki")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"20609565034")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"DerivedImplement"
		    value      	"{}")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"DerivedOverload"
		    value      	"{}")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ImplementSelectType"
		    value      	"all")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"OverloadSelectType"
		    value      	"include"))
	    quid       	"4C7B6E4F001F"
	    documentation 	"Инкапсулирует данные формы поиска запросов в ДПО УВС"
	    stereotype 	"SimpleClass"
	    superclasses 	(list inheritance_relationship_list
		(object Inheritance_Relationship
		    quid       	"4C7CCA9E002F"
		    supplier   	"Logical View::MDProcess::ConfluenceMDChange::ReportSupport::SearchRequestForm"
		    quidu      	"47848C4A0190"))
	    used_nodes 	(list uses_relationship_list
		(object Uses_Relationship
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"20609606528"))
		    quid       	"4C7B7ED601A1"
		    stereotype 	"uses"
		    supplier   	"Logical View::MDProcess::DocCardChange::DocCardSupport::SearchUvsQuerySummaryBuilder"
		    quidu      	"4C7B7E31004F"))
	    operations 	(list Operations
		(object Operation "get_document_types"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ResolvedTypeGuid"
			    value      	"3DBFFE240068")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4C7B72EC027D*"
			    value      	(value Text 
|//#UC START# *4C7B72EC027D*¤		StringBuilder documentTypes = new StringBuilder();¤		List<DocTypeDAO> docTypes = DocCardManager.Factory.get().getDocumentTypes();¤		String message = ru.garant.shared.GCI.I18N.Messages.Factory.messages().get("uvsquery.type.not.specified");¤		if(containsListString(getDocumentType(), message)){¤			documentTypes.append("<option value=\"" + message + "\" selected='selected'>" + message + "</option>");¤		}else{¤			documentTypes.append("<option value=\"" + message + "\">" + message + "</option>");¤		}¤		for(DocTypeDAO docType : docTypes){¤			if(containsListString(getDocumentType(), docType.getName()+"")){¤				documentTypes.append("<option value='" + docType.getName() + "' selected='selected'>" + docType.getName() + "</option>");¤			}else{¤				documentTypes.append("<option value='" + docType.getName() + "'>" + docType.getName() + "</option>");¤			}¤		}¤		return documentTypes.toString();¤		//#UC END# *4C7B72EC027D*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"20609597514"))
		    quid       	"4C7B72EC027D"
		    documentation 	"получить типы документов"
		    result     	"string"
		    concurrency 	"Sequential"
		    opExportControl 	"Public"
		    uid        	0
		    quidu      	"3DBFFE240068")
		(object Operation "get_restricted_status_list"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ResolvedTypeGuid"
			    value      	"3DBFFE240068")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4C7B736603DF*"
			    value      	(value Text 
|//#UC START# *4C7B736603DF*¤		return DpoUvsHelper.getAvailableRestrictedStatus(getRestrictedStatus() + "");¤		//#UC END# *4C7B736603DF*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"20609598469"))
		    quid       	"4C7B736603DF"
		    documentation 	"получить ограничение распространения"
		    result     	"string"
		    concurrency 	"Sequential"
		    opExportControl 	"Public"
		    uid        	0
		    quidu      	"3DBFFE240068")
		(object Operation "get_document_number_list"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ResolvedTypeGuid"
			    value      	"3DBFFE240068")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4C7B740300E8*"
			    value      	(value Text 
|//#UC START# *4C7B740300E8*¤		StringBuilder documentNumberList = new StringBuilder();¤		List<String> numbers = DocCardManager.Factory.get().getDocumentNumbers();¤		for(String number : numbers){¤			if(getDocumentNumber().contains(number + "")){¤				documentNumberList.append("<option value='" + number + "' selected='selected'>" + number + "</option>");¤			}else{¤				documentNumberList.append("<option value='" + number + "'>" + number + "</option>");¤			}¤		}¤		return documentNumberList.toString();¤		//#UC END# *4C7B740300E8*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"20609599421"))
		    quid       	"4C7B740300E8"
		    documentation 	"получить список номеров"
		    result     	"string"
		    concurrency 	"Sequential"
		    opExportControl 	"Public"
		    uid        	0
		    quidu      	"3DBFFE240068")
		(object Operation "get_registration_number_list"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ResolvedTypeGuid"
			    value      	"3DBFFE240068")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4C7B74A60175*"
			    value      	(value Text 
|//#UC START# *4C7B74A60175*¤		StringBuilder registrationNumbers = new StringBuilder();¤		List<String> regNumbersList = DocCardManager.Factory.get().getRegistrationNumbers();¤		for(String regNumber : regNumbersList){¤			if(getRegistrationNumber().equals(regNumber)){¤				registrationNumbers.append("<option value='" + regNumber + "' selected='selected'>" + regNumber + "</option>");¤			}else{¤				registrationNumbers.append("<option value='" + regNumber + "'>" + regNumber + "</option>");¤			}¤		}¤		return registrationNumbers.toString();¤		//#UC END# *4C7B74A60175*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"20609600391"))
		    quid       	"4C7B74A60175"
		    documentation 	"получить список номеров регистрации в МЮ"
		    result     	"string"
		    concurrency 	"Sequential"
		    opExportControl 	"Public"
		    uid        	0
		    quidu      	"3DBFFE240068")
		(object Operation "SearchUvsQueryForm"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"final")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4C7B75E10001_BODY*"
			    value      	(value Text 
|//#UC START# *4C7B75E10001_BODY*¤		super(remoteUser, queryData, requestManager);¤		¤		Date docStartDate = queryData.getDocumentStartDate();¤		Date docEndDate = queryData.getDocumentEndDate();¤		if(docStartDate != null || docEndDate != null){¤			documentDateRangePredefined_ = Messages.Factory.messages().get(BaseSearchForm.DATE_RANGE_PREDEFINED_CUSTOM);¤		}¤		if(docStartDate != null){¤			documentBeginDate_ = new SimpleDateFormat("dd.MM.yyyy").format(docStartDate);¤		}¤		if(docEndDate != null){¤			documentEndDate_ = new SimpleDateFormat("dd.MM.yyyy").format(docEndDate);¤		}¤		List<String> docNumbers = queryData.getDocumentNumber();¤		if(docNumbers != null){¤			documentNumber_ = DpoUvsHelper.listToString(docNumbers);¤		}¤		List<Long> docIssuers = queryData.getDocIssuer();¤		if(docIssuers != null){¤			docIssuer_ = docIssuers;¤		}¤		String blocks = queryData.getBlocks();¤		if(StringUtils.isNotEmpty(blocks)){¤			blocks_ = blocks;¤		}¤		¤		List<String> documentRejected = queryData.getDocumentRejected();¤		if(documentRejected != null){¤			documentRejected_ = true;¤			rejectedReason_ = documentRejected;¤		}¤		¤		List<String> docTypes = queryData.getDocumentType();¤		if(docTypes != null){¤			documentType_ = docTypes;¤		}¤		List<Byte> instances = queryData.getInstancy();¤		if(instances != null){¤			for(Byte instancy : instances)¤				if(instancy.equals((byte)0)){¤					instancyUnknown_ = true;¤				}else if(instancy.equals((byte)1)){¤					instancyOrdinary_ = true;¤				}else if(instancy.equals((byte)2)){¤					instancyQuickly_ = true;¤				}else if(instancy.equals((byte)3)){¤					instancyInVersion_ = true;¤				}¤		}¤		String internet = queryData.getInternet();¤		if(StringUtils.isNotEmpty(internet)){¤			internet_ = internet;¤		}¤		¤		Date regStartDate = queryData.getRegistrationStartDate();¤		Date regEndDate = queryData.getRegistrationEndDate();¤		if(regStartDate != null || regEndDate != null){¤			registrationDateRangePredefined_ = Messages.Factory.messages().get(BaseSearchForm.DATE_RANGE_PREDEFINED_CUSTOM);¤		}¤		if(regStartDate != null){¤			registrationBeginDate_ = new SimpleDateFormat("dd.MM.yyyy").format(regStartDate);¤		}¤		if(regEndDate != null){¤			registrationEndDate_ = new SimpleDateFormat("dd.MM.yyyy").format(regEndDate);¤		}¤		List<String> regNumbers = queryData.getRegistrationNumber();¤		if(regNumbers != null){¤			registrationNumber_ = DpoUvsHelper.listToString(regNumbers);¤		}¤		List<Long> restrictedStatuses = queryData.getRestrictedStatus();¤		if(restrictedStatuses != null && restrictedStatuses.size() > 0){¤			restrictedStatus_ = restrictedStatuses.get(0);¤		}¤		List<String> sources = queryData.getSources();¤		if(sources != null){¤			for(String source : sources){¤				sources_.add(source);¤/*				if(source.equals("searchuvsquery.source.paper")){¤					sources_.add(source);¤				}else if(source.equals("searchuvsquery.source.e")){¤					sourceECopyDAO_ = true;¤				}else if(source.equals("searchuvsquery.source.site")){¤					sourceSiteCopyDAO_ = true;¤				}¤				*/¤			}¤		}¤		if(StringUtils.isNotEmpty(queryData.getDocumentCopy())){¤			copies_ = queryData.getDocumentCopy();¤		}¤		List<String> executorsInHistory = queryData.getExecutorsInHistory();¤		if(executorsInHistory != null){¤			radioAssignedTo_ = AssignedToInVersionsAsValues.PREVIOUS_ASSIGNED_TO.name();¤			setAssignedToType(AssignedToTypeValues.ASSIGNED_TO_TYPE_ALL.name());¤			if (executorsInHistory != null && executorsInHistory.size() > 0) {¤				setAssignedToType(AssignedToTypeValues.ASSIGNED_TO_TYPE_MY_TEAM.name());¤				if (!isEqual(getAllAssignedTo(), executorsInHistory)) {¤					setAssignedToType(AssignedToTypeValues.ASSIGNED_TO_TYPE_ALL.name());¤					if (!isEqual(getAllAssignedTo(), executorsInHistory))¤						setAssignedTo(new ArrayList<String>(executorsInHistory));¤				}¤			}¤		}else{¤			radioAssignedTo_ = AssignedToInVersionsAsValues.CURRENT_ASSIGNED_TO.name();¤		}¤		¤		String ids = queryData.getIds();¤		if(StringUtils.isNotEmpty(ids)){¤			selectedItems_ = ids;¤		}¤		¤		Date sendInUOStartDate = queryData.getSendInUoStartDate();¤		Date sendInUOEndDate = queryData.getSendInUoEndDate();¤		if(sendInUOStartDate != null || sendInUOEndDate != null){¤			sendInUoDateRangePredefined_ = Messages.Factory.messages().get(BaseSearchForm.DATE_RANGE_PREDEFINED_CUSTOM);¤		}¤		if(sendInUOStartDate != null){¤			sendInUoDateFrom_ = new SimpleDateFormat("dd.MM.yyyy").format(sendInUOStartDate);¤		}¤		if(sendInUOEndDate != null){¤			sendInUoDateTo_ = new SimpleDateFormat("dd.MM.yyyy").format(sendInUOEndDate);¤		}¤		List<Byte> statuses = queryData.getStatus();¤		if(statuses != null){¤			for(Byte status : statuses)¤				if(status.equals((byte)0)){¤					statusUnknown_ = true;¤				}else if(status.equals((byte)1)){¤					statusIsNotConnected_ = true;¤				}else if(status.equals((byte)2)){¤					statusIsConnected_ = true;¤				}else if(status.equals((byte)3)){¤					statusIsConnectedInVersion_ = true;¤				}¤		}¤		long topic = queryData.getTopic();¤		if(topic > 0){¤			topic_ = topic;¤		}¤		¤		Date sendInOgvStartDate = queryData.getSendInOgvStartDate();¤		Date sendInOgvEndDate = queryData.getSendInOgvEndDate();¤		if(sendInOgvStartDate != null || sendInOgvEndDate != null){¤			waitingFromOgvDateRangePredefined_ = Messages.Factory.messages().get(BaseSearchForm.DATE_RANGE_PREDEFINED_CUSTOM);¤		}¤		if(sendInOgvStartDate != null){¤			waitingFromOgvDateFrom_ = new SimpleDateFormat("dd.MM.yyyy").format(sendInOgvStartDate);¤		}¤		if(sendInOgvEndDate != null){¤			waitingFromOgvDateTo_ = new SimpleDateFormat("dd.MM.yyyy").format(sendInOgvEndDate);¤		}¤¤		List<QueryLabelGroup> groups = queryData.getGroups();¤		Map<String, List<String>> mapaLabels = DpoUvsHelper.getLabelNamesFromQueryLabelGroupList(groups);¤		List<String> includedLabelNames =  mapaLabels.get("included");¤		¤		if(includedLabelNames.size() > 0){¤			for(String ln : includedLabelNames){¤				if(ln.equals("rt_region_query")){¤					rpQueryActive_ = true;¤				}else if(ln.equals("rt_uo_query")){¤					uoQueryActive_ = true;¤				}else if(ln.equals("rt_current_doc")){¤					uvsCurrentDocActive_ = true;¤				}else if(ln.equals("rt_uo_current_doc")){¤					uoCurrentDocActive_ = true;¤				}¤			}		¤¤			Set<String> managerCommands = DpoUvsHelper.getManagerCommandsKeys();¤			for(String managerCommand : managerCommands){¤				for(String ln : includedLabelNames){¤					if(ln.equals(managerCommand)){¤						managerCommands_.add(managerCommand);¤					}¤				}¤			}¤		}		¤		//#UC END# *4C7B75E10001_BODY*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"20609601349"))
		    quid       	"4C7B75E10001"
		    stereotype 	"ctor"
		    parameters 	(list Parameters
			(object Parameter "remote_user"
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ResolvedTypeGuid"
				    value      	"4614A1DF031C")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ElementCreationOrder"
				    value      	"20609602267"))
			    quid       	"4C7B7682013A"
			    type       	"User")
			(object Parameter "query_data"
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ResolvedTypeGuid"
				    value      	"476283DE0107")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ElementCreationOrder"
				    value      	"20609602825"))
			    quid       	"4C7B7682017E"
			    type       	"RequestSearchQueryData"
			    quidu      	"476283DE0107")
			(object Parameter "request_manager"
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ResolvedTypeGuid"
				    value      	"4741AB500371")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ElementCreationOrder"
				    value      	"20609603380"))
			    quid       	"4C7B768201C1"
			    type       	"CommonRequestManager"
			    quidu      	"4741AB500371"))
		    concurrency 	"Sequential"
		    opExportControl 	"Public"
		    uid        	0)
		(object Operation "SearchUvsQueryForm"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"final")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4C7B768F021B_BODY*"
			    value      	(value Text 
|//#UC START# *4C7B768F021B_BODY*¤		super(remoteUser);¤		//#UC END# *4C7B768F021B_BODY*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"20609603994"))
		    quid       	"4C7B768F021B"
		    stereotype 	"ctor"
		    parameters 	(list Parameters
			(object Parameter "remote_user"
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ResolvedTypeGuid"
				    value      	"4614A1DF031C")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ElementCreationOrder"
				    value      	"20609604920"))
			    quid       	"4C7B76A901E8"
			    type       	"User"))
		    concurrency 	"Sequential"
		    opExportControl 	"Public"
		    uid        	0)
		(object Operation "get_initial_copies_list"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ResolvedTypeGuid"
			    value      	"3DBFFE240068")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4C88D5200121*"
			    value      	(value Text 
|//#UC START# *4C88D5200121*¤		StringBuilder copies = new StringBuilder();¤		String[] messages = DpoUvsHelper.MESSAGES_FOR_SPECIFY_SEARCH_BY_COPIES;¤		for(String message : messages){¤			if(message.equals(getCopies().toString())){¤				copies.append("<option value='" + message + "' selected='selected'>" + ru.garant.shared.GCI.I18N.Messages.Factory.messages().get(message) + "</option>");¤			}else{¤				copies.append("<option value='" + message + "'>" + ru.garant.shared.GCI.I18N.Messages.Factory.messages().get(message) + "</option>");¤			}¤		}¤		return copies.toString();¤		//#UC END# *4C88D5200121*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"20609605539"))
		    quid       	"4C88D5200121"
		    documentation 	"значения поля: Наличие текста документа"
		    result     	"string"
		    concurrency 	"Sequential"
		    opExportControl 	"Public"
		    uid        	0
		    quidu      	"3DBFFE240068"))
	    class_attributes 	(list class_attribute_list
		(object ClassAttribute "doc_issuer"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"final")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ValueInitialized"
			    value      	"true")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ResolvedTypeGuid"
			    value      	"49E847170262")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4C7B6EF103A5_GET_ACCESSOR*"
			    value      	(value Text 
|//#UC START# *4C7B6EF103A5_GET_ACCESSOR*¤		return docIssuer_;¤		//#UC END# *4C7B6EF103A5_GET_ACCESSOR*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4C7B6EF103A5_SET_ACCESSOR*"
			    value      	(value Text 
|//#UC START# *4C7B6EF103A5_SET_ACCESSOR*¤		List<Object> removedDocIssuers = new ArrayList<Object>();¤		¤		for(Object id : docIssuer){¤			if(id == null || StringUtils.isEmpty((String)id)){¤				removedDocIssuers.add((Object)id);¤			}¤		}¤		¤		if(removedDocIssuers.size() > 0){¤			docIssuer.removeAll(removedDocIssuers);¤		}¤¤		docIssuer_ = docIssuer;¤		//#UC END# *4C7B6EF103A5_SET_ACCESSOR*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4C7B6EF103A5_INIT_doc_issuer*"
			    value      	(value Text 
|//#UC START# *4C7B6EF103A5_INIT_doc_issuer*¤		return new java.util.ArrayList<Long> ();¤		//#UC END# *4C7B6EF103A5_INIT_doc_issuer*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"20609565921"))
		    quid       	"4C7B6EF103A5"
		    stereotype 	"property"
		    type       	"ReportSupportLongList"
		    quidu      	"49E847170262"
		    exportControl 	"Public"
		    Containment 	"By Value")
		(object ClassAttribute "registration_begin_date"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"final")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ValueInitialized"
			    value      	"true")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ResolvedTypeGuid"
			    value      	"3DBFFE240068")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4C7B72040252_GET_ACCESSOR*"
			    value      	(value Text 
|//#UC START# *4C7B72040252_GET_ACCESSOR*¤		return registrationBeginDate_;¤		//#UC END# *4C7B72040252_GET_ACCESSOR*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4C7B72040252_SET_ACCESSOR*"
			    value      	(value Text 
|//#UC START# *4C7B72040252_SET_ACCESSOR*¤		registrationBeginDate_ = registrationBeginDate;¤		//#UC END# *4C7B72040252_SET_ACCESSOR*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"20609567579"))
		    quid       	"4C7B72040252"
		    stereotype 	"property"
		    type       	"string"
		    quidu      	"3DBFFE240068"
		    exportControl 	"Public"
		    Containment 	"By Value")
		(object ClassAttribute "registration_end_date"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"final")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ValueInitialized"
			    value      	"true")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ResolvedTypeGuid"
			    value      	"3DBFFE240068")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4C7B721600B3_GET_ACCESSOR*"
			    value      	(value Text 
|//#UC START# *4C7B721600B3_GET_ACCESSOR*¤		return registrationEndDate_;¤		//#UC END# *4C7B721600B3_GET_ACCESSOR*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4C7B721600B3_SET_ACCESSOR*"
			    value      	(value Text 
|//#UC START# *4C7B721600B3_SET_ACCESSOR*¤		registrationEndDate_ = registrationEndDate;¤		//#UC END# *4C7B721600B3_SET_ACCESSOR*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"20609569199"))
		    quid       	"4C7B721600B3"
		    stereotype 	"property"
		    type       	"string"
		    quidu      	"3DBFFE240068"
		    exportControl 	"Public"
		    Containment 	"By Value")
		(object ClassAttribute "document_begin_date"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"final")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ValueInitialized"
			    value      	"true")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ResolvedTypeGuid"
			    value      	"3DBFFE240068")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4C7B72330169_GET_ACCESSOR*"
			    value      	(value Text 
|//#UC START# *4C7B72330169_GET_ACCESSOR*¤		return documentBeginDate_;¤		//#UC END# *4C7B72330169_GET_ACCESSOR*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4C7B72330169_SET_ACCESSOR*"
			    value      	(value Text 
|//#UC START# *4C7B72330169_SET_ACCESSOR*¤		documentBeginDate_ = documentBeginDate;¤		//#UC END# *4C7B72330169_SET_ACCESSOR*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"20609570875"))
		    quid       	"4C7B72330169"
		    stereotype 	"property"
		    type       	"string"
		    quidu      	"3DBFFE240068"
		    exportControl 	"Public"
		    Containment 	"By Value")
		(object ClassAttribute "document_end_date"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"final")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ValueInitialized"
			    value      	"true")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ResolvedTypeGuid"
			    value      	"3DBFFE240068")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4C7B72560058_GET_ACCESSOR*"
			    value      	(value Text 
|//#UC START# *4C7B72560058_GET_ACCESSOR*¤		return documentEndDate_;¤		//#UC END# *4C7B72560058_GET_ACCESSOR*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4C7B72560058_SET_ACCESSOR*"
			    value      	(value Text 
|//#UC START# *4C7B72560058_SET_ACCESSOR*¤		documentEndDate_ = documentEndDate;¤		//#UC END# *4C7B72560058_SET_ACCESSOR*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"20609572498"))
		    quid       	"4C7B72560058"
		    stereotype 	"property"
		    type       	"string"
		    quidu      	"3DBFFE240068"
		    exportControl 	"Public"
		    Containment 	"By Value")
		(object ClassAttribute "restricted_status"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"final")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ValueInitialized"
			    value      	"true")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ResolvedTypeGuid"
			    value      	"3DBFFD860205")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4C7B728400BC_GET_ACCESSOR*"
			    value      	(value Text 
|//#UC START# *4C7B728400BC_GET_ACCESSOR*¤		return restrictedStatus_;¤		//#UC END# *4C7B728400BC_GET_ACCESSOR*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4C7B728400BC_SET_ACCESSOR*"
			    value      	(value Text 
|//#UC START# *4C7B728400BC_SET_ACCESSOR*¤		restrictedStatus_ = restrictedStatus;¤		//#UC END# *4C7B728400BC_SET_ACCESSOR*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4C7B728400BC_INIT_restricted_status*"
			    value      	(value Text 
|//#UC START# *4C7B728400BC_INIT_restricted_status*¤		return new java.util.ArrayList<Long> ();¤		//#UC END# *4C7B728400BC_INIT_restricted_status*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"20609574125"))
		    quid       	"4C7B728400BC"
		    stereotype 	"property"
		    type       	"long long"
		    quidu      	"3DBFFD860205"
		    exportControl 	"Public"
		    Containment 	"By Value")
		(object ClassAttribute "document_number"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"final")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ValueInitialized"
			    value      	"true")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ResolvedTypeGuid"
			    value      	"3DBFFE240068")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4C7B74CC00C0_GET_ACCESSOR*"
			    value      	(value Text 
|//#UC START# *4C7B74CC00C0_GET_ACCESSOR*¤		return documentNumber_;¤		//#UC END# *4C7B74CC00C0_GET_ACCESSOR*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4C7B74CC00C0_SET_ACCESSOR*"
			    value      	(value Text 
|//#UC START# *4C7B74CC00C0_SET_ACCESSOR*¤		documentNumber_ = documentNumber;¤		//#UC END# *4C7B74CC00C0_SET_ACCESSOR*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4C7B74CC00C0_INIT_document_number*"
			    value      	(value Text 
|//#UC START# *4C7B74CC00C0_INIT_document_number*¤		return new java.util.ArrayList<String> ();¤		//#UC END# *4C7B74CC00C0_INIT_document_number*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"20609575752"))
		    quid       	"4C7B74CC00C0"
		    stereotype 	"property"
		    type       	"string"
		    quidu      	"3DBFFE240068"
		    exportControl 	"Public"
		    Containment 	"By Value")
		(object ClassAttribute "registration_number"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"final")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ValueInitialized"
			    value      	"true")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ResolvedTypeGuid"
			    value      	"3DBFFE240068")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4C7B74FE01BE_GET_ACCESSOR*"
			    value      	(value Text 
|//#UC START# *4C7B74FE01BE_GET_ACCESSOR*¤		return registrationNumber_;¤		//#UC END# *4C7B74FE01BE_GET_ACCESSOR*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4C7B74FE01BE_SET_ACCESSOR*"
			    value      	(value Text 
|//#UC START# *4C7B74FE01BE_SET_ACCESSOR*¤		registrationNumber_ = registrationNumber;¤		//#UC END# *4C7B74FE01BE_SET_ACCESSOR*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4C7B74FE01BE_INIT_registration_number*"
			    value      	(value Text 
|//#UC START# *4C7B74FE01BE_INIT_registration_number*¤		return new java.util.ArrayList<Long> ();¤		//#UC END# *4C7B74FE01BE_INIT_registration_number*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"20609577801"))
		    quid       	"4C7B74FE01BE"
		    stereotype 	"property"
		    type       	"string"
		    quidu      	"3DBFFE240068"
		    exportControl 	"Public"
		    Containment 	"By Value")
		(object ClassAttribute "document_type"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"final")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ValueInitialized"
			    value      	"true")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ResolvedTypeGuid"
			    value      	"4758F5D603BC")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4C7CE82301C2_INIT_document_type*"
			    value      	(value Text 
|//#UC START# *4C7CE82301C2_INIT_document_type*¤		return new java.util.ArrayList<String> ();¤		//#UC END# *4C7CE82301C2_INIT_document_type*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4C7CE82301C2_GET_ACCESSOR*"
			    value      	(value Text 
|//#UC START# *4C7CE82301C2_GET_ACCESSOR*¤		return documentType_;¤		//#UC END# *4C7CE82301C2_GET_ACCESSOR*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4C7CE82301C2_SET_ACCESSOR*"
			    value      	(value Text 
|//#UC START# *4C7CE82301C2_SET_ACCESSOR*¤		documentType_ = documentType;¤		//#UC END# *4C7CE82301C2_SET_ACCESSOR*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"20609579499"))
		    quid       	"4C7CE82301C2"
		    stereotype 	"property"
		    type       	"ReportSupportStringList"
		    quidu      	"4758F5D603BC"
		    exportControl 	"Public"
		    Containment 	"By Value")
		(object ClassAttribute "document_rejected"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"final")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ValueInitialized"
			    value      	"true")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ResolvedTypeGuid"
			    value      	"3DBFFE100240")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4C84A0CE038F_GET_ACCESSOR*"
			    value      	(value Text 
|//#UC START# *4C84A0CE038F_GET_ACCESSOR*¤		return documentRejected_;¤		//#UC END# *4C84A0CE038F_GET_ACCESSOR*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4C84A0CE038F_SET_ACCESSOR*"
			    value      	(value Text 
|//#UC START# *4C84A0CE038F_SET_ACCESSOR*¤		documentRejected_ = documentRejected;¤		//#UC END# *4C84A0CE038F_SET_ACCESSOR*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"20609581138"))
		    quid       	"4C84A0CE038F"
		    documentation 	"Отказано в предоставлении"
		    stereotype 	"property"
		    type       	"boolean"
		    quidu      	"3DBFFE100240"
		    initv      	"false"
		    exportControl 	"Public"
		    Containment 	"By Value")
		(object ClassAttribute "waiting_from_ogv_date_from"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"final")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ValueInitialized"
			    value      	"true")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ResolvedTypeGuid"
			    value      	"3DBFFE240068")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4C84D13000A2_GET_ACCESSOR*"
			    value      	(value Text 
|//#UC START# *4C84D13000A2_GET_ACCESSOR*¤		return waitingFromOgvDateFrom_;¤		//#UC END# *4C84D13000A2_GET_ACCESSOR*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4C84D13000A2_SET_ACCESSOR*"
			    value      	(value Text 
|//#UC START# *4C84D13000A2_SET_ACCESSOR*¤		waitingFromOgvDateFrom_ = waitingFromOgvDateFrom;¤		//#UC END# *4C84D13000A2_SET_ACCESSOR*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"20609582765"))
		    quid       	"4C84D13000A2"
		    stereotype 	"property"
		    type       	"string"
		    quidu      	"3DBFFE240068"
		    exportControl 	"Public"
		    Containment 	"By Value")
		(object ClassAttribute "waiting_from_ogv_date_to"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"final")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ValueInitialized"
			    value      	"true")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ResolvedTypeGuid"
			    value      	"3DBFFE240068")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4C84D16F01D1_GET_ACCESSOR*"
			    value      	(value Text 
|//#UC START# *4C84D16F01D1_GET_ACCESSOR*¤		return waitingFromOgvDateTo_;¤		//#UC END# *4C84D16F01D1_GET_ACCESSOR*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4C84D16F01D1_SET_ACCESSOR*"
			    value      	(value Text 
|//#UC START# *4C84D16F01D1_SET_ACCESSOR*¤		waitingFromOgvDateTo_ = waitingFromOgvDateTo;¤		//#UC END# *4C84D16F01D1_SET_ACCESSOR*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"20609584409"))
		    quid       	"4C84D16F01D1"
		    stereotype 	"property"
		    type       	"string"
		    quidu      	"3DBFFE240068"
		    exportControl 	"Public"
		    Containment 	"By Value")
		(object ClassAttribute "waiting_from_ogv_date_range_predefined"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"final")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ValueInitialized"
			    value      	"true")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ResolvedTypeGuid"
			    value      	"3DBFFE240068")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4C84D1C00046_GET_ACCESSOR*"
			    value      	(value Text 
|//#UC START# *4C84D1C00046_GET_ACCESSOR*¤		return waitingFromOgvDateRangePredefined_;¤		//#UC END# *4C84D1C00046_GET_ACCESSOR*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4C84D1C00046_SET_ACCESSOR*"
			    value      	(value Text 
|//#UC START# *4C84D1C00046_SET_ACCESSOR*¤		waitingFromOgvDateRangePredefined_ = waitingFromOgvDateRangePredefined;¤		//#UC END# *4C84D1C00046_SET_ACCESSOR*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"20609586051"))
		    quid       	"4C84D1C00046"
		    stereotype 	"property"
		    type       	"string"
		    quidu      	"3DBFFE240068"
		    exportControl 	"Public"
		    Containment 	"By Value")
		(object ClassAttribute "send_in_uo_date_from"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"final")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ValueInitialized"
			    value      	"true")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ResolvedTypeGuid"
			    value      	"3DBFFE240068")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4C84D35000E3_GET_ACCESSOR*"
			    value      	(value Text 
|//#UC START# *4C84D35000E3_GET_ACCESSOR*¤		return sendInUoDateFrom_;¤		//#UC END# *4C84D35000E3_GET_ACCESSOR*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4C84D35000E3_SET_ACCESSOR*"
			    value      	(value Text 
|//#UC START# *4C84D35000E3_SET_ACCESSOR*¤		sendInUoDateFrom_ = sendInUoDateFrom;¤		//#UC END# *4C84D35000E3_SET_ACCESSOR*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"20609587726"))
		    quid       	"4C84D35000E3"
		    stereotype 	"property"
		    type       	"string"
		    quidu      	"3DBFFE240068"
		    exportControl 	"Public"
		    Containment 	"By Value")
		(object ClassAttribute "send_in_uo_date_to"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"final")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ValueInitialized"
			    value      	"true")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ResolvedTypeGuid"
			    value      	"3DBFFE240068")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4C84D3610024_GET_ACCESSOR*"
			    value      	(value Text 
|//#UC START# *4C84D3610024_GET_ACCESSOR*¤		return sendInUoDateTo_;¤		//#UC END# *4C84D3610024_GET_ACCESSOR*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4C84D3610024_SET_ACCESSOR*"
			    value      	(value Text 
|//#UC START# *4C84D3610024_SET_ACCESSOR*¤		sendInUoDateTo_ = sendInUoDateTo;¤		//#UC END# *4C84D3610024_SET_ACCESSOR*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"20609589356"))
		    quid       	"4C84D3610024"
		    stereotype 	"property"
		    type       	"string"
		    quidu      	"3DBFFE240068"
		    exportControl 	"Public"
		    Containment 	"By Value")
		(object ClassAttribute "send_in_uo_date_range_predefined"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"final")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ValueInitialized"
			    value      	"true")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ResolvedTypeGuid"
			    value      	"3DBFFE240068")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4C84D3780279_GET_ACCESSOR*"
			    value      	(value Text 
|//#UC START# *4C84D3780279_GET_ACCESSOR*¤		return sendInUoDateRangePredefined_;¤		//#UC END# *4C84D3780279_GET_ACCESSOR*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4C84D3780279_SET_ACCESSOR*"
			    value      	(value Text 
|//#UC START# *4C84D3780279_SET_ACCESSOR*¤		sendInUoDateRangePredefined_ = sendInUoDateRangePredefined;¤		//#UC END# *4C84D3780279_SET_ACCESSOR*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"20609590969"))
		    quid       	"4C84D3780279"
		    stereotype 	"property"
		    type       	"string"
		    quidu      	"3DBFFE240068"
		    exportControl 	"Public"
		    Containment 	"By Value")
		(object ClassAttribute "gardoc_date_range_predefined"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"final")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ValueInitialized"
			    value      	"true")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ResolvedTypeGuid"
			    value      	"3DBFFE240068")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4C863DCA0131_GET_ACCESSOR*"
			    value      	(value Text 
|//#UC START# *4C863DCA0131_GET_ACCESSOR*¤		return gardocDateRangePredefined_;¤		//#UC END# *4C863DCA0131_GET_ACCESSOR*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4C863DCA0131_SET_ACCESSOR*"
			    value      	(value Text 
|//#UC START# *4C863DCA0131_SET_ACCESSOR*¤		gardocDateRangePredefined_ = gardocDateRangePredefined;¤		//#UC END# *4C863DCA0131_SET_ACCESSOR*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"20609592609"))
		    quid       	"4C863DCA0131"
		    documentation 	"выбранное значение в выпадаюшем списке для даты: любая, пользователя, вчера, сегодня и т.д."
		    stereotype 	"property"
		    type       	"string"
		    quidu      	"3DBFFE240068"
		    exportControl 	"Public"
		    Containment 	"By Value")
		(object ClassAttribute "registration_date_range_predefined"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"final")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ValueInitialized"
			    value      	"true")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ResolvedTypeGuid"
			    value      	"3DBFFE240068")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4C863E27010F_GET_ACCESSOR*"
			    value      	(value Text 
|//#UC START# *4C863E27010F_GET_ACCESSOR*¤		return registrationDateRangePredefined_;¤		//#UC END# *4C863E27010F_GET_ACCESSOR*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4C863E27010F_SET_ACCESSOR*"
			    value      	(value Text 
|//#UC START# *4C863E27010F_SET_ACCESSOR*¤		registrationDateRangePredefined_ = registrationDateRangePredefined;¤		//#UC END# *4C863E27010F_SET_ACCESSOR*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"20609594249"))
		    quid       	"4C863E27010F"
		    documentation 	"выбранное значение в выпадаюшем списке для даты: любая, пользователя, вчера, сегодня и т.д."
		    stereotype 	"property"
		    type       	"string"
		    quidu      	"3DBFFE240068"
		    exportControl 	"Public"
		    Containment 	"By Value")
		(object ClassAttribute "copies"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"final")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ValueInitialized"
			    value      	"true")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ResolvedTypeGuid"
			    value      	"3DBFFE240068")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4C88D4DC0143_GET_ACCESSOR*"
			    value      	(value Text 
|//#UC START# *4C88D4DC0143_GET_ACCESSOR*¤		return copies_;¤		//#UC END# *4C88D4DC0143_GET_ACCESSOR*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4C88D4DC0143_SET_ACCESSOR*"
			    value      	(value Text 
|//#UC START# *4C88D4DC0143_SET_ACCESSOR*¤		copies_ = copies;¤		//#UC END# *4C88D4DC0143_SET_ACCESSOR*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"20609595871"))
		    quid       	"4C88D4DC0143"
		    documentation 	"Наличие текста документа"
		    stereotype 	"property"
		    type       	"string"
		    quidu      	"3DBFFE240068"
		    exportControl 	"Public"
		    Containment 	"By Value")
		(object ClassAttribute "radio_assigned_to"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"11509048363")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"final")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ValueInitialized"
			    value      	"true")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ResolvedTypeGuid"
			    value      	"3DBFFE240068")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4CAD9D7D03BE_GET_ACCESSOR*"
			    value      	(value Text 
|//#UC START# *4CAD9D7D03BE_GET_ACCESSOR*¤		return radioAssignedTo_;¤		//#UC END# *4CAD9D7D03BE_GET_ACCESSOR*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4CAD9D7D03BE_SET_ACCESSOR*"
			    value      	(value Text 
|//#UC START# *4CAD9D7D03BE_SET_ACCESSOR*¤		radioAssignedTo_ = radioAssignedTo;¤		//#UC END# *4CAD9D7D03BE_SET_ACCESSOR*
			    )))
		    quid       	"4CAD9D7D03BE"
		    documentation 	
|При выборе "текущий" ищем без изменений. При выборе "прошлый" добавляем поиск в версиях.
		    
		    stereotype 	"property"
		    type       	"string"
		    quidu      	"3DBFFE240068"
		    exportControl 	"Public"
		    Containment 	"By Value")
		(object ClassAttribute "document_date_range_predefined"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"12467169015")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"final")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ValueInitialized"
			    value      	"true")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ResolvedTypeGuid"
			    value      	"3DBFFE240068")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4CBEA1E40330_GET_ACCESSOR*"
			    value      	(value Text 
|//#UC START# *4CBEA1E40330_GET_ACCESSOR*¤		return documentDateRangePredefined_;¤		//#UC END# *4CBEA1E40330_GET_ACCESSOR*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4CBEA1E40330_SET_ACCESSOR*"
			    value      	(value Text 
|//#UC START# *4CBEA1E40330_SET_ACCESSOR*¤		documentDateRangePredefined_ = documentDateRangePredefined;¤		//#UC END# *4CBEA1E40330_SET_ACCESSOR*
			    )))
		    quid       	"4CBEA1E40330"
		    documentation 	" выбранное значение в выпадаюшем списке для даты создания документа: любая, пользователя, вчера, сегодня и т.д."
		    stereotype 	"property"
		    type       	"string"
		    quidu      	"3DBFFE240068"
		    exportControl 	"Public"
		    Containment 	"By Value")
		(object ClassAttribute "sources"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"26541921303")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"final")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ValueInitialized"
			    value      	"true")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ResolvedTypeGuid"
			    value      	"505B465F03C6")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4CC039300259_GET_ACCESSOR*"
			    value      	(value Text 
|//#UC START# *4CC039300259_GET_ACCESSOR*¤		return sources_;¤		//#UC END# *4CC039300259_GET_ACCESSOR*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4CC039300259_SET_ACCESSOR*"
			    value      	(value Text 
|//#UC START# *4CC039300259_SET_ACCESSOR*¤		sources_ = sources;¤		//#UC END# *4CC039300259_SET_ACCESSOR*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4CC039300259_INIT_sources*"
			    value      	(value Text 
|//#UC START# *4CC039300259_INIT_sources*¤		return new java.util.ArrayList<String> ();¤		//#UC END# *4CC039300259_INIT_sources*
			    )))
		    quid       	"4CC039300259"
		    documentation 	"бумажный источник"
		    stereotype 	"property"
		    type       	"DocCardCommon::StringList"
		    exportControl 	"Public"
		    Containment 	"By Value")
		(object ClassAttribute "uo_query_active"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"7843570519")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"final")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ValueInitialized"
			    value      	"true")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ResolvedTypeGuid"
			    value      	"3DBFFE100240")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4CCA788B013A_GET_ACCESSOR*"
			    value      	(value Text 
|//#UC START# *4CCA788B013A_GET_ACCESSOR*¤		return uoQueryActive_;¤		//#UC END# *4CCA788B013A_GET_ACCESSOR*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4CCA788B013A_SET_ACCESSOR*"
			    value      	(value Text 
|//#UC START# *4CCA788B013A_SET_ACCESSOR*¤		uoQueryActive_ = uoQueryActive;¤		//#UC END# *4CCA788B013A_SET_ACCESSOR*
			    )))
		    quid       	"4CCA788B013A"
		    documentation 	"При поиске использовать поиск по лэйблу rt_uo_query запросов ГЛ ЮО"
		    stereotype 	"property"
		    type       	"boolean"
		    quidu      	"3DBFFE100240"
		    exportControl 	"Public"
		    Containment 	"By Value")
		(object ClassAttribute "uvs_current_doc_active"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"7886706521")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"final")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ValueInitialized"
			    value      	"true")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ResolvedTypeGuid"
			    value      	"3DBFFE100240")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4CCA78B6020B_GET_ACCESSOR*"
			    value      	(value Text 
|//#UC START# *4CCA78B6020B_GET_ACCESSOR*¤		return uvsCurrentDocActive_;¤		//#UC END# *4CCA78B6020B_GET_ACCESSOR*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4CCA78B6020B_SET_ACCESSOR*"
			    value      	(value Text 
|//#UC START# *4CCA78B6020B_SET_ACCESSOR*¤		uvsCurrentDocActive_ = uvsCurrentDocActive;¤		//#UC END# *4CCA78B6020B_SET_ACCESSOR*
			    )))
		    quid       	"4CCA78B6020B"
		    documentation 	"При поиске использовать поиск по лэйблу rt_current_doc текущих документов УВС"
		    stereotype 	"property"
		    type       	"boolean"
		    quidu      	"3DBFFE100240"
		    exportControl 	"Public"
		    Containment 	"By Value")
		(object ClassAttribute "rp_query_active"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"12097687707")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ValueInitialized"
			    value      	"true")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ResolvedTypeGuid"
			    value      	"3DBFFE100240")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4E40F7FC036B_GET_ACCESSOR*"
			    value      	(value Text 
|//#UC START# *4E40F7FC036B_GET_ACCESSOR*¤		return rpQueryActive_;¤		//#UC END# *4E40F7FC036B_GET_ACCESSOR*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4E40F7FC036B_SET_ACCESSOR*"
			    value      	(value Text 
|//#UC START# *4E40F7FC036B_SET_ACCESSOR*¤		rpQueryActive_ = rpQueryActive;¤		//#UC END# *4E40F7FC036B_SET_ACCESSOR*
			    )))
		    quid       	"4E40F7FC036B"
		    documentation 	"запросы РП"
		    stereotype 	"property"
		    type       	"boolean"
		    quidu      	"3DBFFE100240"
		    exportControl 	"Public"
		    Containment 	"By Value")
		(object ClassAttribute "uo_current_doc_active"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"12183915056")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ValueInitialized"
			    value      	"true")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ResolvedTypeGuid"
			    value      	"3DBFFE100240")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4E40F8530057_GET_ACCESSOR*"
			    value      	(value Text 
|//#UC START# *4E40F8530057_GET_ACCESSOR*¤		return uoCurrentDocActive_;¤		//#UC END# *4E40F8530057_GET_ACCESSOR*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4E40F8530057_SET_ACCESSOR*"
			    value      	(value Text 
|//#UC START# *4E40F8530057_SET_ACCESSOR*¤		uoCurrentDocActive_ = uoCurrentDocActive;¤		//#UC END# *4E40F8530057_SET_ACCESSOR*
			    )))
		    quid       	"4E40F8530057"
		    documentation 	"поиск текущих документов ЮО,т.е. по лейблу rt_uo_current_doc"
		    stereotype 	"property"
		    type       	"boolean"
		    quidu      	"3DBFFE100240"
		    exportControl 	"Public"
		    Containment 	"By Value")
		(object ClassAttribute "selected_items"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"83560454243")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"final")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ValueInitialized"
			    value      	"true")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ResolvedTypeGuid"
			    value      	"3DBFFE240068")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4E4D09090144_GET_ACCESSOR*"
			    value      	(value Text 
|//#UC START# *4E4D09090144_GET_ACCESSOR*¤		return selectedItems_;¤		//#UC END# *4E4D09090144_GET_ACCESSOR*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4E4D09090144_SET_ACCESSOR*"
			    value      	(value Text 
|//#UC START# *4E4D09090144_SET_ACCESSOR*¤		selectedItems_ = selectedItems;¤		//#UC END# *4E4D09090144_SET_ACCESSOR*
			    )))
		    quid       	"4E4D09090144"
		    stereotype 	"property"
		    type       	"string"
		    quidu      	"3DBFFE240068"
		    exportControl 	"Public"
		    Containment 	"By Value")
		(object ClassAttribute "internet"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"1323857425516807")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ValueInitialized"
			    value      	"true")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ResolvedTypeGuid"
			    value      	"3DBFFE240068")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4EE8761101D9_GET_ACCESSOR*"
			    value      	(value Text 
|//#UC START# *4EE8761101D9_GET_ACCESSOR*¤		return internet_;¤		//#UC END# *4EE8761101D9_GET_ACCESSOR*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4EE8761101D9_SET_ACCESSOR*"
			    value      	(value Text 
|//#UC START# *4EE8761101D9_SET_ACCESSOR*¤		internet_ = internet;¤		//#UC END# *4EE8761101D9_SET_ACCESSOR*
			    )))
		    quid       	"4EE8761101D9"
		    stereotype 	"property"
		    type       	"string"
		    quidu      	"3DBFFE240068"
		    exportControl 	"Public"
		    Containment 	"By Value")
		(object ClassAttribute "status_unknown"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"1323857461059841")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"final")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ValueInitialized"
			    value      	"true")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ResolvedTypeGuid"
			    value      	"3DBFFE100240")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4EE876350011_GET_ACCESSOR*"
			    value      	(value Text 
|//#UC START# *4EE876350011_GET_ACCESSOR*¤		return statusUnknown_;¤		//#UC END# *4EE876350011_GET_ACCESSOR*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4EE876350011_SET_ACCESSOR*"
			    value      	(value Text 
|//#UC START# *4EE876350011_SET_ACCESSOR*¤		statusUnknown_ = statusUnknown;¤		//#UC END# *4EE876350011_SET_ACCESSOR*
			    )))
		    quid       	"4EE876350011"
		    stereotype 	"property"
		    type       	"boolean"
		    quidu      	"3DBFFE100240"
		    exportControl 	"Public"
		    Containment 	"By Value")
		(object ClassAttribute "status_is_not_connected"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"1323857521465297")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"final")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ValueInitialized"
			    value      	"true")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ResolvedTypeGuid"
			    value      	"3DBFFE100240")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4EE8767101A7_GET_ACCESSOR*"
			    value      	(value Text 
|//#UC START# *4EE8767101A7_GET_ACCESSOR*¤		return statusIsNotConnected_;¤		//#UC END# *4EE8767101A7_GET_ACCESSOR*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4EE8767101A7_SET_ACCESSOR*"
			    value      	(value Text 
|//#UC START# *4EE8767101A7_SET_ACCESSOR*¤		statusIsNotConnected_ = statusIsNotConnected;¤		//#UC END# *4EE8767101A7_SET_ACCESSOR*
			    )))
		    quid       	"4EE8767101A7"
		    stereotype 	"property"
		    type       	"boolean"
		    quidu      	"3DBFFE100240"
		    exportControl 	"Public"
		    Containment 	"By Value")
		(object ClassAttribute "status_is_connected"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"1323857561506588")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"final")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ValueInitialized"
			    value      	"true")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ResolvedTypeGuid"
			    value      	"3DBFFE100240")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4EE8769901CF_GET_ACCESSOR*"
			    value      	(value Text 
|//#UC START# *4EE8769901CF_GET_ACCESSOR*¤		return statusIsConnected_;¤		//#UC END# *4EE8769901CF_GET_ACCESSOR*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4EE8769901CF_SET_ACCESSOR*"
			    value      	(value Text 
|//#UC START# *4EE8769901CF_SET_ACCESSOR*¤		statusIsConnected_ = statusIsConnected;¤		//#UC END# *4EE8769901CF_SET_ACCESSOR*
			    )))
		    quid       	"4EE8769901CF"
		    stereotype 	"property"
		    type       	"boolean"
		    quidu      	"3DBFFE100240"
		    exportControl 	"Public"
		    Containment 	"By Value")
		(object ClassAttribute "status_is_connected_in_version"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"1323857571169142")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"final")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ValueInitialized"
			    value      	"true")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ResolvedTypeGuid"
			    value      	"3DBFFE100240")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4EE876A3007D_GET_ACCESSOR*"
			    value      	(value Text 
|//#UC START# *4EE876A3007D_GET_ACCESSOR*¤		return statusIsConnectedInVersion_;¤		//#UC END# *4EE876A3007D_GET_ACCESSOR*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4EE876A3007D_SET_ACCESSOR*"
			    value      	(value Text 
|//#UC START# *4EE876A3007D_SET_ACCESSOR*¤		statusIsConnectedInVersion_ = statusIsConnectedInVersion;¤		//#UC END# *4EE876A3007D_SET_ACCESSOR*
			    )))
		    quid       	"4EE876A3007D"
		    stereotype 	"property"
		    type       	"boolean"
		    quidu      	"3DBFFE100240"
		    exportControl 	"Public"
		    Containment 	"By Value")
		(object ClassAttribute "instancy_unknown"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"1323857602884957")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"final")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ValueInitialized"
			    value      	"true")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ResolvedTypeGuid"
			    value      	"3DBFFE100240")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4EE876C20348_GET_ACCESSOR*"
			    value      	(value Text 
|//#UC START# *4EE876C20348_GET_ACCESSOR*¤		return instancyUnknown_;¤		//#UC END# *4EE876C20348_GET_ACCESSOR*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4EE876C20348_SET_ACCESSOR*"
			    value      	(value Text 
|//#UC START# *4EE876C20348_SET_ACCESSOR*¤		instancyUnknown_ = instancyUnknown;¤		//#UC END# *4EE876C20348_SET_ACCESSOR*
			    )))
		    quid       	"4EE876C20348"
		    stereotype 	"property"
		    type       	"boolean"
		    quidu      	"3DBFFE100240"
		    exportControl 	"Public"
		    Containment 	"By Value")
		(object ClassAttribute "instancy_ordinary"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"1323857628521424")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"final")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ValueInitialized"
			    value      	"true")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ResolvedTypeGuid"
			    value      	"3DBFFE100240")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4EE876DC01DB_GET_ACCESSOR*"
			    value      	(value Text 
|//#UC START# *4EE876DC01DB_GET_ACCESSOR*¤		return instancyOrdinary_;¤		//#UC END# *4EE876DC01DB_GET_ACCESSOR*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4EE876DC01DB_SET_ACCESSOR*"
			    value      	(value Text 
|//#UC START# *4EE876DC01DB_SET_ACCESSOR*¤		instancyOrdinary_ = instancyOrdinary;¤		//#UC END# *4EE876DC01DB_SET_ACCESSOR*
			    )))
		    quid       	"4EE876DC01DB"
		    stereotype 	"property"
		    type       	"boolean"
		    quidu      	"3DBFFE100240"
		    exportControl 	"Public"
		    Containment 	"By Value")
		(object ClassAttribute "instancy_quickly"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"1323857641114146")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"final")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ValueInitialized"
			    value      	"true")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ResolvedTypeGuid"
			    value      	"3DBFFE100240")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4EE876E90044_GET_ACCESSOR*"
			    value      	(value Text 
|//#UC START# *4EE876E90044_GET_ACCESSOR*¤		return instancyQuickly_;¤		//#UC END# *4EE876E90044_GET_ACCESSOR*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4EE876E90044_SET_ACCESSOR*"
			    value      	(value Text 
|//#UC START# *4EE876E90044_SET_ACCESSOR*¤		instancyQuickly_ = instancyQuickly;¤		//#UC END# *4EE876E90044_SET_ACCESSOR*
			    )))
		    quid       	"4EE876E90044"
		    stereotype 	"property"
		    type       	"boolean"
		    quidu      	"3DBFFE100240"
		    exportControl 	"Public"
		    Containment 	"By Value")
		(object ClassAttribute "instancy_in_version"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"1323857660345247")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"final")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ValueInitialized"
			    value      	"true")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ResolvedTypeGuid"
			    value      	"3DBFFE100240")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4EE876FC012A_GET_ACCESSOR*"
			    value      	(value Text 
|//#UC START# *4EE876FC012A_GET_ACCESSOR*¤		return instancyInVersion_;¤		//#UC END# *4EE876FC012A_GET_ACCESSOR*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4EE876FC012A_SET_ACCESSOR*"
			    value      	(value Text 
|//#UC START# *4EE876FC012A_SET_ACCESSOR*¤		instancyInVersion_ = instancyInVersion;¤		//#UC END# *4EE876FC012A_SET_ACCESSOR*
			    )))
		    quid       	"4EE876FC012A"
		    stereotype 	"property"
		    type       	"boolean"
		    quidu      	"3DBFFE100240"
		    exportControl 	"Public"
		    Containment 	"By Value")
		(object ClassAttribute "blocks"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"1324372019842370")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ValueInitialized"
			    value      	"true")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ResolvedTypeGuid"
			    value      	"3DBFFE240068")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4EF050330316_GET_ACCESSOR*"
			    value      	(value Text 
|//#UC START# *4EF050330316_GET_ACCESSOR*¤		return blocks_;¤		//#UC END# *4EF050330316_GET_ACCESSOR*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4EF050330316_SET_ACCESSOR*"
			    value      	(value Text 
|//#UC START# *4EF050330316_SET_ACCESSOR*¤		blocks_ = blocks;¤		//#UC END# *4EF050330316_SET_ACCESSOR*
			    )))
		    quid       	"4EF050330316"
		    stereotype 	"property"
		    type       	"string"
		    quidu      	"3DBFFE240068"
		    exportControl 	"Public"
		    Containment 	"By Value")
		(object ClassAttribute "topic"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"1324882017674167")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ValueInitialized"
			    value      	"true")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ResolvedTypeGuid"
			    value      	"3DBFFD860205")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4EF81861026E_GET_ACCESSOR*"
			    value      	(value Text 
|//#UC START# *4EF81861026E_GET_ACCESSOR*¤		return topic_;¤		//#UC END# *4EF81861026E_GET_ACCESSOR*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4EF81861026E_SET_ACCESSOR*"
			    value      	(value Text 
|//#UC START# *4EF81861026E_SET_ACCESSOR*¤		topic_ = topic;¤		//#UC END# *4EF81861026E_SET_ACCESSOR*
			    )))
		    quid       	"4EF81861026E"
		    stereotype 	"property"
		    type       	"long long"
		    quidu      	"3DBFFD860205"
		    exportControl 	"Public"
		    Containment 	"By Value"))
	    language   	"MDA Generator"
	    nestedClasses 	(list nestedClasses
		(object Class "AssignedToInVersionsAsValues"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"11720852168")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false"))
		    quid       	"4CAD9E51036F"
		    documentation 	
|При выборе "текущий" ищем без изменений. При выборе "прошлый" добавляем поиск в версиях.
		    
		    stereotype 	"Enum"
		    class_attributes 	(list class_attribute_list
			(object ClassAttribute "CURRENT_ASSIGNED_TO"
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ElementCreationOrder"
				    value      	"11800715839")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"AbstarctOperation"
				    value      	"regular")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ValueInitialized"
				    value      	"true")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"IsNative"
				    value      	"false"))
			    quid       	"4CAD9EA1031A"
			    documentation 	"текущий назначенный"
			    exportControl 	"Public"
			    Containment 	"By Value")
			(object ClassAttribute "PREVIOUS_ASSIGNED_TO"
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ElementCreationOrder"
				    value      	"11830829570")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"AbstarctOperation"
				    value      	"regular")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ValueInitialized"
				    value      	"true")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"IsNative"
				    value      	"false"))
			    quid       	"4CAD9EBF0383"
			    documentation 	"предыдущий назначенный"
			    exportControl 	"Public"
			    Containment 	"By Value")))))
	(object Class "SearchUvsQuerySummaryBuilder"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/DocCardChange/DocCardSupport/SearchUvsQuerySummaryBuilder.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C7B7E31004F_CUSTOM_IMPORT*"
		    value      	"//#UC START# *4C7B7E31004F_CUSTOM_IMPORT*¤import java.util.Collections;¤import java.util.HashMap;¤import java.util.ArrayList;¤import java.util.Arrays;¤import java.util.LinkedHashMap;¤import java.util.List;¤import java.util.Map;¤¤import org.apache.commons.lang.StringUtils;¤¤import com.atlassian.confluence.pages.Page;¤import com.atlassian.confluence.pages.PageManager;¤¤import ru.garant.MDProcess.DocCardChange.DocCardChangeDAO.CopyDAO;¤import ru.garant.MDProcess.DocCardChange.DocCardChangeDAO.DocTypeDAO;¤import ru.garant.MDProcess.DocCardChange.DocCardCommon.DocCardManager;¤import ru.garant.MDProcess.DocCardChange.Entities.UVSStateMachine;¤import ru.garant.shared.GCI.I18N.Messages;¤import ru.garant.MDProcess.ConfluenceMDChange.ReportSupport.SearchRequest.AssignedToTypeValues;¤import ru.garant.MDProcess.ConfluenceMDChange.Requests.AbstractRequestLifeCycle.AbstractEvent;¤import ru.garant.MDProcess.ConfluencePlugins.SelectBoxPair;¤import ru.garant.MDProcess.ConfluencePlugins.LabelSupport.Label;¤import ru.garant.MDProcess.ConfluencePlugins.LabelSupport.LabelGroupName;¤import ru.garant.MDProcess.ConfluencePlugins.SearchSupport.BaseSearchForm;¤//#UC END# *4C7B7E31004F_CUSTOM_IMPORT*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C7B7E31004F_CUSTOM_CLASS_DEFINITION*"
		    value      	"//#UC START# *4C7B7E31004F_CUSTOM_CLASS_DEFINITION*¤//#UC END# *4C7B7E31004F_CUSTOM_CLASS_DEFINITION*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C7B7E31004F_CUSTOM_METHODS_AND_DATA*"
		    value      	(value Text 
|//#UC START# *4C7B7E31004F_CUSTOM_METHODS_AND_DATA*¤	private static List<AbstractEvent> sRejectedEvents = Collections.synchronizedList(Arrays.asList(¤			(AbstractEvent)UVSStateMachine.EV_DISCARDED_RESPONSE¤		));¤¤	private List<String> convertDocumentRejected(List<String> documentRejectedIds){¤		List<String> result = new ArrayList<String>(documentRejectedIds.size());¤		for(String id : documentRejectedIds){¤			for (AbstractEvent ae : sRejectedEvents) {¤				if(ae.getGuid().equals(id)){¤					result.add(ae.getTitle());¤				}¤			}¤		}¤		return result;¤	}¤	¤	private List<String> convertSources(List<String> initSources) {¤		List<String> sources = null;¤		try{¤			List<CopyDAO> copies = DpoUvsHelper.getAllCopiesSubclasses();¤			sources = new ArrayList<String>();¤			for(String initSource : initSources){¤				for(CopyDAO copy : copies){¤					if(copy.getClass().getSimpleName().equals(initSource)){¤						sources.add(copy.getSearchingPanelText());¤					}¤				}¤			}¤		}catch(Exception ex){¤			Logs.LOG_SEX(ex);¤		}¤		return sources;¤	}¤¤	private List<String> getPageTitleById(Object[] ids){¤		List<String> titles = new ArrayList<String>();¤		PageManager pageManager = ContainerManager.Factory.get().getPageManager();¤		for(Object id : ids){¤			long value = Long.parseLong((String)id);¤			Page page = pageManager.getPage(value);¤			if(page != null){¤				if(page.getLabels().contains(DpoUvsHelper.getOgvNotCurrentLabel())){¤					titles.add("!" + page.getTitle());¤				}else{¤					titles.add(page.getTitle());¤				}¤			}¤		}¤		return titles;¤	}¤	¤	private List<String> getRestrictedStatuses(long restrictedStatusesId){¤		List<String> restrictedStatuses = new ArrayList<String>();¤		restrictedStatuses.add(getMessage(DpoUvsHelper.MESSAGES_RESTRICTED_STATUS[(int)restrictedStatusesId - 1]));¤		return restrictedStatuses;¤	}¤	¤	private List<String> getTypeNames(Object[] typeIds){¤		List<String> typeNames = new ArrayList<String>();¤		List<DocTypeDAO> typesList = DocCardManager.Factory.get().getDocTypeDAO();¤		for(Object typeId : typeIds){¤			long valueId = Long.parseLong((String)typeId);¤			for(DocTypeDAO type : typesList){¤				if(type.getId() == valueId){¤					typeNames.add(type.getName());¤				}¤			}¤		}¤		return typeNames;¤	}¤	¤	private List<String> convertLongToStringList(Object[] numbers){¤		List<String> numbersString = new ArrayList<String>();¤		for(Object number : numbers){¤			numbersString.add(number + "");¤		}¤		return numbersString;¤	}¤	¤	private List<String> convertManagerCommandsValToText(List<String> commandsVal){¤		List<String> textList = new ArrayList<String>();¤		for(Object commandVal : commandsVal){¤			textList.add(DpoUvsHelper.getManagerCommands().get(commandVal));¤		}¤		return textList;¤	}¤¤	private String currentStateToString(String stateValue) {¤		LabelGroupName currentStateValue = LabelGroupName.valueOf(stateValue);¤		switch(currentStateValue) {¤		case LIFE_CYCLE_STATE_FINAL:¤			return Messages.Factory.messages().get("searchgroup.final");¤		case LIFE_CYCLE_STATE_IN_WORK:¤			return Messages.Factory.messages().get("searchgroup.in.work");¤		case LIFE_CYCLE_STATE_ALL:¤			return Messages.Factory.messages().get("searchgroup.all.name");¤		default:¤			return "";¤		}¤	}¤¤	private String assignedToToString(String assignedToValue) {¤		AssignedToTypeValues assignedTo = AssignedToTypeValues.valueOf(assignedToValue);¤		switch(assignedTo) {¤		case ASSIGNED_TO_TYPE_MY_TEAM:¤			return Messages.Factory.messages().get("searchgroup.my.team");¤		case ASSIGNED_TO_TYPE_GROUPS:¤			return Messages.Factory.messages().get("searchgroup.groups");¤		case ASSIGNED_TO_TYPE_ALL:¤			return Messages.Factory.messages().get("searchgroup.all.name");¤		default:¤			return "";¤		}¤	}¤¤	private void buildUvsQueryDates(Map<String, List<String>> result, String message, String dateRangePredefined, String dateFrom, String dateTo){¤		if (dateRangePredefined != null){¤			if (dateRangePredefined.equals(getMessage(BaseSearchForm.DATE_RANGE_PREDEFINED_TODAY))) {¤				result.put(message, Arrays.asList(getMessage(BaseSearchForm.DATE_RANGE_PREDEFINED_TODAY)));¤			}¤			else if (dateRangePredefined.equals(getMessage(BaseSearchForm.DATE_RANGE_PREDEFINED_YESTERDAY))) {¤				result.put(message, Arrays.asList(getMessage(BaseSearchForm.DATE_RANGE_PREDEFINED_YESTERDAY)));¤			}¤			else if (dateRangePredefined.equals(getMessage(BaseSearchForm.DATE_RANGE_PREDEFINED_LAST_WEEK))) {¤				result.put(message, Arrays.asList(getMessage(BaseSearchForm.DATE_RANGE_PREDEFINED_LAST_WEEK)));¤			}¤			else if (dateRangePredefined¤					.equals(getMessage(BaseSearchForm.DATE_RANGE_PREDEFINED_LAST_MONTH))) {¤				result.put(message, Arrays.asList(getMessage(BaseSearchForm.DATE_RANGE_PREDEFINED_LAST_MONTH)));¤			}¤			else if (dateRangePredefined.equals(getMessage(BaseSearchForm.DATE_RANGE_PREDEFINED_CUSTOM))) {¤				if (!StringUtils.isEmpty(dateFrom))¤					result.put(message + " " + getMessage("searchpagedaterange.from"), Arrays.asList(dateFrom));¤				if (!StringUtils.isEmpty(dateTo))¤					result.put(message + " " + getMessage("searchpagedaterange.to"), Arrays.asList(dateTo));¤			}¤		}¤	}¤	¤	private List<String> convertPropsValToText(List<String> commandsVal){¤		List<String> textList = new ArrayList<String>();¤		for(String commandVal : commandsVal){¤			for(ru.garant.MDProcess.ConfluenceMDChange.MdcCommon.RequestUserProperty prop : getForm().getAllUserProperties()){¤				if(commandVal.equals(prop.getLabelName())){¤					textList.add(prop.getName());¤				}¤			}¤		}¤		return textList;¤	}¤	//#UC END# *4C7B7E31004F_CUSTOM_METHODS_AND_DATA*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"WikiPageID (wiki)"
		    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/SearchUvsQuerySummaryBuilder|4C7B7E31004F
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (wiki)"
		    value      	"wiki")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"20609608711"))
	    quid       	"4C7B7E31004F"
	    documentation 	"строит отчеты по поиску запросов"
	    stereotype 	"SimpleClass"
	    superclasses 	(list inheritance_relationship_list
		(object Inheritance_Relationship
		    quid       	"4C7B7EC500C3"
		    supplier   	"Logical View::MDProcess::ConfluencePlugins::SearchSupport::BaseSearchSummaryBuilder"
		    quidu      	"47A97CDE00DD"))
	    used_nodes 	(list uses_relationship_list
		(object Uses_Relationship
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"20609612179"))
		    quid       	"4C7B7EE00292"
		    stereotype 	"uses"
		    supplier   	"Logical View::MDProcess::DocCardChange::DocCardSupport::SearchUvsQueryForm"
		    quidu      	"4C7B6E4F001F"))
	    operations 	(list Operations
		(object Operation "UvsQuerySearchSummaryBuilder"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"final")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4C7B7E5D0049_BODY*"
			    value      	(value Text 
|//#UC START# *4C7B7E5D0049_BODY*¤		super(formData);¤		//#UC END# *4C7B7E5D0049_BODY*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"20609609667"))
		    quid       	"4C7B7E5D0049"
		    stereotype 	"ctor"
		    parameters 	(list Parameters
			(object Parameter "form_data"
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ResolvedTypeGuid"
				    value      	"4C7B6E4F001F")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ElementCreationOrder"
				    value      	"20609610567"))
			    quid       	"4C7B7E930320"
			    type       	"SearchUvsQueryForm"
			    quidu      	"4C7B6E4F001F"))
		    concurrency 	"Sequential"
		    opExportControl 	"Public"
		    uid        	0)
		(object Operation "get_form"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ResolvedTypeGuid"
			    value      	"4C7B6E4F001F")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4C7B7E9A018C*"
			    value      	(value Text 
|//#UC START# *4C7B7E9A018C*¤		return (SearchUvsQueryForm) super.getForm();¤		//#UC END# *4C7B7E9A018C*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"20609611200"))
		    quid       	"4C7B7E9A018C"
		    documentation 	"получить форму"
		    result     	"SearchUvsQueryForm"
		    concurrency 	"Sequential"
		    opExportControl 	"Protected"
		    uid        	0
		    quidu      	"4C7B6E4F001F"))
	    language   	"MDA Generator")
	(object Class "UvsQueryDataProvider"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/DocCardChange/DocCardSupport/UvsQueryDataProvider.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C7CC70102E7_CUSTOM_IMPORT*"
		    value      	"//#UC START# *4C7CC70102E7_CUSTOM_IMPORT*¤import java.util.ArrayList;¤import java.util.Arrays;¤import java.util.Date;¤import java.util.List;¤¤import ru.garant.MDProcess.ConfluencePlugins.Search.LogicOperation;¤import ru.garant.MDProcess.ConfluencePlugins.SearchSupport.BaseSearchForm;¤import ru.garant.MDProcess.DocCardChange.DocCardChangeDAO.CopyDAO;¤import ru.garant.MDProcess.DocCardChange.DocCardSupport.SearchUvsQueryForm.AssignedToInVersionsAsValues;¤¤import org.apache.commons.collections.CollectionUtils;¤¤import com.atlassian.gzipfilter.org.apache.commons.lang.StringUtils;¤¤import ru.garant.shared.GCI.I18N.Messages;¤¤//#UC END# *4C7CC70102E7_CUSTOM_IMPORT*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C7CC70102E7_CUSTOM_CLASS_DEFINITION*"
		    value      	"//#UC START# *4C7CC70102E7_CUSTOM_CLASS_DEFINITION*¤//#UC END# *4C7CC70102E7_CUSTOM_CLASS_DEFINITION*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C7CC70102E7_CUSTOM_METHODS_AND_DATA*"
		    value      	(value Text 
|//#UC START# *4C7CC70102E7_CUSTOM_METHODS_AND_DATA*¤	protected void setDocIssuer () {¤		final List<Long> docIssuers = getForm().getDocIssuer();¤		if (CollectionUtils.isNotEmpty(docIssuers)) {¤			getQueryData().setDocIssuer(docIssuers);¤		}¤	}¤¤	@Override¤	protected void setAssignedTo() {¤		if(AssignedToInVersionsAsValues.PREVIOUS_ASSIGNED_TO.name().equals(getForm().getRadioAssignedTo())){¤			getQueryData().setExecutorsInHistory(extractAssignedTo(¤				getForm().getAssignedTo()¤				, getForm().getAllAssignedTo()¤				,getForm().getAssignedToType()¤			));¤		} else {¤			super.setAssignedTo();			¤		}¤		¤	}¤¤	protected void setTopic () {¤		if(getForm().getTopic() != 0){¤			getQueryData().setTopic(getForm().getTopic());¤		}¤	}¤		¤	protected void setDocumentNumber () {¤		final List<String> documentNumbers = new ArrayList<String>();¤		if(getForm().getDocumentNumber() != null && !getForm().getDocumentNumber().isEmpty()){¤			documentNumbers.add(getForm().getDocumentNumber());¤		}¤		if (CollectionUtils.isNotEmpty(documentNumbers)) {¤			getQueryData().setDocumentNumber(documentNumbers);¤		}¤	}¤	¤	protected void setDocumentResources(){¤		List<String> sources = new ArrayList<String>();¤		try{¤			List<CopyDAO> copies = DpoUvsHelper.getAllCopiesSubclasses();¤			sources = new ArrayList<String>();¤			if(getForm().getSources() != null){¤				for(String initSource : getForm().getSources()){¤					for(CopyDAO copy : copies){¤						if(copy.getClass().getSimpleName().equals(initSource)){¤							sources.add(copy.getSearchingPanelText());¤						}¤					}¤				}¤			}¤		}catch(Exception ex){¤			Logs.LOG_SEX(ex);¤		}¤		if(CollectionUtils.isNotEmpty(sources)){¤			getQueryData().setSources(sources);¤		}¤		List<String> labels = new ArrayList<String>();¤		if(getForm().getUvsCurrentDocActive()){¤			labels.add("rt_current_doc");¤		}¤		if(getForm().getUoCurrentDocActive()){¤			labels.add("rt_uo_current_doc");¤		}¤		if(getForm().getUoQueryActive()){¤			labels.add("rt_uo_query");¤		}¤		if(getForm().getRpQueryActive()){¤			labels.add("rt_region_query");¤		}¤		¤		if(labels.size() > 0){¤			getQueryData().addLabelGroup(LogicOperation.AND, createLabelGroup(labels));¤		}¤		¤		if(getForm() instanceof SearchUvsQueryForm && CollectionUtils.isNotEmpty(sources)){¤			getQueryData().setSearchCopies(true);¤		}	¤	}¤	¤	protected void setDocumentCopy () {¤		if(getForm().getCopies() != null && !getForm().getCopies().isEmpty() && !getForm().getCopies().equals("searchgroup.with.copies.not.important")){¤			getQueryData().setDocumentCopy(getForm().getCopies());¤			if(getForm() instanceof SearchUvsQueryForm){¤				getQueryData().setSearchCopies(true);¤			}	¤		}¤	}¤¤	protected void setInternet () {¤		if(getForm().getInternet() != null){¤			getQueryData().setDocumentCopy(getForm().getCopies());¤			if(getForm() instanceof SearchUvsQueryForm){¤				getQueryData().setInternet(getForm().getInternet());¤			}	¤		}¤	}¤¤	protected void setBlocks () {¤		if(StringUtils.isNotEmpty(getForm().getBlocks())){¤			getQueryData().setBlocks(getForm().getBlocks());¤		}¤	}¤¤	protected void setInstancy () {¤		List<Byte> instancies = new ArrayList<Byte>();¤		if(getForm().getInstancyUnknown()){¤			instancies.add(Byte.parseByte("0"));¤		}¤		if(getForm().getInstancyOrdinary()){¤			instancies.add(Byte.parseByte("1"));¤		}¤		if(getForm().getInstancyQuickly()){¤			instancies.add(Byte.parseByte("2"));¤		}¤		if(getForm().getInstancyInVersion()){¤			instancies.add(Byte.parseByte("3"));¤		}		¤		if(CollectionUtils.isNotEmpty(instancies)){¤			getQueryData().setInstancy(instancies);¤		}¤	}¤¤	protected void setStatus () {¤		List<Byte> statuses = new ArrayList<Byte>();¤		if(getForm().getStatusUnknown()){¤			statuses.add(Byte.parseByte("0"));¤		}¤		if(getForm().getStatusIsNotConnected()){¤			statuses.add(Byte.parseByte("1"));¤		}¤		if(getForm().getStatusIsConnected()){¤			statuses.add(Byte.parseByte("2"));¤		}¤		if(getForm().getStatusIsConnectedInVersion()){¤			statuses.add(Byte.parseByte("3"));¤		}		¤		if(CollectionUtils.isNotEmpty(statuses)){¤			getQueryData().setStatus(statuses);¤		}¤	}¤¤	protected void setDocumentRejected(){¤		if (getForm().getDAOIdForSelectedRejectedReason().size() > 0) {¤			getQueryData().setDocumentRejected(getForm().getDAOIdForSelectedRejectedReason());¤		}¤	}¤	¤	protected void setDocumentDate () {¤		if(getForm().getDocumentDateRangePredefined() == null){¤			return;¤		}¤		long documentBeginDate = getDateFrom(getForm().getDocumentDateRangePredefined(), getForm().getDocumentBeginDate());¤		long documentEndDate = getDateTo(getForm().getDocumentDateRangePredefined(), getForm().getDocumentEndDate());¤		boolean isAnyDate = getForm().getDocumentDateRangePredefined().equals(Messages.Factory.messages().get(BaseSearchForm.DATE_RANGE_PREDEFINED_ANYDATE));¤		if (!isAnyDate && documentBeginDate != 0){¤			getQueryData ().setDocumentStartDate(new Date(documentBeginDate));¤		}¤		if (!isAnyDate && documentEndDate != 0) {¤			getQueryData ().setDocumentEndDate(new Date(documentEndDate));¤		}¤	}¤¤	protected void setDocumentType () {¤		final List<String> documentTypes = getForm().getDocumentType();¤		if (CollectionUtils.isNotEmpty(documentTypes)) {¤			getQueryData().setDocumentType(documentTypes);¤		}¤	}¤¤	protected void setRegistrationNumber () {¤		final String registrationNumbers = getForm().getRegistrationNumber();¤		if(StringUtils.isNotEmpty(registrationNumbers)){¤			getQueryData().setRegistrationNumber(Arrays.asList(registrationNumbers));¤		}¤	}¤	¤	protected void setRegistrationDate () {¤		if(getForm().getRegistrationDateRangePredefined() == null){¤			return;¤		}¤		long registrationBeginDate = getDateFrom(getForm().getRegistrationDateRangePredefined(), getForm().getRegistrationBeginDate());¤		long registrationEndDate = getDateTo(getForm().getRegistrationDateRangePredefined(), getForm().getRegistrationEndDate());¤		boolean isAnyDate = getForm().getRegistrationDateRangePredefined().equals(Messages.Factory.messages().get(BaseSearchForm.DATE_RANGE_PREDEFINED_ANYDATE));¤		if (!isAnyDate && registrationBeginDate != 0){¤			getQueryData ().setRegistrationStartDate(new Date(registrationBeginDate));¤		}¤		if (!isAnyDate && registrationEndDate != 0) {¤			getQueryData ().setRegistrationEndDate(new Date(registrationEndDate));¤		}¤	}¤	¤	protected void setRestrictedStatus(){¤		final List<Long> restrictedStatus = new ArrayList<Long>();¤		if(getForm().getRestrictedStatus() > 0){¤			restrictedStatus.add(getForm().getRestrictedStatus());¤		}¤		if (CollectionUtils.isNotEmpty(restrictedStatus)) {¤			getQueryData().setRestrictedStatus(restrictedStatus);¤		}¤	}¤	¤	protected void setWaitingFromOgvDates () {¤		long sendInOgvStartDate = getDateFrom(getForm().getWaitingFromOgvDateRangePredefined(), getForm().getWaitingFromOgvDateFrom());¤		long sendInOgvEndDate = getDateTo(getForm().getWaitingFromOgvDateRangePredefined(), getForm().getWaitingFromOgvDateTo());¤		boolean isAnyDate = getForm().getWaitingFromOgvDateRangePredefined().equals(Messages.Factory.messages().get(BaseSearchForm.DATE_RANGE_PREDEFINED_ANYDATE));¤		if (!isAnyDate && sendInOgvStartDate != 0){¤			getQueryData ().setSendInOgvStartDate(new Date(sendInOgvStartDate));¤		}¤		if (!isAnyDate && sendInOgvEndDate != 0){¤			getQueryData ().setSendInOgvEndDate(new Date(sendInOgvEndDate));¤		}¤	}¤¤	protected void setSendInUoDates () {¤		long sendInUoStartDate = getDateFrom(getForm().getSendInUoDateRangePredefined(), getForm().getSendInUoDateFrom());¤		long sendInUoEndDate = getDateTo(getForm().getSendInUoDateRangePredefined(), getForm().getSendInUoDateTo());¤		boolean isAnyDate = getForm().getSendInUoDateRangePredefined().equals(Messages.Factory.messages().get(BaseSearchForm.DATE_RANGE_PREDEFINED_ANYDATE));¤		if (!isAnyDate && sendInUoStartDate != 0){¤			getQueryData ().setSendInUoStartDate(new Date(sendInUoStartDate));¤		}¤		if (!isAnyDate && sendInUoEndDate != 0) {¤			getQueryData ().setSendInUoEndDate(new Date(sendInUoEndDate));¤		}¤	}¤	¤	protected void setSelectedItems(){¤		getQueryData ().setIds(getForm().getSelectedItems());¤	}¤	¤	protected void setManagerCommands(){¤		List<String> managerCommands = getForm().getManagerCommands();¤		getQueryData().addLabelGroup(LogicOperation.AND, createLabelGroup(managerCommands));¤	}¤	¤	//#UC END# *4C7CC70102E7_CUSTOM_METHODS_AND_DATA*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"DerivedImplement"
		    value      	"{}")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"DerivedOverload"
		    value      	(value Text 
|{"47A9B1B0031A":{"need_collect_children":"false"}}
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ImplementSelectType"
		    value      	"all")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"OverloadSelectType"
		    value      	"include")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ApplyedGens"
		    value      	"All")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"WikiPageID (wiki)"
		    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/UvsQueryDataProvider|4C7CC70102E7
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (wiki)"
		    value      	"wiki")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"20609613658"))
	    quid       	"4C7CC70102E7"
	    documentation 	"преобразует данные формы поиска в данные поисковика"
	    stereotype 	"SimpleClass"
	    superclasses 	(list inheritance_relationship_list
		(object Inheritance_Relationship
		    quid       	"4C7CDAF902CE"
		    supplier   	"Logical View::MDProcess::ConfluenceMDChange::ReportSupport::RequestQueryDataProvider"
		    quidu      	"47A9AF450302"))
	    operations 	(list Operations
		(object Operation "UvsQueryDataProvider"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"final")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4C7CC75D01C9_BODY*"
			    value      	(value Text 
|//#UC START# *4C7CC75D01C9_BODY*¤		super((RequestSearchQueryData)queryData, form);¤		//#UC END# *4C7CC75D01C9_BODY*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"20609614565"))
		    quid       	"4C7CC75D01C9"
		    stereotype 	"ctor"
		    parameters 	(list Parameters
			(object Parameter "query_data"
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ResolvedTypeGuid"
				    value      	"476283DE0107")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ElementCreationOrder"
				    value      	"20609615459"))
			    quid       	"4C7CC7800249"
			    type       	"RequestSearchQueryData"
			    quidu      	"476283DE0107")
			(object Parameter "form"
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ResolvedTypeGuid"
				    value      	"4C7B6E4F001F")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ElementCreationOrder"
				    value      	"20609616009"))
			    quid       	"4C7CC7800299"
			    type       	"SearchUvsQueryForm"
			    quidu      	"4C7B6E4F001F"))
		    concurrency 	"Sequential"
		    opExportControl 	"Public"
		    uid        	0)
		(object Operation "get_form"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ResolvedTypeGuid"
			    value      	"4C7B6E4F001F")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4C7CC79401BB*"
			    value      	(value Text 
|//#UC START# *4C7CC79401BB*¤		return (SearchUvsQueryForm) super.getForm();¤		//#UC END# *4C7CC79401BB*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"20609616632"))
		    quid       	"4C7CC79401BB"
		    documentation 	"получение формы"
		    result     	"SearchUvsQueryForm"
		    concurrency 	"Sequential"
		    opExportControl 	"Protected"
		    uid        	0
		    quidu      	"4C7B6E4F001F"))
	    language   	"MDA Generator")
	(object Class "EditDocCard"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/DocCardChange/DocCardSupport/EditDocCard.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C7F6BDB0380_CUSTOM_IMPORT*"
		    value      	"//#UC START# *4C7F6BDB0380_CUSTOM_IMPORT*¤import ru.garant.MDProcess.DocCardChange.DocCardChangeDAO.BlockDAO;¤import ru.garant.MDProcess.DocCardChange.DocCardChangeDAO.CopyDAO;¤import ru.garant.MDProcess.DocCardChange.DocCardChangeDAO.DocTypeDAO;¤import ru.garant.MDProcess.DocCardChange.DocCardChangeDAO.GarDocDAO;¤import ru.garant.MDProcess.DocCardChange.DocCardChangeDAO.UVSQuestDAO;¤import ru.garant.MDProcess.DocCardChange.DocCardCommon.CurrentDocFinderManager;¤import ru.garant.MDProcess.DocCardChange.DocCardCommon.DPOUVSManager;¤import ru.garant.MDProcess.DocCardChange.DocCardCommon.DocCardIndexManager;¤import ru.garant.MDProcess.DocCardChange.DocCardCommon.DocCardManager;¤import ru.garant.MDProcess.DocCardChange.DocCardCommon.OGVLinksManager;¤import ru.garant.MDProcess.DocCardChange.Entities.ConnectedStatus;¤import ru.garant.MDProcess.DocCardChange.Entities.DocCard;¤import ru.garant.MDProcess.DocCardChange.Entities.InstancyTypes;¤import ru.garant.MDProcess.DocCardChange.Entities.UVSQuery;¤import ru.garant.MDProcess.DocCardChange.Entities.UVSStateMachine;¤import ru.garant.MDProcess.ConfluencePlugins.CommonVelocityContext.GlobalHelper;¤import ru.garant.MDProcess.ConfluencePlugins.DiscussionsSupport.GarantHibernate;¤import ru.garant.MDProcess.ConfluencePlugins.DiscussionsSupport.UnreadDocument;¤¤import java.util.ArrayList;¤import java.util.Collection;¤import java.util.Date;¤import java.util.List;¤import java.util.Map;¤import java.util.Set;¤¤import ru.garant.shared.FSM.NotStarted;¤import ru.garant.shared.FSM.PreEnterFailed;¤import ru.garant.shared.FSM.PreExitFailed;¤import ru.garant.shared.FSM.SaveFailed;¤import ru.garant.shared.FSM.StateNotChanged;¤import ru.garant.shared.FSM.ValidationFailed;¤import ru.garant.shared.GCI.I18N.Messages;¤¤import net.sf.hibernate.HibernateException;¤¤import org.apache.commons.collections.CollectionUtils;¤import org.apache.commons.lang.StringEscapeUtils;¤import org.apache.commons.lang.StringUtils;¤import org.springframework.orm.hibernate.SessionFactoryUtils;¤¤import com.atlassian.user.User;¤import com.atlassian.confluence.pages.Page;¤import com.atlassian.confluence.spaces.Space;¤import com.atlassian.confluence.user.AuthenticatedUserThreadLocal;¤//#UC END# *4C7F6BDB0380_CUSTOM_IMPORT*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C7F6BDB0380_CUSTOM_CLASS_DEFINITION*"
		    value      	"//#UC START# *4C7F6BDB0380_CUSTOM_CLASS_DEFINITION*¤//#UC END# *4C7F6BDB0380_CUSTOM_CLASS_DEFINITION*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C7F6BDB0380_ACTION_NAME*"
		    value      	(value Text 
|//#UC START# *4C7F6BDB0380_ACTION_NAME*¤		return new String (getClass ().getName ());¤		//#UC END# *4C7F6BDB0380_ACTION_NAME*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C7F6BDB0380_CUSTOM_METHODS_AND_DATA*"
		    value      	(value Text 
|//#UC START# *4C7F6BDB0380_CUSTOM_METHODS_AND_DATA*¤	@Override¤	protected void extendVelocityContext(Map<String, Object> context) {¤		// TODO Auto-generated method stub¤		context.put("doccard", getPageDocCard());¤	}¤¤	@Override¤	protected DocCard getEntity() {¤		// TODO Auto-generated method stub¤		return doccard_;¤	}¤¤	@Override¤	protected String getTemplatePath() {¤		// TODO Auto-generated method stub¤		return TEMPLATE_PATH;¤	}¤¤	@Override¤	protected DocCard loadEntity(long entityId) {¤		// TODO Auto-generated method stub¤		doccard_ = DocCard.Factory.get(entityId);¤		return doccard_;¤¤	}¤¤	protected PageDocCard getPageDocCard() {¤		// TODO Auto-generated method stub¤		return new PageDocCard(getEntity());¤	}¤	¤	private DocCard doccard_;¤	private static String TEMPLATE_PATH = "/DocCardChange/DocCardView/doccard-prop-include.vm";¤	¤	private boolean needToSearchDocCard(boolean hasChangesInMainAttributes){¤		if(hasChangesInMainAttributes && ¤		   (   getDocissuer () != 0¤				|| getDocumentNumber () != null¤				|| getDocumentDate () != null¤				|| (StringUtils.isNotEmpty(getName()) && !getName().equals(getEntity().getName()) && (getDocumentDate () != null || getEntity().getCreationDate() != null))¤		   )	¤			|| getRegistrationNumber () != null¤			|| getRegistrationDate () != null)¤			{¤			return true;¤		}¤		if(getAdditionalIssuers() == null && getEntity().getAdditionalDocIssuers() == null){¤			return false;¤		}	¤		if(getEntity().getAdditionalDocIssuers() != null && getEntity().getAdditionalDocIssuers().size() > 0 && (getAdditionalIssuers() == null || getAdditionalIssuers().size() == 0)¤				|| (getEntity().getAdditionalDocIssuers() == null || getEntity().getAdditionalDocIssuers().size() == 0) && getAdditionalIssuers() != null && getAdditionalIssuers().size() > 0){¤			return true;¤		}	¤			¤		List<Long> docIssuers = getEntity().getAdditionalDocIssuers();¤		for(long docIssuer : docIssuers){¤			if(!getAdditionalIssuers().contains(docIssuer)){¤				return true;¤			}	¤		}¤		¤		if(getAdditionalNumbers() == null && getEntity().getAdditionalNumbers() == null){¤			return false;¤		}	¤		if(getEntity().getAdditionalNumbers() != null && getEntity().getAdditionalNumbers().size() > 0 && (getAdditionalNumbers() == null || getAdditionalNumbers().size() == 0)¤				|| (getEntity().getAdditionalNumbers() == null || getEntity().getAdditionalNumbers().size() == 0) && getAdditionalNumbers() != null && getAdditionalNumbers().size() > 0){¤			return true;¤		}¤¤		List<String> numbers = getEntity().getAdditionalNumbers();¤		for(String number : numbers){¤			if(!getAdditionalNumbers().contains(number)){¤				return true;¤			}	¤		}¤		return false;¤	}¤	¤	public boolean validate(String type, Date documentDate, String number, String name, long existDocIssuer, long topic) {¤		return validateImpl (type, documentDate, number, name, existDocIssuer, topic);¤	}¤	¤	public boolean validateImpl (String type, Date documentDate, String number, String name, long existDocIssuer, long topic) {¤			if(validateTopic(topic) == false){¤				setErrorCode(VALIDATION_DOCUMENT_TOPIC_EXIST);¤				setErrorMessage("Такой топик уже есть!");¤				return false;¤			}¤			¤			boolean notEdit = false;¤			boolean hasType =¤				false == StringUtils.isEmpty(type)¤				&& false == type.equals("0")¤				&& false == type.equals(ru.garant.shared.GCI.I18N.Messages.Factory.messages().get("uvsquery.type.not.specified"))¤			;¤			boolean hasNumber =  StringUtils.isNotEmpty(number);¤			boolean hasCreationDate =  documentDate != null;		¤			boolean hasTitle = StringUtils.isNotEmpty(name);¤¤			if (false == new CreateUvsQuery().validateAttributes (hasType, hasNumber, hasCreationDate, hasTitle)) {¤				notEdit = true;¤			}¤			¤			if(notEdit){¤				setErrorCode(VALIDATION_EMPTY_DOCUMENT_TYPE);¤				setErrorMessage(Messages.Factory.messages().get("editdoccard.empty.document.type"));¤				return false;¤			}¤		return true;¤	}¤	¤	private boolean validateTopic(long topic){¤		if(topic != 0){¤			GarDocDAO gardoc = DocCardManager.Factory.get().getGarDocFromTopic(topic);¤			if(gardoc != null && gardoc.getId() != getEntityId()){¤				return false;¤			}¤		}¤		return true;¤	}¤	¤	public boolean hasChangedMainAttributes(String entityName, String entityNumber, Date entityCreationDate, String name, String number, Date documentDate, long docIssuer, String type, long topic, long entityTopic){¤		boolean hasChangesInName = (¤				(StringUtils.isEmpty(entityName) && StringUtils.isNotEmpty(name)) ¤				|| ¤				(StringUtils.isNotEmpty(entityName)	&& entityName.equals(name) == false)¤				); ¤		boolean hasChangesInNumber = (¤				(StringUtils.isEmpty(entityNumber) && StringUtils.isNotEmpty(number))		¤				|| ¤				(StringUtils.isNotEmpty(entityNumber)&& entityNumber.equals(number) == false));¤		boolean hasChangesInCreationDate = (¤				(entityCreationDate == null	&& documentDate != null)¤				|| ¤				(documentDate == null	&& entityCreationDate != null)¤				|| ¤				(entityCreationDate != null	&& (¤						//один тип Timestamp, другой Date¤						entityCreationDate.compareTo(documentDate) != 0¤						)¤				)		¤				);¤		boolean hasChangesInTopic = ((topic == 0 && entityTopic != 0) ¤								  || (topic != 0 && entityTopic == 0) ¤								  || (topic != 0 && entityTopic != 0 && topic != entityTopic)); ¤		if(hasChangesInName || hasChangesInNumber || hasChangesInCreationDate || StringUtils.isNotEmpty(type) || docIssuer!= 0 || hasChangesInTopic){¤			return true;¤		}¤		return false;¤	}¤	¤	public String execute () throws Exception {¤		boolean hasChangesInMainAttributes = hasChangedMainAttributes(getEntity().getName(), getEntity().getNumber(), getEntity().getCreationDate(), getName(), getDocumentNumber(), getDocumentDate(), getDocissuer (), getDocumentType(), getTopic(), getEntity().getTopic());¤		¤		String number = getDocumentNumber (); ¤		Date documentDate = getDocumentDate ();¤		String name = getName();¤		DocTypeDAO docType = GarDocDAO.get(getEntity().getPage().getId()).getType();¤		String typeIdString = "0";¤		if(docType != null){¤			typeIdString = docType.getId() + "";¤		}¤		String type = (getDocumentType() != null)? getDocumentType() : typeIdString;¤		¤		long existDocIssuer = (getDocissuer () != 0)? getDocissuer () : getEntity().getDocIssuer();¤		¤		if (hasChangesInMainAttributes && !validate(type, documentDate, number, name, existDocIssuer, getTopic())) {¤			return SUCCESS;¤		}¤¤		String registrationNumber =  getRegistrationNumber (); ¤		Date registrationDate = getRegistrationDate ();¤		¤		Collection<GarDocDAO> docCardList = new ArrayList<GarDocDAO>();;¤		if(needToSearchDocCard(hasChangesInMainAttributes)){¤			docCardList = CurrentDocFinderManager.Factory.get().getDocCardForAdd(¤					existDocIssuer¤					, number¤					, documentDate¤					, registrationNumber¤					, registrationDate¤					, name¤					, (getAdditionalIssuers() == null)?null:new ArrayList(getAdditionalIssuers())¤					, (getAdditionalNumbers() == null)?null:new ArrayList(getAdditionalNumbers())¤					, type¤					, getEntity().getPage().getId()¤					, getEntity().getPage().getSpaceKey()¤			);¤		}¤		boolean existOurDocCard = false;¤		if(docCardList.size() == 1){¤			GarDocDAO curGarDoc = docCardList.iterator().next();¤			if(curGarDoc.getPage().getId() == getEntity().getPage().getId()){¤				existOurDocCard = true;¤			}			¤		}¤		¤		if(docCardList.size() > 0 && getDocumentNumber () != null && !existOurDocCard){¤			long id = getEntity().getPage().getId();¤			Set<CopyDAO> copiesSet = GarDocDAO.get(id).getCopies();¤			List<UVSQuestDAO> uvsQueryList = DocCardManager.Factory.get().getUvsQueryByDocCardId(id, "12");¤			List<String> copiesList = new ArrayList<String>();¤			for(CopyDAO copy : copiesSet){¤					copiesList.add(copy.getType());¤			}¤			for (UVSQuestDAO proxy : uvsQueryList) {¤				UVSQuery uq = UVSQuery.Factory.get(proxy.getId());¤				copiesList.add(uq.getCopyType());¤			}	¤¤			docCardList.add(GarDocDAO.get(getEntity().getPage().getId()));¤			String ret =  DocCardManager.Factory.get().findGarDocForUvsQuery(true, docCardList, "", copiesList);¤			¤			setErrorCode(VALIDATION_EXISTING_DOC_CARD_NUMBER);¤			setErrorMessage(ret);¤			¤			addToResponse(createContent());¤			return SUCCESS;¤			¤		}¤¤		if(docCardList == null || docCardList.size() == 0 || existOurDocCard){¤			DocCard docCard = getEntity();¤		¤			if(getDocissuer () != 0){¤				long docIssuer = docCard.getDocIssuer();¤				if(docIssuer != getDocissuer ()){¤					long docCardId = docCard.getPage().getId();¤					docCard.setDocIssuer(getDocissuer());¤					Page parent = ContainerManager.Factory.get().getPageManager().getPage(getDocissuer());¤					String parentTitle = docCard.getPage().getParent().getTitle();¤					ContainerManager.Factory.get().getSpaceManager().fastMovePageWithoutEvent(docCard.getPage(), parent);¤					String oldTitle = docCard.getPage().getTitle();¤					String newTitle = oldTitle.replace(parentTitle, parent.getTitle());¤					docCard.getPage().setTitle(newTitle);¤					¤					List<UVSQuestDAO> uvsQueries = DocCardManager.Factory.get().getUvsQueryForDocCard(docCardId);¤					for(UVSQuestDAO uvsQueryDAO : uvsQueries){¤						editRequest (uvsQueryDAO, getDocissuer());							¤					}¤				}¤			}¤			¤			if(getDocumentType () != null){¤				docCard.setType(getDocumentType());¤			}¤¤			docCard.setName(getName());¤			docCard.setNumber(getDocumentNumber());¤			docCard.setCreationDate(getDocumentDate());¤			docCard.setRegistrationNumber(getRegistrationNumber());¤			docCard.setRegistrationDate(getRegistrationDate());¤			DpoUvsHelper.addLabelGardocMinust(docCard, getRegistrationNumber(), getRegistrationDate());			¤			docCard.getAdditionalDocIssuers().clear();¤			if (CollectionUtils.isNotEmpty(getAdditionalIssuers())) {¤				docCard.getAdditionalDocIssuers().addAll(getAdditionalIssuers());¤			}¤			¤			docCard.getAdditionalNumbers().clear();¤			if (CollectionUtils.isNotEmpty(getAdditionalNumbers())) {¤				docCard.getAdditionalNumbers().addAll(getAdditionalNumbers());¤			}¤			¤			docCard.setTopic(getTopic());¤			¤			if (CollectionUtils.isNotEmpty(getLinkedTopics())) {¤				docCard.setLinkedTopics(getLinkedTopics());¤			}else{¤				docCard.setLinkedTopics(new ArrayList<String>());¤			}¤			¤			if(getIsConnected() != null){¤				docCard.setIsConnected(getIsConnected());¤			}¤			¤			if(getInstancy() != null){¤				docCard.setInstancy(getInstancy());¤			}¤			¤			if(getIncludeInVersionDate() != null){¤				docCard.setIncludeInVersionDate(getIncludeInVersionDate());¤			}¤¤			docCard.setInternet(getInternet());¤¤			String username = getRemoteUser().getName();¤			String spacekey = docCard.getPage().getSpaceKey();¤			long id = docCard.getPage().getId();¤			boolean hasNotification = DpoUvsHelper.getPaperCopyNotification (username, spacekey, id);¤			String pagesValues = DpoUvsHelper.getAutoCompleteProvider(username, spacekey).getFirstSuggestedValue("creation.paper.copy.notification.for.rp");¤			String values = pagesValues;¤			String idString = id + "";¤			if(getPaperCopyNotification() && hasNotification == false){¤				if(values != null && StringUtils.isNotEmpty(values)){¤					values += ", " + id;¤				}else{¤					values = idString;¤				}¤			}else if(getPaperCopyNotification() == false && hasNotification){¤				if(values != null && StringUtils.isNotEmpty(values)){¤					int index = values.indexOf(id + "");¤					int indexInString = values.indexOf(idString) + idString.length() + 2;¤					values = values.substring(0, index);¤					if(pagesValues.length() > indexInString){¤						values += pagesValues.substring(indexInString);¤					}¤				}¤			}¤			if((getPaperCopyNotification() && hasNotification == false)¤					|| (getPaperCopyNotification() == false && hasNotification)){¤				if(StringUtils.isEmpty(values)){¤					DpoUvsHelper.getAutoCompleteProvider(username, spacekey).clearAllValues("creation.paper.copy.notification.for.rp");¤				}else{¤					DpoUvsHelper.getAutoCompleteProvider(username, spacekey).pushSuggestedValue("creation.paper.copy.notification.for.rp", values);¤				}¤				DpoUvsHelper.getAutoCompleteProvider(username, spacekey).store();¤			}¤¤			if(getBlocks() != null && getBlocks().size() > 0){¤				java.util.List<BlockDAO> blocksDAO = DocCardManager.Factory.get().getBlocksFromNames(getBlocks(), getSpaceKey());¤				docCard.setBlocks(blocksDAO);¤			}else{¤				docCard.setBlocks(new ArrayList<BlockDAO>());¤			}¤			¤			try{¤				docCard.commit();¤			}catch(Exception ex){¤				Logs.LOG_SEX(ex);¤				setErrorCode(VALIDATION_FAILED_GENERAL_CODE);¤				setErrorMessage(ex.getMessage());¤			}¤			¤			SessionFactoryUtils.getSession(ContainerManager.Factory.get().getSessionFactory(), false).flush();¤			¤			DocCardIndexManager.Factory.get().saveDocCardIndex(docCard.getPage().getId(), DocCardLuceneReIndex.DOC_CARD_CHANGE_EVENT);¤		}else{¤			setErrorCode(VALIDATION_EXISTING_DOC_CARD);¤			setErrorMessage(getText("editdoccard.validation.exist.doccard"));¤		}¤		addToResponse(createContent());¤		return SUCCESS;¤	}¤¤	public String getResponseContent() {¤		if(getErrorCode() == VALIDATION_EXISTING_DOC_CARD_NUMBER){¤			StringBuilder ret = new StringBuilder();¤			ret.append("<has-error code=\"").append(getErrorCode()).append("\"><![CDATA[");¤			ret.append(getErrorMessage());¤			ret.append("]]></has-error>");¤			return ret.toString();¤		}¤		return super.getResponseContent ();¤		¤	}¤//не используется ни где¤	public String openWindowChooseDocCard(){¤		String ids = getChooseDocCardText ();¤		List<GarDocDAO> gardocFiltrated = getGarDocFromIds(ids);¤		String resp =  DocCardManager.Factory.get().renderSelectAdditionalSource(gardocFiltrated, new ArrayList<GarDocDAO>());¤		setChooseDocCardText (StringEscapeUtils.escapeJavaScript(StringEscapeUtils.unescapeHtml(resp)));¤		return SUCCESS;¤	}¤	¤	private List<GarDocDAO> getGarDocFromIds(String ids){¤		List<GarDocDAO> gardocFiltrated = new ArrayList<GarDocDAO> ();¤		String[] idsArray = ids.split(",");¤		for(String idString : idsArray){¤			long id = Long.parseLong(idString);¤			if(getEntity() == null || id != getEntity().getPage().getId()){¤				GarDocDAO garDocDAO = null;¤				try {¤					garDocDAO = GarDocDAO.get(id);¤				} catch (HibernateException e) {¤					// TODO Auto-generated catch block¤					Logs.LOG_SEX(e);¤				}¤				gardocFiltrated.add(garDocDAO);¤			}¤		}¤		return gardocFiltrated;¤	}¤	¤	private void editRequest(UVSQuestDAO uvsQueryDAO, long docIssuerId)throws StateNotChanged, NotStarted, ValidationFailed, SaveFailed,¤			PreEnterFailed, PreExitFailed {¤		boolean isOdUoResponsible = false;¤		boolean isOdUoResponsibleForProjectRequerst = false;¤		UVSQuery uvsQuery = UVSQuery.Factory.getForSystemRollBackAssigned(uvsQueryDAO.getId());¤		Space space = uvsQuery.getPage().getSpace();¤		String executor = OGVLinksManager.Factory.get(space.getKey()).getResponsibleByOgv(docIssuerId, isOdUoResponsible, isOdUoResponsibleForProjectRequerst);¤		if(uvsQuery.getCurrentState().getName().equals(UVSStateMachine.ST_ASSIGNED.getName())){¤			if(StringUtils.isNotEmpty(executor)){¤				uvsQuery.setExecutor(executor);¤			}else{¤				uvsQuery.setEvent(UVSStateMachine.EV_SYSTEM_ROOL_BACK);¤			}¤			setUnreadState(space.getKey(), uvsQuery.getPage());¤			uvsQuery.commit();¤		}¤	}¤	¤	private void setUnreadState(String spaceKey, Page uvsQueryPage){¤		GarantHibernate uds = new GarantHibernate(ContainerManager.Factory.get().getSessionFactory());¤		UnreadDocument ud = uds.get(UnreadDocument.class, uvsQueryPage.getId());¤//удаляем непрочитанность у создателя запроса¤		User user = AuthenticatedUserThreadLocal.getUser();¤		if (user != null && ud != null) {¤			ud.removeFromUnreadOwn(user.getName());¤		}¤//создаем непрочитанную дискуссию, если ее нет¤		if (ud == null) {¤			ud = new UnreadDocument(uvsQueryPage.getId());¤			uds.save(ud);¤			ud.setLastModificationDate(uvsQueryPage.getLastModificationDate());¤		}¤// добавляем непрочитанность создателю¤		ud.addUserThatUnreadOwn(uvsQueryPage.getCreatorName());¤// добавляем непрочитанность менеджеру		¤		User u = DPOUVSManager.Factory.get(spaceKey).getLeaderDpoUvs();¤		if (u != null) {¤			ud.addUserThatUnreadOwn(u.getName());¤		}¤		¤//непрочитанность и посылка нотификации для исполнителей устанавливается в commit¤	}¤	¤	¤	private long docissuer_;¤	¤	protected long getDocissuer () {¤		return docissuer_;¤	}¤¤	public void setDocissuer (long docissuer) {¤		docissuer_ = docissuer;¤	}¤¤	private String documentType_ = null;¤	¤	protected String getDocumentType () {¤		return documentType_;¤	}¤¤	public void setDocumentType (String documentType) {¤		documentType_ = documentType;¤	}¤¤	private String documentNumber_ = null;¤	¤	public String getDocumentNumber () {¤		return documentNumber_;¤	}¤¤	public void setDocumentNumber (String documentNumber) {¤		if(StringUtils.isNotEmpty(documentNumber)){¤			documentNumber_ = documentNumber.trim();¤		}else{¤			documentNumber_ = documentNumber;¤		}¤	}¤	private java.util.Date documentDate_ = null;¤	¤	protected java.util.Date getDocumentDate () {¤		return documentDate_;¤	}¤¤	public void setDocumentDate (java.util.Date documentDate) {¤		documentDate_ = documentDate;¤	}¤¤	private String registrationNumber_ = null;¤	¤	public String getRegistrationNumber () {¤		return registrationNumber_;¤	}¤¤	public void setRegistrationNumber (String registrationNumber) {¤		if(StringUtils.isNotEmpty(registrationNumber)){¤			registrationNumber_ = registrationNumber.trim();¤		}else{¤			registrationNumber_ = registrationNumber;¤		}¤	}¤	private java.util.Date registrationDate_ = null;¤	¤	protected java.util.Date getRegistrationDate () {¤		return registrationDate_;¤	}¤¤	public void setRegistrationDate (java.util.Date registrationDate) {¤		registrationDate_ = registrationDate;¤	}¤	¤	private String name_ = null;¤	public String getName () {¤		return name_;¤	}¤¤	public void setName (final String name) {¤		if(name != null && name.length() > 512){¤			name_ = name.substring(0, 511);¤		}else{¤			name_ = name;¤		}		¤	}¤	¤	public List<String> additionalNumbers_ = new ArrayList<String>();	¤	public List<String> getAdditionalNumbers() {¤		return additionalNumbers_;¤	}¤	¤	public void setAdditionalNumbers (List<String> numbers) {¤		additionalNumbers_ = numbers;¤	}¤	¤	private List<Long> additionalIssuers_ = new ArrayList<Long>();	¤	public List<Long> getAdditionalIssuers() {¤		return additionalIssuers_;¤	}¤	¤	public void setAdditionalIssuers (List<String> docIssuers) {¤		//ses: XWORK - docIssuers оказывается массив строк¤		additionalIssuers_.clear();¤		for (String i : docIssuers) {¤			long issuer = Long.valueOf(i);¤			if(issuer != 0){¤				additionalIssuers_.add(issuer);¤			}¤		}¤	}¤	¤	private String onPopupSubmit;¤    public String getOnPopupSubmit()¤    {¤        return onPopupSubmit;¤    }¤¤    public void setOnPopupSubmit(String onPopupSubmit)¤    {¤        this.onPopupSubmit = onPopupSubmit;¤    }¤	¤	private String chooseDocCardText_ = null;¤	public String getChooseDocCardText () {¤		return chooseDocCardText_;¤	}¤¤	public void setChooseDocCardText (String chooseDocCardText) {¤		chooseDocCardText_ = chooseDocCardText;¤	}¤¤	private String selectedId_ = null;¤	public String getSelectedId () {¤		return selectedId_;¤	}¤¤	public void setSelectedId (String selectedId) {¤		selectedId_ = selectedId;¤	}¤¤	private String docCardId_ = null;¤	public String getDocCardId () {¤		return docCardId_;¤	}¤¤	public void setDocCardId (String docCardId) {¤		docCardId_ = docCardId;¤	}¤¤	private ConnectedStatus isConnected_ = null;¤	¤	protected ConnectedStatus getIsConnected () {¤		return isConnected_;¤	}¤¤	public void setIsConnected (String isConnected) {¤		if(isConnected == null){¤			isConnected_ = null;¤		} else if(isConnected.equals(ConnectedStatus.IS_CONNECTED_IN_VERSION.name())){¤			isConnected_ = ConnectedStatus.IS_CONNECTED_IN_VERSION;¤		} else if(isConnected.equals(ConnectedStatus.IS_CONNECTED.name())){¤			isConnected_ = ConnectedStatus.IS_CONNECTED;¤		} else if(isConnected.equals(ConnectedStatus.IS_NOT_CONNECTED.name())){¤			isConnected_ = ConnectedStatus.IS_NOT_CONNECTED;¤		}else{¤			isConnected_ = ConnectedStatus.UNKNOWN;¤		}¤	}¤¤	private java.util.List<String> blocks_;¤	public void setBlocks (final java.util.List<String> blocks) {¤		blocks_ = blocks;¤	}¤¤	public java.util.List<String> getBlocks(){¤		return blocks_;¤	}¤¤	private InstancyTypes instancy_;¤	¤	protected InstancyTypes getInstancy () {¤		return instancy_;¤	}¤¤	public void setInstancy (String instancy) {¤		if(instancy == null){¤			instancy_ = null;¤		} else if(instancy.equals(InstancyTypes.IN_VERSION.name())){¤			instancy_ = InstancyTypes.IN_VERSION;¤		} else if(instancy.equals(InstancyTypes.ORDINARY.name())){¤			instancy_ = InstancyTypes.ORDINARY;¤		} else if(instancy.equals(InstancyTypes.QUICKLY.name())){¤			instancy_ = InstancyTypes.QUICKLY;¤		}else{¤			instancy_ = InstancyTypes.UNKNOWN;¤		}¤	}¤	¤	private Date includeInVersionDate_;¤	¤	public Date getIncludeInVersionDate(){¤		return includeInVersionDate_;¤	}¤¤	public void setIncludeInVersionDate(final Date includeInVersionDate) {¤		includeInVersionDate_ = includeInVersionDate;¤	}¤¤¤	private boolean internet_;¤	¤	protected boolean getInternet () {¤		return internet_;¤	}¤¤	public void setInternet (boolean internet) {¤		internet_ = internet;¤	}¤¤	private boolean paperCopyNotification_;¤	¤	protected boolean getPaperCopyNotification () {¤		return paperCopyNotification_;¤	}¤¤	public void setPaperCopyNotification (boolean paperCopyNotification) {¤		paperCopyNotification_ = paperCopyNotification;¤	}¤¤	private long topic_;¤	¤	protected long getTopic () {¤		return topic_;¤	}¤¤	public void setTopic (long topic) {¤		topic_ = topic;¤	}¤¤	private List<String> linkedTopics_ = new ArrayList<String>();¤	¤	protected List<String> getLinkedTopics () {¤		return linkedTopics_;¤	}¤¤	public void setLinkedTopics (List<String> linkedTopics) {¤		linkedTopics_ = linkedTopics;¤	}¤	¤	public String getSpaceKey(){¤		return getEntity().getPage().getSpaceKey();¤	}¤¤	public String getCurrentUser(){¤		return getRemoteUser().getName();¤	}¤¤	public String doMove() throws Exception {¤		if(StringUtils.isEmpty(getSelectedId ()) || !StringUtils.isNumeric(getSelectedId ())){¤			return ERROR;¤		}¤		¤		long id = Long.parseLong(getSelectedId());¤		GarDocDAO curGarDoc = GarDocDAO.get(id); ¤		long entityId = Long.parseLong(getDocCardId());¤		Page entityPage = (Page) ContainerManager.Factory.get().getPageManager().getAbstractPage(entityId);¤		List<UVSQuestDAO> curUvsQuestList = DocCardManager.Factory.get().getUvsQueryForDocCard(entityId);¤		for(UVSQuestDAO curUvsQuest : curUvsQuestList){¤			UVSQuery uvsQuery = UVSQuery.Factory.get(curUvsQuest.getId());¤			//перенос запроса		¤			DocCard docCard = DocCard.Factory.get(curGarDoc.getId());¤			uvsQuery.setDocCard(docCard);¤			uvsQuery.commit();¤			ContainerManager.Factory.get().getSpaceManager().movePageWithoutEvent(uvsQuery.getPage(), curGarDoc.getPage());¤			SessionFactoryUtils.getSession(ContainerManager.Factory.get().getSessionFactory(), false).flush();¤			DpoUvsHelper.changeUvsQueryVersionsGardoc(curUvsQuest.getId(), curGarDoc);¤		}	¤//удаление карточки¤		DocCardIndexManager.Factory.get().saveDocCardIndex(entityId, DocCardLuceneReIndex.DOC_CARD_REMOVE_EVENT);¤¤		DocCard.Factory.get(entityId).remove();¤		SessionFactoryUtils.getSession(ContainerManager.Factory.get().getSessionFactory(), false).flush();¤		ContainerManager.Factory.get().getLabelManager().removeAllLabels(entityPage);¤		ContainerManager.Factory.get().getPageManager().trashPage(entityPage);¤		¤		addToResponse ("<existingquery>" + GlobalHelper.getBaseUrl() + "/pages/viewpage.action?pageId=" + id + "</existingquery>");¤		return SUCCESS;¤	}¤	¤	protected static final int VALIDATION_EXISTING_DOC_CARD = 1010;¤	protected static final int VALIDATION_EXISTING_DOC_CARD_NUMBER = 1200;¤	protected static final int VALIDATION_EMPTY_DOCUMENT_TYPE = 1300;¤	protected static final int VALIDATION_DOCUMENT_TOPIC_EXIST = 1400;¤	//#UC END# *4C7F6BDB0380_CUSTOM_METHODS_AND_DATA*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"WikiPageID (wiki)"
		    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/EditDocCard|4C7F6BDB0380
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (wiki)"
		    value      	"wiki")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"20609617885"))
	    quid       	"4C7F6BDB0380"
	    documentation 	"редактирование карточки"
	    stereotype 	"KActionPlugin"
	    superclasses 	(list inheritance_relationship_list
		(object Inheritance_Relationship
		    quid       	"4C7F6C17007B"
		    supplier   	"Logical View::MDProcess::ConfluencePlugins::EntitySupport::EditEntity"
		    quidu      	"4B289B6C0245"))
	    used_nodes 	(list uses_relationship_list
		(object Uses_Relationship
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"20609618811"))
		    quid       	"4C7F72490261"
		    stereotype 	"uses"
		    supplier   	"Logical View::MDProcess::DocCardChange::DocCardSupport::PageDocCard"
		    quidu      	"4C7F721F0100"))
	    language   	"MDA Generator")
	(object Class "PageDocCard"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/DocCardChange/DocCardSupport/PageDocCard.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C7F721F0100_CUSTOM_IMPORT*"
		    value      	"//#UC START# *4C7F721F0100_CUSTOM_IMPORT*¤import com.atlassian.confluence.pages.Page;¤import com.atlassian.confluence.user.AuthenticatedUserThreadLocal;¤import ru.garant.MDProcess.ConfluencePlugins.AutoCompleteValues.AutoCompleteProvider;¤import ru.garant.MDProcess.ConfluencePlugins.CommonVelocityContext.GlobalHelper;¤¤import java.sql.Connection;¤import java.sql.PreparedStatement;¤import java.sql.ResultSet;¤import java.sql.SQLException;¤import java.util.ArrayList;¤import java.util.Collection;¤import java.util.Date;¤import java.util.List;¤¤import org.apache.commons.lang.StringUtils;¤import org.springframework.jdbc.core.JdbcTemplate;¤import org.springframework.jdbc.core.RowCallbackHandler;¤import org.springframework.jdbc.datasource.SingleConnectionDataSource;¤¤import ru.garant.MDProcess.DocCardChange.DocCardChangeDAO.AbstractECopyDAO;¤import ru.garant.MDProcess.DocCardChange.DocCardChangeDAO.CopyDAO;¤import ru.garant.MDProcess.DocCardChange.DocCardChangeDAO.ECopyDAO;¤import ru.garant.MDProcess.DocCardChange.DocCardChangeDAO.PaperScanCopy;¤import ru.garant.MDProcess.DocCardChange.DocCardChangeDAO.SiteCopyDAO;¤import ru.garant.MDProcess.DocCardChange.DocCardChangeDAO.UVSQuestDAO;¤import ru.garant.MDProcess.DocCardChange.DocCardCommon.DocCardManager;¤import ru.garant.MDProcess.DocCardChange.DocCardCommon.OGVLinksManager;¤¤import ru.garant.shared.GCI.I18N.Messages;¤import ru.garant.shared.GCL.DateUtils;¤¤//#UC END# *4C7F721F0100_CUSTOM_IMPORT*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C7F721F0100_CUSTOM_CLASS_DEFINITION*"
		    value      	"//#UC START# *4C7F721F0100_CUSTOM_CLASS_DEFINITION*¤//#UC END# *4C7F721F0100_CUSTOM_CLASS_DEFINITION*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C7F721F0100_CUSTOM_METHODS_AND_DATA*"
		    value      	(value Text 
|//#UC START# *4C7F721F0100_CUSTOM_METHODS_AND_DATA*¤	protected DocCard doccard_ = null;¤¤	public String getIsConnectedName(){¤		return DpoUvsHelper.getIsConnectedName(getDocCard());¤	}¤¤	public boolean getInternet(){¤		return getDocCard().getInternet();¤	}¤¤	public String getInstancyName(){¤		return DpoUvsHelper.getInstancyName(getDocCard());¤	}¤¤	public String getIncludeInVersionDate(){¤		return DpoUvsHelper.getIncludeInVersionDate(getDocCard());¤	}¤¤	public boolean getPaperCopyNotification(){¤		return DpoUvsHelper.getPaperCopyNotification(AuthenticatedUserThreadLocal.getUsername(), getDocCard ().getPage().getSpaceKey(), getDocCard ().getPage().getId());¤	}¤¤	public boolean getIsConnectedBlock(String name){¤		return DpoUvsHelper.getIsConnectedBlock(name, getDocCard().getBlocks());¤	}¤¤	public String getMainConnectedBlockName(){¤		return DpoUvsHelper.getMainConnectedBlockName(getDocCard().getBlocks());¤	}¤¤	public List<String> getInitialBlockNames(){¤		return DpoUvsHelper.getInitialBlockNames(getDocCard().getBlocks());¤	}¤¤	public String getTopic(){¤		return (getDocCard().getTopic() == 0)? ru.garant.shared.GCI.I18N.Messages.Factory.messages().get("doccard.no.topic") : getDocCard().getTopic() + "";¤	}¤¤	public String getEtap(){¤		return (getDocCard().getTopic() == 0)?  "неизвестно": getStageFromTopic(getDocCard().getTopic());¤	}¤	¤	private String getStageFromTopic(long topic){¤		final String[] name = new String[1];¤		name[0] = "неизвестно";¤		try {¤			final JdbcTemplate template = new JdbcTemplate(new SingleConnectionDataSource(ContainerManager.Factory.get().getSession().connection(), true));¤			String sql = "SELECT st.name FROM archi_document_state a, statetitles st where st.stageid=a.stageid and a.topic=" + topic + " order by a.id desc limit 2";¤¤			template.query(sql, new RowCallbackHandler() {¤				public void processRow(ResultSet rs) throws SQLException {¤					 if(name[0].equals("неизвестно")){¤						 name[0] = rs.getString(1);¤						 if(name[0].equals("Классификация")){¤							 if(rs.next()){¤								 name[0] = rs.getString(1);¤							 }¤						 }¤					 }¤				}				¤			});¤		} catch (Exception e) {¤			Logs.LOG_SEX(e);¤		}¤		if(name[0].equals("Классификация")){¤			name[0] = "неизвестно";¤		}¤		return name[0];¤	}¤	¤	public String getLink(){¤		String link = ContainerManager.Factory.get().getContentPropertyManager().getStringProperty(getDocCard().getPage(), "link");¤		return link;¤	}¤	//#UC END# *4C7F721F0100_CUSTOM_METHODS_AND_DATA*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"WikiPageID (wiki)"
		    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/PageDocCard|4C7F721F0100
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (wiki)"
		    value      	"wiki")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"20609620302"))
	    quid       	"4C7F721F0100"
	    documentation 	"обертка для сущности карточки, предоставляющие данные в удобном для web-формы виде"
	    stereotype 	"SimpleClass"
	    operations 	(list Operations
		(object Operation "PageDocCard"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"final")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4C7F740500E3_BODY*"
			    value      	(value Text 
|//#UC START# *4C7F740500E3_BODY*¤		try {¤			doccard_ = DocCard.Factory.get(pageId);¤		} catch (Exception e) {¤			Logs.LOG_SEX(e);¤			throw new IllegalArgumentException(e);¤		}¤		//#UC END# *4C7F740500E3_BODY*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"20609621169"))
		    quid       	"4C7F740500E3"
		    stereotype 	"ctor"
		    parameters 	(list Parameters
			(object Parameter "page_id"
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ResolvedTypeGuid"
				    value      	"3DBFFD860205")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ElementCreationOrder"
				    value      	"20609622068"))
			    quid       	"4C7F7426015D"
			    type       	"long long"
			    quidu      	"3DBFFD860205"))
		    concurrency 	"Sequential"
		    opExportControl 	"Public"
		    uid        	0)
		(object Operation "PageDocCard"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"final")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4C7F74300277_BODY*"
			    value      	(value Text 
|//#UC START# *4C7F74300277_BODY*¤		doccard_ = doccard;¤		if (doccard_ == null) {¤			Logs.LOG_E("AbstractPageRequest::ctor - request is null");¤			throw new IllegalArgumentException("AbstractPageRequest::ctor - request is null");¤		}¤		//#UC END# *4C7F74300277_BODY*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"20609622703"))
		    quid       	"4C7F74300277"
		    stereotype 	"ctor"
		    parameters 	(list Parameters
			(object Parameter "doccard"
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ResolvedTypeGuid"
				    value      	"4C3713F60316")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ElementCreationOrder"
				    value      	"20609623591"))
			    quid       	"4C7F744500A6"
			    type       	"DocCard"
			    quidu      	"4C3713F60316"))
		    concurrency 	"Sequential"
		    opExportControl 	"Public"
		    uid        	0)
		(object Operation "get_doc_card"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ResolvedTypeGuid"
			    value      	"4C3713F60316")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4C7F7455013E*"
			    value      	(value Text 
|//#UC START# *4C7F7455013E*¤		return doccard_;¤		//#UC END# *4C7F7455013E*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"20609624213"))
		    quid       	"4C7F7455013E"
		    documentation 	"возвращает карточку"
		    result     	"DocCard"
		    concurrency 	"Sequential"
		    opExportControl 	"Public"
		    uid        	0
		    quidu      	"4C3713F60316")
		(object Operation "get_doc_issuer"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ResolvedTypeGuid"
			    value      	"3DBFFE240068")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4C7F748802B8*"
			    value      	(value Text 
|//#UC START# *4C7F748802B8*¤		long pageId = getDocCard ().getDocIssuer();¤		if(pageId == 0){¤			return "";¤		}¤		Page page = ContainerManager.Factory.get().getPageManager().getPage(pageId);¤		if(page == null){¤			return "";¤		}	¤		return page.getTitle();¤		//#UC END# *4C7F748802B8*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"20609625159"))
		    quid       	"4C7F748802B8"
		    documentation 	"возвращает эмитент"
		    result     	"string"
		    concurrency 	"Sequential"
		    opExportControl 	"Public"
		    uid        	0
		    quidu      	"3DBFFE240068")
		(object Operation "get_document_type"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ResolvedTypeGuid"
			    value      	"3DBFFE240068")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4C7F74BC03A2*"
			    value      	(value Text 
|//#UC START# *4C7F74BC03A2*¤		return getDocCard ().getType();¤		//#UC END# *4C7F74BC03A2*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"20609626153"))
		    quid       	"4C7F74BC03A2"
		    documentation 	"возвращает тип документа"
		    result     	"string"
		    concurrency 	"Sequential"
		    opExportControl 	"Public"
		    uid        	0
		    quidu      	"3DBFFE240068")
		(object Operation "get_document_number"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ResolvedTypeGuid"
			    value      	"3DBFFE240068")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4C7F74E001C7*"
			    value      	(value Text 
|//#UC START# *4C7F74E001C7*¤		return getDocCard ().getNumber();¤		//#UC END# *4C7F74E001C7*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"20609627139"))
		    quid       	"4C7F74E001C7"
		    documentation 	"возвращает номер документа"
		    result     	"string"
		    concurrency 	"Sequential"
		    opExportControl 	"Public"
		    uid        	0
		    quidu      	"3DBFFE240068")
		(object Operation "get_document_date"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ResolvedTypeGuid"
			    value      	"3DBFFE240068")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4C7F750E0158*"
			    value      	(value Text 
|//#UC START# *4C7F750E0158*¤		Date date = getDocCard ().getCreationDate();¤		String dateString = DateUtils.formatDdMMyyyDate(date);¤		if(dateString.equals(Messages.Factory.messages().get("no.data"))){¤			dateString = "";¤		}¤		return dateString;¤		//#UC END# *4C7F750E0158*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"20609628088"))
		    quid       	"4C7F750E0158"
		    documentation 	"возвращает дату документа"
		    result     	"string"
		    concurrency 	"Sequential"
		    opExportControl 	"Public"
		    uid        	0
		    quidu      	"3DBFFE240068")
		(object Operation "get_registration_number"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ResolvedTypeGuid"
			    value      	"3DBFFE240068")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4C7F753003D8*"
			    value      	(value Text 
|//#UC START# *4C7F753003D8*¤		return getDocCard ().getRegistrationNumber();¤		//#UC END# *4C7F753003D8*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"20609629039"))
		    quid       	"4C7F753003D8"
		    documentation 	"возвращает номер регистрациии в МЮ"
		    result     	"string"
		    concurrency 	"Sequential"
		    opExportControl 	"Public"
		    uid        	0
		    quidu      	"3DBFFE240068")
		(object Operation "get_registration_date"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ResolvedTypeGuid"
			    value      	"3DBFFE240068")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4C7F755401C7*"
			    value      	(value Text 
|//#UC START# *4C7F755401C7*¤		Date date = getDocCard ().getRegistrationDate();¤		String dateString = DateUtils.formatDdMMyyyDate(date);¤		if(dateString.equals(Messages.Factory.messages().get("no.data"))){¤			dateString = "";¤		}¤		return dateString;¤		//#UC END# *4C7F755401C7*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"20609629993"))
		    quid       	"4C7F755401C7"
		    documentation 	"возвращает дату регистрации в МЮ"
		    result     	"string"
		    concurrency 	"Sequential"
		    opExportControl 	"Public"
		    uid        	0
		    quidu      	"3DBFFE240068")
		(object Operation "get_restricted_status"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ResolvedTypeGuid"
			    value      	"3DBFFE240068")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4C7F75B50177*"
			    value      	(value Text 
|//#UC START# *4C7F75B50177*¤		byte id = getDocCard ().getRestrictedStatus();¤		if(id > 0)¤			return ru.garant.shared.GCI.I18N.Messages.Factory.messages().get(DpoUvsHelper.MESSAGES_RESTRICTED_STATUS[id - 1]);¤		else¤			return "";¤		//#UC END# *4C7F75B50177*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"20609630969"))
		    quid       	"4C7F75B50177"
		    documentation 	"возвращает ограничение распространения"
		    result     	"string"
		    concurrency 	"Sequential"
		    opExportControl 	"Public"
		    uid        	0
		    quidu      	"3DBFFE240068")
		(object Operation "get_copies"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ResolvedTypeGuid"
			    value      	"4758F5D603BC")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4C7F75EC0289*"
			    value      	(value Text 
|//#UC START# *4C7F75EC0289*¤		StringBuilder result = new StringBuilder();¤		int count = 0;¤		String nameCopy;¤		List<String> resultCopyList = new ArrayList<String>();¤		List<UVSQuestDAO> uvsQueries = DocCardManager.Factory.get().getUvsQueryForDocCard(getDocCard ().getPage().getId());¤¤		for(UVSQuestDAO uvsQuest : uvsQueries){¤			CopyDAO copy = uvsQuest.getCopy();¤			if(copy != null && copy.getCreationDate() != null){¤				count++;¤				result = new StringBuilder();¤				String place = ru.garant.shared.GCI.I18N.Messages.Factory.messages().get("doccard.no.values");¤				if (copy instanceof AbstractECopyDAO) {¤					if(copy instanceof PaperScanCopy){¤						nameCopy = copy.getSearchingPanelText();¤					}else if(copy instanceof ECopyDAO){¤						nameCopy = ru.garant.shared.GCI.I18N.Messages.Factory.messages().get("doccard.e.copy") + " (рассылка)";¤					}else {¤						nameCopy = ru.garant.shared.GCI.I18N.Messages.Factory.messages().get("doccard.site.copy").replace(¤							"(сайт)"¤							, "(сайт: " + ((StringUtils.isEmpty(((SiteCopyDAO)copy).getSourceWebSite())) ? "нет данных": ("<a href=\"http://" + ((SiteCopyDAO)copy).getSourceWebSite() + "\">" + ((SiteCopyDAO)copy).getSourceWebSite() + "</a>")) + ")"¤						);¤					}¤				} else{¤					nameCopy = ru.garant.shared.GCI.I18N.Messages.Factory.messages().get("doccard.paper.copy");¤				}¤				if(resultCopyList.size() > 0){¤					result.append(" </br>");¤				}¤				result.append(" </br> " + count + ". " + nameCopy + "; "); ¤	¤				result.append(ru.garant.shared.GCI.I18N.Messages.Factory.messages().get("doccard.copy.created.date") + ": " + DateUtils.formatDdMMyyyDate(copy.getCreationDate()) + "; ");¤				¤				result.append(ru.garant.shared.GCI.I18N.Messages.Factory.messages().get("doccard.copy.location") + ": ");¤	¤				//ses: for feature use¤				/*if(copy.getDepository() == null || copy.getDepository().isEmpty()){¤					result.append(ru.garant.shared.GCI.I18N.Messages.Factory.messages().get("doccard.no.values"));¤				}else{¤					result.append(copy.getDepository());¤				}*/¤				if(uvsQuest.getCopy() != null && uvsQuest.getCopy().getId() == copy.getId()){¤					place = " <a href='/pages/viewpage.action?pageId=" + uvsQuest.getId() + "'>"+ uvsQuest.getPage().getTitle() + "</a>";¤				}¤				result.append(place);¤				if(copy.getSrcTitle() != null){¤					result.append("; " + ru.garant.shared.GCI.I18N.Messages.Factory.messages().get("doccard.copy.src.title") + ": " + copy.getSrcTitle().getName());¤				}¤				if(copy.getSrcNumber() != null){¤					result.append("; " + ru.garant.shared.GCI.I18N.Messages.Factory.messages().get("doccard.copy.src.number") + ": " + copy.getSrcNumber());¤				}¤				if(copy.getSrcStartDate() != null){¤					result.append("; " + ru.garant.shared.GCI.I18N.Messages.Factory.messages().get("doccard.copy.src.date") + " начала: " + DpoUvsHelper.getSrcDateString(copy.getSrcStartDate()));¤				}¤				if(copy.getSrcEndDate() != null){¤					result.append("; " + ru.garant.shared.GCI.I18N.Messages.Factory.messages().get("doccard.copy.src.date") + " конца: " + DpoUvsHelper.getSrcDateString(copy.getSrcEndDate()));¤				}¤				if(StringUtils.isNotEmpty(copy.getSrcPage())){¤					result.append("; " + ru.garant.shared.GCI.I18N.Messages.Factory.messages().get("doccard.copy.src.page") + ": " + copy.getSrcPage());¤				}¤				¤				if (copy.getNotFullDocSpecification() != null && copy.getNotFullDocSpecification().length() > 0) {¤					result.append("; ");¤					result.append(ru.garant.shared.GCI.I18N.Messages.Factory.messages().get("doccard.copy.notfulldoc.caption") + ": ");¤					result.append(copy.getNotFullDocSpecification());¤				}¤				resultCopyList.add(result.toString());¤			}¤		}¤		if(resultCopyList.size() == 0){¤			resultCopyList.add(ru.garant.shared.GCI.I18N.Messages.Factory.messages().get("doccard.no.copies"));¤		}¤		return resultCopyList;¤		//#UC END# *4C7F75EC0289*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"20609631914"))
		    quid       	"4C7F75EC0289"
		    documentation 	"возвращает список информаций о копиях"
		    result     	"ReportSupportStringList"
		    concurrency 	"Sequential"
		    opExportControl 	"Public"
		    uid        	0
		    quidu      	"4758F5D603BC")
		(object Operation "get_name"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"22032699026")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ResolvedTypeGuid"
			    value      	"3DBFFE240068")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4CB592CE01D7*"
			    value      	(value Text 
|//#UC START# *4CB592CE01D7*¤		return getDocCard ().getName();¤		//#UC END# *4CB592CE01D7*
			    )))
		    quid       	"4CB592CE01D7"
		    documentation 	"возвращает название документа"
		    result     	"string"
		    concurrency 	"Sequential"
		    opExportControl 	"Public"
		    uid        	0
		    quidu      	"3DBFFE240068")
		(object Operation "get_additional_document_numbers"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"17382970387")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ResolvedTypeGuid"
			    value      	"4D37FD990256")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4CBC17350301*"
			    value      	(value Text 
|//#UC START# *4CBC17350301*¤		return getDocCard ().getAdditionalNumbers();¤		//#UC END# *4CBC17350301*
			    )))
		    quid       	"4CBC17350301"
		    documentation 	"возвращает добавочные номера документа"
		    result     	"OGVLinksDAO::StringList"
		    concurrency 	"Sequential"
		    opExportControl 	"Public"
		    uid        	0)
		(object Operation "get_additional_doc_issuers"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"17469159164")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ResolvedTypeGuid"
			    value      	"4C4D2A7B015D")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4CBC178B03BB*"
			    value      	(value Text 
|//#UC START# *4CBC178B03BB*¤		List<Long> pageIds = getDocCard ().getAdditionalDocIssuers();¤		if(pageIds == null || pageIds.size() == 0){¤			return new ArrayList<Page>();¤		}¤		List<Page> pages = new ArrayList<Page>();¤		for(long pageId : pageIds){¤			Page page = ContainerManager.Factory.get().getPageManager().getPage(pageId);¤			if(page != null){¤				pages.add(page);¤			}	¤		¤		}¤		return pages;¤		//#UC END# *4CBC178B03BB*
			    )))
		    quid       	"4CBC178B03BB"
		    documentation 	"возвращает дополнительные источники"
		    result     	"DocCardCommon::PageList"
		    concurrency 	"Sequential"
		    opExportControl 	"Public"
		    uid        	0)
		(object Operation "get_linked_topics"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"1430403453748590")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ResolvedTypeGuid"
			    value      	"505B465F03C6")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*5542397D02D7*"
			    value      	(value Text 
|//#UC START# *5542397D02D7*¤		return getDocCard ().getLinkedTopics();¤		//#UC END# *5542397D02D7*
			    )))
		    quid       	"5542397D02D7"
		    documentation 	"связанные топики"
		    result     	"DocCardCommon::StringList"
		    concurrency 	"Sequential"
		    opExportControl 	"Public"
		    uid        	0)
		(object Operation "get_document_type_id"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"1444998985741699")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ResolvedTypeGuid"
			    value      	"3DBFFD860205")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*5620EF4902CE*"
			    value      	
|//#UC START# *5620EF4902CE*¤		return getDocCard ().getTypeId();¤		//#UC END# *5620EF4902CE*
			    ))
		    quid       	"5620EF4902CE"
		    result     	"long long"
		    concurrency 	"Sequential"
		    opExportControl 	"Public"
		    uid        	0
		    quidu      	"3DBFFD860205"))
	    language   	"MDA Generator")
	(object Class "SearchUvsQueryColumnList"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/DocCardChange/DocCardSupport/SearchUvsQueryColumnList.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C85D5C40369_CUSTOM_IMPORT*"
		    value      	"//#UC START# *4C85D5C40369_CUSTOM_IMPORT*¤import java.util.ArrayList;¤import java.util.List;¤import ru.garant.shared.GCI.I18N.Messages;¤import ru.garant.MDProcess.ConfluenceMDChange.ReportSupport.Column;¤import ru.garant.MDProcess.ConfluenceMDChange.RequestSearchSupportTypes.RequestSortingType;¤import ru.garant.MDProcess.ConfluencePlugins.SearchSupportTypes.SortingType;¤//#UC END# *4C85D5C40369_CUSTOM_IMPORT*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C85D5C40369_CUSTOM_CLASS_DEFINITION*"
		    value      	"//#UC START# *4C85D5C40369_CUSTOM_CLASS_DEFINITION*¤//#UC END# *4C85D5C40369_CUSTOM_CLASS_DEFINITION*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C85D5C40369_CUSTOM_METHODS_AND_DATA*"
		    value      	(value Text 
|//#UC START# *4C85D5C40369_CUSTOM_METHODS_AND_DATA*¤	protected Column createImportanceColumn() {¤		return new Column("importance", "", 2, RequestSortingType.IMPORTANCE¤				.getName(), Messages.Factory.messages().get(¤				"requestcolumnlist.importance"), true, true);¤	}¤¤	protected Column createStateColumn() {¤		return new Column("documentState", Messages.Factory.messages().get(¤				"requestcolumnlist.document.state"), 27,¤				null, Messages.Factory.messages()¤						.get("requestcolumnlist.document.state"), false, true);¤	}¤¤	protected Column createDocumentNameColumn() {¤		return new Column("documentName", Messages.Factory.messages().get(¤				"requestcolumnlist.document.name"), 40,¤				null, Messages.Factory¤						.messages().get("requestcolumnlist.document.name"),¤				false, true);¤	}¤	¤	protected Column createTopicColumn() {¤		return new Column("topic", Messages.Factory.messages().get(¤				"doccard.topic"), 6,¤				null, Messages.Factory¤						.messages().get("doccard.topic"),¤				false, true);¤	}¤¤	¤	protected Column createBlocksColumn() {¤		return new Column("blocks", Messages.Factory.messages().get(¤				"uvsquery.blocks"), 6,¤				null, Messages.Factory¤						.messages().get("uvsquery.blocks"),¤				false, true);¤	}¤¤	protected Column createPublishInformationColumn() {¤		return new Column("publishinformation", Messages.Factory.messages().get(¤				"searchuvsquerycolumnlist.publishinformation"), 40,¤				null, Messages.Factory¤						.messages().get("searchuvsquerycolumnlist.publishinformation"),¤				false, true);¤	}¤	//#UC END# *4C85D5C40369_CUSTOM_METHODS_AND_DATA*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"DerivedImplement"
		    value      	"{}")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"DerivedOverload"
		    value      	(value Text 
|{"4AD8820A00B7":{"need_collect_children":"false"}}
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ImplementSelectType"
		    value      	"all")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"OverloadSelectType"
		    value      	"include")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"WikiPageID (wiki)"
		    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/SearchUvsQueryColumnList|4C85D5C40369
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (wiki)"
		    value      	"wiki")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ApplyedGens"
		    value      	"All")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"20609633127"))
	    quid       	"4C85D5C40369"
	    documentation 	"список колонок в списке поиска карточек"
	    stereotype 	"SimpleClass"
	    superclasses 	(list inheritance_relationship_list
		(object Inheritance_Relationship
		    quid       	"4C85D5F4035D"
		    supplier   	"Logical View::MDProcess::ConfluenceMDChange::ReportSupport::RequestColumnList"
		    quidu      	"47988B630125"))
	    operations 	(list Operations
		(object Operation "SearchUvsQueryColumnList"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"final")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4C85DAAA018E_BODY*"
			    value      	(value Text 
|//#UC START# *4C85DAAA018E_BODY*¤		super(resultType);¤		//#UC END# *4C85DAAA018E_BODY*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"20609634150"))
		    quid       	"4C85DAAA018E"
		    stereotype 	"ctor"
		    parameters 	(list Parameters
			(object Parameter "result_type"
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ResolvedTypeGuid"
				    value      	"4AD707C10288")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ElementCreationOrder"
				    value      	"20609635053"))
			    quid       	"4C85DACB03B4"
			    type       	"RequestSearchQueryResultType"
			    quidu      	"4AD707C10288"))
		    concurrency 	"Sequential"
		    opExportControl 	"Public"
		    uid        	0))
	    language   	"MDA Generator")
	(object Class "SearchUvsQuerySpecifedByCopiesColumnList"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/DocCardChange/DocCardSupport/SearchUvsQuerySpecifedByCopiesColumnList.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"DerivedImplement"
		    value      	"{}")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"DerivedOverload"
		    value      	(value Text 
|{"4AD8820A00B7":{"need_collect_children":"false"}}
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ImplementSelectType"
		    value      	"all")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"OverloadSelectType"
		    value      	"include")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C88D0EB023F_CUSTOM_IMPORT*"
		    value      	"//#UC START# *4C88D0EB023F_CUSTOM_IMPORT*¤import java.util.ArrayList;¤import java.util.List;¤¤import ru.garant.shared.GCI.I18N.Messages;¤¤import ru.garant.MDProcess.ConfluenceMDChange.ReportSupport.Column;¤import ru.garant.MDProcess.ConfluenceMDChange.RequestSearchSupportTypes.RequestSortingType;¤¤//#UC END# *4C88D0EB023F_CUSTOM_IMPORT*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C88D0EB023F_CUSTOM_CLASS_DEFINITION*"
		    value      	"//#UC START# *4C88D0EB023F_CUSTOM_CLASS_DEFINITION*¤//#UC END# *4C88D0EB023F_CUSTOM_CLASS_DEFINITION*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C88D0EB023F_CUSTOM_METHODS_AND_DATA*"
		    value      	(value Text 
|//#UC START# *4C88D0EB023F_CUSTOM_METHODS_AND_DATA*¤	protected Column createUvsQueryDateColumn() {¤		return new Column("uvsQueryDate", Messages.Factory.messages().get(¤				"uvsquerycolumnlist.request.date"), 5,¤				RequestSortingType.UVSQUERY_DATE.getName(), Messages.Factory¤						.messages().get("uvsquerycolumnlist.request.date"),¤				false, true);¤	}¤¤	protected Column createCreationECopyDateColumn() {¤		return new Column("creationECopyDate", Messages.Factory.messages().get(¤				"uvsquerycolumnlist.created.e.copy.date"), 40,¤				RequestSortingType.CREATION_E_COPY_DATE.getName(),¤				Messages.Factory.messages().get(¤						"uvsquerycolumnlist.created.e.copy.date"), false, true);¤	}¤	¤	protected Column createCreationPaperCopyDateColumn() {¤		return new Column("creationPaperCopyDate", Messages.Factory.messages().get(¤				"uvsquerycolumnlist.created.paper.copy.date"), 5,¤				RequestSortingType.CREATION_PAPER_COPY_DATE.getName(),¤				Messages.Factory.messages().get(¤						"uvsquerycolumnlist.created.paper.copy.date"), false, true);¤	}¤	¤	protected Column createDocumentNameColumn() {¤		return new Column("documentName", Messages.Factory.messages().get(¤				"requestcolumnlist.document.name"), 46,¤				RequestSortingType.DOC_NAME.getName(), Messages.Factory¤						.messages().get("requestcolumnlist.document.name"),¤				false, true);¤	}¤¤	//#UC END# *4C88D0EB023F_CUSTOM_METHODS_AND_DATA*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"WikiPageID (wiki)"
		    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/SearchUvsQuerySpecifedByCopiesColumnList|4C88D0EB023F
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (wiki)"
		    value      	"wiki")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"20609635952"))
	    quid       	"4C88D0EB023F"
	    documentation 	"список колонок в списке поиска карточек, специфичный для заданного поля: Наличие текста документа"
	    stereotype 	"SimpleClass"
	    superclasses 	(list inheritance_relationship_list
		(object Inheritance_Relationship
		    quid       	"4C88D11B0091"
		    supplier   	"Logical View::MDProcess::DocCardChange::DocCardSupport::SearchUvsQueryColumnList"
		    quidu      	"4C85D5C40369"))
	    operations 	(list Operations
		(object Operation "SearchUvsQuerySpecifedByCopiesColumnList"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"final")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4C88D12701CF_BODY*"
			    value      	(value Text 
|//#UC START# *4C88D12701CF_BODY*¤		super(resultType);¤		//#UC END# *4C88D12701CF_BODY*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"20609636833"))
		    quid       	"4C88D12701CF"
		    stereotype 	"ctor"
		    parameters 	(list Parameters
			(object Parameter "result_type"
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ResolvedTypeGuid"
				    value      	"4AD707C10288")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ElementCreationOrder"
				    value      	"20609637733"))
			    quid       	"4C88D1330148"
			    type       	"RequestSearchQueryResultType"
			    quidu      	"4AD707C10288"))
		    concurrency 	"Sequential"
		    opExportControl 	"Public"
		    uid        	0))
	    language   	"MDA Generator")
	(object Class "CreateDpoUvsMonthlyReport"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"DerivedImplement"
		    value      	"{}")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"DerivedOverload"
		    value      	(value Text "{}"))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ImplementSelectType"
		    value      	"all")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"OverloadSelectType"
		    value      	"include")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Factory auto reg"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Factory default impl"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Servant Pool"
		    value      	"none")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"debug log"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"factory priority"
		    value      	"0")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"force usage"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"local supervisor"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"need UC"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"singleton"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/DocCardChange/DocCardSupport/CreateDpoUvsMonthlyReport.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C8F402D015E_CUSTOM_IMPORT*"
		    value      	"//#UC START# *4C8F402D015E_CUSTOM_IMPORT*¤import ru.garant.shared.GCL.DateUtils;¤import ru.garant.shared.GCL.DateUtils.WrongFormat;¤¤import java.io.BufferedOutputStream;¤import java.io.ByteArrayOutputStream;¤import java.io.File;¤import java.io.FileInputStream;¤import java.io.FileNotFoundException;¤import java.io.FileOutputStream;¤import java.io.InputStream;¤import java.io.OutputStream;¤import java.util.ArrayList;¤import java.util.Calendar;¤import java.util.Date;¤import java.util.HashMap;¤import java.util.Iterator;¤import java.util.List;¤import java.util.Locale;¤import java.util.Map;¤import java.util.Set;¤import java.util.TreeMap;¤¤import javax.mail.Multipart;¤import javax.mail.internet.MimeBodyPart;¤import javax.mail.internet.MimeMultipart;¤import javax.servlet.http.HttpServletResponse;¤¤import net.sf.hibernate.HibernateException;¤import net.sf.hibernate.Query;¤import net.sf.hibernate.collection.SortedMap;¤¤import org.apache.commons.io.IOUtils;¤import org.apache.commons.lang.StringUtils;¤import org.apache.poi.ss.usermodel.Cell;¤import org.apache.poi.ss.usermodel.DateUtil;¤import org.apache.poi.ss.usermodel.Row;¤import org.apache.poi.ss.usermodel.Sheet;¤import org.apache.poi.ss.usermodel.Workbook;¤import org.apache.poi.ss.usermodel.WorkbookFactory;¤import org.apache.poi.ss.util.CellRangeAddress;¤import org.apache.poi.ss.util.CellReference;¤¤import com.atlassian.mail.Email;¤import com.atlassian.user.User;¤import com.atlassian.xwork.FileUploadUtils;¤import com.atlassian.xwork.FileUploadUtils.FileUploadException;¤import com.opensymphony.webwork.ServletActionContext;¤¤import ru.garant.MDProcess.ConfluencePlugins.EmailNotification.EmailGateway;¤import ru.garant.MDProcess.DocCardChange.DocCardChangeDAO.OGVLinksDAO;¤import ru.garant.MDProcess.DocCardChange.DocCardCommon.DPOUVSManager;¤import ru.garant.MDProcess.DocCardChange.DocCardCommon.OGVLinksManager;¤import ru.garant.MDProcess.DocCardChange.Entities.UVSQueryReportManager;¤import ru.garant.MDProcess.DocCardChange.Entities.UVSStateMachine.DoQuery;¤//#UC END# *4C8F402D015E_CUSTOM_IMPORT*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C8F402D015E_CUSTOM_CLASS_DEFINITION*"
		    value      	"//#UC START# *4C8F402D015E_CUSTOM_CLASS_DEFINITION*¤//#UC END# *4C8F402D015E_CUSTOM_CLASS_DEFINITION*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C8F402D015E_ACTION_NAME*"
		    value      	(value Text 
|//#UC START# *4C8F402D015E_ACTION_NAME*¤		return new String (getClass ().getName ());¤		//#UC END# *4C8F402D015E_ACTION_NAME*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C8F402D015E_CUSTOM_METHODS_AND_DATA*"
		    value      	(value Text 
|//#UC START# *4C8F402D015E_CUSTOM_METHODS_AND_DATA*¤	@Override¤	public String doDefault() throws Exception {¤		return SUCCESS;¤	}¤¤	private static String DO_QUERY_CLASS = DoQuery.class.getName();¤¤	@Override¤	public String execute() throws Exception {¤		return SUCCESS;¤	}¤¤	private static void copyCell (Cell dest, Cell src) {¤		dest.setCellType(src.getCellType());¤		dest.setCellStyle(src.getCellStyle());¤		¤		switch(src.getCellType()) {¤		case Cell.CELL_TYPE_STRING:¤			dest.setCellValue(src.getRichStringCellValue().getString());¤			break;¤		case Cell.CELL_TYPE_NUMERIC:¤			if(DateUtil.isCellDateFormatted(src)) {¤				dest.setCellValue(src.getDateCellValue());¤			} else {¤				dest.setCellValue(src.getNumericCellValue());¤			}¤			break;¤		case Cell.CELL_TYPE_BOOLEAN:¤			dest.setCellValue(src.getBooleanCellValue());¤			break;¤		case Cell.CELL_TYPE_FORMULA:¤			dest.setCellFormula(src.getCellFormula());¤			break;¤		case Cell.CELL_TYPE_BLANK:¤			break;¤		case Cell.CELL_TYPE_ERROR:¤			break;¤		default:¤			throw new NullPointerException("Cell.getSelType: unknown type");¤		}¤	}¤	¤	private static void copyColumns (int firstDestColumn, int firstSourceColumn, int lastSourceColumn, Sheet sheet) {¤		int columnsCount = lastSourceColumn-firstSourceColumn+1;¤		for (int i = sheet.getFirstRowNum(); i <= sheet.getLastRowNum(); i++) {¤			Row row = sheet.getRow(i);¤			if (row != null) {¤				boolean isOgvRow = isOgvRow(row);¤				for (int j = firstDestColumn; j < firstDestColumn+columnsCount; j++) {¤					Cell dest = sheet.getRow(i).createCell(j);¤					Cell source = sheet.getRow(i).getCell(firstSourceColumn+j-firstDestColumn);¤					if (source != null) {¤						copyCell (dest,  source);¤						¤						if (isOgvRow) {¤							if (j <= firstDestColumn+2 || j == firstDestColumn+4) {¤								dest.setCellValue(Double.valueOf(0));¤							} else if (j == firstDestColumn+3) {¤								String formula = ¤									CellReference.convertNumToColString(firstDestColumn+2) + (row.getRowNum()+1)¤									+ "-"¤									+ CellReference.convertNumToColString(firstDestColumn-5) + (row.getRowNum()+1)¤								;¤								row.getCell(firstDestColumn+3).setCellFormula(formula);¤							} else if (j == firstDestColumn+5) {¤								String formula = ¤									CellReference.convertNumToColString(firstDestColumn) + (row.getRowNum()+1)¤									+ "+"¤									+ CellReference.convertNumToColString(firstDestColumn+1) + (row.getRowNum()+1)¤									+ "-"¤									+ CellReference.convertNumToColString(firstDestColumn+4) + (row.getRowNum()+1)¤								;¤								¤								row.getCell(firstDestColumn+5).setCellFormula(formula);¤							}¤						}						¤					}¤				}¤			}			¤		}¤		¤		for (int j = 0; j < columnsCount; j++) {¤			sheet.setColumnWidth(firstDestColumn+j, sheet.getColumnWidth(firstSourceColumn+j));¤		}¤		¤		List<CellRangeAddress> cells = new ArrayList<CellRangeAddress>();¤		for (int i = 0; i < sheet.getNumMergedRegions(); i++) {¤			CellRangeAddress cur = sheet.getMergedRegion(i);¤			if (cur.getFirstColumn() >= firstSourceColumn && cur.getLastColumn() <= lastSourceColumn) {¤				int firstColumn = firstDestColumn+cur.getFirstColumn()-firstSourceColumn;¤				cells.add(new CellRangeAddress(¤					cur.getFirstRow()¤					, cur.getLastRow()¤					, firstColumn¤					, firstColumn+(cur.getLastColumn()-cur.getFirstColumn())¤				));¤			}¤		}¤		¤		for (CellRangeAddress range : cells) {¤			sheet.addMergedRegion(range);¤		}¤	}			¤	¤	private void exportData (Sheet sheet, int firstNewCell, Date startDate, Date finishDate) {¤		Map<Long, Long> countPaperCopies = UVSQueryReportManager.Factory.get().getCountCreatedPaperCopies(startDate, finishDate, getSpaceKey());		¤		Map<Long, Long> countECopies = UVSQueryReportManager.Factory.get().getСountСreatedECopiesWithoutPaper(startDate, finishDate, getSpaceKey());¤		¤		Iterator<Row> rowIterator = sheet.rowIterator();¤		while(rowIterator.hasNext()) {¤			Row row = rowIterator.next();¤			List<Long> ogvIds = getOgvIds (row);¤			if(ogvIds != null){¤				Long paperCopyCount = 0l;¤				Long eCopyCount = 0l;¤				for(long id : ogvIds){¤					if (id > 0 && countPaperCopies.containsKey(id)) {¤						paperCopyCount += countPaperCopies.get(id);¤						countPaperCopies.remove(id);¤					} ¤				¤					if (id > 0 && countECopies.containsKey(id)) {¤						eCopyCount += countECopies.get(id);¤						countECopies.remove(id);¤					} 			¤				}	¤¤				row.getCell(firstNewCell).setCellValue(paperCopyCount.doubleValue());					¤				row.getCell(firstNewCell+1).setCellValue(eCopyCount.doubleValue());					¤			}¤		}¤		¤//вычисляем дополнительные ОГВ, которых нет в файле		¤//		SortedMap<String, List<ReportParameters>> mapa = new TreeMap<String, List<ReportParameters>>();¤		Map<String, List<ReportParameters>> mapa = new TreeMap<String, List<ReportParameters>>();¤		Set<Long> keysCopy = countPaperCopies.keySet();¤		for(long key : keysCopy){¤			Long paperCopyCount = countPaperCopies.get(key);¤			Long eCopyCount = countECopies.get(key);¤			if(eCopyCount != null){¤				countECopies.remove(key);¤			}else{¤				eCopyCount = 0l;¤			}¤			getParametersFromOgvLinkId(key, paperCopyCount, eCopyCount, sheet, firstNewCell, mapa);¤			¤		}¤		keysCopy = countECopies.keySet();¤		for(long key : keysCopy){¤			Long eCopyCount = countECopies.get(key);¤			getParametersFromOgvLinkId(key, 0, eCopyCount, sheet, firstNewCell, mapa);¤		}¤//добавляем дополнительные ОГВ, которых нет в файле		¤		for(String key : mapa.keySet()){¤			List<ReportParameters> paramsList = mapa.get(key);¤			for(ReportParameters repParams : paramsList){¤				createRowWithNewOgv(key, repParams.title_, repParams.paperCopyCount_, repParams.eCopyCount_, sheet, firstNewCell);¤			}¤		}¤	}¤	¤	private void getParametersFromOgvLinkId(long key, long paperCopyCount, long eCopyCount, Sheet sheet, int firstNewCell, Map<String, List<ReportParameters>> mapa){¤		String fullName = "нет";¤		String title = null;¤		OGVLinksDAO ogvLink = OGVLinksManager.Factory.get(getSpaceKey()).getOgvById(key);¤		if(ogvLink != null){¤			title = ogvLink.getPage().getTitle() + " (" + key + ")";¤			String responsible = ogvLink.getLogin();¤			if(StringUtils.isNotEmpty(responsible)){¤				User user = ContainerManager.Factory.get().getUserAccessor().getUser(responsible);¤				if(user != null){¤					fullName = user.getFullName();¤				}¤			}¤		}¤		List<ReportParameters> paramsList = mapa.get(fullName);¤		if(paramsList == null){¤			paramsList = new ArrayList<ReportParameters>();¤		}¤		ReportParameters repParams = new ReportParameters(title, paperCopyCount, eCopyCount);¤		paramsList.add(repParams);¤		mapa.put(fullName, paramsList);¤	}¤	¤	private void createRowWithNewOgv(String responsibleFullName, String title, long paperCopyCount, long eCopyCount, Sheet sheet, int firstNewCell){¤		Row row = sheet.createRow(sheet.getLastRowNum() + 1);¤		Cell cell = row.createCell(0);¤		cell.setCellValue("    ");¤		cell = row.createCell(1);¤		cell.setCellValue(responsibleFullName);¤		cell = row.createCell(2);¤		cell.setCellValue(title);¤		cell = row.createCell(firstNewCell);¤		cell.setCellValue(paperCopyCount);¤		cell = row.createCell(firstNewCell + 1);¤		cell.setCellValue(eCopyCount);¤		cell = row.createCell(firstNewCell + 2);¤		cell.setCellValue(0);¤		cell = row.createCell(firstNewCell + 3);¤		cell.setCellValue(0);¤		cell = row.createCell(firstNewCell + 4);¤		cell.setCellValue(0);¤		cell = row.createCell(firstNewCell + 5);¤		cell.setCellValue(paperCopyCount + eCopyCount);¤	}¤	¤	public class ReportParameters{¤		public ReportParameters(String title, long paperCopyCount, long eCopyCount){¤			title_ = title;¤			paperCopyCount_ = paperCopyCount;¤			eCopyCount_ = eCopyCount;¤		}¤		String title_ = null;¤		long paperCopyCount_ = 0;¤		long eCopyCount_ = 0;¤	}¤	¤	private static boolean isOgvRow (Row row) {¤		if (row == null) {¤			return false;¤		}¤		Cell cell = row.getCell(row.getFirstCellNum()+2);¤		if (cell == null) {¤			return false;			¤		}¤		if (cell.getCellType() == Cell.CELL_TYPE_STRING && cell.getRichStringCellValue() != null) {¤			return true;¤		}¤		return false;¤	}¤	¤	private static List<Long> getOgvIds (Row row) {¤		try {¤			if (isOgvRow (row)){¤				Cell cell = row.getCell(row.getFirstCellNum()+2);¤				String title = cell.getRichStringCellValue().getString().trim();¤				String idsString = null;¤				if(title != null && title.contains("(") && title.contains(")")){¤					idsString = title.substring(title.lastIndexOf("(") + 1, title.lastIndexOf(")"));¤					String[] ids = idsString.split(",");¤					List<Long> idsList = new ArrayList<Long>();¤					for(String ogvId : ids){¤						if(StringUtils.isNumeric(ogvId)){¤							idsList.add(Long.parseLong(ogvId));¤						}else{¤							idsList.add(0l);¤						}¤					}¤					return idsList;¤				}¤			}¤		} catch (Exception e) {¤			Logs.LOG_W("catch exception in getOgvName - " + e.getMessage());¤		}¤		return null;¤	}¤	¤	public interface UploadedFile {¤		File getFile();¤		String getFileName();¤		String getContentType();¤	};¤	¤	public UploadedFile getUploadedFile () throws FileNotFoundException, FileUploadException {¤		final FileUploadUtils.UploadedFile uf = FileUploadUtils.getSingleUploadedFile();¤		return new UploadedFile() {¤			@Override¤			public File getFile() {¤				return uf.getFile();¤			}¤¤			@Override¤			public String getFileName() {¤				return uf.getFileName();¤			}¤			@Override¤			public String getContentType() {¤				return uf.getContentType();¤			}¤			¤		};¤	};¤	¤	public String doImport() throws Exception {¤		UploadedFile file = getUploadedFile();¤		InputStream is = new FileInputStream (file.getFile());¤		final Workbook workbook = WorkbookFactory.create(is);¤		final Sheet sheet = workbook.getSheetAt(workbook.getActiveSheetIndex());¤		¤		¤		Locale rus = new Locale("ru","RU");¤		Calendar currentDate = Calendar.getInstance();¤		currentDate.setTime(getReportFinishDate());¤		Cell prevHeaderCell =  sheet.getRow(0).getCell(sheet.getRow(0).getLastCellNum()-7);¤		if (¤			prevHeaderCell == null¤			|| prevHeaderCell.getRichStringCellValue() == null¤			|| false == prevHeaderCell.getRichStringCellValue().getString().startsWith(currentDate.getDisplayName(Calendar.MONTH, Calendar.LONG, rus))¤		) {¤			int firstColumn = sheet.getRow(0).getLastCellNum();¤			copyColumns(firstColumn, firstColumn-7, firstColumn-1, sheet);¤			Cell cell = sheet.getRow(0).getCell(firstColumn);¤			¤			Calendar prevDate = Calendar.getInstance();¤			prevDate.setTime(getReportStartDate());¤			¤			cell.setCellValue(¤				currentDate.getDisplayName(Calendar.MONTH, Calendar.LONG, rus)¤				+ "("¤				+ "c " + prevDate.get(Calendar.DAY_OF_MONTH) + " " + prevDate.getDisplayName(Calendar.MONTH, Calendar.LONG, rus).toLowerCase(rus)¤				+ " по " + currentDate.get(Calendar.DAY_OF_MONTH) + " " + currentDate.getDisplayName(Calendar.MONTH, Calendar.LONG, rus).toLowerCase(rus)¤				+ " " + currentDate.get(Calendar.YEAR) + ")"¤			);¤			exportData (sheet, firstColumn, getReportStartDate(), getReportFinishDate());¤		} else {¤			exportData (sheet, sheet.getRow(0).getLastCellNum()-7, getReportStartDate(), getReportFinishDate());¤		}¤		¤		String fileName = ((file.getFileName().lastIndexOf(".") >= 0) ? file.getFileName().substring(file.getFileName().lastIndexOf(".")): "");¤		User leaderUvs = DPOUVSManager.Factory.get(getSpaceKey()).getLeaderUvs();¤		if(leaderUvs != null){¤			saveInFile("report" + fileName, workbook, leaderUvs);¤		}¤¤		makeHttpResponse (workbook, fileName, file.getContentType());¤		return SUCCESS;¤	}¤	¤	public void makeHttpResponse (final Workbook workbook, final String fileName, final String fileContentType) throws Exception {¤		ByteArrayOutputStream out = null;¤		try {¤			out = new ByteArrayOutputStream();¤			out.flush();¤			HttpServletResponse response = ServletActionContext.getResponse();¤			response.setHeader("Cache-Control", "max-age=5");¤			response.setHeader("Pragma", "");¤			response.setDateHeader("Expires", System.currentTimeMillis() + 300);¤			response.setContentType(fileContentType);¤			response.setHeader( "Content-Disposition", "filename=report" + fileName¤			);¤¤			workbook.write(response.getOutputStream());¤			response.getOutputStream().flush();¤¤		} finally {¤			if (out != null) {¤				IOUtils.closeQuietly(out);¤			}¤		}		¤	}¤	¤	private void saveInFile(String filename, Workbook workbook, User user) throws Exception {¤		File file = new File(filename);¤		OutputStream outStream = new BufferedOutputStream(new FileOutputStream(file));¤		workbook.write(outStream);¤		outStream.close();¤		sendEmail(user, file);¤	}¤	¤	private void sendEmail(User user, File file) throws Exception {¤		String userEmail = user.getEmail();¤		String subj = "Ежемесячный отчет для ДПО УВС";¤		String body = "Добрый день, " + user.getFullName() + "!" + "<br>Сгенеренный ежемесячный отчет для ДПО УВС в приложенном файле";¤		Email email = getEmailGateway().createEmail(subj, body, userEmail);¤		MimeBodyPart mbp2 = new MimeBodyPart();¤		mbp2.attachFile(file);¤		Multipart multipart = new MimeMultipart();¤		multipart.addBodyPart(mbp2);¤		email.setMultipart(multipart);¤		getEmailGateway().queueEmail(email).send();¤	}¤	¤	private EmailGateway getEmailGateway () {¤		if (emailGateway_ == null) {¤			emailGateway_ = EmailGateway.Factory.create();¤		}¤		return emailGateway_;¤	}¤	private EmailGateway emailGateway_;¤¤¤	Date reportStartDate_ = null;¤	private Date getReportStartDate() {¤		return reportStartDate_;¤	}¤	public void setReportStartDate(String reportStartDate) {¤		try {¤			reportStartDate_ = DateUtils.parseDdMMyyyyDate(reportStartDate);¤		} catch (WrongFormat e) {¤			throw new NullPointerException (e.getMessage());¤		}¤	}¤¤	Date reportFinishDate_ = null;¤	private Date getReportFinishDate() {¤		return reportFinishDate_;¤	}¤	public void setReportFinishDate(String reportFinishDate) {¤		try {¤			reportFinishDate_ = DateUtils.parseDdMMyyyyDate(reportFinishDate);¤			reportFinishDate_.setTime(reportFinishDate_.getTime()+(1000*60*60*24-1));¤		} catch (WrongFormat e) {¤			throw new NullPointerException (e.getMessage());¤		}¤	}¤	¤	//#UC END# *4C8F402D015E_CUSTOM_METHODS_AND_DATA*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"WikiPageID (wiki)"
		    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/CreateDpoUvsMonthlyReport|4C8F402D015E
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (wiki)"
		    value      	"wiki")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"20609638619"))
	    quid       	"4C8F402D015E"
	    documentation 	"ежемесячный отчет для руководителя ДПО УВС"
	    stereotype 	"KActionPlugin"
	    superclasses 	(list inheritance_relationship_list
		(object Inheritance_Relationship
		    quid       	"4C8F40C50025"
		    supplier   	"Logical View::MDProcess::ConfluenceMDChange::ReportSupport::CreateMonthlyReportAction"
		    quidu      	"4BF50E150381"))
	    language   	"MDA Generator")
	(object Class "VersionScriptCommandListener"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"20609639721")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/DocCardChange/DocCardSupport/VersionScriptCommandListener.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4CA9AABD01DF_CUSTOM_IMPORT*"
		    value      	"//#UC START# *4CA9AABD01DF_CUSTOM_IMPORT*¤import com.atlassian.bandana.BandanaManager;¤import com.atlassian.config.lifecycle.events.ApplicationStartedEvent;¤import com.atlassian.confluence.setup.bandana.ConfluenceBandanaContext;¤//#UC END# *4CA9AABD01DF_CUSTOM_IMPORT*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4CA9AABD01DF_CUSTOM_CLASS_DEFINITION*"
		    value      	"//#UC START# *4CA9AABD01DF_CUSTOM_CLASS_DEFINITION*¤//#UC END# *4CA9AABD01DF_CUSTOM_CLASS_DEFINITION*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4CA9AABD01DF_CONTENT*"
		    value      	(value Text 
|//#UC START# *4CA9AABD01DF_CONTENT*¤		ApplicationStartedEvent.class¤		//#UC END# *4CA9AABD01DF_CONTENT*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4CA9AABD01DF_GETHANDLEDEVENTCLASSES_IMPLEMETATION*"
		    value      	(value Text 
|//#UC START# *4CA9AABD01DF_GETHANDLEDEVENTCLASSES_IMPLEMETATION*¤		return handledClasses;¤		//#UC END# *4CA9AABD01DF_GETHANDLEDEVENTCLASSES_IMPLEMETATION*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4CA9AABD01DF_HANDLEEVENT_IMPLEMETATION*"
		    value      	(value Text 
|//#UC START# *4CA9AABD01DF_HANDLEEVENT_IMPLEMETATION*¤		try {¤			if (event instanceof ApplicationStartedEvent) {¤/*				String versionInBandana = getStoredObject(getKeyPrefix(), getKey());¤				String currentVersion = renderVersion();¤				if(versionInBandana == null || !currentVersion.equals(versionInBandana)){¤						try{¤						renderInitializationScripts();¤						storeObject(getKeyPrefix(), getKey(), currentVersion);¤						}catch(Exception ex){¤							throw new Exception();¤						}¤				}¤*/			¤			}¤		} catch (Exception e) {¤			Logs.LOG_E ("VersionScriptCommandListener::handleEvent: ERROR: " + e);¤		}¤				¤		//#UC END# *4CA9AABD01DF_HANDLEEVENT_IMPLEMETATION*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4CA9AABD01DF_CUSTOM_METHODS_AND_DATA*"
		    value      	(value Text 
|//#UC START# *4CA9AABD01DF_CUSTOM_METHODS_AND_DATA*¤	protected String renderVersion() {¤		return new ru.garant.shared.ConfluenceCore.ActionSupportImpl.InitScriptManagerS().getVersion();¤	}¤	¤	protected void renderInitializationScripts() throws Exception{¤		new ru.garant.shared.ConfluenceCore.ActionSupportImpl.InitScriptManagerS().execute();¤	}¤¤	protected <T> T getStoredObject(String keyPrefix, String key) {¤		String resultKey = keyPrefix + key;¤		ConfluenceBandanaContext cbc = new ConfluenceBandanaContext();¤		return (T) getBandanaManager().getValue(cbc, resultKey);¤	}¤¤	protected void storeObject(String keyPrefix, String key, Object value) {¤		getBandanaManager().setValue(¤				new ConfluenceBandanaContext(), keyPrefix + key, value);¤	}¤¤	protected BandanaManager getBandanaManager () {¤		return ContainerManager.Factory.get().getBandanaManager();¤	}¤	¤	protected String getKeyPrefix() {¤		return KEY_PREFIX;¤	}¤¤	protected String getKey() {¤		return KEY;¤	}¤¤	private static final String KEY_PREFIX = "ru.garant.shared.ConfluenceCoreView.KPlugins.";¤	private static final String KEY = "scriptVersion";¤	//#UC END# *4CA9AABD01DF_CUSTOM_METHODS_AND_DATA*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"WikiPageID (wiki)"
		    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/VersionScriptCommandListener|4CA9AABD01DF
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (wiki)"
		    value      	"wiki"))
	    quid       	"4CA9AABD01DF"
	    documentation 	"слушатель события о старте сервера и запускает инициализацию скриптов в зависимости от версии."
	    stereotype 	"KListenerPlugin"
	    used_nodes 	(list uses_relationship_list
		(object Uses_Relationship
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"20609640569"))
		    quid       	"4CA9AB560177"
		    stereotype 	"uses"
		    supplier   	"Logical View::MDProcess::ConfluencePlugins::EventsLog::EventType"
		    quidu      	"47C4328C0115")
		(object Uses_Relationship
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"20609641822"))
		    quid       	"4CA9AB5C010D"
		    stereotype 	"uses"
		    supplier   	"Logical View::MDProcess::ConfluencePlugins::EventsLog::EventsLogManager"
		    quidu      	"47C432080163"))
	    language   	"MDA Generator")
	(object Class "CloseUvsQueryTimerTaskJob"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"28696838864")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Factory auto reg"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Factory default impl"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Servant Pool"
		    value      	"none")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"cron-expression"
		    value      	"0 0 0/1 ? * *")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"debug log"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"factory priority"
		    value      	"0")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"local supervisor"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"need UC"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"repeated"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"singleton"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/DocCardChange/DocCardSupport/CloseUvsQueryTimerTaskJob.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"WikiPageID (wiki)"
		    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/CloseUvsQueryTimerTaskJob|4CEBC32A031A
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (wiki)"
		    value      	"wiki")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4CEBC32A031A_CUSTOM_IMPORT*"
		    value      	"//#UC START# *4CEBC32A031A_CUSTOM_IMPORT*¤import ru.garant.MDProcess.DocCardChange.Entities.UVSQueryManager;¤import ru.garant.shared.ConfluenceCore.ActionSupport.ActionContextThreadLocalFactory;¤//#UC END# *4CEBC32A031A_CUSTOM_IMPORT*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4CEBC32A031A_CUSTOM_CLASS_DEFINITION*"
		    value      	"//#UC START# *4CEBC32A031A_CUSTOM_CLASS_DEFINITION*¤//#UC END# *4CEBC32A031A_CUSTOM_CLASS_DEFINITION*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4CEBC32A031A_DO_EXECUTE_IMPLEMETATION*"
		    value      	(value Text 
|//#UC START# *4CEBC32A031A_DO_EXECUTE_IMPLEMETATION*¤		super.doExecute(jec);¤		//#UC END# *4CEBC32A031A_DO_EXECUTE_IMPLEMETATION*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4CEBC32A031A_CUSTOM_METHODS_AND_DATA*"
		    value      	(value Text 
|//#UC START# *4CEBC32A031A_CUSTOM_METHODS_AND_DATA*¤	@Override¤	protected void executeJob() {¤		UVSQueryManager.Factory.get().processTimeScheduledCloseUvsQuery();¤	}¤	¤	protected boolean isNeedWriteTransaction() {¤		return true;¤	}	¤	//#UC END# *4CEBC32A031A_CUSTOM_METHODS_AND_DATA*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"DerivedImplement"
		    value      	"{}")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"DerivedOverload"
		    value      	"{}")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ImplementSelectType"
		    value      	"all")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"OverloadSelectType"
		    value      	"include")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ApplyedGens"
		    value      	"All"))
	    quid       	"4CEBC32A031A"
	    documentation 	"Закрывает все запросы из ДПО УВС, которые висят больше суток"
	    stereotype 	"KJobPlugin"
	    superclasses 	(list inheritance_relationship_list
		(object Inheritance_Relationship
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"1337600304930981"))
		    quid       	"4FBA293003A1"
		    supplier   	"Logical View::MDProcess::DocCardChange::DocCardSupport::GarDocAbstractJob"
		    quidu      	"53E4BF9000E2"))
	    language   	"MDA Generator")
	(object Class "EditDocCardCondition"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"5349450803")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/DocCardChange/DocCardSupport/EditDocCardCondition.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"WikiPageID (wiki)"
		    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/EditDocCardCondition|4D0085EA0001
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (wiki)"
		    value      	"wiki")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4D0085EA0001_CUSTOM_IMPORT*"
		    value      	"//#UC START# *4D0085EA0001_CUSTOM_IMPORT*¤import com.atlassian.confluence.pages.AbstractPage;¤import com.atlassian.confluence.pages.Page;¤import com.atlassian.confluence.plugin.descriptor.web.WebInterfaceContext;¤import ru.garant.MDProcess.DocCardChange.DocCardCommon.DocCardManager;¤//#UC END# *4D0085EA0001_CUSTOM_IMPORT*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4D0085EA0001_CUSTOM_CLASS_DEFINITION*"
		    value      	"//#UC START# *4D0085EA0001_CUSTOM_CLASS_DEFINITION*¤//#UC END# *4D0085EA0001_CUSTOM_CLASS_DEFINITION*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4D0085EA0001_CUSTOM_METHODS_AND_DATA*"
		    value      	(value Text 
|//#UC START# *4D0085EA0001_CUSTOM_METHODS_AND_DATA*¤	@Override¤	protected boolean shouldDisplay(WebInterfaceContext context) {¤		// TODO Auto-generated method stub¤		final AbstractPage pageObj = context.getPage();¤		if (pageObj instanceof Page == false) {¤			return false;¤		}¤		final Page page = (Page) pageObj;¤		return DocCardManager.Factory.get().isDocCard(page.getId());¤	}¤	//#UC END# *4D0085EA0001_CUSTOM_METHODS_AND_DATA*
		    )))
	    quid       	"4D0085EA0001"
	    documentation 	"реализует условие возможности изменения карточки с заданной страницы"
	    stereotype 	"SimpleClass"
	    superclasses 	(list inheritance_relationship_list
		(object Inheritance_Relationship
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"5390919860"))
		    quid       	"4D00861301CC"
		    supplier   	"Logical View::external::ConfluenceSupport::com.atlassian.confluence.plugin.descriptor.web.conditions::BaseConfluenceCondition"
		    quidu      	"4A53516B029A"))
	    language   	"MDA Generator")
	(object Class "RemoveDocCardWebItem"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"7943647152")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"need UC"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"styleClass"
		    value      	"remove-doccard")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"weight"
		    value      	"11")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"label key"
		    value      	"doccard.remove")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"section"
		    value      	"system.content.action/modify")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"WikiPageID (wiki)"
		    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/RemoveDocCardWebItem|4D00900B026C
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (wiki)"
		    value      	"wiki")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"output.xml:*4D00900B026CLABEL_CONTENT*"
		    value      	(value Text 
|<!--UC_BEGIN*4D00900B026CLABEL_CONTENT*-->¤			<!--UC_END*4D00900B026CLABEL_CONTENT*-->
		    )))
	    quid       	"4D00900B026C"
	    documentation 	"контролирует показ линка удаления карточки"
	    stereotype 	"WebItem"
	    used_nodes 	(list uses_relationship_list
		(object Uses_Relationship
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"10002696404")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"id"
			    value      	"action-remove-doccard-link")
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"params"
			    value      	"pageId=$helper.page.id"))
		    quid       	"4D00981600D2"
		    stereotype 	"link"
		    supplier   	"Logical View::MDProcess::DocCardChange::DocCardSupport::DocCardXPlugin::DocCardXPackage::RemoveDocCard"
		    quidu      	"4D00976A02F2"))
	    language   	"MDA Generator")
	(object Class "RemoveDocCard"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"9384578183")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"WikiPageID (wiki)"
		    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/RemoveDocCard|4D0095AC00E6
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (wiki)"
		    value      	"wiki")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/DocCardChange/DocCardSupport/RemoveDocCard.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4D0095AC00E6_CUSTOM_IMPORT*"
		    value      	"//#UC START# *4D0095AC00E6_CUSTOM_IMPORT*¤import org.springframework.orm.hibernate.SessionFactoryUtils;¤¤import com.atlassian.confluence.pages.Page;¤¤import ru.garant.MDProcess.DocCardChange.DocCardChangeDAO.UVSQuestDAO;¤import ru.garant.MDProcess.DocCardChange.DocCardCommon.DocCardIndexManager;¤import ru.garant.MDProcess.DocCardChange.Entities.DocCard;¤import ru.garant.MDProcess.DocCardChange.Entities.UVSQuery;¤//#UC END# *4D0095AC00E6_CUSTOM_IMPORT*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4D0095AC00E6_CUSTOM_CLASS_DEFINITION*"
		    value      	"//#UC START# *4D0095AC00E6_CUSTOM_CLASS_DEFINITION*¤//#UC END# *4D0095AC00E6_CUSTOM_CLASS_DEFINITION*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4D0095AC00E6_ACTION_NAME*"
		    value      	(value Text 
|//#UC START# *4D0095AC00E6_ACTION_NAME*¤		return new String (getClass ().getName ());¤		//#UC END# *4D0095AC00E6_ACTION_NAME*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4D0095AC00E6_CUSTOM_METHODS_AND_DATA*"
		    value      	(value Text 
|//#UC START# *4D0095AC00E6_CUSTOM_METHODS_AND_DATA*¤	private static void removeQuery(UVSQuery uvs) throws Exception {¤		Logs.LOG_W("RemoveDocCard :: removeQuery :: start");¤		ContainerManager.Factory.get().getSession().flush();¤		Page uvsPage = uvs.getPage();¤		uvs.remove();¤		ContainerManager.Factory.get().getSession().flush();¤		ContainerManager.Factory.get().getLabelManager().removeAllLabels(uvsPage);¤		ContainerManager.Factory.get().getPageManager().trashPage(uvsPage);¤		DpoUvsHelper.changeUvsQueryVersionsGardoc(uvsPage.getId(), null);¤		Logs.LOG_W("RemoveDocCard :: removeQuery :: end");¤	}¤	@Override¤	public String doRemove() throws Exception {¤		Logs.LOG_W("RemoveDocCard :: doRemove :: start");¤		Page doccardPage = (Page)getPage();¤		for (Page child : doccardPage.getDescendents()) {¤			if (UVSQuestDAO.get(child.getId()) == null) {¤				ContainerManager.Factory.get().getSpaceManager().movePageWithoutEvent(child, doccardPage.getParent());¤			} else {¤				removeQuery (UVSQuery.Factory.get(child.getId()));¤			}¤		}¤¤		DocCardIndexManager.Factory.get().saveDocCardIndex(doccardPage.getId(), DocCardLuceneReIndex.DOC_CARD_REMOVE_EVENT);¤¤		DocCard.Factory.get(doccardPage.getId()).remove();¤		ContainerManager.Factory.get().getSession().flush();¤		ContainerManager.Factory.get().getLabelManager().removeAllLabels(getPage());¤		String result = super.doRemove();¤		Logs.LOG_W("RemoveDocCard :: doRemove :: end");¤		return result;¤	}¤	//#UC END# *4D0095AC00E6_CUSTOM_METHODS_AND_DATA*
		    )))
	    quid       	"4D0095AC00E6"
	    documentation 	"удаление карточки"
	    stereotype 	"KActionPlugin"
	    superclasses 	(list inheritance_relationship_list
		(object Inheritance_Relationship
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"10506815414"))
		    quid       	"4D009A0E00D9"
		    supplier   	"Logical View::external::JavaConfluence::ConfluenceClassPack::RemovePageAction"
		    quidu      	"45DAC96B0157"))
	    language   	"MDA Generator")
	(object Class "EditUvsQueryCondition"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"14744821106")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/DocCardChange/DocCardSupport/EditUvsQueryCondition.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"WikiPageID (wiki)"
		    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/EditUvsQueryCondition|4D00AA9B0119
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (wiki)"
		    value      	"wiki")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4D00AA9B0119_CUSTOM_IMPORT*"
		    value      	"//#UC START# *4D00AA9B0119_CUSTOM_IMPORT*¤import ru.garant.MDProcess.DocCardChange.Entities.UVSQuery;¤import ru.garant.MDProcess.DocCardChange.Entities.UVSQueryManager;¤¤import com.atlassian.confluence.pages.AbstractPage;¤import com.atlassian.confluence.pages.Page;¤import com.atlassian.confluence.plugin.descriptor.web.WebInterfaceContext;¤import com.atlassian.confluence.security.Permission;¤import com.atlassian.confluence.security.PermissionManager;¤¤//#UC END# *4D00AA9B0119_CUSTOM_IMPORT*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4D00AA9B0119_CUSTOM_CLASS_DEFINITION*"
		    value      	"//#UC START# *4D00AA9B0119_CUSTOM_CLASS_DEFINITION*¤//#UC END# *4D00AA9B0119_CUSTOM_CLASS_DEFINITION*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4D00AA9B0119_CUSTOM_METHODS_AND_DATA*"
		    value      	(value Text 
|//#UC START# *4D00AA9B0119_CUSTOM_METHODS_AND_DATA*¤	@Override¤	protected boolean shouldDisplay(WebInterfaceContext context) {¤		// TODO Auto-generated method stub¤		final AbstractPage pageObj = context.getPage();¤		if (pageObj instanceof Page == false) {¤			return false;¤		}¤		final Page page = (Page) pageObj;¤		¤		PermissionManager pm = ContainerManager.Factory.get().getPermissionManager();¤		if (!pm.hasPermission(context.getUser(), Permission.REMOVE, page)) {¤			return false;¤		}¤¤		return UVSQueryManager.Factory.get().isRequest(page.getId());¤	}¤	//#UC END# *4D00AA9B0119_CUSTOM_METHODS_AND_DATA*
		    )))
	    quid       	"4D00AA9B0119"
	    documentation 	"реализует условие возможности изменения запроса в ДПО УВС с заданной страницы"
	    stereotype 	"SimpleClass"
	    superclasses 	(list inheritance_relationship_list
		(object Inheritance_Relationship
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"14801018063"))
		    quid       	"4D00AAD301D0"
		    supplier   	"Logical View::external::ConfluenceSupport::com.atlassian.confluence.plugin.descriptor.web.conditions::BaseConfluenceCondition"
		    quidu      	"4A53516B029A"))
	    language   	"MDA Generator")
	(object Class "RemoveUvsQueryWebItem"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"14815623379")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"need UC"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"section"
		    value      	"system.content.action/modify")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"styleClass"
		    value      	"remove-uvsquery")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"label key"
		    value      	"uvsquery.remove")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"weight"
		    value      	"11")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"WikiPageID (wiki)"
		    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/RemoveUvsQueryWebItem|4D00AAE20043
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (wiki)"
		    value      	"wiki")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"output.xml:*4D00AAE20043LABEL_CONTENT*"
		    value      	(value Text 
|<!--UC_BEGIN*4D00AAE20043LABEL_CONTENT*-->¤			<!--UC_END*4D00AAE20043LABEL_CONTENT*-->
		    )))
	    quid       	"4D00AAE20043"
	    documentation 	"контролирует показ линка удаления запроса в ДПО УВС"
	    stereotype 	"WebItem"
	    used_nodes 	(list uses_relationship_list
		(object Uses_Relationship
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"15238968230")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"id"
			    value      	"action-remove-uvsquery-link")
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"params"
			    value      	"pageId=$helper.page.id"))
		    quid       	"4D00AC89013C"
		    stereotype 	"link"
		    supplier   	"Logical View::MDProcess::DocCardChange::DocCardSupport::DocCardXPlugin::DocCardXPackage::RemoveUvsQuery"
		    quidu      	"4D00AC53011B"))
	    language   	"MDA Generator")
	(object Class "RemoveUvsQuery"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"15091155966")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/DocCardChange/DocCardSupport/RemoveUvsQuery.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"WikiPageID (wiki)"
		    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/RemoveUvsQuery|4D00ABF5021A
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (wiki)"
		    value      	"wiki")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4D00ABF5021A_CUSTOM_IMPORT*"
		    value      	"//#UC START# *4D00ABF5021A_CUSTOM_IMPORT*¤import ru.garant.MDProcess.DocCardChange.DocCardChangeDAO.UVSQuestDAO;¤import ru.garant.MDProcess.DocCardChange.DocCardCommon.DocCardManager;¤import ru.garant.MDProcess.DocCardChange.Entities.UVSQuery;¤import java.util.List;¤¤import com.atlassian.confluence.pages.Page;¤¤//#UC END# *4D00ABF5021A_CUSTOM_IMPORT*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4D00ABF5021A_CUSTOM_CLASS_DEFINITION*"
		    value      	"//#UC START# *4D00ABF5021A_CUSTOM_CLASS_DEFINITION*¤//#UC END# *4D00ABF5021A_CUSTOM_CLASS_DEFINITION*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4D00ABF5021A_ACTION_NAME*"
		    value      	(value Text 
|//#UC START# *4D00ABF5021A_ACTION_NAME*¤		return new String (getClass ().getName ());¤		//#UC END# *4D00ABF5021A_ACTION_NAME*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4D00ABF5021A_CUSTOM_METHODS_AND_DATA*"
		    value      	(value Text 
|//#UC START# *4D00ABF5021A_CUSTOM_METHODS_AND_DATA*¤	@Override¤	public String doRemove() throws Exception {¤		// TODO Auto-generated method stub¤		Logs.LOG_W("RemoveUvsQuery :: doRemove :: start");¤		Page page = (Page)getPage();¤		long id = page.getId();¤		UVSQuery uvsQuery = UVSQuery.Factory.get(id);¤		Page docCarPage = uvsQuery.getDocCard().getPage();¤		List<UVSQuestDAO> uvsQueries = DocCardManager.Factory.get().getUvsQueryForDocCard(docCarPage.getId());¤		int wasCountUvsQueries = uvsQueries.size();¤		List<Page> children = page.getDescendents();¤		for(Page child : children){¤			ContainerManager.Factory.get().getSpaceManager().movePageWithoutEvent(child, page.getParent());¤		}¤		uvsQuery.remove();¤		ContainerManager.Factory.get().getLabelManager().removeAllLabels(page);¤		DpoUvsHelper.changeUvsQueryVersionsGardoc(id, null);¤		String res = super.doRemove();¤¤		if(wasCountUvsQueries == 1){¤			removeDocCard(docCarPage);¤		}¤		Logs.LOG_W("RemoveUvsQuery :: doRemove :: end");¤		return res;¤	}¤¤	¤	private void removeDocCard(Page page) throws Exception{¤		Logs.LOG_W("RemoveUvsQuery :: removeDocCard :: start");¤		Page docCardPage = ContainerManager.Factory.get().getPageManager().getPage(page.getId());¤		RemoveDocCard removeDocCardAction = new RemoveDocCard();¤		removeDocCardAction.setPage(docCardPage);¤		removeDocCardAction.setPageManager(ContainerManager.Factory.get().getPageManager());¤		removeDocCardAction.doRemove();¤		Logs.LOG_W("RemoveUvsQuery :: removeDocCard :: end");¤	}¤	¤	//#UC END# *4D00ABF5021A_CUSTOM_METHODS_AND_DATA*
		    )))
	    quid       	"4D00ABF5021A"
	    documentation 	"удаление запроса в ДПО УВС"
	    stereotype 	"KActionPlugin"
	    superclasses 	(list inheritance_relationship_list
		(object Inheritance_Relationship
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"15141773859"))
		    quid       	"4D00AC280090"
		    supplier   	"Logical View::external::JavaConfluence::ConfluenceClassPack::RemovePageAction"
		    quidu      	"45DAC96B0157"))
	    language   	"MDA Generator")
	(object Class "DpoUvsRemovePermissionCondition"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"27686601376")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"WikiPageID (wiki)"
		    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/DpoUvsRemovePermissionCondition|4D00DD250344
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (wiki)"
		    value      	"wiki")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/DocCardChange/DocCardSupport/DpoUvsRemovePermissionCondition.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4D00DD250344_CUSTOM_IMPORT*"
		    value      	"//#UC START# *4D00DD250344_CUSTOM_IMPORT*¤import com.atlassian.confluence.pages.AbstractPage;¤import com.atlassian.confluence.pages.Page;¤import com.atlassian.confluence.plugin.descriptor.web.WebInterfaceContext;¤import com.atlassian.confluence.security.Permission;¤import com.atlassian.confluence.security.PermissionManager;¤¤import ru.garant.MDProcess.DocCardChange.Entities.DocCardPermissionManager;¤//#UC END# *4D00DD250344_CUSTOM_IMPORT*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4D00DD250344_CUSTOM_CLASS_DEFINITION*"
		    value      	"//#UC START# *4D00DD250344_CUSTOM_CLASS_DEFINITION*¤//#UC END# *4D00DD250344_CUSTOM_CLASS_DEFINITION*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4D00DD250344_CUSTOM_METHODS_AND_DATA*"
		    value      	(value Text 
|//#UC START# *4D00DD250344_CUSTOM_METHODS_AND_DATA*¤	@Override¤	protected boolean shouldDisplay(WebInterfaceContext context) {¤		// TODO Auto-generated method stub¤		final AbstractPage pageObj = context.getPage();¤		if (pageObj instanceof Page == false) {¤			return false;¤		}¤		final Page page = (Page) pageObj;¤¤		PermissionManager pm = ContainerManager.Factory.get().getPermissionManager();¤		if (!pm.hasPermission(context.getUser(), Permission.VIEW, page)) {¤			return false;¤		}¤		¤		return DocCardPermissionManager.Factory.get().canRemove(page, context.getUser().getName());¤	}¤	//#UC END# *4D00DD250344_CUSTOM_METHODS_AND_DATA*
		    )))
	    quid       	"4D00DD250344"
	    documentation 	"реализует условие прав удаления карточки с заданной страницы. Может только руководитель и создатель."
	    stereotype 	"SimpleClass"
	    superclasses 	(list inheritance_relationship_list
		(object Inheritance_Relationship
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"27720643233"))
		    quid       	"4D00DD4703BA"
		    supplier   	"Logical View::external::ConfluenceSupport::com.atlassian.confluence.plugin.descriptor.web.conditions::BaseConfluenceCondition"
		    quidu      	"4A53516B029A"))
	    language   	"MDA Generator")
	(object Class "SearchDocIssuers"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"7533232271")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"WikiPageID (wiki)"
		    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/SearchDocIssuers|4D09C6B90102
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (wiki)"
		    value      	"wiki")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/DocCardChange/DocCardSupport/SearchDocIssuers.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4D09C6B90102_CUSTOM_IMPORT*"
		    value      	"//#UC START# *4D09C6B90102_CUSTOM_IMPORT*¤import org.apache.commons.lang.StringUtils;¤import org.springframework.orm.hibernate.SessionFactoryUtils;¤¤import ru.garant.MDProcess.DocCardChange.DocCardChangeDAO.GarDocSourceTitles;¤import ru.garant.MDProcess.DocCardChange.DocCardChangeDAO.OGVLinksDAO;¤import ru.garant.MDProcess.DocCardChange.DocCardCommon.OGVLinksManager;¤import ru.garant.MDProcess.DocCardChange.DocCardCommon.PartnerManager;¤¤¤import net.sf.hibernate.HibernateException;¤import net.sf.hibernate.Query;¤import net.sf.hibernate.Session;¤¤import java.sql.PreparedStatement;¤import java.sql.ResultSet;¤import java.util.ArrayList;¤import java.util.Date;¤import java.util.HashMap;¤import java.util.HashSet;¤import java.util.List;¤import java.util.Map;¤import java.util.Set;¤import java.util.regex.Matcher;¤import java.util.regex.Pattern;¤¤import com.atlassian.confluence.pages.Page;¤import com.atlassian.confluence.spaces.Space;¤import com.atlassian.confluence.user.AuthenticatedUserThreadLocal;¤import com.atlassian.confluence.util.GeneralUtil;¤//#UC END# *4D09C6B90102_CUSTOM_IMPORT*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4D09C6B90102_CUSTOM_CLASS_DEFINITION*"
		    value      	"//#UC START# *4D09C6B90102_CUSTOM_CLASS_DEFINITION*¤//#UC END# *4D09C6B90102_CUSTOM_CLASS_DEFINITION*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4D09C6B90102_ACTION_NAME*"
		    value      	(value Text 
|//#UC START# *4D09C6B90102_ACTION_NAME*¤		return new String (getClass ().getName ());¤		//#UC END# *4D09C6B90102_ACTION_NAME*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4D09C6B90102_CUSTOM_METHODS_AND_DATA*"
		    value      	(value Text 
|//#UC START# *4D09C6B90102_CUSTOM_METHODS_AND_DATA*¤	public String doQuickSearch(){¤		List res = new ArrayList();¤		String stringWithSpaceLey = "";¤		String spaceIds = "";¤		if(StringUtils.isNotEmpty(getSpaceKeys())){¤			String[] spaceKeys = StringUtils.split(getSpaceKeys(), ",");¤			for(int i =0; i < spaceKeys.length; i++){¤				Space space = ContainerManager.Factory.get().getSpaceManager().getSpace(spaceKeys[i].trim());¤				if(space != null){¤					if(StringUtils.isNotEmpty(spaceIds)){¤						spaceIds += ", ";¤					}¤					spaceIds += space.getId();¤				}¤			}¤		}else{¤			List<Space> spaces = DpoUvsHelper.getSpacesWhichHasGardocSettings(AuthenticatedUserThreadLocal.getUser());¤			for(Space space : spaces){¤				if(StringUtils.isNotEmpty(spaceIds)){¤					spaceIds += ", ";¤				}¤				spaceIds += space.getId();¤			}¤			¤		}¤		if(StringUtils.isNotEmpty(spaceIds)){¤			stringWithSpaceLey = " and c.spaceid in (" + spaceIds + ")";¤		}¤		¤		final String sQuery = "SELECT c.contentid, c.title, (cl4.labelid is not null) as not_current"¤							+ " FROM content c"¤							+ " JOIN content_label cl ON (c.contentid = cl.contentid AND cl.labelid = 241893378)"¤							+ " LEFT JOIN content_label cl2 ON (c.contentid = cl2.contentid AND cl2.labelid = 245465098)"¤							+ " LEFT JOIN content_label cl3 ON (c.contentid = cl3.contentid AND cl3.labelid = 432177154)"¤							+ " LEFT JOIN confancestors ca ON (c.contentid = ca.descendentid AND ca.ancestorid = 249954769)"¤							+ " LEFT JOIN content_label cl4 ON (c.contentid = cl4.contentid AND cl4.labelid = (SELECT l.labelid FROM label l where l.name='ogv_not_current'))"¤							+ " WHERE c.title like '%" + getSearchWords().replaceAll(" ", "%") + "%'" + stringWithSpaceLey¤							+ " ORDER BY cl3.labelid desc, ca.ancestorid desc, cl2.labelid desc, LENGTH(c.title) asc"¤							+ " LIMIT 10";¤		try {¤			PreparedStatement ps = ContainerManager.Factory.get().getSession().connection().prepareStatement(sQuery);¤			ResultSet rset = ps.executeQuery();¤			while(rset.next()){¤				Object[] objs = new Object[]{rset.getObject("contentid"), rset.getObject("title"), rset.getObject("not_current")};¤				res.add(objs);¤			}¤		} catch (Exception e) {¤			Logs.LOG_SEX(e);¤		}¤		if(res != null && res.size() > 0){¤			parseDocIssuerList(res);¤		}	¤		return SUCCESS;¤	}¤¤	public String doQuickSearchGarDocSources(){¤		String spaceKeysString = getSpaceKeys();¤		String[] spaceKeysArray = StringUtils.split(spaceKeysString, ",");¤		List<Integer> regions = new ArrayList<Integer>();¤		for(int i = 0; i < spaceKeysArray.length; i++){¤			regions.add(Integer.valueOf(PartnerManager.Factory.get().getPartnerRegionBySpaceKey(spaceKeysArray[i])));¤		}¤		List res = null;¤		final String sQuery = "select src.id, src.name  from GarDocSourceTitles as src where"¤			+ " src.name like '%" + getSearchWords() + "%'"¤			+ " and src.region in (:regions)"¤			+ " ORDER BY length(src.name) asc LIMIT 10";¤		try {¤			Query q = getCurrentSession().createQuery(sQuery);¤			q.setParameterList("regions", regions);¤			res = q.list();¤		} catch (HibernateException e) {¤			Logs.LOG_I("ERROR! " + e);¤		}¤		if(res != null && res.size() > 0){¤			parseGarDocSourceList(res);¤		}	¤		return SUCCESS;¤	}¤¤	private Map<String, Set<Long>> putToMap(List<Object[]> pageList){¤		Map<String, Set<Long>> pagesMap = new HashMap<String, Set<Long>>();¤		for(Object[] pageAttribute : pageList){¤			long id = (Long)pageAttribute[0];¤			String title = (String)pageAttribute[1];¤			if(pageAttribute.length == 3){¤				int is_current = (Integer)pageAttribute[2];¤				if(is_current == 1){¤					title = "!" + title;¤				}¤			}¤			Set<Long> ids = new HashSet<Long>();¤			if(pagesMap.containsKey(title)){¤				ids = pagesMap.get(title);¤			}¤			ids.add(id);¤			pagesMap.put(title, ids);¤		}¤		return pagesMap;¤	}¤	¤	private String findRowQuickNav(Object[] pageAttribute, Map<String, Set<Long>> entitiesMap, String quickNavId, String nameFunction){¤		long id = (Long)pageAttribute[0];¤		String title = (String)pageAttribute[1];¤		if(pageAttribute.length == 3){¤			int is_current = (Integer)pageAttribute[2];¤			if(is_current == 1){¤				title = "!" + title;¤			}¤		}¤		String startString = "";¤		String spaceKey = "";¤		¤		if (nameFunction.equals("chooseDocIssuer")) {¤			if(entitiesMap.get(title).size() > 1){¤				Page page = ContainerManager.Factory.get().getPageManager().getPage(id);¤				spaceKey = page.getSpaceKey();¤				Page parent = page.getParent();¤				if(parent != null){¤					startString = parent.getTitle() + "\\" + startString;¤				}	¤			}¤			¤			String changedTitle = startString + highlightTitle(title, getSearchWords());¤			return "<li><a href='#' id='" + id + "' class='search-for' onkeyup=\"quickNavigation(event,'" + quickNavId + "')\" onclick=\"" + nameFunction + "('" + id + "', '" + GeneralUtil.htmlEscapeQuotes(title) + "', '" + spaceKey + "')\"><em>" + changedTitle + "</em></a></li>";¤		} else if (nameFunction.equals("chooseGarDocSource")) {¤			GarDocSourceTitles st = GarDocSourceTitles.get(id);¤			String changedTitle = highlightTitle(st.getName(), getSearchWords());¤			//дописываем в скобках парента если с таким названием несколько¤			if (entitiesMap.get(title).size() > 1) {¤				String[] splited = st.getPath().split(Pattern.quote("\\"));¤				if (splited.length > 1) {¤					String additional = splited[splited.length-2];¤					changedTitle += " (" + additional + ")";¤				}¤			}¤			¤			return "<li><a href='#' id='" + id + "' class='search-for' onkeyup=\"quickNavigation(event,'" + quickNavId + "')\" onclick=\"" + nameFunction + "('" + id + "', '" + GeneralUtil.htmlEscapeQuotes(title) + "', '" + spaceKey + "')\"><em>" + changedTitle + "</em></a></li>";				¤		}¤		return "";¤	}¤	¤	public static String highlightTitle (final String title, final String searchWords) {¤		final String sw = Pattern.quote(searchWords);¤		StringBuffer pattern = new StringBuffer()¤						.append("(?iu).*?(")¤						.append(sw.replace(" ", "\\E).+?(\\Q"))¤						//.append(searchWords.replace(" ", ").+?("))¤						.append(").*?")¤		;¤¤		Pattern rgx = Pattern.compile(pattern.toString(), Pattern.CASE_INSENSITIVE);¤		Matcher m = rgx.matcher(title);¤		StringBuffer ret = new StringBuffer();¤		int lastEnd = 0;¤		while (m.find()) {¤			for (int i = 1; i <= m.groupCount(); i++) {¤				ret.append(title.substring(lastEnd, m.start(i))).append("<strong>");				¤				lastEnd = m.end(i);¤				ret.append(title.substring(m.start(i), lastEnd)).append("</strong>");¤			}¤		}¤		if (StringUtils.isNotBlank(ret.toString())) {¤			if (lastEnd < title.length()) {¤				ret.append(title.substring(lastEnd, title.length()));¤			}¤			return ret.toString();			¤		}¤		return title;¤	}¤	¤	public void parseDocIssuerList(List<Object[]> pageList){¤		String findString = "";¤		Map<String, Set<Long>> pagesMap = putToMap(pageList);¤		for(Object[] pageAttribute : pageList){¤			findString += findRowQuickNav(pageAttribute, pagesMap, "quick-nav-docissuer", "chooseDocIssuer");¤		}¤		if(pageList.size() > 0){¤			htmlString_ = "<div class='aui-dropdown-docissuer' id='quick-nav-docissuer' style='font-size: 0.9em;margin-right:10px;' align='left'><ol>" + findString + "</ol></div>";¤		}¤	}¤¤	public void parseGarDocSourceList(List<Object[]> pageList){¤		String findString = "";¤		Map<String, Set<Long>> pagesMap = putToMap(pageList);¤		for(Object[] pageAttribute : pageList){¤			findString += findRowQuickNav(pageAttribute, pagesMap, "quick-nav-gardocsource", "chooseGarDocSource");¤		}¤		if(pageList.size() > 0){¤			String css = "left:50px";¤			if(getIsUOCurrentDoc().equals("true")){¤				css = "right:0px";¤			}¤			htmlString_ = "<div class='aui-dropdown-docissuer' id='quick-nav-gardocsource' style='font-size: 0.9em;width:48em;margin-right:10px" + css + "'><ol>" + findString + "</ol></div>";¤		}¤	}¤	¤	public String doSearchSiteAndSuffix(){¤		if(getDocIssuerId() != null && StringUtils.isNotEmpty(getDocIssuerId())){¤			long docIssuerId = Long.parseLong(getDocIssuerId());¤			Page page = ContainerManager.Factory.get().getPageManager().getPage(docIssuerId);¤			OGVLinksDAO ogvLink = OGVLinksManager.Factory.get(page).getOgvById(docIssuerId);¤			if(ogvLink != null){¤				String site = ((StringUtils.isEmpty(ogvLink.getSourceWebSite()) || ("uvsquery.copies.site".equals(getCopyType()) == false)) ? "": ogvLink.getSourceWebSite());¤				String copyPath = DpoUvsHelper.getECopyFilePath(ogvLink.getSuffixForECopyFilePath(), new Date(), getCopyType(), getIsUOCurrentDoc(), page.getSpaceKey());¤				if (copyPath != null) {¤					htmlString_ = "site=" + site;¤					htmlString_ +=  "&filePath=" + copyPath;¤					htmlString_ += "&date=&number=&type="; ¤				}¤			}¤			¤		}¤		return SUCCESS;¤	}¤	¤	private String docIssuerId_ = "";¤	¤	public String getDocIssuerId(){¤		return docIssuerId_;¤	}¤	¤	public void setDocIssuerId(String docIssuerId){¤		docIssuerId_ = docIssuerId;¤	}¤¤	private String copyType_ = "";¤	¤	public String getCopyType(){¤		return copyType_;¤	}¤	¤	public void setCopyType(String copyType){¤		copyType_ = copyType;¤	}¤¤	private String isUOCurrentDoc_ = "";¤	¤	public String getIsUOCurrentDoc(){¤		return isUOCurrentDoc_;¤	}¤	¤	public void setIsUOCurrentDoc(String isUOCurrentDoc){¤		isUOCurrentDoc_ = isUOCurrentDoc;¤	}¤¤	private String searchWords_ = "";¤	¤	public String getSearchWords(){¤		return GeneralUtil.urlDecode(searchWords_);¤	}¤	¤	public void setSearchWords(String searchWords){¤		searchWords_ = searchWords;¤	}¤¤	private static Session getCurrentSession() {¤		return ContainerManager.Factory.get().getSession();¤	}¤	¤	private String responseContent_ = null;¤¤	public String getResponseContent() {¤		responseContent_ = getHtmlString();¤		return responseContent_;¤	}¤	¤	private String htmlString_ = "";¤	public String getHtmlString(){¤		return htmlString_;¤	}¤	¤	private String spaceKeys_ = null;¤	¤	public void setSpaceKeys(final String spaceKeys){¤		spaceKeys_ = spaceKeys;¤	}¤¤	public String getSpaceKeys(){¤		return spaceKeys_;¤	}¤	//#UC END# *4D09C6B90102_CUSTOM_METHODS_AND_DATA*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"DerivedImplement"
		    value      	"{}")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"DerivedOverload"
		    value      	"{}")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ImplementSelectType"
		    value      	"all")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"OverloadSelectType"
		    value      	"include")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ApplyedGens"
		    value      	"All"))
	    quid       	"4D09C6B90102"
	    documentation 	"быстрый поиск эмитентов карточек"
	    stereotype 	"KActionPlugin"
	    superclasses 	(list inheritance_relationship_list
		(object Inheritance_Relationship
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"8279923499"))
		    quid       	"4D09C9A3030D"
		    supplier   	"Logical View::external::JavaConfluence::ConfluenceClassPack::ConfluenceActionSupport"
		    quidu      	"465ADCCA036B"))
	    language   	"MDA Generator")
	(object Class "CreateUvsQueryMonthlyReport"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"9235960427")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Factory auto reg"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Factory default impl"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Servant Pool"
		    value      	"none")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"debug log"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"factory priority"
		    value      	"0")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"force usage"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"local supervisor"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"need UC"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"singleton"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"WikiPageID (wiki)"
		    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/CreateUvsQueryMonthlyReport|4D3D3600026A
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (wiki)"
		    value      	"wiki")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/DocCardChange/DocCardSupport/CreateUvsQueryMonthlyReport.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4D3D3600026A_CUSTOM_IMPORT*"
		    value      	"//#UC START# *4D3D3600026A_CUSTOM_IMPORT*¤import com.atlassian.confluence.labels.Label;¤import com.atlassian.confluence.pages.AbstractPage;¤import com.atlassian.confluence.pages.BlogPost;¤import com.atlassian.confluence.pages.actions.CreateBlogPostAction;¤import com.atlassian.confluence.renderer.radeox.macros.MacroUtils;¤import com.atlassian.confluence.security.ContentPermission;¤import com.atlassian.confluence.security.Permission;¤import com.atlassian.confluence.user.AuthenticatedUserThreadLocal;¤import com.atlassian.confluence.util.GeneralUtil;¤import com.atlassian.confluence.util.velocity.VelocityUtils;¤import com.atlassian.gzipfilter.org.apache.commons.lang.StringUtils;¤import com.atlassian.user.Group;¤import com.atlassian.user.User;¤¤import ru.garant.shared.GCI.I18N.Messages;¤import ru.garant.shared.GCL.DateUtils;¤import ru.garant.shared.GCL.DateUtils.WrongFormat;¤¤import ru.garant.MDProcess.DocCardChange.DocCardChangeDAO.OGVLinksDAO;¤import ru.garant.MDProcess.DocCardChange.DocCardCommon.*;¤import ru.garant.MDProcess.DocCardChange.Entities.UVSQueryReportManager;¤import ru.garant.MDProcess.DocCardChange.Entities.UVSStateMachine;¤import ru.garant.MDProcess.ConfluenceMDChange.RequestSupportTypes.RequestImportance;¤¤¤import java.util.ArrayList;¤import java.util.Arrays;¤import java.util.Calendar;¤import java.util.Date;¤import java.util.HashMap;¤import java.util.HashSet;¤import java.util.List;¤import java.util.Map;¤import java.util.Set;¤¤import net.sf.hibernate.HibernateException;¤import net.sf.hibernate.Query;¤¤import org.springframework.orm.hibernate.SessionFactoryUtils;¤//#UC END# *4D3D3600026A_CUSTOM_IMPORT*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4D3D3600026A_CUSTOM_CLASS_DEFINITION*"
		    value      	"//#UC START# *4D3D3600026A_CUSTOM_CLASS_DEFINITION*¤//#UC END# *4D3D3600026A_CUSTOM_CLASS_DEFINITION*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4D3D3600026A_ACTION_NAME*"
		    value      	(value Text 
|//#UC START# *4D3D3600026A_ACTION_NAME*¤		return new String (getClass ().getName ());¤		//#UC END# *4D3D3600026A_ACTION_NAME*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4D3D3600026A_CUSTOM_METHODS_AND_DATA*"
		    value      	(value Text 
|//#UC START# *4D3D3600026A_CUSTOM_METHODS_AND_DATA*¤	@Override¤	public String doDefault() throws Exception {¤		// TODO Auto-generated method stub¤		Map<String, Object> contextMap = MacroUtils.defaultVelocityContext();¤		contextMap.put("spaceKey", getSpaceKey());¤		responseContent_ = VelocityUtils.getRenderedTemplate("/DocCardChange/DocCardView/choose-uvsquery-report-time-interval.vm", contextMap);¤		return SUCCESS;¤	}¤¤	@Override¤	public String execute() throws Exception {¤		// TODO Auto-generated method stub¤		return SUCCESS;¤	}¤¤	¤	public String doCreate() throws Exception{¤		long startHtmlTime = System.currentTimeMillis();¤		long queryTime = 0L;¤		String strListTitle = null;¤		String text = "";¤		int numberOgv = 1; ¤		totalCountByOGVs_ = new int[COUNT_TOTAL_COLUMNS];¤¤		Map<Long, Long> countPaperCopies = UVSQueryReportManager.Factory.get().getCountCreatedPaperCopies(getReportStartDate(), getReportFinishDate(), getSpaceKey());		¤		Map<Long, Long> countECopies = UVSQueryReportManager.Factory.get().getСountСreatedECopiesWithoutPaper(getReportStartDate(), getReportFinishDate(), getSpaceKey());¤		try {¤			List<OGVLinksDAO> ogvList = OGVLinksManager.Factory.get(getSpaceKey()).getOgvLinks();¤			Map<String, Map<String, List<Long>>> statisticsForUserList = getStatisticsData(ogvList);¤			Set<String> users = statisticsForUserList.keySet();¤			if(users.size() == 0){¤				text = TEXT_NO_UVS_QUERIES;¤			}else{¤				List<String> usersList = moveLeaderInStartListAndNoResponsibleInEndList(users);¤				Map<Long, List<Object>> infoFromUvsQuery = DpoUvsHelper.listToMap(UVSQueryReportManager.Factory.get().getCountUvsQueryByPeriod(getReportStartDate(), getReportFinishDate(), getSpaceKey()));¤				boolean summaryFlag = false;¤				// создаем строчки ОГВ с подсчетами¤				for(String userName : usersList){¤					clearTotalVariable();¤					Map<String, List<Long>> statisticsList = statisticsForUserList.get(userName);¤					Set<String> ogvNames = statisticsList.keySet();¤					numberOgv = 1;¤					User user = ContainerManager.Factory.get().getUserAccessor().getUser(userName);¤					String textNoResposnible = "";¤					for(String ogvName : ogvNames){¤						QueryInfoForReport queryInfoForReport = getQueryAllInfoForReport(statisticsList.get(ogvName), infoFromUvsQuery, countPaperCopies, countECopies);¤						if(userName.equals(NO_RESPONSIBLE)){¤							//формируем ОГВ, для которых не назначен исполнитель¤							if(isNotEmptyOGVRow(queryInfoForReport)){¤								textNoResposnible += getTableRow(ogvName, "Нет", COUNT_PARAMETER, queryInfoForReport, numberOgv);¤								numberOgv++;¤								summaryFlag = true;¤							}¤						}else{¤							text += getTableRow(ogvName, user.getFullName(), ogvNames.size() + "", queryInfoForReport, numberOgv);¤							numberOgv++;¤						}¤					}¤					if(ogvNames.size() > 0){¤						if(userName.equals(NO_RESPONSIBLE)){¤							if(summaryFlag){¤								text += textNoResposnible.substring(0, textNoResposnible.indexOf(COUNT_PARAMETER)) + (numberOgv - 1) + textNoResposnible.substring(textNoResposnible.indexOf(COUNT_PARAMETER) + COUNT_PARAMETER.length());¤								text += getTotalRow();¤							}¤						}else{¤							text += getTotalRow();¤						}¤					}¤				}¤			}¤			if(StringUtils.isEmpty(text)){¤				text = TEXT_NO_UVS_QUERIES;¤			}¤			String tipNotify = renderTemplate(text);¤			// сохраняем новостную страницу¤			saveBlogPost(tipNotify);¤		} catch (Exception e) {¤			Logs.LOG_SEX(e);¤		} finally {¤			if (queryTime > 3000) { // more than 3 sec.¤				this.timeLog(strListTitle, queryTime, System.currentTimeMillis () - startHtmlTime);¤			}¤		}¤¤		return SUCCESS;¤	}¤	¤	public String renderTemplate(String text){¤		Calendar cal = Calendar.getInstance();¤		cal.setTime(getReportStartDate());¤		Map<String, Object> contextMap = MacroUtils.defaultVelocityContext();¤		contextMap.put("year", cal.get(Calendar.YEAR));¤		contextMap.put("text", text);¤		return "{html}" + VelocityUtils.getRenderedTemplate("/DocCardChange/DocCardView/create-uvsquery-monthly-report-form.vm", contextMap) + "{html}";¤	}¤	¤	private QueryInfoForReport getQueryAllInfoForReport(List<Long> ogvIdsByTitle, Map<Long, List<Object>> infoFromUvsQuery, Map<Long, Long> countPaperCopies, Map<Long, Long> countECopies){¤		QueryInfoForReport queryInfoForReport = calculateCountUvsQueries(ogvIdsByTitle, infoFromUvsQuery);¤		for(long ogvIdByTitle : ogvIdsByTitle){¤			long countPaperCopy = (countPaperCopies.get(ogvIdByTitle) != null)? countPaperCopies.get(ogvIdByTitle):0;¤			queryInfoForReport.setCountPaperCopies(queryInfoForReport.getCountPaperCopies() + Integer.parseInt(countPaperCopy + ""));¤			long countECopyLong = (countECopies.get(ogvIdByTitle) != null)?countECopies.get(ogvIdByTitle):0;¤			queryInfoForReport.setCountECopies(queryInfoForReport.getCountECopies() + Integer.parseInt(countECopyLong + ""));¤		}¤		return queryInfoForReport;¤	}¤	¤	private boolean isNotEmptyOGVRow(QueryInfoForReport queryInfoForReport){¤		return queryInfoForReport.countAllCreatedQuery_ > 0 ¤				|| queryInfoForReport.countClosed_ > 0 ¤				|| queryInfoForReport.countCreatedQueryByImportance_ > 0 ¤				|| queryInfoForReport.countDiscardedResponses_ > 0 ¤				|| queryInfoForReport.countWaitingFromOGV_ > 0¤				|| queryInfoForReport.countPaperCopies_ > 0¤				|| queryInfoForReport.countECopies_ > 0;¤	}¤	¤	private final String NO_RESPONSIBLE = "no_responsible"; ¤	¤	private Map<String, Map<String, List<Long>>> getStatisticsData(List<OGVLinksDAO> ogvList){¤		Map<String, List<Long>> statisticsList = new HashMap<String, List<Long>>();¤		Map<String, Map<String, List<Long>>> statisticsListForUser = new HashMap<String, Map<String, List<Long>>>();¤		List<Long> idsList = new ArrayList<Long>(); ¤		String title = null;¤		for(OGVLinksDAO ogv : ogvList){¤			idsList = new ArrayList<Long>();¤			statisticsList = new HashMap<String, List<Long>>();¤			if (ogv.getTitle() != null) {¤				title = ogv.getTitle();¤			}else{¤				title = ogv.getPage().getTitle();¤			}¤			String responsible = ogv.getLogin();¤			if(StringUtils.isEmpty(responsible)){¤				responsible = NO_RESPONSIBLE; ¤			}¤			if(statisticsListForUser.containsKey(responsible)){¤				statisticsList = statisticsListForUser.get(responsible);¤				if(statisticsList.containsKey(title)){¤					idsList = statisticsList.get(title);¤				}¤			}¤			idsList.add(ogv.getId());¤			statisticsList.put(title, idsList);¤			statisticsListForUser.put(responsible, statisticsList);¤		}¤		return statisticsListForUser;¤	}¤	¤	private List<String> moveLeaderInStartListAndNoResponsibleInEndList(Set<String> users){¤		//руководитель должен быть первым в списке¤		User leader = DPOUVSManager.Factory.get(getSpace()).getLeaderDpoUvs();¤		String leaderName = "";¤		if(leader != null){¤			leaderName = leader.getName();¤		}¤		List<String> responsibles = new ArrayList<String>();¤		if(users.contains(leaderName)){¤			responsibles.add(leaderName);¤		}¤		for(String user : users){¤			if(user.equals(leaderName) == false && user.equals(NO_RESPONSIBLE) == false){¤				responsibles.add(user);¤			}¤		}¤		if(users.contains(NO_RESPONSIBLE)){¤			responsibles.add(NO_RESPONSIBLE);¤		}¤		return responsibles;¤	}¤	¤	private QueryInfoForReport calculateCountUvsQueries(List<Long> idsList, Map<Long, List<Object>> infoFromUvsQueryMap){¤		QueryInfoForReport queryInfoForReport = new QueryInfoForReport();¤		¤		for(Long id : idsList){¤			if(infoFromUvsQueryMap.containsKey(id)){¤				List<Object> infoFromUvsQueryList = infoFromUvsQueryMap.get(id);¤				for(Object info : infoFromUvsQueryList){¤					Object[] infoObjects = (Object[])info;¤					byte importance = (Byte)infoObjects[1];¤					byte state = (Byte)infoObjects[2];¤					String event = (String)infoObjects[3];¤					Date creationDate = (Date)infoObjects[4];¤					Date lastModDate = (Date)infoObjects[5];¤					if(creationDate.after(getReportStartDate()) && creationDate.before(getReportFinishDate())){¤						queryInfoForReport.setCountAllCreatedQuery(queryInfoForReport.getCountAllCreatedQuery() + 1);¤						if(importance == RequestImportance.CRITICAL.getId() || importance == RequestImportance.MAJOR.getId()){¤							queryInfoForReport.setCountCreatedQueryByImportance(queryInfoForReport.getCountCreatedQueryByImportance() + 1);¤						}¤					}¤					if(lastModDate.after(getReportStartDate()) && lastModDate.before(getReportFinishDate())){ ¤						if(state == UVSStateMachine.ST_WAITING_FROM_OGV.getSortValue()){¤							queryInfoForReport.setCountWaitingFromOGV(queryInfoForReport.getCountWaitingFromOGV() + 1);¤						}else if(state == UVSStateMachine.ST_CLOSED.getSortValue()){¤							queryInfoForReport.setCountClosed(queryInfoForReport.getCountClosed() + 1);¤						}else if(state == UVSStateMachine.ST_DISCARDED.getSortValue()){¤							if(UVSStateMachine.EV_DISCARDED_RESPONSE.getClass().getName().equals(event)){¤								queryInfoForReport.setCountDiscardedResponses(queryInfoForReport.getCountDiscardedResponses() + 1);¤							}¤						}¤					}¤				}¤				¤			}¤		}	¤		return queryInfoForReport;¤	}¤	¤	private void clearTotalVariable(){¤		for(int i = 0; i < COUNT_TOTAL_COLUMNS; i++){¤			totalCountByOGVs_[i] = 0;¤		}¤	}¤	¤	public String saveBlogPost(String content) throws Exception{¤		BlogPost page = new BlogPost();¤		String userName = AuthenticatedUserThreadLocal.getUsername();¤		page.setCreatorName(userName);¤		page.setLastModifierName(userName);¤		page.setLastModificationDate(page.getCreationDate());¤		page.setContent(content);¤		page.setTitle(getReportTitle());¤		page.setSpace(getSpace());¤		ContainerManager.Factory.get().getPageManager().saveContentEntity(page, null);¤		Label label = ContainerManager.Factory.get().getLabelManager().getLabel("monthly_report");¤		ContainerManager.Factory.get().getLabelManager().addLabel(page, label);¤		User leaderUvs = DPOUVSManager.Factory.get(getSpace()).getLeaderUvs();¤		if(leaderUvs != null){¤			final ContentPermission[] cpArray = {ContentPermission.createUserPermission(ContentPermission.EDIT_PERMISSION, leaderUvs.getName())};¤			ContainerManager.Factory.get().getContentPermissionManager().setContentPermissions(Arrays.asList(cpArray), page, com.atlassian.confluence.security.ContentPermission.EDIT_PERMISSION);¤		}¤		pageId_ = page.getId();¤		SessionFactoryUtils.getSession(ContainerManager.Factory.get().getSessionFactory(), false).flush();¤		return SUCCESS;¤	}¤	¤	private String getReportTitle(){¤		String title = "Ежемесячный отчет по запросам на документы, поступившим от ЮО ПУ";¤		if(getReportStartDate() != null){¤			String startDate = DateUtils.formatDdMMyyyDate(getReportStartDate());¤			title += " c " + startDate.substring(0, 5); ¤		}¤		if(getReportFinishDate() != null){¤			String endDate = DateUtils.formatDdMMyyyDate(getReportFinishDate());¤			title += " по " + endDate.substring(0, 5); ¤		}¤		return title;¤	}¤	¤	private String getTotalRow(){¤		String text = "<tr>";¤		text += "<th colspan='3'>" + Messages.Factory.messages().get("createuvsqueryreport.total.in.month") + "</th>\n";¤		for(int i = 0; i < COUNT_TOTAL_COLUMNS; i++){¤			text += "<th>" + totalCountByOGVs_[i] + "</th>\n";¤		}¤		text += "</tr>\n";¤		return text;¤	}¤	¤	private String getTableRow(String ogvName, String userFullName, String countOGVs, QueryInfoForReport queryInfoForReport, int numberOgv){¤		¤		String text = "<tr>";¤		text += "<th>" + numberOgv + "</th>\n";¤		if(numberOgv == 1){¤			if(userFullName.contains(" ")){¤				userFullName = userFullName.substring(0, userFullName.indexOf(" "));¤			}¤			text += "<th rowspan='" + countOGVs + "'><div class='verticaling' style='width:30px'>" + userFullName + "</div></th>\n";¤		}¤		text += "<th>" + ogvName + "</th>\n";¤		Integer count = queryInfoForReport.getCountAllCreatedQuery();¤		text += "<td>" + count + "</td>\n";¤		totalCountByOGVs_[0] += count;¤		count = queryInfoForReport.getCountCreatedQueryByImportance();¤		text += "<td>" + count + "</td>\n";¤		totalCountByOGVs_[1] += count;¤		count = queryInfoForReport.getCountWaitingFromOGV();¤		text += "<td>" + count + "</td>\n";¤		totalCountByOGVs_[2] += count;¤		count = queryInfoForReport.getCountClosed();¤		text += "<td>" + count + "</td>\n";¤		totalCountByOGVs_[3] += count;¤		count = queryInfoForReport.getCountDiscardedResponses();¤		text += "<td>" + count + "</td>\n";¤		totalCountByOGVs_[4] += count;¤		count = queryInfoForReport.getCountPaperCopies();¤		text += "<td>" + count + "</td>\n";¤		totalCountByOGVs_[5] += count;¤		count = queryInfoForReport.getCountECopies();¤		text += "<td>" + count + "</td>\n";¤		totalCountByOGVs_[6] += count;¤		text += "</tr>\n";¤		return text;¤	}¤	¤	private long pageId_ = 0;¤	¤	public long getPageId(){¤		return pageId_;¤	}¤¤	private int[] totalCountByOGVs_ = null;¤	private int COUNT_TOTAL_COLUMNS = 7;¤	private String TEXT_NO_UVS_QUERIES = "Нет запросов на документы, поступивших за этот период";¤	¤	private void timeLog (String strListTitle, long queryTime, long htmlTime) {¤		java.util.Date curDate = new java.util.Date();¤		String userName = (this.getRemoteUser()!=null)? this.getRemoteUser().getName() : "Anonymous";¤		String out =¤			curDate + "[" + userName + "]: CreateUvsQueryMonthlyReport::htmlTimeStr: "¤			+ this.getTimerStr(strListTitle, htmlTime) + "\n"¤			+ curDate + "[" + userName + "]: CreateUvsQueryMonthlyReport::queryTimeStr "¤			+ this.getTimerStr(strListTitle, queryTime) + "\n"¤			+ "***************************************************************\n";¤		Logs.LOG_I(out);¤	}¤¤    private String getTimerStr (String title, long time) {¤		String s = null;¤		try {¤			s = new String (title.getBytes ("CP866"));¤		} catch (java.io.UnsupportedEncodingException e) {¤			Logs.LOG_E ("CreateUvsQueryMonthlyReport::getTimerStr::UnsupportedEncodingException: " + e);¤			s = title;¤		}¤		com.atlassian.user.User user = this.getRemoteUser ();¤		return s + ": HTML time " + time + "ms. [" + (user==null? "Anonymous":user.getName()) + "]";¤	}¤¤    Date reportStartDate_ = null;¤	private Date getReportStartDate() {¤		return reportStartDate_;¤	}¤	public void setReportStartDate(String reportStartDate) {¤		try {¤			reportStartDate_ = DateUtils.parseDdMMyyyyDate(reportStartDate);¤		} catch (WrongFormat e) {¤			throw new NullPointerException (e.getMessage());¤		}¤	}¤¤	Date reportFinishDate_ = null;¤	private Date getReportFinishDate() {¤		return reportFinishDate_;¤	}¤	public void setReportFinishDate(String reportFinishDate) {¤		try {¤			reportFinishDate_ = DateUtils.parseDdMMyyyyDate(reportFinishDate);¤			reportFinishDate_.setTime(reportFinishDate_.getTime()+(1000*60*60*24-1));¤		} catch (WrongFormat e) {¤			throw new NullPointerException (e.getMessage());¤		}¤	}¤	¤	private String responseContent_ = null;¤¤	public String getResponseContent() {¤		return responseContent_;¤	}¤	¤	static class QueryInfoForReport{¤		private int countAllCreatedQuery_ = 0;¤		public int getCountAllCreatedQuery(){¤			return countAllCreatedQuery_;¤		}¤		public void setCountAllCreatedQuery(int countAllCreatedQuery){¤			countAllCreatedQuery_ = countAllCreatedQuery;¤		}¤		private int countCreatedQueryByImportance_ = 0;¤		public int getCountCreatedQueryByImportance(){¤			return countCreatedQueryByImportance_;¤		}¤		public void setCountCreatedQueryByImportance(int countCreatedQueryByImportance){¤			countCreatedQueryByImportance_ = countCreatedQueryByImportance;¤		}¤¤		private int countWaitingFromOGV_ = 0;¤		public int getCountWaitingFromOGV(){¤			return countWaitingFromOGV_;¤		}¤		public void setCountWaitingFromOGV(int countWaitingFromOGV){¤			countWaitingFromOGV_ = countWaitingFromOGV;¤		}¤¤		private int countClosed_ = 0;¤		public int getCountClosed(){¤			return countClosed_;¤		}¤		public void setCountClosed(int countClosed){¤			countClosed_ = countClosed;¤		}¤	¤		private int countDiscardedResponses_ = 0;¤		public int getCountDiscardedResponses(){¤			return countDiscardedResponses_;¤		}¤		public void setCountDiscardedResponses(int countDiscardedResponses){¤			countDiscardedResponses_ = countDiscardedResponses;¤		}¤		private int countPaperCopies_ = 0;¤		public int getCountPaperCopies(){¤			return countPaperCopies_;¤		}¤		public void setCountPaperCopies(int countPaperCopies){¤			countPaperCopies_ = countPaperCopies;¤		}¤		private int countECopies_ = 0;¤		public int getCountECopies(){¤			return countECopies_;¤		}¤		public void setCountECopies(int countECopies){¤			countECopies_ = countECopies;¤		}¤	}¤	String COUNT_PARAMETER = "{0}";¤	//#UC END# *4D3D3600026A_CUSTOM_METHODS_AND_DATA*
		    )))
	    quid       	"4D3D3600026A"
	    documentation 	"Ежемесячный отчет по запросам на документы, поступившим от ЮО"
	    stereotype 	"KActionPlugin"
	    superclasses 	(list inheritance_relationship_list
		(object Inheritance_Relationship
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"4144301648"))
		    quid       	"4D3FC60A03E5"
		    supplier   	"Logical View::MDProcess::ConfluenceMDChange::ReportSupport::CreateMonthlyReportAction"
		    quidu      	"4BF50E150381"))
	    used_nodes 	(list uses_relationship_list
		(object Uses_Relationship
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"9390172408")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false"))
		    quid       	"4D3D369A031F"
		    stereotype 	"uses"
		    supplier   	"Logical View::MDProcess::DocCardChange::DocCardCommon::DPOUVSManager"
		    quidu      	"4C3FF8CD03C3"))
	    language   	"MDA Generator")
	(object Class "ReturnInWorkWebItem"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"20329359696")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"label key"
		    value      	"uvsquery.return.in.work")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"need UC"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"section"
		    value      	"system.content.action/modify")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"styleClass"
		    value      	"return-uvsquery")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"weight"
		    value      	"11")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"WikiPageID (wiki)"
		    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/ReturnInWorkWebItem|4D5E546002BD
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (wiki)"
		    value      	"wiki")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"output.xml:*4D5E546002BDLABEL_CONTENT*"
		    value      	(value Text 
|<!--UC_BEGIN*4D5E546002BDLABEL_CONTENT*-->¤			<!--UC_END*4D5E546002BDLABEL_CONTENT*-->
		    )))
	    quid       	"4D5E546002BD"
	    documentation 	"контролирует показ линка Вернуть в работы"
	    stereotype 	"WebItem"
	    used_nodes 	(list uses_relationship_list
		(object Uses_Relationship
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"20410528507")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"id"
			    value      	"docCardReturnInWork")
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"params"
			    value      	""))
		    quid       	"4D5E54B10352"
		    stereotype 	"link"
		    supplier   	"Logical View::MDProcess::DocCardChange::DocCardSupport::DocCardXPlugin::DocCardXPackage::CreateUvsQuery"
		    quidu      	"4C652D23033C"))
	    language   	"MDA Generator")
	(object Class "ReturnInWorkCondition"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"20422543602")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/DocCardChange/DocCardSupport/ReturnInWorkCondition.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4D5E54BD035F_CUSTOM_IMPORT*"
		    value      	"//#UC START# *4D5E54BD035F_CUSTOM_IMPORT*¤import ru.garant.MDProcess.ConfluenceMDChange.Requests.AbstractRequestPermissionManager;¤import ru.garant.MDProcess.DocCardChange.DocCardChangeDAO.GarDocDAO;¤import ru.garant.MDProcess.DocCardChange.DocCardCommon.DPOUVSManager;¤import ru.garant.MDProcess.DocCardChange.DocCardCommon.DocCardManager;¤import ru.garant.MDProcess.DocCardChange.Entities.DocCard;¤import ru.garant.MDProcess.DocCardChange.Entities.DocCardStates;¤import ru.garant.MDProcess.DocCardChange.Entities.UVSQuery;¤import ru.garant.MDProcess.DocCardChange.Entities.UVSQueryPermissionManager;¤import ru.garant.MDProcess.DocCardChange.Entities.sm.UVSStateMachine.Closed;¤import ru.garant.MDProcess.DocCardChange.Entities.sm.UVSStateMachine.Discarded;¤¤import java.util.List;¤¤import ru.garant.shared.FSM.State;¤¤import com.atlassian.confluence.pages.AbstractPage;¤import com.atlassian.confluence.pages.Page;¤import com.atlassian.confluence.plugin.descriptor.web.WebInterfaceContext;¤import com.atlassian.confluence.security.Permission;¤import com.atlassian.confluence.security.PermissionManager;¤import com.atlassian.confluence.labels.Label;¤import com.atlassian.user.Group;¤//#UC END# *4D5E54BD035F_CUSTOM_IMPORT*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4D5E54BD035F_CUSTOM_CLASS_DEFINITION*"
		    value      	"//#UC START# *4D5E54BD035F_CUSTOM_CLASS_DEFINITION*¤//#UC END# *4D5E54BD035F_CUSTOM_CLASS_DEFINITION*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4D5E54BD035F_CUSTOM_METHODS_AND_DATA*"
		    value      	(value Text 
|//#UC START# *4D5E54BD035F_CUSTOM_METHODS_AND_DATA*¤	@Override¤	public boolean shouldDisplay(WebInterfaceContext context) {¤		// TODO Auto-generated method stub¤		final AbstractPage pageObj = context.getPage();¤		if (pageObj instanceof Page == false) {¤			return false;¤		}¤		Page page = (Page) pageObj;¤¤		PermissionManager pm = ContainerManager.Factory.get().getPermissionManager();¤		boolean isDocCard = DocCardManager.Factory.get().isDocCard(pageObj.getId());¤		Group glUOGroup = DPOUVSManager.Factory.get(pageObj.getSpaceKey()).getQueryPostersGroupInUO();¤		boolean hasMembership = ContainerManager.Factory.get().getUserAccessor().hasMembership(glUOGroup, context.getUser());¤		if ((pm.hasPermission(context.getUser(), Permission.VIEW, page) && isDocCard && hasMembership) == false) {¤			return false;¤		}¤		DocCardStates docCardState = DocCard.Factory.get(pageObj.getId()).getDocCardState();¤		if(docCardState.equals(DocCardStates.DONE_STATE) || docCardState.equals(DocCardStates.FAILURE_STATE)){¤				return true;¤		}¤		return false;¤	}¤	//#UC END# *4D5E54BD035F_CUSTOM_METHODS_AND_DATA*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"WikiPageID (wiki)"
		    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/ReturnInWorkCondition|4D5E54BD035F
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (wiki)"
		    value      	"wiki"))
	    quid       	"4D5E54BD035F"
	    documentation 	
|определяет будет ли показываться ссылка "Вернуть в работы" в меню страницы. Доступна только для закрытых или отклоненных документов и только сотрудниками ГЛ ЮО
	    
	    stereotype 	"SimpleClass"
	    superclasses 	(list inheritance_relationship_list
		(object Inheritance_Relationship
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"4320311662"))
		    quid       	"4D677B800119"
		    supplier   	"Logical View::external::ConfluenceSupport::com.atlassian.confluence.plugin.descriptor.web.conditions::BaseConfluenceCondition"
		    quidu      	"4A53516B029A"))
	    language   	"MDA Generator")
	(object Class "SearchFiledsInDepositoryString"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"19168229924")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/DocCardChange/DocCardSupport/SearchFiledsInDepositoryString.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4DD50866035F_CUSTOM_IMPORT*"
		    value      	"//#UC START# *4DD50866035F_CUSTOM_IMPORT*¤import org.apache.commons.lang.StringUtils;¤¤import java.io.File;¤import java.text.SimpleDateFormat;¤import java.util.Date;¤import java.util.List;¤¤import ru.garant.MDProcess.ConfluencePlugins.CommonVelocityContext.GlobalHelper;¤import ru.garant.MDProcess.DocCardChange.DocCardChangeDAO.DocTypeDAO;¤import ru.garant.MDProcess.DocCardChange.DocCardChangeDAO.OGVLinksDAO;¤import ru.garant.MDProcess.DocCardChange.DocCardCommon.DocCardIndexManager;¤import ru.garant.MDProcess.DocCardChange.DocCardCommon.DocCardManager;¤import ru.garant.MDProcess.DocCardChange.DocCardCommon.OGVLinksManager;¤¤import com.atlassian.confluence.spaces.Space;¤import com.atlassian.confluence.json.json.JsonObject;¤import com.atlassian.confluence.json.json.JsonString;¤//#UC END# *4DD50866035F_CUSTOM_IMPORT*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4DD50866035F_CUSTOM_CLASS_DEFINITION*"
		    value      	"//#UC START# *4DD50866035F_CUSTOM_CLASS_DEFINITION*¤//#UC END# *4DD50866035F_CUSTOM_CLASS_DEFINITION*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4DD50866035F_ACTION_NAME*"
		    value      	(value Text 
|//#UC START# *4DD50866035F_ACTION_NAME*¤		return new String (getClass ().getName ());¤		//#UC END# *4DD50866035F_ACTION_NAME*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4DD50866035F_CUSTOM_METHODS_AND_DATA*"
		    value      	(value Text 
|//#UC START# *4DD50866035F_CUSTOM_METHODS_AND_DATA*¤	public String doSearchFieldsInDepository() {¤		JsonObject ret = new JsonObject ();¤		ret.setProperty("copy_type", new JsonString(""));¤		ret.setProperty("depository_text", new JsonString(""));¤		ret.setProperty("quick_search_docissuer", new JsonString(""));¤		ret.setProperty("id_quick_search_docissuer", new JsonString(""));¤		ret.setProperty("site_text", new JsonString(""));¤		ret.setProperty("document_number_text", new JsonString(""));¤		ret.setProperty("document_date_text", new JsonString(""));¤		¤		try {¤			ret.setProperty("copy_type", new JsonString (getCopyName(depository_)));¤			¤			if(StringUtils.isNotEmpty(depository_)){¤				String depositoryText = skipQuotesAndSlashSymbols(depository_);¤				ret.setProperty("depository_text", new JsonString (depositoryText));¤¤				OGVLinksDAO ogv = findOgv(depositoryText);¤				String name = getNameFromPath(depositoryText);¤¤				if(ogv != null){¤					if(StringUtils.isNotEmpty(name)){¤						GlobalHelper.AttrContainer ac = null;¤						if(StringUtils.isEmpty(ogv.getRegex())){¤							ac = GlobalHelper.getFromMatchFileDateAndNumber(PATTERN, name, true);¤						}else{¤							ac = getAttributes(depositoryText, ogv.getRegex(), name);¤						}	¤						if(StringUtils.isNotEmpty(ac.ogv_)){¤							long id = Long.parseLong(ac.ogv_);¤							String spaceKey = ContainerManager.Factory.get().getSpaceManager().getSpaceFromPageId(id);¤							ogv = OGVLinksManager.Factory.get(spaceKey).getOgvById(id);¤						}¤						ret.setProperty("document_date_text", new JsonString ((ac.date_ == null) ? "" : new SimpleDateFormat("dd.MM.yyyy").format(ac.date_)));¤						ret.setProperty("document_number_text", new JsonString ((ac.number_ == null) ? "" :ac.number_));¤						DocTypeDAO type = DpoUvsHelper.getDocTypeByName(ac.type_, ogv.getPage().getSpaceKey());¤						String typeName = null;¤						if(type != null){¤							ret.setProperty("document_type", new JsonString (type.getId() + ""));¤							typeName = type.getName();¤						}¤						String dates = null;¤						if(ac.date_ != null){¤							dates = new SimpleDateFormat("dd.MM.yyyy").format(ac.date_);¤						}¤						//хотя бы 2 параметра должно быть задано¤						if(typeName != null || ac.number_ != null || dates != null){¤							ret.setProperty("repeats", new JsonString (doSearchRepeats(typeName, ogv.getPage().getTitle(), ac.number_, dates, ogv.getPage().getSpaceKey())));¤						}¤					}¤					ret.setProperty("quick_search_docissuer", new JsonString (ogv.getPage().getTitle()));¤					ret.setProperty("id_quick_search_docissuer", new JsonString (Long.toString(ogv.getId())));¤					ret.setProperty("site_text", new JsonString ((ogv.getSourceWebSite() != null && "uvsquery.copies.site".equals(getCopyName(depository_)))?ogv.getSourceWebSite():""));¤					¤					JSONString_ = ret.serialize();¤				} else if(StringUtils.isNotEmpty(name)){¤					GlobalHelper.AttrContainer ac = GlobalHelper.getFromMatchFileDateAndNumber(PATTERN, name, true);¤					¤					ret.setProperty("document_date_text", new JsonString ((ac.date_ == null) ? "" : new SimpleDateFormat("dd.MM.yyyy").format(ac.date_)));¤					ret.setProperty("document_number_text", new JsonString ((ac.number_ == null) ? "" :ac.number_));¤					if((ac.date_ != null) && (ac.number_ != null)){¤						ret.setProperty("repeats", new JsonString (REPEATS_EMPTY_STRING));¤					}¤					JSONString_ = ret.serialize();¤				}¤			}¤		} catch (Exception e) {¤			JSONString_ = ret.serialize();¤			Logs.LOG_SEX(e);¤		}¤		return SUCCESS;¤	}¤	¤	public String doSearchOnlyRepeats() {¤		JsonObject ret = new JsonObject();¤		String spaceKey = getSpaceKey();¤		if(StringUtils.isEmpty(spaceKey)){¤			spaceKey = "DPOUVS";¤		}¤¤		ret.setProperty("repeats", new JsonString (doSearchRepeats(getType(), getIssuer(), getNumbers(), getDate(), spaceKey)));¤		JSONString_ = ret.serialize();¤		return SUCCESS;¤	}¤¤	private String spaceKey_ = null;¤	¤	public String getSpaceKey(){¤		return spaceKey_;¤	}¤	¤	public void setSpaceKey(String spaceKey){¤		spaceKey_ = spaceKey;¤	}¤	¤	private String type_ = null;¤	¤	public String getType(){¤		return type_;¤	}¤	¤	public void setType(String type){¤		type_ = type;¤	}¤¤	private String issuer_ = null;¤	¤	public String getIssuer(){¤		return issuer_;¤	}¤	¤	public void setIssuer(String issuer){¤			issuer_ = issuer;¤	}¤¤	private String numbers_ = null;¤	¤	public String getNumbers(){¤		return numbers_;¤	}¤	¤	public void setNumbers(String numbers){¤//		if(StringUtils.isNotEmpty(numbers)){¤//			numbers_ = DpoUvsHelper.replaceLatSymbByRus(numbers.trim());¤//		}else{¤			numbers_ = numbers;¤		//}¤	}¤¤	private String date_ = null;¤	¤	public String getDate(){¤		return date_;¤	}¤	¤	public void setDate(String date){¤		date_ = date;¤	}¤¤	public String doSearchRepeats(String typeName, String ogvTitle, String number, String dates, String spaceKey) {¤		String response = DocCardIndexManager.Factory.get().getRepeats(typeName, ogvTitle, number, dates, spaceKey);¤		if(response != null){¤			return response;¤		}else{¤			return REPEATS_EMPTY_STRING;¤		}¤	}¤	¤	public String getCopyName(String depository){¤		String copyName = null;¤		if(depository.contains("FROM_OGV")){¤			copyName = "uvsquery.copies.e";¤		}else if (depository.contains("\\ScanImage\\")){¤			copyName = "uvsquery.copies.paper";¤		}else {¤			copyName = (depository.startsWith("L:\\CRDR")) ? "uvsquery.copies.e": "uvsquery.copies.site";¤		}¤		return copyName;¤	}¤	¤	public String getNameFromPath(String depositoryText){¤		if(depositoryText.lastIndexOf("\\") > -1){¤			return depositoryText.substring(depositoryText.lastIndexOf("\\")+1);¤		}¤		return null;¤	}¤	¤	public GlobalHelper.AttrContainer getAttributes(String depositoryText, String regex, String name){¤		File file = new File(depositoryText);¤		boolean isFile = true;¤		if(file != null && file.isDirectory()){¤			isFile = false;¤		}¤		GlobalHelper.AttrContainer attr = GlobalHelper.getFromMatchFileDateAndNumber(regex, name, isFile);¤		attr.ogv_ = changeOGV(attr.ogv_);¤		return attr;¤	}¤	¤	private String changeOGV(String attrOGV){¤		if(StringUtils.isEmpty(attrOGV)){¤			return attrOGV;¤		}¤		if(attrOGV.equals("ПРЕЗИДЕНТ")){¤			attrOGV = "249954324"; ¤		}else if(attrOGV.equals("ГОСДУМА")){¤			attrOGV = "241696954"; ¤		}else if(attrOGV.equals("ПРАВИТЕЛЬСТВО")){¤			attrOGV = "241696789"; ¤		}else if(attrOGV.equals("МЭР")){¤			attrOGV = "249955806"; ¤		}¤		return attrOGV;¤	}¤	¤	public OGVLinksDAO findOgv(String depositoryText){¤		if(depositoryText.lastIndexOf("\\") > -1){¤	¤			String suffix = depositoryText.substring(0, depositoryText.lastIndexOf("\\"));¤			suffix = suffix.substring(suffix.lastIndexOf("\\")+1);¤			¤ 			int i = suffix.length();¤			do {¤				i--;¤				if (StringUtils.isAlpha(Character.toString(suffix.charAt(i)))) {¤					break;¤				}¤			} while (i > 0);¤			suffix = suffix.substring(0, i+1);¤¤			return OGVLinksManager.Factory.get("DPOUVS").getOgvLinksFromSuffixForPath(suffix);¤		}¤		return null;¤	}¤	¤	¤	private String depository_ = "";¤	final public static String PATTERN =¤			"' (?:^(.+?) от (\\d{2}\\.\\d{2}\\.\\d{4})\\.*.*) ' match IF ' dd.MM.yyyy ' date normilize number THEN " +¤			"' (?:^(.+?) от (\\d{2}\\.\\d{2}\\.\\d{2})\\.*.*) ' match IF ' dd.MM.yy ' date normilize number THEN " +¤			"' (\\d{2}!\\d{2}!\\d{2})#(.+)[.#]\\w{2,4} ' match IF normilize number ' dd!MM!yy ' date THEN " +¤			"' (\\d{2}!\\d{2}!\\d{2})#(.+)#* ' match IF normilize number ' dd!MM!yy ' date THEN " +¤			"' (.+)#(\\d{2}!\\d{2}!\\d{2}).* ' match IF ' dd!MM!yy ' date normilize number THEN " +¤			"' .*(\\d{2}!\\d{2}!\\d{2}).* ' match IF ' dd!MM!yy ' date THEN "¤	; ¤	¤	public String skipQuotesAndSlashSymbols(String depositoryString){¤		String depositoryText = depositoryString.trim();¤		while(depositoryText.startsWith(BACKWARD_SLASH_AND_QUOTE) ¤				|| depositoryText.startsWith(TWO_BACKWARD_SLASH) ¤				|| depositoryText.startsWith(SINGLE_QUOTE) ¤				|| depositoryText.startsWith(FORWARD_SLASH)){¤			depositoryText = depositoryText.substring(1);¤		}¤		while(depositoryText.endsWith(BACKWARD_SLASH_AND_QUOTE) ¤				|| depositoryText.endsWith(TWO_BACKWARD_SLASH) ¤				|| depositoryText.endsWith(SINGLE_QUOTE) ¤				|| depositoryText.endsWith(FORWARD_SLASH)){¤			depositoryText = depositoryText.substring(0, depositoryText.length()-1);¤		}¤		return  depositoryText;¤	}¤	¤	public String getDepository(){¤		return depository_;¤	}¤	¤	public void setDepository(String depository){¤		depository_ = depository;¤	}¤	¤	private String JSONString_ = "";¤	public String getResponseContent(){¤		return JSONString_;¤	}¤	¤	private String FORWARD_SLASH = "/";¤	private String TWO_BACKWARD_SLASH = "\\";¤	private String SINGLE_QUOTE = "'";¤	private String BACKWARD_SLASH_AND_QUOTE = "\"";¤	¤	private String REPEATS_EMPTY_STRING = "<br/><br/><br/><br/><br/>";¤	//#UC END# *4DD50866035F_CUSTOM_METHODS_AND_DATA*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"WikiPageID (wiki)"
		    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/SearchFiledsInDepositoryString|4DD50866035F
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (wiki)"
		    value      	"wiki"))
	    quid       	"4DD50866035F"
	    documentation 	"при копировании ссылки в местопожение файла подставлять орган, дату, номер, копию"
	    stereotype 	"KActionPlugin"
	    superclasses 	(list inheritance_relationship_list
		(object Inheritance_Relationship
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"19258343157"))
		    quid       	"4DD508C003DD"
		    supplier   	"Logical View::external::JavaConfluence::ConfluenceClassPack::ConfluenceActionSupport"
		    quidu      	"465ADCCA036B"))
	    language   	"MDA Generator")
	(object Class "SendNotificationsInOnAcceptByUOManagerTimerTaskJob"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"4513139777")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Factory auto reg"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Factory default impl"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Servant Pool"
		    value      	"none")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"cron-expression"
		    value      	"0 0/5 * * * ?")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"debug log"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"factory priority"
		    value      	"0")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"local supervisor"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"need UC"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"repeated"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"singleton"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"WikiPageID (wiki)"
		    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/SendNotificationsInOnAcceptByUOManagerTimerTaskJob|4DE8D7F300AA
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (wiki)"
		    value      	"wiki")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/DocCardChange/DocCardSupport/SendNotificationsInOnAcceptByUOManagerTimerTaskJob.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4DE8D7F300AA_CUSTOM_IMPORT*"
		    value      	"//#UC START# *4DE8D7F300AA_CUSTOM_IMPORT*¤import ru.garant.MDProcess.DocCardChange.Entities.UVSQueryManager;¤import ru.garant.shared.ConfluenceCore.ActionSupport.ActionContextThreadLocalFactory;¤//#UC END# *4DE8D7F300AA_CUSTOM_IMPORT*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4DE8D7F300AA_CUSTOM_CLASS_DEFINITION*"
		    value      	"//#UC START# *4DE8D7F300AA_CUSTOM_CLASS_DEFINITION*¤//#UC END# *4DE8D7F300AA_CUSTOM_CLASS_DEFINITION*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4DE8D7F300AA_DO_EXECUTE_IMPLEMETATION*"
		    value      	(value Text 
|//#UC START# *4DE8D7F300AA_DO_EXECUTE_IMPLEMETATION*¤		super.doExecute(jec);¤		//#UC END# *4DE8D7F300AA_DO_EXECUTE_IMPLEMETATION*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4DE8D7F300AA_CUSTOM_METHODS_AND_DATA*"
		    value      	(value Text 
|//#UC START# *4DE8D7F300AA_CUSTOM_METHODS_AND_DATA*¤	@Override¤	protected void executeJob() {¤		UVSQueryManager.Factory.get().processTimeScheduledSendNotifyToAssignedProjectManagers();¤	}¤	¤	protected boolean isNeedWriteTransaction() {¤		return true;¤	}¤	¤	//#UC END# *4DE8D7F300AA_CUSTOM_METHODS_AND_DATA*
		    )))
	    quid       	"4DE8D7F300AA"
	    documentation 	
|Рассылка всем РП нотификации по запросам, по которым в стадии "В обработке у РП" нет реакции более двух часов, но менее двух часов пяти минут
	    
	    stereotype 	"KJobPlugin"
	    superclasses 	(list inheritance_relationship_list
		(object Inheritance_Relationship
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"1337600307663139"))
		    quid       	"4FBA29330296"
		    supplier   	"Logical View::MDProcess::DocCardChange::DocCardSupport::GarDocAbstractJob"
		    quidu      	"53E4BF9000E2"))
	    language   	"MDA Generator")
	(object Class "AddUOCurrentDocWebItem"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"24076446767")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"label key"
		    value      	"uvsquery.add.uo")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"need UC"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"section"
		    value      	"system.content.add/space")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"styleClass"
		    value      	"add-uocurrentdoc")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"weight"
		    value      	"11")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"output.xml:*4E16F7AA0021LABEL_CONTENT*"
		    value      	(value Text 
|<!--UC_BEGIN*4E16F7AA0021LABEL_CONTENT*-->¤			<!--UC_END*4E16F7AA0021LABEL_CONTENT*-->
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"WikiPageID (wiki)"
		    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/AddUOCurrentDocWebItem|4E16F7AA0021
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (wiki)"
		    value      	"wiki"))
	    quid       	"4E16F7AA0021"
	    documentation 	"создание текущего документа для ЮО с карточки"
	    stereotype 	"WebItem"
	    used_nodes 	(list uses_relationship_list
		(object Uses_Relationship
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"24130593355")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"id"
			    value      	"createUVSQueryForCurrentDoc"))
		    quid       	"4E16F7E000A6"
		    stereotype 	"link"
		    supplier   	"Logical View::MDProcess::DocCardChange::DocCardSupport::DocCardXPlugin::DocCardXPackage::CreateUvsQuery"
		    quidu      	"4C652D23033C"))
	    language   	"MDA Generator")
	(object Class "AddUOCurrentDocFromDoccardCondition"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"3075322744")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"WikiPageID (wiki)"
		    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/AddUOCurrentDocFromDoccardCondition|4E23D93602F9
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (wiki)"
		    value      	"wiki")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/DocCardChange/DocCardSupport/AddUOCurrentDocFromDoccardCondition.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4E23D93602F9_CUSTOM_IMPORT*"
		    value      	"//#UC START# *4E23D93602F9_CUSTOM_IMPORT*¤import ru.garant.MDProcess.DocCardChange.DocCardCommon.DPOUVSManager;¤import ru.garant.MDProcess.DocCardChange.DocCardCommon.DocCardManager;¤¤import com.atlassian.confluence.security.Permission;¤import com.atlassian.confluence.security.PermissionManager;¤import com.atlassian.confluence.user.AuthenticatedUserThreadLocal;¤import com.atlassian.user.Group;¤import com.atlassian.user.User;¤¤import com.atlassian.confluence.pages.AbstractPage;¤import com.atlassian.confluence.pages.Page;¤import com.atlassian.confluence.plugin.descriptor.web.WebInterfaceContext;¤//#UC END# *4E23D93602F9_CUSTOM_IMPORT*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4E23D93602F9_CUSTOM_CLASS_DEFINITION*"
		    value      	"//#UC START# *4E23D93602F9_CUSTOM_CLASS_DEFINITION*¤//#UC END# *4E23D93602F9_CUSTOM_CLASS_DEFINITION*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4E23D93602F9_CUSTOM_METHODS_AND_DATA*"
		    value      	(value Text 
|//#UC START# *4E23D93602F9_CUSTOM_METHODS_AND_DATA*¤	@Override¤	protected boolean shouldDisplay(WebInterfaceContext context) {¤		final AbstractPage pageObj = context.getPage();¤		if (pageObj instanceof Page == false) {¤			return false;¤		}¤		final Page page = (Page) pageObj;¤¤		PermissionManager pm = ContainerManager.Factory.get().getPermissionManager();¤		if (!pm.hasPermission(context.getUser(), Permission.VIEW, page)) {¤			return false;¤		}¤		Group uoGroup = DPOUVSManager.Factory.get(pageObj.getSpaceKey()).getGardocUoDocPosters();¤		User user = AuthenticatedUserThreadLocal.getUser();¤		boolean hasRightUoCurrentUser = ContainerManager.Factory.get().getUserAccessor().hasMembership(uoGroup, user);¤		boolean isDocCard = DocCardManager.Factory.get().isDocCard(pageObj.getId());¤		boolean isUvs = (page.getParent() == null)?false:page.getParent().getLabels().contains(DpoUvsHelper.getUvsLabel());¤¤		return hasRightUoCurrentUser && isDocCard && isUvs;¤	}¤	//#UC END# *4E23D93602F9_CUSTOM_METHODS_AND_DATA*
		    )))
	    quid       	"4E23D93602F9"
	    documentation 	
|определяет будет ли показываться ссылка "добавить текущий документ" в меню ОГВ
	    
	    stereotype 	"SimpleClass"
	    superclasses 	(list inheritance_relationship_list
		(object Inheritance_Relationship
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"1369898747815277"))
		    quid       	"51A6FEFB032D"
		    supplier   	"Logical View::external::ConfluenceSupport::com.atlassian.confluence.plugin.descriptor.web.conditions::BaseConfluenceCondition"
		    quidu      	"4A53516B029A"))
	    language   	"MDA Generator")
	(object Class "NotificationForLeaderUVSTimerTaskJob"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"3051924434")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Factory auto reg"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Factory default impl"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Servant Pool"
		    value      	"none")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"cron-expression"
		    value      	"0 0 4 * * ?")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"debug log"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"factory priority"
		    value      	"0")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"local supervisor"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"need UC"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"repeated"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"singleton"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/DocCardChange/DocCardSupport/NotificationForLeaderUVSTimerTaskJob.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"WikiPageID (wiki)"
		    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/NotificationForLeaderUVSTimerTaskJob|4E3F830D006B
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (wiki)"
		    value      	"wiki")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4E3F830D006B_CUSTOM_IMPORT*"
		    value      	"//#UC START# *4E3F830D006B_CUSTOM_IMPORT*¤import ru.garant.MDProcess.DocCardChange.Entities.UVSQueryManager;¤import ru.garant.shared.ConfluenceCore.ActionSupport.ActionContextThreadLocalFactory;¤//#UC END# *4E3F830D006B_CUSTOM_IMPORT*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4E3F830D006B_CUSTOM_CLASS_DEFINITION*"
		    value      	"//#UC START# *4E3F830D006B_CUSTOM_CLASS_DEFINITION*¤//#UC END# *4E3F830D006B_CUSTOM_CLASS_DEFINITION*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4E3F830D006B_DO_EXECUTE_IMPLEMETATION*"
		    value      	(value Text 
|//#UC START# *4E3F830D006B_DO_EXECUTE_IMPLEMETATION*¤		super.doExecute(jec);¤		//#UC END# *4E3F830D006B_DO_EXECUTE_IMPLEMETATION*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4E3F830D006B_CUSTOM_METHODS_AND_DATA*"
		    value      	(value Text 
|//#UC START# *4E3F830D006B_CUSTOM_METHODS_AND_DATA*¤	@Override¤	protected void executeJob() {¤		UVSQueryManager.Factory.get().processTimeSheduledNotifyDelayInJobForLeaderUvs();¤	}¤	¤	protected boolean isNeedWriteTransaction() {¤		return true;¤	}¤	//#UC END# *4E3F830D006B_CUSTOM_METHODS_AND_DATA*
		    )))
	    quid       	"4E3F830D006B"
	    documentation 	"Нотификация о задержки в обработке запросов Руководителю УВС"
	    stereotype 	"KJobPlugin"
	    superclasses 	(list inheritance_relationship_list
		(object Inheritance_Relationship
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"1337600299173650"))
		    quid       	"4FBA292B00AC"
		    supplier   	"Logical View::MDProcess::DocCardChange::DocCardSupport::GarDocAbstractJob"
		    quidu      	"53E4BF9000E2"))
	    language   	"MDA Generator")
	(object Class "AttachImagesInUvsQueriesTimerTaskJob"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"22194765050")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Factory auto reg"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Factory default impl"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Servant Pool"
		    value      	"none")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"cron-expression"
		    value      	"0 0/7 * * * ?")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"debug log"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"factory priority"
		    value      	"0")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"local supervisor"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"need UC"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"repeated"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"singleton"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"WikiPageID (wiki)"
		    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/AttachImagesInUvsQueriesTimerTaskJob|4E5396D7028D
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (wiki)"
		    value      	"wiki")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/DocCardChange/DocCardSupport/AttachImagesInUvsQueriesTimerTaskJob.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4E5396D7028D_CUSTOM_IMPORT*"
		    value      	"//#UC START# *4E5396D7028D_CUSTOM_IMPORT*¤import ru.garant.MDProcess.DocCardChange.Entities.UVSQueryManager;¤import ru.garant.shared.ConfluenceCore.ActionSupport.ActionContextThreadLocalFactory;¤//#UC END# *4E5396D7028D_CUSTOM_IMPORT*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4E5396D7028D_CUSTOM_CLASS_DEFINITION*"
		    value      	"//#UC START# *4E5396D7028D_CUSTOM_CLASS_DEFINITION*¤//#UC END# *4E5396D7028D_CUSTOM_CLASS_DEFINITION*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4E5396D7028D_DO_EXECUTE_IMPLEMETATION*"
		    value      	(value Text 
|//#UC START# *4E5396D7028D_DO_EXECUTE_IMPLEMETATION*¤		super.doExecute(jec);¤		//#UC END# *4E5396D7028D_DO_EXECUTE_IMPLEMETATION*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4E5396D7028D_CUSTOM_METHODS_AND_DATA*"
		    value      	(value Text 
|//#UC START# *4E5396D7028D_CUSTOM_METHODS_AND_DATA*¤	@Override¤	protected void executeJob() {¤		UVSQueryManager.Factory.get().processTimeSheduledAttachImagesInUvsQueries();¤	}¤	¤	protected boolean isNeedWriteTransaction() {¤		return true;¤	}¤	¤	//#UC END# *4E5396D7028D_CUSTOM_METHODS_AND_DATA*
		    )))
	    quid       	"4E5396D7028D"
	    documentation 	"автоматическое присоединение отсканированных образов к запросам"
	    stereotype 	"KJobPlugin"
	    superclasses 	(list inheritance_relationship_list
		(object Inheritance_Relationship
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"1337600301958810"))
		    quid       	"4FBA292D03BD"
		    supplier   	"Logical View::MDProcess::DocCardChange::DocCardSupport::GarDocAbstractJob"
		    quidu      	"53E4BF9000E2"))
	    language   	"MDA Generator")
	(object Class "SendEmailForExternalAuthorsFromHelpDeskTimerTaskJob"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"10878888237")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Factory auto reg"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Factory default impl"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Servant Pool"
		    value      	"none")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"cron-expression"
		    value      	"0 0/15 * * * ?")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"debug log"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"factory priority"
		    value      	"0")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"local supervisor"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"need UC"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"repeated"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"singleton"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"WikiPageID (wiki)"
		    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/SendEmailForExternalAuthorsFromHelpDeskTimerTaskJob|4E64913301BF
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (wiki)"
		    value      	"wiki")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/DocCardChange/DocCardSupport/SendEmailForExternalAuthorsFromHelpDeskTimerTaskJob.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4E64913301BF_CUSTOM_IMPORT*"
		    value      	"//#UC START# *4E64913301BF_CUSTOM_IMPORT*¤import ru.garant.MDProcess.DocCardChange.Entities.UVSQueryManager;¤import ru.garant.shared.ConfluenceCore.ActionSupport.ActionContextThreadLocalFactory;¤//#UC END# *4E64913301BF_CUSTOM_IMPORT*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4E64913301BF_CUSTOM_CLASS_DEFINITION*"
		    value      	"//#UC START# *4E64913301BF_CUSTOM_CLASS_DEFINITION*¤//#UC END# *4E64913301BF_CUSTOM_CLASS_DEFINITION*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4E64913301BF_DO_EXECUTE_IMPLEMETATION*"
		    value      	(value Text 
|//#UC START# *4E64913301BF_DO_EXECUTE_IMPLEMETATION*¤		super.doExecute(jec);¤		//#UC END# *4E64913301BF_DO_EXECUTE_IMPLEMETATION*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4E64913301BF_CUSTOM_METHODS_AND_DATA*"
		    value      	(value Text 
|//#UC START# *4E64913301BF_CUSTOM_METHODS_AND_DATA*¤	@Override¤	protected void executeJob() {¤		try {¤			UVSQueryManager.Factory.get().processTimeScheduledSendNotifyToExternalAuthorsFromHelpDesk();¤		} catch (Exception e) {¤			Logs.LOG_SEX(e);¤			throw new IllegalStateException (e);¤		}					¤	}¤	protected boolean isNeedWriteTransaction() {¤		return true;¤	}¤	¤	//#UC END# *4E64913301BF_CUSTOM_METHODS_AND_DATA*
		    )))
	    quid       	"4E64913301BF"
	    documentation 	"Рассылка уведомлений внешним авторам для запросов ЮО"
	    stereotype 	"KJobPlugin"
	    superclasses 	(list inheritance_relationship_list
		(object Inheritance_Relationship
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"1337600310573306"))
		    quid       	"4FBA2936023B"
		    supplier   	"Logical View::MDProcess::DocCardChange::DocCardSupport::GarDocAbstractJob"
		    quidu      	"53E4BF9000E2"))
	    language   	"MDA Generator")
	(object Class "UvsQueryListener"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"8136687698")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"WikiPageID (wiki)"
		    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/UvsQueryListener|4E8576BF037C
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (wiki)"
		    value      	"wiki")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/DocCardChange/DocCardSupport/UvsQueryListener.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4E8576BF037C_CUSTOM_IMPORT*"
		    value      	"//#UC START# *4E8576BF037C_CUSTOM_IMPORT*¤import java.util.Date;¤¤import net.sf.hibernate.Session;¤¤import ru.garant.MDProcess.ConfluencePlugins.AttachmentPreviewImpl.AbstractHTMLCreatorToShowAttach;¤import ru.garant.MDProcess.ConfluencePlugins.DiscussionsSupport.PageListener.BlogPostViewDiffEvent;¤import ru.garant.MDProcess.ConfluencePlugins.DiscussionsSupport.PageListener.PageViewDiffEvent;¤import ru.garant.MDProcess.ConfluencePlugins.DiscussionsSupport.PageListener.ResetViewEntityEvent;¤import ru.garant.MDProcess.DocCardChange.DocCardChangeDAO.ECopyDAO;¤import ru.garant.MDProcess.DocCardChange.DocCardChangeDAO.GarDocDAO;¤import ru.garant.MDProcess.DocCardChange.DocCardChangeDAO.UVSQuestDAO;¤import ru.garant.MDProcess.DocCardChange.Entities.UVSQueryManager;¤import ru.garant.MDProcess.DocCardChange.Entities.UVSStateMachine;¤¤import com.atlassian.confluence.event.events.content.attachment.AttachmentCreateEvent;¤import com.atlassian.confluence.event.events.content.attachment.AttachmentRemoveEvent;¤import com.atlassian.confluence.event.events.content.attachment.AttachmentUpdateEvent;¤import com.atlassian.confluence.event.events.content.page.PageCreateEvent;¤import com.atlassian.confluence.event.events.content.page.PageRemoveEvent;¤import com.atlassian.confluence.event.events.content.page.PageRestoreEvent;¤import com.atlassian.confluence.event.events.content.page.PageTrashedEvent;¤import com.atlassian.confluence.event.events.content.page.PageUpdateEvent;¤import com.atlassian.confluence.event.events.content.page.PageViewEvent;¤import com.atlassian.confluence.pages.Attachment;¤import com.atlassian.confluence.pages.Page;¤//#UC END# *4E8576BF037C_CUSTOM_IMPORT*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4E8576BF037C_CUSTOM_CLASS_DEFINITION*"
		    value      	"//#UC START# *4E8576BF037C_CUSTOM_CLASS_DEFINITION*¤//#UC END# *4E8576BF037C_CUSTOM_CLASS_DEFINITION*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4E8576BF037C_CONTENT*"
		    value      	(value Text 
|//#UC START# *4E8576BF037C_CONTENT*¤		PageCreateEvent.class, PageUpdateEvent.class, PageRestoreEvent.class¤		, PageRemoveEvent.class, PageTrashedEvent.class¤		, PageViewEvent.class¤		, ResetViewEntityEvent.class¤		, BlogPostViewDiffEvent.class¤		, PageViewDiffEvent.class¤		, AttachmentCreateEvent.class, AttachmentRemoveEvent.class, AttachmentUpdateEvent.class¤		//#UC END# *4E8576BF037C_CONTENT*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4E8576BF037C_GETHANDLEDEVENTCLASSES_IMPLEMETATION*"
		    value      	(value Text 
|//#UC START# *4E8576BF037C_GETHANDLEDEVENTCLASSES_IMPLEMETATION*¤		return handledClasses;¤		//#UC END# *4E8576BF037C_GETHANDLEDEVENTCLASSES_IMPLEMETATION*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4E8576BF037C_HANDLEEVENT_IMPLEMETATION*"
		    value      	(value Text 
|//#UC START# *4E8576BF037C_HANDLEEVENT_IMPLEMETATION*¤		try {¤			if(event instanceof AttachmentCreateEvent){¤				AttachmentCreateEvent attachmentEvent  = (AttachmentCreateEvent)event;¤				if(attachmentEvent.getContent() instanceof Page){¤					Page page = (Page) attachmentEvent.getContent();¤					for (Attachment a : attachmentEvent.getAttachments()) {¤						if (!a.getFileName().startsWith(¤										AbstractHTMLCreatorToShowAttach.MDP_ATTACHMENT_PREFIX_FOR_PREVIEW)) {¤							if (UVSQueryManager.Factory.get().isRequest(page.getId())) {¤								UVSQuestDAO uvsQuest = UVSQuestDAO.get(page.getId());¤								¤								if (uvsQuest.getCopy() != null && uvsQuest.getState() == UVSStateMachine.ST_CLOSED.getSortValue()) {¤									uvsQuest.getCopy().setLastModificationDate(new Date());¤									if (uvsQuest.getCopy().getCreationDate() == null) {¤										uvsQuest.getCopy().setCreationDate(uvsQuest.getCopy().getLastModificationDate());¤									}¤								}¤								¤								if(uvsQuest.getCopy() == null && page.getLabels().contains(DpoUvsHelper.getRegionQueryLabel())){¤										try {¤											ECopyDAO copy = new ECopyDAO ();¤											¤											uvsQuest.setCopy(copy);¤												¤											UVSQuestDAO real = (UVSQuestDAO)getSession().get(UVSQuestDAO.class, uvsQuest.getId());¤											real.setCopy(copy);¤											getSession().saveOrUpdate(copy);¤											¤											uvsQuest.getGardoc().setRestrictedStatus(Byte.valueOf((byte)2));¤											GarDocDAO doc = (GarDocDAO)getSession().get(GarDocDAO.class, uvsQuest.getGardoc().getId());¤											doc.setRestrictedStatus((byte)2);¤											getSession().saveOrUpdate(doc);				¤											¤											getSession().flush();¤											¤										} catch (Exception e) {¤											Logs.LOG_W("makeCopyFromAttachment - catch exception " + e.getMessage());¤											Logs.LOG_SEX(e);¤										}¤								}¤							}¤							break;¤						}¤					}¤				}¤			}¤		} catch (Exception e) {¤			Logs.LOG_E ("PageListener::handleEvent: ERROR: " + e);¤		}¤		//#UC END# *4E8576BF037C_HANDLEEVENT_IMPLEMETATION*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4E8576BF037C_CUSTOM_METHODS_AND_DATA*"
		    value      	(value Text 
|//#UC START# *4E8576BF037C_CUSTOM_METHODS_AND_DATA*¤	protected Session getSession () {¤		return ContainerManager.Factory.get().getSession();¤	}¤	//#UC END# *4E8576BF037C_CUSTOM_METHODS_AND_DATA*
		    ))
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Factory auto reg"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Factory default impl"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Servant Pool"
		    value      	"none")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"debug log"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"factory priority"
		    value      	"0")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"local supervisor"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"need UC"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"singleton"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"DerivedImplement"
		    value      	"{}")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"DerivedOverload"
		    value      	"{}")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ImplementSelectType"
		    value      	"all")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"OverloadSelectType"
		    value      	"include"))
	    quid       	"4E8576BF037C"
	    documentation 	"слушает события запросов в ДПО УВС"
	    stereotype 	"KListenerPlugin"
	    language   	"MDA Generator")
	(object Class "CreateLastUvsQueryNumberLifecyclePlugin"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"19569114245")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Factory auto reg"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Factory default impl"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Servant Pool"
		    value      	"none")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"debug log"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"factory priority"
		    value      	"0")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"local supervisor"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"need UC"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"sequence"
		    value      	"4004")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"singleton"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/DocCardChange/DocCardSupport/CreateLastUvsQueryNumberLifecyclePlugin.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4E899D120130_CUSTOM_IMPORT*"
		    value      	"//#UC START# *4E899D120130_CUSTOM_IMPORT*¤import ru.garant.MDProcess.DocCardChange.Entities.UVSQueryManager;¤//#UC END# *4E899D120130_CUSTOM_IMPORT*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4E899D120130_CUSTOM_CLASS_DEFINITION*"
		    value      	"//#UC START# *4E899D120130_CUSTOM_CLASS_DEFINITION*¤//#UC END# *4E899D120130_CUSTOM_CLASS_DEFINITION*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4E899D120130_STARTUP_IMPLEMETATION*"
		    value      	(value Text 
|//#UC START# *4E899D120130_STARTUP_IMPLEMETATION*¤		UVSQueryManager.Factory.get().getNextRequestNumber("DPOUVS");¤		//#UC END# *4E899D120130_STARTUP_IMPLEMETATION*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4E899D120130_SHUTDOWN_IMPLEMETATION*"
		    value      	(value Text 
|//#UC START# *4E899D120130_SHUTDOWN_IMPLEMETATION*¤		//#UC END# *4E899D120130_SHUTDOWN_IMPLEMETATION*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4E899D120130_CUSTOM_METHODS_AND_DATA*"
		    value      	(value Text 
|//#UC START# *4E899D120130_CUSTOM_METHODS_AND_DATA*¤	//#UC END# *4E899D120130_CUSTOM_METHODS_AND_DATA*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"WikiPageID (wiki)"
		    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/CreateLastUvsQueryNumberLifecyclePlugin|4E899D120130
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (wiki)"
		    value      	"wiki"))
	    quid       	"4E899D120130"
	    documentation 	"присваивается настоящий номер переменной LAST_UVSQUERY_NUMBER"
	    stereotype 	"KLifecyclePlugin"
	    language   	"MDA Generator")
	(object Class "AssignTopicFromArchi"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"1320930160309692")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/DocCardChange/DocCardSupport/AssignTopicFromArchi.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4EBBCB700134_CUSTOM_IMPORT*"
		    value      	"//#UC START# *4EBBCB700134_CUSTOM_IMPORT*¤import com.atlassian.gzipfilter.org.apache.commons.lang.StringUtils;¤import java.sql.Connection;¤import java.sql.DriverManager;¤import java.sql.PreparedStatement;¤import java.sql.ResultSet;¤import java.sql.SQLException;¤import java.sql.Statement;¤import java.text.DateFormat;¤import java.text.SimpleDateFormat;¤import java.util.ArrayList;¤import java.util.Calendar;¤import java.util.Collections;¤import java.util.Comparator;¤import java.util.Date;¤import java.util.GregorianCalendar;¤import java.util.HashMap;¤import java.util.HashSet;¤import java.util.List;¤import java.util.Map;¤import java.util.Set;¤¤import net.sf.hibernate.Session;¤¤//#UC END# *4EBBCB700134_CUSTOM_IMPORT*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4EBBCB700134_CUSTOM_CLASS_DEFINITION*"
		    value      	"//#UC START# *4EBBCB700134_CUSTOM_CLASS_DEFINITION*¤//#UC END# *4EBBCB700134_CUSTOM_CLASS_DEFINITION*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4EBBCB700134_ACTION_NAME*"
		    value      	(value Text 
|//#UC START# *4EBBCB700134_ACTION_NAME*¤		return new String (getClass ().getName ());¤		//#UC END# *4EBBCB700134_ACTION_NAME*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4EBBCB700134_CUSTOM_METHODS_AND_DATA*"
		    value      	(value Text 
|//#UC START# *4EBBCB700134_CUSTOM_METHODS_AND_DATA*¤	@Override¤	public String doDefault() throws Exception {¤		doProcess();¤		return SUCCESS;¤	}¤¤	public void doProcess() throws Exception {¤		//загружаем данные из таблиц¤		loadGarDocFromK();¤		loadGarDocFromArchi();¤¤		//когда закончили с файлом пишем содержимое сета плохих в лог¤		writeSetInLog();¤		¤		//и из мапы обработанных удаляем все элементы, находящиеся в сэте плохих¤		removeDocs(repeatingDocs_);¤		getRejectedDocs();¤		//пишем в лог те, которые в розыске¤		writeInSearchDocToLog();¤		//пишем в лог те, которые отклоненные¤		putInLogsDocCardContent("\n# Нашлись отклоненные документы без топика: ", rejectedSearchDocsWithoutTopic_, false);¤		putInLogsDocCardContent("\n# Нашлись отклоненные документы с топиком: ", rejectedSearchDocsWithTopic_, false);¤		//и удаляем те, которые в розыске¤		removeDocs(searchDocs_);¤		//и удаляем те, которые отклоненные¤		removeDocs(rejectedSearchDocsWithoutTopic_);¤		removeDocs(rejectedSearchDocsWithTopic_);¤		¤		removeDocsWithoutTopic();¤		¤// ОГВ Верховный Суд отсеить¤		getDocsWithOGVVerhovnijSud();¤		putInLogsDocCardContent("\n# Нашлись закрытые документы без топика c ОГВ Верховный Суд: ", docsWithOGVVerhovnijSud_, false);¤		removeDocsWithOGVVerhovnijSud();¤		¤//ОГВ Разработчик НТД отсеить		¤		getDocsWithOGVRazrabotchikNTD();¤		putInLogsDocCardContent("\n# Нашлись закрытые документы без топика c ОГВ Разработчик НТД: ", docsWithOGVRazrabotchikNTD_, false);¤		removeDocsWithOGVRazrabotchikNTD();¤¤		putInLogsDocCardContent("\n# Нашлись закрытые документы без топика: ", closedDocsWithoutTopic_, false);¤		¤		setTopicsInGardoc();¤¤		Logs.LOG_W("\n# Проставлено топиков: " + docAtributes_.size());¤	}¤	¤	public void setTopicsInGardoc() throws Exception{¤		Statement stmt= ContainerManager.Factory.get().getSession().connection().createStatement();¤		try {¤			//прописываем топик ¤			//бежим по мапе обработанных и проставляем топики¤			for(GarDocWithTopic gardoc : docAtributes_.values()){¤				stmt.addBatch(String.format("UPDATE gar_doc SET topic=%d where contentid=%d",  gardoc.topic, gardoc.contentid));¤			}¤			stmt.executeBatch();¤			ContainerManager.Factory.get().getSession().connection().commit();¤		} catch (Exception e) {¤			Logs.LOG_SEX(e);¤		}finally{¤			stmt.close();¤		}¤	}¤¤	public void loadGarDocFromK (){¤		String mysql = String.format(¤				"SELECT gardoc.contentid, type.typename, ogv.title, gardoc.creation_date, gardoc.doc_number, cl.labelid " +¤				"FROM gar_doc as gardoc, content as ogv, gar_doctype_dao as type, content as gardocpage " +¤				"LEFT OUTER JOIN content_label cl ON(cl.contentid = gardocpage.contentid AND cl.labelid = 9502730)" +¤				"WHERE gardoc.typeid=type.typeid "+¤				"and ogv.content_status='current' and ogv.prevver is null and gardoc.doc_issuer=ogv.contentid " +¤				"and gardocpage.content_status='current' and gardocpage.prevver is null and gardoc.contentid=gardocpage.contentid " +¤				"and gardoc.topic=0 " +¤				"and gardoc.is_connected = 2"¤		);¤		PreparedStatement ps = null;¤		ResultSet rs = null;¤		try {¤		ps = ContainerManager.Factory.get().getSession().connection().prepareStatement(mysql);¤		rs = ps.executeQuery();¤		List<GarDocWithTopic> gardocsWithSameAtributes = new ArrayList<GarDocWithTopic>();¤		while (rs.next()) {¤			GarDocWithTopic ret = new GarDocWithTopic();¤			ret.contentid = rs.getLong("contentid");¤			ret.gardoc = new GarDoc();¤			ret.gardoc.type = rs.getString("typename").toUpperCase();¤			ret.gardoc.issuer = rs.getString("title").toUpperCase();¤			ret.gardoc.date = rs.getDate("creation_date");¤			ret.gardoc.number = rs.getString("doc_number");¤			ret.isHasDoneLabel = (rs.getObject("labelid") != null);¤			if (docAtributes_.get(ret.gardoc)!= null) {¤				gardocsWithSameAtributes.add(ret);¤			} else {¤				docAtributes_.put(ret.gardoc, ret);¤			}¤		}¤		¤		Logs.LOG_W("# Одинаковые атрибуты: " + gardocsWithSameAtributes.size());¤		for (GarDocWithTopic g : gardocsWithSameAtributes) {¤			GarDocWithTopic removeDoc = docAtributes_.remove(g.gardoc);¤			if(removeDoc != null){¤//				putInLog(removeDoc);¤			}¤//			putInLog(g);¤		}¤		} catch (Exception e) {¤			Logs.LOG_SEX(e);¤		}finally{¤			com.atlassian.core.db.JDBCUtils.close (rs);¤			com.atlassian.core.db.JDBCUtils.close (ps);¤		}¤	}¤¤	public void loadGarDocFromArchi (){¤		//не учитываем строки, в которых не все четыре реквизита установлены ¤		String mysql = String.format(¤				"SELECT gardoc.topic, gardoc.typename, gardoc.doc_issuer_title, gardoc.creation_date, gardoc.doc_number " +¤				"FROM gar_gardocs_from_archi gardoc where gardoc.typename is not null " +¤				"and gardoc.doc_issuer_title is not null and gardoc.creation_date is not null and gardoc.doc_number is not null"¤		);¤		PreparedStatement ps = null;¤		ResultSet rs = null;¤		try {¤		ps = ContainerManager.Factory.get().getSession().connection().prepareStatement(mysql);¤		rs = ps.executeQuery();¤		while (rs.next()) {¤			GarDocWithTopic ret = new GarDocWithTopic();¤			ret.topic = rs.getLong("topic");¤			ret.gardoc = new GarDoc();¤			ret.gardoc.type = rs.getString("typename").toUpperCase();¤			ret.gardoc.issuer = rs.getString("doc_issuer_title").toUpperCase();¤			ret.gardoc.date = rs.getDate("creation_date");¤			ret.gardoc.number = rs.getString("doc_number");¤			setDocAtributes(ret);¤		}¤		} catch (Exception e) {¤			Logs.LOG_SEX(e);¤		}finally{¤			com.atlassian.core.db.JDBCUtils.close (rs);¤			com.atlassian.core.db.JDBCUtils.close (ps);¤		}¤	}¤¤	public static Date makeDateFrom1stJan1600 (int dayCount) {¤		Calendar d = GregorianCalendar.getInstance();¤		d.clear();¤		d.set(1600, 0, 1);¤		d.add(Calendar.DAY_OF_YEAR, dayCount);¤//		Logs.LOG_W(new SimpleDateFormat("dd.MM.yyyy").format(d.getTime()) + " " + title);¤		return d.getTime();¤	}¤¤	public static GarDoc getAttributesFromArray(String[] column){¤		//определяем реквизиты¤		GarDoc gardoc = new GarDoc();¤		gardoc.type = column[3].trim().toUpperCase();¤		gardoc.issuer = column[4].trim().toUpperCase();¤		int dateInt = Integer.parseInt(column[5]);¤		Date date = null;¤		if(dateInt > 0){¤			date = makeDateFrom1stJan1600(dateInt);¤		}¤		gardoc.date = date;¤		String number = "";¤		if(column.length > 6){¤			number = column[6];¤		}¤		gardoc.number = number.trim();¤		return gardoc;¤	}¤¤	public void setDocAtributes(GarDocWithTopic gardocWithTopic) throws Exception{¤		//берем следущую строку¤			GarDoc gardoc = gardocWithTopic.gardoc;¤			long topic = gardocWithTopic.topic;¤			//ищем в мапе обработанных документов такой же по четырем реквизитам¤			GarDocWithTopic gdwt = docAtributes_.get(gardoc);¤			if (gdwt != null) {¤				if (gdwt.topic != 0) {¤					//если нашли, то помещаем этот док в лист плохих и помещаем то что нашли¤					if (topic != gdwt.topic && !repeatingTopics_.contains(topic)) { ¤						if (gdwt.isValid == true) {¤							gdwt.isValid = false;¤							repeatingDocs_.add(gdwt);¤							repeatingTopics_.add(gdwt.topic);¤						}¤					¤						GarDocWithTopic gardocWithTopic2 = new GarDocWithTopic();¤						gardocWithTopic2.gardoc = gardoc;¤						gardocWithTopic2.topic = topic;¤						repeatingDocs_.add(gardocWithTopic2);¤						repeatingTopics_.add(gardocWithTopic2.topic);¤					}¤				} else {¤					gdwt.topic = topic;¤				}¤			} else {¤				//значит нет в К - ничего не делаем¤			}¤	}¤¤	public void putInLogsDocCardContent(String title, List<GarDocWithTopic> docsList, boolean writeDocsAttributes){¤		Logs.LOG_W (title + docsList.size());¤		if(writeDocsAttributes){¤			for(GarDocWithTopic badGarDoc : docsList){¤				putInLog(badGarDoc);¤			}¤		}¤	}¤	¤	public void putInLog(GarDocWithTopic g){¤		String date = (g.gardoc.date == null) ? "" : new SimpleDateFormat("dd.MM.yyyy").format(g.gardoc.date);¤		String contentid = "";¤		if(g.contentid != 0){¤			contentid = g.contentid + "";¤		}¤		Logs.LOG_W(g.topic + "; " + contentid + "; " + g.gardoc.type + "; " + g.gardoc.issuer + "; " + g.gardoc.number + "; " + date);¤	}¤	¤	public void writeSetInLog(){¤		Collections.sort(repeatingDocs_, new Comparator<GarDocWithTopic>() {¤			@Override¤			public int compare(GarDocWithTopic o1, GarDocWithTopic o2) {¤				if (o1.gardoc.hashCode() == o2.gardoc.hashCode()) {¤					if (o1.topic == o2.topic) {¤						return 0;¤					}¤					return (o1.topic < o2.topic) ? -1: 1;¤				}¤				return Integer.valueOf(o1.gardoc.hashCode()).compareTo(Integer.valueOf(o2.gardoc.hashCode()));¤			}¤		});¤¤		putInLogsDocCardContent("\n# Нашлось повторов: ", repeatingDocs_, false);¤	}¤	¤	public void writeInSearchDocToLog(){¤		Logs.LOG_W ("\n# Количество закрытых, отклоненных и в розыске документов: " + docAtributes_.size());¤		List<GarDocWithTopic> searchDocsWithTopics = new ArrayList<GarDocWithTopic>();¤		int countClosed = 0;¤		int countClosedDocsWithoutTopic = 0;¤		for(GarDoc garDocKey :  docAtributes_.keySet()){¤			GarDocWithTopic badGarDoc = docAtributes_.get(garDocKey);¤			if(badGarDoc.isHasDoneLabel == false){¤				if(rejectedContentIds_.contains(badGarDoc.contentid)){¤					if(badGarDoc.topic == 0){¤						rejectedSearchDocsWithoutTopic_.add(badGarDoc);¤					}else{¤						rejectedSearchDocsWithTopic_.add(badGarDoc);¤					}¤				}else{¤					if(badGarDoc.topic == 0){¤//						putInLog(badGarDoc);¤					}else{¤						searchDocsWithTopics.add(badGarDoc);¤					}¤					searchDocs_.add(badGarDoc);¤				}¤			}else{¤				if(badGarDoc.topic == 0){¤					closedDocsWithoutTopic_.add(badGarDoc);¤					countClosedDocsWithoutTopic++;¤				}¤				countClosed++;¤			}¤		}¤		¤		Logs.LOG_W ("\n# Нашлись закрытые документы: " + countClosed + " из них без топика: " + countClosedDocsWithoutTopic);¤		Logs.LOG_W ("\n# Нашлись документы в розыске без топика: " + (searchDocs_.size() - searchDocsWithTopics.size()));¤		putInLogsDocCardContent("\n# Нашлись документы в розыске с топиком: ", searchDocsWithTopics, false);¤	}	¤¤	public void removeDocs(List<GarDocWithTopic> docs){¤		for(GarDocWithTopic badGarDoc : docs){¤			docAtributes_.remove(badGarDoc.gardoc);¤		}¤	}¤¤	public void removeDocsWithoutTopic(){¤		for(GarDoc garDocKey :  docAtributes_.keySet()){¤			GarDocWithTopic gd = docAtributes_.get(garDocKey);¤			keys_.add(garDocKey);¤		}¤		for(GarDoc g : keys_){¤			GarDocWithTopic gd = docAtributes_.get(g);¤			if(gd.topic == 0){¤				docAtributes_.remove(g);¤			}¤		}¤	}¤¤	public void removeDocsWithOGVVerhovnijSud(){¤		for(GarDocWithTopic garDoc :  docsWithOGVVerhovnijSud_){¤			closedDocsWithoutTopic_.remove(garDoc);¤		}¤	}¤¤	public void removeDocsWithOGVRazrabotchikNTD(){¤		for(GarDocWithTopic garDoc :  docsWithOGVRazrabotchikNTD_){¤			closedDocsWithoutTopic_.remove(garDoc);¤		}¤	}¤¤	public void getRejectedDocs() {¤		String ids = "";¤		for(GarDoc garDocKey :  docAtributes_.keySet()){¤			GarDocWithTopic badGarDoc = docAtributes_.get(garDocKey);¤			if(badGarDoc.isHasDoneLabel == false){¤				if(StringUtils.isNotBlank(ids)){¤					ids += ",";¤				}¤				ids += badGarDoc.contentid;¤			}¤		}¤¤		String mysql = String.format(¤				"SELECT gardocpage.contentid, cl.labelid " +¤				"FROM content as gardocpage " +¤				"LEFT OUTER JOIN content_label cl ON(cl.contentid = gardocpage.contentid AND cl.labelid = 113737730)" +¤				"WHERE gardocpage.contentid in (%s)"¤				, ids¤		);¤ 		PreparedStatement ps = null;¤		ResultSet rs = null;¤		try {¤			ps = ContainerManager.Factory.get().getSession().connection().prepareStatement(mysql);¤			rs = ps.executeQuery();¤		while (rs.next()) {¤			if(rs.getObject("labelid") != null){¤				rejectedContentIds_.add(rs.getLong("contentid"));¤			}¤		};¤		} catch (Exception e) {¤			Logs.LOG_SEX(e);¤		}finally{¤			com.atlassian.core.db.JDBCUtils.close (rs);¤			com.atlassian.core.db.JDBCUtils.close (ps);¤		}¤¤¤	}¤¤	//удалить документы с ОГВ, который имеет слова Разработчик НТД¤	public void getDocsWithOGVRazrabotchikNTD() throws Exception{¤		for(GarDocWithTopic badGarDoc : closedDocsWithoutTopic_){¤				if(badGarDoc.gardoc.issuer.toUpperCase().equals("Разработчик НТД".toUpperCase())){¤					docsWithOGVRazrabotchikNTD_.add(badGarDoc);¤				}¤		}		¤	}¤¤	//удалить документы с ОГВ, который имеет слова Верховный Суд¤	public void getDocsWithOGVVerhovnijSud() throws Exception{¤		String s = "%верховный суд%";¤		String mysql = String.format(¤				"SELECT c.title FROM content as c, content_label as cl, content as parent " +¤				"where (c.title like '%s' or parent.title like '%s') and c.parentid=parent.contentid " +¤				"and c.spaceid=241795073 and c.contentid=cl.contentid and (cl.labelid=241893378 or cl.labelid=38)"¤				, s, s¤		);¤		PreparedStatement ps = null;¤		ResultSet rs = null;¤		try {¤			ps = ContainerManager.Factory.get().getSession().connection().prepareStatement(mysql);¤			rs = ps.executeQuery();¤			while (rs.next()) {¤				if(rs.getObject("title") != null){¤					docsWithOGVVerhovnijSudTitles_.add(rs.getString("title"));¤				}¤			}¤		} catch (Exception e) {¤			Logs.LOG_SEX(e);¤		}finally{¤			com.atlassian.core.db.JDBCUtils.close (rs);¤			com.atlassian.core.db.JDBCUtils.close (ps);¤		}¤¤		for(GarDocWithTopic badGarDoc : closedDocsWithoutTopic_){¤			for(String title : docsWithOGVVerhovnijSudTitles_){¤				if(badGarDoc.gardoc.issuer.toUpperCase().equals(title.toUpperCase())){¤					docsWithOGVVerhovnijSud_.add(badGarDoc);¤					break;¤				}¤			}¤		}¤¤	}¤¤	public static class GarDocWithTopic {¤		public GarDoc gardoc = null; ¤		public long topic = 0l;		¤		public long contentid = 0l;¤		public boolean isHasDoneLabel = false;¤		public boolean isValid = true;¤	}¤	¤	public static class GarDoc {¤		public String type;¤		public String issuer;¤		public Date date;¤		public String number;¤		¤		@Override¤		public int hashCode() {¤			final int prime = 31;¤			int result = 1;¤			result = prime * result + ((date == null) ? 0 : date.hashCode());¤			result = prime * result¤					+ ((issuer == null) ? 0 : issuer.hashCode());¤			result = prime * result¤					+ ((number == null) ? 0 : number.hashCode());¤			result = prime * result + ((type == null) ? 0 : type.hashCode());¤			return result;¤		}¤		¤		@Override¤		public boolean equals(Object obj) {¤			if (this == obj)¤				return true;¤			if (obj == null)¤				return false;¤			if (getClass() != obj.getClass())¤				return false;¤			GarDoc other = (GarDoc) obj;¤			if (date == null) {¤				if (other.date != null)¤					return false;¤			} else if (!date.equals(other.date))¤				return false;¤			if (issuer == null) {¤				if (other.issuer != null)¤					return false;¤			} else if (!issuer.equals(other.issuer))¤				return false;¤			if (number == null) {¤				if (other.number != null)¤					return false;¤			} else if (!number.equals(other.number))¤				return false;¤			if (type == null) {¤				if (other.type != null)¤					return false;¤			} else if (!type.equals(other.type))¤				return false;¤			return true;¤		}¤		¤	}¤	¤			¤¤	public Set<Long> repeatingTopics_ = new HashSet<Long>();¤	public List<GarDocWithTopic> repeatingDocs_ = new ArrayList<GarDocWithTopic>();¤	public Map<GarDoc, GarDocWithTopic> docAtributes_ = new HashMap<GarDoc, GarDocWithTopic>();¤	public List<GarDoc> keys_ = new ArrayList<GarDoc>();¤	List<GarDocWithTopic> searchDocs_ = new ArrayList<GarDocWithTopic>();¤	List<GarDocWithTopic> rejectedSearchDocsWithTopic_ = new ArrayList<GarDocWithTopic>();¤	List<GarDocWithTopic> rejectedSearchDocsWithoutTopic_ = new ArrayList<GarDocWithTopic>();¤	List<GarDocWithTopic> closedDocsWithoutTopic_ = new ArrayList<GarDocWithTopic>();¤	List<Long> rejectedContentIds_ = new ArrayList<Long>();¤	List<String> docsWithOGVVerhovnijSudTitles_ = new ArrayList<String>();¤	List<GarDocWithTopic> docsWithOGVVerhovnijSud_ = new ArrayList<GarDocWithTopic>();¤	List<GarDocWithTopic> docsWithOGVRazrabotchikNTD_ = new ArrayList<GarDocWithTopic>();¤	¤	//#UC END# *4EBBCB700134_CUSTOM_METHODS_AND_DATA*
		    ))
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Factory auto reg"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Factory default impl"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Servant Pool"
		    value      	"none")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"debug log"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"factory priority"
		    value      	"0")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"force usage"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"local supervisor"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"need UC"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"singleton"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"WikiPageID (wiki)"
		    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/AssignTopicFromArchi|4EBBCB700134
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (wiki)"
		    value      	"wiki"))
	    quid       	"4EBBCB700134"
	    documentation 	"будем вызывать что бы назначить топики нашим карточкам из файла archi.txt"
	    stereotype 	"KActionPlugin"
	    superclasses 	(list inheritance_relationship_list
		(object Inheritance_Relationship
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"1320931276548555"))
		    quid       	"4EBBCFCC0222"
		    supplier   	"Logical View::external::JavaConfluence::ConfluenceClassPack::ConfluenceActionSupport"
		    quidu      	"465ADCCA036B"))
	    language   	"MDA Generator")
	(object Class "ChangeStateForUvsQueryWithAttachedImagesTimerTaskJob"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"1321344081600974")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Factory auto reg"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Factory default impl"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Servant Pool"
		    value      	"none")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"cron-expression"
		    value      	"0 0/7 * * * ?")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"debug log"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"factory priority"
		    value      	"0")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"local supervisor"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"need UC"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"repeated"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"singleton"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4EC21C510257_CUSTOM_IMPORT*"
		    value      	"//#UC START# *4EC21C510257_CUSTOM_IMPORT*¤import ru.garant.MDProcess.DocCardChange.Entities.UVSQueryManager;¤import ru.garant.shared.ConfluenceCore.ActionSupport.ActionContextThreadLocalFactory;¤//#UC END# *4EC21C510257_CUSTOM_IMPORT*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4EC21C510257_CUSTOM_CLASS_DEFINITION*"
		    value      	"//#UC START# *4EC21C510257_CUSTOM_CLASS_DEFINITION*¤//#UC END# *4EC21C510257_CUSTOM_CLASS_DEFINITION*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4EC21C510257_DO_EXECUTE_IMPLEMETATION*"
		    value      	(value Text 
|//#UC START# *4EC21C510257_DO_EXECUTE_IMPLEMETATION*¤		super.doExecute(jec);¤		//#UC END# *4EC21C510257_DO_EXECUTE_IMPLEMETATION*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4EC21C510257_CUSTOM_METHODS_AND_DATA*"
		    value      	(value Text 
|//#UC START# *4EC21C510257_CUSTOM_METHODS_AND_DATA*¤	@Override¤	protected void executeJob() {¤		UVSQueryManager.Factory.get().processTimeSheduledChangeStateUvsQueriesAttachedImages();¤	}¤	¤	protected boolean isNeedWriteTransaction() {¤		return true;¤	}¤	//#UC END# *4EC21C510257_CUSTOM_METHODS_AND_DATA*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/DocCardChange/DocCardSupport/ChangeStateForUvsQueryWithAttachedImagesTimerTaskJob.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"WikiPageID (wiki)"
		    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/ChangeStateForUvsQueryWithAttachedImagesTimerTaskJob|4EC21C510257
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (wiki)"
		    value      	"wiki"))
	    quid       	"4EC21C510257"
	    documentation 	"Джоб, который переводит запрос, если есть аттач"
	    stereotype 	"KJobPlugin"
	    superclasses 	(list inheritance_relationship_list
		(object Inheritance_Relationship
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"1337600291636216"))
		    quid       	"4FBA2923027B"
		    supplier   	"Logical View::MDProcess::DocCardChange::DocCardSupport::GarDocAbstractJob"
		    quidu      	"53E4BF9000E2"))
	    language   	"MDA Generator")
	(object Class "• RemoveOGVWebItem"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"1326952010194659")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"label key"
		    value      	"ogv.remove")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"need UC"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"section"
		    value      	"system.content.action/modify")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"styleClass"
		    value      	"remove-ogv")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"weight"
		    value      	"11")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"output.xml:*4F17AE4A00C1LABEL_CONTENT*"
		    value      	(value Text 
|<!--UC_BEGIN*4F17AE4A00C1LABEL_CONTENT*-->¤			<!--UC_END*4F17AE4A00C1LABEL_CONTENT*-->
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"WikiPageID (wiki)"
		    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/• RemoveOGVWebItem|4F17AE4A00C1
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (wiki)"
		    value      	"wiki"))
	    quid       	"4F17AE4A00C1"
	    documentation 	"контролирует показ линка удаления ОГВ в ДПО УВС"
	    stereotype 	"WebItem"
	    used_nodes 	(list uses_relationship_list
		(object Uses_Relationship
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"1369899609288554")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"id"
			    value      	"action-remove-ogv-link")
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"params"
			    value      	"pageId=$helper.page.id"))
		    quid       	"51A70259011E"
		    stereotype 	"link"
		    supplier   	"Logical View::MDProcess::DocCardChange::DocCardSupport::DocCardXPlugin::DocCardXPackage::RemoveOGV"
		    quidu      	"51A6FCC400DA"))
	    language   	"MDA Generator")
	(object Class "RemoveOGVCondition"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"1326952491670203")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/DocCardChange/DocCardSupport/RemoveOGVCondition.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4F17B02B029D_CUSTOM_IMPORT*"
		    value      	"//#UC START# *4F17B02B029D_CUSTOM_IMPORT*¤import com.atlassian.confluence.pages.AbstractPage;¤import com.atlassian.confluence.pages.Page;¤import com.atlassian.confluence.plugin.descriptor.web.WebInterfaceContext;¤¤import ru.garant.MDProcess.DocCardChange.Entities.UVSQueryManager;¤//#UC END# *4F17B02B029D_CUSTOM_IMPORT*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4F17B02B029D_CUSTOM_CLASS_DEFINITION*"
		    value      	"//#UC START# *4F17B02B029D_CUSTOM_CLASS_DEFINITION*¤//#UC END# *4F17B02B029D_CUSTOM_CLASS_DEFINITION*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4F17B02B029D_CUSTOM_METHODS_AND_DATA*"
		    value      	(value Text 
|//#UC START# *4F17B02B029D_CUSTOM_METHODS_AND_DATA*¤	@Override¤	public boolean shouldDisplay(WebInterfaceContext context) {¤		final AbstractPage pageObj = context.getPage();¤		if (pageObj instanceof Page == false) {¤			return false;¤		}¤		final Page page = (Page) pageObj;¤		return page.getLabels().contains(DpoUvsHelper.getOGVLabel());¤	}¤	//#UC END# *4F17B02B029D_CUSTOM_METHODS_AND_DATA*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"WikiPageID (wiki)"
		    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/RemoveOGVCondition|4F17B02B029D
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (wiki)"
		    value      	"wiki"))
	    quid       	"4F17B02B029D"
	    documentation 	"реализует условие возможности удаления ОГВ в ДПО УВС с заданной страницы"
	    stereotype 	"SimpleClass"
	    superclasses 	(list inheritance_relationship_list
		(object Inheritance_Relationship
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"1326952522999996"))
		    quid       	"4F17B04A03E6"
		    supplier   	"Logical View::external::ConfluenceSupport::com.atlassian.confluence.plugin.descriptor.web.conditions::BaseConfluenceCondition"
		    quidu      	"4A53516B029A"))
	    language   	"MDA Generator")
	(object Class "MoveUvsQueryToAnotherDocCard"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"1327302150920613")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/DocCardChange/DocCardSupport/MoveUvsQueryToAnotherDocCard.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4F1D06060397_CUSTOM_IMPORT*"
		    value      	"//#UC START# *4F1D06060397_CUSTOM_IMPORT*¤import com.atlassian.confluence.core.ContentEntityObject;¤import com.atlassian.confluence.event.events.content.page.PageMoveEvent;¤¤import com.atlassian.confluence.json.json.JsonObject;¤import com.atlassian.confluence.json.json.JsonString;¤import com.atlassian.confluence.pages.Attachment;¤import com.atlassian.confluence.pages.Page;¤import com.atlassian.confluence.pages.attachments.CachingAttachmentDao;¤import com.atlassian.confluence.pages.persistence.dao.FileLocationResolver;¤import com.atlassian.confluence.pages.persistence.dao.FileSystemAttachmentDataDao;¤import com.atlassian.confluence.pages.persistence.dao.HierarchicalFileSystemAttachmentDataDao;¤import com.atlassian.confluence.pages.persistence.dao.IdMultiPartHashGenerator;¤import com.atlassian.confluence.pages.persistence.dao.FileSystemAttachmentDataDao.FileSystemAttachmentNamingStrategy;¤import com.atlassian.confluence.user.AuthenticatedUserThreadLocal;¤import com.atlassian.core.util.FileUtils;¤import com.atlassian.gzipfilter.org.apache.commons.lang.StringUtils;¤¤import java.io.File;¤import java.util.ArrayList;¤import java.util.List;¤import ru.garant.MDProcess.ConfluenceMDChange.Requests.sm.AbstractRequestLifeCycle.AbstractState;¤import ru.garant.MDProcess.DocCardChange.DocCardChangeDAO.CopyDAO;¤import ru.garant.MDProcess.DocCardChange.DocCardChangeDAO.GarDocDAO;¤import ru.garant.MDProcess.DocCardChange.DocCardChangeDAO.UVSQuestDAO;¤import ru.garant.MDProcess.DocCardChange.DocCardCommon.DocCardManager;¤import ru.garant.MDProcess.DocCardChange.Entities.DocCard;¤import ru.garant.MDProcess.DocCardChange.Entities.UVSQuery;¤import ru.garant.MDProcess.DocCardChange.Entities.UVSQueryManager;¤import ru.garant.MDProcess.DocCardChange.Entities.UVSStateMachine;¤import ru.garant.MDProcess.ServerGate.GenerationContentsImpl.PageImpl;¤//#UC END# *4F1D06060397_CUSTOM_IMPORT*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4F1D06060397_CUSTOM_CLASS_DEFINITION*"
		    value      	"//#UC START# *4F1D06060397_CUSTOM_CLASS_DEFINITION*¤//#UC END# *4F1D06060397_CUSTOM_CLASS_DEFINITION*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4F1D06060397_ACTION_NAME*"
		    value      	(value Text 
|//#UC START# *4F1D06060397_ACTION_NAME*¤		return new String (getClass ().getName ());¤		//#UC END# *4F1D06060397_ACTION_NAME*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4F1D06060397_CUSTOM_METHODS_AND_DATA*"
		    value      	(value Text 
|//#UC START# *4F1D06060397_CUSTOM_METHODS_AND_DATA*¤	public String doMoveUvsQuery() throws Exception{¤		JsonObject ret = new JsonObject ();¤		UVSQuestDAO uvsQuery = UVSQuestDAO.get(getUvsQueryId());¤		GarDocDAO oldGarDoc = uvsQuery.getGardoc();¤		GarDocDAO newGarDoc = DocCardManager.Factory.get().getGarDocFromTopic(getTopic());¤		if(oldGarDoc.getTopic() == getTopic()){¤			ret.setProperty("errorMessage", new JsonString("Топик карточки совпадает с топиком карточки этого запроса"));¤			JSONString_ = ret.serialize();¤		}else if(newGarDoc == null){¤			ret.setProperty("errorMessage", new JsonString("Вы указали неправильный топик карточки"));¤			JSONString_ = ret.serialize();¤		}else{¤			List<UVSQuestDAO> notClosedUvsQueries = getNotClosedUvsQueries(newGarDoc);¤			if(uvsQuery.getState() != UVSStateMachine.ST_CLOSED.getSortValue() && ¤				 uvsQuery.getState() != UVSStateMachine.ST_DISCARDED.getSortValue() && ¤				 notClosedUvsQueries.size() > 0¤			){	¤				ret.setProperty("errorMessage", new JsonString("Нельзя переносить НЕ ЗАКРЫТЫЙ запрос в карточку, где есть еще НЕ ЗАКРЫТЫЙ запрос"));¤				JSONString_ = ret.serialize();¤			}else{¤				doMoveUvsQueryAndRemoveDocCard(uvsQuery, newGarDoc, oldGarDoc);¤			}¤		}¤		return SUCCESS;¤	}¤	¤	private List<UVSQuestDAO> getNotClosedUvsQueries(GarDocDAO newGarDoc){¤		List<AbstractState> notClosedStates = UVSQueryManager.Factory.get().getActiveStates();¤		String notClosedStatesString = "";¤		for(AbstractState state : notClosedStates){¤			if(StringUtils.isNotEmpty(notClosedStatesString)){¤				notClosedStatesString += ", ";¤			}¤			notClosedStatesString += state.getSortValue();¤		}¤		return DocCardManager.Factory.get().getUvsQueryByDocCardIdByStates(newGarDoc.getId(), notClosedStatesString);¤	}¤	¤	public long topic_;¤	public long getTopic(){¤		return topic_;¤	}¤	¤	public void setTopic(long topic){¤		topic_ = topic;¤	}¤¤	public long uvsQueryId_;¤	public long getUvsQueryId(){¤		return uvsQueryId_;¤	}¤	¤	public void setUvsQueryId(long uvsQueryId){¤		uvsQueryId_ = uvsQueryId;¤	}¤¤	private String JSONString_ = "";¤	public String getResponseContent(){¤		return JSONString_;¤	}¤	¤	public void doMoveUvsQueryAndRemoveDocCard(UVSQuestDAO uvsQuery, GarDocDAO newGarDoc, GarDocDAO oldGarDoc) throws Exception{¤		JsonObject ret = new JsonObject ();¤		List<UVSQuestDAO> uvsQueries = DocCardManager.Factory.get().getUvsQueryForDocCard(oldGarDoc.getPage().getId());¤		int wasCountUvsQueries = uvsQueries.size();¤		try{¤			moveCurrentUvsQueryCopyFromDocCard(uvsQuery, newGarDoc);¤			DpoUvsHelper.changeUvsQueryVersionsGardoc(uvsQuery.getId(), newGarDoc);¤			moveCurrentUvsQuery(uvsQuery, newGarDoc);¤            //перенос вложений из одного спейса в другой, если это необходимо, т.к иначе пишет вложение не найдено при клике на вложение¤			if(uvsQuery.getPage().getAttachments().size() > 0 && newGarDoc.getPage().getSpace().getId() != oldGarDoc.getPage().getSpace().getId()){¤				ContainerManager.Factory.get().getEventManager().publishEvent(new PageMoveEvent(this, uvsQuery.getPage(), oldGarDoc.getPage().getSpace(), oldGarDoc.getPage(), oldGarDoc.getPage().getPosition(), AuthenticatedUserThreadLocal.getUser()));¤			}¤¤			if(wasCountUvsQueries == 1){¤				removeDocCard(oldGarDoc.getPage());¤			}¤			¤		} catch (Exception e) {¤			ret.setProperty("errorMessage", new JsonString("Возникли ошибки при переносе запроса"));¤			JSONString_ = ret.serialize();¤			Logs.LOG_SEX(e);¤		}¤	}¤	¤	private void moveCurrentUvsQueryCopyFromDocCard(UVSQuestDAO uvsQuery, GarDocDAO docCard) throws Exception{¤		if(uvsQuery.getCopy() != null){¤			GarDocDAO oldGarDoc = uvsQuery.getGardoc();¤			CopyDAO copy = uvsQuery.getCopy();¤			if(copy != null && oldGarDoc.getCopies().size() > 0 && oldGarDoc.getCopies().contains(copy)){¤				oldGarDoc.getCopies().remove(copy);¤				docCard.getCopies().add(copy);¤			}¤		}¤	}¤	¤	private void moveCurrentUvsQuery(UVSQuestDAO uvsQuery, GarDocDAO docCard) throws Exception{¤		uvsQuery.setGardoc(docCard);¤        PageImpl.movePageWithoutEvent(uvsQuery.getPage(), docCard.getPage());¤	}¤¤	private void removeDocCard(Page page) throws Exception{¤		RemoveDocCard removeDocCardAction = new RemoveDocCard();¤		removeDocCardAction.setPage(page);¤		removeDocCardAction.setPageManager(ContainerManager.Factory.get().getPageManager());¤		removeDocCardAction.doRemove();¤	}¤	//#UC END# *4F1D06060397_CUSTOM_METHODS_AND_DATA*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"WikiPageID (wiki)"
		    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/MoveUvsQueryToAnotherDocCard|4F1D06060397
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (wiki)"
		    value      	"wiki"))
	    quid       	"4F1D06060397"
	    documentation 	"перенос запроса из одной карточки в другую"
	    stereotype 	"KActionPlugin"
	    superclasses 	(list inheritance_relationship_list
		(object Inheritance_Relationship
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"1327302216622372"))
		    quid       	"4F1D0648026D"
		    supplier   	"Logical View::external::JavaConfluence::ConfluenceClassPack::ConfluenceActionSupport"
		    quidu      	"465ADCCA036B"))
	    language   	"MDA Generator")
	(object Class "MoveUvsQueryToAntoherDocCardWebItem"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"1327302232200264")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"need UC"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"weight"
		    value      	"11")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"section"
		    value      	"system.content.action/modify")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"styleClass"
		    value      	"move-uvsquery")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"label key"
		    value      	"uvsquery.move")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"output.xml:*4F1D065800C7LABEL_CONTENT*"
		    value      	(value Text 
|<!--UC_BEGIN*4F1D065800C7LABEL_CONTENT*-->¤			<!--UC_END*4F1D065800C7LABEL_CONTENT*-->
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"WikiPageID (wiki)"
		    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/MoveUvsQueryToAntoherDocCardWebItem|4F1D065800C7
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (wiki)"
		    value      	"wiki"))
	    quid       	"4F1D065800C7"
	    documentation 	"перенос запроса из одной карточки в другую"
	    stereotype 	"WebItem"
	    used_nodes 	(list uses_relationship_list
		(object Uses_Relationship
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"1327305263952677")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"id"
			    value      	"moveUvsQuery"))
		    quid       	"4F1D122F03B7"
		    stereotype 	"link"
		    supplier   	"Logical View::MDProcess::DocCardChange::DocCardSupport::DocCardXPlugin::DocCardXPackage::MoveUvsQueryToAnotherDocCard"
		    quidu      	"4F1D072E01C5"))
	    language   	"MDA Generator")
	(object Class "MoveUvsQueryCondition"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"1327302370544178")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/DocCardChange/DocCardSupport/MoveUvsQueryCondition.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4F1D06E20220_CUSTOM_IMPORT*"
		    value      	"//#UC START# *4F1D06E20220_CUSTOM_IMPORT*¤import ru.garant.MDProcess.DocCardChange.DocCardCommon.DPOUVSManager;¤import ru.garant.MDProcess.DocCardChange.Entities.DocCardPermissionManager;¤¤import com.atlassian.confluence.pages.AbstractPage;¤import com.atlassian.confluence.pages.Page;¤import com.atlassian.confluence.plugin.descriptor.web.WebInterfaceContext;¤import com.atlassian.confluence.user.AuthenticatedUserThreadLocal;¤import com.atlassian.user.Group;¤import com.atlassian.user.User;¤¤//#UC END# *4F1D06E20220_CUSTOM_IMPORT*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4F1D06E20220_CUSTOM_CLASS_DEFINITION*"
		    value      	"//#UC START# *4F1D06E20220_CUSTOM_CLASS_DEFINITION*¤//#UC END# *4F1D06E20220_CUSTOM_CLASS_DEFINITION*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4F1D06E20220_CUSTOM_METHODS_AND_DATA*"
		    value      	(value Text 
|//#UC START# *4F1D06E20220_CUSTOM_METHODS_AND_DATA*¤	¤	¤	@Override¤	public boolean shouldDisplay(WebInterfaceContext context) {¤		// TODO Auto-generated method stub¤		final AbstractPage pageObj = context.getPage();¤		if (pageObj instanceof Page == false) {¤			return false;¤		}¤		User user = AuthenticatedUserThreadLocal.getUser();¤		return DocCardPermissionManager.Factory.get().canEdit(pageObj, user.getName());¤	}¤	//#UC END# *4F1D06E20220_CUSTOM_METHODS_AND_DATA*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"WikiPageID (wiki)"
		    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/MoveUvsQueryCondition|4F1D06E20220
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (wiki)"
		    value      	"wiki"))
	    quid       	"4F1D06E20220"
	    documentation 	"Доступность такая же, как для редактирования атрибутов в карточке"
	    stereotype 	"SimpleClass"
	    superclasses 	(list inheritance_relationship_list
		(object Inheritance_Relationship
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"1327308253185668"))
		    quid       	"4F1D1DDD00B7"
		    supplier   	"Logical View::external::ConfluenceSupport::com.atlassian.confluence.plugin.descriptor.web.conditions::BaseConfluenceCondition"
		    quidu      	"4A53516B029A"))
	    language   	"MDA Generator")
	(object Class "SendEmailThenAddDocCardsWithInternet"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"1327477840318047")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Factory auto reg"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Factory default impl"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Servant Pool"
		    value      	"none")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"cron-expression"
		    value      	"0 0/10 * * * ?")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"debug log"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"factory priority"
		    value      	"0")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"local supervisor"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"need UC"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"repeated"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"singleton"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/DocCardChange/DocCardSupport/SendEmailThenAddDocCardsWithInternet.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4F1FB450013E_CUSTOM_IMPORT*"
		    value      	"//#UC START# *4F1FB450013E_CUSTOM_IMPORT*¤import java.text.SimpleDateFormat;¤import java.util.ArrayList;¤import java.util.Date;¤import java.util.List;¤¤import ru.garant.MDProcess.ConfluencePlugins.EmailNotification.EmailGateway;¤import ru.garant.MDProcess.DocCardChange.DocCardChangeDAO.GarDocDAO;¤import ru.garant.MDProcess.DocCardChange.EntitiesImpl.UVSQueryManagerImpl;¤¤import ru.garant.shared.ConfluenceCore.ActionSupport.ActionContextThreadLocalFactory;¤import net.sf.hibernate.HibernateException;¤import net.sf.hibernate.Query;¤¤import com.atlassian.confluence.setup.bandana.ConfluenceBandanaContext;¤import com.atlassian.mail.Email;¤//#UC END# *4F1FB450013E_CUSTOM_IMPORT*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4F1FB450013E_CUSTOM_CLASS_DEFINITION*"
		    value      	"//#UC START# *4F1FB450013E_CUSTOM_CLASS_DEFINITION*¤//#UC END# *4F1FB450013E_CUSTOM_CLASS_DEFINITION*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4F1FB450013E_DO_EXECUTE_IMPLEMETATION*"
		    value      	(value Text 
|//#UC START# *4F1FB450013E_DO_EXECUTE_IMPLEMETATION*¤		super.doExecute(jec);¤		//#UC END# *4F1FB450013E_DO_EXECUTE_IMPLEMETATION*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4F1FB450013E_CUSTOM_METHODS_AND_DATA*"
		    value      	(value Text 
|//#UC START# *4F1FB450013E_CUSTOM_METHODS_AND_DATA*¤	final static String EMAILS_FOR_SEND = "SendEmailThenAddDocCardsWithInternet.EmailsForAddDocCardsWithInternetJob";¤¤	public static void setEmailsForJobExecution (String emails) {¤		ru.garant.shared.ConfluenceCore.Helpers.ContainerManager.Factory.get().getBandanaManager().setValue(¤			new ConfluenceBandanaContext ()¤			, EMAILS_FOR_SEND¤			, emails¤		);	¤	}¤	¤	public static String getEmailsForJobExecution () {¤		String emails = (String)ru.garant.shared.ConfluenceCore.Helpers.ContainerManager.Factory.get().getBandanaManager().getValue(¤			new ConfluenceBandanaContext ()¤			, EMAILS_FOR_SEND¤		);¤		if (emails == null) {¤			try {¤				emails = "prime@tver.garant.ru, fedprime@garant.ru";¤				setEmailsForJobExecution(emails);¤			} catch (Exception e) {	¤				Logs.LOG_SEX(e);¤			}¤		}¤		return emails;¤	}¤¤	public void processTimeSheduledAddDocCardsWithInternet(){¤		Logs.LOG_D("SendEmailThenAddDocCardsWithInternet :: processTimeSheduledAddDocCardsWithInternet : start");¤		¤		Date beginDate = UVSQueryManagerImpl.getLastSendEmailJobExecution(new SimpleDateFormat("yyyy-MM-dd HH:mm:ss").format(new Date()), UVSQueryManagerImpl.DATE_OF_SENDING_EMAIL_ADD_DOC_CARD_WITH_INTERNET_JOB);¤				¤		Logs.LOG_D(¤			"UVSQueryManagerIpl :: processTimeSheduledAddDocCardsWithInternet : begin date : "¤			+ new SimpleDateFormat(UVSQueryManagerImpl.DATE_OF_SENDING_EMAIL_JOB_FORMAT).format(beginDate)¤		);¤		¤		List<GarDocDAO> garDocs = GetAddDocCardsWithInternet.getNewAddedDocCardsWithInternet(beginDate);¤		if(garDocs.size() > 0){¤			SendMail.execucte(garDocs);¤			¤			UVSQueryManagerImpl.setLastSendEmailJobExecution(garDocs.get(garDocs.size()-1).getConnectToF1Date(), UVSQueryManagerImpl.DATE_OF_SENDING_EMAIL_ADD_DOC_CARD_WITH_INTERNET_JOB);¤		}¤		¤		Logs.LOG_D("SendEmailThenAddDocCardsWithInternet :: processTimeSheduledAddDocCardsWithInternet : end");¤¤	}¤	¤	public static class GetAddDocCardsWithInternet {¤		public static java.util.List<GarDocDAO> getNewAddedDocCardsWithInternet (final java.util.Date date) {¤			String sQuery = ¤					"select gardoc from GarDocDAO gardoc"¤					+ " where gardoc.internet=true"¤					+ " and gardoc.connectToF1Date > :date" ¤					+ " and gardoc.page.contentStatus='current'"¤					+ " and gardoc.page.originalVersion is null"¤					+ " order by gardoc.connectToF1Date"¤			;¤			try{¤				Query q = ru.garant.shared.ConfluenceCore.Helpers.ContainerManager.Factory.get().getSession().createQuery(sQuery);¤				q.setParameter("date", date);¤				return q.list(); ¤			} catch (HibernateException e) {¤				Logs.LOG_I("ERROR! " + e);¤			}¤			return new ArrayList<GarDocDAO>();¤		}¤	¤	}¤¤	public static class SendMail {¤		public static void execucte(final List<GarDocDAO> gardocs){¤			StringBuilder body = getEmailBodyForAddedDocCards(gardocs);¤			sendEmailAddDocCardWithInternetAuthor (body);¤		}¤		¤		public static void sendEmailAddDocCardWithInternetAuthor (StringBuilder body) {¤			String emails = getEmailsForJobExecution();¤			String subj = "Новые документы для ИНТЕРНЕТ";¤			EmailGateway eg = EmailGateway.Factory.create();¤			Email email = eg.createEmail(subj, body.toString(), emails);¤			eg.queueEmail(email);¤			eg.send();¤		}¤		¤		public static StringBuilder getEmailBodyForAddedDocCards(final List<GarDocDAO> gardocs){¤			StringBuilder sb = new StringBuilder();¤			sb.append("Появились новые документы с пометкой ИНТЕРНЕТ: <br><ol>");¤			¤			for(GarDocDAO gd : gardocs) {¤				sb.append("<li>")¤					.append(gd.getTopic())¤					.append("    <a href=\"")¤					.append(ru.garant.MDProcess.ConfluencePlugins.CommonVelocityContext.GlobalHelper.getPageUrl(gd.getPage()))¤					.append("\">")¤					.append(DpoUvsHelper.makeDocCardName(gd))¤					.append("</a>")¤					.append(" (" + new SimpleDateFormat("dd.MM.yyyy").format(gd.getConnectToF1Date()) + ")")¤					.append("</li>")¤				;¤			}¤			sb.append("</ol><br><br>");¤			return sb;¤		}¤	}¤¤	@Override¤	protected void executeJob() {¤		try {¤			processTimeSheduledAddDocCardsWithInternet();¤		} catch (Exception e) {¤			Logs.LOG_SEX(e);¤			throw new IllegalStateException (e);¤		}					¤	}¤	¤	protected boolean isNeedWriteTransaction() {¤		return true;¤	}¤	¤	//#UC END# *4F1FB450013E_CUSTOM_METHODS_AND_DATA*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"WikiPageID (wiki)"
		    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/SendEmailThenAddDocCardsWithInternet|4F1FB450013E
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (wiki)"
		    value      	"wiki"))
	    quid       	"4F1FB450013E"
	    documentation 	"Письма о появлении документов с пометкой ИНТЕРНЕТ "
	    stereotype 	"KJobPlugin"
	    superclasses 	(list inheritance_relationship_list
		(object Inheritance_Relationship
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"1337600296430492"))
		    quid       	"4FBA292801AC"
		    supplier   	"Logical View::MDProcess::DocCardChange::DocCardSupport::GarDocAbstractJob"
		    quidu      	"53E4BF9000E2"))
	    language   	"MDA Generator")
	(object Class "DocCardLuceneSearchIndex"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"1335448461805286")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/DocCardChange/DocCardSupport/DocCardLuceneSearchIndex.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4F99538D0325_CUSTOM_IMPORT*"
		    value      	"//#UC START# *4F99538D0325_CUSTOM_IMPORT*¤import org.apache.lucene.util.Version;¤import org.apache.lucene.index.IndexReader;¤import org.apache.lucene.index.Term;¤import org.apache.lucene.queryParser.QueryParser;¤import org.apache.lucene.search.BooleanQuery;¤import org.apache.lucene.search.DefaultSimilarity;¤import org.apache.lucene.search.FuzzyQuery;¤import org.apache.lucene.search.IndexSearcher;¤import org.apache.lucene.search.Query;¤import org.apache.lucene.search.ScoreDoc;¤import org.apache.lucene.search.Similarity;¤import org.apache.lucene.search.TermQuery;¤import org.apache.lucene.search.TopDocs;¤import org.apache.lucene.search.BooleanClause.Occur;¤import org.apache.lucene.store.Directory;¤¤import java.io.IOException;¤import java.io.Reader;¤import java.io.StringWriter;¤import java.util.Date;¤import java.text.ParseException;¤import java.text.SimpleDateFormat;¤import java.util.ArrayList;¤import java.util.Collections;¤import java.util.Comparator;¤import java.util.HashMap;¤import java.util.HashSet;¤import java.util.List;¤import java.util.Map;¤import java.util.Set;¤import java.util.concurrent.TimeUnit;¤¤import org.apache.commons.lang.StringUtils;¤import org.apache.lucene.analysis.Analyzer;¤import org.apache.lucene.analysis.standard.StandardAnalyzer;¤import org.apache.lucene.document.Document;¤import org.apache.velocity.VelocityContext;¤import org.apache.velocity.app.VelocityEngine;¤¤import ru.garant.MDProcess.ConfluencePlugins.DiscussionsSupport.GarantViewPageAction;¤import ru.garant.MDProcess.ConfluencePlugins.Entities.RealizeContentInFileOnDisk;¤import ru.garant.MDProcess.DocCardChange.DocCardChangeDAO.GarDocDAO;¤import ru.garant.MDProcess.DocCardChange.DocCardCommon.DocCardIndexManager;¤import ru.garant.MDProcess.DocCardChange.DocCardCommon.DocCardManager;¤import ru.garant.MDProcess.DocCardChange.DocCardSupport.DocCardLuceneReIndex.DocCardAttributes;¤¤import com.opensymphony.xwork.Action;¤import com.atlassian.confluence.pages.Page;¤import com.atlassian.confluence.setup.bandana.ConfluenceBandanaContext;¤import com.atlassian.confluence.util.velocity.VelocityUtils;¤import com.atlassian.confluence.json.json.JsonArray;¤import com.atlassian.confluence.json.json.JsonObject;¤import com.atlassian.confluence.json.json.JsonString;¤import com.atlassian.confluence.json.json.JsonArray;¤import com.atlassian.confluence.json.json.JsonObject;¤import com.google.common.cache.CacheBuilder;¤import com.google.common.cache.CacheLoader;¤import com.google.common.cache.LoadingCache;¤import com.google.common.cache.RemovalCause;¤import com.google.common.cache.RemovalListener;¤import com.google.common.cache.RemovalNotification;¤¤//#UC END# *4F99538D0325_CUSTOM_IMPORT*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4F99538D0325_CUSTOM_CLASS_DEFINITION*"
		    value      	"//#UC START# *4F99538D0325_CUSTOM_CLASS_DEFINITION*¤//#UC END# *4F99538D0325_CUSTOM_CLASS_DEFINITION*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4F99538D0325_ACTION_NAME*"
		    value      	(value Text 
|//#UC START# *4F99538D0325_ACTION_NAME*¤		return new String (getClass ().getName ());¤		//#UC END# *4F99538D0325_ACTION_NAME*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4F99538D0325_CUSTOM_METHODS_AND_DATA*"
		    value      	(value Text 
|//#UC START# *4F99538D0325_CUSTOM_METHODS_AND_DATA*¤//	String[] query2 = {"ПРИКАЗ", "Верховный Суд", "69"};¤//	String[] query = {"ПРИКАЗ", "Верховный Суд", null, null, "69", null, null};¤¤	public String doSearch(String spaceKey){¤		Logs.LOG_W("DocCardLuceneSearchIndex::doSearch::start");¤		long time = new Date().getTime();¤		String result = null;¤		try {				¤			if(getVelocityEngine() == null){¤				setVelocityEngine(VelocityUtils.getVelocityEngine());¤			}¤			result = searching(spaceKey);¤			String resIds = DpoUvsHelper.listToString(getLastSearchResult());¤			List<GarDocDAO>	garDocs = new ArrayList<GarDocDAO>(); ¤			if(StringUtils.isNotEmpty(resIds)){¤				garDocs = DocCardManager.Factory.get().getGarDocsFromIds(resIds);¤			}¤			Logs.LOG_W("DocCardLuceneSearchIndex::doSearch::getHtmlRepeatsString::start");¤			responseContent = DpoUvsHelper.getHtmlRepeatsString(getLastSearchAttributes(), garDocs);¤			Logs.LOG_W("DocCardLuceneSearchIndex::doSearch::getHtmlRepeatsString::time=" + (new Date().getTime() - time));¤			Logs.LOG_W("DocCardLuceneSearchIndex::doSearch::time=" + (new Date().getTime() - time));¤		} catch (Exception e) {¤			Logs.LOG_SEX(e);¤			return Action.ERROR;¤		}	¤		return result;¤	}¤	¤	public String searching(String spaceKey) throws Exception{¤		String[] query = new String[7];¤		query[0] = getType();¤		query[1] = (StringUtils.isEmpty(getIssuer())) ? null : getIssuer();¤		query[2] = query[1];¤		query[3] = (StringUtils.isEmpty(getDate()))? null : convertToRepeatsDate(getDate()).replaceAll(",", " ").trim();¤		query[4] = (StringUtils.isEmpty(getNumbers()))? null : getNumbers().replaceAll(","," ").trim();¤		query[5] = query[4];¤		query[6] = getIsMDP();¤		//query[4] = (getNumbers() == null)? null : "number:\"" + getNumbers().replaceAll(", ", "\" number:\"") + "\"";¤		//query[5] = (getNumbers() == null)? null : "normalizeNumber:\"" + getNumbers().replaceAll(", ", "\" normalizeNumber:\"") + "\"";¤		¤		doSearch(query, spaceKey);¤		¤		/* ПОКА НЕ НУЖНО - ТЕСТЫ РАБОТАЮТ БЕЗ ЭТОГО¤		//hack¤		//если ОГВ длинное, то норма запроса у поля ogv получается очень слабой и ролять начинают другие поля,¤		//как итог - находится не то что бы хотелось¤		//будем разбивать длинные огв по скобкам и искать отдельно, а потом мерджить результаты¤		if (getIssuer() != null) {¤			//ищем и мердж помещаем в мапу: contentid:topic => вес (первый получает 10 очков, второй - 8 и т.д.)¤			final Map<String, Integer> results = new HashMap<String, Integer> ();¤			final Map<String, DocCardAttributes> resultAttr = new HashMap<String, DocCardAttributes> (); ¤			¤				IndexReader reader = getReader ();¤				¤				String[] parts = getIssuer().split("[()]");¤				//String[] parts = new String[1];¤				//parts[0] = getIssuer();¤				¤				for (String ogv: parts) {¤					query[1] = ogv;¤					query[2] = query[1];¤					¤					doSearchImpl (query, reader);¤					¤					for (int i = 0; i < getLastSearchAttributes().size(); i++) {¤						DocCardAttributes dca = getLastSearchAttributes().get(i);¤						String key = String.format("%d:%d", dca.contentid_, dca.topic_);¤						resultAttr.put(key, dca);¤						¤						Integer w = results.get(key);¤						if (w == null) {¤							results.put(key, 0);¤							w = 0;¤						}¤						int newWeight = w + (getLastSearchResult().size() - i)*2;¤						results.put(key, newWeight);¤					}				¤				}¤				¤				//мердженый результат сортируем по весу¤				List<String> sr = new ArrayList<String>(results.keySet());¤				Collections.sort(sr, new Comparator<String>() {¤					public int compare(String o1, String o2) {¤						return results.get(o2).compareTo(results.get(o1));¤					}¤				});¤				¤				//отдаем количество заданных первых результатов, если не заданы то 5¤				List<String> fullResults = sr.subList(0, sr.size() < getCountResults() ? sr.size(): getCountResults());¤				lastSearchAttributes_.clear();¤				lastSearchResult_.clear();¤				for (String contentidPlusTopic : fullResults) {¤					lastSearchAttributes_.add(resultAttr.get(contentidPlusTopic));¤					¤					String contentidAsString = contentidPlusTopic.split(":")[0];¤					lastSearchResult_.add(contentidAsString);¤				}¤¤		} else {¤			doSearch(query);¤		}¤		*/¤		return Action.SUCCESS;¤	}¤	¤	public String doSearchAndReturnJSON(String spaceKey){¤		try{¤			JsonArray ret = new JsonArray ();¤			setIsMDP(null);¤			try {¤				setVelocityEngine(VelocityUtils.getVelocityEngine());¤			} catch (Exception e) {¤				Logs.LOG_SEX(e);¤			}¤			searching(spaceKey);¤			String resIds = DpoUvsHelper.listToString(getLastSearchResult());¤			if(StringUtils.isNotEmpty(resIds)){¤				List<GarDocDAO>	garDocs = DocCardManager.Factory.get().getGarDocsFromIds(resIds);¤				for(DocCardAttributes attr : getLastSearchAttributes()){¤					JsonObject jsonObject = new JsonObject ();¤					long id = attr.contentid_;¤					long topic = attr.topic_;¤					String titleForHint = null;¤					if(attr.contentid_ == 0){¤						titleForHint = attr.name_.replaceAll("\"", "&quot;").trim();¤					}else{	¤						for(GarDocDAO garDoc : garDocs){¤							if(attr.contentid_ == garDoc.getId()){¤								Page parent = garDoc.getPage().getParent();¤								String repeatDocTypeName = garDoc.getType() == null ? "" : garDoc¤										.getType().getName();¤								titleForHint = DpoUvsHelper.makeProperiesStringForNameDocument(¤										repeatDocTypeName, garDoc.getNumber(),¤										garDoc.getCreationDate(), parent.getTitle(),¤										garDoc.getName(), true).replaceAll("\"", "&quot;").trim();¤							}¤						}	¤					}¤					jsonObject.setProperty("id", new JsonString(String.valueOf(id)));¤					jsonObject.setProperty("title", new JsonString(titleForHint));¤					jsonObject.setProperty("topic", new JsonString(String.valueOf(topic)));¤					ret.add(jsonObject);¤				}¤			}	¤			responseContent = ret.serialize();¤		} catch (Exception e) {¤			Logs.LOG_SEX(e);¤		}¤		return SUCCESS;¤	}¤	¤	public String convertToRepeatsDate(String initialDatesString) throws Exception{¤		String res = "";¤		String[] dates = StringUtils.split(initialDatesString);¤		for(String dateString : dates){¤			if(StringUtils.isNotEmpty(res)){¤				res += ", ";¤			}¤			Date date = null;¤			try{¤				if(dateString.indexOf(".") > 0){¤					date = new SimpleDateFormat("dd.MM.yyyy").parse(dateString);¤				}else if(dateString.indexOf("/") > 0){¤					date = new SimpleDateFormat("dd/MM/yyyy").parse(dateString);¤				}else{¤					Logs.LOG_W("java.text.ParseException::Unparseble date = " + dateString);¤				}¤			}catch(ParseException ex){¤				Logs.LOG_W("java.text.ParseException::Unparseble date = " + dateString);¤			}¤			if(date != null){¤				res += new SimpleDateFormat("yyyyMMdd").format(date);¤			}¤		}¤		return res;¤	}¤	¤	private String responseContent = null;¤¤	public String getResponseContent() {¤		return this.responseContent;¤	}¤¤	public static class MySimilarity extends DefaultSimilarity {¤		@Override¤		public float queryNorm(float sumOfSquaredWeights) {¤			return super.queryNorm(sumOfSquaredWeights);¤			//return 0.01f;¤		}¤¤		@Override¤		public float coord(int overlap, int maxOverlap) {¤			//return 4.0f;¤			return super.coord(overlap, maxOverlap);¤		}¤¤		@Override¤		public float lengthNorm(String fieldName, int numTerms) {¤			if (fieldName.equals("type") || fieldName.equals("ogvWithSynonym") || fieldName.equals("ogv")) {¤				return numTerms > 0 ? 1.0f : 0.0f;¤			}¤			return super.lengthNorm(fieldName, numTerms);¤		}¤¤		@Override¤		public float idf(int docFreq, int numDocs) {¤			return super.idf(docFreq, numDocs);¤			//return 1;¤//			return (float)(Math.cbrt(numDocs/(double)docFreq+1) + 1.0);¤		}¤¤		@Override¤		public float tf(float freq) {¤			return 1;¤		}¤		¤	}¤¤	private void doSearchImpl (String[] query, IndexSearcher searcher, String spaceKey) throws Exception {¤		Logs.LOG_W("DocCardLuceneSearchIndex::doSearchImpl::start");¤		long time = new Date().getTime();¤		lastSearchResult_.clear();¤		lastSearchAttributes_.clear();¤	    try{¤			Analyzer analyzer = new DocCardAttributesAnalyzer(DocCardAttributesAnalyzer.WORK_MODE.SEARCH_MODE, spaceKey);¤		    ¤		    final String str = convertToLuceneQuery(query, spaceKey);¤	//	    final String str = "number:(03-04-05 8-995)";¤		    Query q = new QueryParser(Version.LUCENE_29, "type", analyzer).parse(str);¤		    ¤		    TopDocs hits = searcher.search(q, getCountResults());¤	        for (ScoreDoc scoreDoc : hits.scoreDocs) {¤	        	Document doc = searcher.doc(scoreDoc.doc);¤	        	String docSpaceKey = doc.get("spaceKey");¤	        	if(spaceKey.toLowerCase().equals(docSpaceKey.toLowerCase())){¤	//при поиске похожих при добавлении новой карточки          ¤	        		lastSearchResult_.add(doc.get("contentid"));¤	//при поиске http://mdp/plugins/servlet/doccardlucenesearchservlet            ¤		            DocCardAttributes attributes = new DocCardAttributes();¤		           	attributes.contentid_ = Long.valueOf(doc.get("contentid"));¤		/*            attributes.ogv_ = doc.get("ogv");¤		            attributes.type_ = doc.get("type");¤		            attributes.number_ = doc.get("number");¤		            attributes.creationDate_ = doc.get("date");¤		*/¤		           	attributes.name_ = doc.get("name");¤		            attributes.topic_ = Long.valueOf(doc.get("topic"));¤		            attributes.score_ = String.valueOf(scoreDoc.score);¤		            lastSearchAttributes_.add(attributes);¤	        	}¤	//            Logs.LOG_W("DocCardLuceneSearchIndex::doSearchImpl::doccardid=" + attributes.contentid_ + " topic=" + attributes.topic_);¤	        }¤			Logs.LOG_W("DocCardLuceneSearchIndex::doSearchImpl::end::time=" + (new Date().getTime()-time));¤¤	    }catch(Exception ex){¤	    	Logs.LOG_SEX(ex);¤	    }¤	}¤	/*¤	static Map<String, IndexReader> reader_ = new HashMap<String, IndexReader>();¤	private static IndexReader getReader (String spaceKey) throws Exception {¤		if (reader_.get(spaceKey) == null) {¤			¤			reader_.put(spaceKey, openReader(spaceKey));¤		} else {¤			IndexReader oldReader = reader_.get(spaceKey);¤			IndexReader newReader = oldReader.reopen(true);¤			reader_.put(spaceKey, newReader);¤		}¤		return reader_.get(spaceKey);¤	}¤	¤	public static void clearReader() throws IOException{¤		if(reader_.size() > 0){¤			for(IndexReader indexReader : reader_.values()){¤				indexReader.flush();¤				indexReader.unlock(indexReader.directory());¤				indexReader.close();¤				reader_ = new HashMap<String, IndexReader>();¤			}¤		}¤	}¤	¤	private static IndexReader openReader (String spaceKey) throws Exception {¤		Similarity.setDefault(new MySimilarity());¤		Directory index = DocCardIndexManager.Factory.get().getIndexDirectory(spaceKey);¤		if(index.list().length > 0){¤		    IndexReader reader = IndexReader.open(index, true);¤		    return reader;¤		}¤		return null;¤	}¤	*/¤	¤    private static LoadingCache<String, SearcherManager> cacheSearcherManagers_;¤¤    private LoadingCache<String, SearcherManager> getSearcherManager(){¤ 		if(cacheSearcherManagers_ == null){¤ 			synchronized(DocCardLuceneSearchIndex.class){¤ 				if(cacheSearcherManagers_ == null){¤ 					cacheSearcherManagers_ = CacheBuilder.newBuilder()¤ 						.expireAfterWrite(60, TimeUnit.MINUTES)¤ 						.build(new CacheLoader<String, SearcherManager>() {¤ 							@Override¤ 							public SearcherManager load(String spaceKey) {¤ 								Similarity.setDefault(new MySimilarity());¤ 								Directory index = DocCardIndexManager.Factory.get().getIndexDirectory();¤ 								try {¤									return new SearcherManager(index);¤								} catch (IOException e) {¤									Logs.LOG_SEX(e);¤								}¤ 								return null;¤ 							}¤ 					});¤ 				}¤ 			}¤ 		}¤ 		return cacheSearcherManagers_;¤    }¤¤	public String doSearch(String[] query, String spaceKey) throws Exception{¤		IndexSearcher searcher = getSearcherManager().get(spaceKey).get();¤		try { ¤			doSearchImpl (query, searcher, spaceKey);¤		} finally { ¤			getSearcherManager().get(spaceKey).release(searcher); ¤		} ¤¤		return Action.SUCCESS;¤	}¤/*¤	private static Map<String, SearcherManager> searcherManagers_ = new HashMap<String, SearcherManager>();¤	¤	public String doSearch(String[] query, String spaceKey) throws Exception{¤		if(searcherManagers_.get(spaceKey) == null){¤			Similarity.setDefault(new MySimilarity());¤			Directory index = DocCardIndexManager.Factory.get().getIndexDirectory(spaceKey);¤			searcherManagers_.put(spaceKey, new SearcherManager(index));¤		}¤		¤		IndexSearcher searcher = searcherManagers_.get(spaceKey).get();¤		try { ¤			doSearchImpl (query, searcher, spaceKey);¤		} finally { ¤			searcherManagers_.get(spaceKey).release(searcher); ¤		} ¤¤		return Action.SUCCESS;¤	}¤	*/¤	private String queryTemplate_ = null;¤	¤	public String getQueryTemplate(String spaceKey){¤		if(queryTemplate_ == null){¤			String key = "DocCardIndex.SearchFormula";¤			String value = null;¤			if(spaceKey == null){¤				spaceKey = "DPOUVS";¤			}¤			value = (String)ContainerManager.Factory.get().getBandanaManager().getValue(new ConfluenceBandanaContext(spaceKey), key);¤¤			if(StringUtils.isNotEmpty(value)){¤				queryTemplate_ = value;¤			}else{¤				queryTemplate_ =¤	  					"+(" +¤								"#if($type)type:($type)^1.8#end " +¤								"#if($ogv)ogvWithSynonym:($ogv)^0.9#end " +¤								"#if($date)date:($date)^1.8 date:($date.replaceAll(\"[ ]+\", \"~ \")~)^0.2#end " +¤								"#if($number)number:($number)^1.95 normalizeNumber:($number)^0.25#end" +¤						") " +¤						¤				"+(spaceKey:$spaceKey #if($isMDP)isMDP:$isMDP#end) ";						¤			}¤		}	¤				¤		return queryTemplate_;¤	}¤¤	VelocityEngine ve_ = null;¤	public VelocityEngine getVelocityEngine () throws Exception {¤		return ve_;¤		//return VelocityUtils.getVelocityEngine();¤	}¤	¤	public void setVelocityEngine (VelocityEngine ve) {¤		ve_ = ve;¤	}¤	¤	final static String escapeStr = new String ("\\+-!():^]{}~*?");¤	¤	private String escapeLuceneSyntaxis (final String s) {¤		if (StringUtils.isEmpty(s)) {¤			return null;¤		}¤		¤		StringBuilder sb = new StringBuilder();¤		for (int i = 0; i < s.length(); i++) {¤			final String ch = String.valueOf(s.charAt(i));¤			if (escapeStr.contains(ch)) {¤				sb.append("\\");¤			}¤			sb.append(ch);¤		}¤		final String ret = sb.toString();¤		return ret;¤	}¤	public String convertToLuceneQuery (String[] query, String spaceKey) throws Exception {¤        Map<String, Object> context = new HashMap<String, Object>();¤        context.put("type", escapeLuceneSyntaxis(query[0]));¤        context.put("ogv", escapeLuceneSyntaxis(query[1]));¤        context.put("date", escapeLuceneSyntaxis(query[3]));¤        context.put("number", escapeLuceneSyntaxis(query[4]));¤//        context.put("date", (escapeLuceneSyntaxis(query[3]) == null)?null:escapeLuceneSyntaxis(query[3]).replaceAll("/", " "));¤//        context.put("number", (escapeLuceneSyntaxis(query[4]) == null)?null:escapeLuceneSyntaxis(query[4]).replaceAll("/", " "));¤        if(query[6] != null){¤        	context.put("isMDP", escapeLuceneSyntaxis(query[6]));¤        }¤        context.put("spaceKey", escapeLuceneSyntaxis(spaceKey));¤        ¤        final String templateContent = getQueryTemplate(spaceKey);¤        StringWriter tempWriter = new StringWriter(templateContent.length());¤        getVelocityEngine().evaluate(new VelocityContext(context), tempWriter, "convertToLuceneQuery",  templateContent);¤        ¤        final String result = tempWriter.toString();        ¤		return result;¤	}¤	¤	/*¤	public String doSearch() throws ParseException{¤		if(getParameters() == null){¤			return Action.ERROR;¤		}¤		return doSearch(getParameters());¤	}¤	*/¤	List<String> lastSearchResult_ = new ArrayList<String>(10);¤	¤	List<DocCardAttributes> lastSearchAttributes_ = new ArrayList<DocCardAttributes>(10);¤	¤	private String type_ = null;¤	¤	public String getType(){¤		return type_;¤	}¤	¤	public void setType(String type){¤		type_ = type;¤	}¤	¤	private String issuer_ = null;¤	¤	public String getIssuer(){¤		return issuer_;¤	}¤	¤	public void setIssuer(String issuer){¤			issuer_ = issuer;¤	}¤¤	private String numbers_ = null;¤	¤	public String getNumbers(){¤		return numbers_;¤	}¤	¤	public void setNumbers(String numbers){¤		numbers_ = (StringUtils.isEmpty(numbers))?"":DpoUvsHelper.replaceSlashByWhitespace(numbers.trim());¤	}¤¤	private String date_ = null;¤	¤	public String getDate(){¤		return date_;¤	}¤	¤	public void setDate(String date){¤		date_ = (StringUtils.isEmpty(date))?"":DpoUvsHelper.replaceSlashByWhitespace(date.trim());¤	}¤¤	public List<String> getLastSearchResult () {¤		return lastSearchResult_;¤	}¤	¤	public List<DocCardAttributes> getLastSearchAttributes () {¤		return lastSearchAttributes_;¤	}¤¤	private int countResults_ = 5;¤	public int getCountResults(){¤		return countResults_;¤	}¤	¤	public void setCountResults(int countResults){¤		countResults_ = countResults;¤	}¤	¤	private String isMDP_ = "1";¤	¤	public String getIsMDP(){¤		return isMDP_;¤	}¤	¤	public void setIsMDP(String isMDP){¤		isMDP_ = isMDP;¤	}¤	//#UC END# *4F99538D0325_CUSTOM_METHODS_AND_DATA*
		    ))
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Factory auto reg"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Factory default impl"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Servant Pool"
		    value      	"none")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"debug log"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"factory priority"
		    value      	"0")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"local supervisor"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"need UC"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"singleton"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"url-pattern"
		    value      	"")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"DerivedImplement"
		    value      	"{}")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"DerivedOverload"
		    value      	"{}")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ImplementSelectType"
		    value      	"all")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"OverloadSelectType"
		    value      	"include")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4F99538D0325_INIT_IMPLEMETATION*"
		    value      	(value Text 
|//#UC START# *4F99538D0325_INIT_IMPLEMETATION*¤		//#UC END# *4F99538D0325_INIT_IMPLEMETATION*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4F99538D0325_SERVICE_IMPLEMETATION*"
		    value      	(value Text 
|//#UC START# *4F99538D0325_SERVICE_IMPLEMETATION*¤		String[] query = new String[4];¤		query[0] = request.getParameter("type");¤		query[1] = request.getParameter("ogv");¤		query[2] = request.getParameter("date");¤		query[3] = request.getParameter("number");¤		doSearch(query);¤		//#UC END# *4F99538D0325_SERVICE_IMPLEMETATION*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"WikiPageID (wiki)"
		    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/DocCardLuceneSearchIndex|4F99538D0325
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (wiki)"
		    value      	"wiki"))
	    quid       	"4F99538D0325"
	    documentation 	"для поиска (четыре параметра: ТИП, ОГВ, ДАТА, НОМЕР)"
	    stereotype 	"KActionPlugin"
	    superclasses 	(list inheritance_relationship_list
		(object Inheritance_Relationship
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"1336722451291832"))
		    quid       	"4FACC4130120"
		    supplier   	"Logical View::external::JavaConfluence::ConfluenceClassPack::ConfluenceActionSupport"
		    quidu      	"465ADCCA036B"))
	    language   	"MDA Generator")
	(object Class "DocCardLuceneReIndex"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"1335448521564705")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/DocCardChange/DocCardSupport/DocCardLuceneReIndex.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4F9953C90234_CUSTOM_IMPORT*"
		    value      	"//#UC START# *4F9953C90234_CUSTOM_IMPORT*¤import net.sf.hibernate.HibernateException;¤import net.sf.hibernate.Query;¤¤import com.atlassian.config.util.BootstrapUtils;¤import com.atlassian.confluence.pages.Page;¤import com.atlassian.confluence.setup.BootstrapManager;¤import com.atlassian.confluence.spaces.Space;¤import com.opensymphony.xwork.Action;¤¤import electric.util.string.Strings;¤¤import ru.garant.MDProcess.DocCardChange.DocCardChangeDAO.DocTypeDAO;¤import ru.garant.MDProcess.DocCardChange.DocCardChangeDAO.GarDocDAO;¤import ru.garant.MDProcess.DocCardChange.DocCardCommon.DocCardIndexManager;¤import ru.garant.MDProcess.DocCardChange.DocCardCommonImpl.DefaultHelpDeskRemote;¤import ru.garant.shared.Core.Root.NoActiveFactory;¤import java.io.IOException;¤import java.sql.Array;¤import java.sql.Connection;¤import java.sql.DriverManager;¤import java.sql.PreparedStatement;¤import java.sql.ResultSet;¤import java.sql.Statement;¤import java.text.SimpleDateFormat;¤import java.util.ArrayList;¤import java.util.Arrays;¤import java.util.Collection;¤import java.util.Collections;¤import java.util.Date;¤import java.util.HashMap;¤import java.util.HashSet;¤import java.util.Iterator;¤import java.util.List;¤import java.util.Map;¤import java.util.Set;¤import java.util.concurrent.ExecutorService;¤import java.util.concurrent.Executors;¤import java.util.concurrent.TimeUnit;¤import java.util.concurrent.atomic.AtomicInteger;¤import java.util.concurrent.locks.ReentrantLock;¤¤¤import org.apache.commons.lang.StringUtils;¤import org.apache.lucene.analysis.Analyzer;¤import org.apache.lucene.document.Document;¤import org.apache.lucene.document.Field;¤import org.apache.lucene.index.IndexWriter;¤import org.apache.lucene.index.Term;¤import org.apache.lucene.search.Similarity;¤import org.apache.lucene.store.Directory;¤//#UC END# *4F9953C90234_CUSTOM_IMPORT*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4F9953C90234_CUSTOM_CLASS_DEFINITION*"
		    value      	"//#UC START# *4F9953C90234_CUSTOM_CLASS_DEFINITION*¤//#UC END# *4F9953C90234_CUSTOM_CLASS_DEFINITION*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4F9953C90234_ACTION_NAME*"
		    value      	(value Text 
|//#UC START# *4F9953C90234_ACTION_NAME*¤		return new String (getClass ().getName ());¤		//#UC END# *4F9953C90234_ACTION_NAME*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4F9953C90234_CUSTOM_METHODS_AND_DATA*"
		    value      	(value Text 
|//#UC START# *4F9953C90234_CUSTOM_METHODS_AND_DATA*¤¤	//создание заново индекса¤	public String doIndex() throws Exception{¤		//полностью удаление индекса¤		DocCardIndexManager.Factory.get().removeLuceneDirectoryIfExist();¤		Similarity.setDefault(new DocCardLuceneSearchIndex.MySimilarity());¤		Directory index = DocCardIndexManager.Factory.get().getIndexDirectory();¤		Analyzer analyzer = new DocCardAttributesAnalyzer(DocCardAttributesAnalyzer.WORK_MODE.INDEX_MODE, "DPOUVS");¤		boolean hasError = false;¤		List<Space> spaces = DpoUvsHelper.getSpacesWhichHasGardocSettings();¤		Map<String, String> includeOGVPathsWithSpaces = FilterSpaceOGVPathFromOPPJob.getOGVPathInclude(spaces);¤		Map<String, String> excludeOGVPathsWithSpaces = FilterSpaceOGVPathFromOPPJob.getOGVPathExclude(spaces);¤		boolean createIndex = true;¤	    for(Space space : spaces){¤			String spaceKey = space.getKey();¤			IndexWriter w = null;¤		    try{¤			    w = new IndexWriter(index, analyzer, createIndex, IndexWriter.MaxFieldLength.LIMITED);¤			    w.setRAMBufferSizeMB(32);¤			    Logs.LOG_W("DocCardLuceneReIndex::doIndex::Открыли IndexWriter для docCard for spaceKey=" + spaceKey);¤	¤			    int count = 0;¤				for(DocCardAttributes attr : loadDocCardsAttributesFromDatabase(spaceKey)){¤			    	createWriterDoc(w, attr);¤			    	count++;¤			    	¤			    	if (count % 100 == 0) {¤			    		Logs.LOG_W("DocCardLuceneReIndex::doIndex::processed " + count + " for spaceKey=" + spaceKey);¤			    	}¤			    }¤			    ¤		    }catch(Exception ex){¤		    	hasError = true;¤		    	Logs.LOG_SEX(ex);¤		    }finally{¤		    	if(w != null){¤		    		w.close();¤		    	}¤			    Logs.LOG_W("DocCardLuceneReIndex::doIndex::Закрыли IndexWriter для docCard for spaceKey=" + spaceKey);¤		    	createIndex = false;¤		    }¤			if(hasError){¤				Logs.LOG_W("DocCardLuceneReIndex::doIndex::Прервали из-за ошибки for spaceKey=" + spaceKey);¤				return ERROR;¤			}¤		}¤		¤		{¤			IndexWriter w = null;¤		    Connection conn = null;¤		    try{¤			    w = new IndexWriter(index, analyzer, createIndex, IndexWriter.MaxFieldLength.LIMITED);¤			    w.setRAMBufferSizeMB(32);¤			    Logs.LOG_W("DocCardLuceneReIndex::doIndex::Открыли IndexWriter для HD");¤		    	conn = DefaultHelpDeskRemote.getConnection("DPOUVS");¤		    	workWithDocsFromHD(conn, w, mdpGarDocsTopics_, includeOGVPathsWithSpaces, excludeOGVPathsWithSpaces);¤		    }catch(Exception ex){¤		    	hasError = true;¤		    	Logs.LOG_E("Can't index data from HD: " + ex.getMessage());¤		    }finally{¤		    	if(conn != null){¤		    		conn.close();¤		    	}¤		    	if(w != null){¤		    		w.close();¤		    	}¤		    	Logs.LOG_W("DocCardLuceneReIndex::doIndex::Закрыли IndexWriter для HD");¤		    }¤		}¤		if(hasError){¤			Logs.LOG_W("DocCardLuceneReIndex::doIndex::Прервали из-за ошибки");¤			return ERROR;¤		}¤		{¤			IndexWriter w = null;¤		    try{¤			    w = new IndexWriter(index, analyzer, false, IndexWriter.MaxFieldLength.LIMITED);¤			    Logs.LOG_W("DocCardLuceneReIndex::doIndex::Открыли IndexWriter для optimize");¤			    w.optimize();¤		    }catch(Exception ex){¤		    	Logs.LOG_SEX(ex);¤		    }finally{¤		    	if(w != null){¤		    		w.close();¤		    	}¤		    	Logs.LOG_W("DocCardLuceneReIndex::doIndex::Закрыли IndexWriter для optimize");¤		    }	¤		}¤		¤	    return Action.SUCCESS;¤	}¤	¤	public static void workWithDocsFromHD(Connection conn, IndexWriter w, Set<Long> mdpGarDocsTopics, Map<String, String> includeOGVPathsWithSpaces, Map<String, String> excludeOGVPathsWithSpaces) throws Exception {¤		Statement stmt = null;¤		ResultSet rs = null;		¤		¤		try {¤			stmt = conn.createStatement(ResultSet.TYPE_FORWARD_ONLY, ResultSet.CONCUR_READ_ONLY);¤			stmt.setFetchSize(Integer.MIN_VALUE);¤			¤			Logs.LOG_D("workWithDocsFromHD: before executeQuery");¤			¤			rs = stmt.executeQuery(¤					"SELECT STRAIGHT_JOIN t.id-100000 as topic" +¤					", IF(INSTR(typ.name, '\\\\') = 0, UCASE(typ.name), SUBSTRING(UCASE(typ.name), INSTR(typ.name, '\\\\')+1)) as type" +¤					", IF(INSTR(REVERSE(s.name), '\\\\') = 0, UCASE(s.name), RIGHT(UCASE(s.name), INSTR(REVERSE(s.name), '\\\\')-1)) as issuer" +¤					", td.topicdate as creation_date, n.name as doc_number " +¤					", t.name as shortname " +¤					", s.name as issuerpath " +¤					"FROM garant_topics t " +¤					"LEFT OUTER JOIN garant_topics_topictypes tt ON (tt.topic_id = t.id) " +¤					"LEFT OUTER JOIN garant_topics_types typ ON (tt.topictype_id = typ.id) " +¤					"JOIN garant_topics_topicsources ts ON (ts.topic_id = t.id) " +¤					"JOIN garant_topics_sources s ON (ts.topicsource_id = s.id) " +¤					"LEFT OUTER JOIN garant_topics_topiccodes tn ON (tn.topic_id = t.id) " +¤					"LEFT OUTER JOIN garant_topics_codes n ON (tn.code_id = n.id) " +¤					"LEFT OUTER JOIN garant_topics_topicdates td ON (td.topic_id = t.id) "¤					+ "ORDER BY t.id"¤			);¤			¤			Logs.LOG_D("workWithDocsFromHD: after executeQuery");¤			¤			int i = 0;¤			DocCardAttributes ret = null;¤			while (rs.next()) {¤				long topic = rs.getLong("topic");¤				¤				if (ret != null && ret.topic_ != topic) {¤//					if(filtrate(spaceKey, ret.ogvPath_) == false){¤						createWriterDoc(w, ret);¤//					}¤¤					ret = null;¤				}¤				¤				if (mdpGarDocsTopics == null || mdpGarDocsTopics.contains(topic) == false) {¤					Date date = rs.getDate("creation_date");¤					String type = rs.getString("type");¤					String issuer = rs.getString("issuer");¤					String number = rs.getString("doc_number");¤					String issuerpath = rs.getString("issuerpath");¤					¤					if (ret == null) {¤						ret = new DocCardAttributes();¤						ret.spaceKey_= getSpaceKeyFromOGVPath(issuerpath, includeOGVPathsWithSpaces, excludeOGVPathsWithSpaces).toLowerCase();¤						ret.type_ = (StringUtils.isEmpty(type))?"":type.toUpperCase();¤						ret.ogv_ = issuer.toUpperCase();¤						ret.ogvPath_ = issuerpath;¤						ret.ogvWithSynonims_ = ret.ogv_;¤						ret.creationDate_ = (date == null) ? "" : new SimpleDateFormat("yyyyMMdd").format(date);¤						if(number != null) {¤							ret.number_ = number.trim();¤							ret.normalizeNumber_ = ret.number_;¤						}¤						ret.topic_ = topic;¤						ret.name_ = rs.getString("shortname");¤					} else {						¤						//несколько типов, несколько дат¤						if(StringUtils.isNotEmpty(type)){¤							if(StringUtils.isEmpty(ret.type_)){¤								ret.type_= type.toUpperCase();¤							}else{¤								ret.type_ += ", " + type.toUpperCase();¤							}¤						}¤						if(date != null){¤							String creationDate = new SimpleDateFormat("yyyyMMdd").format(date);¤							if(StringUtils.isEmpty(ret.creationDate_)){¤								ret.creationDate_ = creationDate;¤							}else{¤								ret.creationDate_ += ", " + creationDate;¤							}¤						}¤					¤					¤						if(ret.ogv_.contains(issuer) == false){¤							ret.ogv_ += ", " + issuer;¤							ret.ogvPath_ += ", " + issuerpath;¤							ret.ogvWithSynonims_ = ret.ogv_;¤						}¤						ret.number_ = getNumber(ret.number_, number);¤						ret.normalizeNumber_ = ret.number_;¤					}¤				}¤				¤				i++;¤				if (i % 100000 == 0) {¤					Logs.LOG_D(String.format("workWithDocsFromHD: %dK processed", i/1000));¤				}¤			} // rs.next()¤			¤			if (ret != null) {						¤		    	createWriterDoc(w, ret);¤			}¤			¤			Logs.LOG_D(String.format("workWithDocsFromHD: finish processed - %d", i));¤		}catch(Exception ex){¤			Logs.LOG_SEX(ex);¤		} finally {¤			if(rs != null){¤				try{¤					rs.close();¤				}catch(Exception e){¤					Logs.LOG_SEX(e);¤				}¤			}¤			if(stmt != null){¤				try{¤					stmt.close();¤				}catch(Exception e){¤					Logs.LOG_SEX(e);¤				}¤			}¤		}¤	}¤	¤	public static boolean filtrate(String spaceKey, String ogvPath){¤		if(spaceKey.equals("DPOUVS")){¤			return false;¤		}¤		List<String> ogvPaths = Arrays.asList(ogvPath.split(", "));¤		List<String> result = FilterSpaceOGVPathFromOPPJob.doFilterSpaceOGVPathFromOPPJob(ogvPaths, spaceKey);¤		if(result.size() == ogvPaths.size()){¤			return false;¤		}¤		return true;¤	}¤	¤ 	//обновление созданных, измененных, удаленных карточек ¤	public String doUpdateIndex(long docCardId, int event, String spaceKey) throws Exception{¤		Directory index = DocCardIndexManager.Factory.get().getIndexDirectory();¤		Analyzer analyzer = new DocCardAttributesAnalyzer(DocCardAttributesAnalyzer.WORK_MODE.INDEX_MODE, spaceKey);¤	    IndexWriter w = null;¤	    try{¤		    w = new IndexWriter(index, analyzer, false, IndexWriter.MaxFieldLength.LIMITED);¤	//	    Logs.LOG_W("DocCardLuceneReIndex::doReIndex::Открыли IndexWriter для docCardId = " + docCardId);¤		    if(event == DOC_CARD_REMOVE_EVENT || event == DOC_CARD_CHANGE_EVENT ){¤		    	Term t = new Term("contentid", String.valueOf(docCardId));¤		    	w.deleteDocuments(t);¤		    	w.commit();¤		    }¤		    if(event == DOC_CARD_ADD_EVENT || event == DOC_CARD_CHANGE_EVENT ){¤		    	List<DocCardAttributes> attrs = loadDocCardAttributesFromDatabase(docCardId, spaceKey); ¤		    	createWriterDoc(w, attrs.get(0));¤		    	w.commit();¤		    }¤	    }catch(Exception ex){¤	    	Logs.LOG_SEX(ex);¤	    }finally{¤	    	if(w != null){¤	    		w.close();¤	    	}¤	    }¤//	    Logs.LOG_W("DocCardLuceneReIndex::doReIndex::Закрыли IndexWriter для docCardId = " + docCardId);¤		return Action.SUCCESS;¤	}¤	¤	private static final ReentrantLock lockOnlyOneJobAtTime = new ReentrantLock ();¤¤	private Map<Long, List<String>> getAdditionalOgv(String sQuery) throws NoActiveFactory, HibernateException{¤		//форимруем мапу доп огв: ай-ди документа на список доп ОГВ¤		Map<Long, List<String>> ogvExt = new HashMap<Long, List<String>>();¤		Query q = ContainerManager.Factory.get().getSession().createQuery(sQuery);¤		List res = q.list();¤		for(Object obj : res){¤			Object[] o = (Object[])obj;¤			Long id = (Long)o[0];¤			String ogv = (String)o[1];¤				¤			List<String> ogvList = ogvExt.get(id);¤			if (ogvList == null) {¤				ogvList = new ArrayList<String>();¤				ogvExt.put(id, ogvList);¤			}¤			ogvList.add(ogv);¤		}¤		return ogvExt;¤	}¤	¤	private Map<Long, List<String>> getAdditionalNumbers(String sQuery) throws NoActiveFactory, HibernateException{¤		//форимруем мапу доп огв: ай-ди документа на список доп номеров¤		Map<Long, List<String>> numbExt = new HashMap<Long, List<String>>();¤		Query q = ContainerManager.Factory.get().getSession().createQuery(sQuery);¤		List res = q.list();¤		for(Object obj : res){¤			Object[] o = (Object[])obj;¤			Long id = (Long)o[0];¤			String numb = (String)o[1];¤				¤			List<String> numbList = numbExt.get(id);¤			if (numbList == null) {¤				numbList = new ArrayList<String>();¤				numbExt.put(id, numbList);¤			}¤			numbList.add(numb);¤		}¤		return numbExt;¤	}¤	¤	public Iterable<DocCardAttributes> loadDocCardsAttributesFromDatabase(final String spaceKey) throws Exception {¤		final Map<Long, List<String>> ogvExt = getAdditionalOgv("SELECT d.id, issuer.title FROM GarDocDAO as d, d.additionalDocIssuers as g, Page as issuer WHERE g = issuer.id and d.page.space.key='" + spaceKey + "'");¤		mdpGarDocsTopics_ = new HashSet<Long>();¤		¤		String sQuery = "SELECT d, issuer.title FROM GarDocDAO as d, Page as issuer WHERE d.page.originalVersion IS NULL AND d.page.contentStatus = 'current' AND issuer.id = d.docIssuer and d.page.space.key='" + spaceKey + "'";¤		final Iterator it = getDocCardAttributes(sQuery);¤		¤		return new Iterable<DocCardAttributes>() {¤			@Override¤			public Iterator<DocCardAttributes> iterator() {¤				return new Iterator<DocCardAttributes> () {¤					@Override¤					public boolean hasNext() {				¤						return it.hasNext();¤					}¤¤					@Override¤					public DocCardAttributes next() {¤						try {¤							Object obj = it.next();¤							DocCardAttributes dca = setDocCardAttributesForOne(obj, ogvExt, spaceKey);¤							GarDocDAO gd = ((GarDocDAO)((Object[])obj)[0]);¤							¤							ContainerManager.Factory.get().getSession().evict(gd);¤							ContainerManager.Factory.get().getSession().evict(gd.getPage());¤							return dca;¤						} catch (Exception e) {¤							e.printStackTrace();¤							throw new IllegalStateException(e.getMessage());¤						}¤					}¤¤					@Override¤					public void remove() {¤						throw new IllegalStateException("how?!");¤					}¤					¤				};¤			}¤		};¤		¤		¤		//List res = getDocCardAttributes(sQuery);		¤		//return setDocCardAttributes(res, ogvExt);¤	}¤	¤	private Iterator getDocCardAttributes(String sQuery) throws NoActiveFactory, HibernateException{¤		Query q = ContainerManager.Factory.get().getSession().createQuery(sQuery);¤		return q.iterate();¤	}¤¤	public String getQueryForGarGardocsFromArchi(String limitString){¤		return String.format(¤				"SELECT gardoc.topic, gardoc.absnum, gardoc.typename, gardoc.doc_issuer_title, gardoc.creation_date, gardoc.doc_number " +¤				"FROM gar_gardocs_from_archi gardoc where gardoc.typename is not null " +¤				"and gardoc.doc_issuer_title is not null and gardoc.creation_date is not null and gardoc.doc_number is not null" + limitString¤		);¤	}¤	¤	/*¤	private List<DocCardAttributes> getArchiDocs(String limitString){¤			//не учитываем строки, в которых не все четыре реквизита установлены ¤			String mysql = getQueryForGarGardocsFromArchi(limitString);¤			PreparedStatement ps = null;¤			ResultSet rs = null;¤			Map<Long, DocCardAttributes> attributesMapForTopic = new HashMap<Long, DocCardAttributes>();¤			Map<Long, DocCardAttributes> attributesMapForAbsnum = new HashMap<Long, DocCardAttributes>();¤			int i = 0;¤			try {¤			ps = ContainerManager.Factory.get().getSession().connection().prepareStatement(mysql);¤			rs = ps.executeQuery();¤			¤			while (rs.next()) {¤				long absnum = rs.getLong("absnum");¤				long topic = rs.getLong("topic");¤				if(mdpGarDocsTopics_.contains(topic) == false){¤					DocCardAttributes ret;¤					if(topic == 0){¤						ret = attributesMapForAbsnum.get(absnum);¤					}else{¤						ret = attributesMapForTopic.get(topic);¤					}¤					Date date = rs.getDate("creation_date");¤					String type = rs.getString("typename");¤					if(ret == null){¤						ret = new DocCardAttributes();¤						ret.type_ = (StringUtils.isEmpty(type))?"":type.toUpperCase();¤						ret.ogv_ = rs.getString("doc_issuer_title").toUpperCase();¤						ret.ogvWithSynonims_ = ret.ogv_;¤						ret.creationDate_ = (date == null) ? "" : new SimpleDateFormat("yyyyMMdd").format(date);¤						ret.number_ = rs.getString("doc_number").trim();¤						ret.normalizeNumber_ = ret.number_;¤						ret.topic_ = rs.getLong("topic");¤						ret.absnum_ = rs.getLong("absnum");¤					}else{¤						String ogv = rs.getString("doc_issuer_title").toUpperCase();¤						if(ret.ogv_.contains(ogv) == false){¤							ret.ogv_ += ", " + ogv;¤							ret.ogvWithSynonims_ = ret.ogv_;¤						}¤						ret.number_ = getNumber(ret.number_, rs.getString("doc_number"));¤						ret.normalizeNumber_ = ret.number_;¤						if(StringUtils.isEmpty(ret.creationDate_) && date != null){¤							ret.creationDate_ = new SimpleDateFormat("yyyyMMdd").format(date);¤						}¤						if(StringUtils.isEmpty(ret.type_) && StringUtils.isNotEmpty(type)){¤							ret.type_ = type.toUpperCase();¤						}¤					}¤					if(topic == 0){¤						attributesMapForAbsnum.put(ret.absnum_, ret);¤					}else{¤						attributesMapForTopic.put(ret.topic_, ret);¤					}¤				}¤				i++;¤				if(i % 500000 == 0){¤					Logs.LOG_W("DocCardLuceneReIndex::doReIndex::getArchiDocs::count = " + i);¤				}¤			}¤			} catch (Exception e) {¤				Logs.LOG_SEX(e);¤			}finally{¤				com.atlassian.core.db.JDBCUtils.close (rs);¤				com.atlassian.core.db.JDBCUtils.close (ps);¤			}¤			List<DocCardAttributes> attrs = new ArrayList<DocCardAttributes>();¤			for(DocCardAttributes attr : attributesMapForTopic.values()){¤				attrs.add(attr);¤			}¤			attributesMapForTopic.clear();¤			for(DocCardAttributes attr : attributesMapForAbsnum.values()){¤				attrs.add(attr);¤			}¤			attributesMapForAbsnum.clear();¤			return attrs;¤	} ¤	*/¤	private static String getNumber(String oldNumber, String newNumber){¤		if(StringUtils.isNotEmpty(newNumber)){¤			List<String> currentNumbers = Arrays.asList(newNumber.split("/"));¤			List<String> numbersList = new ArrayList<String>();¤			if(oldNumber != null){¤				numbersList = Arrays.asList(oldNumber.split("/"));¤			}¤			for(String currentNumber : currentNumbers){¤				if(numbersList.contains(currentNumber) == false){¤					if(StringUtils.isNotEmpty(oldNumber)){¤						oldNumber += "/";¤					}¤					oldNumber += currentNumber.trim();¤				}¤			}¤		}¤		return oldNumber;¤	}¤	¤	public List<DocCardAttributes> loadDocCardAttributesFromDatabase(long docCardId, String spaceKey) throws Exception {¤		Map<Long, List<String>> ogvExt =  new HashMap<Long, List<String>>();¤		GarDocDAO gadoc = GarDocDAO.get(docCardId);¤		for(long addIsId : gadoc.getAdditionalDocIssuers()){¤			if(addIsId != 0){¤				Page page = ContainerManager.Factory.get().getPageManager().getPage(addIsId);¤				if(page != null){¤					String ogv =  page.getTitle();¤					List<String> ogvList = ogvExt.get(docCardId);¤					if (ogvList == null) {¤						ogvList = new ArrayList<String>();¤						ogvExt.put(docCardId, ogvList);¤					}¤					ogvList.add(ogv);¤				}¤			}¤		}¤		¤		String issuerName = ContainerManager.Factory.get().getPageManager().getPage(gadoc.getDocIssuer()).getTitle();¤		List res = new ArrayList();¤		Object[] objs = new Object[2];¤		objs[0] = gadoc;¤		objs[1] = issuerName;¤		res.add(objs);¤		return setDocCardAttributes(res, ogvExt, spaceKey);¤	}¤¤	private DocCardAttributes setDocCardAttributesForOne (Object obj, Map<Long, List<String>> ogvExt, String spaceKey) throws Exception {¤		DocCardAttributes attr = new DocCardAttributes();¤		Object[] objs = (Object[])obj;¤		GarDocDAO gardocdao = (GarDocDAO)objs[0];¤		String issuerName = (String)objs[1];¤		¤		attr.spaceKey_ = spaceKey.toLowerCase();¤		attr.contentid_ = gardocdao.getId();¤		DocTypeDAO type = gardocdao.getType();¤		if(type != null){¤		attr.type_ = type.getName();¤		}¤		List<String> allOGV = new ArrayList<String>(2);¤		allOGV.add(issuerName);¤		if(ogvExt.get(attr.contentid_) != null){¤			for(String ogv : ogvExt.get(attr.contentid_)){¤				allOGV.add(ogv);¤			}¤		}¤		¤		attr.ogv_ = "";¤		attr.ogvWithSynonims_ = "";¤		for (String ogv : allOGV) {¤			attr.ogv_ = (StringUtils.isEmpty(attr.ogv_)) ? new String(): attr.ogv_ + ", ";¤			attr.ogv_ += ogv;¤		}¤		attr.ogvWithSynonims_ = attr.ogv_;¤		¤		Date date  = gardocdao.getCreationDate();¤		attr.creationDate_ = (date == null) ? "" : new SimpleDateFormat("yyyyMMdd").format(date);¤		Date muDate  = gardocdao.getRegistrationDate();¤		attr.creationDate_ += (muDate == null) ? "" : " " + new SimpleDateFormat("yyyyMMdd").format(muDate);¤		String numbersAll = gardocdao.getNumber();¤		if(gardocdao.getAdditionalNumbers()!= null){¤			for(String number : gardocdao.getAdditionalNumbers()){¤				if(StringUtils.isNotEmpty(number)){¤					numbersAll += "/" + number.trim();¤				}	¤			}¤		}¤		String muNumber = gardocdao.getRegistrationNumber();¤		if(StringUtils.isNotEmpty(muNumber)){¤			numbersAll += "/" + muNumber.trim();¤		}¤		attr.number_ = numbersAll;¤		attr.normalizeNumber_ = numbersAll;¤		attr.topic_ = gardocdao.getTopic();¤		String title = gardocdao.getName();¤		attr.name_ = DpoUvsHelper.makeDocCardName(issuerName, numbersAll, attr.type_, date, null);¤		if(StringUtils.isNotEmpty(title)){¤			attr.name_ += "\"" + title + "\"";¤		}¤		if(gardocdao.getTopic() > 0){¤			mdpGarDocsTopics_.add(gardocdao.getTopic());¤		}¤		¤		return attr;¤	}¤	¤	¤	public void setMdpGarDocsTopicsForHD(Set<Long> mdpGarDocsTopics){¤		mdpGarDocsTopics_ = mdpGarDocsTopics;¤	}¤	¤	private List<DocCardAttributes> setDocCardAttributes(List res, Map<Long, List<String>> ogvExt, String spaceKey) throws Exception{¤		List<DocCardAttributes> attributesList = new ArrayList<DocCardAttributes>();¤		mdpGarDocsTopics_ = new HashSet<Long>();¤		for(Object obj : res){¤			attributesList.add(setDocCardAttributesForOne(obj, ogvExt, spaceKey));¤		}¤		ogvExt.clear();¤		return attributesList;¤	}¤	¤	private static Document getDoc(DocCardAttributes attr)throws IOException{¤	    Document doc = new Document();¤	    doc.add(new Field("spaceKey", attr.spaceKey_, Field.Store.YES, Field.Index.NOT_ANALYZED_NO_NORMS));¤	    doc.add(new Field("contentid", String.valueOf(attr.contentid_), Field.Store.YES, Field.Index.NOT_ANALYZED_NO_NORMS));¤	    int isMDP = 1;¤	    if(attr.contentid_ == 0){¤	    	isMDP = 0;¤	    }¤	    doc.add(new Field("isMDP", String.valueOf(isMDP), Field.Store.YES, Field.Index.NOT_ANALYZED_NO_NORMS));¤	    doc.add(new Field("topic", String.valueOf(attr.topic_), Field.Store.YES, Field.Index.NOT_ANALYZED_NO_NORMS));¤	    ¤	   	 if(attr.type_ != null){¤	   		 addDoc(doc, "type", attr.type_, true);¤	   	 }¤//	   	 addDoc(doc, "ogv", attr.ogv_, true);¤	   	 addDoc(doc, "ogvWithSynonym", attr.ogvWithSynonims_, false);¤	   	 if(attr.creationDate_ != null){¤	   		 addDoc(doc, "date", attr.creationDate_, true);¤	   	 }¤	   	 if(StringUtils.isNotEmpty(attr.number_)){¤	   		 addDoc(doc, "number", DpoUvsHelper.replaceSlashByWhitespace(attr.number_.trim()), true);¤//	   		 addDoc(doc, "normalizeNumber", DpoUvsHelper.replaceSlashByWhitespace(attr.normalizeNumber_.trim()), false);¤	   	 }¤	   	 if(attr.name_ != null){¤	   		 doc.add(new Field("name", attr.name_, Field.Store.YES, Field.Index.NO));¤	   	 }¤	   	 return doc;¤	}¤	¤	private static void createWriterDoc(IndexWriter w, DocCardAttributes attr) throws Exception{¤		Document doc = getDoc(attr);¤	    w.addDocument(doc);¤//	    Logs.LOG_W("DocCardLuceneReIndex::createWriterDoc::topic=" + attr.topic_);¤	}¤	¤	private static void addDoc(Document doc, String fieldName, String value, boolean hasStore) {¤		if(hasStore){¤			doc.add(new Field(fieldName, value, Field.Store.YES, Field.Index.ANALYZED));¤		}else{¤			doc.add(new Field(fieldName, value, Field.Store.NO, Field.Index.ANALYZED));¤		}¤	}¤	¤	public static String getSpaceKeyFromOGVPath(String ogvPath, Map<String, String> includeOGVPathsWithSpaces, Map<String, String> excludeOGVPathsWithSpaces){¤		List<String> ogvPaths = Arrays.asList(ogvPath.split(", "));¤		List<String> addedSpaceKeys = new ArrayList<String>();¤		if(includeOGVPathsWithSpaces != null){¤			for(String ogvNameFromOpp : ogvPaths){¤				for(String incPath : includeOGVPathsWithSpaces.keySet()){¤					if(ogvNameFromOpp.startsWith(incPath) && addedSpaceKeys.contains(includeOGVPathsWithSpaces.get(incPath)) == false){¤						addedSpaceKeys.add(includeOGVPathsWithSpaces.get(incPath));¤					}¤				}¤			}¤		}¤		if(excludeOGVPathsWithSpaces != null){¤			List<String> removedOgvNames = new ArrayList<String>();¤			for(String ogvNameFromOpp : ogvPaths){¤				for(String excludePath : excludeOGVPathsWithSpaces.keySet()){¤					if(ogvNameFromOpp.startsWith(excludePath) && addedSpaceKeys.contains(excludeOGVPathsWithSpaces.get(excludePath))){¤						removedOgvNames.add(excludeOGVPathsWithSpaces.get(excludePath));¤					}¤				}¤			}¤			addedSpaceKeys.removeAll(removedOgvNames);¤			if(addedSpaceKeys.size() == 1){¤				return addedSpaceKeys.get(0);¤			}else if(addedSpaceKeys.size() > 1){¤				return addedSpaceKeys.get(0);¤			}¤		}¤		¤		return "DPOUVS";¤	}¤	¤    public BootstrapManager getBootstrapManager()¤    {¤        if (bootstrapManager == null){¤            bootstrapManager = (BootstrapManager) BootstrapUtils.getBootstrapManager();¤        }    ¤        return bootstrapManager;¤    }¤¤    private BootstrapManager bootstrapManager;¤¤    public static class DocCardAttributes{¤    	public long contentid_;¤    	public long absnum_ = 0;¤    	public String type_;¤    	public String ogv_;¤    	public String ogvWithSynonims_;¤    	public String ogvPath_;¤    	public String creationDate_;¤    	public String number_;¤    	public String normalizeNumber_;¤    	public long topic_;¤    	public String name_;¤    	public String score_;¤    	public String spaceKey_;¤	}¤	¤    public Set<Long> mdpGarDocsTopics_ = null;¤    ¤    public static int DOC_CARD_ADD_EVENT = 0;¤    public static int DOC_CARD_CHANGE_EVENT = 1;¤    public static int DOC_CARD_REMOVE_EVENT = 2;¤    //http:/localhost:8080/ru/garant/MDProcess/DocCardChange/DocCardSupport/DocCardXPlugin/DocCardXPackage/doccardlucenereindex.action"¤    //#UC END# *4F9953C90234_CUSTOM_METHODS_AND_DATA*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"WikiPageID (wiki)"
		    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/DocCardLuceneReIndex|4F9953C90234
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (wiki)"
		    value      	"wiki"))
	    quid       	"4F9953C90234"
	    documentation 	"для переиндексации"
	    stereotype 	"KActionPlugin"
	    superclasses 	(list inheritance_relationship_list
		(object Inheritance_Relationship
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"1336655306825214"))
		    quid       	"4FABBDCA0336"
		    supplier   	"Logical View::external::JavaConfluence::ConfluenceClassPack::ConfluenceActionSupport"
		    quidu      	"465ADCCA036B"))
	    language   	"MDA Generator")
	(object Class "DocCardAttributesAnalyzer"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"1335959360527045")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/DocCardChange/DocCardSupport/DocCardAttributesAnalyzer.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4FA11F40020A_CUSTOM_IMPORT*"
		    value      	"//#UC START# *4FA11F40020A_CUSTOM_IMPORT*¤import java.io.BufferedReader;¤import java.io.FileInputStream;¤import java.io.IOException;¤import java.io.InputStreamReader;¤import java.io.Reader;¤import java.io.StringReader;¤import java.util.ArrayList;¤import java.util.Arrays;¤import java.util.HashMap;¤import java.util.HashSet;¤import java.util.List;¤import java.util.Map;¤import java.util.Set;¤import java.util.TreeMap;¤import java.util.TreeSet;¤import java.util.concurrent.Callable;¤import java.util.concurrent.TimeUnit;¤¤import org.apache.commons.collections.CollectionUtils;¤import org.apache.commons.io.IOUtils;¤import org.apache.lucene.analysis.Analyzer;¤import org.apache.lucene.analysis.CachingTokenFilter;¤import org.apache.lucene.analysis.CharTokenizer;¤import org.apache.lucene.analysis.StopFilter;¤import org.apache.lucene.analysis.Token;¤import org.apache.lucene.analysis.TokenFilter;¤import org.apache.lucene.analysis.TokenStream;¤import org.apache.lucene.analysis.ru.RussianCharsets;¤import org.apache.lucene.analysis.ru.RussianLowerCaseFilter;¤import org.apache.lucene.util.AttributeSource;¤¤import com.atlassian.confluence.setup.bandana.ConfluenceBandanaContext;¤import com.atlassian.gzipfilter.org.apache.commons.lang.StringUtils;¤import com.google.common.cache.Cache;¤import com.google.common.cache.CacheBuilder;¤import com.google.common.cache.CacheLoader;¤import com.google.common.cache.LoadingCache;¤¤import ru.garant.MDProcess.ConfluencePlugins.IndexingSupport.GarRussianLetterTokenizer;¤import ru.garant.MDProcess.DocCardChange.DocCardChangeDAO.WordSynonymDAO;¤import ru.garant.MDProcess.DocCardChange.DocCardCommon.DocCardIndexManager;¤import ru.garant.MDProcess.DocCardChange.DocCardCommon.DocCardManager;¤import ru.garant.MDProcess.DocCardChange.DocCardCommon.SynonymsManager;¤import ru.garant.MDProcess.DocCardChange.DocCardCommonImpl.HDSynonymsManager;¤¤//#UC END# *4FA11F40020A_CUSTOM_IMPORT*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4FA11F40020A_CUSTOM_CLASS_DEFINITION*"
		    value      	"//#UC START# *4FA11F40020A_CUSTOM_CLASS_DEFINITION*¤//#UC END# *4FA11F40020A_CUSTOM_CLASS_DEFINITION*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4FA11F40020A_CUSTOM_METHODS_AND_DATA*"
		    value      	(value Text 
|//#UC START# *4FA11F40020A_CUSTOM_METHODS_AND_DATA*¤	public enum WORK_MODE {¤		INDEX_MODE,¤		SEARCH_MODE¤	};¤	¤	private WORK_MODE workMode_;¤	private static String spaceKey_;¤	public DocCardAttributesAnalyzer (final WORK_MODE mode, final String spaceKey) {¤		workMode_ = mode;¤		spaceKey_ = spaceKey;¤	}¤	¤	public TokenStream tokenStream (String fieldName, Reader reader) {¤		if(fieldName.equals("number")){¤			return getNumberTokenStream(reader);¤		}else if(fieldName.equals("normalizeNumber")){¤			return getDigitTokenStream(reader);¤		}else if(fieldName.equals("ogvWithSynonym")){¤			if (workMode_ == WORK_MODE.SEARCH_MODE) {¤				return getStandartDocCardTokenStream(reader);¤			}¤			¤			try {¤				return getTokenStreamBySynonyms(reader);¤			} catch (Exception e) {¤				Logs.LOG_SEX(e);¤				return null;¤			}¤		} else {¤			return getStandartDocCardTokenStream(reader);¤		}¤	}¤	¤	private TokenStream getStandartDocCardTokenStream (Reader reader) {¤		String[] ogvStopSet = StringUtils.split(getOgvStopWords(), ", ");¤		List<String> additionalStopList = Arrays.asList(ogvStopSet);¤		Set<String> additionalStopSet = new HashSet<String>(additionalStopList);¤		addStopSet(additionalStopSet);¤		TokenStream result = super.tokenStream("", reader);¤		return result;		¤	}¤	¤	private TokenStream getDigitTokenStream(Reader reader){¤		TokenStream result = new GarDigitTokenizer(reader);¤		return result;¤	}¤¤	private TokenStream getNumberTokenStream(Reader reader){¤		TokenStream result = new GarNumberTokenizer(reader);¤		result = new ReplaceSymbolsFilter(result);¤		result = new RussianLowerCaseFilter(result, RussianCharsets.UnicodeRussian);¤		result = new ReplaceSymbolsFilter2(result);¤		return result;¤	}¤	¤	private Cache<String, TokenStream> sTokenStreamCache = CacheBuilder.newBuilder()¤							.maximumSize(2000)¤							.build();¤	¤¤	private TokenStream getTokenStreamBySynonyms(Reader reader) throws Exception {¤		if (tt_ == null) {¤			//tt_ = TrieTreeHelper.initByVladFile("J:\\support\\unittest\\synm.txt", "Cp866");¤			tt_ = TrieTreeHelper.initByDBData();¤		}¤¤		final String str = IOUtils.toString(reader);¤		¤		TokenStream ret = sTokenStreamCache.get(str, new Callable<TokenStream>() {¤			@Override¤			public TokenStream call() throws Exception {¤				String normString = TrieTreeHelper.makeTokenStreamWithSynonyms(tt_, str);¤¤				String[] ogvStopSet = StringUtils.split(getOgvStopWords(), ", ");¤				List<String> additionalStopList = Arrays.asList(ogvStopSet);¤				Set<String> additionalStopSet = new HashSet<String>(additionalStopList);¤				addStopSet(additionalStopSet);¤¤				TokenStream result = new GarRussianLetterTokenizer(new StringReader(normString), RussianCharsets.UnicodeRussian);¤				result = new StopFilter(result, stopSet);¤				return new CachingTokenFilter(result);¤			}¤			¤		});¤		¤		ret.reset();¤		¤		return ret;¤	}¤	¤	¤	private Map<String, String> makeOGVSynonymMap () throws Exception {¤		Map<String, String> ret = new HashMap<String, String>();¤		List res = DocCardIndexManager.Factory.get().getOgvSynonymsAttributesForIndex();¤		for(Object obj : res){¤			Object[] o = (Object[])obj;¤			String title = makeTokenStreamAsString(new StringReader((String)o[0]));¤			String syn = makeTokenStreamAsString(new StringReader((String)o[1]));¤			¤			ret.put(syn, title);¤		}¤		return ret;¤		¤	}¤	¤	private String makeTokenStreamAsString( Reader reader) throws IOException {¤		TokenStream ts = getStandartDocCardTokenStream(reader);¤		//извлекаем токены, склеивавем их в строчку через пробелы и эту строчку возвращаем¤		return makeTokenString(ts);¤	}¤¤	public static String makeTokenString(TokenStream ts) throws IOException {¤		//извлекаем токены, склеивавем их в строчку через пробелы и эту строчку возвращаем¤		Token token = null;¤		String tokenString = "";¤		while((token = ts.next()) != null){¤			tokenString += token.term() + " ";¤		}	¤		return tokenString.trim();¤	}¤	¤	public static String makeNormilizedOGVString (String ogv) throws IOException {¤		Analyzer analyzer = new GarRussianAnalyzer(RussianCharsets.UnicodeRussian, new String[]{});¤		TokenStream ts = analyzer.tokenStream("", new StringReader(ogv));¤		String ret = DocCardAttributesAnalyzer.makeTokenString(ts);¤		ts.close();¤		return ret.replaceAll("российск федерац", "рф");¤	}¤¤	¤	static class GarDigitTokenizer extends CharTokenizer {¤		public GarDigitTokenizer(Reader in) {¤			super(in);¤		}¤¤		protected boolean isTokenChar (char c) {¤			return Character.isDigit(c);¤		}¤		¤	} ¤	¤	static class GarNumberTokenizer extends CharTokenizer {¤¤		public GarNumberTokenizer(Reader in) {¤			super(in);¤		}¤¤		protected boolean isTokenChar (char c) {¤			//return c != '/';¤			boolean ret = !Character.isWhitespace(c) && !(c == '/');¤			return ret;¤		}¤		¤		protected char normalize(char c){¤			return c;¤		}¤	} ¤	¤	static class ReplaceSymbolsFilter extends TokenFilter {¤¤		public ReplaceSymbolsFilter(TokenStream input) {¤			super(input);¤		}¤		¤		public String replace(final String text){¤            String tokenText = DpoUvsHelper.replaceLatSymbByRus(text);¤            tokenText = DpoUvsHelper.replaceNolByO(tokenText);¤            tokenText = tokenText.replaceAll("-фз", "");¤            tokenText = tokenText.replaceAll("@", "");¤			return tokenText;¤		}¤¤	    public Token next() throws IOException¤	    {¤	        Token token = input.next();¤			if (token == null){¤				return null;¤			}¤            String tokenText = token.termText();¤			if(StringUtils.isEmpty(tokenText)){¤				return null;¤			}	¤            token.setTermText(replace(tokenText));¤           	return token;¤	    }¤	} ¤	¤	static class ReplaceSymbolsFilter2 extends TokenFilter {¤¤		public ReplaceSymbolsFilter2 (TokenStream input) {¤			super(input);¤		}¤		¤		public String replace(final String text){¤            String tokenText = text.replaceAll("-фз", "");¤			return tokenText;¤		}¤¤	    public Token next() throws IOException¤	    {¤	        Token token = input.next();¤			if (token == null){¤				return null;¤			}¤            String tokenText = token.termText();¤			if(StringUtils.isEmpty(tokenText)){¤				return null;¤			}	¤            token.setTermText(replace(tokenText));¤           	return token;¤	    }¤	} ¤	¤/*¤	static class OgvStopFilter extends TokenStream{¤		private static String OGV_STOP_WORDS = "рф, росс, российск, федерац, федеральн, министерств, комитет, ссср, государствен, москв, служб, суд";¤		public OgvStopFilter(TokenStream result){¤			new StopFilter(result, StringUtils.split(OGV_STOP_WORDS, ", "));¤		}¤	 }¤*/¤	private String ogvStopWords_ = null;¤	¤	public String getOgvStopWords(){¤		if(ogvStopWords_ == null){¤			String key = "DocCardIndex.OgvStopWords";¤			¤			String value = (String)ContainerManager.Factory.get().getBandanaManager().getValue(new ConfluenceBandanaContext(spaceKey_), key);¤			if(StringUtils.isNotEmpty(value)){¤				ogvStopWords_ = value;¤			}else{¤				ogvStopWords_ = "рф, росс, российск, федерац, федеральн, министерств, комитет, ссср, государствен, москв, служб, суд";¤			}¤		}¤		return ogvStopWords_;¤	}¤	public Map<String, String> synMap_ = null;¤	¤	private static TrieTree tt_ = null;¤	¤	¤	public static void clearTreeTT(){¤		tt_ = null;¤	}¤	¤	public static class RecognizeResult {¤		public int firstToken = 0;¤		public int lastToken = 0;¤		public List<List<String>> wordforms = new ArrayList<List<String>>();¤	}¤	¤	public static class TrieTreeHelper {¤		¤		public static String key = "HD";¤		¤		static public TrieTree initByDBData () throws Exception {¤			TrieTree ret = new TrieTree();¤			List<WordSynonymDAO> wordSynonyms = SynonymsManager.Factory.make(key).getAllWordSynonyms(spaceKey_); ¤			for(WordSynonymDAO wordSynonym : wordSynonyms){¤				List<String> word = makeAnalysedTokens (wordSynonym.getWord());¤				List<String> synonym = makeAnalysedTokens (wordSynonym.getSynonym());¤				ret.put(word, synonym);¤			}¤			return ret;¤		}¤¤		static public TrieTree initByVladFile (final String file, final String charset) throws Exception {¤			TrieTree ret = new TrieTree();¤			BufferedReader in = new BufferedReader(new InputStreamReader(new FileInputStream(file), charset/*"Cp866"*/));¤			String str;¤			List<String> key = new ArrayList<String>();¤			while ((str = in.readLine()) != null) {¤				List<String> val = makeAnalysedTokens (str);¤				if (str.startsWith("        ")) {¤					ret.put(key, val);¤				} else {¤					key = val;¤				}¤			}¤			in.close();¤			return ret;¤		}¤¤		¤		static private List<String> makeAnalysedTokens (String s) throws Exception {¤			TokenStream ts = new GarRussianAnalyzer().tokenStream("", new StringReader(s));¤			Token token = null;¤			List<String> ret = new ArrayList<String>();¤			while((token = ts.next()) != null){¤				ret.add(token.term());¤			}	¤			return ret;¤		}¤		¤		static public String makeTokenStreamWithSynonyms (final TrieTree tt, final String s) throws Exception {¤			List<String> inList = makeAnalysedTokens(s);¤			Map<Integer, DocCardAttributesAnalyzer.RecognizeResult> rrList = tt.recognizeTokenStream (inList);¤¤			StringBuilder ret = new StringBuilder();¤			for (int i = 0; i < inList.size(); i++) {¤				DocCardAttributesAnalyzer.RecognizeResult rr = rrList.get(i);¤				if (rr != null) {¤					i = rr.lastToken;¤					for (List<String> wfs : rr.wordforms) {¤						for (String wf : wfs) {¤							ret.append(wf).append(" ");¤						}¤					}¤				} else {¤					ret.append(inList.get(i)).append(" ");¤				}¤			}¤			return ret.toString().trim();¤		}¤	}¤	¤	public static class TrieTree {¤		Map<String, Integer> wordformToWordIndex_ = new TreeMap<String, Integer>();¤		List<Set<String>> wordforms_ = new ArrayList<Set<String>>();¤		¤		public void put(List<String> key, List<String> val) {¤			String k = toStr(key);¤			Integer i = wordformToWordIndex_.get(k);¤			if (i == null) {¤				Set<String> forms = new TreeSet<String>();¤				forms.add(k);¤				wordforms_.add(forms);¤				i = wordforms_.size() - 1;¤				wordformToWordIndex_.put(k, i);¤			}¤			¤			String v = toStr(val);¤			Integer valIndex = wordformToWordIndex_.get(v);¤			if (null == wordformToWordIndex_.get(v)) {¤				wordformToWordIndex_.put(v, i);¤				wordforms_.get(i).add(v);¤			} else {¤				if (i != valIndex) {¤					Set<String> all = wordforms_.get(valIndex);¤					for (String str : all) {¤						wordformToWordIndex_.put(str, i);¤						¤						if (!wordforms_.get(i).contains(str)) {¤							wordforms_.get(i).add(str);¤						}¤					}¤					wordforms_.get(valIndex).clear();¤				}¤			}¤		}¤		¤		private List<List<String>> get(List<String> key) {¤			String k = toStr(key);¤			Integer i = wordformToWordIndex_.get(k);¤			if (i == null) {¤				return new ArrayList<List<String>>();¤			}¤			List<List<String>> ret = new ArrayList<List<String>>();¤			for (String s : wordforms_.get(i)) {¤				ret.add(toList(s));¤			}¤			return ret;¤		}¤		¤		private String toStr(List<String> list) {¤			StringBuilder sb = new StringBuilder();¤			for (String s : list) {¤				sb.append(s).append(" ");¤			}¤			return sb.toString().trim();¤		}¤		¤		private List<String> toList(String s) {¤			return (s != null) ? Arrays.asList(s): new ArrayList<String>();¤		}¤		¤		public Map<Integer, RecognizeResult> recognizeTokenStream (List<String> stream) {¤			Map<Integer, RecognizeResult> ret = new HashMap<Integer, RecognizeResult> ();¤			¤			for (int i = 0; i < stream.size(); i++) {¤				List<String> lastKey = new ArrayList<String>();¤				RecognizeResult rr = null;¤				int j;¤				for (j = i; j < stream.size(); j++) {¤					String s = stream.get(j);¤					List<String> key = new ArrayList<String>(lastKey);¤					key.add(s);¤					List<List<String>> val = get(key);¤					if (CollectionUtils.isNotEmpty(val)) {¤						if (rr == null) {¤							rr = new RecognizeResult();¤							rr.firstToken = i;¤						}¤						rr.lastToken = j;¤						rr.wordforms = val;¤					} else {¤						if (rr != null) {¤							ret.put(rr.firstToken, rr);¤							i = j - 1;¤							break;¤						}¤					}					¤					lastKey.add(s);¤				}¤				if (j == stream.size() && rr != null) {¤					ret.put(rr.firstToken, rr);¤				}¤				¤			}¤			return ret;¤		}		¤		¤	}¤	¤¤	public void addStopSet(Set additionalStopSet){¤		if(stopSet != null){¤			stopSet.addAll(additionalStopSet);¤		}¤	}	¤	//#UC END# *4FA11F40020A_CUSTOM_METHODS_AND_DATA*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"WikiPageID (wiki)"
		    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/DocCardAttributesAnalyzer|4FA11F40020A
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (wiki)"
		    value      	"wiki"))
	    quid       	"4FA11F40020A"
	    documentation 	"карточный анализатор слов для поиска"
	    stereotype 	"SimpleClass"
	    superclasses 	(list inheritance_relationship_list
		(object Inheritance_Relationship
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"1335959376652968"))
		    quid       	"4FA11F50028B"
		    supplier   	"Logical View::MDProcess::ConfluencePlugins::IndexingSupport::GarRussianAnalyzer"
		    quidu      	"4A714AA4011E"))
	    language   	"MDA Generator")
	(object Class "ImportSynonymsFromFileToDatabase"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"1336803423969569")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Need assign op"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Need copy ctor"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Refcount"
		    value      	"none")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"debug log"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"finished"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"local supervisor"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"need UC"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"need dctor"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"need objcounter"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"no hands"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"non virtual base"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"singleton"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Factory auto reg"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Factory default impl"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Servant Pool"
		    value      	"none")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"factory priority"
		    value      	"0")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"force usage"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/DocCardChange/DocCardSupport/ImportSynonymsFromFileToDatabase.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4FAE005F03C8_CUSTOM_IMPORT*"
		    value      	"//#UC START# *4FAE005F03C8_CUSTOM_IMPORT*¤import java.io.BufferedReader;¤import java.io.FileInputStream;¤import java.io.InputStreamReader;¤¤import ru.garant.MDProcess.DocCardChange.DocCardChangeDAO.WordSynonymDAO;¤//#UC END# *4FAE005F03C8_CUSTOM_IMPORT*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4FAE005F03C8_CUSTOM_CLASS_DEFINITION*"
		    value      	"//#UC START# *4FAE005F03C8_CUSTOM_CLASS_DEFINITION*¤//#UC END# *4FAE005F03C8_CUSTOM_CLASS_DEFINITION*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4FAE005F03C8_ACTION_NAME*"
		    value      	(value Text 
|//#UC START# *4FAE005F03C8_ACTION_NAME*¤		return new String (getClass ().getName ());¤		//#UC END# *4FAE005F03C8_ACTION_NAME*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4FAE005F03C8_CUSTOM_METHODS_AND_DATA*"
		    value      	(value Text 
|//#UC START# *4FAE005F03C8_CUSTOM_METHODS_AND_DATA*¤	public void doImport(){¤		String fileName = "J:\\support\\unittest\\synm.txt";¤		BufferedReader in = null;¤		try {¤			in = new BufferedReader(new InputStreamReader(new FileInputStream(fileName), "Cp866"));¤			String str;¤			String word = null;¤			¤			while ((str = in.readLine()) != null) {¤				if (str.startsWith("        ")) {¤					str = str.trim();¤					saveSynonym(word, str);¤				} else {¤					str = str.trim();¤					word = str;¤				}¤	¤			}¤			in.close();¤		} catch (Exception e) {¤			Logs.LOG_SEX(e);¤		}¤	}¤	¤	public void saveSynonym(String word, String wordSynonym){¤		WordSynonymDAO synonym = new WordSynonymDAO();¤		synonym.setWord(word);¤		synonym.setSynonym(wordSynonym);¤		WordSynonymDAO.save(synonym);¤	}¤	¤	//http://localhost:8080/ru/garant/MDProcess/DocCardChange/DocCardSupport/DocCardXPlugin/DocCardXPackage/importsynonymsfromfiletodatabase.action¤	//#UC END# *4FAE005F03C8_CUSTOM_METHODS_AND_DATA*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"WikiPageID (wiki)"
		    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/ImportSynonymsFromFileToDatabase|4FAE005F03C8
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (wiki)"
		    value      	"wiki"))
	    quid       	"4FAE005F03C8"
	    documentation 	"заливка из файла в базу новые синонимы"
	    stereotype 	"KActionPlugin"
	    superclasses 	(list inheritance_relationship_list
		(object Inheritance_Relationship
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"1336805966438016"))
		    quid       	"4FAE0A4E01B3"
		    supplier   	"Logical View::external::JavaConfluence::ConfluenceClassPack::ConfluenceActionSupport"
		    quidu      	"465ADCCA036B"))
	    language   	"MDA Generator")
	(object Class "DocCardLuceneSearchServlet"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"1337256184846153")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Factory auto reg"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Factory default impl"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Servant Pool"
		    value      	"none")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"debug log"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"factory priority"
		    value      	"0")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"local supervisor"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"need UC"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"singleton"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"url-pattern"
		    value      	"/doccardlucenesearchservlet")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/DocCardChange/DocCardSupport/DocCardLuceneSearchServlet.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4FB4E8F8034D_CUSTOM_IMPORT*"
		    value      	"//#UC START# *4FB4E8F8034D_CUSTOM_IMPORT*¤import ru.garant.MDProcess.ConfluencePlugins.CommonVelocityContext.GlobalHelper;¤import com.atlassian.confluence.renderer.radeox.macros.MacroUtils;¤import com.atlassian.confluence.util.velocity.VelocityUtils;¤import com.atlassian.gzipfilter.org.apache.commons.lang.StringUtils;¤¤import java.io.IOException;¤import java.util.HashMap;¤import java.util.Map;¤//#UC END# *4FB4E8F8034D_CUSTOM_IMPORT*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4FB4E8F8034D_CUSTOM_CLASS_DEFINITION*"
		    value      	"//#UC START# *4FB4E8F8034D_CUSTOM_CLASS_DEFINITION*¤//#UC END# *4FB4E8F8034D_CUSTOM_CLASS_DEFINITION*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4FB4E8F8034D_INIT_IMPLEMETATION*"
		    value      	(value Text 
|//#UC START# *4FB4E8F8034D_INIT_IMPLEMETATION*¤		//#UC END# *4FB4E8F8034D_INIT_IMPLEMETATION*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4FB4E8F8034D_SERVICE_IMPLEMETATION*"
		    value      	(value Text 
|//#UC START# *4FB4E8F8034D_SERVICE_IMPLEMETATION*¤		Logs.LOG_W("DocCardLuceneSearchServlet::start");¤		String type = request.getParameter("type");¤		String ogv = request.getParameter("ogv");¤		String number = request.getParameter("number");¤		String date = request.getParameter("date");¤		String countString = request.getParameter("count");¤		String spaceKey = request.getParameter("spaceKey");¤		if(StringUtils.isEmpty(spaceKey)){¤			spaceKey = "DPOUVS";¤		}¤		int count = 20;¤		if(StringUtils.isNotEmpty(countString)){¤			count = Integer.parseInt(countString);¤		}¤		String responseString = null;¤		if(StringUtils.isEmpty(type) && StringUtils.isEmpty(ogv) && StringUtils.isEmpty(number) && StringUtils.isEmpty(date)){¤			responseString = renderTemplate(new HashMap<String, Object>());¤		}else{¤			DocCardLuceneSearchIndex index = new DocCardLuceneSearchIndex();¤			if(StringUtils.isNotEmpty(type)){¤				index.setType(type);¤			}¤			if(StringUtils.isNotEmpty(ogv)){¤				index.setIssuer(ogv);¤			}¤			if(StringUtils.isNotEmpty(number)){¤				index.setNumbers(number);¤			}¤			if(StringUtils.isNotEmpty(date)){¤				index.setDate(date);¤			}¤			index.setIsMDP(null);¤			index.setCountResults(count);¤			try {¤				index.setVelocityEngine(VelocityUtils.getVelocityEngine());¤			} catch (Exception e) {¤				Logs.LOG_SEX(e);¤			}¤¤			index.doSearch(spaceKey);¤			String repeats = index.getResponseContent();¤			responseString = renderVelocityContent(type, ogv, number, date, repeats, count);¤		}¤        response.getWriter().write(responseString);¤        response.getWriter().flush();¤		Logs.LOG_W("DocCardLuceneSearchServlet::end");¤		//#UC END# *4FB4E8F8034D_SERVICE_IMPLEMETATION*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4FB4E8F8034D_CUSTOM_METHODS_AND_DATA*"
		    value      	(value Text 
|//#UC START# *4FB4E8F8034D_CUSTOM_METHODS_AND_DATA*¤	public String renderVelocityContent(String type, String ogv, String number, String date, String repeats, int count){¤		Map<String, Object> velocityContext = MacroUtils.defaultVelocityContext();¤		velocityContext.put("type", type);¤		velocityContext.put("ogv", ogv);¤		velocityContext.put("number", number);¤		velocityContext.put("date", date);¤		velocityContext.put("repeats", repeats);¤		velocityContext.put("count", count);¤		return renderTemplate(velocityContext);¤	}¤	¤	public String renderTemplate(Map<String, Object> velocityContext){¤		GlobalHelper gh = new GlobalHelper();¤		velocityContext.put("garHelper", gh);¤		return VelocityUtils.getRenderedTemplate("/DocCardChange/DocCardView/displaysearchform.vm", velocityContext);¤	}¤	//http://localhost:8080/plugins/servlet/doccardlucenesearchservlet¤	//#UC END# *4FB4E8F8034D_CUSTOM_METHODS_AND_DATA*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"WikiPageID (wiki)"
		    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/DocCardLuceneSearchServlet|4FB4E8F8034D
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (wiki)"
		    value      	"wiki"))
	    quid       	"4FB4E8F8034D"
	    documentation 	"сервлет поиска в люцене карточек"
	    stereotype 	"KServletPlugin"
	    language   	"MDA Generator")
	(object Class "DocCardLuceneReIndexJob"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"1337336117265838")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Factory auto reg"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Factory default impl"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Servant Pool"
		    value      	"none")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"cron-expression"
		    value      	"0 0/1 * * * ?")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"debug log"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"factory priority"
		    value      	"0")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"local supervisor"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"need UC"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"repeated"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"singleton"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/DocCardChange/DocCardSupport/DocCardLuceneReIndexJob.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4FB621350108_CUSTOM_IMPORT*"
		    value      	"//#UC START# *4FB621350108_CUSTOM_IMPORT*¤import java.util.Iterator;¤import java.util.List;¤import ru.garant.shared.ConfluenceCore.ActionSupport.ActionContextThreadLocalFactory;¤import com.atlassian.confluence.pages.Page;¤import com.atlassian.confluence.spaces.Space;¤¤import ru.garant.MDProcess.DocCardChange.DocCardChangeDAO.DocCardIndexDAO;¤import ru.garant.MDProcess.DocCardChange.DocCardCommon.DocCardIndexManager;¤//#UC END# *4FB621350108_CUSTOM_IMPORT*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4FB621350108_CUSTOM_CLASS_DEFINITION*"
		    value      	"//#UC START# *4FB621350108_CUSTOM_CLASS_DEFINITION*¤//#UC END# *4FB621350108_CUSTOM_CLASS_DEFINITION*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4FB621350108_DO_EXECUTE_IMPLEMETATION*"
		    value      	(value Text 
|//#UC START# *4FB621350108_DO_EXECUTE_IMPLEMETATION*¤		super.doExecute(jec);¤		//#UC END# *4FB621350108_DO_EXECUTE_IMPLEMETATION*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4FB621350108_CUSTOM_METHODS_AND_DATA*"
		    value      	(value Text 
|//#UC START# *4FB621350108_CUSTOM_METHODS_AND_DATA*¤	public DocCardLuceneReIndexJob() {¤	}¤¤	@Override¤	protected void executeJob() {¤		List<Space> spaces = DpoUvsHelper.getSpacesWhichHasGardocSettings();¤		for(Space space : spaces){¤			Logs.LOG_D("DocCardLuceneReIndexJob :: start :: spaceKey=" + space.getKey());¤			List<DocCardIndexDAO> docCardIndexes = DocCardIndexManager.Factory.get().getAllDocCardIndexDao();¤			removeDeletedDocCardAddAndChangeIndexes(docCardIndexes, space.getKey());¤			DocCardLuceneReIndex reindex = new DocCardLuceneReIndex(); ¤			Logs.LOG_D("DocCardLuceneReIndexJob :: spaceKey=" + space.getKey() + " :: count indexes = " + docCardIndexes.size());¤			for(DocCardIndexDAO docCardIndex : docCardIndexes){¤				Page page = ContainerManager.Factory.get().getPageManager().getPage(docCardIndex.getDocCardId());¤				if(page.getSpaceKey().equals(space.getKey())){¤					Logs.LOG_D("DocCardLuceneReIndexJob :: spaceKey=" + space.getKey() + " :: event = " + docCardIndex.getEvent() + " id = " + docCardIndex.getDocCardId());¤					try{¤						reindex.doUpdateIndex(docCardIndex.getDocCardId(), docCardIndex.getEvent(), space.getKey());¤						DocCardIndexDAO.remove(docCardIndex);¤					}catch(Exception ex){¤						Logs.LOG_SEX(ex);¤					}¤				}¤			}¤			Logs.LOG_D("DocCardLuceneReIndexJob :: end :: spaceKey=" + space.getKey());¤		}¤	}¤	¤	protected boolean isNeedWriteTransaction() {¤		return true;¤	}¤	¤	public void removeDeletedDocCardAddAndChangeIndexes(List<DocCardIndexDAO> docCardIndexes, String spaceKey){¤		Iterator<DocCardIndexDAO> iter = docCardIndexes.iterator();¤		while(iter.hasNext()){¤			DocCardIndexDAO docCardIndex = iter.next();¤			if(docCardIndex.getEvent() != DocCardLuceneReIndex.DOC_CARD_REMOVE_EVENT){¤				Page page = ContainerManager.Factory.get().getPageManager().getPage(docCardIndex.getDocCardId());¤				if(page.isDeleted() && page.getSpaceKey().equals(spaceKey)){¤					DocCardIndexDAO.remove(docCardIndex);¤					iter.remove();¤					¤				}¤			}	¤		}¤	}¤	¤	//#UC END# *4FB621350108_CUSTOM_METHODS_AND_DATA*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"WikiPageID (wiki)"
		    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/DocCardLuceneReIndexJob|4FB621350108
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (wiki)"
		    value      	"wiki"))
	    quid       	"4FB621350108"
	    documentation 	"запускает переиндексацию карточек"
	    stereotype 	"KJobPlugin"
	    superclasses 	(list inheritance_relationship_list
		(object Inheritance_Relationship
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"1337600293727337"))
		    quid       	"4FBA292502D6"
		    supplier   	"Logical View::MDProcess::DocCardChange::DocCardSupport::GarDocAbstractJob"
		    quidu      	"53E4BF9000E2"))
	    language   	"MDA Generator")
	(object Class "SendMailWithNewImagesInTambov"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"1343111778416004")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Factory auto reg"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Factory default impl"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Servant Pool"
		    value      	"none")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"cron-expression"
		    value      	"0 0/30 * * * ?")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"debug log"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"factory priority"
		    value      	"0")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"local supervisor"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"need UC"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"repeated"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"singleton"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/DocCardChange/DocCardSupport/SendMailWithNewImagesInTambov.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*500E426201A0_CUSTOM_IMPORT*"
		    value      	"//#UC START# *500E426201A0_CUSTOM_IMPORT*¤import net.sf.hibernate.HibernateException;¤¤import ru.garant.shared.Core.Logs;¤import ru.garant.shared.ConfluenceCore.ActionSupport.ActionContextThreadLocalFactory;¤import ru.garant.shared.ConfluenceCore.Helpers.ContainerManager;¤import ru.garant.MDProcess.ArchiGate.DocCardRemote.IllegalStateExceptionRemote;¤import ru.garant.MDProcess.ArchiGate.DocCardRemoteImpl.SearcherImpl;¤import ru.garant.MDProcess.ArchiGate.DocCardRemoteImpl.SearcherProcessor;¤import ru.garant.MDProcess.ArchiGate.DocCardRemoteImpl.UtilsImpl;¤import ru.garant.MDProcess.ConfluencePlugins.EmailNotification.EmailGateway;¤import ru.garant.MDProcess.ArchiGate.DocCardRemote.Gardoc;¤import ru.garant.MDProcess.DocCardChange.DocCardChangeDAO.OGVLinksDAO;¤import ru.garant.MDProcess.DocCardChange.DocCardChangeDAO.Partner;¤import ru.garant.MDProcess.DocCardChange.DocCardChangeDAO.PartnerReceiverMail;¤import ru.garant.MDProcess.DocCardChange.DocCardCommon.OGVLinksManager;¤import ru.garant.MDProcess.DocCardChange.DocCardCommon.PartnerManager;¤import ru.garant.MDProcess.DocCardChange.DocCardCommonImpl.CachedPartnerManager;¤import ru.garant.MDProcess.DocCardChange.EntitiesImpl.UVSQueryManagerImpl;¤¤import java.io.ByteArrayInputStream;¤import java.io.ByteArrayOutputStream;¤import java.io.IOException;¤import java.io.InputStream;¤import java.io.OutputStream;¤import java.text.SimpleDateFormat;¤import java.util.ArrayList;¤import java.util.Arrays;¤import java.util.Calendar;¤import java.util.Collections;¤import java.util.Date;¤import java.util.HashMap;¤import java.util.LinkedList;¤import java.util.List;¤import java.util.Map;¤¤import org.apache.commons.io.IOUtils;¤¤import javax.activation.DataHandler;¤import javax.activation.MimeType;¤import javax.mail.BodyPart;¤import javax.mail.MessagingException;¤import javax.mail.internet.InternetHeaders;¤import javax.mail.internet.MimeBodyPart;¤import javax.mail.internet.MimeMultipart;¤import javax.mail.internet.MimeUtility;¤import javax.mail.util.ByteArrayDataSource;¤¤import ru.garant.MDProcess.ArchiGate.DocCardRemote.*;¤import ru.garant.MDProcess.ArchiGate.ImagesImpl.DocCardRemoteHelper;¤¤import com.atlassian.confluence.pages.Attachment;¤import com.atlassian.confluence.pages.Page;¤import com.atlassian.confluence.setup.bandana.ConfluenceBandanaContext;¤import com.atlassian.gzipfilter.org.apache.commons.lang.StringUtils;¤import com.atlassian.mail.Email;¤¤//#UC END# *500E426201A0_CUSTOM_IMPORT*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*500E426201A0_CUSTOM_CLASS_DEFINITION*"
		    value      	"//#UC START# *500E426201A0_CUSTOM_CLASS_DEFINITION*¤//#UC END# *500E426201A0_CUSTOM_CLASS_DEFINITION*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*500E426201A0_DO_EXECUTE_IMPLEMETATION*"
		    value      	(value Text 
|//#UC START# *500E426201A0_DO_EXECUTE_IMPLEMETATION*¤		super.doExecute(jec);¤		//#UC END# *500E426201A0_DO_EXECUTE_IMPLEMETATION*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*500E426201A0_CUSTOM_METHODS_AND_DATA*"
		    value      	(value Text 
|//#UC START# *500E426201A0_CUSTOM_METHODS_AND_DATA*¤	@Override¤	protected void executeJob() {¤		try {¤			processTimeSheduledSendMailWithNewImagesInTambov();¤		} catch (Exception e) {¤			Logs.LOG_SEX(e);¤			throw new IllegalStateException (e);¤		}					¤	}¤¤	@Override¤	protected boolean isNeedWriteTransaction() {¤		return true;¤	}¤	¤	public void processTimeSheduledSendMailWithNewImagesImpl(Partner partner, final SearcherProcessor processor) throws IllegalStateExceptionRemote {¤		long partnerId = partner.getId();¤		Logs.LOG_D("SendMailWithNewImagesInTambov :: processTimeSheduledSendMailWithNewImagesImpl : start partnerId=" + partnerId);¤		if(partner.getReceivers().size() == 0){¤			return;¤		}¤		for (PartnerReceiverMail receiver : partner.getReceivers()) {¤			long beginTime = getBeginTimestamp(receiver.getDateOfSendingEmailWithNewImages(), partner.getId(), receiver.getId());¤			Logs.LOG_D(¤					"UVSQueryManagerIpl :: processTimeSheduledSendMailWithNewImagesImpl : partnerId=" + partnerId + " receiverId=" + receiver.getId() + " begin date : "¤					+ new SimpleDateFormat(UVSQueryManagerImpl.DATE_OF_SENDING_EMAIL_JOB_FORMAT).format(SearcherImpl.fromTotalSecondFromEpoch(beginTime))¤				);¤			Gardoc[] garDocs = processor.get_recently_created_since(beginTime);¤			if(garDocs.length > 0) {¤				List<Gardoc> sendout = new ArrayList<Gardoc>();¤				for (Gardoc gardoc : garDocs) {¤					if (isSendMail(receiver, partner, gardoc)) {¤						sendout.add(gardoc);¤					}¤				}¤				¤				if (sendout.size() > 0) {¤					SendMail.execucte(sendout.toArray(new Gardoc[0]), receiver.getReceivers());¤					¤					long timestamp = garDocs[garDocs.length-1].timestamp;¤					Date date = SearcherImpl.fromTotalSecondFromEpoch(timestamp);¤					¤					Calendar cal = Calendar.getInstance();¤					cal.setTimeInMillis(date.getTime());¤					Date realDate = new Date();¤					Calendar calRealDate = Calendar.getInstance();¤					calRealDate.setTimeInMillis(realDate.getTime());¤					¤					if(cal.get(Calendar.YEAR) > calRealDate.get(Calendar.YEAR)){¤						sendMailForDevelopersAboutBadValueInGardoc(beginTime, partnerId, garDocs[garDocs.length-1].confluence_id);¤					}¤					¤					Logs.LOG_D("SendMailWithNewImagesInTambov :: processTimeSheduledSendMailWithNewImagesImpl : partnerId=" + partnerId + " save in Bandana lastDocCardTimestamp =" + timestamp);¤					//ContainerManager.Factory.get ().getBandanaManager ().setValue (ConfluenceBandanaContext.GLOBAL_CONTEXT, dateOfSendingEmailWithNewImagesKey, timestamp);¤					receiver.setDateOfSendingEmailWithNewImages(timestamp);¤					Logs.LOG_D("SendMailWithNewImagesInTambov :: processTimeSheduledSendMailWithNewImagesImpl : partnerId=" + partnerId + " date lastDocCard=" + new SimpleDateFormat("yyyy-MM-dd HH:mm:ss").format(date));					¤					¤				} else {¤					saveVerifyingDate(receiver);¤				}¤			}else {¤				saveVerifyingDate(receiver);¤			}¤		}¤		Logs.LOG_D("SendMailWithNewImagesInTambov :: processTimeSheduledSendMailWithNewImagesImpl : end partnerId=" + partnerId);¤	}¤	¤	public static long getNextTime(long initTime) throws IllegalStateExceptionRemote{¤		return new UtilsImpl().update_old_last_created_time(initTime);¤	}¤	¤	public static void saveVerifyingDate(PartnerReceiverMail receiver)throws IllegalStateExceptionRemote{¤		receiver.setDateOfSendingEmailWithNewImages(getNextTime(receiver.getDateOfSendingEmailWithNewImages()));¤	}¤	¤	public Gardoc[] listToArray(List<Gardoc> gardocList){¤		Gardoc[] gds = new Gardoc[gardocList.size()];¤		int i = 0;¤		for(Gardoc gardoc : gardocList){¤			gds[i] = gardoc;¤			i++;¤		}¤		return gds;¤	}¤	¤	public Map<PartnerReceiverMail, List<Gardoc>> getPartnerReceiverMailAndGardocsList(Gardoc[] garDocs, Partner partner){¤		Map<PartnerReceiverMail, List<Gardoc>> messagesPartnerReceiverMailAndGardocsList = new HashMap<PartnerReceiverMail, List<Gardoc>>();¤¤		for(int i = 0; i < garDocs.length; i++){¤			for(PartnerReceiverMail receiver : partner.getReceivers()){¤				if(isSendMail(receiver, partner, garDocs[i])){¤					List<Gardoc> gardocsList = messagesPartnerReceiverMailAndGardocsList.get(receiver);¤					if(gardocsList == null){¤						gardocsList = new ArrayList<Gardoc>();¤					}¤					gardocsList.add(garDocs[i]);¤					messagesPartnerReceiverMailAndGardocsList.put(receiver, gardocsList);¤				}¤			}¤		}¤		return messagesPartnerReceiverMailAndGardocsList;¤	}¤	¤	public  boolean isSendMail(PartnerReceiverMail receiver, Partner p, Gardoc gardoc){		¤		final List<Page> ai = new ArrayList<Page>();¤		if (gardoc.ogv_list != null && gardoc.ogv_list.length > 0) {¤			String spaceKey = ContainerManager.Factory.get().getSpaceManager().getSpaceFromPageId(gardoc.confluence_id);¤			for (String title : gardoc.ogv_list) {¤				ai.add(ContainerManager.Factory.get().getPageManager().getPage(title, spaceKey));¤			}¤		}¤		¤		return new CachedPartnerManager(PartnerManager.Factory.get()).runRulesScriptForPartnerAndReciever(gardoc.confluence_id, p, receiver, Arrays.asList(gardoc.blocks), ai);¤	}¤¤	public Long getBeginTimestamp(Long beginTime, Long partnerId, Long recieverId){¤ 		if(beginTime == null){¤			Logs.LOG_D("SendMailWithNewImagesInTambov :: processTimeSheduledSendMailWithNewImagesImpl : partnerId=" + partnerId + " BandanaValue timestamp null!");¤			beginTime = DocCardRemoteHelper.toTotalSecondFromEpoch(new Date());¤			¤			//иначе никогда не начнет отправляться, т.к. все документы меньше текущего времени¤			long timestamp = beginTime;¤			Logs.LOG_D("SendMailWithNewImagesInTambov :: processTimeSheduledSendMailWithNewImagesImpl : partnerId=" + partnerId + " save in Bandana lastDocCardTimestamp =" + timestamp);¤//			ContainerManager.Factory.get ().getBandanaManager ().setValue (ConfluenceBandanaContext.GLOBAL_CONTEXT, dateOfSendingEmailWithNewImagesKey, timestamp);¤//			partner.getReceivers().setDateOfSendingEmailWithNewImages(timestamp);¤//			Partner.saveOrUpdate(partner);¤		}else{¤			Date date = SearcherImpl.fromTotalSecondFromEpoch(beginTime);¤			Calendar cal = Calendar.getInstance();¤			cal.setTimeInMillis(date.getTime());¤			Date realDate = new Date();¤			Calendar calRealDate = Calendar.getInstance();¤			calRealDate.setTimeInMillis(realDate.getTime());¤			¤			if(cal.get(Calendar.YEAR) > calRealDate.get(Calendar.YEAR)){¤				sendMailForDevelopersAboutBadValueInBandana(beginTime, partnerId);¤//				return;¤			}¤		}¤ 		return beginTime;¤	}¤	¤	public void sendMailForDevelopersAboutBadValueInBandana(Long beginTime, long partnerId){¤		String subj = "Дата стала больше текущей в почтовом уведомлении для партнера c id=" + partnerId; ¤		String body = "Для партнера c id=" + partnerId + " в SendMailWithNewImagesInTambov в Bandana дата стала больше текущей timestamp=" + beginTime;¤		EmailGateway eg = EmailGateway.Factory.create();¤		Email email = eg.createEmail(subj, body.toString(), "ses@garant.ru,elenau@garant.ru");¤		eg.queueEmail(email);¤		eg.send();¤	}¤	¤	public void sendMailForDevelopersAboutBadValueInGardoc(Long beginTime, long partnerId, long docCardId){¤		String subj = "Дата стала больше текущей в почтовом уведомлении для партнера c id=" + partnerId; ¤		String body = "Для партнера c id=" + partnerId + " в SendMailWithNewImagesInTambov в карточке с id=" + docCardId + " дата стала больше текущей timestamp=" + beginTime;¤		EmailGateway eg = EmailGateway.Factory.create();¤		Email email = eg.createEmail(subj, body.toString(), "ses@garant.ru,elenau@garant.ru");¤		eg.queueEmail(email);¤		eg.send();¤	}¤¤	public void processTimeSheduledSendMailWithNewImagesInTambov() throws IllegalStateExceptionRemote {¤		List<Partner> partners = new ArrayList<Partner>();¤		try {¤			partners = (List<Partner>)ContainerManager.Factory.get().getSession().createQuery("from Partner").list();¤		} catch (HibernateException e) {¤			Logs.LOG_SEX(e);¤		}¤		¤		for (Partner partner : partners) {¤			final SearcherProcessor processor = SearcherProcessor.makeForSendByEmail(partner.getId());¤			processTimeSheduledSendMailWithNewImagesImpl(partner, processor);¤		}		¤	}¤	¤	public static Date getLastSendEmailJobExecution (String initialDate, String savedInBandanaName) {¤		Date ret = (Date)ru.garant.shared.ConfluenceCore.Helpers.ContainerManager.Factory.get().getBandanaManager().getValue(¤			new ConfluenceBandanaContext ()¤			, savedInBandanaName¤		);¤		if (ret == null) {¤			try {¤				return new SimpleDateFormat("yyyy-MM-dd HH:mm:ss").parse(initialDate);¤			} catch (Exception e) {	¤				Logs.LOG_SEX(e);¤			}¤		}¤		return ret;¤	}¤	¤	public static class SendMail {¤		public static void execucte(final Gardoc[] gardocs, final String emails){¤			StringBuilder body = getEmailBodyForTambov(gardocs);¤			sendEmailInTambov (body, gardocs, emails);¤		}¤		¤		public static Email addImages(Email email, final Gardoc[] gardocs){¤			int i;¤			MimeMultipart multipart = new MimeMultipart();¤			for(Gardoc gd : gardocs) {¤				i = 1;¤				try {¤					for(Image image : gd.images){¤						BodyPart bodyPart = null;¤						if(image.type.equals(ImageType.giTIF)){¤							bodyPart = createFilePartForTiff(image, gd.topic + "_" + i + ".tif");¤						} else if (image.type.equals(ImageType.giDOC)) {¤							bodyPart = createFilePart(image, gd.topic + "_" + i + ".doc");¤						} else if (image.type.equals(ImageType.giRTF)) {¤							bodyPart = createFilePart(image, gd.topic + "_" + i + ".rtf");¤						} else if (image.type.equals(ImageType.giNSR)) {¤							bodyPart = createFilePart(image, gd.topic + "_" + i + ".nsr");¤						} else {¤							bodyPart = createFilePart(image, gd.topic + "_" + i + ".zip");¤						}¤						i++;¤						multipart.addBodyPart(bodyPart);¤					}¤				} catch (Exception e) {¤					Logs.LOG_SEX(e);¤					throw new IllegalArgumentException(e);¤				}¤			}¤			email.setMultipart(multipart);¤			return email;¤		}¤		¤		public static BodyPart createFilePart (Image image, String title) throws MessagingException, IOException {¤			ByteArrayOutputStream buff = new ByteArrayOutputStream( );¤			OutputStream out = MimeUtility.encode(buff, "base64");¤			out.write(image.data);¤			out.flush();¤			InternetHeaders headers = new  InternetHeaders();¤			headers.addHeader("Content-Type", "application/zip");¤			headers.addHeader("Content-Transfer-Encoding", "base64");¤			BodyPart filePart = new MimeBodyPart(headers, buff.toByteArray());¤			filePart.setFileName(MimeUtility.encodeText(title));¤			return filePart;¤		}¤¤		public static BodyPart createFilePartForTiff (Image image, String title) throws MessagingException, IOException {¤			ByteArrayOutputStream buff = new ByteArrayOutputStream( );¤			OutputStream out = MimeUtility.encode(buff, "base64");¤			out.write(image.data);¤			out.flush();¤			InternetHeaders headers = new  InternetHeaders();¤			headers.addHeader("Content-Type", "application/tif");¤			headers.addHeader("Content-Transfer-Encoding", "base64");¤			BodyPart filePart = new MimeBodyPart(headers, buff.toByteArray());¤			filePart.setFileName(MimeUtility.encodeText(title));¤			return filePart;¤		}¤¤		public static void sendEmailInTambov (StringBuilder body, final Gardoc[] gardocs, final String emails) {¤			String subj = "Synchronization MDP";¤			EmailGateway eg = EmailGateway.Factory.create();¤			Email email = eg.createEmail(subj, body.toString(), emails);¤			email = addImages(email, gardocs);¤			eg.queueEmail(email);¤			eg.send();¤		}¤		¤		public static StringBuilder getEmailBodyForTambov(final Gardoc[] gardocs){¤			StringBuilder sb = new StringBuilder();¤			sb.append("Список документов:<br><ol>");¤			for(Gardoc gd : gardocs) {¤				Date initialDate = SearcherImpl.fromTotalSecondFromEpoch(gd.date);¤				String ogvName = gd.ogv_list[0];¤				while(ogvName.contains("\\")){¤					ogvName = ogvName.substring(ogvName.indexOf("\\") + 1);¤				}¤				String type = (gd.type == null)?"":String.valueOf(gd.type);¤				String title = DpoUvsHelper.makeDocCardName(ogvName, gd.number, type, initialDate, gd.title);¤				sb.append("<li>")¤					.append(gd.topic)¤					.append(" " + ((gd.comment == null) ? "" : gd.comment))¤					.append(" " + title)¤					.append("</li>")¤				;¤			}¤			sb.append("</ol><br><br>");¤			return sb;¤		}¤	}¤¤//	public final static String DATE_OF_SENDING_EMAIL_WITH_NEW_IMAGES_FOR_TAMBOV_JOB = "SendMailWithNewImagesInTambov.DateOfSendingEmailWithNewMailInTambovJob";¤//  public final static String DATE_OF_SENDING_EMAIL_WITH_NEW_IMAGES = "SendMailWithNewImagesInTambov.DateOfSendingEmailWithNewImages.";¤	//#UC END# *500E426201A0_CUSTOM_METHODS_AND_DATA*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"WikiPageID (wiki)"
		    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/SendMailWithNewImagesInTambov|500E426201A0
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (wiki)"
		    value      	"wiki"))
	    quid       	"500E426201A0"
	    documentation 	"раз в 30-ть минут запускать джоб, который все новые образы будет складывать в письмо и отправлять в Тамбов"
	    stereotype 	"KJobPlugin"
	    superclasses 	(list inheritance_relationship_list
		(object Inheritance_Relationship
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"1343112026800212"))
		    quid       	"500E435A031F"
		    supplier   	"Logical View::MDProcess::DocCardChange::DocCardSupport::GarDocAbstractJob"
		    quidu      	"53E4BF9000E2"))
	    language   	"MDA Generator")
	(object Class "RemoveMailsOnServerOlderMonthJob"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"1343215653032124")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Factory auto reg"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Factory default impl"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Servant Pool"
		    value      	"none")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"cron-expression"
		    value      	"0 0 5 * * ?")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"debug log"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"factory priority"
		    value      	"0")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"local supervisor"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"need UC"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"repeated"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"singleton"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/DocCardChange/DocCardSupport/RemoveMailsOnServerOlderMonthJob.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*500FD825001E_CUSTOM_IMPORT*"
		    value      	"//#UC START# *500FD825001E_CUSTOM_IMPORT*¤import java.util.ArrayList;¤import java.util.Calendar;¤import java.util.Date;¤import java.util.List;¤¤import ru.garant.shared.Core.Root.NoActiveFactory;¤¤import net.sf.hibernate.HibernateException;¤import net.sf.hibernate.Query;¤¤import com.atlassian.confluence.mail.Mail;¤//#UC END# *500FD825001E_CUSTOM_IMPORT*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*500FD825001E_CUSTOM_CLASS_DEFINITION*"
		    value      	"//#UC START# *500FD825001E_CUSTOM_CLASS_DEFINITION*¤//#UC END# *500FD825001E_CUSTOM_CLASS_DEFINITION*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*500FD825001E_DO_EXECUTE_IMPLEMETATION*"
		    value      	(value Text 
|//#UC START# *500FD825001E_DO_EXECUTE_IMPLEMETATION*¤		super.doExecute(jec);¤		//#UC END# *500FD825001E_DO_EXECUTE_IMPLEMETATION*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*500FD825001E_CUSTOM_METHODS_AND_DATA*"
		    value      	(value Text 
|//#UC START# *500FD825001E_CUSTOM_METHODS_AND_DATA*¤	@Override¤	protected void executeJob() {¤		Logs.LOG_D ("RemoveMailsOnServerOlderMonthJob::executeJob::start");¤		List<Mail> mails = new ArrayList<Mail>();¤		try {¤			mails = getMailsOlderMonth();¤			for(Mail mail : mails){¤				ContainerManager.Factory.get ().getMailContentManager().removeMail(mail);¤			}¤		} catch (Exception e) {¤			Logs.LOG_SEX(e);¤		}¤		Logs.LOG_D ("RemoveMailsOnServerOlderMonthJob::executeJob::end ");¤	}¤¤	@Override¤	protected boolean isNeedWriteTransaction() {¤		return true;¤	}¤¤	public List<Mail> getMailsOlderMonth() throws NoActiveFactory, HibernateException{¤		Date beginDate = getDateOlderMonth(new Date());¤		String sQuery = ¤				"select mail  from Mail as mail where"¤				+ " mail.creationDate < :date";¤		Query q = ContainerManager.Factory.get().getSession().createQuery(sQuery);¤		q.setDate("date", beginDate);¤		return (List<Mail>)q.list();¤	}¤	¤	public Date getDateOlderMonth(Date beginDate){¤		Calendar cal = Calendar.getInstance();¤		cal.setTime(beginDate);¤		int day = cal.get(Calendar.DAY_OF_MONTH) - 14;¤		cal.set(Calendar.DAY_OF_MONTH, day);¤¤		beginDate = cal.getTime();¤		Logs.LOG_I("RemoveMailsOnServerOlderMonthJob::getDateOlderMonth::startDate=" + beginDate);¤		return beginDate;¤	}¤	//#UC END# *500FD825001E_CUSTOM_METHODS_AND_DATA*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"WikiPageID (wiki)"
		    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/RemoveMailsOnServerOlderMonthJob|500FD825001E
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (wiki)"
		    value      	"wiki"))
	    quid       	"500FD825001E"
	    documentation 	"очистка старых писем "
	    stereotype 	"KJobPlugin"
	    superclasses 	(list inheritance_relationship_list
		(object Inheritance_Relationship
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"1343215719843947"))
		    quid       	"500FD8670349"
		    supplier   	"Logical View::MDProcess::DocCardChange::DocCardSupport::GarDocAbstractJob"
		    quidu      	"53E4BF9000E2"))
	    language   	"MDA Generator")
	(object Class "ImportOGVFromFile"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"1343652346629501")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Need assign op"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Need copy ctor"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Refcount"
		    value      	"none")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"debug log"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"finished"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"local supervisor"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"need UC"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"need dctor"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"need objcounter"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"no hands"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"non virtual base"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"singleton"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/DocCardChange/DocCardSupport/ImportOGVFromFile.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*501681FA0275_CUSTOM_IMPORT*"
		    value      	"//#UC START# *501681FA0275_CUSTOM_IMPORT*¤import java.io.BufferedReader;¤import java.io.File;¤import java.io.FileReader;¤import java.util.Date;¤¤import com.atlassian.confluence.pages.Page;¤¤import ru.garant.MDProcess.ConfluencePlugins.CommonVelocityContext.GlobalHelper;¤¤//#UC END# *501681FA0275_CUSTOM_IMPORT*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*501681FA0275_CUSTOM_CLASS_DEFINITION*"
		    value      	"//#UC START# *501681FA0275_CUSTOM_CLASS_DEFINITION*¤//#UC END# *501681FA0275_CUSTOM_CLASS_DEFINITION*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*501681FA0275_CUSTOM_METHODS_AND_DATA*"
		    value      	(value Text 
|//#UC START# *501681FA0275_CUSTOM_METHODS_AND_DATA*¤	public void doImport(String fileName, String spaceKey) throws Exception{¤		java.io.File file = new java.io.File(fileName);¤		java.io.BufferedReader in = new java.io.BufferedReader(new java.io.FileReader(file));¤		String str = null;¤		while ((str = in.readLine()) != null) {¤			String parentTitle = str.substring(str.indexOf("=")+1, str.indexOf("\\"));¤			com.atlassian.confluence.pages.Page parent = ru.garant.shared.ConfluenceCore.Helpers.ContainerManager.Factory.get().getPageManager().getPage(spaceKey, parentTitle);¤			if(parent == null){¤				Logs.LOG_E("ImportOGVFromFile::doImport::parent == null");¤				break;¤			}¤			str = str.substring(str.indexOf("\\") + 1);¤			while(str.length() > 0){¤				if(str.indexOf("=") == -1){¤					str = "";¤					break;¤				}¤				int indexVerticalSlesh = str.indexOf("|");¤				int index = str.indexOf("\\");¤				String[] labels = new String[1];¤				if(index > indexVerticalSlesh){¤					index = indexVerticalSlesh;¤					labels = new String[2];¤					labels[0] = "ogv";¤					labels[1] = "uvs";¤				}else{¤					labels[0] = "folder";¤				}¤				String pageTitle = str.substring(str.indexOf("=")+1, index);¤¤				com.atlassian.confluence.pages.Page existPage = ru.garant.shared.ConfluenceCore.Helpers.ContainerManager.Factory.get().getPageManager().getPage(spaceKey, pageTitle.toUpperCase());¤				if(existPage != null){¤					Logs.LOG_W("ImportOGVFromFile::doImport::exist file with title=" + pageTitle);¤					parent = existPage;¤				}else{¤					com.atlassian.confluence.pages.Page page = ru.garant.MDProcess.ConfluencePlugins.CommonVelocityContext.GlobalHelper.createPage(pageTitle, parent.getId(), "elenau", new java.util.Date(), spaceKey, labels);¤					parent = page;¤				}¤				str = str.substring(index + 1);¤			}¤		}¤		in.close();¤	}¤	¤	//#UC END# *501681FA0275_CUSTOM_METHODS_AND_DATA*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"WikiPageID (wiki)"
		    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/ImportOGVFromFile|501681FA0275
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (wiki)"
		    value      	"wiki"))
	    quid       	"501681FA0275"
	    documentation 	"переливка органов в конфлюенс из файла"
	    stereotype 	"SimpleClass"
	    language   	"MDA Generator")
	(object Class "IssuerListener"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"1344949973885897")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/DocCardChange/DocCardSupport/IssuerListener.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*502A4ED50374_CUSTOM_IMPORT*"
		    value      	"//#UC START# *502A4ED50374_CUSTOM_IMPORT*¤import com.atlassian.confluence.event.events.content.attachment.AttachmentCreateEvent;¤import com.atlassian.confluence.event.events.content.page.PageCreateEvent;¤import com.atlassian.confluence.event.events.content.page.PageEvent;¤import com.atlassian.confluence.event.events.content.page.PageRemoveEvent;¤import com.atlassian.confluence.event.events.content.page.PageRestoreEvent;¤import com.atlassian.confluence.event.events.content.page.PageTrashedEvent;¤import com.atlassian.confluence.event.events.content.page.PageUpdateEvent;¤import com.atlassian.confluence.labels.Label;¤import com.atlassian.confluence.pages.Page;¤¤import ru.garant.MDProcess.DocCardChange.DocCardChangeDAO.OGVLinksDAO;¤import ru.garant.MDProcess.DocCardChange.DocCardCommon.OGVLinksManager;¤//#UC END# *502A4ED50374_CUSTOM_IMPORT*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*502A4ED50374_CUSTOM_CLASS_DEFINITION*"
		    value      	"//#UC START# *502A4ED50374_CUSTOM_CLASS_DEFINITION*¤//#UC END# *502A4ED50374_CUSTOM_CLASS_DEFINITION*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*502A4ED50374_CONTENT*"
		    value      	(value Text 
|//#UC START# *502A4ED50374_CONTENT*¤		PageRemoveEvent.class, PageTrashedEvent.class¤		//#UC END# *502A4ED50374_CONTENT*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*502A4ED50374_GETHANDLEDEVENTCLASSES_IMPLEMETATION*"
		    value      	(value Text 
|//#UC START# *502A4ED50374_GETHANDLEDEVENTCLASSES_IMPLEMETATION*¤		return handledClasses;¤		//#UC END# *502A4ED50374_GETHANDLEDEVENTCLASSES_IMPLEMETATION*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*502A4ED50374_HANDLEEVENT_IMPLEMETATION*"
		    value      	(value Text 
|//#UC START# *502A4ED50374_HANDLEEVENT_IMPLEMETATION*¤		try {¤			PageEvent removeEvent = null;¤			if(event instanceof PageRemoveEvent){ ¤				removeEvent  = (PageRemoveEvent)event;¤			}else if(event instanceof PageTrashedEvent){¤				removeEvent  = (PageTrashedEvent)event;¤			}¤			Page page = removeEvent.getPage();¤			OGVLinksDAO.remove(page.getId());¤			for(Label label : page.getLabels()){¤				ContainerManager.Factory.get().getLabelManager().removeLabel(page, label);¤			}¤		} catch (Exception e) {¤				Logs.LOG_E ("IssuerListener::handleEvent: ERROR: " + e);¤		}¤		//#UC END# *502A4ED50374_HANDLEEVENT_IMPLEMETATION*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*502A4ED50374_CUSTOM_METHODS_AND_DATA*"
		    value      	(value Text 
|//#UC START# *502A4ED50374_CUSTOM_METHODS_AND_DATA*¤	//#UC END# *502A4ED50374_CUSTOM_METHODS_AND_DATA*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"WikiPageID (wiki)"
		    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/IssuerListener|502A4ED50374
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (wiki)"
		    value      	"wiki"))
	    quid       	"502A4ED50374"
	    documentation 	"слушает события ОГВ"
	    stereotype 	"KListenerPlugin"
	    language   	"MDA Generator")
	(object Class "CreateOGV"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"1347271644451456")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"DerivedImplement"
		    value      	(value Text 
|{"4B1F4A2F0260":{"need_collect_children":"true"}}
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"DerivedOverload"
		    value      	(value Text 
|{"4B1F6D4D026E":{"need_collect_children":"false"}}
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ImplementSelectType"
		    value      	"all")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"OverloadSelectType"
		    value      	"include")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/DocCardChange/DocCardSupport/CreateOGV.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*504DBBDC01C3_CUSTOM_IMPORT*"
		    value      	"//#UC START# *504DBBDC01C3_CUSTOM_IMPORT*¤import java.util.ArrayList;¤import java.util.Date;¤import java.util.List;¤import java.util.Map;¤¤import org.apache.commons.lang.StringUtils;¤¤import com.atlassian.confluence.labels.Label;¤import com.atlassian.confluence.labels.Labelling;¤import com.atlassian.confluence.pages.AbstractPage;¤import com.atlassian.confluence.pages.Comment;¤import com.atlassian.confluence.pages.Page;¤import com.atlassian.confluence.spaces.Space;¤import com.atlassian.confluence.user.AuthenticatedUserThreadLocal;¤import ru.garant.MDProcess.ConfluencePlugins.CommonVelocityContext.GlobalHelper;¤import ru.garant.MDProcess.DocCardChange.DocCardChangeDAO.OGVLinksDAO;¤import ru.garant.MDProcess.DocCardChange.DocCardCommon.OGVLinksManager;¤¤import ru.garant.shared.ConfluenceCore.ActionSupport.ActionContextThreadLocalFactory;¤import ru.garant.shared.ConfluenceCore.TaskSupport.EmailSenderTask;¤import ru.garant.shared.ConfluenceCore.TaskSupport.PostProcessorTask;¤//#UC END# *504DBBDC01C3_CUSTOM_IMPORT*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*504DBBDC01C3_CUSTOM_CLASS_DEFINITION*"
		    value      	"//#UC START# *504DBBDC01C3_CUSTOM_CLASS_DEFINITION*¤//#UC END# *504DBBDC01C3_CUSTOM_CLASS_DEFINITION*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*504DBBDC01C3_ACTION_NAME*"
		    value      	(value Text 
|//#UC START# *504DBBDC01C3_ACTION_NAME*¤		return new String (getClass ().getName ());¤		//#UC END# *504DBBDC01C3_ACTION_NAME*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*504DBBDC01C3_CUSTOM_METHODS_AND_DATA*"
		    value      	(value Text 
|//#UC START# *504DBBDC01C3_CUSTOM_METHODS_AND_DATA*¤	@Override¤	public String execute () throws Exception {¤		return super.doDefault();¤	}¤¤	¤	¤	public boolean validateImpl(){¤        if (StringUtils.isEmpty(getTitle()))¤        {¤            addFieldError("title", getText("page.title.empty"));¤            return false;¤        }¤        else¤        {¤            if (AbstractPage.hasInvalidTitleCharacters(getTitle()))¤            {¤                addFieldError("title", getText("page.title.invalid"));¤                return false;¤            }¤            if (!AbstractPage.isValidTitleLength(getTitle()))¤            {¤                addFieldError("title", getText("page.title.too.long"));¤                return false;¤            }¤        }¤        return true;¤	}¤¤	¤	@Override¤	public String doAdd () throws Exception {¤		if(validateImpl() == false){¤			return ERROR;¤		}¤		addLabelToLabelsString("folder");¤		addLabelToLabelsString(getMainLabel());¤		page_ = createEntityPage(getTitle(), getFromPageId(), AuthenticatedUserThreadLocal.getUsername(), new Date(), getSpaceKey(), getLabelsString().split(" "), getContent());¤		setPage(page_);¤		DpoUvsHelper.updateTask(UpdateConfigOGVTask.INSERT, page_);¤		return SUCCESS;¤	}¤	¤	public String getFormaction(){¤		return "docreateogv.action";¤	}¤	¤	public void setPageForTask(Page page){¤		page_ = page;¤	}¤	¤	public long getPageId(){¤		if(page_ != null){¤			return page_.getId();¤		}¤		return 0;¤	}¤	Page page_ = null;¤	¤	public Page createEntityPage(String title, long parentId, String creatorName, Date creationDate, String spaceKey, String[] labelNames, String content){¤		return createEntityPage(title, parentId, creatorName, creationDate, spaceKey, DpoUvsHelper.labelNamesToLabels(labelNames), content);¤	}¤¤	public Page createEntityPage(String title, long parentId, String creatorName, Date creationDate, String spaceKey, List<Label> labels, String content){¤		Page p = new Page ();¤		Space space = ContainerManager.Factory.get().getSpaceManager().getSpace(spaceKey);¤		if(space == null){¤			return null;¤		}¤		p.setTitle(DpoUvsHelper.replaceSymbolsInTitle(title));¤		p.setSpace(space);¤		Page parent = ContainerManager.Factory.get().getPageManager().getPage(parentId);¤		if(parent == null){¤			return null;¤		}¤		parent.addChild(p);¤		p.setParentPage(parent);¤		p.setCreationDate(creationDate);¤		p.setCreatorName(creatorName);¤		p.setLastModificationDate(creationDate);¤		p.setLastModifierName(creatorName);¤		if(!StringUtils.isEmpty(content)){¤			p.setContent(content);¤		}¤		¤		try {¤			//потому-что надо что бы были ОГВ с совпадающими названиями¤			ContainerManager.Factory.get().getSession().save(p);¤			ContainerManager.Factory.get().getIndexer().reIndex(p);¤			addLabellings(p, labels, spaceKey, creatorName);¤			OGVLinksDAO link = new OGVLinksDAO();¤			link.setId(p.getId());¤			link.setPage(p);¤			ContainerManager.Factory.get().getSession().save(link);¤			¤		} catch (Exception e) {¤			Logs.LOG_SEX(e);¤		}¤		¤		¤		return p;¤	}¤¤	¤	public boolean addLabellings(Page p, List<Label> labels, String spaceKey, String creatorName){¤		if(labels != null && labels.size() > 0){¤			for (Label label : labels) {¤				Labelling ll = new Labelling(label, p, creatorName);¤				ll.setCreationDate(new Date());¤				ll.setLastModificationDate(new Date());¤				ll.setSpaceKey(spaceKey);¤				p.addLabelling(ll);¤			}¤			return true;¤		}¤		¤		return false;¤	}¤	//#UC END# *504DBBDC01C3_CUSTOM_METHODS_AND_DATA*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"WikiPageID (wiki)"
		    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/CreateOGV|504DBBDC01C3
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (wiki)"
		    value      	"wiki"))
	    quid       	"504DBBDC01C3"
	    documentation 	"создание ОГВ"
	    stereotype 	"KActionPlugin"
	    superclasses 	(list inheritance_relationship_list
		(object Inheritance_Relationship
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"1347271737832800"))
		    quid       	"504DBC39033F"
		    supplier   	"Logical View::MDProcess::ConfluencePlugins::EntitySupport::CreateEntity"
		    quidu      	"4B1F4A2F0260"))
	    language   	"MDA Generator")
	(object Class "AddOGVWebItem"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"1347271678066380")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"label key"
		    value      	"ogv.add")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"need UC"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"section"
		    value      	"system.content.add/space")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"styleClass"
		    value      	"add-ogv")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"weight"
		    value      	"14")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"output.xml:*504DBBFE0042LABEL_CONTENT*"
		    value      	(value Text 
|<!--UC_BEGIN*504DBBFE0042LABEL_CONTENT*-->¤			<!--UC_END*504DBBFE0042LABEL_CONTENT*-->
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"WikiPageID (wiki)"
		    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/AddOGVWebItem|504DBBFE0042
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (wiki)"
		    value      	"wiki"))
	    quid       	"504DBBFE0042"
	    documentation 	"представляет пункт меню для добавления ОГВ"
	    stereotype 	"WebItem"
	    used_nodes 	(list uses_relationship_list
		(object Uses_Relationship
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"1347277192912842")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"params"
			    value      	"spaceKey=$generalUtil.urlEncode($helper.spaceKey)#if ($helper.page.id &amp;&amp; !$helper.page.postingDay)&amp;fromPageId=$helper.page.id#end"))
		    quid       	"504DD188038F"
		    stereotype 	"link"
		    supplier   	"Logical View::MDProcess::DocCardChange::DocCardSupport::DocCardXPlugin::DocCardXPackage::CreateOGV"
		    quidu      	"504DBDDA02BD"))
	    language   	"MDA Generator")
	(object Class "AddOGVCondition"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"1347271776541015")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/DocCardChange/DocCardSupport/AddOGVCondition.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*504DBC60021C_CUSTOM_IMPORT*"
		    value      	"//#UC START# *504DBC60021C_CUSTOM_IMPORT*¤import com.atlassian.confluence.labels.Label;¤import com.atlassian.confluence.pages.AbstractPage;¤import com.atlassian.confluence.pages.Page;¤import com.atlassian.confluence.plugin.descriptor.web.WebInterfaceContext;¤//#UC END# *504DBC60021C_CUSTOM_IMPORT*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*504DBC60021C_CUSTOM_CLASS_DEFINITION*"
		    value      	"//#UC START# *504DBC60021C_CUSTOM_CLASS_DEFINITION*¤//#UC END# *504DBC60021C_CUSTOM_CLASS_DEFINITION*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*504DBC60021C_CUSTOM_METHODS_AND_DATA*"
		    value      	(value Text 
|//#UC START# *504DBC60021C_CUSTOM_METHODS_AND_DATA*¤	@Override¤	public boolean shouldDisplay (WebInterfaceContext context) {¤		AbstractPage aPage = context.getPage();¤		if (aPage == null || ((aPage instanceof Page) == false)) {¤			return false;¤		}¤		Page page = (Page)aPage;¤		return DpoUvsHelper.hasParentOGVFolderAndHasLabelOGVOrFolder(page);¤	}¤	//#UC END# *504DBC60021C_CUSTOM_METHODS_AND_DATA*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"WikiPageID (wiki)"
		    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/AddOGVCondition|504DBC60021C
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (wiki)"
		    value      	"wiki"))
	    quid       	"504DBC60021C"
	    documentation 	"контролирует возможность добавления ОГВ к заданной странице"
	    stereotype 	"SimpleClass"
	    superclasses 	(list inheritance_relationship_list
		(object Inheritance_Relationship
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"1347271819260461"))
		    quid       	"504DBC8B0102"
		    supplier   	"Logical View::external::ConfluenceSupport::com.atlassian.confluence.plugin.descriptor.web.conditions::BaseConfluenceCondition"
		    quidu      	"4A53516B029A"))
	    language   	"MDA Generator")
	(object Class "RemoveDocCardCondition"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"1349184497702454")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/DocCardChange/DocCardSupport/RemoveDocCardCondition.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*506AEBF102BE_CUSTOM_IMPORT*"
		    value      	"//#UC START# *506AEBF102BE_CUSTOM_IMPORT*¤import com.atlassian.confluence.pages.AbstractPage;¤import com.atlassian.confluence.pages.Page;¤import com.atlassian.confluence.plugin.descriptor.web.WebInterfaceContext;¤import com.atlassian.confluence.security.Permission;¤import com.atlassian.confluence.security.PermissionManager;¤import com.atlassian.user.Group;¤import com.atlassian.user.User;¤import com.atlassian.confluence.labels.Label;¤¤import ru.garant.MDProcess.DocCardChange.DocCardCommon.DPOUVSManager;¤import ru.garant.MDProcess.DocCardChange.DocCardCommon.DocCardManager;¤//#UC END# *506AEBF102BE_CUSTOM_IMPORT*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*506AEBF102BE_CUSTOM_CLASS_DEFINITION*"
		    value      	"//#UC START# *506AEBF102BE_CUSTOM_CLASS_DEFINITION*¤//#UC END# *506AEBF102BE_CUSTOM_CLASS_DEFINITION*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*506AEBF102BE_CUSTOM_METHODS_AND_DATA*"
		    value      	(value Text 
|//#UC START# *506AEBF102BE_CUSTOM_METHODS_AND_DATA*¤	@Override¤	protected boolean shouldDisplay(WebInterfaceContext context) {¤		// TODO Auto-generated method stub¤		final AbstractPage pageObj = context.getPage();¤		if (pageObj instanceof Page == false) {¤			return false;¤		}¤		final Page page = (Page) pageObj;¤		PermissionManager pm = ContainerManager.Factory.get().getPermissionManager();¤		if (!pm.hasPermission(context.getUser(), Permission.REMOVE, page)) {¤			return false;¤		}¤		boolean isDocCard = DocCardManager.Factory.get().isDocCard(page.getId());¤		if(isDocCard == false){¤			return false;¤		}¤		Label labelDone = ContainerManager.Factory.get().getLabelManager().getLabel("done");¤		boolean hasLabelDone = page.getLabels().contains(labelDone);¤		User user = context.getUser();¤		Group group = DPOUVSManager.Factory.get(page.getSpace()).getProjectManagersGroupsInOdUo();¤		boolean isProjectManager = ContainerManager.Factory.get().getUserAccessor().hasMembership(group, user);¤		return (hasLabelDone == false)|| isProjectManager;¤	}¤	//#UC END# *506AEBF102BE_CUSTOM_METHODS_AND_DATA*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"WikiPageID (wiki)"
		    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/RemoveDocCardCondition|506AEBF102BE
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (wiki)"
		    value      	"wiki"))
	    quid       	"506AEBF102BE"
	    documentation 	"реализует условие возможности удаления карточки с заданной страницы"
	    stereotype 	"SimpleClass"
	    superclasses 	(list inheritance_relationship_list
		(object Inheritance_Relationship
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"1349184536374667"))
		    quid       	"506AEC180175"
		    supplier   	"Logical View::external::ConfluenceSupport::com.atlassian.confluence.plugin.descriptor.web.conditions::BaseConfluenceCondition"
		    quidu      	"4A53516B029A"))
	    language   	"MDA Generator")
	(object Class "CreateDocCardIndexEveryNightJob"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"1349864977412076")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Factory auto reg"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Factory default impl"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Servant Pool"
		    value      	"none")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"debug log"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"factory priority"
		    value      	"0")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"local supervisor"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"need UC"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"repeated"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"singleton"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"cron-expression"
		    value      	"0 0 * * * ?")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/DocCardChange/DocCardSupport/CreateDocCardIndexEveryNightJob.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*50754E11019B_CUSTOM_IMPORT*"
		    value      	"//#UC START# *50754E11019B_CUSTOM_IMPORT*¤import java.util.Calendar;¤import java.util.Date;¤import java.util.List;¤¤import com.atlassian.confluence.setup.bandana.ConfluenceBandanaContext;¤import com.atlassian.confluence.spaces.Space;¤¤import ru.garant.shared.ConfluenceCore.ActionSupport.ActionContextThreadLocalFactory;¤import ru.garant.MDProcess.ConfluencePlugins.CommonVelocityContext.GlobalHelper;¤//#UC END# *50754E11019B_CUSTOM_IMPORT*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*50754E11019B_CUSTOM_CLASS_DEFINITION*"
		    value      	"//#UC START# *50754E11019B_CUSTOM_CLASS_DEFINITION*¤//#UC END# *50754E11019B_CUSTOM_CLASS_DEFINITION*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*50754E11019B_DO_EXECUTE_IMPLEMETATION*"
		    value      	(value Text 
|//#UC START# *50754E11019B_DO_EXECUTE_IMPLEMETATION*¤		super.doExecute(jec);¤		//#UC END# *50754E11019B_DO_EXECUTE_IMPLEMETATION*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*50754E11019B_CUSTOM_METHODS_AND_DATA*"
		    value      	(value Text 
|//#UC START# *50754E11019B_CUSTOM_METHODS_AND_DATA*¤	@Override¤	protected void executeJob() {¤		Logs.LOG_D("CreateDocCardIndexEveryNightJob :: start");¤		if(GlobalHelper.isGardocSupermaximumSyncOff()){¤			Logs.LOG_D("CreateDocCardIndexEveryNightJob :: GARDOC_SIMILAR_INDEXING_OFF = true");¤		}else{¤			if(startIndexForSpace()){¤				DocCardLuceneReIndex reindex = new DocCardLuceneReIndex(); ¤				¤				try{¤					reindex.doIndex();¤				}catch(Exception ex){¤					Logs.LOG_SEX(ex);¤				}¤			¤				saveTimeNextExecuteJob();¤			}¤		}¤		Logs.LOG_D("CreateDocCardIndexEveryNightJob :: end");¤	}¤¤	public boolean startIndexForSpace(){¤		Date currentDate = new Date();¤		Long nextTimeId = (Long) ContainerManager.Factory.get ().getBandanaManager ().getValue (ConfluenceBandanaContext.GLOBAL_CONTEXT, "NEXT_TIME_FOR_DOC_CARD_INDEX_EVERY_NIGHT");¤		if (nextTimeId == null) {¤			nextTimeId = new Date().getTime();¤		}else{¤			//проверяем дата последней успешной полной переиндексации  была больше суток назад или нет ¤			Date date = new Date();¤			date.setTime(nextTimeId);¤			Calendar calNextDate = Calendar.getInstance();¤			calNextDate.setTime(date);¤¤			Calendar calCurrentDate = Calendar.getInstance();¤			calCurrentDate.setTime(currentDate);¤			//прошло меньше суток¤			if(calCurrentDate.before(calNextDate)){¤				return false;¤			}¤		}¤		return true;¤	}¤	¤	public void saveTimeNextExecuteJob(){¤		Date currentDate = new Date();¤		Calendar calNextDate = Calendar.getInstance();¤		calNextDate.setTime(currentDate);¤		calNextDate.set(Calendar.DAY_OF_MONTH, calNextDate.get(Calendar.DAY_OF_MONTH) + 1);¤		calNextDate.set(Calendar.AM_PM, Calendar.AM);¤		calNextDate.set(Calendar.HOUR, 1);¤		calNextDate.set(Calendar.MINUTE, 0);¤		calNextDate.set(Calendar.SECOND, 0);¤		calNextDate.set(Calendar.MILLISECOND, 0);¤		¤		ContainerManager.Factory.get ().getBandanaManager ().setValue (ConfluenceBandanaContext.GLOBAL_CONTEXT, "NEXT_TIME_FOR_DOC_CARD_INDEX_EVERY_NIGHT", calNextDate.getTime().getTime());¤	}¤	¤	@Override¤	protected boolean isNeedWriteTransaction() {¤		// TODO Auto-generated method stub¤		return true;¤	}¤¤	//#UC END# *50754E11019B_CUSTOM_METHODS_AND_DATA*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"WikiPageID (wiki)"
		    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/CreateDocCardIndexEveryNightJob|50754E11019B
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (wiki)"
		    value      	"wiki"))
	    quid       	"50754E11019B"
	    documentation 	"запускается каждый час и если с момента удачной индексации прошло больше суток запускается заново"
	    stereotype 	"KJobPlugin"
	    superclasses 	(list inheritance_relationship_list
		(object Inheritance_Relationship
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"1349865922738147"))
		    quid       	"507551C202E1"
		    supplier   	"Logical View::MDProcess::DocCardChange::DocCardSupport::GarDocAbstractJob"
		    quidu      	"53E4BF9000E2"))
	    language   	"MDA Generator")
	(object Class "ChangeIncludeInVersionDate"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"1358248741826643")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Factory auto reg"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Factory default impl"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Servant Pool"
		    value      	"none")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"debug log"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"factory priority"
		    value      	"0")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"force usage"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"local supervisor"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"need UC"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"singleton"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/DocCardChange/DocCardSupport/ChangeIncludeInVersionDate.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*50F53B25033A_CUSTOM_IMPORT*"
		    value      	"//#UC START# *50F53B25033A_CUSTOM_IMPORT*¤import java.text.SimpleDateFormat;¤import java.util.Calendar;¤import java.util.Date;¤¤import ru.garant.MDProcess.DocCardChange.Entities.InstancyTypes;¤//#UC END# *50F53B25033A_CUSTOM_IMPORT*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*50F53B25033A_CUSTOM_CLASS_DEFINITION*"
		    value      	"//#UC START# *50F53B25033A_CUSTOM_CLASS_DEFINITION*¤//#UC END# *50F53B25033A_CUSTOM_CLASS_DEFINITION*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*50F53B25033A_ACTION_NAME*"
		    value      	(value Text 
|//#UC START# *50F53B25033A_ACTION_NAME*¤		return new String (getClass ().getName ());¤		//#UC END# *50F53B25033A_ACTION_NAME*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*50F53B25033A_CUSTOM_METHODS_AND_DATA*"
		    value      	(value Text 
|//#UC START# *50F53B25033A_CUSTOM_METHODS_AND_DATA*¤	public final int COUNT_JOB_HOURS = 8;¤	public final int IN_WHICH_TIME_DELTA = 16;¤	public String doChange(){¤		Date date = getDate();¤		Calendar cal = Calendar.getInstance();¤		cal.setTime(date);¤		¤		int hod = cal.get(Calendar.HOUR_OF_DAY);¤		//*		¤		int delta = 1;¤		if(getInstancy().equals(InstancyTypes.IN_VERSION.name())){¤			if (hod >= 8 && cal.get(Calendar.DAY_OF_WEEK) == Calendar.WEDNESDAY) {¤				delta = 5;¤			} else if (cal.get(Calendar.DAY_OF_WEEK) == Calendar.THURSDAY) {¤				delta = 4;¤			} else if (hod < 8 && cal.get(Calendar.DAY_OF_WEEK) == Calendar.FRIDAY) {¤				delta = 3;¤			} else if (hod >= 8 && cal.get(Calendar.DAY_OF_WEEK) == Calendar.FRIDAY) {¤				delta = 4;¤			} else if (hod >= 8) {¤				delta = 2;¤			} else {¤				delta = 1;¤			}¤			¤			cal.add(Calendar.DAY_OF_MONTH, delta);	¤		} else if (getInstancy().equals(InstancyTypes.QUICKLY.name())){¤			if (hod >= 8 && cal.get(Calendar.DAY_OF_WEEK) == Calendar.WEDNESDAY) {¤				delta = 5;¤			} else if (hod < 8 && cal.get(Calendar.DAY_OF_WEEK) == Calendar.THURSDAY) {¤				delta = 4;¤			} else if (hod >= 8 && cal.get(Calendar.DAY_OF_WEEK) == Calendar.THURSDAY) {¤				delta = 5;¤			} else if (hod < 8 && cal.get(Calendar.DAY_OF_WEEK) == Calendar.FRIDAY) {¤				delta = 4;¤			} else if (hod >= 8 && cal.get(Calendar.DAY_OF_WEEK) == Calendar.FRIDAY) {¤				delta = 5;¤			} else if (hod >= 8) {¤				delta = 3;¤			} else {¤				delta = 2;¤			}¤		¤			cal.add(Calendar.DAY_OF_MONTH, delta);	¤		} else {¤			delta = 7;¤			cal.add(Calendar.DAY_OF_MONTH, delta);		¤		}¤		//*/¤¤		responseContent_ = new SimpleDateFormat("dd.MM.yyyy").format(cal.getTime());¤		return SUCCESS;¤	}¤	¤	private String responseContent_ = null;¤¤	public String getResponseContent() {¤		return responseContent_;¤	}¤¤	private String instancy_;¤¤	public String getInstancy() {¤		return instancy_;¤	}¤	¤	public void setInstancy(String instancy) {¤		instancy_ = instancy;¤	}¤¤	public Date getDate(){¤		return new Date();¤	}¤	//#UC END# *50F53B25033A_CUSTOM_METHODS_AND_DATA*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"WikiPageID (wiki)"
		    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/ChangeIncludeInVersionDate|50F53B25033A
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (wiki)"
		    value      	"wiki"))
	    quid       	"50F53B25033A"
	    documentation 	
|«В версию» - через 8 рабочих часов, но учитываем, что дельту мы выпускаем в 4 часа вечером, если 8 часов истекают после 16-00, это означает, что к пользователю документ попадет не на следующий день, а через день. Например, документ пришел в 11-00 утра в понедельник - 8 рабочих часов истекают в 11-00 во вторник, значит он попадает в дельту только во вторник и к пользователю попадет в среду.
|«срочный» - через 16 рабочих часов
|«обычный» - через 40 рабочих часов
|Если документ в версию или срочный пришел в среду вечером, то по общему правилу, он может попасть к пользователям только в понедельник.  Такая вот у нас процедура создания дельт в четверг и пятницу.
	    
	    stereotype 	"KActionPlugin"
	    superclasses 	(list inheritance_relationship_list
		(object Inheritance_Relationship
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"1358251657937507"))
		    quid       	"50F5468903A6"
		    supplier   	"Logical View::external::JavaConfluence::ConfluenceClassPack::ConfluenceActionSupport"
		    quidu      	"465ADCCA036B"))
	    language   	"MDA Generator")
	(object Class "ShowErrorsInJobsForRequest"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"1358926740276528")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Factory auto reg"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Factory default impl"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Servant Pool"
		    value      	"none")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"debug log"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"factory priority"
		    value      	"0")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"local supervisor"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"need UC"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"singleton"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/DocCardChange/DocCardSupport/ShowErrorsInJobsForRequest.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*50FF93940114_CUSTOM_IMPORT*"
		    value      	"//#UC START# *50FF93940114_CUSTOM_IMPORT*¤import ru.garant.MDProcess.DocCardChange.DocCardCommon.ProcessingBussinessErrorsFromJobs;¤¤import com.atlassian.confluence.core.ContentEntityObject;¤import com.atlassian.confluence.pages.Page;¤import com.atlassian.confluence.renderer.PageContext;¤import com.atlassian.confluence.renderer.radeox.macros.MacroUtils;¤import com.atlassian.confluence.util.velocity.VelocityUtils;¤¤import com.atlassian.renderer.v2.macro.MacroException;¤import com.atlassian.renderer.v2.RenderMode;¤import com.atlassian.renderer.RenderContext;¤import java.util.*;¤//#UC END# *50FF93940114_CUSTOM_IMPORT*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*50FF93940114_CUSTOM_CLASS_DEFINITION*"
		    value      	"//#UC START# *50FF93940114_CUSTOM_CLASS_DEFINITION*¤//#UC END# *50FF93940114_CUSTOM_CLASS_DEFINITION*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*50FF93940114_EXECUTE_IMPLEMETATION*"
		    value      	(value Text 
|//#UC START# *50FF93940114_EXECUTE_IMPLEMETATION*¤		try {¤			if (renderContext instanceof PageContext == false) {¤				return "";¤			}¤			final ContentEntityObject contextCeo = ((PageContext) renderContext).getEntity();¤			Page page = (Page)contextCeo;¤			Map<String, Object> velocityContext = MacroUtils.defaultVelocityContext();¤			List<String> errors = ProcessingBussinessErrorsFromJobs.Factory.get().getErrors(page);¤			velocityContext.put("errors", errors);¤			velocityContext.put("page", contextCeo);¤			velocityContext.put("cloakTitle",  "Журнал ошибок");¤			return VelocityUtils.getRenderedTemplate(TEMPLATE_PATH, velocityContext);¤		} catch (Exception e) {¤			throw new MacroException (e.getMessage());¤		}¤		//#UC END# *50FF93940114_EXECUTE_IMPLEMETATION*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*50FF93940114_ISINLINE_IMPLEMETATION*"
		    value      	(value Text 
|//#UC START# *50FF93940114_ISINLINE_IMPLEMETATION*¤		return false;¤		//#UC END# *50FF93940114_ISINLINE_IMPLEMETATION*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*50FF93940114_HASBODY_IMPLEMETATION*"
		    value      	(value Text 
|//#UC START# *50FF93940114_HASBODY_IMPLEMETATION*¤		return true;¤		//#UC END# *50FF93940114_HASBODY_IMPLEMETATION*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*50FF93940114_GETBODYRENDERMODE_IMPLEMETATION*"
		    value      	(value Text 
|//#UC START# *50FF93940114_GETBODYRENDERMODE_IMPLEMETATION*¤		return RenderMode.NO_RENDER;¤		//#UC END# *50FF93940114_GETBODYRENDERMODE_IMPLEMETATION*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*50FF93940114_CUSTOM_METHODS_AND_DATA*"
		    value      	(value Text 
|//#UC START# *50FF93940114_CUSTOM_METHODS_AND_DATA*¤	private static final String TEMPLATE_PATH = "/DocCardChange/DocCardView/showerrorsinjobs.vm";¤¤	public String execute (Map parameters, String body, RenderContext renderContext) throws MacroException {¤		try {¤			if (renderContext instanceof PageContext == false) {¤				return "";¤			}¤			final ContentEntityObject contextCeo = ((PageContext) renderContext).getEntity();¤			Page page = (Page)contextCeo;¤			Map<String, Object> velocityContext = MacroUtils.defaultVelocityContext();¤			List<String> errors = ProcessingBussinessErrorsFromJobs.Factory.get().getErrors(page);¤			velocityContext.put("errors", errors);¤			velocityContext.put("page", contextCeo);¤			velocityContext.put("cloakTitle",  "Журнал ошибок");¤			return VelocityUtils.getRenderedTemplate(TEMPLATE_PATH, velocityContext);¤		} catch (Exception e) {¤			throw new MacroException (e.getMessage());¤		}¤	}¤	public boolean isInline () {¤		return false;¤	}¤	public boolean hasBody () {¤		return true;¤	}¤	public RenderMode getBodyRenderMode () {¤		return RenderMode.NO_RENDER;¤	}¤	//#UC END# *50FF93940114_CUSTOM_METHODS_AND_DATA*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"WikiPageID (wiki)"
		    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/ShowErrorsInJobsForRequest|50FF93940114
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (wiki)"
		    value      	"wiki")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Need assign op"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Need copy ctor"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Refcount"
		    value      	"none")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"finished"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"need dctor"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"need objcounter"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"no hands"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"non virtual base"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"DerivedImplement"
		    value      	"{}")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"DerivedOverload"
		    value      	"{}")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ImplementSelectType"
		    value      	"all")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"OverloadSelectType"
		    value      	"include")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ApplyedGens"
		    value      	"All"))
	    quid       	"50FF93940114"
	    documentation 	"Бизнес-ошибки из джобов показывать в запросе "
	    stereotype 	"SimpleClass"
	    superclasses 	(list inheritance_relationship_list
		(object Inheritance_Relationship
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"1439540547373288"))
		    quid       	"55CDA5430173"
		    supplier   	"Logical View::external::ConfluenceSupport::com.atlassian.renderer.v2.macro::BaseMacro"
		    quidu      	"55CDA4FA0245"))
	    language   	"MDA Generator")
	(object Class "AddOgvsFromOppEveryNight"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"1359715435252381")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Factory auto reg"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Factory default impl"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Servant Pool"
		    value      	"none")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"cron-expression"
		    value      	"0 0 * * * ?")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"debug log"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"factory priority"
		    value      	"0")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"local supervisor"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"need UC"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"repeated"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"singleton"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/DocCardChange/DocCardSupport/AddOgvsFromOppEveryNight.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*510B9C6B00FB_CUSTOM_IMPORT*"
		    value      	"//#UC START# *510B9C6B00FB_CUSTOM_IMPORT*¤import java.sql.Connection;¤import java.sql.ResultSet;¤import net.sf.hibernate.Query;¤¤import com.atlassian.confluence.labels.Label;¤import com.atlassian.confluence.labels.Labelling;¤import com.atlassian.confluence.pages.Page;¤import com.atlassian.confluence.setup.bandana.ConfluenceBandanaContext;¤import com.atlassian.confluence.spaces.Space;¤¤import ru.garant.MDProcess.ConfluencePlugins.CommonVelocityContext.GlobalHelper;¤¤import ru.garant.MDProcess.DocCardChange.DocCardChangeDAO.OGVLinksDAO;¤import ru.garant.MDProcess.DocCardChange.DocCardCommon.DoInNewTransactionCallback;¤import ru.garant.MDProcess.DocCardChange.DocCardCommon.OGVLinksManager;¤import ru.garant.MDProcess.DocCardChange.DocCardCommonImpl.DefaultHelpDeskRemote;¤¤import java.util.ArrayList;¤import java.util.Arrays;¤import java.util.Date;¤import java.util.HashMap;¤import java.util.List;¤import java.util.Map;¤//#UC END# *510B9C6B00FB_CUSTOM_IMPORT*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*510B9C6B00FB_CUSTOM_CLASS_DEFINITION*"
		    value      	"//#UC START# *510B9C6B00FB_CUSTOM_CLASS_DEFINITION*¤//#UC END# *510B9C6B00FB_CUSTOM_CLASS_DEFINITION*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*510B9C6B00FB_DO_EXECUTE_IMPLEMETATION*"
		    value      	(value Text 
|//#UC START# *510B9C6B00FB_DO_EXECUTE_IMPLEMETATION*¤		super.doExecute(jec);¤		//#UC END# *510B9C6B00FB_DO_EXECUTE_IMPLEMETATION*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*510B9C6B00FB_CUSTOM_METHODS_AND_DATA*"
		    value      	(value Text 
|//#UC START# *510B9C6B00FB_CUSTOM_METHODS_AND_DATA*¤	@Override¤	protected void executeJob() {¤		Logs.LOG_D ("AddOgvsFromOppEveryNight::executeJob::start");¤		if(GlobalHelper.isGardocSupermaximumSyncOff()){¤			Logs.LOG_D ("AddOgvsFromOppEveryNight::executeJob::GARDOC_SUPERMAXIMIM_SYNC_OFF=true");¤		}else{	¤//			String spaceKey = "DPOUVS";¤			List<Space> spaces = DpoUvsHelper.getSpacesWhichHasGardocSettings();¤			for(Space space : spaces){¤				try {¤					String spaceKey = space.getKey();¤					if(hasConfigIniSpace(spaceKey)){¤						List<String> ogvNamesFromOpp = getOgvNamesList(spaceKey);¤						addOgvs(ogvNamesFromOpp, spaceKey);¤					}¤				} catch (Exception e) {¤					Logs.LOG_SEX(e);¤				}¤			}¤		}¤		Logs.LOG_D ("AddOgvsFromOppEveryNight::executeJob::end ");¤	}¤	¤	public boolean hasConfigIniSpace(final String spaceKey){¤		Label label = ContainerManager.Factory.get().getLabelManager().getLabel("gardoc_config_ini");¤		List pages = ContainerManager.Factory.get().getLabelManager().getCurrentContentForLabelAndSpace(label, spaceKey);¤		if(pages.size() == 0){¤			Logs.LOG_W("AddOgvsFromOppEveryNight::executeJob::no page with labelname=gardoc_config_ini for spacekey=" + spaceKey);¤			return false;¤		}else{¤			return true;¤		}¤	}¤¤	@Override¤	protected boolean isNeedWriteTransaction() {¤		// TODO Auto-generated method stub¤		return true;¤	}¤	¤	public List<String> getOgvNamesList(final String spaceKey) {¤		List<String> ogvNames = new ArrayList<String>();¤		Connection con = null;¤		long time = new Date().getTime();¤		try{¤			con = DefaultHelpDeskRemote.getConnection(spaceKey);¤			java.sql.PreparedStatement stmt = con.prepareStatement(¤					"SELECT s.name FROM garant_topics_sources s"¤			);¤			ResultSet rset = stmt.executeQuery();¤			while (rset.next()) {¤				String s = rset.getString("name");¤				ogvNames.add(s);¤			}	¤		}catch(Exception e){¤			Logs.LOG_SEX(e);¤		} finally {¤			if (con != null) {¤				try {¤					con.close();¤				} catch (Exception e) {¤					Logs.LOG_SEX(e);¤				}¤			}¤		}¤		Logs.LOG_W("AddOgvsFromOppEveryNight::getOgvNamesList::spaceKey="+ spaceKey + " ogvNames.size=" + ogvNames.size() + " time=" + (new Date().getTime() - time));¤		return ogvNames;¤	}¤	¤	private static class IdAndTitle {¤		public Long id;¤		public String title;¤		¤		public IdAndTitle(Long initId, String initTitle){¤			id = initId;¤			title = initTitle;¤		}¤	}¤	¤	private Map<Long, List<IdAndTitle>> childrenForParent_ = null;¤	¤	public void loadMap (final String spaceKey) {¤		childrenForParent_ = new HashMap<Long, List<IdAndTitle>>();¤		List<IdAndTitle> res = new ArrayList<IdAndTitle>();¤		String sQuery = "SELECT page.parent.id, page.id, page.title FROM Page page WHERE page.contentStatus='current' and page.originalVersion is null and page.parent is not null and page.space.key='" + spaceKey + "'" +¤				" and (SELECT count(d.id) FROM GarDocDAO d WHERE d.id=page.id)=0 and (SELECT count(req.id) FROM UVSQuestDAO req WHERE req.id=page.id)=0";¤		try {¤			Query q = ContainerManager.Factory.get().getSession().createQuery(sQuery);¤			List result = q.list();¤			for(Object obj : result){¤				Object[] objs = (Object[])obj;¤				if(objs[0] != null){¤					long parentId = (Long)objs[0];	¤					IdAndTitle elem = new IdAndTitle((Long)objs[1], (String)objs[2]);¤					¤					res = childrenForParent_.get(parentId);¤					if(res == null){¤						res = new ArrayList<IdAndTitle>();¤					}¤					res.add(elem);¤					childrenForParent_.put(parentId, res);¤				}¤			}¤		} catch (Exception ex) {¤			Logs.LOG_SEX(ex);¤		}¤	}¤	¤	public void addOgvs(final List<String> ogvNamesFromOpp, final String spaceKey) throws Exception{¤		Page ogv_folder = OGVLinksManager.Factory.get(spaceKey).getOgvFolder();¤		List<String> resOgvNamesFromOpp = doFilterSpaceOGVPathFromOPPJob(ogvNamesFromOpp, spaceKey);¤		int k = 0;¤		Label labelFolder = DpoUvsHelper.getLabel("folder");¤		Label labelOgv = DpoUvsHelper.getLabel("ogv");¤		Label labelOgvFromHD = DpoUvsHelper.getLabel("ogv_from_hd");¤		¤		final List<Label> labelsWithOGV = Arrays.asList(labelFolder, labelOgv, labelOgvFromHD);¤		final List<Label> labelsWithOGVAndUvs = Arrays.asList(labelFolder, labelOgv, labelOgvFromHD, DpoUvsHelper.getUvsLabel());¤		¤		int count = 0;¤		long timeLoad = new Date().getTime();¤		loadMap(spaceKey);¤		List<Long> pagesContainedLabelOGV = OGVLinksManager.Factory.get(spaceKey).getOGVIds();¤¤		Logs.LOG_I("AddOgvsFromOppEveryNight::loadMap size=" + childrenForParent_.size() + " time=" + (new Date().getTime() - timeLoad));¤		for(String ogvName : resOgvNamesFromOpp){¤			String replacingName = ogvName.replace("\\", ";").replace("\'", "\"");¤			String[] path = replacingName.split(";");¤			Long pId = ogv_folder.getId();¤			int i = 0;¤			boolean flagFindPage;¤			List<IdAndTitle> childrens = null;¤			final boolean hasPathInIncludeOgvSettings = hasPathIncludeOgvPaths(spaceKey, ogvName);¤			do{¤				flagFindPage = false;¤				String titleWithReplacingSymbols = DpoUvsHelper.replaceSymbolsInTitle(path[i]);¤¤				if(childrens == null){¤					childrens = childrenForParent_.get(pId);¤					if(childrens == null){¤						childrens = new ArrayList<IdAndTitle>();¤					}¤				}¤				for(IdAndTitle chId : childrens){¤					final String title = chId.title;¤					¤					if(title.equals(path[i]) || title.equals(titleWithReplacingSymbols)){¤						i++;¤						pId = chId.id;¤						flagFindPage = true;¤						//если в опп добавили огв, которое есть в мдп, но без метки ogv, то добавляем метку ogv¤						if(i == path.length){¤							if(pagesContainedLabelOGV.contains(pId) == false){¤								long time = new Date().getTime();¤								Page ogv = ContainerManager.Factory.get().getPageManager().getPage(pId);¤								List<Label> labels = new ArrayList<Label>();¤								labels.add(DpoUvsHelper.getOGVLabel());¤								//если одна из папок пути ОГВ есть в настройках ADD_OGVS_FROM_OPP_INCLUDE_PATHS, то добавляем метку uvs¤								if(hasPathInIncludeOgvSettings){¤									labels.add(DpoUvsHelper.getUvsLabel());¤								}¤								addLabelOGV(ogv, labels, spaceKey);¤								pagesContainedLabelOGV.add(pId);¤								Logs.LOG_I("AddOgvsFromOppEveryNight::addOgvs::addLabel=ogv for page=" + pId + " time=" + (new Date().getTime() - time));¤							}¤						}¤						break;¤					}¤				}¤				if(flagFindPage == false){¤					final boolean isOgv = (i < path.length - 1)?false:true;¤					final long parentId = pId;¤					final String title = path[i];¤					final Page[] page = new Page[1];¤					new TransactionDecorator(true).doInNewTransaction(new DoInNewTransactionCallback() {¤						public void execute() {¤							if(isOgv){¤								long time = new Date().getTime();¤								if(hasPathInIncludeOgvSettings){¤									page[0] = OGVLinksManager.Factory.get(spaceKey).createOgvPage(title, parentId, labelsWithOGVAndUvs);¤								}else{¤									page[0] = OGVLinksManager.Factory.get(spaceKey).createOgvPage(title, parentId, labelsWithOGV);¤								}¤								Logs.LOG_I("AddOgvsFromOppEveryNight::addOgvs::createOgvPage for page=" + title + " time=" + (new Date().getTime() - time));¤							}else{¤								long time = new Date().getTime();¤								page[0] = createFolder(spaceKey, title, parentId);¤								Logs.LOG_I("AddOgvsFromOppEveryNight::addOgvs::createFolder for page=" + title + " time=" + (new Date().getTime() - time));¤							}¤						}¤					});			¤					¤					if(isOgv){¤						pagesContainedLabelOGV.add(page[0].getId());¤					}¤					List<IdAndTitle> childs = childrenForParent_.get(parentId);¤					if(childs != null){¤						IdAndTitle el = new IdAndTitle(page[0].getId(), page[0].getTitle());¤						childs.add(el);¤					}else{¤						childs = new ArrayList<IdAndTitle>();¤						IdAndTitle el = new IdAndTitle(page[0].getId(), page[0].getTitle());¤						childs.add(el);¤						childrenForParent_.put(parentId, childs);¤					}¤					¤					Logs.LOG_I("AddOgvsFromOppEveryNight::addOgvs::createEntityPage=" + title + " with ParentId=" + parentId + " number="+ k);¤					i++;¤					k++;¤					pId = page[0].getId();¤					childrens = new ArrayList<IdAndTitle>();¤					if(k % 100 == 0){¤						Logs.LOG_I("AddOgvsFromOppEveryNight::addOgvs::count = " + k);¤					}¤					¤				}else{¤					childrens = null;¤				}¤				¤			}while(i <= path.length - 1);¤			if(count % 1000 == 0){¤				Logs.LOG_I("AddOgvsFromOppEveryNight::addOgvs::countOgvNamesFromOpp=" + count);¤			}¤			count++;¤		}¤	}¤	¤	private boolean hasPathIncludeOgvPaths(String spaceKey, String ogvName){¤		ConfluenceBandanaContext context = new ConfluenceBandanaContext(spaceKey);¤		List<String> includePaths = (List<String>) ContainerManager.Factory.get ().getBandanaManager ().getValue (context, "ADD_OGVS_FROM_OPP_INCLUDE_PATHS");¤		¤		if(includePaths != null && includePaths.size() > 0){¤			for(String includePath : includePaths){¤				if(ogvName.toUpperCase().contains(includePath.toUpperCase())){¤					return true;¤				}¤			}¤		}¤		return false;¤	}¤¤	private void addLabelOGV(Page content, List<Label> labels, String spaceKey){¤		String robotName = DpoUvsHelper.getRobotUsername(spaceKey);¤		for(Label label : labels){¤			addLabel(content, label, robotName);¤		}¤¤		OGVLinksDAO link = new OGVLinksDAO();¤		link.setId(content.getId());¤		link.setPage(content);¤		OGVLinksManager.Factory.get(content).doAdd(link);¤		DpoUvsHelper.updateTask(UpdateConfigOGVTask.INSERT, content);¤¤		ContainerManager.Factory.get().getIndexer().reIndex(content);¤	}¤	¤	public String addLabel(Page content, Label label, String robotName){¤        Labelling labelling = new Labelling(label, content, robotName);¤¤        content.addLabelling(labelling);¤        Date creationDate = new Date();¤        labelling.setCreationDate(creationDate);¤        labelling.setLastModificationDate(creationDate);¤        return "success";¤	}¤	¤	public Page createFolder(final String spaceKey, final String title, final long parentId){¤		try {¤			String robotName = DpoUvsHelper.getRobotUsername(spaceKey);¤			Page p = new Page ();¤			Space space = ContainerManager.Factory.get().getSpaceManager().getSpace(spaceKey);¤			p.setTitle(DpoUvsHelper.replaceSymbolsInTitle(title));¤			p.setSpace(space);¤			Page parent = ContainerManager.Factory.get().getPageManager().getPage(parentId);¤			parent.addChild(p);¤			p.setParentPage(parent);¤			p.setCreationDate(new Date ());¤			p.setCreatorName(robotName);¤			p.setLastModificationDate(new Date ());¤			p.setLastModifierName(robotName);¤		¤			//потому-что надо что бы были ОГВ с совпадающими названиями¤			ContainerManager.Factory.get().getSession().save(p);¤			Label folderLabel = ContainerManager.Factory.get().getLabelManager().getLabel("folder");¤			Label ogvFromHDLabel = ContainerManager.Factory.get().getLabelManager().getLabel("ogv_from_hd");¤			addLabel(p, folderLabel, robotName);¤			addLabel(p, ogvFromHDLabel, robotName);¤			ContainerManager.Factory.get().getIndexer().reIndex(p);¤			return p;¤		} catch (Exception e) {¤			Logs.LOG_SEX(e);¤		}¤		return null;¤	}¤	//#UC END# *510B9C6B00FB_CUSTOM_METHODS_AND_DATA*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"WikiPageID (wiki)"
		    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/AddOgvsFromOppEveryNight|510B9C6B00FB
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (wiki)"
		    value      	"wiki"))
	    quid       	"510B9C6B00FB"
	    documentation 	"добавляет каждую ночь новые ОГВ из ОПП"
	    stereotype 	"KJobPlugin"
	    superclasses 	(list inheritance_relationship_list
		(object Inheritance_Relationship
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"1359715486903336"))
		    quid       	"510B9C9E0386"
		    supplier   	"Logical View::MDProcess::DocCardChange::DocCardSupport::FilterSpaceOGVPathFromOPPJob"
		    quidu      	"53EC707C00F5"))
	    language   	"MDA Generator")
	(object Class "GardocExtractor"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"1361876448331295")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Factory auto reg"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Factory default impl"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Servant Pool"
		    value      	"none")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"debug log"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"factory priority"
		    value      	"0")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"local supervisor"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"need UC"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"priority"
		    value      	"902")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"singleton"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/DocCardChange/DocCardSupport/GardocExtractor.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*512C95E000CF_CUSTOM_IMPORT*"
		    value      	"//#UC START# *512C95E000CF_CUSTOM_IMPORT*¤import ru.garant.shared.Core.Root.NoActiveFactory;¤¤import ru.garant.MDProcess.CaseAgreementChange.CaseDAO.CaseDAOProxy;¤import ru.garant.MDProcess.ConfluenceMDChange.MDChangeDAO.AbstractRequestDAOProxy;¤¤import ru.garant.MDProcess.DocCardChange.DocCardChangeDAO.BlockDAO;¤import ru.garant.MDProcess.DocCardChange.DocCardChangeDAO.CopyDAO;¤import ru.garant.MDProcess.DocCardChange.DocCardChangeDAO.GarDocDAO;¤import ru.garant.MDProcess.DocCardChange.DocCardChangeDAO.UVSQuestDAO;¤import ru.garant.MDProcess.DocCardChange.Entities.UVSStateMachine;¤¤import com.atlassian.confluence.pages.Page;¤¤import org.apache.commons.collections.CollectionUtils;¤import org.apache.commons.lang.StringUtils;¤import org.apache.commons.lang.text.StrBuilder;¤¤import org.apache.lucene.document.Field.Index;¤import org.apache.lucene.document.Field.Store;¤import org.springframework.jdbc.core.JdbcTemplate;¤import org.springframework.jdbc.core.RowCallbackHandler;¤import org.springframework.jdbc.datasource.SingleConnectionDataSource;¤¤import net.sf.hibernate.HibernateException;¤import net.sf.hibernate.Query;¤¤import java.sql.Connection;¤import java.sql.ResultSet;¤import java.sql.SQLException;¤import java.sql.Statement;¤import java.text.ParseException;¤import java.text.SimpleDateFormat;¤import java.util.ArrayList;¤import java.util.Arrays;¤import java.util.Collections;¤import java.util.Date;¤import java.util.HashMap;¤import java.util.List;¤import java.util.Map;¤import java.util.Set;¤//#UC END# *512C95E000CF_CUSTOM_IMPORT*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*512C95E000CF_CUSTOM_CLASS_DEFINITION*"
		    value      	"//#UC START# *512C95E000CF_CUSTOM_CLASS_DEFINITION*¤//#UC END# *512C95E000CF_CUSTOM_CLASS_DEFINITION*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*512C95E000CF_ADD_FIELDS_IMPLEMETATION*"
		    value      	(value Text 
|//#UC START# *512C95E000CF_ADD_FIELDS_IMPLEMETATION*¤		if((searchable instanceof Page) == false){¤			return;¤		}¤		¤		GarDocDAO docCard = null;¤		UVSQuestDAO req = null;¤		try {¤			Object or = ContainerManager.Factory.get().getSession().get(AbstractRequestDAOProxy.class, searchable.getId());¤			if (or instanceof UVSQuestDAO) {¤				req = (UVSQuestDAO)or;¤			}else{¤				docCard = (GarDocDAO)ContainerManager.Factory.get().getSession().get(GarDocDAO.class, searchable.getId());¤			}¤		} catch (NoActiveFactory e1) {¤			e1.printStackTrace();¤		} catch (HibernateException e1) {¤			e1.printStackTrace();¤		}		¤¤			try {¤				if(docCard != null){¤					document.add(new Field(GAR_FIELD_NAME_IS_DOCCARD, "1", Store.NO, Index.UN_TOKENIZED));¤				}else if(req != null){¤					docCard = req.getGardoc();¤				}¤				if(docCard != null){¤					document.add(new Field(GAR_FIELD_NAME_TOPIC, String.valueOf(docCard.getTopic()), Store.NO, Index.UN_TOKENIZED));¤					document.add(new Field(GAR_FIELD_NAME_DOC_ISSUER, String.valueOf(docCard.getDocIssuer()), Store.NO, Index.UN_TOKENIZED));¤					for(long addIssuer : docCard.getAdditionalDocIssuers()){¤						document.add(new Field(GAR_FIELD_NAME_DOC_ISSUER, String.valueOf(addIssuer), Store.NO, Index.UN_TOKENIZED));¤					}¤					if(docCard.getCreationDate() != null){¤						document.add(new Field(GAR_FIELD_NAME_DOC_DATE, new SimpleDateFormat("yyyyMMdd").format(docCard.getCreationDate()), Store.NO, Index.UN_TOKENIZED));¤					}¤					if(StringUtils.isNotEmpty(docCard.getNumber())){¤						document.add(new Field(GAR_FIELD_NAME_DOC_NUMBER, docCard.getNumber().toUpperCase(), Store.NO, Index.UN_TOKENIZED));¤						for(String number : docCard.getAdditionalNumbers()){¤							document.add(new Field(GAR_FIELD_NAME_DOC_NUMBER, number.toUpperCase(), Store.NO, Index.UN_TOKENIZED));¤						}¤					}¤					if(docCard.getType() != null){¤						document.add(new Field(GAR_FIELD_NAME_DOC_TYPE, docCard.getType().getName(), Store.NO, Index.UN_TOKENIZED));¤					}¤					if(StringUtils.isNotEmpty(docCard.getRegistrationNumber())){¤						document.add(new Field(GAR_FIELD_NAME_DOC_MU_NUMBER, docCard.getRegistrationNumber().toUpperCase(), Store.NO, Index.UN_TOKENIZED));¤					}¤					if(docCard.getRegistrationDate() != null){¤						document.add(new Field(GAR_FIELD_NAME_DOC_MU_DATE, new SimpleDateFormat("yyyyMMdd").format(docCard.getRegistrationDate()), Store.NO, Index.UN_TOKENIZED));¤					}¤					document.add(new Field(GAR_FIELD_NAME_DOC_RESTRICTED_STATUS, String.valueOf(docCard.getRestrictedStatus()), Store.NO, Index.UN_TOKENIZED));¤					if (req == null) {¤						if(docCard.getCopies().size() > 0){¤							for(CopyDAO copy : docCard.getCopies()){¤								document.add(new Field(GAR_FIELD_NAME_DOC_COPIES, copy.getType(), Store.NO, Index.UN_TOKENIZED));¤							}¤						}¤					} else {¤						if(req.getCopy() != null){¤							document.add(new Field(GAR_FIELD_NAME_DOC_COPIES, req.getCopy().getType(), Store.NO, Index.UN_TOKENIZED));¤						}¤					}¤					document.add(new Field(GAR_FIELD_NAME_DOC_INTERNET, String.valueOf(docCard.getInternet()), Store.NO, Index.UN_TOKENIZED));¤					document.add(new Field(GAR_FIELD_NAME_DOC_IS_CONNECTED, String.valueOf(docCard.getIsConnected()), Store.NO, Index.UN_TOKENIZED));¤					document.add(new Field(GAR_FIELD_NAME_DOC_INSTANCY, String.valueOf(docCard.getInstancy()), Store.NO, Index.UN_TOKENIZED));¤					if(docCard.getBlocks().size() > 0){¤						for(BlockDAO block : docCard.getBlocks()){¤							document.add(new Field(GAR_FIELD_NAME_DOC_BLOCKS, block.getShortName(), Store.NO, Index.UN_TOKENIZED));¤						}¤					}¤					¤					if (req == null) {¤						/*¤						 * 1) взять все запросы для этой карточки¤						 * 2) для кадого прописать как массив GAR_FIELD_NAME_REQ_WAITING_FROM_OGV_DATE и GAR_FIELD_NAME_REQ_SEND_IN_UO_DATE¤						 *  ¤						 */¤						List<String> historyStates =  new ArrayList<String>();¤						List<String> historyDates =  new ArrayList<String>();¤						addHistoryInStateForDoccard(historyStates, historyDates, searchable.getId());¤						List<String> waitingFromOGVDateList = getDateInStateForDoccard(Arrays.asList(UVSStateMachine.ST_WAITING_FROM_OGV.getSortValue()), historyDates, historyStates);¤						if(waitingFromOGVDateList.size() > 0){¤							for(String waitingFromOGVDate : waitingFromOGVDateList)¤								document.add(new Field(GAR_FIELD_NAME_REQ_WAITING_FROM_OGV_DATE, waitingFromOGVDate, Store.NO, Index.UN_TOKENIZED));¤						}¤						List<String> inAcceptInUODateList = getDateInStateForDoccard(Arrays.asList(UVSStateMachine.ST_ON_ACCEPT_IN_UO.getSortValue(), UVSStateMachine.ST_ON_ACCEPT_BY_UO_MANAGER.getSortValue()), historyDates, historyStates);¤						if(inAcceptInUODateList.size() > 0){¤							for(String inAcceptInUODate : inAcceptInUODateList)¤								document.add(new Field(GAR_FIELD_NAME_REQ_SEND_IN_UO_DATE, inAcceptInUODate, Store.NO, Index.UN_TOKENIZED));¤						}¤					}¤					¤				}¤			} catch (Exception e) {¤				Logs.LOG_SEX(e);¤			}¤		¤¤		if(req != null){¤			List<String> historyExecutors =  new ArrayList<String>();¤			List<String> historyStates =  new ArrayList<String>();¤			List<String> historyDates =  new ArrayList<String>();¤			addHistory(historyExecutors, historyStates, historyDates, searchable.getId());¤			document.add(new Field(GAR_FIELD_NAME_IS_DOCCARD, "0", Store.NO, Index.UN_TOKENIZED));¤			Page page = (Page)searchable;¤			document.add(new Field(GAR_FIELD_NAME_REQ_CREATION_DATE, new SimpleDateFormat("yyyyMMdd").format(page.getCreationDate()), Store.NO, Index.UN_TOKENIZED));¤			String waitingFromOGVDate = getDateInState(Arrays.asList(UVSStateMachine.ST_WAITING_FROM_OGV.getSortValue()), historyDates, historyStates);¤			if(waitingFromOGVDate != null){¤				document.add(new Field(GAR_FIELD_NAME_REQ_WAITING_FROM_OGV_DATE, waitingFromOGVDate, Store.NO, Index.UN_TOKENIZED));¤			}¤			String inAcceptInUODate = getDateInState(Arrays.asList(UVSStateMachine.ST_ON_ACCEPT_IN_UO.getSortValue(), UVSStateMachine.ST_ON_ACCEPT_BY_UO_MANAGER.getSortValue()), historyDates, historyStates);¤			if(inAcceptInUODate != null){¤				document.add(new Field(GAR_FIELD_NAME_REQ_SEND_IN_UO_DATE, inAcceptInUODate, Store.NO, Index.UN_TOKENIZED));¤			}¤			/*¤			document.add(new Field(GAR_FIELD_NAME_UVS_QUERY_HISTORY_EXECUTOR, listToString(historyExecutors), Store.YES, Index.ANALYZED));¤			document.add(new Field(GAR_FIELD_NAME_UVS_QUERY_HISTORY_STATE, listToString(historyStates), Store.YES, Index.ANALYZED));¤			document.add(new Field(GAR_FIELD_NAME_UVS_QUERY_HISTORY_DATE, listToString(historyDates), Store.YES, Index.ANALYZED));¤			*/¤			¤			class HistInfo {¤				public List<String> executorts = new ArrayList<String>();¤				public String state = "";¤				public String date;¤			}¤			HistInfo hi = null;¤			final List<HistInfo> vers = new ArrayList<HistInfo>();¤			for (int i = 0; i < historyExecutors.size(); i++) {¤				if (hi != null && historyStates.get(i).equals(hi.state)) {¤					hi.executorts.add(historyExecutors.get(i));¤				} else {¤					hi = new HistInfo();¤					hi.executorts.add(historyExecutors.get(i));¤					hi.state = historyStates.get(i);¤					hi.date = historyDates.get(i);¤					vers.add(hi);¤				}¤			}¤			¤			for (int i = 0; i < vers.size(); i++) {¤				final HistInfo hi2 = vers.get(i);¤				for (String x : hi2.executorts) {¤					document.add(new Field("HISTORY_VERSION.E."+i, x, Field.Store.NO, Field.Index.NOT_ANALYZED));¤				}				¤				document.add(new Field("HISTORY_VERSION.S."+i, hi2.state, Field.Store.NO, Field.Index.NOT_ANALYZED));¤				document.add(new Field("HISTORY_VERSION.D."+i, hi2.date, Field.Store.NO, Field.Index.NOT_ANALYZED));¤			}			¤¤			return;¤		}¤		//#UC END# *512C95E000CF_ADD_FIELDS_IMPLEMETATION*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*512C95E000CF_CUSTOM_METHODS_AND_DATA*"
		    value      	(value Text 
|//#UC START# *512C95E000CF_CUSTOM_METHODS_AND_DATA*¤	public static String listToString(List items) {¤		String result = "";¤		for (Object item : items) {¤			if (!StringUtils.isEmpty(result)) {¤				result += " ";¤			}¤			result += item;¤		}¤		return result;¤	}¤	¤	private void addHistory(final List<String> executors, final List<String> states, final List<String> dates, long reqId){¤		try {¤			String sQuery = ¤					"SELECT req.state, m.login, c.lastmoddate" +¤					" FROM gar_request req" +¤					" JOIN content c ON (c.contentid = req.contentid)" +¤					" LEFT OUTER JOIN gar_execution_group_members m ON (m.id = req.executiongroupid)" +¤					" WHERE req.latestversionid=" + reqId +¤					" ORDER BY c.version";¤	¤			final JdbcTemplate template = new JdbcTemplate(new SingleConnectionDataSource(ContainerManager.Factory.get().getSession().connection(), true));¤			template.query(sQuery, new RowCallbackHandler() {¤				public void processRow(ResultSet rs) throws SQLException {¤				byte state = rs.getByte("state");¤				String executor = (StringUtils.isEmpty(rs.getString("login"))) ? "null": rs.getString("login");¤				Date date = rs.getTimestamp("lastmoddate");¤				String lastModDate = "";¤				if(date != null){¤					lastModDate = new SimpleDateFormat("yyyyMMdd").format(date);¤					dates.add(lastModDate);¤				}¤				executors.add(executor);¤				states.add(String.valueOf(state));¤				}				¤			});¤		} catch (Exception e) {¤			Logs.LOG_SEX(e);¤		}¤	}¤	¤	private void addHistoryInStateForDoccard(final List<String> states, final List<String> dates, long docId){¤		try {¤			String sQuery = ¤					"SELECT req.state, c.lastmoddate" +¤					" FROM gar_request req" +¤					" JOIN content c ON (c.contentid = req.contentid)" +¤					" WHERE req.gardocid=" + docId +¤					" ORDER BY c.version";¤	¤			final JdbcTemplate template = new JdbcTemplate(new SingleConnectionDataSource(ContainerManager.Factory.get().getSession().connection(), true));¤			template.query(sQuery, new RowCallbackHandler() {¤				public void processRow(ResultSet rs) throws SQLException {¤					byte state = rs.getByte("state");¤					Date date = rs.getTimestamp("lastmoddate");¤					String lastModDate = "";¤					if(date != null){¤						lastModDate = new SimpleDateFormat("yyyyMMdd").format(date);¤						dates.add(lastModDate);¤					}¤					states.add(String.valueOf(state));¤				}				¤			});¤		} catch (Exception e) {¤			Logs.LOG_SEX(e);¤		}¤	}¤¤	private String getDateInState(List<Byte> states, List<String> historyDates, List<String> historyStates){¤		int i = 0;¤		for(String attr : historyDates){¤			byte state = Byte.parseByte(historyStates.get(i));¤			if(states.contains(state)){¤				return attr;¤			}¤			i++;¤		}¤		return null;¤	}¤	¤	private List<String> getDateInStateForDoccard(List<Byte> states, List<String> historyDates, List<String> historyStates){¤		int i = 0;¤		List<String> attrs = new ArrayList<String>();¤		for(String attr : historyDates){¤			byte state = Byte.parseByte(historyStates.get(i));¤			if(states.contains(state)){¤				attrs.add(attr);¤			}¤			i++;¤		}¤		return attrs;¤	}¤	//#UC END# *512C95E000CF_CUSTOM_METHODS_AND_DATA*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"WikiPageID (wiki)"
		    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/GardocExtractor|512C95E000CF
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (wiki)"
		    value      	"wiki"))
	    quid       	"512C95E000CF"
	    documentation 	"индексация карточек"
	    stereotype 	"KExtractorPlugin"
	    superclasses 	(list inheritance_relationship_list
		(object Inheritance_Relationship
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"1361876635983029"))
		    quid       	"512C969B03D5"
		    supplier   	"Logical View::MDProcess::ConfluenceMDChange::RequestSupport::RequestExtractor"
		    quidu      	"478C52A902A4"))
	    language   	"MDA Generator"
	    nestedClasses 	(list nestedClasses
		(object Class "NestedConstants"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"1361876706451061")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false"))
		    quid       	"512C96E201BC"
		    documentation 	"поля в люценовском индексе карточек"
		    stereotype 	"Constants"
		    class_attributes 	(list class_attribute_list
			(object ClassAttribute "GAR_FIELD_NAME_TOPIC"
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ElementCreationOrder"
				    value      	"1361876776393062")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"AbstarctOperation"
				    value      	"regular")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ValueInitialized"
				    value      	"true")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"IsNative"
				    value      	"false")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ResolvedTypeGuid"
				    value      	"3DBFFE240068"))
			    quid       	"512C9728017C"
			    documentation 	"топик документа"
			    type       	"string"
			    quidu      	"3DBFFE240068"
			    initv      	"docTopic"
			    exportControl 	"Public"
			    Containment 	"By Value")
			(object ClassAttribute "GAR_FIELD_NAME_DOC_ISSUER"
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ElementCreationOrder"
				    value      	"1361876798033301")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"AbstarctOperation"
				    value      	"regular")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ValueInitialized"
				    value      	"true")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"IsNative"
				    value      	"false")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ResolvedTypeGuid"
				    value      	"3DBFFE240068"))
			    quid       	"512C973E0007"
			    documentation 	"эмитенты"
			    type       	"string"
			    quidu      	"3DBFFE240068"
			    initv      	"docIssuer"
			    exportControl 	"Public"
			    Containment 	"By Value")
			(object ClassAttribute "GAR_FIELD_NAME_IS_DOCCARD"
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ElementCreationOrder"
				    value      	"1361876846999103")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"AbstarctOperation"
				    value      	"regular")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ValueInitialized"
				    value      	"true")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"IsNative"
				    value      	"false")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ResolvedTypeGuid"
				    value      	"3DBFFE240068"))
			    quid       	"512C976E03DA"
			    documentation 	"является ли карточкой"
			    type       	"string"
			    quidu      	"3DBFFE240068"
			    initv      	"isDoccard"
			    exportControl 	"Public"
			    Containment 	"By Value")
			(object ClassAttribute "GAR_FIELD_NAME_DOC_DATE"
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ElementCreationOrder"
				    value      	"1361876877889871")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"AbstarctOperation"
				    value      	"regular")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ValueInitialized"
				    value      	"true")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"IsNative"
				    value      	"false")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ResolvedTypeGuid"
				    value      	"3DBFFE240068"))
			    quid       	"512C978D036B"
			    documentation 	"дата создания документа"
			    type       	"string"
			    quidu      	"3DBFFE240068"
			    initv      	"docCreationDate"
			    exportControl 	"Public"
			    Containment 	"By Value")
			(object ClassAttribute "GAR_FIELD_NAME_DOC_NUMBER"
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ElementCreationOrder"
				    value      	"1361876900206148")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"AbstarctOperation"
				    value      	"regular")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ValueInitialized"
				    value      	"true")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"IsNative"
				    value      	"false")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ResolvedTypeGuid"
				    value      	"3DBFFE240068"))
			    quid       	"512C97A400BF"
			    documentation 	"номер документа"
			    type       	"string"
			    quidu      	"3DBFFE240068"
			    initv      	"docNumber"
			    exportControl 	"Public"
			    Containment 	"By Value")
			(object ClassAttribute "GAR_FIELD_NAME_DOC_TYPE"
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ElementCreationOrder"
				    value      	"1361876925764611")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"AbstarctOperation"
				    value      	"regular")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ValueInitialized"
				    value      	"true")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"IsNative"
				    value      	"false")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ResolvedTypeGuid"
				    value      	"3DBFFE240068"))
			    quid       	"512C97BD02EC"
			    documentation 	"тип документа"
			    type       	"string"
			    quidu      	"3DBFFE240068"
			    initv      	"docType"
			    exportControl 	"Public"
			    Containment 	"By Value")
			(object ClassAttribute "GAR_FIELD_NAME_DOC_MU_DATE"
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ElementCreationOrder"
				    value      	"1361876949291958")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"AbstarctOperation"
				    value      	"regular")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ValueInitialized"
				    value      	"true")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"IsNative"
				    value      	"false")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ResolvedTypeGuid"
				    value      	"3DBFFE240068"))
			    quid       	"512C97D50112"
			    documentation 	"дата регистрации документа в МЮ"
			    type       	"string"
			    quidu      	"3DBFFE240068"
			    initv      	"docRegDate"
			    exportControl 	"Public"
			    Containment 	"By Value")
			(object ClassAttribute "GAR_FIELD_NAME_DOC_MU_NUMBER"
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ElementCreationOrder"
				    value      	"1361876981869822")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"AbstarctOperation"
				    value      	"regular")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ValueInitialized"
				    value      	"true")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"IsNative"
				    value      	"false")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ResolvedTypeGuid"
				    value      	"3DBFFE240068"))
			    quid       	"512C97F50348"
			    documentation 	"номер регистрации в МЮ документа"
			    type       	"string"
			    quidu      	"3DBFFE240068"
			    initv      	"docRegNumber"
			    exportControl 	"Public"
			    Containment 	"By Value")
			(object ClassAttribute "GAR_FIELD_NAME_DOC_RESTRICTED_STATUS"
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ElementCreationOrder"
				    value      	"1361877014120668")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"AbstarctOperation"
				    value      	"regular")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ValueInitialized"
				    value      	"true")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"IsNative"
				    value      	"false")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ResolvedTypeGuid"
				    value      	"3DBFFE240068"))
			    quid       	"512C98160065"
			    documentation 	"ограничение распространения документа"
			    type       	"string"
			    quidu      	"3DBFFE240068"
			    initv      	"docRestrictedStatus"
			    exportControl 	"Public"
			    Containment 	"By Value")
			(object ClassAttribute "GAR_FIELD_NAME_REQ_CREATION_DATE"
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ElementCreationOrder"
				    value      	"1361877159606990")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"AbstarctOperation"
				    value      	"regular")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ValueInitialized"
				    value      	"true")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"IsNative"
				    value      	"false")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ResolvedTypeGuid"
				    value      	"3DBFFE240068"))
			    quid       	"512C98A7024B"
			    documentation 	"Дата поступления запроса"
			    type       	"string"
			    quidu      	"3DBFFE240068"
			    initv      	"reqCreationDate"
			    exportControl 	"Public"
			    Containment 	"By Value")
			(object ClassAttribute "GAR_FIELD_NAME_REQ_WAITING_FROM_OGV_DATE"
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ElementCreationOrder"
				    value      	"1361877184358407")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"AbstarctOperation"
				    value      	"regular")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ValueInitialized"
				    value      	"true")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"IsNative"
				    value      	"false")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ResolvedTypeGuid"
				    value      	"3DBFFE240068"))
			    quid       	"512C98C00151"
			    documentation 	"Дата передачи запроса в ОГВ"
			    type       	"string"
			    quidu      	"3DBFFE240068"
			    initv      	"reqWaitingFromOGVDate"
			    exportControl 	"Public"
			    Containment 	"By Value")
			(object ClassAttribute "GAR_FIELD_NAME_REQ_SEND_IN_UO_DATE"
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ElementCreationOrder"
				    value      	"1361877209657855")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"AbstarctOperation"
				    value      	"regular")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ValueInitialized"
				    value      	"true")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"IsNative"
				    value      	"false")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ResolvedTypeGuid"
				    value      	"3DBFFE240068"))
			    quid       	"512C98D9027A"
			    documentation 	"Дата передачи информации в ЮО"
			    type       	"string"
			    quidu      	"3DBFFE240068"
			    initv      	"reqSendInUODate"
			    exportControl 	"Public"
			    Containment 	"By Value")
			(object ClassAttribute "GAR_FIELD_NAME_DOC_COPIES"
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ElementCreationOrder"
				    value      	"1361877290022454")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"AbstarctOperation"
				    value      	"regular")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ValueInitialized"
				    value      	"true")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"IsNative"
				    value      	"false")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ResolvedTypeGuid"
				    value      	"3DBFFE240068"))
			    quid       	"512C992903E5"
			    documentation 	"копии документов"
			    type       	"string"
			    quidu      	"3DBFFE240068"
			    initv      	"docCopies"
			    exportControl 	"Public"
			    Containment 	"By Value")
			(object ClassAttribute "GAR_FIELD_NAME_DOC_INTERNET"
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ElementCreationOrder"
				    value      	"1361877317475025")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"AbstarctOperation"
				    value      	"regular")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ValueInitialized"
				    value      	"true")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"IsNative"
				    value      	"false")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ResolvedTypeGuid"
				    value      	"3DBFFE240068"))
			    quid       	"512C994501C0"
			    documentation 	"интернет документа"
			    type       	"string"
			    quidu      	"3DBFFE240068"
			    initv      	"docInternet"
			    exportControl 	"Public"
			    Containment 	"By Value")
			(object ClassAttribute "GAR_FIELD_NAME_DOC_IS_CONNECTED"
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ElementCreationOrder"
				    value      	"1361877336019087")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"AbstarctOperation"
				    value      	"regular")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ValueInitialized"
				    value      	"true")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"IsNative"
				    value      	"false")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ResolvedTypeGuid"
				    value      	"3DBFFE240068"))
			    quid       	"512C995703DB"
			    documentation 	"статус карточки"
			    type       	"string"
			    quidu      	"3DBFFE240068"
			    initv      	"docIsConnected"
			    exportControl 	"Public"
			    Containment 	"By Value")
			(object ClassAttribute "GAR_FIELD_NAME_DOC_INSTANCY"
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ElementCreationOrder"
				    value      	"1361877362550606")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"AbstarctOperation"
				    value      	"regular")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ValueInitialized"
				    value      	"true")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"IsNative"
				    value      	"false")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ResolvedTypeGuid"
				    value      	"3DBFFE240068"))
			    quid       	"512C9972020B"
			    documentation 	"срочность документа"
			    type       	"string"
			    quidu      	"3DBFFE240068"
			    initv      	"docInstancy"
			    exportControl 	"Public"
			    Containment 	"By Value")
			(object ClassAttribute "GAR_FIELD_NAME_DOC_BLOCKS"
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ElementCreationOrder"
				    value      	"1361877382947773")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"AbstarctOperation"
				    value      	"regular")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ValueInitialized"
				    value      	"true")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"IsNative"
				    value      	"false")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ResolvedTypeGuid"
				    value      	"3DBFFE240068"))
			    quid       	"512C99860394"
			    documentation 	"блоки документа"
			    type       	"string"
			    quidu      	"3DBFFE240068"
			    initv      	"docBlocks"
			    exportControl 	"Public"
			    Containment 	"By Value")
			(object ClassAttribute "GAR_FIELD_NAME_UVS_QUERY_PROPERTIES_FOR_REPEAT"
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ElementCreationOrder"
				    value      	"1361877457574045")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"AbstarctOperation"
				    value      	"regular")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ValueInitialized"
				    value      	"true")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"IsNative"
				    value      	"false")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ResolvedTypeGuid"
				    value      	"3DBFFE240068"))
			    quid       	"512C99D10220"
			    documentation 	"предмет поиска похожих"
			    type       	"string"
			    quidu      	"3DBFFE240068"
			    initv      	"reqpropertiesforrepeat"
			    exportControl 	"Public"
			    Containment 	"By Value")
			(object ClassAttribute "GAR_FIELD_NAME_UVS_QUERY_HISTORY_STATE"
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ElementCreationOrder"
				    value      	"1369898963613621")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"AbstarctOperation"
				    value      	"regular")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ValueInitialized"
				    value      	"true")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"IsNative"
				    value      	"false")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ResolvedTypeGuid"
				    value      	"3DBFFE240068"))
			    quid       	"51A6FFD3024A"
			    documentation 	"версионная фаза"
			    type       	"string"
			    quidu      	"3DBFFE240068"
			    initv      	"reqHistoryState"
			    exportControl 	"Public"
			    Containment 	"By Value")
			(object ClassAttribute "GAR_FIELD_NAME_UVS_QUERY_HISTORY_EXECUTOR"
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ElementCreationOrder"
				    value      	"1369899029733403")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"AbstarctOperation"
				    value      	"regular")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ValueInitialized"
				    value      	"true")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"IsNative"
				    value      	"false")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ResolvedTypeGuid"
				    value      	"3DBFFE240068"))
			    quid       	"51A7001502C1"
			    documentation 	"версионный исполнитель запроса"
			    type       	"string"
			    quidu      	"3DBFFE240068"
			    initv      	"reqHistoryExecutor"
			    exportControl 	"Public"
			    Containment 	"By Value")
			(object ClassAttribute "GAR_FIELD_NAME_UVS_QUERY_HISTORY_DATE"
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ElementCreationOrder"
				    value      	"1369899067718577")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"AbstarctOperation"
				    value      	"regular")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ValueInitialized"
				    value      	"true")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"IsNative"
				    value      	"false")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ResolvedTypeGuid"
				    value      	"3DBFFE240068"))
			    quid       	"51A7003B02B1"
			    documentation 	"версионная дата запроса"
			    type       	"string"
			    quidu      	"3DBFFE240068"
			    initv      	"reqHistoryDate"
			    exportControl 	"Public"
			    Containment 	"By Value")))))
	(object Class "AddUOCurrentDocFromOGVCondition"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"1364386898204621")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/DocCardChange/DocCardSupport/AddUOCurrentDocFromOGVCondition.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*5152E45200CB_CUSTOM_IMPORT*"
		    value      	"//#UC START# *5152E45200CB_CUSTOM_IMPORT*¤import com.atlassian.confluence.pages.AbstractPage;¤import com.atlassian.confluence.plugin.descriptor.web.WebInterfaceContext;¤import com.atlassian.confluence.user.AuthenticatedUserThreadLocal;¤import com.atlassian.user.Group;¤import com.atlassian.user.User;¤¤import ru.garant.MDProcess.ConfluenceMDChange.Requests.AbstractRequestPermissionManager;¤import ru.garant.MDProcess.DocCardChange.DocCardCommon.DPOUVSManager;¤import ru.garant.MDProcess.DocCardChange.Entities.UVSQueryPermissionManager;¤//#UC END# *5152E45200CB_CUSTOM_IMPORT*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*5152E45200CB_CUSTOM_CLASS_DEFINITION*"
		    value      	"//#UC START# *5152E45200CB_CUSTOM_CLASS_DEFINITION*¤//#UC END# *5152E45200CB_CUSTOM_CLASS_DEFINITION*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*5152E45200CB_CUSTOM_METHODS_AND_DATA*"
		    value      	(value Text 
|//#UC START# *5152E45200CB_CUSTOM_METHODS_AND_DATA*¤	@Override¤	protected boolean shouldDisplay(WebInterfaceContext context) {¤		// TODO Auto-generated method stub¤		final AbstractPage pageObj = context.getPage();¤		Group group = DPOUVSManager.Factory.get(pageObj.getSpaceKey()).getGardocUoDocPosters();¤		if(group == null){¤			return false;¤		}¤		User user = AuthenticatedUserThreadLocal.getUser();¤		boolean hasRightCurrentUser = ContainerManager.Factory.get().getUserAccessor().hasMembership(group, user);¤		boolean isOGV = pageObj.getLabels().contains(DpoUvsHelper.getOGVLabel());¤		boolean isUvs = pageObj.getLabels().contains(DpoUvsHelper.getUvsLabel());¤		¤		return super.shouldDisplay(context) && hasRightCurrentUser && isOGV && isUvs;¤	}¤¤	@Override¤	protected AbstractRequestPermissionManager getRequestPermissionManager() {¤		return UVSQueryPermissionManager.Factory.get();¤	}¤	//#UC END# *5152E45200CB_CUSTOM_METHODS_AND_DATA*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"WikiPageID (wiki)"
		    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/AddUOCurrentDocFromOGVCondition|5152E45200CB
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (wiki)"
		    value      	"wiki"))
	    quid       	"5152E45200CB"
	    documentation 	"условие отображения пункта добавления текущего документа из ОГВ"
	    stereotype 	"SimpleClass"
	    superclasses 	(list inheritance_relationship_list
		(object Inheritance_Relationship
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"1364386923295058"))
		    quid       	"5152E46B0126"
		    supplier   	"Logical View::MDProcess::ConfluenceMDChange::RequestSupport::AbstractAddRequestCondition"
		    quidu      	"4A5355390002"))
	    language   	"MDA Generator")
	(object Class "MoveCopyToAnotherUvsQueryWebItem"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"1367845834679349")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"need UC"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"section"
		    value      	"system.content.action/modify")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"styleClass"
		    value      	"move-uvsquery")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"weight"
		    value      	"11")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"label key"
		    value      	"uvsquery.copy.move")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"output.xml:*5187ABCA02A6LABEL_CONTENT*"
		    value      	(value Text 
|<!--UC_BEGIN*5187ABCA02A6LABEL_CONTENT*-->¤			<!--UC_END*5187ABCA02A6LABEL_CONTENT*-->
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"WikiPageID (wiki)"
		    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/MoveCopyToAnotherUvsQueryWebItem|5187ABCA02A6
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (wiki)"
		    value      	"wiki"))
	    quid       	"5187ABCA02A6"
	    documentation 	"Перенос образа в другой запрос. При выборе этого пункта, предлагается ввести ID запроса."
	    stereotype 	"WebItem"
	    used_nodes 	(list uses_relationship_list
		(object Uses_Relationship
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"1367846332536834")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"id"
			    value      	"moveCopy"))
		    quid       	"5187ADBC0216"
		    stereotype 	"link"
		    supplier   	"Logical View::MDProcess::DocCardChange::DocCardSupport::DocCardXPlugin::DocCardXPackage::MoveCopyToAnotherUvsQuery"
		    quidu      	"5187ACFE0118"))
	    language   	"MDA Generator")
	(object Class "MoveCopyToAnotherUvsQuery"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"1367845972318223")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/DocCardChange/DocCardSupport/MoveCopyToAnotherUvsQuery.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*5187AC54013E_CUSTOM_IMPORT*"
		    value      	"//#UC START# *5187AC54013E_CUSTOM_IMPORT*¤import com.atlassian.confluence.json.json.JsonObject;¤import com.atlassian.confluence.json.json.JsonString;¤import com.atlassian.confluence.pages.Attachment;¤import com.atlassian.confluence.pages.Page;¤¤import java.util.ArrayList;¤import java.util.List;¤¤import ru.garant.MDProcess.DocCardChange.DocCardChangeDAO.CopyDAO;¤import ru.garant.MDProcess.DocCardChange.DocCardChangeDAO.GarDocDAO;¤import ru.garant.MDProcess.DocCardChange.DocCardChangeDAO.UVSQuestDAO;¤import ru.garant.MDProcess.DocCardChange.DocCardCommon.DocCardManager;¤import ru.garant.MDProcess.DocCardChange.Entities.UVSQuery;¤import ru.garant.MDProcess.DocCardChange.Entities.UVSQueryManager;¤import ru.garant.MDProcess.DocCardChange.Entities.UVSStateMachine;¤import ru.garant.MDProcess.DocCardChange.Entities.sm.UVSStateMachine.Assigned;¤import ru.garant.MDProcess.DocCardChange.Entities.sm.UVSStateMachine.WaitingFromOGV;¤import ru.garant.MDProcess.ServerGate.GenerationContentsImpl.PageImpl;¤¤//#UC END# *5187AC54013E_CUSTOM_IMPORT*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*5187AC54013E_CUSTOM_CLASS_DEFINITION*"
		    value      	"//#UC START# *5187AC54013E_CUSTOM_CLASS_DEFINITION*¤//#UC END# *5187AC54013E_CUSTOM_CLASS_DEFINITION*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*5187AC54013E_ACTION_NAME*"
		    value      	(value Text 
|//#UC START# *5187AC54013E_ACTION_NAME*¤		return new String (getClass ().getName ());¤		//#UC END# *5187AC54013E_ACTION_NAME*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*5187AC54013E_CUSTOM_METHODS_AND_DATA*"
		    value      	(value Text 
|//#UC START# *5187AC54013E_CUSTOM_METHODS_AND_DATA*¤	public String doMoveUvsQuery() throws Exception{¤		JsonObject ret = new JsonObject ();¤		if(getUvsQueryId() == getId()){¤			ret.setProperty("errorMessage", new JsonString("id запроса совпадает с id этого запроса"));¤			JSONString_ = ret.serialize();¤		}else if(UVSQueryManager.Factory.get().isRequest(getId()) == false){¤			ret.setProperty("errorMessage", new JsonString("Вы указали неправильный id запроса"));¤			JSONString_ = ret.serialize();¤		}else{¤			doMoveUvsQueryAndRemoveDocCard();¤		}¤		return SUCCESS;¤	}¤	¤	public long id_;¤	public long getId(){¤		return id_;¤	}¤	¤	public void setId(long id){¤		id_ = id;¤	}¤¤	public long uvsQueryId_;¤	public long getUvsQueryId(){¤		return uvsQueryId_;¤	}¤	¤	public void setUvsQueryId(long uvsQueryId){¤		uvsQueryId_ = uvsQueryId;¤	}¤¤	private String JSONString_ = "";¤	public String getResponseContent(){¤		return JSONString_;¤	}¤	¤	public void doMoveUvsQueryAndRemoveDocCard() throws Exception{¤		UVSQuery newUvsQuery = UVSQuery.Factory.getForSystemLogic(getId());¤		UVSQuestDAO oldUvsQuery = UVSQuestDAO.get(getUvsQueryId());¤		JsonObject ret = new JsonObject ();¤		try{¤			moveCurrentUvsQueryCopy(oldUvsQuery, newUvsQuery);¤		} catch (Exception e) {¤			ret.setProperty("errorMessage", new JsonString("Возникли ошибки при переносе запроса"));¤			JSONString_ = ret.serialize();¤			Logs.LOG_SEX(e);¤		}¤	}¤	¤	private void moveCurrentUvsQueryCopy(UVSQuestDAO oldUvsQuery, UVSQuery newUvsQuery) throws Exception{¤		if(oldUvsQuery.getCopy() != null){¤			GarDocDAO oldGarDoc = oldUvsQuery.getGardoc();¤			CopyDAO copy = oldUvsQuery.getCopy();¤			if(copy != null){¤				CopyDAO docCardCopy = (oldGarDoc.getCopies().size() > 0)? oldGarDoc.getCopies().iterator().next() : null;¤				if(docCardCopy != null && docCardCopy.getId() == copy.getId()){¤					oldGarDoc.getCopies().remove(oldGarDoc.getCopies().iterator().next());¤				}¤				newUvsQuery.setCopyType(copy.getType());¤				newUvsQuery.setDepositoryEcopy(copy.getDepository());¤				newUvsQuery.setCopySrcPage(copy.getSrcPage());¤				newUvsQuery.setCopySrcNumber(copy.getSrcNumber());¤				newUvsQuery.setCopySrcStartDate(copy.getSrcStartDate());¤				newUvsQuery.setCopySrcEndDate(copy.getSrcEndDate());¤				newUvsQuery.setCopySrcTitle(copy.getSrcTitle());¤				if(oldUvsQuery.getPage().getAttachments().size() > 0){¤					List<Attachment> attaches = oldUvsQuery.getPage().getAttachments();¤					List<Attachment> attachList = new ArrayList<Attachment>();¤					for(Attachment attach : attaches){¤						attachList.add(attach);¤					}¤					for(Attachment attach : attachList){¤						ContainerManager.Factory.get().getAttachmentManager().moveAttachment(attach, attach.getFileName(), newUvsQuery.getPage());¤					}¤				}¤			}¤			if(newUvsQuery.getCurrentState() instanceof WaitingFromOGV || newUvsQuery.getCurrentState() instanceof Assigned){¤				newUvsQuery.postEvent(UVSStateMachine.EV_DOC_DELIVERED.getGuid());¤			}¤			newUvsQuery.commit();¤			removeUvsQuery(oldUvsQuery.getPage());¤		}¤	}¤	¤	public String removeUvsQuery(Page page) throws Exception{¤		RemoveUvsQuery removeUvsQueryAction = new RemoveUvsQuery();¤		removeUvsQueryAction.setPage(page);¤		removeUvsQueryAction.setPageManager(ContainerManager.Factory.get().getPageManager());¤		removeUvsQueryAction.doRemove();¤		return SUCCESS;¤	}¤	//#UC END# *5187AC54013E_CUSTOM_METHODS_AND_DATA*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"WikiPageID (wiki)"
		    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/MoveCopyToAnotherUvsQuery|5187AC54013E
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (wiki)"
		    value      	"wiki"))
	    quid       	"5187AC54013E"
	    documentation 	"Перенос образа в другой запрос. При выборе этого пункта, предлагается ввести ID запроса."
	    stereotype 	"KActionPlugin"
	    superclasses 	(list inheritance_relationship_list
		(object Inheritance_Relationship
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"1367846108858037"))
		    quid       	"5187ACDC0358"
		    supplier   	"Logical View::external::JavaConfluence::ConfluenceClassPack::ConfluenceActionSupport"
		    quidu      	"465ADCCA036B"))
	    language   	"MDA Generator")
	(object Class "MoveCopyCondition"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"1367846023163132")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/DocCardChange/DocCardSupport/MoveCopyCondition.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*5187AC8700A3_CUSTOM_IMPORT*"
		    value      	"//#UC START# *5187AC8700A3_CUSTOM_IMPORT*¤import java.util.Map;¤¤import ru.garant.MDProcess.DocCardChange.Entities.DocCardPermissionManager;¤import ru.garant.MDProcess.DocCardChange.Entities.UVSQueryManager;¤import com.atlassian.confluence.pages.AbstractPage;¤import com.atlassian.confluence.pages.Page;¤import com.atlassian.confluence.plugin.descriptor.web.WebInterfaceContext;¤import com.atlassian.confluence.user.AuthenticatedUserThreadLocal;¤import com.atlassian.user.User;¤¤//#UC END# *5187AC8700A3_CUSTOM_IMPORT*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*5187AC8700A3_CUSTOM_CLASS_DEFINITION*"
		    value      	"//#UC START# *5187AC8700A3_CUSTOM_CLASS_DEFINITION*¤//#UC END# *5187AC8700A3_CUSTOM_CLASS_DEFINITION*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*5187AC8700A3_CUSTOM_METHODS_AND_DATA*"
		    value      	(value Text 
|//#UC START# *5187AC8700A3_CUSTOM_METHODS_AND_DATA*¤	@Override¤	public boolean shouldDisplay(WebInterfaceContext context) {¤		final AbstractPage pageObj = context.getPage();¤		if (pageObj instanceof Page == false) {¤			return false;¤		}¤		return UVSQueryManager.Factory.get().isRequest(pageObj.getId());¤	}¤	//#UC END# *5187AC8700A3_CUSTOM_METHODS_AND_DATA*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"WikiPageID (wiki)"
		    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/MoveCopyCondition|5187AC8700A3
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (wiki)"
		    value      	"wiki"))
	    quid       	"5187AC8700A3"
	    documentation 	"для запроса пункт Перенос образа в другой запрос по ID запроса"
	    stereotype 	"SimpleClass"
	    superclasses 	(list inheritance_relationship_list
		(object Inheritance_Relationship
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"1367846072974982"))
		    quid       	"5187ACB803CD"
		    supplier   	"Logical View::external::ConfluenceSupport::com.atlassian.confluence.plugin.descriptor.web.conditions::BaseConfluenceCondition"
		    quidu      	"4A53516B029A"))
	    language   	"MDA Generator")
	(object Class "RemoveOGV"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"1369898100849248")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/DocCardChange/DocCardSupport/RemoveOGV.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*51A6FC740350_CUSTOM_IMPORT*"
		    value      	"//#UC START# *51A6FC740350_CUSTOM_IMPORT*¤import java.sql.Connection;¤import java.sql.ResultSet;¤import java.sql.SQLException;¤import java.util.ArrayList;¤import java.util.List;¤¤import org.springframework.jdbc.core.JdbcTemplate;¤import org.springframework.jdbc.core.RowCallbackHandler;¤import org.springframework.jdbc.datasource.SingleConnectionDataSource;¤¤import net.sf.hibernate.HibernateException;¤¤import ru.garant.MDProcess.DocCardChange.DocCardChangeDAO.UVSQuestDAO;¤import ru.garant.MDProcess.DocCardChange.DocCardCommon.DocCardIndexManager;¤import ru.garant.MDProcess.DocCardChange.Entities.DocCard;¤import ru.garant.MDProcess.DocCardChange.Entities.UVSQuery;¤¤import ru.garant.shared.Core.Root.NoActiveFactory;¤import ru.garant.shared.ConfluenceCore.ActionSupport.ActionContextThreadLocalFactory;¤import ru.garant.shared.ConfluenceCore.TaskSupport.PostProcessorTask;¤¤import com.atlassian.confluence.pages.Page;¤//#UC END# *51A6FC740350_CUSTOM_IMPORT*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*51A6FC740350_CUSTOM_CLASS_DEFINITION*"
		    value      	"//#UC START# *51A6FC740350_CUSTOM_CLASS_DEFINITION*¤//#UC END# *51A6FC740350_CUSTOM_CLASS_DEFINITION*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*51A6FC740350_ACTION_NAME*"
		    value      	(value Text 
|//#UC START# *51A6FC740350_ACTION_NAME*¤		return new String (getClass ().getName ());¤		//#UC END# *51A6FC740350_ACTION_NAME*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*51A6FC740350_CUSTOM_METHODS_AND_DATA*"
		    value      	(value Text 
|//#UC START# *51A6FC740350_CUSTOM_METHODS_AND_DATA*¤	@Override¤	public String doRemove() throws Exception {¤		Logs.LOG_W("RemoveOGV :: doRemove :: start");¤		Page ogvPage = (Page)getPage();¤		List<Long> ids = getGardocIdsFromAdditionalIssuer(ogvPage.getId());¤		for(Long id : ids){¤			DocCard docCard = DocCard.Factory.get(id);¤			docCard.getAdditionalDocIssuers().remove(ogvPage.getId());¤			docCard.commit();¤		}¤		¤		ContainerManager.Factory.get().getSession().flush();¤		ContainerManager.Factory.get().getLabelManager().removeAllLabels(getPage());¤		String result = super.doRemove();¤		DpoUvsHelper.updateTask(UpdateConfigOGVTask.DELETE, (Page)getPage());¤		Logs.LOG_W("RemoveOGV :: doRemove :: end");¤		return result;¤	}¤	¤	public List<Long> getGardocIdsFromAdditionalIssuer(long ogvId) throws Exception{¤		List<Long> gardocIds = new ArrayList<Long>();¤		Connection connection = ContainerManager.Factory.get().getSession().connection();¤		java.sql.PreparedStatement stmt = connection.prepareStatement("SELECT id FROM gar_doc_additional_issuers WHERE issuer_id=" + ogvId);¤		ResultSet rset = stmt.executeQuery();¤		while (rset.next()) {¤			Long id = rset.getLong("id");¤			gardocIds.add(id);¤		}¤		stmt.close();¤		return gardocIds;¤	}¤	¤	//#UC END# *51A6FC740350_CUSTOM_METHODS_AND_DATA*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"WikiPageID (wiki)"
		    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/RemoveOGV|51A6FC740350
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (wiki)"
		    value      	"wiki"))
	    quid       	"51A6FC740350"
	    documentation 	"удаление ОГВ и удаление в карточках дополнительного ОГВ"
	    stereotype 	"KActionPlugin"
	    superclasses 	(list inheritance_relationship_list
		(object Inheritance_Relationship
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"1369898148684985"))
		    quid       	"51A6FCA402AB"
		    supplier   	"Logical View::external::JavaConfluence::ConfluenceClassPack::RemovePageAction"
		    quidu      	"45DAC96B0157"))
	    language   	"MDA Generator")
	(object Class "SendMailThenNotIndexedGardocPagesJob"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"1372834314400386")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Factory auto reg"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Factory default impl"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Servant Pool"
		    value      	"none")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"cron-expression"
		    value      	"0 0 * * * ?")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"debug log"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"factory priority"
		    value      	"0")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"local supervisor"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"need UC"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"repeated"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"singleton"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/DocCardChange/DocCardSupport/SendMailThenNotIndexedGardocPagesJob.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*51D3CA0A0190_CUSTOM_IMPORT*"
		    value      	"//#UC START# *51D3CA0A0190_CUSTOM_IMPORT*¤import java.text.SimpleDateFormat;¤import java.util.Calendar;¤import java.util.HashSet;¤import java.util.List;¤import java.util.Set;¤¤import ru.garant.MDProcess.ConfluencePlugins.EmailNotification.EmailGateway;¤¤¤import com.atlassian.confluence.pages.Page;¤import com.atlassian.confluence.search.lucene.DocumentFieldName;¤import com.atlassian.mail.Email;¤//#UC END# *51D3CA0A0190_CUSTOM_IMPORT*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*51D3CA0A0190_CUSTOM_CLASS_DEFINITION*"
		    value      	"//#UC START# *51D3CA0A0190_CUSTOM_CLASS_DEFINITION*¤//#UC END# *51D3CA0A0190_CUSTOM_CLASS_DEFINITION*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*51D3CA0A0190_DO_EXECUTE_IMPLEMETATION*"
		    value      	(value Text 
|//#UC START# *51D3CA0A0190_DO_EXECUTE_IMPLEMETATION*¤		super.doExecute(jec);¤		//#UC END# *51D3CA0A0190_DO_EXECUTE_IMPLEMETATION*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*51D3CA0A0190_CUSTOM_METHODS_AND_DATA*"
		    value      	(value Text 
|//#UC START# *51D3CA0A0190_CUSTOM_METHODS_AND_DATA*¤	@Override¤	protected void executeJob() {¤		Calendar finish = Calendar.getInstance();¤		finish.add(Calendar.MINUTE, -15);¤		System.out.println(finish.getTime());¤		¤		Calendar start = (Calendar)finish.clone();¤		start.add(Calendar.HOUR_OF_DAY, -2);¤		System.out.println(start.getTime());¤		¤		String beginDate = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss").format(start.getTime());¤		String endDate = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss").format(finish.getTime());¤		Logs.LOG_W("SendMailThenNotIndexedGardocPagesJob::executeJob::start from " + beginDate + " to " + endDate);¤		try {¤			findNotIndexedPages(beginDate, endDate);¤		} catch (Exception e) {¤			Logs.LOG_SEX(e);¤		}¤		Logs.LOG_W("SendMailThenNotIndexedGardocPagesJob::executeJob::finish");¤	}¤¤	@Override¤	protected boolean isNeedWriteTransaction() {¤		// TODO Auto-generated method stub¤		return false;¤	}¤	¤	public void findNotIndexedPages(String beginDate, String endDate) throws Exception{¤		Set<Long> ids = new HashSet<Long>();¤		for(Page page : lastGarDocPages(beginDate, endDate)) {¤			if (false == isIndexed(page)) {¤				ids.add(page.getId());¤			}¤		}¤		if(ids.size() > 0){¤			sendMail(DpoUvsHelper.collectionToString(ids));¤		}¤	}¤	¤	@SuppressWarnings("unchecked")¤	public List<Page> lastGarDocPages (String beginDate, String endDate) throws Exception {¤		String sQuery = ¤				"from Page p " +¤				"where p.lastModificationDate >= :beginDate and p.lastModificationDate < :endDate " +¤				"and p.contentStatus = 'current' and p.originalVersion is null " +¤				"and p.space.key = 'DPOUVS'"¤				;¤		return (List<Page>)ContainerManager.Factory.get().getSession().createQuery(sQuery)¤				.setString("beginDate", beginDate)¤				.setString("endDate", endDate)¤				.list();		¤	}¤	¤	@SuppressWarnings("deprecation")¤	public static boolean isIndexed(Page p) throws Exception{¤		org.apache.lucene.search.IndexSearcher searcher = null;¤		try {¤			com.atlassian.bonnie.ILuceneConnection conn = (com.atlassian.bonnie.ILuceneConnection)com.atlassian.spring.container.ContainerManager.getComponent("luceneConnection");¤			searcher = conn.leakSearcher();¤			org.apache.lucene.search.TopDocs docs = searcher.search(¤					new org.apache.lucene.search.TermQuery(new org.apache.lucene.index.Term("handle", "com.atlassian.confluence.pages.Page-" + p.getId()))¤					, 10¤					);¤			if (docs.totalHits > 0){¤				Long maxVer = 0l;¤				for (org.apache.lucene.search.ScoreDoc doc : docs.scoreDocs) {¤					Long version = Long.valueOf(searcher.getIndexReader().document(doc.doc).get(DocumentFieldName.CONTENT_VERSION));¤					if (version > maxVer) {¤						maxVer = version;¤					}¤				}¤				return maxVer >= p.getVersion();¤			}¤			return false;¤		} finally {¤			if (searcher != null) {¤				searcher.close();¤			}¤		}¤	}¤¤¤	private void sendMail(String ids){¤		String subj = "Страницы из Гардок спейса не проиндексированы"; ¤		String body = "Страницы с id=" + ids + " не проиндексированы";¤		EmailGateway eg = EmailGateway.Factory.create();¤		Email email = eg.createEmail(subj, body.toString(), "ses@garant.ru, elenau@garant.ru");¤		eg.queueEmail(email);¤		eg.send();¤¤	}¤	//#UC END# *51D3CA0A0190_CUSTOM_METHODS_AND_DATA*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"WikiPageID (wiki)"
		    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/SendMailThenNotIndexedGardocPagesJob|51D3CA0A0190
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (wiki)"
		    value      	"wiki"))
	    quid       	"51D3CA0A0190"
	    documentation 	"будем брать индексируемые страницы Гардока из indexqueueentries за предпоследний час и смотреть есть ли они в индексе и если нет, то отсылать письмо нам о том, что что-то не проиндексировалось"
	    stereotype 	"KJobPlugin"
	    superclasses 	(list inheritance_relationship_list
		(object Inheritance_Relationship
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"1372834371699288"))
		    quid       	"51D3CA4302BB"
		    supplier   	"Logical View::MDProcess::DocCardChange::DocCardSupport::GarDocAbstractJob"
		    quidu      	"53E4BF9000E2"))
	    language   	"MDA Generator")
	(object Class "FindRegionQueriesInFormAnswerAndSendRepeatInHDRemote"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"1373548250718665")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Factory auto reg"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Factory default impl"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Servant Pool"
		    value      	"none")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"cron-expression"
		    value      	"0 0 3 * * ?")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"debug log"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"factory priority"
		    value      	"0")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"local supervisor"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"need UC"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"repeated"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"singleton"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/DocCardChange/DocCardSupport/FindRegionQueriesInFormAnswerAndSendRepeatInHDRemote.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*51DEAEDA02CE_CUSTOM_IMPORT*"
		    value      	"//#UC START# *51DEAEDA02CE_CUSTOM_IMPORT*¤import com.atlassian.confluence.setup.bandana.ConfluenceBandanaContext;¤¤import java.util.Arrays;¤¤import ru.garant.MDProcess.DocCardChange.Entities.UVSQueryManager;¤import ru.garant.MDProcess.DocCardChange.Entities.UVSStateMachine;¤//#UC END# *51DEAEDA02CE_CUSTOM_IMPORT*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*51DEAEDA02CE_CUSTOM_CLASS_DEFINITION*"
		    value      	"//#UC START# *51DEAEDA02CE_CUSTOM_CLASS_DEFINITION*¤//#UC END# *51DEAEDA02CE_CUSTOM_CLASS_DEFINITION*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*51DEAEDA02CE_DO_EXECUTE_IMPLEMETATION*"
		    value      	(value Text 
|//#UC START# *51DEAEDA02CE_DO_EXECUTE_IMPLEMETATION*¤		super.doExecute(jec);¤		//#UC END# *51DEAEDA02CE_DO_EXECUTE_IMPLEMETATION*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*51DEAEDA02CE_CUSTOM_METHODS_AND_DATA*"
		    value      	(value Text 
|//#UC START# *51DEAEDA02CE_CUSTOM_METHODS_AND_DATA*¤	@Override¤	protected boolean isNeedWriteTransaction() {¤		return true;¤	}¤¤	final static String EMAILS_FOR_SEND = "FindRegionQueriesInFormAnswerAndSendRepeatInHDRemote";¤	//#UC END# *51DEAEDA02CE_CUSTOM_METHODS_AND_DATA*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"WikiPageID (wiki)"
		    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/FindRegionQueriesInFormAnswerAndSendRepeatInHDRemote|51DEAEDA02CE
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (wiki)"
		    value      	"wiki"))
	    quid       	"51DEAEDA02CE"
	    documentation 	
|Джоб, который
|находит все региональные запросы, которые в стадии Формирование Ответа
|пробегает по всем этим запросам
|ищет реквизиты карточки в HDRemote
|если нашел, то кладет запрос в массив найденных
|если массив найденных не пустой
|то отправляет письмо
	    
	    stereotype 	"KJobPlugin"
	    superclasses 	(list inheritance_relationship_list
		(object Inheritance_Relationship
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"1373548337603636"))
		    quid       	"51DEAF31025A"
		    supplier   	"Logical View::MDProcess::DocCardChange::DocCardSupport::AbstractFindQueriesInStatesAndSendRepeatInHDRemote"
		    quidu      	"53E8AFBE0195"))
	    language   	"MDA Generator")
	(object Class "AddUOCurrentDocWithSavedFieldsFromDoccardWebItem"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"1374238787432800")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"output.xml:*51E9384301B0LABEL_CONTENT*"
		    value      	(value Text 
|<!--UC_BEGIN*51E9384301B0LABEL_CONTENT*-->¤			<!--UC_END*51E9384301B0LABEL_CONTENT*-->
		    ))
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"need UC"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"section"
		    value      	"system.content.add/space")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"weight"
		    value      	"11")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"styleClass"
		    value      	"add-uocurrentdoc")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"label key"
		    value      	"uvsquery.with.saved.fields.add")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"WikiPageID (wiki)"
		    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/AddUOCurrentDocWithSavedFieldsFromDoccardWebItem|51E9384301B0
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (wiki)"
		    value      	"wiki"))
	    quid       	"51E9384301B0"
	    documentation 	"пункт добавления текущего документа с сохраненными с прошлого раза полями "
	    stereotype 	"WebItem"
	    used_nodes 	(list uses_relationship_list
		(object Uses_Relationship
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"1374238829045182")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"id"
			    value      	"createUVSQueryWithSavedFieldsFromDoccard"))
		    quid       	"51E9386D002C"
		    stereotype 	"link"
		    supplier   	"Logical View::MDProcess::DocCardChange::DocCardSupport::DocCardXPlugin::DocCardXPackage::CreateUvsQuery"
		    quidu      	"4C652D23033C"))
	    language   	"MDA Generator")
	(object Class "AddUOCurrentDocFromDoccardWebItem"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"1374238848940321")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"output.xml:*51E9388003ABLABEL_CONTENT*"
		    value      	(value Text 
|<!--UC_BEGIN*51E9388003ABLABEL_CONTENT*-->¤			<!--UC_END*51E9388003ABLABEL_CONTENT*-->
		    ))
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"label key"
		    value      	"uvsquery.add.uo")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"need UC"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"section"
		    value      	"system.content.add/space")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"styleClass"
		    value      	"add-uocurrentdoc")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"weight"
		    value      	"11")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"WikiPageID (wiki)"
		    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/AddUOCurrentDocFromDoccardWebItem|51E9388003AB
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (wiki)"
		    value      	"wiki"))
	    quid       	"51E9388003AB"
	    documentation 	"пункт добавления текущего документа из карточки"
	    stereotype 	"WebItem"
	    used_nodes 	(list uses_relationship_list
		(object Uses_Relationship
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"1374238928222858")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"id"
			    value      	"createUVSQueryFromDoccard"))
		    quid       	"51E938D000DC"
		    stereotype 	"link"
		    supplier   	"Logical View::MDProcess::DocCardChange::DocCardSupport::DocCardXPlugin::DocCardXPackage::CreateUvsQuery"
		    quidu      	"4C652D23033C"))
	    language   	"MDA Generator")
	(object Class "ImportGardocStatesFromArchiJob"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"1375691507470865")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Factory auto reg"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Factory default impl"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Servant Pool"
		    value      	"none")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"debug log"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"factory priority"
		    value      	"0")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"local supervisor"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"need UC"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"repeated"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"singleton"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"cron-expression"
		    value      	"0 0 2 * * ?")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/DocCardChange/DocCardSupport/ImportGardocStatesFromArchiJob.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*51FF62F301D6_CUSTOM_IMPORT*"
		    value      	"//#UC START# *51FF62F301D6_CUSTOM_IMPORT*¤import java.io.BufferedReader;¤import java.io.File;¤import java.io.FileInputStream;¤import java.io.FileNotFoundException;¤import java.io.InputStreamReader;¤import java.sql.Connection;¤import java.sql.PreparedStatement;¤import java.sql.ResultSet;¤import java.sql.SQLException;¤import java.text.SimpleDateFormat;¤import java.util.Calendar;¤import java.util.Date;¤import org.springframework.jdbc.core.JdbcTemplate;¤import org.springframework.jdbc.core.RowCallbackHandler;¤import org.springframework.jdbc.datasource.SingleConnectionDataSource;¤¤import com.atlassian.confluence.setup.bandana.ConfluenceBandanaContext;¤import com.atlassian.gzipfilter.org.apache.commons.lang.StringUtils;¤//#UC END# *51FF62F301D6_CUSTOM_IMPORT*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*51FF62F301D6_CUSTOM_CLASS_DEFINITION*"
		    value      	"//#UC START# *51FF62F301D6_CUSTOM_CLASS_DEFINITION*¤//#UC END# *51FF62F301D6_CUSTOM_CLASS_DEFINITION*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*51FF62F301D6_DO_EXECUTE_IMPLEMETATION*"
		    value      	(value Text 
|//#UC START# *51FF62F301D6_DO_EXECUTE_IMPLEMETATION*¤		super.doExecute(jec);¤		//#UC END# *51FF62F301D6_DO_EXECUTE_IMPLEMETATION*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*51FF62F301D6_CUSTOM_METHODS_AND_DATA*"
		    value      	(value Text 
|//#UC START# *51FF62F301D6_CUSTOM_METHODS_AND_DATA*¤	@Override¤	protected void executeJob() {¤		Logs.LOG_W("ImportGardocStatesFromArchiJob::start");¤		ConfluenceBandanaContext context = new ConfluenceBandanaContext("DPOUVS");¤		Long lastTime = (Long) ContainerManager.Factory.get ().getBandanaManager ().getValue (context, "LAST_TIME_IPORT_ARCHI_GARDOC_STATES_FROM_ARCHI");¤		String filesFromArchiPath = (String) ContainerManager.Factory.get ().getBandanaManager ().getValue (context, "PATH_IMPORT_ARCHI_GARDOC_STATES_FROM_ARCHI");¤		if(lastTime == null || filesFromArchiPath == null){¤			return;¤		}¤		addArchiDocumentStatesInDatabase(filesFromArchiPath, lastTime);¤		ContainerManager.Factory.get ().getBandanaManager ().setValue (context, "LAST_TIME_IPORT_ARCHI_GARDOC_STATES_FROM_ARCHI", new Date().getTime());¤		Logs.LOG_W("ImportGardocStatesFromArchiJob::end");¤		¤	}¤¤	public void addArchiDocumentStatesInDatabase(String filesFromArchiPath, Long lastTime){¤		Date currentDate = new Date();¤		File directory = new File(filesFromArchiPath);¤		if(directory.isDirectory() == false){¤			return;¤		}¤		Connection con = null;¤		try {¤			con = ContainerManager.Factory.get().getSession().connection();¤			long position = getPosition(con) + 1;¤	¤			for(File file : directory.listFiles()){¤				if(file.lastModified() > lastTime && file.lastModified() < currentDate.getTime()){¤						Logs.LOG_W("file = " + file.getName());¤						FileInputStream fis = new FileInputStream(file);¤						BufferedReader in = new BufferedReader(new InputStreamReader(fis));¤						String fileString = in.readLine();¤	¤						while ((fileString = in.readLine()) != null) {¤							String[] attributes = StringUtils.split(fileString, "|");¤//							Logs.LOG_W("attributes = " + fileString);¤							String lastModDateString = "NULL";¤							String creator = "NULL";¤							if(attributes.length < 2){¤								Logs.LOG_W("Row have less 2 rows" + fileString);¤							}else{¤								if(attributes.length > 2 && StringUtils.isNotEmpty(attributes[2])){¤									if(attributes[2].contains(".")){¤										Date lastModDate = new SimpleDateFormat("dd.MM.yyyy").parse(attributes[2]);¤										lastModDateString = "'" + new SimpleDateFormat("yyyy-MM-dd").format(lastModDate) + "'";¤										creator = "'" + attributes[3] + "'";¤									}else{¤										creator = "'" + attributes[2] + "'";¤									}¤								}¤								String sqlString = "INSERT INTO archi_document_state(id, topic, stageid, lastmoddate, lastmodifier) values(" + position + ", " + attributes[0] + ", " + attributes[1] + ", " + lastModDateString + ", " + creator + ")";¤								PreparedStatement stat = con.prepareStatement(sqlString);¤								stat.executeUpdate();¤								stat.close();¤								position++;¤							}¤						}¤						in.close();¤						fis.close();¤				}¤			}¤		} catch (Exception e) {¤			Logs.LOG_SEX(e);¤		}¤	}¤	¤	public long getPosition(Connection con) throws Exception{¤		long id = 0;¤		PreparedStatement stat = con.prepareStatement("SELECT max(id) FROM archi_document_state");¤		ResultSet rs = stat.executeQuery();¤		if (rs.next()) {¤			id = rs.getLong(1);¤		}¤		stat.close();¤		return id;¤	}¤	¤	@Override¤	protected boolean isNeedWriteTransaction() {¤		return true;¤	}¤¤	//#UC END# *51FF62F301D6_CUSTOM_METHODS_AND_DATA*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"WikiPageID (wiki)"
		    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/ImportGardocStatesFromArchiJob|51FF62F301D6
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (wiki)"
		    value      	"wiki"))
	    quid       	"51FF62F301D6"
	    documentation 	"Джоб, который запускается один раз в сутки, в два часа ночи. Он читает из банданы время последнего своего запуска. И читает все файлы, вылитые из арчи, появившиеся с этого времени, по текущее время"
	    stereotype 	"KJobPlugin"
	    superclasses 	(list inheritance_relationship_list
		(object Inheritance_Relationship
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"1375691561929981"))
		    quid       	"51FF632903A0"
		    supplier   	"Logical View::MDProcess::DocCardChange::DocCardSupport::GarDocAbstractJob"
		    quidu      	"53E4BF9000E2"))
	    language   	"MDA Generator")
	(object Class "ExportToFileFindedTopics"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"1379674111361571")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Factory auto reg"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Factory default impl"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Servant Pool"
		    value      	"none")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"debug log"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"factory priority"
		    value      	"0")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"local supervisor"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"need UC"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"singleton"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"url-pattern"
		    value      	"/exporttofile")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/DocCardChange/DocCardSupport/ExportToFileFindedTopics.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*523C27FF0169_CUSTOM_IMPORT*"
		    value      	"//#UC START# *523C27FF0169_CUSTOM_IMPORT*¤import java.io.IOException;¤import java.io.InputStream;¤import java.io.OutputStream;¤import java.io.StringBufferInputStream;¤¤import java.util.Arrays;¤//#UC END# *523C27FF0169_CUSTOM_IMPORT*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*523C27FF0169_CUSTOM_CLASS_DEFINITION*"
		    value      	"//#UC START# *523C27FF0169_CUSTOM_CLASS_DEFINITION*¤//#UC END# *523C27FF0169_CUSTOM_CLASS_DEFINITION*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*523C27FF0169_INIT_IMPLEMETATION*"
		    value      	(value Text 
|//#UC START# *523C27FF0169_INIT_IMPLEMETATION*¤		//#UC END# *523C27FF0169_INIT_IMPLEMETATION*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*523C27FF0169_SERVICE_IMPLEMETATION*"
		    value      	(value Text 
|//#UC START# *523C27FF0169_SERVICE_IMPLEMETATION*¤		final String unparsedTopics = request.getParameter("topics");¤		if(unparsedTopics != null) {¤			String[] parsedTopics = unparsedTopics.split(", ");¤			java.util.List<String> selectedTopics = Arrays.asList(parsedTopics);¤¤			if (selectedTopics == null || selectedTopics.size() == 0) {¤				return;¤			}¤			¤			StringBuffer listText = new StringBuffer();¤			¤			for (String selectedTopic : selectedTopics) {¤				listText.append(selectedTopic + LINE_FEED_FOR_SIMPLE_TEXT);¤			}¤¤			response.setHeader("Cache-Control", "max-age=5");¤			response.setHeader("Pragma", "");¤			response.setDateHeader("Expires", System.currentTimeMillis() + 300);¤			response.setContentType("text/plain;charset=UTF-8");¤			response.setHeader( "Content-Disposition", "attachment; filename=\"" + "export_topic.txt\"" );¤			try {¤				OutputStream os = response.getOutputStream();¤				InputStream is = new StringBufferInputStream(listText.toString());¤				int read=0;¤				byte[] bytes = new byte[BYTES_DOWNLOAD];¤			 ¤				while((read = is.read(bytes))!= -1){¤					os.write(bytes, 0, read);¤				}¤				os.flush();¤				os.close();	¤			} catch (Exception e) {¤				Logs.LOG_SEX(e);¤				throw new ServletException (e.getMessage());¤			}¤		}¤		¤		//#UC END# *523C27FF0169_SERVICE_IMPLEMETATION*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*523C27FF0169_CUSTOM_METHODS_AND_DATA*"
		    value      	(value Text 
|//#UC START# *523C27FF0169_CUSTOM_METHODS_AND_DATA*¤¤	private String LINE_FEED_FOR_SIMPLE_TEXT = "\n";¤	private static final int BYTES_DOWNLOAD = 1024;¤	//#UC END# *523C27FF0169_CUSTOM_METHODS_AND_DATA*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"WikiPageID (wiki)"
		    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/ExportToFileFindedTopics|523C27FF0169
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (wiki)"
		    value      	"wiki"))
	    quid       	"523C27FF0169"
	    documentation 	"Надо дать возможность пользователю после поиска, получить список найденных топиков в файле. Причем не важно какой поиск - карточек или запросов. Это нужно что бы эти топики открыть в арчи."
	    stereotype 	"KServletPlugin"
	    language   	"MDA Generator")
	(object Class "MoveOGVFromFolderAction"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"1380713202509718")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/DocCardChange/DocCardSupport/MoveOGVFromFolderAction.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*524C02F201F1_CUSTOM_IMPORT*"
		    value      	"//#UC START# *524C02F201F1_CUSTOM_IMPORT*¤import java.sql.PreparedStatement;¤import java.sql.ResultSet;¤import java.sql.Statement;¤import java.util.ArrayList;¤import java.util.HashMap;¤import java.util.List;¤import java.util.Map;¤¤import net.sf.hibernate.Query;¤import net.sf.hibernate.Session;¤import net.sf.hibernate.SessionFactory;¤¤import com.atlassian.confluence.core.ConfluenceActionSupport;¤import com.atlassian.confluence.labels.Label;¤import com.atlassian.confluence.labels.LabelManager;¤import com.atlassian.confluence.pages.Page;¤import com.atlassian.confluence.pages.PageManager;¤import com.atlassian.gzipfilter.org.apache.commons.lang.StringUtils;¤¤import ru.garant.MDProcess.DocCardChange.DocCardChangeDAO.GarDocDAO;¤import ru.garant.MDProcess.DocCardChange.DocCardChangeDAO.OGVLinksDAO;¤import ru.garant.MDProcess.DocCardChange.DocCardCommon.OGVLinksManager;¤import ru.garant.MDProcess.DocCardChange.Entities.DocCard;¤//#UC END# *524C02F201F1_CUSTOM_IMPORT*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*524C02F201F1_CUSTOM_CLASS_DEFINITION*"
		    value      	"//#UC START# *524C02F201F1_CUSTOM_CLASS_DEFINITION*¤//#UC END# *524C02F201F1_CUSTOM_CLASS_DEFINITION*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*524C02F201F1_ACTION_NAME*"
		    value      	(value Text 
|//#UC START# *524C02F201F1_ACTION_NAME*¤		return new String (getClass ().getName ());¤		//#UC END# *524C02F201F1_ACTION_NAME*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*524C02F201F1_CUSTOM_METHODS_AND_DATA*"
		    value      	(value Text 
|//#UC START# *524C02F201F1_CUSTOM_METHODS_AND_DATA*¤	¤	public String doMove() throws Exception{¤		if(getFromId() == 0 || getToId() == 0){¤			return SUCCESS;¤		}¤		Page fromPage = ContainerManager.Factory.get().getPageManager().getPage(getFromId());¤		Page toPage = ContainerManager.Factory.get().getPageManager().getPage(getToId());¤		¤		String ogvIds = getOgvIds(fromPage);¤		if(StringUtils.isNotEmpty(ogvIds)){¤			ogvIds += ", ";¤		}¤		ogvIds += getOgvIds(toPage);¤		¤		if(fromPage.getLabels().contains(getLabelOgv())){¤			if(StringUtils.isNotEmpty(ogvIds)){¤				ogvIds += ", ";¤			}¤			ogvIds += fromPage.getId();¤		}¤		¤		if(toPage.getLabels().contains(getLabelOgv())){¤			if(StringUtils.isNotEmpty(ogvIds)){¤				ogvIds += ", ";¤			}¤			ogvIds += toPage.getId();¤		}¤¤		Map<Long, OGVLinksDAO> ogvLinks = getOgvLinks(ogvIds);¤		Logs.LOG_W("MoveOGVFromFolderAction::getOgvLinks::size=" + ogvLinks.size());¤        List<Page> children = new ArrayList<Page>();¤        children.addAll(fromPage.getChildren());¤¤		if(toPage.getLabels().contains(getLabelOgv()) == false && fromPage.getLabels().contains(getLabelOgv())){¤			getLabelManager().addLabel(toPage, getLabelOgv());¤		}¤		if(toPage.getLabels().contains(getLabelUvs()) == false && fromPage.getLabels().contains(getLabelUvs())){¤			getLabelManager().addLabel(toPage, getLabelUvs());¤		}¤		addOgvLinks(ogvLinks, fromPage.getId(), toPage.getId());¤¤        ¤        movePages(children, toPage, areChildrenDocCard(fromPage), ogvLinks);¤		¤		//удаляем страницы¤		if(pagesForRemove_ != null && pagesForRemove_.size() > 0){¤			Logs.LOG_W("MoveOGVFromFolderAction::pagesForRemove::size=" + pagesForRemove_.size());¤			for(Page page : pagesForRemove_){¤				ContainerManager.Factory.get().getPageManager().removeContentEntity(page);¤			}¤		}¤		if(fromPage.getChildren().size() == 0){¤			removePage(fromPage);¤		}¤		¤		setPageId(getToId());¤		return SUCCESS;¤	}¤	¤	public String removePage(Page fromPage) throws Exception{¤		RemoveOGV removeAction = new RemoveOGV();¤		removeAction.setPage(fromPage);¤		removeAction.setPageManager(ContainerManager.Factory.get().getPageManager());¤		removeAction.doRemove();¤		return SUCCESS;¤	}¤	¤	private String getOgvIds(Page fromPage){¤		String ids = "";¤		for(Page page : fromPage.getChildren()){¤			if(page.getLabels().contains(getLabelOgv())){¤				if(StringUtils.isNotEmpty(ids)){¤					ids += ", ";¤				}¤				ids += page.getId();¤				ids += getOgvIds(page);¤			}else{¤				return "";¤			}¤		}¤		return ids;¤	}¤	¤	private boolean areChildrenDocCard(Page fromPage){¤		return (fromPage.getChildren().size() == 0)? false:((fromPage.getChildren().get(0).getLabels().contains(getLabelDocCard())) ? true : false);¤	}¤	¤	public void movePages(List<Page> movingPages, Page toPage, boolean childrenAreDocCard, Map<Long, OGVLinksDAO> ogvLinks){¤		for(Page movingPage : movingPages){¤			Page pageWithSameTitle = null;¤	        List<Page> children = new ArrayList<Page>();¤	        children.addAll(toPage.getChildren());¤			for(Page toPageChild : children){ ¤				if(movingPage.getTitle().equals(toPageChild.getTitle())){¤					pageWithSameTitle = toPageChild;¤				}¤			}¤			Logs.LOG_W("MoveOGVFromFolderAction::movePages::pageWithSameTitle=" + pageWithSameTitle + " childrenAreDocCard=" + childrenAreDocCard + " movingPageId=" + movingPage.getId() + " movingPageTitle=" + movingPage.getTitle());¤			//если ребенка с таким названием нет, то можно смело переносить¤			if(pageWithSameTitle == null){¤				//если переносимая страница-карточка, то надо менять по правилам¤				if(childrenAreDocCard){¤					setDocIssuer(movingPage.getId(), toPage.getId());¤					¤					ContainerManager.Factory.get().getPageManager().movePageAsChild(movingPage, toPage);¤				//иначе переносим	¤				}else{¤					ContainerManager.Factory.get().getPageManager().movePageAsChild(movingPage, toPage);¤				}¤			//если ребенок с таким названием уже есть	¤			}else{¤				//если переносимая страница-карточка, то выдаем ошибку ¤				if(childrenAreDocCard){¤					Logs.LOG_W("Карточка с таким названием уже существует! movingPageId=" + movingPage.getId() + " pageWithSameTitleId=" + pageWithSameTitle.getId());¤				}else{¤					//иначе переносим и добавляем недостающие метки и настройки¤					if(pageWithSameTitle.getLabels().contains(getLabelOgv()) == false && movingPage.getLabels().contains(getLabelOgv())){¤						getLabelManager().addLabel(pageWithSameTitle, getLabelOgv());¤					}¤					if(pageWithSameTitle.getLabels().contains(getLabelUvs()) == false && movingPage.getLabels().contains(getLabelUvs())){¤						getLabelManager().addLabel(pageWithSameTitle, getLabelUvs());¤					}¤					addOgvLinks(ogvLinks, movingPage.getId(), pageWithSameTitle.getId());¤			        List<Page> children2 = new ArrayList<Page>();¤			        children2.addAll(movingPage.getChildren());¤					movePages(children2, pageWithSameTitle, areChildrenDocCard(movingPage), ogvLinks);¤					if(pagesForRemove_ == null){¤						pagesForRemove_ = new ArrayList<Page>();¤					}¤					pagesForRemove_.add(movingPage);¤				}¤			}¤		}¤	}¤	¤	private void setDocIssuer(long docCardId, long docIssuer){¤		try{¤			DocCard doc = DocCard.Factory.get(docCardId);¤			doc.setDocIssuer(docIssuer);¤			doc.commit();¤		}catch(Exception ex){¤			Logs.LOG_SEX(ex);¤		}¤	}¤	¤	private void addOgvLinks(Map<Long, OGVLinksDAO> ogvLinks, long fromPageId, long toPageId){¤		try{¤			OGVLinksDAO fromPage = ogvLinks.get(fromPageId);¤			OGVLinksDAO toPage = ogvLinks.get(toPageId);¤			if(fromPage == null || toPage == null){¤				return;¤			}¤			¤			if(StringUtils.isEmpty(toPage.getLogin()) && StringUtils.isNotEmpty(fromPage.getLogin())){¤				toPage.setLogin(fromPage.getLogin());¤			}¤			if(StringUtils.isEmpty(toPage.getLoginOdUoUser()) && StringUtils.isNotEmpty(fromPage.getLoginOdUoUser())){¤				toPage.setLoginOdUoUser(fromPage.getLoginOdUoUser());¤			}¤			if(StringUtils.isEmpty(toPage.getLoginOdUoUserForProjectRequest()) && StringUtils.isNotEmpty(fromPage.getLoginOdUoUserForProjectRequest())){¤				toPage.setLoginOdUoUserForProjectRequest(fromPage.getLoginOdUoUserForProjectRequest());¤			}¤			if(StringUtils.isEmpty(toPage.getSourceWebSite()) && StringUtils.isNotEmpty(fromPage.getSourceWebSite())){¤				toPage.setSourceWebSite(fromPage.getSourceWebSite());¤			}¤			if(StringUtils.isEmpty(toPage.getSuffixForECopyFilePath()) && StringUtils.isNotEmpty(fromPage.getSuffixForECopyFilePath())){¤				toPage.setSuffixForECopyFilePath(fromPage.getSuffixForECopyFilePath());¤			}¤			if(StringUtils.isEmpty(toPage.getTitle()) && StringUtils.isNotEmpty(fromPage.getTitle())){¤				toPage.setTitle(fromPage.getTitle());¤			}¤			if(StringUtils.isEmpty(toPage.getRegex()) && StringUtils.isNotEmpty(fromPage.getRegex())){¤				toPage.setRegex(fromPage.getRegex());¤			}¤			OGVLinksManager.Factory.get(toPage.getPage()).doAdd(toPage);¤			Logs.LOG_W("MoveOGVFromFolderAction::addOgvLinks::" + toPage.getLogin() + " " + toPage.getLoginOdUoUser() + " " + toPage.getLoginOdUoUserForProjectRequest() + " " + toPage.getRegex() + " " + toPage.getTitle() + " " + toPage.getSourceWebSite() + " " + toPage.getSuffixForECopyFilePath());¤		}catch(Exception ex){¤			Logs.LOG_SEX(ex);¤		}¤	}¤	¤	public void setFromId(long fromId){¤		fromId_ = fromId;¤	}¤	¤	public void setToId(long toId){¤		toId_ = toId;¤	}¤¤	public long getFromId(){¤		return fromId_;¤	}¤	¤	public long getToId(){¤		return toId_;¤	}¤¤	¤	public void setPageId(long pageId){¤		pageId_ = pageId;¤	}¤¤	public long getPageId(){¤		return pageId_;¤	}¤¤	private long pageId_ = 0;¤¤	private long fromId_ = 0;¤	private long toId_ = 0;¤	¤	public Label getLabelDocCard(){¤		if(labelDocCard_ == null){¤			labelDocCard_ = ContainerManager.Factory.get().getLabelManager().getLabel("doccard");¤		}¤		return labelDocCard_;¤	}¤	¤	Label labelDocCard_ = null;¤	¤	public Label getLabelUvs(){¤		if(labelUvs_ == null){¤			labelUvs_ = ContainerManager.Factory.get().getLabelManager().getLabel("uvs");¤		}¤		return labelUvs_;¤	}¤	¤	Label labelUvs_ = null;¤¤	public Label getLabelOgv(){¤		if(labelOgv_ == null){¤			labelOgv_ = ContainerManager.Factory.get().getLabelManager().getLabel("ogv");¤		}¤		return labelOgv_;¤	}¤	¤	Label labelOgv_ = null;¤¤	¤	List<Page> pagesForRemove_ = null;¤	¤	public Map<Long, OGVLinksDAO> getOgvLinks(String ogvIds){¤		Map<Long, OGVLinksDAO> ogvLinks = new HashMap<Long, OGVLinksDAO>();¤		if(StringUtils.isNotEmpty(ogvIds)){¤			try{¤				String sql = "SELECT old FROM OGVLinksDAO old WHERE old.id in (" + ogvIds + ")";¤				Logs.LOG_I("START " + sql);¤				Query q = ContainerManager.Factory.get().getSession().createQuery(sql);¤				List<OGVLinksDAO> ogvList = q.list();¤				for(OGVLinksDAO link : ogvList){¤					ogvLinks.put(link.getId(), link);¤				}¤			}catch(Exception ex){¤				Logs.LOG_SEX(ex);¤			}¤		}¤		return ogvLinks;¤	}¤	¤	//#UC END# *524C02F201F1_CUSTOM_METHODS_AND_DATA*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"WikiPageID (wiki)"
		    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/MoveOGVFromFolderAction|524C02F201F1
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (wiki)"
		    value      	"wiki"))
	    quid       	"524C02F201F1"
	    documentation 	"перенос ОГВ"
	    stereotype 	"KActionPlugin"
	    superclasses 	(list inheritance_relationship_list
		(object Inheritance_Relationship
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"1382615777745364"))
		    quid       	"52690AE102E7"
		    supplier   	"Logical View::external::JavaConfluence::ConfluenceClassPack::ConfluenceActionSupport"
		    quidu      	"465ADCCA036B"))
	    language   	"MDA Generator")
	(object Class "UpdateConfigOGVTask"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"1382615024267266")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/DocCardChange/DocCardSupport/UpdateConfigOGVTask.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*526907F0010B_CUSTOM_IMPORT*"
		    value      	"//#UC START# *526907F0010B_CUSTOM_IMPORT*¤import com.atlassian.confluence.pages.Page;¤import java.sql.Statement;¤import java.sql.Connection;¤¤¤import ru.garant.shared.Core.Logs;¤//#UC END# *526907F0010B_CUSTOM_IMPORT*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*526907F0010B_CUSTOM_CLASS_DEFINITION*"
		    value      	"//#UC START# *526907F0010B_CUSTOM_CLASS_DEFINITION*¤//#UC END# *526907F0010B_CUSTOM_CLASS_DEFINITION*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*526907F0010B_CUSTOM_METHODS_AND_DATA*"
		    value      	(value Text 
|//#UC START# *526907F0010B_CUSTOM_METHODS_AND_DATA*¤	private Page content_;¤	private byte operation_;¤	¤	public UpdateConfigOGVTask(Page content, byte operation) {¤		this.content_ = content;¤		this.operation_ = operation;¤	}¤¤	@Override¤	public void doRun() {¤		try{¤			String sql = null;¤			if(operation_ == INSERT){¤				Logs.LOG_D ("UpdateConfigOGVTask::doRun before operation INSERT");¤				sql = "INSERT INTO gar_matpath_for_ogv(contentid, mp) " +¤							 "select gar_ogv_links.contentid, concat(" +¤							 "ifnull((select c.TITLE from (confancestors ca join content c) where ((ca.ANCESTORPOSITION = 1) and (ca.DESCENDENTID = gar_ogv_links.CONTENTID) and (c.CONTENTID = ca.ANCESTORID))),''),'/'" +¤							 ",ifnull((select c.TITLE from (confancestors ca join content c) where ((ca.ANCESTORPOSITION = 2) and (ca.DESCENDENTID = gar_ogv_links.CONTENTID) and (c.CONTENTID = ca.ANCESTORID))),''),'/'" +¤							 ",ifnull((select c.TITLE from (confancestors ca join content c) where ((ca.ANCESTORPOSITION = 3) and (ca.DESCENDENTID = gar_ogv_links.CONTENTID) and (c.CONTENTID = ca.ANCESTORID))),''),'/'" +¤							 ",ifnull((select c.TITLE from (confancestors ca join content c) where ((ca.ANCESTORPOSITION = 4) and (ca.DESCENDENTID = gar_ogv_links.CONTENTID) and (c.CONTENTID = ca.ANCESTORID))),''),'/'" +¤							 ",ifnull((select c.TITLE from (confancestors ca join content c) where ((ca.ANCESTORPOSITION = 5) and (ca.DESCENDENTID = gar_ogv_links.CONTENTID) and (c.CONTENTID = ca.ANCESTORID))),''),'/'" +¤							 ",ifnull((select c.TITLE from (confancestors ca join content c) where ((ca.ANCESTORPOSITION = 6) and (ca.DESCENDENTID = gar_ogv_links.CONTENTID) and (c.CONTENTID = ca.ANCESTORID))),''),'/'" +¤							 ",ifnull((select c.TITLE from (confancestors ca join content c) where ((ca.ANCESTORPOSITION = 7) and (ca.DESCENDENTID = gar_ogv_links.CONTENTID) and (c.CONTENTID = ca.ANCESTORID))),''),'/'" +¤							 ",ifnull((select c.TITLE from (confancestors ca join content c) where ((ca.ANCESTORPOSITION = 8) and (ca.DESCENDENTID = gar_ogv_links.CONTENTID) and (c.CONTENTID = ca.ANCESTORID))),''),'/'" +¤							 ",ifnull((select c.TITLE from (confancestors ca join content c) where ((ca.ANCESTORPOSITION = 9) and (ca.DESCENDENTID = gar_ogv_links.CONTENTID) and (c.CONTENTID = ca.ANCESTORID))),''),'/')" +¤							 "FROM gar_ogv_links WHERE gar_ogv_links.contentid=" + content_.getId();¤			}else if(operation_ == DELETE){¤				Logs.LOG_D ("UpdateConfigOGVTask::doRun before operation DELETE");¤				sql = "DELETE FROM gar_matpath_for_ogv WHERE gar_matpath_for_ogv.contentid=" + content_.getId();¤			}¤			Connection con = ContainerManager.Factory.get().getSession().connection();¤			Statement stat = con.createStatement();¤			stat.executeUpdate(sql);¤			stat.close();¤		}catch(Exception e){¤			Logs.LOG_SEX(e);¤		}¤		Logs.LOG_D ("UpdateConfigOGVTask::doRun after operation");¤	}¤¤	@Override¤	protected boolean runInTransaction() {¤		// TODO Auto-generated method stub¤		return true;¤	}¤¤	@Override¤	public boolean isInSingleThread() {¤		// TODO Auto-generated method stub¤		return false;¤	}¤	¤	public static final byte INSERT = 0;¤	public static final byte DELETE = 1;¤	//#UC END# *526907F0010B_CUSTOM_METHODS_AND_DATA*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"WikiPageID (wiki)"
		    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/UpdateConfigOGVTask|526907F0010B
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (wiki)"
		    value      	"wiki"))
	    quid       	"526907F0010B"
	    documentation 	"для обновления таблицы путей gar_matpath_for_ogv, запускается в отдельном потоке"
	    stereotype 	"SimpleClass"
	    superclasses 	(list inheritance_relationship_list
		(object Inheritance_Relationship
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"1382615114698439"))
		    quid       	"5269084A02B9"
		    supplier   	"Logical View::shared::ConfluenceCore::TaskSupport::PostProcessorTask"
		    quidu      	"4A83AEE0035D"))
	    language   	"MDA Generator")
	(object Class "MoveOGVSettingsToOGVWithRightPathJob"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"1394189822637648")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Factory auto reg"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Factory default impl"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Servant Pool"
		    value      	"none")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"cron-expression"
		    value      	"0 0 5 * * ?")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"debug log"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"factory priority"
		    value      	"0")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"local supervisor"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"need UC"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"repeated"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"singleton"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/DocCardChange/DocCardSupport/MoveOGVSettingsToOGVWithRightPathJob.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*5319A5FE027C_CUSTOM_IMPORT*"
		    value      	"//#UC START# *5319A5FE027C_CUSTOM_IMPORT*¤import java.util.Date;¤import java.util.HashMap;¤import java.util.HashSet;¤import java.util.List;¤import java.util.Map;¤import java.util.Set;¤¤import ru.garant.MDProcess.DocCardChange.DocCardChangeDAO.OGVLinksDAO;¤import ru.garant.MDProcess.DocCardChange.DocCardCommon.DocCardManager;¤import ru.garant.MDProcess.DocCardChange.DocCardCommon.InfoForAutomaticMovingGardocsManager;¤import ru.garant.MDProcess.DocCardChange.DocCardCommon.OGVLinksManager;¤¤import net.sf.hibernate.Query;¤¤import com.atlassian.confluence.labels.Label;¤import com.atlassian.confluence.pages.Page;¤import com.atlassian.gzipfilter.org.apache.commons.lang.StringUtils;¤//#UC END# *5319A5FE027C_CUSTOM_IMPORT*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*5319A5FE027C_CUSTOM_CLASS_DEFINITION*"
		    value      	"//#UC START# *5319A5FE027C_CUSTOM_CLASS_DEFINITION*¤//#UC END# *5319A5FE027C_CUSTOM_CLASS_DEFINITION*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*5319A5FE027C_DO_EXECUTE_IMPLEMETATION*"
		    value      	(value Text 
|//#UC START# *5319A5FE027C_DO_EXECUTE_IMPLEMETATION*¤		super.doExecute(jec);¤		//#UC END# *5319A5FE027C_DO_EXECUTE_IMPLEMETATION*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*5319A5FE027C_CUSTOM_METHODS_AND_DATA*"
		    value      	(value Text 
|//#UC START# *5319A5FE027C_CUSTOM_METHODS_AND_DATA*¤	@Override¤	protected void executeJob() {¤		Logs.LOG_I("MoveOGVSettingsToOGVWithRightPathJob::start");¤		long time = new Date().getTime();¤		Map<String, Set<Long>> infoForMovingGardocs = InfoForAutomaticMovingGardocsManager.Factory.get().getInfoForMovingGardocs();¤		process(infoForMovingGardocs);¤		Logs.LOG_I("MoveOGVSettingsToOGVWithRightPathJob::end::time=" + (new Date().getTime() - time));¤	}¤¤	¤	@Override¤	protected boolean isNeedWriteTransaction() {¤		return true;¤	}¤	¤	public void process(final Map<String, Set<Long>> infoForMovingGardocs){¤		int count = 0;¤		for(String key : infoForMovingGardocs.keySet()){¤			try{¤				String[] keys = StringUtils.split(key, "+");¤				Long oldOgvId = Long.parseLong(keys[0]);¤				Long newOgvId = Long.parseLong(keys[1]);¤				Set<Long> gardocs = infoForMovingGardocs.get(key);¤				Page ogvTo = ContainerManager.Factory.get().getPageManager().getPage(newOgvId);¤				//если до переноса не было карточек и переносили только из одного ОГВ, то меняем настройки нового ОГВ¤				if(gardocs.size() == DocCardManager.Factory.get().getCountDocCardsFromOgv(ogvTo.getId())){¤					changeOgvSettings(oldOgvId, newOgvId);¤				}¤			}catch(Exception ex){¤				Logs.LOG_SEX(ex);¤			}¤			count++;¤			if(count % 1000 == 0){¤				Logs.LOG_I("MoveOGVSettingsToOGVWithRightPathJob::process::" + count + "/" + infoForMovingGardocs.keySet().size());¤			}¤		}¤	}¤	¤	public void changeOgvSettings(final Long oldOgvId, final Long newOgvId){¤		// переносим настройки¤		Logs.LOG_W("MoveOGVSettingsToOGVWithRightPathJob::changeOgvSettings::oldOgvId=" + oldOgvId + " newOgvId=" + newOgvId);¤		Page oldPage = ContainerManager.Factory.get().getPageManager().getPage(oldOgvId);¤		Page newPage = ContainerManager.Factory.get().getPageManager().getPage(newOgvId);¤¤		OGVLinksDAO oldDocissuer = OGVLinksManager.Factory.get(oldPage.getSpaceKey()).getOgvById(oldOgvId);¤		OGVLinksDAO newDocissuer = OGVLinksManager.Factory.get(newPage.getSpaceKey()).getOgvById(newOgvId);¤		//если не задано новое ОГВ в OGVLinksDAO. создаем его¤		if(newDocissuer == null){¤			newDocissuer = new OGVLinksDAO();¤			newDocissuer.setId(newOgvId);¤			newDocissuer.setPage(newPage);¤			OGVLinksManager.Factory.get(newPage.getSpaceKey()).doAdd(newDocissuer);¤		}¤		//если существует старый ОГВ в OGVLinksDAO, то переносим оттуда настройки¤		if(oldDocissuer != null){¤			if(StringUtils.isEmpty(newDocissuer.getLogin())){¤				newDocissuer.setLogin(oldDocissuer.getLogin());¤			}¤			if(StringUtils.isEmpty(newDocissuer.getLoginOdUoUser())){¤				newDocissuer.setLoginOdUoUser(oldDocissuer.getLoginOdUoUser());¤			}¤			if(StringUtils.isEmpty(newDocissuer.getLoginOdUoUserForProjectRequest())){¤				newDocissuer.setLoginOdUoUserForProjectRequest(oldDocissuer.getLoginOdUoUserForProjectRequest());¤			}	¤			if(StringUtils.isEmpty(newDocissuer.getRegex())){¤				newDocissuer.setRegex(oldDocissuer.getRegex());¤			}¤			if(StringUtils.isEmpty(newDocissuer.getSourceWebSite())){¤				newDocissuer.setSourceWebSite(oldDocissuer.getSourceWebSite());¤			}¤			if(StringUtils.isEmpty(newDocissuer.getSuffixForECopyFilePath())){¤				newDocissuer.setSuffixForECopyFilePath(oldDocissuer.getSuffixForECopyFilePath());¤			}¤			if(StringUtils.isEmpty(newDocissuer.getTitle())){¤				newDocissuer.setTitle(oldDocissuer.getTitle());¤			}	¤		}¤		//добавляем метки ogv и uvs в новый ОГВ, если их там нет¤		List<Label> oldDocissuerLabels = oldPage.getLabels();¤		List<Label> newDocissuerLabels = newPage.getLabels();¤		Label labelOgv = DpoUvsHelper.getOGVLabel();¤		Label labelUvs = DpoUvsHelper.getUvsLabel();¤		if(oldDocissuerLabels.contains(labelOgv) && (newDocissuerLabels.contains(labelOgv) == false)){¤			ContainerManager.Factory.get().getLabelManager().addLabel(newPage, labelOgv);¤		}¤¤		if(oldDocissuerLabels.contains(labelUvs) && (newDocissuerLabels.contains(labelUvs) == false)){¤			ContainerManager.Factory.get().getLabelManager().addLabel(newPage, labelUvs);¤		}¤	}¤	//#UC END# *5319A5FE027C_CUSTOM_METHODS_AND_DATA*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"WikiPageID (wiki)"
		    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/MoveOGVSettingsToOGVWithRightPathJob|5319A5FE027C
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (wiki)"
		    value      	"wiki"))
	    quid       	"5319A5FE027C"
	    documentation 	"При переносе карточек в новое ОГВ по правильному пути из ХД  должны меняться настройки ОГВ, если в новом ОГВ до переноса не было карточек и карточки были перенесены из одного ОГВ"
	    stereotype 	"KJobPlugin"
	    superclasses 	(list inheritance_relationship_list
		(object Inheritance_Relationship
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"1394189887297347"))
		    quid       	"5319A63F0128"
		    supplier   	"Logical View::MDProcess::DocCardChange::DocCardSupport::GarDocAbstractJob"
		    quidu      	"53E4BF9000E2"))
	    language   	"MDA Generator")
	(object Class "FindGardocsWithWrongPathInOGV"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"1395036761340477")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Factory auto reg"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Factory default impl"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Servant Pool"
		    value      	"none")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"cron-expression"
		    value      	"0 0 23 * * ?")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"debug log"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"factory priority"
		    value      	"0")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"local supervisor"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"need UC"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"repeated"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"singleton"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/DocCardChange/DocCardSupport/FindGardocsWithWrongPathInOGV.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*532692590153_CUSTOM_IMPORT*"
		    value      	"//#UC START# *532692590153_CUSTOM_IMPORT*¤import ru.garant.MDProcess.DocCardChange.DocCardChangeDAO.GarDocDAO;¤import ru.garant.MDProcess.DocCardChange.DocCardChangeDAO.InfoForMovingGardocsDAO;¤import ru.garant.MDProcess.DocCardChange.DocCardChangeDAO.UVSQuestDAO;¤import ru.garant.MDProcess.DocCardChange.DocCardCommon.DoInNewTransactionCallback;¤import ru.garant.MDProcess.DocCardChange.DocCardCommon.DocCardManager;¤import ru.garant.MDProcess.DocCardChange.DocCardCommon.InfoForAutomaticMovingGardocsManager;¤import ru.garant.MDProcess.DocCardChange.DocCardCommon.OGVLinksManager;¤import ru.garant.MDProcess.DocCardChange.DocCardSupport.TransactionDecorator;¤¤import com.atlassian.user.User;¤¤import java.util.*;¤¤import net.sf.hibernate.FlushMode;¤import net.sf.hibernate.HibernateException;¤import net.sf.hibernate.Query;¤¤import org.springframework.orm.hibernate.SessionFactoryUtils;¤¤import com.atlassian.confluence.pages.Page;¤import com.atlassian.confluence.spaces.Space;¤import com.atlassian.confluence.user.AuthenticatedUserThreadLocal;¤¤import com.atlassian.gzipfilter.org.apache.commons.lang.StringUtils;¤//#UC END# *532692590153_CUSTOM_IMPORT*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*532692590153_CUSTOM_CLASS_DEFINITION*"
		    value      	"//#UC START# *532692590153_CUSTOM_CLASS_DEFINITION*¤//#UC END# *532692590153_CUSTOM_CLASS_DEFINITION*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*532692590153_DO_EXECUTE_IMPLEMETATION*"
		    value      	(value Text 
|//#UC START# *532692590153_DO_EXECUTE_IMPLEMETATION*¤		super.doExecute(jec);¤		//#UC END# *532692590153_DO_EXECUTE_IMPLEMETATION*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*532692590153_CUSTOM_METHODS_AND_DATA*"
		    value      	(value Text 
|//#UC START# *532692590153_CUSTOM_METHODS_AND_DATA*¤	@Override¤	protected void executeJob() {¤		Logs.LOG_I("FindGardocsWithWrongPathInOGV::start");¤		InfoForAutomaticMovingGardocsManager.Factory.get().removeAllRowsFromTableForAddInformationForMovingSettingsOgv();¤		SessionFactoryUtils.getSession(ru.garant.shared.ConfluenceCore.Helpers.ContainerManager.Factory.get()¤				.getSessionFactory(), false).setFlushMode(FlushMode.NEVER);¤¤//		List<Space> spaces = DpoUvsHelper.getSpacesWhichHasGardocSettings();¤//		for(Space space : spaces){¤//			String spaceKey = space.getKey();¤		final String spaceKey = "DPOUVS";¤			long time = new Date().getTime();¤			Logs.LOG_I("FindGardocsWithWrongPathInOGV::start::spaceKey=" + spaceKey);¤			String robotName = DpoUvsHelper.getRobotUsername(spaceKey);¤			User user = ContainerManager.Factory.get().getUserAccessor().getUser(robotName);¤			AuthenticatedUserThreadLocal.setUser(user);¤	¤			synchronizationMDPAndHD(spaceKey);¤			Logs.LOG_I("FindGardocsWithWrongPathInOGV::end::spaceKey=" + spaceKey + " time=" + (new Date().getTime() - time));¤//		}¤	}¤	¤	public void synchronizationMDPAndHD(final String spaceKey){¤		final int[] currentPosition = new int[1];¤		currentPosition[0] = 0;¤		final List<Long> ogvFolderIds = DpoUvsHelper.getOGVFolderIds(spaceKey);¤		final List<Long> ogvFolderIdsFromAllSpaces =DpoUvsHelper.getOGVFolderIds("");¤		final Map<String, Long> ogvs = OGVLinksManager.Factory.get(spaceKey).getOGVIdsAndTitles(ogvFolderIds);¤		final boolean[] isContinued = new boolean[1];¤		isContinued[0] = true;¤		//цикл по всем докам, берем по 10000 за раз ¤		do{¤			new TransactionDecorator(true).doInNewTransaction(new DoInNewTransactionCallback() {¤				public void execute() {¤//					List<GarDocDAO> docCardAttributes = InfoForAutomaticMovingGardocsManager.Factory.get().getMDPGarDocs(currentPosition[0], GARDOCS_LIMIT, spaceKey);¤					List<GarDocDAO> docCardAttributes = DocCardManager.Factory.get().getDocCardsFromOgv(241696957l);¤/*					List<GarDocDAO> docCardAttributes = new ArrayList<GarDocDAO>();¤					GarDocDAO gardoc = null;¤					try {¤						gardoc = GarDocDAO.get(385974845l);¤					} catch (HibernateException e) {¤						Logs.LOG_SEX(e);¤					}¤					docCardAttributes.add(gardoc);¤*/					¤					//у всех наших топиков из этих доков берет ОГВ путь в ОПП(путей может быть больше 1 из-за доп. ОГВ) ¤					//находим путь к ОГВ в ХД для этого дока¤					Map<Long, Set<String>> oppTopicsWithPath = InfoForAutomaticMovingGardocsManager.Factory.get().checkMDPGarDocsInHD(docCardAttributes, spaceKey);¤					findAndMoveDocCards(docCardAttributes, oppTopicsWithPath, ogvs, spaceKey, ogvFolderIdsFromAllSpaces);¤					currentPosition[0] += GARDOCS_LIMIT;¤		¤					Logs.LOG_I("FindGardocsWithWrongPathInOGV::currentPosition=" + currentPosition[0]);¤//					if(docCardAttributes.size() == 0){¤						isContinued[0] = false;¤//					}¤				}¤			});			¤¤		}while(isContinued[0]);// && currentPosition < GARDOCS_LIMIT * 10);¤	}¤	¤	public static final int GARDOCS_LIMIT = 10000;¤¤	@Override¤	protected boolean isNeedWriteTransaction() {¤		return true;¤	}¤¤¤	public void findAndMoveDocCards(final List<GarDocDAO> docCardAttributes, final Map<Long, Set<String>> checked, final Map<String, Long> ogvsMySpace, final String spaceKey, final List<Long> ogvFolderIdsFromAllSpaces){¤		long time = new Date().getTime();¤		int count = 0;¤		¤		for (GarDocDAO gardoc : docCardAttributes) {¤			try{¤				long oldOgvId = gardoc.getDocIssuer();¤				final String myOGVAsHD = InfoForAutomaticMovingGardocsManager.Factory.get().convertMDPOGVToHDSource (gardoc.getDocIssuer(), ogvFolderIdsFromAllSpaces);¤				Set<String> hddata = checked.get(gardoc.getTopic());¤				//этот путь NULL?¤/*				if (hddata == null) {¤					//если ДА¤					Page ogv = ContainerManager.Factory.get().getPageManager().getPage(oldOgvId);¤					// ОГВ документа с меткой uvs?¤					if(ogv.getLabels().contains(DpoUvsHelper.getUvsLabel())){¤						// если ДА¤						continue;¤					}else{¤						//если НЕТ¤						hddata = new HashSet<String>();¤						hddata.add(myOGVAsHD);¤					}¤				}	¤				¤				String hdOgv = hddata.iterator().next();¤				if(hddata.contains(myOGVAsHD)){¤					hdOgv = myOGVAsHD;¤				}¤*/				¤				//находим ХД-шный путь к ОГВ у нас¤				long newOgvId = 658604034l;¤/*				long newOgvId = getOgvIdByName(hdOgv, ogvFolderIdsFromAllSpaces);¤				//этот путь NULL?¤				if (newOgvId == 0) {¤					//если ДА¤					//берем следующий документ, продолжаем цикл¤					Logs.LOG_W("FindGardocsWithWrongPathInOGV::findAndMoveDocCards::Нет ОГВ по пути path=" + hdOgv);¤					continue;¤				}else{						¤					//если НЕТ¤					//находим путь к ОГВ дока у нас с учетом спэйса¤					//пути совпадают¤					//если ДА¤					if(oldOgvId == newOgvId){¤						//ничего не делаем¤						continue;¤					//если НЕТ	¤					}else{¤*/						//переносим в путь2¤						InfoForAutomaticMovingGardocsManager.Factory.get().moveGarDocToAnotherMainOGV(gardoc, newOgvId);¤						addInformationForMovingGardocs(oldOgvId, newOgvId, gardoc.getId());¤						count++;¤					//конец если¤//					}¤				//конец если	¤//				}¤			}catch(Exception e){¤				Logs.LOG_W("ERROR with docid=" + gardoc.getId());¤				Logs.LOG_SEX(e);¤			}¤		//конец цикла¤		}¤		Logs.LOG_W("FindGardocsWithWrongPathInOGV::findDocCards::countMovedGardocs=" + count + " time=" + (new Date().getTime() - time));¤	}¤	¤	public long getOgvIdByName (final String issuerName, final List<Long> ogvFolderIds) {¤		String[] path = StringUtils.split(issuerName, "\\");¤		String name = (path.length > 1)?path[path.length - 1]:issuerName;¤		¤		String s = name.trim().replaceAll("A", "А").replaceAll("P", "Р");¤		try {¤			String[] queries = {¤				"select ogv.page.id from OGVLinksDAO as ogv where ogv.page.title = '" + s + "'"¤				, "select syn.contentId from OGVSynonymDAO as syn, Page as page where syn.synonym = '" + s + "' and page.id=syn.contentId"¤			};¤			for (String q : queries) {¤				List ret = ContainerManager.Factory.get().getSession().createQuery (q).list ();¤				if (ret != null){¤					if (ret.size () == 1 && path.length == 1) {¤						long id = (Long)ret.get (0);¤						return id;¤					}else if (ret.size () > 0 && path.length > 1){¤						return findOGVLinkId(ret, issuerName, ogvFolderIds, s);¤					}¤				}¤				¤			}¤		} catch (Exception e) {¤			Logs.LOG_SEX(e);¤		}¤		return 0;¤	}¤	¤	private long findOGVLinkId(List ret, String issuerName, final List<Long> ogvFolderIds, final String ogvName){¤		List<Page> pages = new ArrayList<Page>();¤		for(long id : (List<Long>)ret){¤			Page page = ContainerManager.Factory.get().getPageManager().getPage(id);¤			/*¤			Page parent = page;¤			boolean hasAllPath = true;¤			int i = path.length - 2;¤			do{¤				parent = parent.getParent();¤				if(parent != null && parent.getTitle().equals(path[i]) == false){¤					hasAllPath = false;¤				}¤				i--;¤			}while(parent != null && hasAllPath && i >= 0);¤			*/¤			String findedPagePath = DpoUvsHelper.getPagePathFromPageId(id, ogvFolderIds) + "\\" + ogvName;¤			if(issuerName.equals(findedPagePath)){¤				pages.add(page);¤			}¤		}¤		if(pages.size() == 0){¤			return 0;¤		}else if (pages.size() == 1){¤			return pages.get(0).getId();¤		}else{¤			long hasPageUvsId = 0;¤			for(Page page : pages){¤				if(hasPageUvsId > 0){¤					Logs.LOG_W("FindGardocsWithWrongPathInOGV::findAndMoveDocCards::Нашли несколько ОГВ с меткой uvs по пути path=" + issuerName);¤					return 0;¤				}¤				if(page.getLabels().contains(DpoUvsHelper.getUvsLabel())){¤					hasPageUvsId = page.getId();¤				}¤			}¤			if(hasPageUvsId > 0){¤				return hasPageUvsId;¤			}¤		}¤		return 0;¤	}¤¤¤	¤	public void addInformationForMovingGardocs(final long fromOgv, final long toOgv, final long docCardId){¤		new TransactionDecorator(true).doInNewTransaction(new DoInNewTransactionCallback() {¤			public void execute() {¤				InfoForMovingGardocsDAO info = InfoForMovingGardocsDAO.make(docCardId, fromOgv, toOgv);¤				InfoForAutomaticMovingGardocsManager.Factory.get().addInfoForMovingGardocs(info);¤			}¤		});¤	}¤	//#UC END# *532692590153_CUSTOM_METHODS_AND_DATA*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"WikiPageID (wiki)"
		    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/FindGardocsWithWrongPathInOGV|532692590153
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (wiki)"
		    value      	"wiki"))
	    quid       	"532692590153"
	    documentation 	"Находит все карточки, у которых ОГВ лежит не по правильному пути и переносит их или добавляет недостающие дополнительные ОГВ или удаляет те, которых нет в ХД"
	    stereotype 	"KJobPlugin"
	    superclasses 	(list inheritance_relationship_list
		(object Inheritance_Relationship
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"1395036831813509"))
		    quid       	"5326929F032C"
		    supplier   	"Logical View::MDProcess::DocCardChange::DocCardSupport::GarDocAbstractJob"
		    quidu      	"53E4BF9000E2"))
	    language   	"MDA Generator")
	(object Class "RemoveNotInHDNoAttachmentsOgvsJob"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"1396333677253198")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Factory auto reg"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Factory default impl"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Servant Pool"
		    value      	"none")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"cron-expression"
		    value      	"0 0/5 * * * ?")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"debug log"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"factory priority"
		    value      	"0")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"local supervisor"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"need UC"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"repeated"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"singleton"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/DocCardChange/DocCardSupport/RemoveNotInHDNoAttachmentsOgvsJob.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*533A5C6D00FD_CUSTOM_IMPORT*"
		    value      	"//#UC START# *533A5C6D00FD_CUSTOM_IMPORT*¤import com.atlassian.confluence.labels.Label;¤import com.atlassian.confluence.pages.Page;¤import com.atlassian.confluence.setup.bandana.ConfluenceBandanaContext;¤import com.atlassian.confluence.spaces.Space;¤¤import net.sf.hibernate.FlushMode;¤¤import org.springframework.orm.hibernate.SessionFactoryUtils;¤¤import ru.garant.MDProcess.ConfluencePlugins.CommonVelocityContext.GlobalHelper;¤import ru.garant.MDProcess.DocCardChange.DocCardCommon.InfoForAutomaticMovingGardocsManager;¤import ru.garant.MDProcess.DocCardChange.DocCardCommon.OGVLinksManager;¤import ru.garant.MDProcess.DocCardChange.DocCardSupport.TransactionDecorator;¤import ru.garant.MDProcess.DocCardChange.DocCardCommon.DoInNewTransactionCallback;¤¤import java.sql.*;¤import java.text.*;¤import java.util.ArrayList;¤import java.util.Calendar;¤import java.util.Date;¤import java.util.HashMap;¤import java.util.HashSet;¤import java.util.List;¤import java.util.Set;¤import java.util.Map;¤//#UC END# *533A5C6D00FD_CUSTOM_IMPORT*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*533A5C6D00FD_CUSTOM_CLASS_DEFINITION*"
		    value      	"//#UC START# *533A5C6D00FD_CUSTOM_CLASS_DEFINITION*¤//#UC END# *533A5C6D00FD_CUSTOM_CLASS_DEFINITION*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*533A5C6D00FD_DO_EXECUTE_IMPLEMETATION*"
		    value      	(value Text 
|//#UC START# *533A5C6D00FD_DO_EXECUTE_IMPLEMETATION*¤		super.doExecute(jec);¤		//#UC END# *533A5C6D00FD_DO_EXECUTE_IMPLEMETATION*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*533A5C6D00FD_CUSTOM_METHODS_AND_DATA*"
		    value      	(value Text 
|//#UC START# *533A5C6D00FD_CUSTOM_METHODS_AND_DATA*¤	@Override¤	protected void executeJob() {¤		Logs.LOG_I("RemoveNotInHDNoAttachmentsOgvsJob::start");¤//		final String spaceKey = "DPOUVS";¤/*		if(hasNotExecuteJob()){¤			Logs.LOG_I("RemoveNotInHDNoAttachmentsOgvsJob::end::NotExecuteJob");¤			return;¤		}¤*/¤		List<Space> spaces = DpoUvsHelper.getSpacesWhichHasGardocSettings();¤		for(Space space : spaces){¤			String spaceKey = space.getKey();¤			Logs.LOG_I("RemoveNotInHDNoAttachmentsOgvsJob::start::spaceKey=" + spaceKey);¤			long time = new Date().getTime();¤			SessionFactoryUtils.getSession(ru.garant.shared.ConfluenceCore.Helpers.ContainerManager.Factory.get()¤					.getSessionFactory(), false).setFlushMode(FlushMode.NEVER);¤			synchronizationMDPAndHDOgvs(spaceKey);¤			Logs.LOG_I("RemoveNotInHDNoAttachmentsOgvsJob::end::time=" + (new Date().getTime() - time) + " spaceKey=" + spaceKey);¤			if(getHasError()){¤				return;¤			}¤		}¤		¤//		setNextTimeExecute();¤	}¤	¤	public boolean hasNotExecuteJob(){¤		Date currentDate = getCurrentDate();¤		Date initialDate = getInitalTime();¤		if(initialDate == null || initialDate.after(currentDate) || (isNightInterval(currentDate) == false)){¤			return true;¤		}	¤		return false;¤	}¤	¤	public Date getCurrentDate(){¤		return new Date();¤	}¤	¤	private boolean isNightInterval(Date currentDate){¤		Calendar calBeginInterval = Calendar.getInstance();¤		calBeginInterval.set(Calendar.HOUR_OF_DAY, 2);¤		calBeginInterval.set(Calendar.MINUTE, 0);¤		calBeginInterval.set(Calendar.SECOND, 0);¤		¤		Calendar calEndInterval = Calendar.getInstance();¤		calEndInterval.set(Calendar.HOUR_OF_DAY, 6);¤		calEndInterval.set(Calendar.MINUTE, 0);¤		calBeginInterval.set(Calendar.SECOND, 0);¤		if(currentDate.after(calBeginInterval.getTime()) && currentDate.before(calEndInterval.getTime())){¤			return true;¤		}¤		return false;¤	}¤	¤	private Date getInitalTime(){¤		String nextTimeExecute = (String)ContainerManager.Factory.get ().getBandanaManager ().getValue (¤				ConfluenceBandanaContext.GLOBAL_CONTEXT, NEXT_TIME_EXECUTE¤				);¤		if(nextTimeExecute == null){¤			return null;¤		}¤		Date date = null;¤		try {¤			date = new SimpleDateFormat("dd.MM.yyyy HH:mm").parse(nextTimeExecute);¤		} catch (ParseException e) {¤			// TODO Auto-generated catch block¤			e.printStackTrace();¤		}¤		return date;¤	}¤	¤	public void setNextTimeExecute(){¤		Calendar cal = Calendar.getInstance();¤		cal.set(Calendar.DAY_OF_MONTH, cal.get(Calendar.DAY_OF_MONTH) + 1);¤		cal.set(Calendar.HOUR_OF_DAY, 2);¤		cal.set(Calendar.MINUTE, 0);¤		cal.set(Calendar.SECOND, 0);¤¤		ContainerManager.Factory.get ().getBandanaManager ().setValue (¤				ConfluenceBandanaContext.GLOBAL_CONTEXT, NEXT_TIME_EXECUTE, new SimpleDateFormat("dd.MM.yyyy HH:mm").format(cal.getTime())¤				);¤	}¤¤	public final static String NEXT_TIME_EXECUTE = "RemoveNotInHDNoAttachmentsOgvsJob.NextTimeExecute";¤	¤	@Override¤	protected boolean isNeedWriteTransaction() {¤		return true;¤	}¤	¤	public void synchronizationMDPAndHDOgvs(final String spaceKey){¤/*		long time = new Date().getTime();¤		List<Long> ogvLinksIds = OGVLinksManager.Factory.get(spaceKey).getOGVIds();¤		Logs.LOG_D("RemoveNotInHDNoAttachmentsOgvsJob::synchronizationMDPAndHDOgvs::getOGVIds::time=" + (new Date().getTime() - time));¤		*/¤		long time = new Date().getTime();¤		List<Long> folderIds = DpoUvsHelper.getOGVFolderIds(spaceKey);¤		Map<Long, Byte> docCardParents = getPagesNoChildrenOrChildrenDocCardsAndNotDocCardAndNotUvsQueries(spaceKey, folderIds);¤		Logs.LOG_D("RemoveNotInHDNoAttachmentsOgvsJob::synchronizationMDPAndHDOgvs::getPagesNoChildrenAndNotDocCardAndNotUvsQueries::time=" + (new Date().getTime() - time));¤		List<Long> doccardsAdditionalOgvs = InfoForAutomaticMovingGardocsManager.Factory.get().getDoccardsAdditionalOgvs(spaceKey);¤		process(docCardParents, doccardsAdditionalOgvs, folderIds, spaceKey);¤	}¤	¤	private boolean hasPathExcludeOgvPaths(String spaceKey, Page ogvPage, List<Long> ogvIdsWithLabel){¤		ConfluenceBandanaContext context = new ConfluenceBandanaContext(spaceKey);¤		List<String> excludePaths = (List<String>) ContainerManager.Factory.get ().getBandanaManager ().getValue (context, "ADD_OGVS_FROM_OPP_EXCLUDE_PATHS");¤		¤		if(excludePaths != null && excludePaths.size() > 0){¤			String ogvNameWithPath = OGVLinksManager.Factory.get(spaceKey).getOGVPath(ogvPage.getId(), ogvIdsWithLabel)  + "\\" + ogvPage.getTitle();¤			for(String excludePath : excludePaths){¤				if(ogvNameWithPath.toUpperCase().contains(excludePath.toUpperCase())){¤					return true;¤				}¤			}¤		}¤		return false;¤	}¤	¤	public Map<Long, Byte> getPagesNoChildrenOrChildrenDocCardsAndNotDocCardAndNotUvsQueries(final String spaceKey, final List<Long> folderIds){¤		Map<Long, Byte> docCardParents = new HashMap<Long, Byte>();¤		Statement st = null;¤		try {¤			Connection con = ContainerManager.Factory.get().getSession().connection();¤			st = con.createStatement();¤			String sql = "SELECT distinct ca.descendentid, " +¤						"((SELECT count(*) as noChild FROM content child WHERE child.parentid=ca.descendentid and child.prevver is null and child.content_status='current')=0), " +¤						"((SELECT count(*) FROM content child, gar_doc d WHERE child.parentid=ca.descendentid and child.prevver is null and child.content_status='current'and child.contentid=d.contentid)>0) " +¤						"FROM confancestors ca where ca.ancestorid in (" + DpoUvsHelper.listToString(folderIds) + ") " +¤						"and (SELECT count(*) FROM gar_doc d WHERE d.contentid=ca.descendentid)=0 " +¤						"and (SELECT count(*) FROM gar_request r WHERE r.contentid=ca.descendentid)=0 "  ¤//						"and (SELECT count(*) FROM content child WHERE child.parentid=ca.descendentid and child.prevver is null and child.content_status='current')=0"¤						;¤			ResultSet rs = st.executeQuery(sql);¤			while(rs.next()){¤				long id = rs.getLong(1);¤				Byte hasNoChilds = rs.getByte(2);¤				Byte hasDocCardChilds = rs.getByte(3);¤				if(hasNoChilds == 1 || hasDocCardChilds == 1){¤					docCardParents.put(id, hasNoChilds);¤				}¤			}¤		} catch (Exception e) {¤			Logs.LOG_SEX(e);¤		}finally{¤			if(st != null){¤				try {¤					st.close();¤				} catch (SQLException e1) {¤					Logs.LOG_SEX(e1);¤				}¤			}¤		}¤		¤		return docCardParents;¤	}¤¤	¤	public void process(final Map<Long, Byte> ogvLinksIdsWithProps, final List<Long> doccardsAdditionalOgvs, final List<Long> ogvFolderIds, final String spaceKey){¤		final int[] countRemovedOGV = new int[1];¤		countRemovedOGV[0] = 0;¤		final int[] countRemovedLabelsInOGV = new int[1];¤		countRemovedLabelsInOGV[0] = 0;¤		final int[] allCount = new int[1];¤		allCount[0] = 0;¤		final Label labeldonotdelete = ContainerManager.Factory.get().getLabelManager().getLabel("donotdelete");¤		final List<Long> ogvLinksIds = new ArrayList<Long>(ogvLinksIdsWithProps.keySet());¤¤		for(int i = 0; i < ogvLinksIds.size(); i+=OGVS_LIMIT){¤			final int position = i;¤			new TransactionDecorator(true).doInNewTransaction(new DoInNewTransactionCallback() {¤				public void execute() {¤					int j = position;¤					do{¤						final long ogvId = ogvLinksIds.get(j);¤						try{¤							Page ogvPage = ContainerManager.Factory.get().getPageManager().getPage(ogvId);¤							boolean changeFlag = hasInPathLabeldonotdelete(ogvPage, labeldonotdelete);¤							if(changeFlag){¤								Boolean removeOnlyLabels = null;¤								if(hasPathExcludeOgvPaths(spaceKey, ogvPage, ogvFolderIds)){¤									Logs.LOG_W("RemoveNotInHDNoAttachmentsOgvsJob::excludeOgvPath::id=" + ogvId);¤									removeOnlyLabels = removeLabelsOrOgv(ogvPage, doccardsAdditionalOgvs, ogvLinksIdsWithProps.get(ogvId));¤								}else{	¤									String myOGVAsHD = InfoForAutomaticMovingGardocsManager.Factory.get().convertMDPOGVToHDSource (ogvId, ogvFolderIds);¤									boolean isInHD = InfoForAutomaticMovingGardocsManager.Factory.get().isPathInHD(myOGVAsHD, spaceKey);¤									//если ОГВ нет в ХД ¤									if(isInHD == false){¤										removeOnlyLabels = removeLabelsOrOgv(ogvPage, doccardsAdditionalOgvs, ogvLinksIdsWithProps.get(ogvId));¤									}¤								}¤								// for logging¤								if(removeOnlyLabels != null){¤									if(removeOnlyLabels){¤										countRemovedLabelsInOGV[0]++;¤									}else{¤										countRemovedOGV[0]++;¤									}¤								}¤¤							}¤						}catch(Exception ex){¤							Logs.LOG_E("RemoveNotInHDNoAttachmentsOgvsJob::process::ogvId=" + ogvId);¤							Logs.LOG_SEX(ex);¤							setHasError(true);¤						}¤						j++;¤						allCount[0]++;¤					}while(allCount[0] < (position + OGVS_LIMIT) && j < ogvLinksIds.size() && (getHasError() == false));¤				}¤			});¤			if(getHasError()){¤				return;¤			}¤			Logs.LOG_I("RemoveNotInHDNoAttachmentsOgvsJob::process::" + allCount[0] + "/" + ogvLinksIds.size());¤		}¤		Logs.LOG_I("RemoveNotInHDNoAttachmentsOgvsJob::process::countRemovedOGV=" + countRemovedOGV[0] + " countRemovedLabelsInOGV=" + countRemovedLabelsInOGV[0]);¤	}¤	¤	public boolean removeLabelsOrOgv(Page ogvPage, List<Long> doccardsAdditionalOgvs, Byte hasNotChildren){¤		//если есть карточки в этом ОГВ, то убираем метки, чтобы в подстановке при создании ¤		//или изменении карточки они не показывались в выпадающей строке¤		//удаление OGVLinksDAO в LabelListener при удалении метки ogv¤		if(hasNotChildren == 0 || doccardsAdditionalOgvs.contains(ogvPage.getId())){¤			onlyRemoveLabels(ogvPage);¤			return true;¤		//если нет карточек, то смело удаляем	¤		}else{¤			removeOgv(ogvPage);¤			return false;¤		}¤	}¤	¤	public void onlyRemoveLabels(Page ogvPage){¤		long time = new Date().getTime();¤		List<Label> labels = ogvPage.getLabels();¤		if(labels.contains(DpoUvsHelper.getOGVLabel()) || labels.contains(DpoUvsHelper.getUvsLabel()) || labels.contains(DpoUvsHelper.getOgvFromHDLabel())){¤			if(labels.contains(DpoUvsHelper.getOGVLabel())){¤				ContainerManager.Factory.get().getLabelManager().removeLabel(ogvPage, "ogv");¤			}¤			if(labels.contains(DpoUvsHelper.getUvsLabel())){¤				ContainerManager.Factory.get().getLabelManager().removeLabel(ogvPage, "uvs");¤			}¤			if(labels.contains(DpoUvsHelper.getOgvFromHDLabel())){¤				ContainerManager.Factory.get().getLabelManager().removeLabel(ogvPage, "ogv_from_hd");¤			}¤			Logs.LOG_W("RemoveNotInHDNoAttachmentsOgvsJob::removeLabels::id=" + ogvPage.getId() + " title=" + ogvPage.getTitle() + " time=" + (new Date().getTime() - time));¤		}¤	}¤	¤	private boolean hasError_ = false;¤	¤	public boolean getHasError(){¤		return hasError_;¤	}¤	¤	public void setHasError(boolean hasError){¤		hasError_ = hasError;¤	}¤¤	public boolean hasInPathLabeldonotdelete(final Page ogvPage, final Label labelDoNotDelete){¤		Page parent = ogvPage;¤		while(parent != null){¤			if(parent.getLabels().contains(labelDoNotDelete)){¤				return false;¤			}¤			parent = parent.getParent();¤		}¤		return true;¤	}¤	¤	public String removeOgv(final Page page){¤		long time = new Date().getTime();¤		long pageId = page.getId();¤		String title = page.getTitle();¤		getRemoveOGVAction().setPage(page);¤		getRemoveOGVAction().setPageManager(ContainerManager.Factory.get().getPageManager());¤		try {¤			getRemoveOGVAction().doRemove();¤		} catch (Exception e) {¤			Logs.LOG_SEX(e);¤		}¤		Logs.LOG_W("RemoveNotInHDNoAttachmentsOgvsJob::removeOgv::id=" + pageId + " title=" + title + " time=" + (new Date().getTime() - time));¤		return "success";¤	}¤¤	public RemoveOGV getRemoveOGVAction(){¤		if(actionRemoveOGV_ == null){¤			actionRemoveOGV_ = new RemoveOGV();¤		}¤		return actionRemoveOGV_;¤	}¤	RemoveOGV actionRemoveOGV_ = null;¤¤	public static final int OGVS_LIMIT = 100;¤	//#UC END# *533A5C6D00FD_CUSTOM_METHODS_AND_DATA*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"WikiPageID (wiki)"
		    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/RemoveNotInHDNoAttachmentsOgvsJob|533A5C6D00FD
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (wiki)"
		    value      	"wiki"))
	    quid       	"533A5C6D00FD"
	    documentation 	"Удаление ОГВ если его нет в ХД и в нем нет карточек. Если его нет в ХД, но в нем есть карточки, то удаляем метки ogv и uvs"
	    stereotype 	"KJobPlugin"
	    superclasses 	(list inheritance_relationship_list
		(object Inheritance_Relationship
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"1396333739458757"))
		    quid       	"533A5CAB01C9"
		    supplier   	"Logical View::MDProcess::DocCardChange::DocCardSupport::GarDocAbstractJob"
		    quidu      	"53E4BF9000E2"))
	    language   	"MDA Generator")
	(object Class "TransactionDecorator"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"1389248738340051")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/DocCardChange/DocCardSupport/TransactionDecorator.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*52CE40E20154_CUSTOM_IMPORT*"
		    value      	"//#UC START# *52CE40E20154_CUSTOM_IMPORT*¤import ru.garant.shared.ConfluenceCore.Helpers.ContainerManager;¤¤import org.springframework.transaction.TransactionDefinition;¤import org.springframework.transaction.TransactionStatus;¤import org.springframework.transaction.interceptor.DefaultTransactionAttribute;¤import org.springframework.transaction.support.TransactionCallback;¤import org.springframework.transaction.support.TransactionTemplate;¤//#UC END# *52CE40E20154_CUSTOM_IMPORT*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*52CE40E20154_CUSTOM_CLASS_DEFINITION*"
		    value      	"//#UC START# *52CE40E20154_CUSTOM_CLASS_DEFINITION*¤//#UC END# *52CE40E20154_CUSTOM_CLASS_DEFINITION*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*52CE40E20154_CUSTOM_METHODS_AND_DATA*"
		    value      	(value Text 
|//#UC START# *52CE40E20154_CUSTOM_METHODS_AND_DATA*¤	//#UC END# *52CE40E20154_CUSTOM_METHODS_AND_DATA*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"DerivedImplement"
		    value      	"{}")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"DerivedOverload"
		    value      	"{}")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ImplementSelectType"
		    value      	"all")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"OverloadSelectType"
		    value      	"include")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ApplyedGens"
		    value      	"All")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"WikiPageID (wiki)"
		    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/TransactionDecorator|52CE40E20154
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (wiki)"
		    value      	"wiki"))
	    quid       	"52CE40E20154"
	    documentation 	"накладывает свои условия выполнения: либо в отдельной транзакции, либо нет - в зависимости от наследуемого джоба"
	    stereotype 	"SimpleClass"
	    operations 	(list Operations
		(object Operation "do_in_new_transaction"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"1389248780076439")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*52CE410C0040*"
			    value      	(value Text 
|//#UC START# *52CE410C0040*¤		if (getCreateInNewTransaction()) {¤			TransactionDefinition transactionDefinition = new DefaultTransactionAttribute(TransactionDefinition.PROPAGATION_REQUIRES_NEW);¤			new TransactionTemplate(ContainerManager.Factory.get().getTransactionManager(), transactionDefinition).execute(new TransactionCallback() {							¤				@Override¤				public Object doInTransaction(TransactionStatus arg0) {¤					callback.execute();¤					return null;¤				}¤			});¤		} else {¤			callback.execute();¤		}		¤		//#UC END# *52CE410C0040*
			    )))
		    quid       	"52CE410C0040"
		    documentation 	"делать в отдельной транзакции"
		    parameters 	(list Parameters
			(object Parameter "callback"
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ElementCreationOrder"
				    value      	"1389248822946892")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ResolvedTypeGuid"
				    value      	"52CE406A03BA"))
			    quid       	"52CE413603B2"
			    type       	"DoInNewTransactionCallback"
			    quidu      	"52CE406A03BA"))
		    concurrency 	"Sequential"
		    opExportControl 	"Public"
		    uid        	0)
		(object Operation "new_ctor_op"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"1389250096133690")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"final")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*52CE46300077_BODY*"
			    value      	(value Text 
|//#UC START# *52CE46300077_BODY*¤		createInNewTransaction_ = createInNewTransaction;¤		//#UC END# *52CE46300077_BODY*
			    )))
		    quid       	"52CE46300077"
		    stereotype 	"ctor"
		    parameters 	(list Parameters
			(object Parameter "create_in_new_transaction"
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ElementCreationOrder"
				    value      	"1389250147468627")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ResolvedTypeGuid"
				    value      	"3DBFFE100240"))
			    quid       	"52CE466301D4"
			    type       	"boolean"
			    quidu      	"3DBFFE100240"))
		    concurrency 	"Sequential"
		    opExportControl 	"Public"
		    uid        	0)
		(object Operation "new_ctor_op"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"1389250422848377")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"final")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*52CE47760340_BODY*"
			    value      	(value Text 
|//#UC START# *52CE47760340_BODY*¤		//#UC END# *52CE47760340_BODY*
			    )))
		    quid       	"52CE47760340"
		    stereotype 	"ctor"
		    concurrency 	"Sequential"
		    opExportControl 	"Public"
		    uid        	0))
	    class_attributes 	(list class_attribute_list
		(object ClassAttribute "create_in_new_transaction"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"1389248837904748")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"final")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ValueInitialized"
			    value      	"true")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ResolvedTypeGuid"
			    value      	"3DBFFE100240")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*52CE4145037B_GET_ACCESSOR*"
			    value      	(value Text 
|//#UC START# *52CE4145037B_GET_ACCESSOR*¤		return createInNewTransaction_;¤		//#UC END# *52CE4145037B_GET_ACCESSOR*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*52CE4145037B_SET_ACCESSOR*"
			    value      	(value Text 
|//#UC START# *52CE4145037B_SET_ACCESSOR*¤		createInNewTransaction_ = createInNewTransaction;¤		//#UC END# *52CE4145037B_SET_ACCESSOR*
			    )))
		    quid       	"52CE4145037B"
		    stereotype 	"property"
		    type       	"boolean"
		    quidu      	"3DBFFE100240"
		    exportControl 	"Public"
		    Containment 	"By Value"))
	    language   	"MDA Generator")
	(object Class "RequestListFilters"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"1401884914449806")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/DocCardChange/DocCardSupport/RequestListFilters.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*538F10F201C1_CUSTOM_IMPORT*"
		    value      	"//#UC START# *538F10F201C1_CUSTOM_IMPORT*¤import java.util.Arrays;¤import java.util.List;¤¤import org.apache.commons.lang.StringUtils;¤¤import com.atlassian.confluence.core.ConfluenceActionSupport;¤¤import ru.garant.MDProcess.DocCardChange.Entities.UVSStateMachine;¤¤import ru.garant.shared.ConfluenceCore.HibernateSupportImpl.QueryHelper;¤¤import com.atlassian.confluence.json.json.Json;¤import com.atlassian.confluence.json.json.JsonArray;¤import com.atlassian.confluence.json.json.JsonObject;¤//#UC END# *538F10F201C1_CUSTOM_IMPORT*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*538F10F201C1_CUSTOM_CLASS_DEFINITION*"
		    value      	"//#UC START# *538F10F201C1_CUSTOM_CLASS_DEFINITION*¤//#UC END# *538F10F201C1_CUSTOM_CLASS_DEFINITION*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*538F10F201C1_ACTION_NAME*"
		    value      	(value Text 
|//#UC START# *538F10F201C1_ACTION_NAME*¤		return new String (getClass ().getName ());¤		//#UC END# *538F10F201C1_ACTION_NAME*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*538F10F201C1_CUSTOM_METHODS_AND_DATA*"
		    value      	(value Text 
|//#UC START# *538F10F201C1_CUSTOM_METHODS_AND_DATA*¤	public String doLoadWaitingFromOGV(){¤		List<String> spaces = Arrays.asList(StringUtils.split(spaces_, ", ")); ¤		List<String> filters = getPagesPropertiesByListWaitingFromOgv(spaces);¤		responseContent_ = "\n<option value=\"\"> </option>\n";¤		for(String filter : filters){¤			responseContent_ += "<option value=\"" + filter + "\">" + filter + "</option>\n";¤		}¤		return SUCCESS;¤	}¤	¤	private java.util.List<String> getPagesPropertiesByListWaitingFromOgv (List<String> spaces){¤		String spacesString = DpoUvsHelper.listToStringWithQuotes(spaces);¤		¤		final String sQuery = "select uvsquest.listOfInquiryName from UVSQuestDAO as uvsquest"¤			+ " where uvsquest.id=uvsquest.latestVersionId"¤			+ " and uvsquest.listOfInquiryName is not null"¤			+ " and uvsquest.state = " + UVSStateMachine.ST_WAITING_FROM_OGV.getSortValue()¤			+ ((StringUtils.isNotEmpty(spacesString))?" and uvsquest.page.space.key in (" + spacesString + ")":"")¤			+ " group by uvsquest.listOfInquiryName order by uvsquest.listOfInquiryName asc";¤		return (List<String>) (List<?>) QueryHelper.getListByQuery(sQuery);¤	}¤¤	public void setSpaces(String spaces){¤		spaces_ = spaces;¤	}¤¤	private String spaces_ = null;¤¤	public String getResponseContent(){¤		return responseContent_;¤	}¤	¤	private String responseContent_ = null;¤	//#UC END# *538F10F201C1_CUSTOM_METHODS_AND_DATA*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"WikiPageID (wiki)"
		    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/RequestListFilters|538F10F201C1
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (wiki)"
		    value      	"wiki"))
	    quid       	"538F10F201C1"
	    documentation 	"фильтры в списке карточек"
	    stereotype 	"KActionPlugin"
	    superclasses 	(list inheritance_relationship_list
		(object Inheritance_Relationship
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"1401889072638645"))
		    quid       	"538F2130027C"
		    supplier   	"Logical View::external::ConfluenceSupport::com.atlassian.confluence.coreImpl::ConfluenceActionSupport"
		    quidu      	"468C9C950186"))
	    language   	"MDA Generator")
	(object Class "MoveAllDocCardsWebItem"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"1404303281823449")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"label key"
		    value      	"move.doccards.from.ogv")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"need UC"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"section"
		    value      	"system.content.action/modify")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"weight"
		    value      	"11")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"styleClass"
		    value      	"move-doccards")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"output.xml:*53B3F7B10337LABEL_CONTENT*"
		    value      	(value Text 
|<!--UC_BEGIN*53B3F7B10337LABEL_CONTENT*-->¤			<!--UC_END*53B3F7B10337LABEL_CONTENT*-->
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"WikiPageID (wiki)"
		    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/MoveAllDocCardsWebItem|53B3F7B10337
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (wiki)"
		    value      	"wiki"))
	    quid       	"53B3F7B10337"
	    documentation 	"Перенести все карточки в заданное ID страницы нужного ОГВ"
	    stereotype 	"WebItem"
	    used_nodes 	(list uses_relationship_list
		(object Uses_Relationship
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"1404307604177700")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"params"
			    value      	"pageId=$helper.page.id")
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"id"
			    value      	"action-move-all-doccards-link"))
		    quid       	"53B4089400B0"
		    stereotype 	"link"
		    supplier   	"Logical View::MDProcess::DocCardChange::DocCardSupport::DocCardXPlugin::DocCardXPackage::MoveAllDocCardsFromOGVAction"
		    quidu      	"53B407E10094"))
	    language   	"MDA Generator")
	(object Class "MoveAllDocCardsFromOGV"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"1404307364824985")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/DocCardChange/DocCardSupport/MoveAllDocCardsFromOGV.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*53B407A40338_CUSTOM_IMPORT*"
		    value      	"//#UC START# *53B407A40338_CUSTOM_IMPORT*¤import ru.garant.MDProcess.ConfluencePlugins.ExportSupport.MoveDocCardsLongRunningTask;¤¤import com.atlassian.confluence.user.AuthenticatedUserThreadLocal;¤import com.atlassian.confluence.util.longrunning.LongRunningTaskUtils;¤//#UC END# *53B407A40338_CUSTOM_IMPORT*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*53B407A40338_CUSTOM_CLASS_DEFINITION*"
		    value      	"//#UC START# *53B407A40338_CUSTOM_CLASS_DEFINITION*¤//#UC END# *53B407A40338_CUSTOM_CLASS_DEFINITION*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*53B407A40338_ACTION_NAME*"
		    value      	(value Text 
|//#UC START# *53B407A40338_ACTION_NAME*¤		return new String (getClass ().getName ());¤		//#UC END# *53B407A40338_ACTION_NAME*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*53B407A40338_CUSTOM_METHODS_AND_DATA*"
		    value      	(value Text 
|//#UC START# *53B407A40338_CUSTOM_METHODS_AND_DATA*¤	public String doMove()throws Exception{¤		MoveDocCardsLongRunningTask task = new MoveDocCardsLongRunningTask(getOldOgvId(), getNewOgvId(), AuthenticatedUserThreadLocal.getUser());¤        LongRunningTaskUtils.startTask(task);¤        return SUCCESS;¤	}¤¤	public long newOgvId_;¤	public long getNewOgvId(){¤		return newOgvId_;¤	}¤	¤	public void setNewOgvId(long newOgvId){¤		newOgvId_ = newOgvId;¤	}¤¤	public long oldOgvId_;¤	public long getOldOgvId(){¤		return oldOgvId_;¤	}¤	¤	public void setOldOgvId(long oldOgvId){¤		oldOgvId_ = oldOgvId;¤	}¤¤	public String spaceKey_;¤	public String getSpaceKey(){¤		return spaceKey_;¤	}¤	¤	public void setSpaceKey(String spaceKey){¤		spaceKey_ = spaceKey;¤	}¤¤	private String JSONString_ = "";¤	public String getResponseContent(){¤		return JSONString_;¤	}¤¤	//#UC END# *53B407A40338_CUSTOM_METHODS_AND_DATA*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"WikiPageID (wiki)"
		    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/MoveAllDocCardsFromOGV|53B407A40338
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (wiki)"
		    value      	"wiki"))
	    quid       	"53B407A40338"
	    documentation 	"перенос всех карточек в другое ОГВ"
	    stereotype 	"KActionPlugin"
	    superclasses 	(list inheritance_relationship_list
		(object Inheritance_Relationship
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"1404367760004421"))
		    quid       	"53B4F3900001"
		    supplier   	"Logical View::external::ConfluenceSupport::com.atlassian.confluence.coreImpl::ConfluenceActionSupport"
		    quidu      	"468C9C950186"))
	    language   	"MDA Generator")
	(object Class "MoveAllDocCardsFromOGVCondition"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"1404307667411318")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/DocCardChange/DocCardSupport/MoveAllDocCardsFromOGVCondition.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*53B408D3019A_CUSTOM_IMPORT*"
		    value      	"//#UC START# *53B408D3019A_CUSTOM_IMPORT*¤import com.atlassian.confluence.pages.AbstractPage;¤import com.atlassian.confluence.pages.Page;¤import com.atlassian.confluence.plugin.descriptor.web.WebInterfaceContext;¤//#UC END# *53B408D3019A_CUSTOM_IMPORT*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*53B408D3019A_CUSTOM_CLASS_DEFINITION*"
		    value      	"//#UC START# *53B408D3019A_CUSTOM_CLASS_DEFINITION*¤//#UC END# *53B408D3019A_CUSTOM_CLASS_DEFINITION*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*53B408D3019A_CUSTOM_METHODS_AND_DATA*"
		    value      	(value Text 
|//#UC START# *53B408D3019A_CUSTOM_METHODS_AND_DATA*¤	@Override¤	public boolean shouldDisplay(WebInterfaceContext context) {¤		final AbstractPage pageObj = context.getPage();¤		if (pageObj instanceof Page == false) {¤			return false;¤		}¤		final Page page = (Page) pageObj;¤		return page.getLabels().contains(DpoUvsHelper.getOGVLabel());¤	}¤	//#UC END# *53B408D3019A_CUSTOM_METHODS_AND_DATA*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"WikiPageID (wiki)"
		    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/MoveAllDocCardsFromOGVCondition|53B408D3019A
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (wiki)"
		    value      	"wiki"))
	    quid       	"53B408D3019A"
	    documentation 	"условие отображения пункта переноса всех карточек ОГВ в другое ОГВ"
	    stereotype 	"SimpleClass"
	    superclasses 	(list inheritance_relationship_list
		(object Inheritance_Relationship
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"1404308787154366"))
		    quid       	"53B40D330098"
		    supplier   	"Logical View::external::ConfluenceSupport::com.atlassian.confluence.plugin.descriptor.web.conditions::BaseConfluenceCondition"
		    quidu      	"4A53516B029A"))
	    language   	"MDA Generator")
	(object Class "GarDocAbstractJob"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"1407500176226107")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"abstract")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"WikiPageID (wiki)"
		    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/GarDocAbstractJob|53E4BF9000E2
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (wiki)"
		    value      	"wiki")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/DocCardChange/DocCardSupport/GarDocAbstractJob.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*53E4BF9000E2_CUSTOM_IMPORT*"
		    value      	"//#UC START# *53E4BF9000E2_CUSTOM_IMPORT*¤import ru.garant.MDProcess.ConfluencePlugins.CommonVelocityContext.GlobalHelper;¤//#UC END# *53E4BF9000E2_CUSTOM_IMPORT*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*53E4BF9000E2_CUSTOM_CLASS_DEFINITION*"
		    value      	"//#UC START# *53E4BF9000E2_CUSTOM_CLASS_DEFINITION*¤//#UC END# *53E4BF9000E2_CUSTOM_CLASS_DEFINITION*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*53E4BF9000E2_DO_EXECUTE_IMPLEMETATION*"
		    value      	(value Text 
|//#UC START# *53E4BF9000E2_DO_EXECUTE_IMPLEMETATION*¤		if(isGardoc()){¤			super.doExecute(jec);¤		}¤		//#UC END# *53E4BF9000E2_DO_EXECUTE_IMPLEMETATION*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*53E4BF9000E2_CUSTOM_METHODS_AND_DATA*"
		    value      	(value Text 
|//#UC START# *53E4BF9000E2_CUSTOM_METHODS_AND_DATA*¤	public boolean isGardoc(){¤		return getGlobalHelper().hasSystemGetenvValue("SERVER_TYPE", "GARDOC");¤	}¤	¤	public GlobalHelper getGlobalHelper(){¤		return new GlobalHelper();¤	}¤	//#UC END# *53E4BF9000E2_CUSTOM_METHODS_AND_DATA*
		    )))
	    quid       	"53E4BF9000E2"
	    documentation 	"только гардок-джобы"
	    stereotype 	"KJobPlugin"
	    superclasses 	(list inheritance_relationship_list
		(object Inheritance_Relationship
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"1407500191587986"))
		    quid       	"53E4BF9F024A"
		    supplier   	"Logical View::MDProcess::ConfluencePlugins::EntitySupport::GarantAbstractJobWithLock"
		    quidu      	"4FBA1F4403CC"))
	    language   	"MDA Generator"
	    abstract   	TRUE)
	(object Class "AbstractFindQueriesInStatesAndSendRepeatInHDRemote"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"1407758270406248")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"abstract")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/DocCardChange/DocCardSupport/AbstractFindQueriesInStatesAndSendRepeatInHDRemote.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*53E8AFBE0195_CUSTOM_IMPORT*"
		    value      	"//#UC START# *53E8AFBE0195_CUSTOM_IMPORT*¤import ru.garant.MDProcess.DocCardChange.DocCardChangeDAO.GarDocDAO;¤import ru.garant.MDProcess.DocCardChange.DocCardChangeDAO.UVSQuestDAO;¤import ru.garant.MDProcess.DocCardChange.DocCardCommon.DocCardManager;¤import ru.garant.MDProcess.DocCardChange.DocCardCommon.HelpDeskRemote;¤import ru.garant.MDProcess.DocCardChange.DocCardCommon.MainAttributes;¤import ru.garant.MDProcess.ConfluencePlugins.EmailNotification.EmailGateway;¤¤import ru.garant.shared.GCI.I18N.Messages;¤¤import com.atlassian.gzipfilter.org.apache.commons.lang.StringUtils;¤import com.atlassian.mail.Email;¤¤import java.util.ArrayList;¤import java.util.Date;¤import java.util.List;¤import java.util.Map;¤//#UC END# *53E8AFBE0195_CUSTOM_IMPORT*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*53E8AFBE0195_CUSTOM_CLASS_DEFINITION*"
		    value      	"//#UC START# *53E8AFBE0195_CUSTOM_CLASS_DEFINITION*¤//#UC END# *53E8AFBE0195_CUSTOM_CLASS_DEFINITION*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*53E8AFBE0195_DO_EXECUTE_IMPLEMETATION*"
		    value      	(value Text 
|//#UC START# *53E8AFBE0195_DO_EXECUTE_IMPLEMETATION*¤		super.doExecute(jec);¤		//#UC END# *53E8AFBE0195_DO_EXECUTE_IMPLEMETATION*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*53E8AFBE0195_CUSTOM_METHODS_AND_DATA*"
		    value      	(value Text 
|//#UC START# *53E8AFBE0195_CUSTOM_METHODS_AND_DATA*¤	@Override¤	protected void executeJob() {¤		for(String spaceKey : getSpaceKeys()){¤			Logs.LOG_W(getClass().getSimpleName() + "::start::spaceKey=" + spaceKey);¤			doExecute(spaceKey);¤			Logs.LOG_W(getClass().getSimpleName() + "::end::spaceKey=" + spaceKey);¤		}¤	}¤	¤	public void doExecute(final String spaceKey){¤		List<UVSQuestDAO> uvsQueryList = getQueriesFromMDP(spaceKey);¤		if(uvsQueryList == null || uvsQueryList.size() == 0){¤			Logs.LOG_W(getClass().getSimpleName() + "::doExecute::queries.size=" + uvsQueryList.size());¤			return;¤		}¤		List<UVSQuestDAO> queriesFromMDP = queriesFilter(uvsQueryList, spaceKey);¤		Logs.LOG_W(getClass().getSimpleName() + "::getQueriesFromTypesAndInStates::queries.size=" + queriesFromMDP.size());¤		if(queriesFromMDP.size() > 0){¤			List<UVSQuestDAO> queries = findInHD(queriesFromMDP, spaceKey);¤			Logs.LOG_W(getClass().getSimpleName() + "::findRegionQueryInHDRemote::queries.size=" + queries.size());¤			if(queries.size() > 0){¤				sendMailFindedGardocs(queries, spaceKey, getMailTitle());¤			}¤		}¤	}¤	¤	public List<Long> getGardocs(final java.util.List<ru.garant.MDProcess.DocCardChange.DocCardChangeDAO.UVSQuestDAO> queries){¤		List<Long> gardocs = new ArrayList<Long>();¤		for(UVSQuestDAO uvsQuery : queries){¤			gardocs.add(uvsQuery.getGardoc().getId());¤		}¤		return gardocs;¤	}¤	//#UC END# *53E8AFBE0195_CUSTOM_METHODS_AND_DATA*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"WikiPageID (wiki)"
		    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/AbstractFindQueriesInStatesAndSendRepeatInHDRemote|53E8AFBE0195
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (wiki)"
		    value      	"wiki"))
	    quid       	"53E8AFBE0195"
	    documentation 	"поиск запросов в фазах и посылка повоторов  в письме"
	    stereotype 	"KJobPlugin"
	    superclasses 	(list inheritance_relationship_list
		(object Inheritance_Relationship
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"1407758322870250"))
		    quid       	"53E8AFF20365"
		    supplier   	"Logical View::MDProcess::DocCardChange::DocCardSupport::GarDocAbstractJob"
		    quidu      	"53E4BF9000E2"))
	    operations 	(list Operations
		(object Operation "find_in_HD"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"1407759527607160")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ResolvedTypeGuid"
			    value      	"4D6B7DB7016D")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*53E8B4A70252*"
			    value      	(value Text 
|//#UC START# *53E8B4A70252*¤		 List<UVSQuestDAO> uvsQueries = new ArrayList<UVSQuestDAO>();¤		 for(UVSQuestDAO uvsQuest : queries){¤			 try{¤				 GarDocDAO gardoc = uvsQuest.getGardoc();¤				 MainAttributes ma = DocCardManager.Factory.get().convertToMainAttributes(gardoc, spaceKey);¤				 long topic = HelpDeskRemote.Factory.get().topicOf(ma, spaceKey);¤				 if(topic > 0){¤					 uvsQueries.add(uvsQuest);¤				 }¤			 }catch(Exception ex){¤				 Logs.LOG_E("AbstractFindQueriesInStatesAndSendRepeatInHDRemote::findInHD::error docId=" + uvsQuest.getGardoc().getId());¤				 Logs.LOG_SEX(ex);¤			 }¤		 }¤		 ¤		 return uvsQueries;¤		//#UC END# *53E8B4A70252*
			    )))
		    quid       	"53E8B4A70252"
		    documentation 	"найти в ХД"
		    parameters 	(list Parameters
			(object Parameter "queries"
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ElementCreationOrder"
				    value      	"1407759609267832")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ResolvedTypeGuid"
				    value      	"4D6B7DB7016D"))
			    quid       	"53E8B4F9010B"
			    type       	"UVSQuestDAOList"
			    quidu      	"4D6B7DB7016D")
			(object Parameter "space_key"
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ElementCreationOrder"
				    value      	"1407759609298835")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ResolvedTypeGuid"
				    value      	"3DBFFE240068"))
			    quid       	"53E8B4F9012A"
			    type       	"string"
			    quidu      	"3DBFFE240068"))
		    result     	"UVSQuestDAOList"
		    concurrency 	"Sequential"
		    opExportControl 	"Public"
		    uid        	0
		    quidu      	"4D6B7DB7016D")
		(object Operation "send_mail_finded_gardocs"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"1407759642535737")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*53E8B51A0208*"
			    value      	(value Text 
|//#UC START# *53E8B51A0208*¤		String emails = getEmailsForJobExecution(spaceKey);¤		if(StringUtils.isEmpty(emails)){¤			Logs.LOG_W(getClass().getSimpleName() + "::sendMailFindedGardocs::emails == null");¤			return;¤		}¤		String linkList = "<ol>";¤		Map<Long, Integer> mapaCountUvsQueries = DocCardManager.Factory.get().getUvsQueriesCount(getGardocs(queries));¤		for(UVSQuestDAO uvsQuery : queries){¤			int requestsCount = mapaCountUvsQueries.get(uvsQuery.getGardoc().getId());¤			String pageAddress = ru.garant.MDProcess.ConfluencePlugins.CommonVelocityContext.GlobalHelper.getPageUrl(uvsQuery.getPage());¤			linkList += "<li><a href='" + pageAddress + "'>" + uvsQuery.getPage().getTitle() + "</a>"  + "(" + uvsQuery.getGardoc().getPage().getTitle() + ")[" + requestsCount + "]</li>";¤		}¤		linkList += "</ol>";¤		long time = new Date().getTime();¤		String body = ¤				Messages.Factory.messages().get("requestnotificationgateways.good.day") + "! <br/> " + linkList ¤				  + " " + Messages.Factory.messages().get("requestnotificationgateways.full.request.text.you.may.see.in.link")¤				  + " " + Messages.Factory.messages().get("requestnotificationgateways.dont.replay.on.this")¤				  + " " + Messages.Factory.messages().get("requestnotificationgateways.with.best.regards.system.mdc");;¤		Logs.LOG_W(getClass().getSimpleName() + "::sendMailFindedDocs::messages get time=" + (new Date().getTime() - time) + " ms");		  ¤		EmailGateway eg = EmailGateway.Factory.create();¤		Email email = eg.createEmail(title, body.toString(), emails);¤		eg.queueEmail(email);¤		eg.send();¤		//#UC END# *53E8B51A0208*
			    )))
		    quid       	"53E8B51A0208"
		    documentation 	"выслать письмо с найденными карточками"
		    parameters 	(list Parameters
			(object Parameter "queries"
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ElementCreationOrder"
				    value      	"1407759671615401")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ResolvedTypeGuid"
				    value      	"4D6B7DB7016D"))
			    quid       	"53E8B5370267"
			    type       	"UVSQuestDAOList"
			    quidu      	"4D6B7DB7016D")
			(object Parameter "space_key"
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ElementCreationOrder"
				    value      	"1407759671647404")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ResolvedTypeGuid"
				    value      	"3DBFFE240068"))
			    quid       	"53E8B5370287"
			    type       	"string"
			    quidu      	"3DBFFE240068")
			(object Parameter "title"
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ElementCreationOrder"
				    value      	"1407759671679407")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ResolvedTypeGuid"
				    value      	"3DBFFE240068"))
			    quid       	"53E8B53702A7"
			    type       	"string"
			    quidu      	"3DBFFE240068"))
		    concurrency 	"Sequential"
		    opExportControl 	"Public"
		    uid        	0)
		(object Operation "get_queries_from_MDP"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"1407759814996605")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"abstract")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ResolvedTypeGuid"
			    value      	"4D6B7DB7016D")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*53E8B5C603D5*"
			    value      	(value Text 
|//#UC START# *53E8B5C603D5*¤		throw new ru.garant.shared.Core.Root.MDAGenNotImplemented ();¤		//#UC END# *53E8B5C603D5*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*53E8B5C603D5_51DEAEDA02CE*"
			    value      	(value Text 
|//#UC START# *53E8B5C603D5_51DEAEDA02CE*¤		return UVSQueryManager.Factory.get().getQueriesFromTypesAndInStates("'rt_region_query'", String.valueOf(UVSStateMachine.ST_MAKE_ANSWER.getSortValue()), spaceKey);¤		//#UC END# *53E8B5C603D5_51DEAEDA02CE*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*53E8B5C603D5_53E8B01100B6*"
			    value      	(value Text 
|//#UC START# *53E8B5C603D5_53E8B01100B6*¤		return UVSQueryManager.Factory.get().getQueriesFromTypesAndInStates(¤				"'rt_uo_query'", ¤				String.valueOf(UVSStateMachine.ST_ASSIGNED.getSortValue()) + "," + ¤				String.valueOf(UVSStateMachine.ST_WAITING_FROM_OGV.getSortValue()) + "," +¤				String.valueOf(UVSStateMachine.ST_ON_ACCEPT.getSortValue()), ¤				spaceKey¤			);¤		//#UC END# *53E8B5C603D5_53E8B01100B6*
			    )))
		    quid       	"53E8B5C603D5"
		    documentation 	"получить список запросов из мдп"
		    parameters 	(list Parameters
			(object Parameter "space_key"
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ElementCreationOrder"
				    value      	"1407760351320282")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ResolvedTypeGuid"
				    value      	"3DBFFE240068"))
			    quid       	"53E8B7DF0135"
			    type       	"string"
			    quidu      	"3DBFFE240068"))
		    result     	"UVSQuestDAOList"
		    concurrency 	"Sequential"
		    opExportControl 	"Public"
		    uid        	0
		    quidu      	"4D6B7DB7016D")
		(object Operation "get_emails_for_job_execution"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"1407760512075477")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"abstract")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ResolvedTypeGuid"
			    value      	"3DBFFE240068")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*53E8B880003C*"
			    value      	(value Text 
|//#UC START# *53E8B880003C*¤		throw new ru.garant.shared.Core.Root.MDAGenNotImplemented ();¤		//#UC END# *53E8B880003C*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*53E8B880003C_51DEAEDA02CE*"
			    value      	(value Text 
|//#UC START# *53E8B880003C_51DEAEDA02CE*¤		return (String) ru.garant.shared.ConfluenceCore.Helpers.ContainerManager.Factory.get().getBandanaManager().getValue(¤				new ConfluenceBandanaContext (spaceKey)¤				, EMAILS_FOR_SEND¤			);	¤		//#UC END# *53E8B880003C_51DEAEDA02CE*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*53E8B880003C_53E8B01100B6*"
			    value      	(value Text 
|//#UC START# *53E8B880003C_53E8B01100B6*¤		return (String) ru.garant.shared.ConfluenceCore.Helpers.ContainerManager.Factory.get().getBandanaManager().getValue(¤				new ConfluenceBandanaContext (spaceKey)¤				, EMAILS_FOR_SEND¤			);	¤		//#UC END# *53E8B880003C_53E8B01100B6*
			    )))
		    quid       	"53E8B880003C"
		    documentation 	"получить письма"
		    parameters 	(list Parameters
			(object Parameter "space_key"
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ElementCreationOrder"
				    value      	"1407760540385098")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ResolvedTypeGuid"
				    value      	"3DBFFE240068"))
			    quid       	"53E8B89C0181"
			    type       	"string"
			    quidu      	"3DBFFE240068"))
		    result     	"string"
		    concurrency 	"Sequential"
		    opExportControl 	"Public"
		    uid        	0
		    quidu      	"3DBFFE240068")
		(object Operation "get_mail_title"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"1407761015005245")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"abstract")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ResolvedTypeGuid"
			    value      	"3DBFFE240068")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*53E8BA7603DD_51DEAEDA02CE*"
			    value      	(value Text 
|//#UC START# *53E8BA7603DD_51DEAEDA02CE*¤		return "Региональные запросы, по которым возможно нашелся документ";¤		//#UC END# *53E8BA7603DD_51DEAEDA02CE*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*53E8BA7603DD_53E8B01100B6*"
			    value      	(value Text 
|//#UC START# *53E8BA7603DD_53E8B01100B6*¤		return "Запросы в розыске, по которым возможно нашелся документ";¤		//#UC END# *53E8BA7603DD_53E8B01100B6*
			    )))
		    quid       	"53E8BA7603DD"
		    documentation 	"получить название письма"
		    result     	"string"
		    concurrency 	"Sequential"
		    opExportControl 	"Public"
		    uid        	0
		    quidu      	"3DBFFE240068")
		(object Operation "get_space_keys"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"1407761592419273")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"abstract")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ResolvedTypeGuid"
			    value      	"505B465F03C6")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*53E8BCB80191_51DEAEDA02CE*"
			    value      	(value Text 
|//#UC START# *53E8BCB80191_51DEAEDA02CE*¤		return Arrays.asList("DPOUVS");¤		//#UC END# *53E8BCB80191_51DEAEDA02CE*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*53E8BCB80191_53E8B01100B6*"
			    value      	(value Text 
|//#UC START# *53E8BCB80191_53E8B01100B6*¤		List<Space> spaces = ContainerManager.Factory.get().getSpaceManager().getAllSpaces();¤		return DpoUvsHelper.getSpaceKeysWhichHasGardocSettingsFromSpacesList(spaces);¤		//#UC END# *53E8BCB80191_53E8B01100B6*
			    )))
		    quid       	"53E8BCB80191"
		    documentation 	"получить ключи спейсов"
		    result     	"DocCardCommon::StringList"
		    concurrency 	"Sequential"
		    opExportControl 	"Public"
		    uid        	0)
		(object Operation "queries_filter"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"1407764895314195")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"abstract")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ResolvedTypeGuid"
			    value      	"4D6B7DB7016D")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*53E8C99F0127_51DEAEDA02CE*"
			    value      	(value Text 
|//#UC START# *53E8C99F0127_51DEAEDA02CE*¤		return uvsQueries;¤		//#UC END# *53E8C99F0127_51DEAEDA02CE*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*53E8C99F0127_53E8B01100B6*"
			    value      	(value Text 
|//#UC START# *53E8C99F0127_53E8B01100B6*¤		List<UVSQuestDAO> resultUvs = new ArrayList<UVSQuestDAO>();¤		Map<Long, UVSQuestDAO> mapa = getUvsIds(uvsQueries);¤		Set<Long> idsSet = mapa.keySet();¤		String sqlQuery = "SELECT c.descendentid " +¤						  "FROM confancestors c " +¤						  "where c.ancestorid in " +¤						  "(SELECT cl.contentid FROM content_label cl, label l where l.name='chapter_for_find_repeats_in_hd' and cl.contentid=c.ancestorid and cl.labelid=l.labelid) " +¤						  "and c.descendentid in (" + DpoUvsHelper.collectionToString(idsSet) + ")";¤		ResultSet rs = null;¤		PreparedStatement ps = null;¤		¤		try {¤			Connection con = ContainerManager.Factory.get().getSession().connection();¤			ps = con.prepareStatement(sqlQuery);¤			rs = ps.executeQuery();¤			while(rs.next()){¤				long id = rs.getLong(1);¤				resultUvs.add(mapa.get(id));¤			}¤		} catch (Exception e) {¤			Logs.LOG_SEX(e);¤		}finally{¤			if(rs != null){¤				try {¤					rs.close();¤				} catch (SQLException e) {¤					Logs.LOG_SEX(e);¤				}¤			}¤			if(ps != null){¤				try {¤					ps.close();¤				} catch (SQLException e) {¤					Logs.LOG_SEX(e);¤				}¤			}¤		}¤		¤		return resultUvs;¤		//#UC END# *53E8C99F0127_53E8B01100B6*
			    )))
		    quid       	"53E8C99F0127"
		    documentation 	"фильтрация списка запросов"
		    parameters 	(list Parameters
			(object Parameter "uvsQueries"
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ElementCreationOrder"
				    value      	"1407764913767252")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ResolvedTypeGuid"
				    value      	"4D6B7DB7016D"))
			    quid       	"53E8C9B102FF"
			    type       	"UVSQuestDAOList"
			    quidu      	"4D6B7DB7016D")
			(object Parameter "space_key"
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ElementCreationOrder"
				    value      	"1407765104754177")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ResolvedTypeGuid"
				    value      	"3DBFFE240068"))
			    quid       	"53E8CA7002E5"
			    type       	"string"
			    quidu      	"3DBFFE240068"))
		    result     	"UVSQuestDAOList"
		    concurrency 	"Sequential"
		    opExportControl 	"Public"
		    uid        	0
		    quidu      	"4D6B7DB7016D"))
	    language   	"MDA Generator"
	    abstract   	TRUE)
	(object Class "FindUoQueriesInStatesAndSendRepeatInHDRemote"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"1407758353183985")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/DocCardChange/DocCardSupport/FindUoQueriesInStatesAndSendRepeatInHDRemote.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*53E8B01100B6_CUSTOM_IMPORT*"
		    value      	"//#UC START# *53E8B01100B6_CUSTOM_IMPORT*¤import java.sql.Array;¤import java.sql.Connection;¤import java.sql.PreparedStatement;¤import java.sql.ResultSet;¤import java.sql.SQLException;¤import java.util.ArrayList;¤import java.util.HashMap;¤import java.util.List;¤import java.util.Map;¤import java.util.Set;¤¤import net.sf.hibernate.HibernateException;¤¤import ru.garant.shared.Core.Root.NoActiveFactory;¤¤import com.atlassian.confluence.labels.Label;¤import com.atlassian.confluence.pages.Page;¤import com.atlassian.confluence.setup.bandana.ConfluenceBandanaContext;¤import com.atlassian.confluence.spaces.Space;¤¤import ru.garant.MDProcess.DocCardChange.DocCardChangeDAO.UVSQuestDAO;¤import ru.garant.MDProcess.DocCardChange.Entities.UVSQueryManager;¤import ru.garant.MDProcess.DocCardChange.Entities.UVSStateMachine;¤//#UC END# *53E8B01100B6_CUSTOM_IMPORT*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*53E8B01100B6_CUSTOM_CLASS_DEFINITION*"
		    value      	"//#UC START# *53E8B01100B6_CUSTOM_CLASS_DEFINITION*¤//#UC END# *53E8B01100B6_CUSTOM_CLASS_DEFINITION*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*53E8B01100B6_DO_EXECUTE_IMPLEMETATION*"
		    value      	(value Text 
|//#UC START# *53E8B01100B6_DO_EXECUTE_IMPLEMETATION*¤		super.doExecute(jec);¤		//#UC END# *53E8B01100B6_DO_EXECUTE_IMPLEMETATION*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*53E8B01100B6_CUSTOM_METHODS_AND_DATA*"
		    value      	(value Text 
|//#UC START# *53E8B01100B6_CUSTOM_METHODS_AND_DATA*¤	@Override¤	protected boolean isNeedWriteTransaction() {¤		return true;¤	}¤	¤	public Map<Long, UVSQuestDAO> getUvsIds(final List<UVSQuestDAO> uvsList){¤		Map<Long, UVSQuestDAO> uvsIds = new HashMap<Long, UVSQuestDAO>();¤		for(UVSQuestDAO uvsQuery : uvsList){¤			uvsIds.put(uvsQuery.getId(), uvsQuery);¤		}¤		return uvsIds;¤	}¤¤	final static String EMAILS_FOR_SEND = "FindUoQueriesInStatesAndSendRepeatInHDRemote";¤	//#UC END# *53E8B01100B6_CUSTOM_METHODS_AND_DATA*
		    ))
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Factory auto reg"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Factory default impl"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Servant Pool"
		    value      	"none")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"cron-expression"
		    value      	"0 0 3 * * ?")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"debug log"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"factory priority"
		    value      	"0")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"local supervisor"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"need UC"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"repeated"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"singleton"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"WikiPageID (wiki)"
		    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/FindUoQueriesInStatesAndSendRepeatInHDRemote|53E8B01100B6
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (wiki)"
		    value      	"wiki"))
	    quid       	"53E8B01100B6"
	    documentation 	
|Джоб, который
|находит все запросы, которые в розыске, пробегает по всем этим запросам
|ищет реквизиты карточки в HDRemote
|если нашел, то кладет запрос в массив найденных
|если массив найденных не пустой
|то отправляет письмо
	    
	    stereotype 	"KJobPlugin"
	    superclasses 	(list inheritance_relationship_list
		(object Inheritance_Relationship
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"1407759480879486"))
		    quid       	"53E8B478036E"
		    supplier   	"Logical View::MDProcess::DocCardChange::DocCardSupport::AbstractFindQueriesInStatesAndSendRepeatInHDRemote"
		    quidu      	"53E8AFBE0195"))
	    language   	"MDA Generator")
	(object Class "FilterSpaceOGVPathFromOPPJob"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"1408004220246754")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"abstract")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/DocCardChange/DocCardSupport/FilterSpaceOGVPathFromOPPJob.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*53EC707C00F5_CUSTOM_IMPORT*"
		    value      	"//#UC START# *53EC707C00F5_CUSTOM_IMPORT*¤import com.atlassian.confluence.setup.bandana.ConfluenceBandanaContext;¤import com.atlassian.confluence.spaces.Space;¤¤import java.util.ArrayList;¤import java.util.HashMap;¤import java.util.List;¤import java.util.Map;¤//#UC END# *53EC707C00F5_CUSTOM_IMPORT*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*53EC707C00F5_CUSTOM_CLASS_DEFINITION*"
		    value      	"//#UC START# *53EC707C00F5_CUSTOM_CLASS_DEFINITION*¤//#UC END# *53EC707C00F5_CUSTOM_CLASS_DEFINITION*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*53EC707C00F5_DO_EXECUTE_IMPLEMETATION*"
		    value      	(value Text 
|//#UC START# *53EC707C00F5_DO_EXECUTE_IMPLEMETATION*¤		super.doExecute(jec);¤		//#UC END# *53EC707C00F5_DO_EXECUTE_IMPLEMETATION*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*53EC707C00F5_CUSTOM_METHODS_AND_DATA*"
		    value      	(value Text 
|//#UC START# *53EC707C00F5_CUSTOM_METHODS_AND_DATA*¤	public static List<String> doFilterSpaceOGVPathFromOPPJob(final List<String> ogvNamesFromOpp, final String spaceKey){¤		List<String> resOgvNamesFromOpp = new ArrayList<String>();¤		//должны быть ОГВ только по путям, которые содержатся в bandana в include¤		ConfluenceBandanaContext context = new ConfluenceBandanaContext(spaceKey);¤		List<String> includePaths = (List<String>) ContainerManager.Factory.get ().getBandanaManager ().getValue (context, "ADD_OGVS_FROM_OPP_INCLUDE_PATHS");¤		¤		if(includePaths != null && includePaths.size() > 0){¤			List<String> addedOgvNames = new ArrayList<String>();¤			for(String ogvNameFromOpp : ogvNamesFromOpp){¤				for(String includePath : includePaths){¤					if(ogvNameFromOpp.startsWith(includePath)){¤						addedOgvNames.add(ogvNameFromOpp);¤					}¤				}¤			}¤			resOgvNamesFromOpp = addedOgvNames;¤		}else{¤			resOgvNamesFromOpp = ogvNamesFromOpp;¤		}¤		//отсеиваем ОГВ по путям, которые содержатся в bandana в exclude¤		List<String> excludePaths = (List<String>) ContainerManager.Factory.get ().getBandanaManager ().getValue (context, "ADD_OGVS_FROM_OPP_EXCLUDE_PATHS");¤		¤		if(excludePaths != null && excludePaths.size() > 0){¤			List<String> removedOgvNames = new ArrayList<String>();¤			for(String ogvNameFromOpp : resOgvNamesFromOpp){¤				for(String excludePath : excludePaths){¤					if(ogvNameFromOpp.startsWith(excludePath)){¤						removedOgvNames.add(ogvNameFromOpp);¤					}¤				}¤			}¤			resOgvNamesFromOpp.removeAll(removedOgvNames);¤		}¤		return resOgvNamesFromOpp;¤	}¤	¤	public static Map<String, String> getOGVPathInclude(List<Space> spaces){¤		Map<String, String> resIncludedPaths = new HashMap<String, String>();¤		for(Space space : spaces){¤			ConfluenceBandanaContext context = new ConfluenceBandanaContext(space.getKey());¤			List<String> includePaths = (List<String>) ContainerManager.Factory.get ().getBandanaManager ().getValue (context, "ADD_OGVS_FROM_OPP_INCLUDE_PATHS");¤			if(includePaths != null && includePaths.size() > 0){¤				for(String includePath : includePaths){¤					resIncludedPaths.put(includePath, space.getKey());¤				}¤			}¤			¤		}¤		return resIncludedPaths;¤	}¤¤	public static Map<String, String> getOGVPathExclude(List<Space> spaces){¤		Map<String, String> resExcludedPaths = new HashMap<String, String>();¤		for(Space space : spaces){¤			ConfluenceBandanaContext context = new ConfluenceBandanaContext(space.getKey());¤			List<String> excludePaths = (List<String>) ContainerManager.Factory.get ().getBandanaManager ().getValue (context, "ADD_OGVS_FROM_OPP_EXCLUDE_PATHS");¤			if(excludePaths != null && excludePaths.size() > 0){¤				for(String excludePath : excludePaths){¤					resExcludedPaths.put(excludePath, space.getKey());¤				}¤			}¤		}¤		return resExcludedPaths;¤	}¤	¤	//#UC END# *53EC707C00F5_CUSTOM_METHODS_AND_DATA*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"WikiPageID (wiki)"
		    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/FilterSpaceOGVPathFromOPPJob|53EC707C00F5
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (wiki)"
		    value      	"wiki"))
	    quid       	"53EC707C00F5"
	    documentation 	"фильтрация ОГВ из ОПП"
	    stereotype 	"KJobPlugin"
	    superclasses 	(list inheritance_relationship_list
		(object Inheritance_Relationship
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"1408004399778023"))
		    quid       	"53EC712F0309"
		    supplier   	"Logical View::MDProcess::DocCardChange::DocCardSupport::GarDocAbstractJob"
		    quidu      	"53E4BF9000E2"))
	    language   	"MDA Generator"
	    abstract   	TRUE)
	(object Class "ExportUvsQueriesListServlet"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"1421242725361060")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Factory auto reg"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Factory default impl"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Servant Pool"
		    value      	"none")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"debug log"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"factory priority"
		    value      	"0")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"local supervisor"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"need UC"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"singleton"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"url-pattern"
		    value      	"/exportuvsquerieslisttocsvfile")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/DocCardChange/DocCardSupport/ExportUvsQueriesListServlet.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*54B671650169_CUSTOM_IMPORT*"
		    value      	"//#UC START# *54B671650169_CUSTOM_IMPORT*¤import java.io.ByteArrayInputStream;¤import java.io.File;¤import java.io.FileInputStream;¤import java.io.IOException;¤import java.io.OutputStream;¤import java.util.ArrayList;¤import java.util.Arrays;¤import java.util.Iterator;¤import java.util.List;¤¤import org.apache.commons.csv.*;¤import org.apache.poi.hssf.usermodel.HSSFWorkbook;¤import org.apache.poi.ss.usermodel.Cell;¤import org.apache.poi.ss.usermodel.Row;¤import org.apache.poi.ss.usermodel.Sheet;¤import org.apache.poi.ss.usermodel.Workbook;¤import org.apache.poi.ss.usermodel.WorkbookFactory;¤import org.apache.poi.xssf.usermodel.XSSFSheet;¤import org.apache.poi.xssf.usermodel.XSSFWorkbook;¤import org.hsqldb.lib.StringInputStream;¤¤import com.atlassian.confluence.pages.Page;¤import com.atlassian.gzipfilter.org.apache.commons.lang.StringUtils;¤¤import ru.garant.shared.GCL.DateUtils;¤¤import ru.garant.MDProcess.ConfluenceMDChange.ReportSupport.RequestDataProvider;¤import ru.garant.MDProcess.DocCardChange.DocCardChangeDAO.AbstractECopyDAO;¤import ru.garant.MDProcess.DocCardChange.DocCardChangeDAO.CopyDAO;¤import ru.garant.MDProcess.DocCardChange.DocCardChangeDAO.ECopyDAO;¤import ru.garant.MDProcess.DocCardChange.DocCardChangeDAO.PaperScanCopy;¤import ru.garant.MDProcess.DocCardChange.DocCardChangeDAO.SiteCopyDAO;¤import ru.garant.MDProcess.DocCardChange.DocCardChangeDAO.UVSQuestDAO;¤import ru.garant.MDProcess.DocCardChange.DocCardCommon.DocCardManager;¤//#UC END# *54B671650169_CUSTOM_IMPORT*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*54B671650169_CUSTOM_CLASS_DEFINITION*"
		    value      	"//#UC START# *54B671650169_CUSTOM_CLASS_DEFINITION*¤//#UC END# *54B671650169_CUSTOM_CLASS_DEFINITION*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*54B671650169_INIT_IMPLEMETATION*"
		    value      	(value Text 
|//#UC START# *54B671650169_INIT_IMPLEMETATION*¤		//#UC END# *54B671650169_INIT_IMPLEMETATION*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*54B671650169_SERVICE_IMPLEMETATION*"
		    value      	(value Text 
|//#UC START# *54B671650169_SERVICE_IMPLEMETATION*¤		final String reqIdsString = request.getParameter("uvsQueriesAttributes");¤		String[] reqIds = StringUtils.split(reqIdsString, ",");¤		List<String> reqIdsList = Arrays.asList(reqIds);¤		¤		Workbook workbook = createXLSFile(reqIdsList);¤		addToResponseFileOutputStream(workbook, response);		¤		//#UC END# *54B671650169_SERVICE_IMPLEMETATION*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*54B671650169_CUSTOM_METHODS_AND_DATA*"
		    value      	(value Text 
|//#UC START# *54B671650169_CUSTOM_METHODS_AND_DATA*¤	public void addToResponseFileOutputStream(Workbook workbook, HttpServletResponse response) throws IOException{¤		response.setHeader("Cache-Control", "max-age=5");¤		response.setHeader("Pragma", "");¤		response.setDateHeader("Expires", System.currentTimeMillis() + 300);¤		response.setContentType("application/vnd.ms-excel;charset=UTF-8");¤		response.setHeader( "Content-Disposition", "attachment; filename=\"" + "export_list.xls\"" );¤¤		workbook.write(response.getOutputStream());¤		response.getOutputStream().flush();¤		response.getOutputStream().close();¤	}¤	¤	public Workbook createXLSFile(List<String> reqIdsList){¤		Workbook workbook = null;¤		try{¤			workbook = new HSSFWorkbook();¤			Sheet sheet = workbook.createSheet();¤			sheet.setColumnWidth(0, 11 * CHARACTER_WIDTH);¤			sheet.setColumnWidth(1, 177 * CHARACTER_WIDTH);¤			sheet.setColumnWidth(2, 11 * CHARACTER_WIDTH);¤			sheet.setColumnWidth(3, 44 * CHARACTER_WIDTH);¤			sheet.setColumnWidth(4, 222 * CHARACTER_WIDTH);¤¤			int i = 0;¤			for(String reqIdString : reqIdsList){¤				long reqId = Long.parseLong(reqIdString);¤				Page reqPage = ContainerManager.Factory.get().getPageManager().getPage(reqId);¤				Page docPage = reqPage.getParent();¤				RequestDataProvider provider = new RequestDataProvider(reqPage);¤				String topic = getTopic(provider);¤				String blocks = getBlocks(provider);¤				String docTitle = docPage.getTitle();¤				String stateWithReqTitle = getStateWithReqTitle(provider, reqPage);¤				String publication = getPublishInformation(docPage.getId());¤¤				Row row = sheet.createRow(i);¤				Cell cell1 = row.createCell(0);¤				cell1.setCellValue(topic);¤				¤				Cell cell2 = row.createCell(1);¤				cell2.setCellValue(docTitle);¤				¤				Cell cell3 = row.createCell(2);¤				cell3.setCellValue(blocks);¤¤				Cell cell4 = row.createCell(3);¤				cell4.setCellValue(stateWithReqTitle);¤¤				Cell cell5 = row.createCell(4);¤				cell5.setCellValue(publication);¤¤				i++;¤			}¤		}catch(Exception ex){¤			Logs.LOG_SEX(ex);¤		}¤		return workbook;¤	}¤	¤	public String getTopic(RequestDataProvider provider){¤		return provider.getTopic();¤	}¤	¤	public String getBlocks(RequestDataProvider provider){¤		return provider.getBlocks();¤	}¤¤	public String getStateWithReqTitle(RequestDataProvider provider, Page reqPage){¤		return provider.getStateName() + "(" + reqPage.getTitle() + ")";¤	}¤¤	private String getPublishInformation(long docId){¤		StringBuilder result = new StringBuilder();¤		int count = 0;¤		String nameCopy;¤		String resultCopyList = "";¤		List<UVSQuestDAO> uvsQueries = DocCardManager.Factory.get().getUvsQueryForDocCard(docId);¤¤		for(UVSQuestDAO uvsQuest : uvsQueries){¤			CopyDAO copy = uvsQuest.getCopy();¤			if(copy != null && copy.getCreationDate() != null){¤				count++;¤				result = new StringBuilder();¤				String place = ru.garant.shared.GCI.I18N.Messages.Factory.messages().get("doccard.no.values");¤				if (copy instanceof AbstractECopyDAO) {¤				    if(copy instanceof PaperScanCopy){¤				    	nameCopy = copy.getSearchingPanelText();¤					}else if(copy instanceof ECopyDAO){¤						nameCopy = ru.garant.shared.GCI.I18N.Messages.Factory.messages().get("doccard.e.copy") + " (рассылка)";¤					}else {¤						nameCopy = ru.garant.shared.GCI.I18N.Messages.Factory.messages().get("doccard.site.copy").replace(¤							"(сайт)"¤							, "(сайт: " + ((StringUtils.isEmpty(((SiteCopyDAO)copy).getSourceWebSite())) ? "нет данных": (((SiteCopyDAO)copy).getSourceWebSite())) + ")"¤						);¤					}¤				} else{¤					nameCopy = ru.garant.shared.GCI.I18N.Messages.Factory.messages().get("doccard.paper.copy");¤				}¤				result.append(" " + count + ". " + nameCopy + "; "); ¤	¤				result.append(ru.garant.shared.GCI.I18N.Messages.Factory.messages().get("doccard.copy.created.date") + ": " + DateUtils.formatDdMMyyyDate(copy.getCreationDate()) + "; ");¤				¤				result.append(ru.garant.shared.GCI.I18N.Messages.Factory.messages().get("doccard.copy.location") + ": ");¤	¤				if(uvsQuest.getCopy() != null && uvsQuest.getCopy().getId() == copy.getId()){¤					place = " "+ uvsQuest.getPage().getTitle();¤				}¤				result.append(place);¤				if(copy.getSrcTitle() != null){¤					result.append("; " + ru.garant.shared.GCI.I18N.Messages.Factory.messages().get("doccard.copy.src.title") + ": " + copy.getSrcTitle().getName());¤				}¤				if(copy.getSrcNumber() != null){¤					result.append("; " + ru.garant.shared.GCI.I18N.Messages.Factory.messages().get("doccard.copy.src.number") + ": " + copy.getSrcNumber());¤				}¤				if(copy.getSrcStartDate() != null){¤					result.append("; " + ru.garant.shared.GCI.I18N.Messages.Factory.messages().get("doccard.copy.src.date") + " начала: " + DpoUvsHelper.getSrcDateString(copy.getSrcStartDate()));¤				}¤				if(copy.getSrcEndDate() != null){¤					result.append("; " + ru.garant.shared.GCI.I18N.Messages.Factory.messages().get("doccard.copy.src.date") + " конца: " + DpoUvsHelper.getSrcDateString(copy.getSrcEndDate()));¤				}¤				if(StringUtils.isNotEmpty(copy.getSrcPage())){¤					result.append("; " + ru.garant.shared.GCI.I18N.Messages.Factory.messages().get("doccard.copy.src.page") + ": " + copy.getSrcPage());¤				}¤				¤				if (copy.getNotFullDocSpecification() != null && copy.getNotFullDocSpecification().length() > 0) {¤					result.append("; ");¤					result.append(ru.garant.shared.GCI.I18N.Messages.Factory.messages().get("doccard.copy.notfulldoc.caption") + ": ");¤					result.append(copy.getNotFullDocSpecification());¤				}¤				resultCopyList += result.toString();¤			}¤		}¤		if(StringUtils.isEmpty(resultCopyList)){¤			resultCopyList = ru.garant.shared.GCI.I18N.Messages.Factory.messages().get("doccard.no.copies");¤		}¤		return resultCopyList;¤	}¤	//in units of 1/256th of a character width¤	public static final int CHARACTER_WIDTH = 256;¤	//#UC END# *54B671650169_CUSTOM_METHODS_AND_DATA*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"WikiPageID (wiki)"
		    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/ExportUvsQueriesListServlet|54B671650169
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (wiki)"
		    value      	"wiki"))
	    quid       	"54B671650169"
	    documentation 	"Выливаем и даем скачать, что бы открылся в экселе. Для этого формируем csv и отдаем его юзеру. В csv пишем все столбцы как на экране."
	    stereotype 	"KServletPlugin"
	    language   	"MDA Generator")
	(object Class "GetGosDumaDocumentsJob"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"1425380458552641")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Factory auto reg"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Factory default impl"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Servant Pool"
		    value      	"none")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"cron-expression"
		    value      	"0 0/30 * * * ?")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"debug log"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"factory priority"
		    value      	"0")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"local supervisor"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"need UC"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"repeated"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"singleton"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/DocCardChange/DocCardSupport/GetGosDumaDocumentsJob.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*54F5946A021A_CUSTOM_IMPORT*"
		    value      	"//#UC START# *54F5946A021A_CUSTOM_IMPORT*¤import java.io.*;¤¤import java.net.InetSocketAddress;¤import java.net.Proxy;¤import java.net.URL;¤import java.net.URLConnection;¤¤import java.util.*;¤import java.util.regex.Matcher;¤import java.util.regex.Pattern;¤¤import ru.garant.MDProcess.ConfluencePlugins.EmailNotification.EmailGateway;¤import ru.garant.MDProcess.DocCardChange.DocCardSupport.RssParser.*;¤import ru.garant.MDProcess.DocCardMailing.Mailing.DocCardContent;¤import ru.garant.MDProcess.DocCardMailing.Mailing.DocCardFile;¤import ru.garant.MDProcess.DocCardMailing.Mailing.FileContent;¤import ru.garant.MDProcess.DocCardMailing.Mailing.RequestCreator;¤¤¤import org.jsoup.Jsoup;¤import org.jsoup.nodes.Document;¤import org.jsoup.nodes.Element;¤import org.jsoup.select.Elements;¤¤import com.atlassian.mail.Email;¤//#UC END# *54F5946A021A_CUSTOM_IMPORT*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*54F5946A021A_CUSTOM_CLASS_DEFINITION*"
		    value      	"//#UC START# *54F5946A021A_CUSTOM_CLASS_DEFINITION*¤//#UC END# *54F5946A021A_CUSTOM_CLASS_DEFINITION*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*54F5946A021A_DO_EXECUTE_IMPLEMETATION*"
		    value      	(value Text 
|//#UC START# *54F5946A021A_DO_EXECUTE_IMPLEMETATION*¤		super.doExecute(jec);¤		//#UC END# *54F5946A021A_DO_EXECUTE_IMPLEMETATION*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*54F5946A021A_CUSTOM_METHODS_AND_DATA*"
		    value      	(value Text 
|//#UC START# *54F5946A021A_CUSTOM_METHODS_AND_DATA*¤	@Override¤	protected void executeJob() {¤		try {¤//			String token = "app7c608634c9f2a9b382c47e9aa091089dab3896f2";¤//			String token2 = "3d8f62ff5bc28c1e9e703375b43b5fab4a36168e";¤			Map<String, String> params = new HashMap<String, String>();¤¤			params.put("search_mode", "2");¤			params.put("event_start", "05.03.2015");¤			params.put("event_end", "06.03.2015");¤¤			List<DocCardContent> dclist = getAttributes(params);¤			¤			String log = createUvsQueries(dclist);¤			sendMail(log);			¤		} catch (Exception e) {¤			Logs.LOG_SEX(e);¤		}¤	¤	}¤	¤	public List <DocCardContent> getAttributes(Map<String, String> params){¤		List <DocCardContent> docAttributes = new ArrayList <DocCardContent>();¤		int i = 1;¤		RssParser rp = new RssParser("http://api.duma.gov.ru/api/search.rss", params, "duma");¤		¤		rp.parse(); ¤		RssFeed feed = rp.getFeed();¤¤		if(feed.getItems() != null){¤			for(Item item : feed.getItems()){¤				String issuer = "Государственная Дума Федерального Собрания";¤				String type = "ПРОЕКТ ЗАКОНА";¤¤				try{¤					String number = null;¤					Date creationDate = null;¤	¤					Pattern pattern = Pattern.compile(".*\\<b\\>Номер\\:\\<\\/b\\> ([^\\<br\\/\\>]*)\\<br\\/\\>\\n\\<b\\>Дата внесения в ГД:\\<\\/b\\> (\\d{1,2}) (января|февраля|марта|апреля|мая|июня|июля|августа|сентября|октября|ноября|декабря) (\\d{4}) года\\<br\\/\\>.*");¤					Matcher m = pattern.matcher(item.description);¤					if (m.find()) {¤						number = (String)m.group(1);¤						String day = (String)m.group(2);¤						String month = (String)m.group(3);¤						String year = (String)m.group(4);¤						creationDate = parseDate(day, month, year);¤						¤						DocCardContent content = new DocCardContent();¤						content.setNumber(number);¤						content.setCreationDate(creationDate);¤						content.setIssuer(issuer);¤						content.setType(type);¤						content.setTitle(item.title);¤¤						Map<String, String> hrefFiles = parseLink(item.link);¤						content.setFiles(getDocFiles(hrefFiles));¤						docAttributes.add(content);¤¤						//Logs.LOG_W(i + ". number=" + number + " creationDate=" + creationDate + " hrefFiles.size=" + hrefFiles.size());¤						System.out.println(i + ". number=" + number + " creationDate=" + creationDate + " hrefFiles.size=" + hrefFiles.size());¤						i++;¤					}¤				}catch(Exception ex){¤					Logs.LOG_SEX(ex);¤				}¤			}¤		}¤		return docAttributes;¤	}¤	¤	public List<DocCardFile> getDocFiles(Map<String, String> hrefFiles){¤		List<DocCardFile> docFiles = new ArrayList<DocCardFile>();¤		InputStream is = null;¤		for(String hrefFileName : hrefFiles.keySet()){¤			try {¤				¤				URL urlLink = new URL(hrefFiles.get(hrefFileName));¤				Proxy proxy = new Proxy(Proxy.Type.HTTP, new InetSocketAddress("proxy.garant.ru", 8080)); ¤				URLConnection connection = urlLink.openConnection(proxy);¤				¤		    	is = connection.getInputStream ();¤		    	DocCardFile dcFile = DocCardFile.Factory.make();¤		    	dcFile.setFileName(hrefFileName);¤		    	FileContent fc = FileContent.Factory.make();¤		    	fc.setBinaryStream(is);¤		    	dcFile.setFileContent(fc);¤		    	docFiles.add(dcFile);¤			} catch (Exception ex) {¤				Logs.LOG_SEX(ex);¤			}finally{¤				if(is != null){¤				    try {¤						is.close();¤					} catch (IOException e) {¤						Logs.LOG_SEX(e);¤					}¤				}¤			}¤¤		}¤		return docFiles;¤	}¤	¤	public Date parseDate(String day, String month, String year){¤		Calendar cal = Calendar.getInstance();¤		cal.set(Calendar.HOUR, 0);¤		cal.set(Calendar.MINUTE, 0);¤		cal.set(Calendar.SECOND, 0);¤		cal.set(Calendar.DAY_OF_MONTH, Integer.parseInt(day));¤		int monthIndex = Calendar.JANUARY; ¤		if(month.equals("февраля")){¤			monthIndex = Calendar.FEBRUARY;¤		}else if(month.equals("марта")){¤			monthIndex = Calendar.MARCH;¤		}else if(month.equals("апреля")){¤			monthIndex = Calendar.APRIL;¤		}else if(month.equals("мая")){¤			monthIndex = Calendar.MAY;¤		}else if(month.equals("июня")){¤			monthIndex = Calendar.JUNE;¤		}else if(month.equals("июля")){¤			monthIndex = Calendar.JULY;¤		}else if(month.equals("августа")){¤			monthIndex = Calendar.AUGUST;¤		}else if(month.equals("сентября")){¤			monthIndex = Calendar.SEPTEMBER;¤		}else if(month.equals("октября")){¤			monthIndex = Calendar.OCTOBER;¤		}else if(month.equals("ноября")){¤			monthIndex = Calendar.NOVEMBER;¤		}else if(month.equals("декабря")){¤			monthIndex = Calendar.DECEMBER;¤		}¤		cal.set(Calendar.MONTH, monthIndex);¤		cal.set(Calendar.YEAR, Integer.parseInt(year));¤		return cal.getTime();¤	}¤	¤	public Map<String, String> parseLink(String link){¤		Map<String, String> hrefs = new HashMap<String, String>();¤		InputStream is = null;¤		try {¤			String[] path = link.split("/");¤			String siteName = path[0] + "/" + path[1] + "/" + path[2];¤			URL urlLink = new URL(link);¤			Proxy proxy = new Proxy(Proxy.Type.HTTP, new InetSocketAddress("proxy.garant.ru", 8080)); ¤			URLConnection connection = urlLink.openConnection(proxy);¤			¤	    	is = connection.getInputStream ();¤¤	    	¤	    	BufferedReader htmlPage = new BufferedReader(new InputStreamReader (is)) ;¤	    	¤    		String line = "";¤			StringBuilder strB = new StringBuilder();¤			while ((line = htmlPage.readLine ()) != null) {¤				strB.append(line);¤			}¤			¤			Document doc = Jsoup.parse(strB.toString());¤¤			Elements els = doc.getElementsByAttributeValue("class", "dark");¤			if(els.size() > 0){¤				Element el = els.get(0);¤				hrefs.put(el.text(), el.attr("href"));¤//				Logs.LOG_W("fileName=" + el.text());¤			}else{¤			¤				Elements firstEls = doc.getElementsByAttributeValue("id", "docs");¤				Elements divHeaders = firstEls.get(0).getElementsByAttributeValue("class", "date-block-header");¤				for(Element divEl : divHeaders) {¤					if(divEl.text().equals("Регистрация законопроекта и материалов к нему в САДД Государственной Думы")){¤						Element parent = divEl.parent();¤						Elements aEls = parent.getElementsByTag("a");¤						if(aEls.size() > 0){¤							for(Element aEl : aEls){¤								hrefs.put(aEl.text(), siteName + aEl.attr("href"));¤				//				Logs.LOG_W("fileName=" + el.text());¤								System.out.println("fileName=" + aEl.text());¤							}¤						}¤					}¤				}¤			}¤	    ¤		} catch (Exception ex) {¤			Logs.LOG_SEX(ex);¤		}finally{¤			if(is != null){¤			    try {¤					is.close();¤				} catch (IOException e) {¤					Logs.LOG_SEX(e);¤				}¤			}		¤		}¤		return hrefs;¤	}¤	¤	public String createUvsQueries(List<DocCardContent> dclist){¤		StringBuilder log = new StringBuilder ();¤		RequestCreator creator = RequestCreator.Factory.make("ADD_PUBLISHED_WITH_MANAGER_STATE");¤		creator.setCreateInNewTransaction(true);¤		String creatorName = "savinova";¤		creator.process(dclist, new CreateUvsQuery(), log, creatorName, "DPOUVS");¤		return log.toString();¤	}¤	¤	private void sendMail(String log){¤		EmailGateway eg = EmailGateway.Factory.create();¤		Email emailForSend = eg.createEmail (¤			"Получение документов ГосДумы с сайта " 	¤			, log.replace("\n", "\n<BR>")¤			, "elenau@garant.ru,ses@garant.ru"¤		);¤		¤		Logs.LOG_D("GetGosDumaDocumentsJob log:\n" + log.toString ());¤		¤		eg.queueEmail (emailForSend);¤		¤		Logs.LOG_D ("MailingJob.processEmailReceived: ceg.send ()");¤		eg.send ();		¤	}¤¤¤	@Override¤	protected boolean isNeedWriteTransaction() {¤		return false;¤	}¤	¤	//#UC END# *54F5946A021A_CUSTOM_METHODS_AND_DATA*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"WikiPageID (wiki)"
		    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Модель проекта "MDProcess"/DocCardChange/DocCardSupport/GetGosDumaDocumentsJob|54F5946A021A
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (wiki)"
		    value      	"wiki"))
	    quid       	"54F5946A021A"
	    documentation 	"получение документов ГосДумы с сайта "
	    stereotype 	"KJobPlugin"
	    superclasses 	(list inheritance_relationship_list
		(object Inheritance_Relationship
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"1425380517801031"))
		    quid       	"54F594A50320"
		    supplier   	"Logical View::MDProcess::DocCardChange::DocCardSupport::GarDocAbstractJob"
		    quidu      	"53E4BF9000E2"))
	    language   	"MDA Generator")
	(object Class "OGVSynonymsUpdateServlet"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"1436517927520118")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Factory auto reg"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Factory default impl"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Servant Pool"
		    value      	"none")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"debug log"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"factory priority"
		    value      	"0")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"local supervisor"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"need UC"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"singleton"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"url-pattern"
		    value      	"/gar-rest/ogv-synonyms")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/DocCardChange/DocCardSupport/OGVSynonymsUpdateServlet.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*559F86270207_CUSTOM_IMPORT*"
		    value      	"//#UC START# *559F86270207_CUSTOM_IMPORT*¤import java.util.ArrayList;¤import java.util.HashSet;¤import java.util.List;¤import java.util.Map;¤import java.util.Set;¤¤import java.io.File;¤import java.io.FileInputStream;¤import java.io.IOException;¤¤import com.atlassian.gzipfilter.org.apache.commons.lang.StringUtils;¤¤import ru.garant.MDProcess.DocCardChange.DocCardChangeDAO.GarDocSourceTitles;¤import ru.garant.MDProcess.DocCardChange.DocCardChangeDAO.OGVLinksDAO;¤import ru.garant.MDProcess.DocCardChange.DocCardCommon.OGVLinksManager;¤import ru.garant.MDProcess.DocCardChange.DocCardCommon.XMLDocumentUpdater;¤import ru.garant.MDProcess.DocCardChange.Entities.UVSQueryManager;¤import ru.garant.MDProcess.DocCardMailing.OGVSynonymDAO;¤import ru.garant.MDProcess.DocCardMailing.Mailing.OGVSynonymsManager;¤¤import javax.servlet.ServletInputStream;¤import org.w3c.dom.Document;¤import org.w3c.dom.Element;¤import org.w3c.dom.Node;¤import org.w3c.dom.NodeList;¤¤¤import java.util.Arrays;¤¤import java.util.regex.Matcher;¤import java.util.regex.Pattern;¤¤//#UC END# *559F86270207_CUSTOM_IMPORT*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*559F86270207_CUSTOM_CLASS_DEFINITION*"
		    value      	"//#UC START# *559F86270207_CUSTOM_CLASS_DEFINITION*¤//#UC END# *559F86270207_CUSTOM_CLASS_DEFINITION*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*559F86270207_INIT_IMPLEMETATION*"
		    value      	(value Text 
|//#UC START# *559F86270207_INIT_IMPLEMETATION*¤		//#UC END# *559F86270207_INIT_IMPLEMETATION*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*559F86270207_CUSTOM_METHODS_AND_DATA*"
		    value      	(value Text 
|//#UC START# *559F86270207_CUSTOM_METHODS_AND_DATA*¤	@Override¤	public void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {¤		Logs.LOG_W("OGVSynonymsUpdateServlet::doPost::start");¤		try {¤//			File file = new File("J:/support/unittest/gardoctypesupdate/2015101511280000_types.xml");¤//			File file = new File("J:/support/unittest/synsPost/body.txt");¤//			FileInputStream fis = new FileInputStream(file);¤			ServletInputStream fis = request.getInputStream();¤			¤			Document document = getDocument(fis);¤¤			Map<String, String> dataProperties = getDataProps(document, Arrays.asList(dataPropertiesNames));¤			String operation = dataProperties.get("operation");¤			Integer region = Integer.valueOf(dataProperties.get("region"));¤			Integer version = Integer.valueOf(dataProperties.get("version"));¤			String dictionaryName = dataProperties.get("dict");¤			if(version < 3){¤				dictionaryName = "docsrc";¤			}¤			if(StringUtils.isEmpty(dictionaryName)){¤				Logs.LOG_W("OGVSynonymsUpdateServlet::doPost::no dictionary!");¤				return;¤			}¤			if(XMLDocumentUpdater.Factory.keys().contains(dictionaryName) == false){¤				Logs.LOG_W("OGVSynonymsUpdateServlet::doPost::unknown dictionary name='" + dictionaryName + "'!");¤				return;¤			}¤			XMLDocumentUpdater updater = XMLDocumentUpdater.Factory.make(dictionaryName);¤			¤			if(StringUtils.isEmpty(operation)){¤				throw new ServletException("ERROR in OGVSynonymsUpdateServlet::doPost::no operation in data tag!");¤			}else if(region == null){¤					throw new ServletException("ERROR in OGVSynonymsUpdateServlet::doPost::no region in data tag!");¤			}else if(operation.equals("all")){¤				List<Object> properties = updater.getPropertiesFromDocument(document);¤				updater.removeAllOldAndAddNewData(properties, region);¤        	}else if(operation.equals("new")){¤				List<Object> properties = updater.getPropertiesFromDocument(document);¤				updater.addNewData(properties, region);¤        	}else if(operation.equals("upd")){¤				List<Object> properties = updater.getPropertiesFromDocument(document);¤				updater.updateData(properties, region);¤        	}else if(operation.equals("del")){¤				List<Object> properties = getRemovingElements(document);¤				updater.removeData(properties, region);¤        	}¤		} catch (Exception e) {¤			Logs.LOG_SEX(e);¤		}¤		Logs.LOG_W("OGVSynonymsUpdateServlet::doPost::end");¤	}¤¤¤	public static String[] dataPropertiesNames = {"version", "region", "dict", "operation"}; ¤	//#UC END# *559F86270207_CUSTOM_METHODS_AND_DATA*
		    )))
	    quid       	"559F86270207"
	    documentation 	"обновление синонимов из арчи и от партнеров"
	    stereotype 	"KServletPlugin"
	    superclasses 	(list inheritance_relationship_list
		(object Inheritance_Relationship
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"1436523369005360"))
		    quid       	"559F9B690004"
		    supplier   	"Logical View::MDProcess::DocCardChange::DocCardSupport::AbstractWorkWithXMLDocumentServlet"
		    quidu      	"559F9B3F0197"))
	    language   	"MDA Generator")
	(object Class "AbstractWorkWithXMLDocumentServlet"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"1436523327408979")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"abstract")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/DocCardChange/DocCardSupport/AbstractWorkWithXMLDocumentServlet.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*559F9B3F0197_CUSTOM_IMPORT*"
		    value      	"//#UC START# *559F9B3F0197_CUSTOM_IMPORT*¤import javax.xml.parsers.DocumentBuilder;¤import javax.xml.parsers.DocumentBuilderFactory;¤import javax.xml.parsers.SAXParser;¤import javax.xml.parsers.SAXParserFactory;¤¤import java.io.*;¤import java.util.ArrayList;¤import java.util.HashMap;¤import java.util.List;¤import java.util.Map;¤import java.util.Stack;¤¤import ru.garant.MDProcess.ConfluencePlugins.CommonVelocityContext.GlobalHelper;¤¤import org.apache.commons.io.IOUtils;¤import org.apache.commons.lang.StringUtils;¤¤import org.w3c.dom.*;¤import org.xml.sax.Attributes;¤import org.xml.sax.InputSource;¤import org.xml.sax.SAXException;¤import org.xml.sax.helpers.DefaultHandler;¤//#UC END# *559F9B3F0197_CUSTOM_IMPORT*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*559F9B3F0197_CUSTOM_CLASS_DEFINITION*"
		    value      	"//#UC START# *559F9B3F0197_CUSTOM_CLASS_DEFINITION*¤//#UC END# *559F9B3F0197_CUSTOM_CLASS_DEFINITION*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*559F9B3F0197_CUSTOM_METHODS_AND_DATA*"
		    value      	(value Text 
|//#UC START# *559F9B3F0197_CUSTOM_METHODS_AND_DATA*¤	public Document getDocument(final InputStream is) throws Exception{¤		/*byte[] body = IOUtils.toByteArray(is);¤		{¤			SAXParserFactory factory = SAXParserFactory.newInstance();¤			SAXParser parser = factory.newSAXParser();¤			InputSource isrc = new InputSource(new ByteArrayInputStream(body));¤			DefaultHandler df = new DefaultHandler() {¤¤				Stack<String> parents = new Stack<String>();¤				¤				@Override¤				public void startElement(String uri, String localName, String qName, Attributes attributes) throws SAXException {¤					parents.push(qName);¤				}¤				¤				public void endElement(String uri, String localName, String qName) throws SAXException {¤					parents.pop();				¤				}¤				¤				@Override¤				public void characters(char ch[], int start, int length) throws SAXException {¤					String value = new String(ch, start, length);¤					System.out.println(parents.peek() + " : " + value);¤				}¤¤			};¤			parser.parse(isrc, df);¤		}*/¤		¤		¤		/*¤		byte[] body = IOUtils.toByteArray(is);¤		¤		StringBuilder sb = new StringBuilder();¤		sb.append(">>>>>>>>>>>>>>>>>>>>>>>>>\n");¤		sb.append(IOUtils.toString(body, "windows-1251"));¤		sb.append("\n<<<<<<<<<<<<<<<<<<<<<<<<<");¤		Logs.LOG_D(sb.toString());¤		*/¤		¤		ByteArrayInputStream bais = GlobalHelper.getInputStreamAndWriteToGardoLog(is, "windows-1251", "archi");¤		DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();¤		DocumentBuilder builder = factory.newDocumentBuilder();¤		Document document = builder.parse(bais);¤		Logs.LOG_W("encoding=" + document.getXmlEncoding());¤		document.getDocumentElement().normalize();¤		return document;¤	}¤	¤	public Map<String, String> getDataProps(Document document, List<String> initDataPropertiesNames){¤		Map<String, String> dataProperties = new HashMap<String, String>();¤		NodeList nodeLst = document.getElementsByTagName("data");¤		Node fstNode = nodeLst.item(0);¤		if (fstNode.getNodeType() == Node.ELEMENT_NODE) {¤	        Element fstElmnt = (Element) fstNode;¤	        for(String initDataPropertiesName : initDataPropertiesNames){¤		        String attribute = fstElmnt.getAttribute(initDataPropertiesName);¤		        if(StringUtils.isNotEmpty(attribute)){¤		        	dataProperties.put(initDataPropertiesName, attribute);¤		        }¤	        }¤		}¤		return dataProperties;¤	}¤	¤¤¤	¤	public List<Object> getRemovingElements(final Document document){¤		List<Object> ids = new ArrayList<Object>();¤		NodeList nodeLst = document.getElementsByTagName("element");¤		for (int s = 0; s < nodeLst.getLength(); s++) {¤			Node fstNode = nodeLst.item(s);¤			if (fstNode.getNodeType() == Node.ELEMENT_NODE) {¤		        Element fstElmnt = (Element) fstNode;¤		        String idString = fstElmnt.getAttribute("id");¤		        long id = Long.parseLong(idString);¤		        ids.add(id);¤			}¤		}	¤		return ids;¤	}¤¤	//#UC END# *559F9B3F0197_CUSTOM_METHODS_AND_DATA*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"DerivedImplement"
		    value      	"{}")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"DerivedOverload"
		    value      	"{}")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ImplementSelectType"
		    value      	"all")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"OverloadSelectType"
		    value      	"include")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Factory auto reg"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Factory default impl"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Servant Pool"
		    value      	"none")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"debug log"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"factory priority"
		    value      	"0")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"local supervisor"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"need UC"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"singleton"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ApplyedGens"
		    value      	"All")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*559F9B3F0197_INIT_IMPLEMETATION*"
		    value      	(value Text 
|//#UC START# *559F9B3F0197_INIT_IMPLEMETATION*¤		//#UC END# *559F9B3F0197_INIT_IMPLEMETATION*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*559F9B3F0197_SERVICE_IMPLEMETATION*"
		    value      	(value Text 
|//#UC START# *559F9B3F0197_SERVICE_IMPLEMETATION*¤		//#UC END# *559F9B3F0197_SERVICE_IMPLEMETATION*
		    )))
	    quid       	"559F9B3F0197"
	    documentation 	"абстрактный класс обновления синонимов"
	    stereotype 	"KServletPlugin"
	    language   	"MDA Generator"
	    abstract   	TRUE)
	(object Class "GardocIndexFieldsExtractor"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"1437472170861692")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/DocCardChange/DocCardSupport/GardocIndexFieldsExtractor.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*55AE15AA035D_CUSTOM_IMPORT*"
		    value      	"//#UC START# *55AE15AA035D_CUSTOM_IMPORT*¤import java.sql.Connection;¤import java.sql.ResultSet;¤import java.sql.SQLException;¤import java.sql.Statement;¤import java.text.SimpleDateFormat;¤import java.util.ArrayList;¤import java.util.Arrays;¤import java.util.Collection;¤import java.util.Date;¤import java.util.HashMap;¤import java.util.List;¤import java.util.Map;¤¤import net.sf.hibernate.Query;¤import net.sf.hibernate.Session;¤¤import org.apache.commons.lang.StringUtils;¤import org.apache.commons.lang.text.StrBuilder;¤¤import com.google.common.cache.CacheBuilder;¤import com.google.common.cache.CacheLoader;¤import com.google.common.cache.LoadingCache;¤¤import com.atlassian.confluence.pages.Page;¤¤import ru.garant.MDProcess.ConfluenceMDChange.MDChangeDAO.ExecutionGroupDAOProxy;¤import ru.garant.MDProcess.DocCardChange.DocCardChangeDAO.BlockDAO;¤import ru.garant.MDProcess.DocCardChange.DocCardChangeDAO.CopyDAO;¤import ru.garant.MDProcess.DocCardChange.DocCardChangeDAO.DocTypeDAO;¤import ru.garant.MDProcess.DocCardChange.DocCardChangeDAO.GarDocDAO;¤import ru.garant.MDProcess.DocCardChange.DocCardCommon.DocCardManager;¤import ru.garant.MDProcess.DocCardChange.Entities.UVSQueryManager;¤import ru.garant.MDProcess.DocCardChange.Entities.UVSStateMachine;¤//#UC END# *55AE15AA035D_CUSTOM_IMPORT*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*55AE15AA035D_CUSTOM_CLASS_DEFINITION*"
		    value      	"//#UC START# *55AE15AA035D_CUSTOM_CLASS_DEFINITION*¤//#UC END# *55AE15AA035D_CUSTOM_CLASS_DEFINITION*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*55AE15AA035D_CUSTOM_METHODS_AND_DATA*"
		    value      	(value Text 
|//#UC START# *55AE15AA035D_CUSTOM_METHODS_AND_DATA*¤	private static Integer CACHE_SIZE = 10000; ¤    private static LoadingCache<Long, GardocIndexedFields> gardocFieldsCache_;¤¤    public static int allCount_ = 0;¤    public static int extractFromCacheCount_ = 0;¤    public static int getFromBaseCount_ = 0;¤    ¤    ¤    private static LoadingCache<Long, GardocIndexedFields> getGardocFieldsCache(){¤ 		if(gardocFieldsCache_ == null){¤ 			synchronized(GardocIndexFieldsExtractor.class){¤ 				if(gardocFieldsCache_ == null){¤ 					gardocFieldsCache_ = CacheBuilder.newBuilder()¤ 						.maximumSize(CACHE_SIZE)¤ 						.build(new CacheLoader<Long, GardocIndexedFields>() {¤ 							@Override¤ 							public GardocIndexedFields load(Long pageId) {¤ 								List<GardocIndexedFields> list = getGardocWithRUvsQueriesIndexedFields(pageId);¤ 								GardocIndexedFields ret = null;¤ 								for (GardocIndexedFields item : list) {¤ 									if (pageId.equals(item.id_) == false) {¤ 										gardocFieldsCache_.put(item.id_, item);¤ 									} else {¤ 										ret = item;¤ 									}¤ 								}¤ 								return ret;¤ 							}¤ 					});¤ 				}¤ 			}¤ 		}¤ 		return gardocFieldsCache_;¤    }¤    ¤    public static List<GardocIndexedFields> getGardocWithRUvsQueriesIndexedFields(final long docId){¤//    	long time = new Date().getTime();¤		List<GardocIndexedFields> gardocIndexedFieldsList = new ArrayList<GardocIndexedFields>();¤    	try{¤	    	Map<Long, Collection<UvsQueryIndexedFields>> uvsQueriesMap = getReqHistory(docId, CACHE_SIZE);¤	    	gardocIndexedFieldsList =  getGardocIndexedFields(docId, CACHE_SIZE);¤	    	for (GardocIndexedFields gardocIndexedFields : gardocIndexedFieldsList) {¤	    		Collection<UvsQueryIndexedFields> uvsQueries = uvsQueriesMap.get(gardocIndexedFields.id_);¤	    		if(uvsQueries != null && uvsQueries.size() > 0){¤			    	gardocIndexedFields.uvsQueryIndexedFields_  = new ArrayList(uvsQueries);¤					List<String> copies = new ArrayList<String>();¤					List<String> waitingFromOGV = new ArrayList<String>();¤					List<String> inAcceptInUODate = new ArrayList<String>();¤					¤					for(UvsQueryIndexedFields uvs : uvsQueries){¤						if(StringUtils.isNotEmpty(uvs.copy_)){¤							copies.add(uvs.copy_);¤						}¤						if(StringUtils.isNotEmpty(uvs.waitingFromOGVDate_)){¤							waitingFromOGV.add(uvs.waitingFromOGVDate_);¤						}¤						if(StringUtils.isNotEmpty(uvs.inAcceptInUODate_)){¤							inAcceptInUODate.add(uvs.inAcceptInUODate_);¤						}¤					}¤					gardocIndexedFields.copies_ = copies;¤					gardocIndexedFields.inAcceptInUODateList_ = inAcceptInUODate;¤					gardocIndexedFields.waitingFromOGVDateList_ = waitingFromOGV;¤	    		}else{¤	    			Logs.LOG_W("getGardocWithRUvsQueriesIndexedFields::no uvsQueries for docId=" + gardocIndexedFields.id_);¤	    		}¤	    	}¤		} catch (Exception e) {¤			Logs.LOG_SEX(e);¤		}¤//		Logs.LOG_W("getGardocWithRUvsQueriesIndexedFields::docId=" + docId + " gardocIndexedFieldsList.size=" + gardocIndexedFieldsList.size() + " time=" + (new Date().getTime() - time));¤	¤		return gardocIndexedFieldsList;¤    }¤    ¤    private static List<GardocIndexedFields> getGardocIndexedFields(long docId, int count){¤		long time = new Date().getTime();¤		List<GardocIndexedFields> ret = new ArrayList<GardocIndexedFields>();¤		try {¤			String sQuery = ¤					"SELECT doc.id, doc.creationDate, doc.docIssuer, doc.instancy, doc.internet, " +¤					"doc.isConnected, doc.number, doc.registrationNumber, doc.registrationDate, doc.restrictedStatus, " +¤					"doc.topic, blocks, addNums, addIssuers, type " +¤					" FROM GarDocDAO doc" +¤					" LEFT JOIN doc.additionalNumbers AS addNums" +		¤					" LEFT JOIN doc.additionalDocIssuers AS addIssuers" +¤					" LEFT JOIN doc.blocks AS blocks" +¤					" LEFT JOIN doc.type AS type" +¤					" WHERE doc.id >= " + docId +¤					" AND doc.id < " + (docId + count) + ¤					" AND doc.page.originalVersion is null"¤					;¤			Session session = ContainerManager.Factory.get().getSession();¤			Query q = session.createQuery(sQuery);¤			List<Object[]> elemsListWithManyDocs = q.list();¤			long time2 = new Date().getTime() - time;¤			if(time2 > 1000){¤				Logs.LOG_W("GardocIndexFieldsExtractor::getGardocIndexedFields::q.list()::docId=" + docId + " time=" + time2);¤			}¤			¤			Map<Long, List<Object[]>> map = new HashMap<Long, List<Object[]>>();¤			for(Object[] elems : elemsListWithManyDocs) {¤				Long key = (Long)elems[0];¤				List<Object[]> elemsList = map.get(key);¤				if (elemsList == null) {¤					elemsList = new ArrayList<Object[]>();¤					map.put(key, elemsList);¤				}¤				¤				elemsList.add(elems);¤			}¤			¤			for (Long gardocId : map.keySet()) {¤				GardocIndexedFields gardocIndexedFields = new GardocIndexedFields();¤				ret.add(gardocIndexedFields);¤				¤				gardocIndexedFields.id_ = gardocId;¤				¤				List<Object[]> elemsList = map.get(gardocId);				¤				for(Object[] elems : elemsList){¤					Date creationDate = (Date)elems[1];¤					String creationDateString = null;¤					if(creationDate != null){¤						creationDateString = new SimpleDateFormat("yyyyMMdd").format(creationDate);¤					}¤					gardocIndexedFields.creationDate_ = creationDateString;¤					gardocIndexedFields.docIssuer_ = String.valueOf((Long)elems[2]);¤					gardocIndexedFields.instancy_ = String.valueOf((Byte)elems[3]);¤					gardocIndexedFields.internet_ = String.valueOf((Boolean)elems[4]);¤					gardocIndexedFields.isConnected_ = String.valueOf((Byte)elems[5]);¤					gardocIndexedFields.number_ = (String)elems[6];¤					gardocIndexedFields.regNumber_ = (String)elems[7];¤					Date regDate = (Date)elems[8];¤					String regDateString = null;¤					if(regDate != null){¤						regDateString = new SimpleDateFormat("yyyyMMdd").format(regDate);¤					}¤					gardocIndexedFields.regDate_ = regDateString;¤					gardocIndexedFields.restrictedStatus_ = String.valueOf((Byte)elems[9]);¤					Long topic = (Long)elems[10];¤					gardocIndexedFields.topic_ = String.valueOf(topic);¤					Object objBlocks = (Object)elems[11];¤					if(objBlocks != null){¤						if(objBlocks instanceof BlockDAO){¤							BlockDAO block = (BlockDAO)objBlocks;¤							gardocIndexedFields.blockShortNames_.add(block.getShortName());¤						}else{¤							List<BlockDAO> blocks = (List<BlockDAO>)objBlocks;¤							if(blocks != null){¤								for(BlockDAO block : blocks){¤									gardocIndexedFields.blockShortNames_.add(block.getShortName());¤								}¤							}¤						}¤					}¤					¤					Object addNumbersObj = (Object)elems[12];¤					if(addNumbersObj != null){¤						if(addNumbersObj instanceof String){¤							String addNumber = (String) addNumbersObj;¤							gardocIndexedFields.addNumbers_ = Arrays.asList(addNumber);¤						}else{¤							List<String> addNumbers = (List<String>)addNumbersObj;¤							if(addNumbers != null && addNumbers.size() > 0){¤								gardocIndexedFields.addNumbers_ = addNumbers;¤							}¤						}¤					}¤					Object addIssuersObject = (Object)elems[13];¤					if(addIssuersObject != null){¤						if(addIssuersObject instanceof Long){¤							Long addIssuer = (Long)addIssuersObject;¤							gardocIndexedFields.addDocIssuers_.add(String.valueOf(addIssuer));¤						}else{¤							List<Long> addIssuers = (List<Long>)addIssuersObject;¤							for(long addIssuer : addIssuers){¤								gardocIndexedFields.addDocIssuers_.add(String.valueOf(addIssuer));¤							}¤						}¤					}¤					DocTypeDAO type = (DocTypeDAO)elems[14];¤					if(type != null){¤						gardocIndexedFields.typeName_ = type.getName();¤					}¤				}¤			}¤		} catch (Exception e) {¤			Logs.LOG_SEX(e);¤		}¤		return ret;¤    }¤    ¤	private static Map<Long, Collection<UvsQueryIndexedFields>> getReqHistory(final long docId, final int count){¤		long time = new Date().getTime();¤		Map<Long, Map<Long, UvsQueryIndexedFields>> ret = new HashMap<Long, Map<Long, UvsQueryIndexedFields>>(); ¤¤		¤		try {¤			String sQuery = ¤					"SELECT req.gardoc.id, req.latestVersionId, req.state, execGroup, req.page.creationDate, req.page.lastModificationDate, copy, req.id" +¤					" FROM UVSQuestDAO req" +¤					" LEFT JOIN req.copy AS copy" +		¤					" LEFT JOIN req.executionGroup AS execGroup" +		¤					" WHERE req.gardoc.id >= " + docId + " AND req.gardoc.id < " + ( docId + count ) +¤					" ORDER BY req.gardoc.id, req.page.version";¤			Session session = ContainerManager.Factory.get().getSession();¤			Query q = session.createQuery(sQuery);¤			List<Object[]> elemsListWithManyDocs = q.list();¤			long time2 = new Date().getTime() - time;¤			if(time2 > 1000){¤				Logs.LOG_W("GardocIndexFieldsExtractor::getReqHistory::q.list()::docId=" + docId + " time=" + time2);¤			}¤						¤			Map<Long, List<Object[]>> map = makeMap (elemsListWithManyDocs);¤			¤			for (Long key : map.keySet()) {¤			¤				Map<Long, UvsQueryIndexedFields> indexedUvsQueriesList = new HashMap<Long, UvsQueryIndexedFields>();¤				ret.put(key, indexedUvsQueriesList);¤				¤				List<Object[]> elemsList = map.get(key);¤				¤				for(Object[] elems : elemsList){¤					long reqId = (Long)elems[1];¤					byte state = (Byte)elems[2];¤					ExecutionGroupDAOProxy executorsGroup = (ExecutionGroupDAOProxy)elems[3];¤	¤					Date creationDate = (Date)elems[4];¤					String creationDateString = null;¤					if(creationDate != null){¤						creationDateString = new SimpleDateFormat("yyyyMMdd").format(creationDate);¤					}¤	¤					Date date = (Date) elems[5];¤					String lastModDate = null;¤					if(date != null){¤						lastModDate = new SimpleDateFormat("yyyyMMdd").format(date);¤					}¤					CopyDAO copy = (CopyDAO)elems[6];¤					String copyType = null;¤					if(copy != null){¤						copyType = copy.getType();¤					}¤	¤					UvsQueryIndexedFields uvsQueryIndexedFields = indexedUvsQueriesList.get(reqId);¤					if(uvsQueryIndexedFields == null){¤						uvsQueryIndexedFields = new UvsQueryIndexedFields();¤						uvsQueryIndexedFields.id_ = reqId;¤						uvsQueryIndexedFields.creationDate_ = creationDateString;¤					}¤					uvsQueryIndexedFields.copy_ = copyType;¤	¤					if(state == UVSStateMachine.ST_WAITING_FROM_OGV.getSortValue()){¤						uvsQueryIndexedFields.waitingFromOGVDate_ = lastModDate;¤					}else if(state == UVSStateMachine.ST_ON_ACCEPT_IN_UO.getSortValue()){¤						uvsQueryIndexedFields.inAcceptInUODate_ = lastModDate;¤					}¤					long reqVersionId = (Long)elems[7];¤					List<String> executors = (executorsGroup != null)?new ArrayList(executorsGroup.getMembers()): new ArrayList<String>();¤					if(reqVersionId == reqId){¤						uvsQueryIndexedFields.executorsNames_ = new StrBuilder().appendWithSeparators(executors, " ").toString();¤					}else{¤						List<UvsQueryHistoryInfo> uvsInfos = uvsQueryIndexedFields.uvsQueryHistoryInfo_;¤						if(uvsInfos == null){¤							uvsInfos = new ArrayList<UvsQueryHistoryInfo>();¤							uvsQueryIndexedFields.uvsQueryHistoryInfo_ = uvsInfos;¤						}¤						UvsQueryHistoryInfo info = new UvsQueryHistoryInfo();¤						info.historyState_ = String.valueOf(state);¤						info.historyDate_ = lastModDate;¤						info.historyExecutors_ = executors;¤						uvsInfos.add(info);¤					}¤					indexedUvsQueriesList.put(reqId, uvsQueryIndexedFields);¤				}¤			}¤		} catch (Exception e) {¤			Logs.LOG_SEX(e);¤		}¤		¤		Map<Long, Collection<UvsQueryIndexedFields>> result = new HashMap<Long, Collection<UvsQueryIndexedFields>>();¤		for (Long key : ret.keySet()) {¤			result.put(key, ret.get(key).values());¤		}¤		return result;¤	}¤¤	private static Map<Long, List<Object[]>> makeMap (List<Object[]> elemsListWithManyDocs) {¤		Map<Long, List<Object[]>> map = new HashMap<Long, List<Object[]>>();¤		for(Object[] elems : elemsListWithManyDocs) {¤			Long key = (Long)elems[0];¤			List<Object[]> elemsList = map.get(key);¤			if (elemsList == null) {¤				elemsList = new ArrayList<Object[]>();¤				map.put(key, elemsList);¤			}¤			¤			elemsList.add(elems);¤		}¤		return map;¤		¤	}¤	//#UC END# *55AE15AA035D_CUSTOM_METHODS_AND_DATA*
		    )))
	    quid       	"55AE15AA035D"
	    documentation 	"добавление и извлечение из кэша карточек с запросами для индексации"
	    stereotype 	"SimpleClass"
	    used_nodes 	(list uses_relationship_list
		(object Uses_Relationship
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"1437472776065335")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false"))
		    quid       	"55AE18080040"
		    stereotype 	"uses"
		    supplier   	"Logical View::external::ConfluenceSupport::com.atlassian.bonnie::Searchable"
		    quidu      	"47BE789B0398")
		(object Uses_Relationship
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"1437573447568390")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false"))
		    quid       	"55AFA1470236"
		    stereotype 	"uses"
		    supplier   	"Logical View::MDProcess::DocCardChange::DocCardSupport::GardocIndexedFields"
		    quidu      	"55AE1D5302BE"))
	    operations 	(list Operations
		(object Operation "add_in_extrator"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"1437472222762661")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*55AE15DE02ED*"
			    value      	(value Text 
|//#UC START# *55AE15DE02ED*¤		synchronized (GardocIndexFieldsExtractor.class) {¤			if(DocCardManager.Factory.get().isDocCard(searchable.getId())){¤				allCount_++;	¤				if(getFromExtractor(searchable.getId()) == null){¤					getGardocFieldsCache().refresh(searchable.getId());¤					getFromBaseCount_++;¤				}else{¤					extractFromCacheCount_++;¤	//				Logs.LOG_W("GardocIndexFieldsExtractor::addInExtrator::isInCache searchable.getId()=" + searchable.getId());¤				}¤			} else if (UVSQueryManager.Factory.get().isRequest(searchable.getId())){¤				if((searchable instanceof Page)){¤					allCount_++;	¤					Page page = (Page)searchable;¤					long parentId = page.getParent().getId();¤					if(getFromExtractor(parentId) == null){¤						getGardocFieldsCache().refresh(parentId);¤						getFromBaseCount_++;¤					}else{¤						extractFromCacheCount_++;¤	//					Logs.LOG_W("GardocIndexFieldsExtractor::addInExtrator::isInCache searchable.getId()=" + searchable.getId());¤					}¤				}	¤			}¤			if(allCount_ % 1000 == 0){¤				Logs.LOG_W("GardocIndexFieldsExtractor::addInExtrator::statistic allCount_=" + allCount_ + " extractFromCacheCount_=" + extractFromCacheCount_ + " getFromBaseCount_=" + getFromBaseCount_);¤			}¤		}¤		//#UC END# *55AE15DE02ED*
			    )))
		    quid       	"55AE15DE02ED"
		    documentation 	"добавление в кэш"
		    stereotype 	"static"
		    parameters 	(list Parameters
			(object Parameter "searchable"
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ElementCreationOrder"
				    value      	"1437472282727092")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ResolvedTypeGuid"
				    value      	"47BE789B0398"))
			    quid       	"55AE161A02D7"
			    type       	"Searchable"
			    quidu      	"47BE789B0398"))
		    concurrency 	"Sequential"
		    opExportControl 	"Public"
		    uid        	0)
		(object Operation "get_from_extractor"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"1437472287176348")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*55AE161F009D*"
			    value      	(value Text 
|//#UC START# *55AE161F009D*¤		synchronized (GardocIndexFieldsExtractor.class) {¤			¤		try {¤			return getGardocFieldsCache().getIfPresent(id);¤		} catch (Exception e) {¤			Logs.LOG_SEX(e);¤		}¤		return null;¤		¤		}¤		//#UC END# *55AE161F009D*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ResolvedTypeGuid"
			    value      	"55AE1D5302BE"))
		    quid       	"55AE161F009D"
		    documentation 	"извлечение из кэша"
		    stereotype 	"static"
		    parameters 	(list Parameters
			(object Parameter "id"
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ElementCreationOrder"
				    value      	"1437472315864990")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ResolvedTypeGuid"
				    value      	"3DBFFD860205"))
			    quid       	"55AE163B0360"
			    type       	"long long"
			    quidu      	"3DBFFD860205"))
		    result     	"GardocIndexedFields"
		    concurrency 	"Sequential"
		    opExportControl 	"Public"
		    uid        	0
		    quidu      	"55AE1D5302BE"))
	    language   	"MDA Generator")
	(object Class "GardocIndexedFields"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"1437474131703874")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/DocCardChange/DocCardSupport/GardocIndexedFields.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*55AE1D5302BE_CUSTOM_IMPORT*"
		    value      	"//#UC START# *55AE1D5302BE_CUSTOM_IMPORT*¤//#UC END# *55AE1D5302BE_CUSTOM_IMPORT*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*55AE1D5302BE_CUSTOM_CLASS_DEFINITION*"
		    value      	"//#UC START# *55AE1D5302BE_CUSTOM_CLASS_DEFINITION*¤//#UC END# *55AE1D5302BE_CUSTOM_CLASS_DEFINITION*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*55AE1D5302BE_CUSTOM_METHODS_AND_DATA*"
		    value      	(value Text 
|//#UC START# *55AE1D5302BE_CUSTOM_METHODS_AND_DATA*¤¤	public java.util.List<String> addDocIssuers_ = initDocIssuers();¤	private java.util.List<String> initDocIssuers () {¤		return new java.util.ArrayList<String> ();¤	}¤¤	public java.util.List<String> addNumbers_ = initAddNumbers();¤	private java.util.List<String> initAddNumbers () {¤		return new java.util.ArrayList<String> ();¤	}¤¤	public java.util.List<String> blockShortNames_ = initBlockShortNames();¤	private java.util.List<String> initBlockShortNames () {¤		return new java.util.ArrayList<String> ();¤	}¤¤	public java.util.List<String> copies_ =  initCopies ();¤	private java.util.List<String> initCopies () {¤		return new java.util.ArrayList<String> ();¤	}¤¤	public String creationDate_;¤¤	public String docIssuer_;¤¤	public java.util.List<String> inAcceptInUODateList_ = initInAcceptInUODateList();¤	private java.util.List<String> initInAcceptInUODateList () {¤		return new java.util.ArrayList<String> ();¤	}¤¤	public String instancy_;¤¤	public String internet_;¤¤	public String isConnected_;¤¤	public String number_;¤¤	public String regDate_;¤¤	public String regNumber_;¤¤	public String restrictedStatus_;¤¤	public String topic_;¤¤	public String typeName_;¤	¤	public Long id_;¤¤	public java.util.List<String> waitingFromOGVDateList_ = initWaitingFromOGVDateList();¤	private java.util.List<String> initWaitingFromOGVDateList () {¤		return new java.util.ArrayList<String> ();¤	}¤	public java.util.List<UvsQueryIndexedFields> uvsQueryIndexedFields_ = initUvsQueryIndexedFields();¤	private java.util.List<UvsQueryIndexedFields> initUvsQueryIndexedFields () {¤		return new java.util.ArrayList<UvsQueryIndexedFields> ();¤	}¤	//#UC END# *55AE1D5302BE_CUSTOM_METHODS_AND_DATA*
		    )))
	    quid       	"55AE1D5302BE"
	    documentation 	"добавление полей карточек для индексации "
	    stereotype 	"SimpleClass"
	    used_nodes 	(list uses_relationship_list
		(object Uses_Relationship
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"1437573441224026")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false"))
		    quid       	"55AFA14100DE"
		    stereotype 	"uses"
		    supplier   	"Logical View::MDProcess::DocCardChange::DocCardSupport::UvsQueryIndexedFields"
		    quidu      	"55AE21E202FE"))
	    language   	"MDA Generator")
	(object Class "UvsQueryHistoryInfo"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"1437476468859576")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/DocCardChange/DocCardSupport/UvsQueryHistoryInfo.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*55AE2674035B_CUSTOM_IMPORT*"
		    value      	"//#UC START# *55AE2674035B_CUSTOM_IMPORT*¤//#UC END# *55AE2674035B_CUSTOM_IMPORT*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*55AE2674035B_CUSTOM_CLASS_DEFINITION*"
		    value      	"//#UC START# *55AE2674035B_CUSTOM_CLASS_DEFINITION*¤//#UC END# *55AE2674035B_CUSTOM_CLASS_DEFINITION*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*55AE2674035B_CUSTOM_METHODS_AND_DATA*"
		    value      	(value Text 
|//#UC START# *55AE2674035B_CUSTOM_METHODS_AND_DATA*¤	public String historyDate_;¤¤	public java.util.List<String> historyExecutors_ = initHistoryExecutors ();¤	¤	private java.util.List<String> initHistoryExecutors () {¤		return new java.util.ArrayList<String> ();¤	}¤¤	public String historyState_;¤	//#UC END# *55AE2674035B_CUSTOM_METHODS_AND_DATA*
		    )))
	    quid       	"55AE2674035B"
	    documentation 	"поля истории запросов для индексации"
	    stereotype 	"SimpleClass"
	    language   	"MDA Generator")
	(object Class "UvsQueryIndexedFields"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"1437475298767643")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/DocCardChange/DocCardSupport/UvsQueryIndexedFields.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*55AE21E202FE_CUSTOM_IMPORT*"
		    value      	"//#UC START# *55AE21E202FE_CUSTOM_IMPORT*¤//#UC END# *55AE21E202FE_CUSTOM_IMPORT*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*55AE21E202FE_CUSTOM_CLASS_DEFINITION*"
		    value      	"//#UC START# *55AE21E202FE_CUSTOM_CLASS_DEFINITION*¤//#UC END# *55AE21E202FE_CUSTOM_CLASS_DEFINITION*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*55AE21E202FE_CUSTOM_METHODS_AND_DATA*"
		    value      	(value Text 
|//#UC START# *55AE21E202FE_CUSTOM_METHODS_AND_DATA*¤	public String copy_;¤¤	public String creationDate_;¤¤	public long id_;¤	¤	public String executorsNames_;¤¤	public String inAcceptInUODate_;¤¤	public String waitingFromOGVDate_;¤	¤	public java.util.List<UvsQueryHistoryInfo> uvsQueryHistoryInfo_ = initUvsQueryHistoryInfo();¤	¤	private java.util.List<UvsQueryHistoryInfo> initUvsQueryHistoryInfo () {¤		return new java.util.ArrayList<UvsQueryHistoryInfo> ();¤	}¤¤	//#UC END# *55AE21E202FE_CUSTOM_METHODS_AND_DATA*
		    )))
	    quid       	"55AE21E202FE"
	    documentation 	"поля запросов для индексации"
	    stereotype 	"SimpleClass"
	    used_nodes 	(list uses_relationship_list
		(object Uses_Relationship
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"1437573436505755")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false"))
		    quid       	"55AFA13C01F7"
		    stereotype 	"uses"
		    supplier   	"Logical View::MDProcess::DocCardChange::DocCardSupport::UvsQueryHistoryInfo"
		    quidu      	"55AE2674035B"))
	    language   	"MDA Generator")
	(object Class "GardocExtractorWithCache"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"1438781915169229")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/DocCardChange/DocCardSupport/GardocExtractorWithCache.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Factory auto reg"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Factory default impl"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Servant Pool"
		    value      	"none")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"debug log"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"factory priority"
		    value      	"0")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"local supervisor"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"need UC"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"priority"
		    value      	"902")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"singleton"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*55C211DB00A8_CUSTOM_IMPORT*"
		    value      	"//#UC START# *55C211DB00A8_CUSTOM_IMPORT*¤import com.atlassian.confluence.labels.Label;¤import com.atlassian.confluence.pages.Page;¤¤import org.apache.commons.lang.StringUtils;¤¤import org.apache.lucene.document.Field.Index;¤import org.apache.lucene.document.Field.Store;¤¤import java.sql.Connection;¤import java.util.ArrayList;¤import java.util.Date;¤import java.util.List;¤//#UC END# *55C211DB00A8_CUSTOM_IMPORT*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*55C211DB00A8_CUSTOM_CLASS_DEFINITION*"
		    value      	"//#UC START# *55C211DB00A8_CUSTOM_CLASS_DEFINITION*¤//#UC END# *55C211DB00A8_CUSTOM_CLASS_DEFINITION*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*55C211DB00A8_ADD_FIELDS_IMPLEMETATION*"
		    value      	(value Text 
|//#UC START# *55C211DB00A8_ADD_FIELDS_IMPLEMETATION*¤		if((searchable instanceof Page) == false){¤			return;¤		}¤		¤		long pageId = searchable.getId();¤		Page page = (Page)searchable;¤		if(page.isLatestVersion() == false){¤			return;¤		}¤		boolean isDocCard = false;¤		boolean isUvsQuery = false;¤		GardocIndexedFields gardocIndexedFields = null;¤		UvsQueryIndexedFields uvsQueryIndexedFields = null;¤		long docId = pageId;¤¤		gardocIndexedFields = GardocIndexFieldsExtractor.getFromExtractor(pageId);¤		if(gardocIndexedFields != null){¤			isDocCard = true;¤		}else if(page.getParent() != null){¤			docId = page.getParent().getId();¤			gardocIndexedFields = GardocIndexFieldsExtractor.getFromExtractor(docId);¤			if(gardocIndexedFields != null){¤				for(UvsQueryIndexedFields uvs : gardocIndexedFields.uvsQueryIndexedFields_){¤					if(uvs.id_ == pageId){¤						uvsQueryIndexedFields = uvs;¤						isUvsQuery = true;¤					}		¤				}¤			}¤		}else{¤			return;¤		}¤		if(gardocIndexedFields == null){¤			return;¤		}¤		if(isDocCard == false && isUvsQuery == false){¤			return;¤		}¤		try {¤			if(isDocCard){¤				document.add(new Field(GAR_FIELD_NAME_IS_DOCCARD, "1", Store.NO, Index.UN_TOKENIZED));¤			}¤			if(StringUtils.isNotEmpty(gardocIndexedFields.topic_)){¤				document.add(new Field(GAR_FIELD_NAME_TOPIC, gardocIndexedFields.topic_, Store.NO, Index.UN_TOKENIZED));¤			}¤			document.add(new Field(GAR_FIELD_NAME_DOC_ISSUER, gardocIndexedFields.docIssuer_, Store.NO, Index.UN_TOKENIZED));¤			for(String addIssuer : gardocIndexedFields.addDocIssuers_){¤				document.add(new Field(GAR_FIELD_NAME_DOC_ISSUER, addIssuer, Store.NO, Index.UN_TOKENIZED));¤			}¤			if(gardocIndexedFields.creationDate_ != null){¤				document.add(new Field(GAR_FIELD_NAME_DOC_DATE, gardocIndexedFields.creationDate_, Store.NO, Index.UN_TOKENIZED));¤			}¤			if(StringUtils.isNotEmpty(gardocIndexedFields.number_)){¤				document.add(new Field(GAR_FIELD_NAME_DOC_NUMBER, gardocIndexedFields.number_.toUpperCase(), Store.NO, Index.UN_TOKENIZED));¤				for(String number : gardocIndexedFields.addNumbers_){¤					document.add(new Field(GAR_FIELD_NAME_DOC_NUMBER, number.toUpperCase(), Store.NO, Index.UN_TOKENIZED));¤				}¤			}¤			if(gardocIndexedFields.typeName_ != null){¤				document.add(new Field(GAR_FIELD_NAME_DOC_TYPE, gardocIndexedFields.typeName_, Store.NO, Index.UN_TOKENIZED));¤			}¤			if(StringUtils.isNotEmpty(gardocIndexedFields.regNumber_)){¤				document.add(new Field(GAR_FIELD_NAME_DOC_MU_NUMBER, gardocIndexedFields.regNumber_.toUpperCase(), Store.NO, Index.UN_TOKENIZED));¤			}¤			if(gardocIndexedFields.regDate_ != null){¤				document.add(new Field(GAR_FIELD_NAME_DOC_MU_DATE, gardocIndexedFields.regDate_, Store.NO, Index.UN_TOKENIZED));¤			}¤			document.add(new Field(GAR_FIELD_NAME_DOC_RESTRICTED_STATUS, gardocIndexedFields.restrictedStatus_, Store.NO, Index.UN_TOKENIZED));¤			if (isUvsQuery == false) {¤				for(String copyType : gardocIndexedFields.copies_){¤					document.add(new Field(GAR_FIELD_NAME_DOC_COPIES, copyType, Store.NO, Index.UN_TOKENIZED));¤				}¤			} else {¤				if(uvsQueryIndexedFields.copy_ != null){¤					document.add(new Field(GAR_FIELD_NAME_DOC_COPIES, uvsQueryIndexedFields.copy_, Store.NO, Index.UN_TOKENIZED));¤				}¤			}¤			document.add(new Field(GAR_FIELD_NAME_DOC_INTERNET, gardocIndexedFields.internet_, Store.NO, Index.UN_TOKENIZED));¤			document.add(new Field(GAR_FIELD_NAME_DOC_IS_CONNECTED, gardocIndexedFields.isConnected_, Store.NO, Index.UN_TOKENIZED));¤			document.add(new Field(GAR_FIELD_NAME_DOC_INSTANCY, gardocIndexedFields.instancy_, Store.NO, Index.UN_TOKENIZED));¤			for(String blockShortName : gardocIndexedFields.blockShortNames_){¤				document.add(new Field(GAR_FIELD_NAME_DOC_BLOCKS, blockShortName, Store.NO, Index.UN_TOKENIZED));¤			}¤			¤			if (isUvsQuery == false) {¤				¤				 // 1) взять все запросы для этой карточки¤				 // 2) для каждого прописать как массив GAR_FIELD_NAME_REQ_WAITING_FROM_OGV_DATE и GAR_FIELD_NAME_REQ_SEND_IN_UO_DATE¤				  ¤				for(String waitingFromOGVDate : gardocIndexedFields.waitingFromOGVDateList_){¤						document.add(new Field(GAR_FIELD_NAME_REQ_WAITING_FROM_OGV_DATE, waitingFromOGVDate, Store.NO, Index.UN_TOKENIZED));¤				}¤				for(String inAcceptInUODate : gardocIndexedFields.inAcceptInUODateList_){¤					document.add(new Field(GAR_FIELD_NAME_REQ_SEND_IN_UO_DATE, inAcceptInUODate, Store.NO, Index.UN_TOKENIZED));¤				}¤			}¤			¤		} catch (Exception e) {¤			Logs.LOG_SEX(e);¤		}¤		¤¤		if(isUvsQuery){¤			document.add(new Field(GAR_FIELD_NAME_IS_DOCCARD, "0", Store.NO, Index.UN_TOKENIZED));¤			document.add(new Field(GAR_FIELD_NAME_REQ_CREATION_DATE, uvsQueryIndexedFields.creationDate_, Store.NO, Index.UN_TOKENIZED));¤			¤			if(uvsQueryIndexedFields.waitingFromOGVDate_ != null){¤				document.add(new Field(GAR_FIELD_NAME_REQ_WAITING_FROM_OGV_DATE, uvsQueryIndexedFields.waitingFromOGVDate_, Store.NO, Index.UN_TOKENIZED));¤			}¤			if(uvsQueryIndexedFields.inAcceptInUODate_ != null){¤				document.add(new Field(GAR_FIELD_NAME_REQ_SEND_IN_UO_DATE, uvsQueryIndexedFields.inAcceptInUODate_, Store.NO, Index.UN_TOKENIZED));¤			}¤¤			if (StringUtils.isNotEmpty(uvsQueryIndexedFields.executorsNames_)) {¤				document.add(new Field(GAR_FIELD_NAME_ASSIGNED_TO, uvsQueryIndexedFields.executorsNames_, Store.NO, Index.TOKENIZED));¤			}¤¤			for (int i = 0; i < uvsQueryIndexedFields.uvsQueryHistoryInfo_.size(); i++) {¤				final UvsQueryHistoryInfo hi2 = uvsQueryIndexedFields.uvsQueryHistoryInfo_.get(i);¤				for (String x : hi2.historyExecutors_) {¤					document.add(new Field("HISTORY_VERSION.E."+i, x, Field.Store.NO, Field.Index.NOT_ANALYZED));¤				}				¤				document.add(new Field("HISTORY_VERSION.S."+i, hi2.historyState_, Field.Store.NO, Field.Index.NOT_ANALYZED));¤				document.add(new Field("HISTORY_VERSION.D."+i, hi2.historyDate_, Field.Store.NO, Field.Index.NOT_ANALYZED));¤			}			¤			¤		}¤		//#UC END# *55C211DB00A8_ADD_FIELDS_IMPLEMETATION*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*55C211DB00A8_CUSTOM_METHODS_AND_DATA*"
		    value      	(value Text 
|//#UC START# *55C211DB00A8_CUSTOM_METHODS_AND_DATA*¤	//#UC END# *55C211DB00A8_CUSTOM_METHODS_AND_DATA*
		    )))
	    quid       	"55C211DB00A8"
	    documentation 	"кэш для индексации полей связанных с гардоком"
	    stereotype 	"KExtractorPlugin"
	    superclasses 	(list inheritance_relationship_list
		(object Inheritance_Relationship
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"1438781934422331"))
		    quid       	"55C211EE01A5"
		    supplier   	"Logical View::MDProcess::DocCardChange::DocCardSupport::GardocExtractor"
		    quidu      	"512C95E000CF"))
	    used_nodes 	(list uses_relationship_list
		(object Uses_Relationship
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"1439539240813554")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false"))
		    quid       	"55CDA028032C"
		    stereotype 	"uses"
		    supplier   	"Logical View::MDProcess::DocCardChange::DocCardSupport::GardocIndexFieldsExtractor"
		    quidu      	"55AE15AA035D"))
	    language   	"MDA Generator")
	(object Class "GarViewLastAddedAttachmentsAction"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"1443098923384706")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/DocCardChange/DocCardSupport/GarViewLastAddedAttachmentsAction.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*5603F12B0180_CUSTOM_IMPORT*"
		    value      	"//#UC START# *5603F12B0180_CUSTOM_IMPORT*¤import com.atlassian.confluence.pages.Attachment;¤import com.atlassian.confluence.pages.Draft;¤import com.atlassian.confluence.pages.DraftManager;¤//#UC END# *5603F12B0180_CUSTOM_IMPORT*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*5603F12B0180_CUSTOM_CLASS_DEFINITION*"
		    value      	"//#UC START# *5603F12B0180_CUSTOM_CLASS_DEFINITION*¤//#UC END# *5603F12B0180_CUSTOM_CLASS_DEFINITION*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*5603F12B0180_ACTION_NAME*"
		    value      	(value Text 
|//#UC START# *5603F12B0180_ACTION_NAME*¤		return new String (getClass ().getName ());¤		//#UC END# *5603F12B0180_ACTION_NAME*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*5603F12B0180_CUSTOM_METHODS_AND_DATA*"
		    value      	(value Text "//#UC START# *5603F12B0180_CUSTOM_METHODS_AND_DATA*¤    //#UC END# *5603F12B0180_CUSTOM_METHODS_AND_DATA*")))
	    quid       	"5603F12B0180"
	    stereotype 	"KActionPlugin"
	    superclasses 	(list inheritance_relationship_list
		(object Inheritance_Relationship
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"1445513603412337"))
		    quid       	"5628C9830199"
		    supplier   	"Logical View::external::ConfluenceSupport::com.atlassian.confluence.coreImpl::ConfluenceActionSupport"
		    quidu      	"468C9C950186"))
	    realized_interfaces 	(list realize_rel_list
		(object Realize_Relationship
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"1445513614408967"))
		    quid       	"5628C98E0197"
		    supplier   	"Logical View::external::ConfluenceSupport::com.opensymphony.webwork.interceptor::ServletRequestAware"
		    quidu      	"4A66D67E012C"))
	    operations 	(list Operations
		(object Operation "execute"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"1443100599222566")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ResolvedTypeGuid"
			    value      	"3DBFFE240068")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*5603F7B700C7*"
			    value      	(value Text 
|//#UC START# *5603F7B700C7*¤    	String userName = AuthenticatedUserThreadLocal.getUsername();¤    	DpoUvsHelper.saveLocalFilesForCreatedUvsQueryForm(userName, Arrays.asList(getUploadedFileForCut()));¤¤		return SUCCESS;¤		//#UC END# *5603F7B700C7*
			    ))
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"calling conventions"
			    value      	"none")
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"debug log"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"finished"
			    value      	"true")
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"force overload"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"GetRaises"
			    value      	"47720AA401AF"))
		    quid       	"5603F7B700C7"
		    result     	"string"
		    concurrency 	"Sequential"
		    opExportControl 	"Public"
		    uid        	0
		    quidu      	"3DBFFE240068"))
	    language   	"MDA Generator")
	(object Class "RemoveOldFilesWhichCreatedThenCreateUvsQueryJob"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"1444830206698065")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Factory auto reg"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Factory default impl"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Servant Pool"
		    value      	"none")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"cron-expression"
		    value      	"0 0 3 * * ?")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"debug log"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"factory priority"
		    value      	"0")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"local supervisor"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"need UC"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"repeated"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"singleton"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/DocCardChange/DocCardSupport/RemoveOldFilesWhichCreatedThenCreateUvsQueryJob.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*561E5BFE02BA_CUSTOM_IMPORT*"
		    value      	"//#UC START# *561E5BFE02BA_CUSTOM_IMPORT*¤import java.io.File;¤import java.util.ArrayList;¤import java.util.Calendar;¤import java.util.Date;¤import java.util.List;¤¤import com.atlassian.confluence.setup.bandana.ConfluenceBandanaContext;¤//#UC END# *561E5BFE02BA_CUSTOM_IMPORT*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*561E5BFE02BA_CUSTOM_CLASS_DEFINITION*"
		    value      	"//#UC START# *561E5BFE02BA_CUSTOM_CLASS_DEFINITION*¤//#UC END# *561E5BFE02BA_CUSTOM_CLASS_DEFINITION*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*561E5BFE02BA_DO_EXECUTE_IMPLEMETATION*"
		    value      	(value Text 
|//#UC START# *561E5BFE02BA_DO_EXECUTE_IMPLEMETATION*¤		super.doExecute(jec);¤		//#UC END# *561E5BFE02BA_DO_EXECUTE_IMPLEMETATION*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*561E5BFE02BA_CUSTOM_METHODS_AND_DATA*"
		    value      	(value Text 
|//#UC START# *561E5BFE02BA_CUSTOM_METHODS_AND_DATA*¤	@Override¤	protected void executeJob() {¤		Logs.LOG_D ("RemoveOldFilesWhichCreatedThenCreateUvsQueryJob::executeJob::start");¤		//общая директория¤		String directoryName = DpoUvsHelper.getLastAddedFilePath();¤		//находим файлы¤		List<File> removingFiles = findRemovingFiles(directoryName);¤		//удаляем файлды¤		removeFiles(removingFiles);¤		Logs.LOG_D ("RemoveOldFilesWhichCreatedThenCreateUvsQueryJob::executeJob::end ");¤	}¤¤	@Override¤	protected boolean isNeedWriteTransaction() {¤		return true;¤	}¤	¤	public List<File> findRemovingFiles(final String directoryName){¤		File directory = new File(directoryName);¤		List<File> removedFiles = new ArrayList<File>();¤		if(directory.exists()){¤			Integer daysCount = getDaysCount();¤			File[] usersDirs = directory.listFiles();¤			//директории пользователей¤			for(File userDir : usersDirs){¤				File[] files = userDir.listFiles();¤				//файлы, которые нужно удалить¤				for(File file : files){¤					Date lastmodifierdate = new Date(file.lastModified());¤					Calendar calendar = Calendar.getInstance();¤					calendar.set(Calendar.DAY_OF_MONTH, calendar.get(Calendar.DAY_OF_MONTH) - daysCount);¤					//если дата меньше заданной, помещаем в list¤					if(lastmodifierdate.before(calendar.getTime())){¤						removedFiles.add(file);¤					}¤				}¤			}¤		}¤		return removedFiles;¤	}¤	¤	public void removeFiles(final List<File> removingFiles){¤		for(File file : removingFiles){¤			file.delete();¤		}¤	}	¤	//за какое время надо удалить - берем из банданы¤	public Integer getDaysCount(){¤		Integer daysCount = (Integer)ContainerManager.Factory.get().getBandanaManager().getValue(ConfluenceBandanaContext.GLOBAL_CONTEXT, "RemoveOldFilesWhichCreatedThenCreateUvsQueryJob");¤		if(daysCount == null){¤			daysCount = 7;¤			ContainerManager.Factory.get().getBandanaManager().setValue(ConfluenceBandanaContext.GLOBAL_CONTEXT, "RemoveOldFilesWhichCreatedThenCreateUvsQueryJob", daysCount);¤		}¤		return daysCount;¤	}¤	//#UC END# *561E5BFE02BA_CUSTOM_METHODS_AND_DATA*
		    )))
	    quid       	"561E5BFE02BA"
	    documentation 	"надо чистить старые фалы, которые загружаем для повторного использования при создании запроса"
	    stereotype 	"KJobPlugin"
	    superclasses 	(list inheritance_relationship_list
		(object Inheritance_Relationship
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"1444830308730902"))
		    quid       	"561E5C6402D9"
		    supplier   	"Logical View::MDProcess::DocCardChange::DocCardSupport::GarDocAbstractJob"
		    quidu      	"53E4BF9000E2"))
	    language   	"MDA Generator")
	(object Association "$UNNAMED$0"
	    quid       	"4C3F0AAC0342"
	    roles      	(list role_list
		(object Role "success"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"20609482440"))
		    quid       	"4C3F0AAD022B"
		    stereotype 	"velocity"
		    label      	"success"
		    supplier   	"Logical View::MDProcess::DocCardChange::DocCardView::spaceconfig_dpouvs"
		    quidu      	"4C3F08EB03A2"
		    Containment 	"By Value"
		    is_navigable 	TRUE)
		(object Role "$UNNAMED$1"
		    quid       	"4C3F0AAD022E"
		    supplier   	"Logical View::MDProcess::DocCardChange::DocCardSupport::DocCardXPlugin::DocCardXPackage::DPOUVSSpaceConfig"
		    quidu      	"4C3F07FC0353"
		    is_aggregate 	TRUE)))
	(object Association "$UNNAMED$2"
	    quid       	"4C6BA07303BE"
	    roles      	(list role_list
		(object Role "success"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"20609504937"))
		    quid       	"4C6BA074029E"
		    stereotype 	"velocity-xml"
		    label      	"success"
		    supplier   	"Logical View::MDProcess::DocCardChange::DocCardView::createuvsquery_error"
		    quidu      	"4C6BA0390203"
		    Containment 	"By Value"
		    is_navigable 	TRUE)
		(object Role "$UNNAMED$3"
		    quid       	"4C6BA07402A0"
		    supplier   	"Logical View::MDProcess::DocCardChange::DocCardSupport::DocCardXPlugin::DocCardXPackage::DoCreateUvsQuery"
		    quidu      	"4C652EC60067"
		    is_aggregate 	TRUE)))
	(object Association "$UNNAMED$4"
	    quid       	"4C74FD3600A6"
	    roles      	(list role_list
		(object Role "success"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"20609513032"))
		    quid       	"4C74FD36031A"
		    stereotype 	"velocity-xml"
		    label      	"success"
		    supplier   	"Logical View::MDProcess::DocCardChange::DocCardView::createuvsquery_error"
		    quidu      	"4C6BA0390203"
		    Containment 	"By Value"
		    is_navigable 	TRUE)
		(object Role "$UNNAMED$5"
		    quid       	"4C74FD36031D"
		    supplier   	"Logical View::MDProcess::DocCardChange::DocCardSupport::DocCardXPlugin::DocCardXPackage::CreateUvsQueryWithoutDocCard"
		    quidu      	"4C74FCB20062"
		    is_aggregate 	TRUE)))
	(object Association "$UNNAMED$6"
	    quid       	"4C762B0201B1"
	    roles      	(list role_list
		(object Role "$UNNAMED$7"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"20609547474"))
		    quid       	"4C762B030052"
		    stereotype 	"condition"
		    supplier   	"Logical View::MDProcess::DocCardChange::DocCardSupport::AddUvsQueryCondition"
		    quidu      	"4C762A2702EB"
		    is_navigable 	TRUE)
		(object Role "$UNNAMED$8"
		    quid       	"4C762B030054"
		    supplier   	"Logical View::MDProcess::DocCardChange::DocCardSupport::AddUvsQueryWebItem"
		    quidu      	"4C762ADB00FB")))
	(object Association "$UNNAMED$9"
	    quid       	"4C7B617900C9"
	    roles      	(list role_list
		(object Role "success"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"20609516672"))
		    quid       	"4C7B61790352"
		    stereotype 	"velocity"
		    label      	"success"
		    supplier   	"Logical View::MDProcess::DocCardChange::DocCardView::searchuvsquery"
		    quidu      	"4C7B5B2002EB"
		    Containment 	"By Value"
		    is_navigable 	TRUE)
		(object Role "$UNNAMED$10"
		    quid       	"4C7B61790355"
		    supplier   	"Logical View::MDProcess::DocCardChange::DocCardSupport::DocCardXPlugin::DocCardXPackage::SearchUvsQuery"
		    quidu      	"4C7B612902D7"
		    is_aggregate 	TRUE)))
	(object Association "$UNNAMED$11"
	    quid       	"4C7B61A20268"
	    roles      	(list role_list
		(object Role "input"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"20609517568"))
		    quid       	"4C7B61A300DF"
		    stereotype 	"velocity"
		    label      	"input"
		    supplier   	"Logical View::MDProcess::DocCardChange::DocCardView::searchuvsquery"
		    quidu      	"4C7B5B2002EB"
		    Containment 	"By Value"
		    is_navigable 	TRUE)
		(object Role "$UNNAMED$12"
		    quid       	"4C7B61A300E2"
		    supplier   	"Logical View::MDProcess::DocCardChange::DocCardSupport::DocCardXPlugin::DocCardXPackage::SearchUvsQuery"
		    quidu      	"4C7B612902D7"
		    is_aggregate 	TRUE)))
	(object Association "$UNNAMED$13"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"14859141245"))
	    quid       	"4D00AB0C031F"
	    roles      	(list role_list
		(object Role "$UNNAMED$14"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"14861198048")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"invert"
			    value      	"false"))
		    quid       	"4D00AB0D023B"
		    stereotype 	"condition"
		    supplier   	"Logical View::MDProcess::DocCardChange::DocCardSupport::EditUvsQueryCondition"
		    quidu      	"4D00AA9B0119"
		    is_navigable 	TRUE)
		(object Role "$UNNAMED$15"
		    quid       	"4D00AB0D023D"
		    supplier   	"Logical View::MDProcess::DocCardChange::DocCardSupport::RemoveUvsQueryWebItem"
		    quidu      	"4D00AAE20043")))
	(object Association "$UNNAMED$16"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"27731867289"))
	    quid       	"4D00DD510260"
	    roles      	(list role_list
		(object Role "$UNNAMED$17"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"27733754945")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false"))
		    quid       	"4D00DD52011C"
		    stereotype 	"condition"
		    supplier   	"Logical View::MDProcess::DocCardChange::DocCardSupport::DpoUvsRemovePermissionCondition"
		    quidu      	"4D00DD250344"
		    is_navigable 	TRUE)
		(object Role "$UNNAMED$18"
		    quid       	"4D00DD52033E"
		    supplier   	"Logical View::MDProcess::DocCardChange::DocCardSupport::RemoveUvsQueryWebItem"
		    quidu      	"4D00AAE20043")))
	(object Association "$UNNAMED$19"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"27752601789"))
	    quid       	"4D00DD660333"
	    roles      	(list role_list
		(object Role "$UNNAMED$20"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"27754310932")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false"))
		    quid       	"4D00DD6701FA"
		    stereotype 	"condition"
		    supplier   	"Logical View::MDProcess::DocCardChange::DocCardSupport::DpoUvsRemovePermissionCondition"
		    quidu      	"4D00DD250344"
		    is_navigable 	TRUE)
		(object Role "$UNNAMED$21"
		    quid       	"4D00DD670357"
		    supplier   	"Logical View::MDProcess::DocCardChange::DocCardSupport::RemoveDocCardWebItem"
		    quidu      	"4D00900B026C")))
	(object Association "$UNNAMED$22"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"26260099692"))
	    quid       	"4D10A7D9014F"
	    roles      	(list role_list
		(object Role "success"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"26268928062")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false"))
		    quid       	"4D10A7D90350"
		    stereotype 	"velocity"
		    label      	"success"
		    supplier   	"Logical View::MDProcess::DocCardChange::DocCardView::uvsquery-choose-doccard"
		    quidu      	"4D10A794001E"
		    Containment 	"By Value"
		    is_navigable 	TRUE)
		(object Role "$UNNAMED$23"
		    quid       	"4D10A7D90353"
		    supplier   	"Logical View::MDProcess::DocCardChange::DocCardSupport::DocCardXPlugin::DocCardXPackage::OpenWindowChooseDocCard"
		    quidu      	"4D109ED30339"
		    is_aggregate 	TRUE)))
	(object Association "$UNNAMED$24"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"20476252789"))
	    quid       	"4D5E54F30054"
	    roles      	(list role_list
		(object Role "$UNNAMED$25"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"20477833301")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"invert"
			    value      	"false"))
		    quid       	"4D5E54F3022C"
		    stereotype 	"condition"
		    supplier   	"Logical View::MDProcess::DocCardChange::DocCardSupport::ReturnInWorkCondition"
		    quidu      	"4D5E54BD035F"
		    is_navigable 	TRUE)
		(object Role "$UNNAMED$26"
		    quid       	"4D5E54F3022E"
		    supplier   	"Logical View::MDProcess::DocCardChange::DocCardSupport::ReturnInWorkWebItem"
		    quidu      	"4D5E546002BD")))
	(object Association "$UNNAMED$27"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"24139140700"))
	    quid       	"4E16F7E80085"
	    roles      	(list role_list
		(object Role "$UNNAMED$28"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"24140968925")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false"))
		    quid       	"4E16F7E802C4"
		    stereotype 	"condition"
		    supplier   	"Logical View::MDProcess::DocCardChange::DocCardSupport::AddUOCurrentDocFromOGVCondition"
		    quidu      	"5152E45200CB"
		    is_navigable 	TRUE)
		(object Role "$UNNAMED$29"
		    quid       	"4E16F7E802C6"
		    supplier   	"Logical View::MDProcess::DocCardChange::DocCardSupport::AddUOCurrentDocWebItem"
		    quidu      	"4E16F7AA0021")))
	(object Association "$UNNAMED$30"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"1326952545662293"))
	    quid       	"4F17B06001C6"
	    roles      	(list role_list
		(object Role "$UNNAMED$31"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"1326952548744470")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false"))
		    quid       	"4F17B0610292"
		    stereotype 	"condition"
		    supplier   	"Logical View::MDProcess::DocCardChange::DocCardSupport::RemoveOGVCondition"
		    quidu      	"4F17B02B029D"
		    is_navigable 	TRUE)
		(object Role "$UNNAMED$32"
		    quid       	"4F17B0610294"
		    supplier   	"Logical View::MDProcess::DocCardChange::DocCardSupport::• RemoveOGVWebItem"
		    quidu      	"4F17AE4A00C1")))
	(object Association "$UNNAMED$33"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"1327302395354598"))
	    quid       	"4F1D06FA0376"
	    roles      	(list role_list
		(object Role "$UNNAMED$34"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"1327305301338832"))
		    quid       	"4F1D06FB015F"
		    stereotype 	"condition"
		    supplier   	"Logical View::MDProcess::DocCardChange::DocCardSupport::MoveUvsQueryCondition"
		    quidu      	"4F1D06E20220"
		    is_navigable 	TRUE)
		(object Role "$UNNAMED$35"
		    quid       	"4F1D06FB0161"
		    supplier   	"Logical View::MDProcess::DocCardChange::DocCardSupport::MoveUvsQueryToAntoherDocCardWebItem"
		    quidu      	"4F1D065800C7")))
	(object Association "$UNNAMED$36"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"1347271812200055"))
	    quid       	"504DBC8302C6"
	    roles      	(list role_list
		(object Role "$UNNAMED$37"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"1347271814474186")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false"))
		    quid       	"504DBC8400C5"
		    stereotype 	"condition"
		    supplier   	"Logical View::MDProcess::DocCardChange::DocCardSupport::AddOGVCondition"
		    quidu      	"504DBC60021C"
		    is_navigable 	TRUE)
		(object Role "$UNNAMED$38"
		    quid       	"504DBC8400C7"
		    supplier   	"Logical View::MDProcess::DocCardChange::DocCardSupport::AddOGVWebItem"
		    quidu      	"504DBBFE0042")))
	(object Association "$UNNAMED$39"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"1349184546704259"))
	    quid       	"506AEC2103A6"
	    roles      	(list role_list
		(object Role "$UNNAMED$40"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"1349184548221347")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false"))
		    quid       	"506AEC2202BC"
		    stereotype 	"condition"
		    supplier   	"Logical View::MDProcess::DocCardChange::DocCardSupport::RemoveDocCardCondition"
		    quidu      	"506AEBF102BE"
		    is_navigable 	TRUE)
		(object Role "$UNNAMED$41"
		    quid       	"506AEC2202BE"
		    supplier   	"Logical View::MDProcess::DocCardChange::DocCardSupport::RemoveDocCardWebItem"
		    quidu      	"4D00900B026C")))
	(object Association "$UNNAMED$42"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"1367846083282573"))
	    quid       	"5187ACC20305"
	    roles      	(list role_list
		(object Role "$UNNAMED$43"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"1367846346757668"))
		    quid       	"5187ACC30117"
		    stereotype 	"condition"
		    supplier   	"Logical View::MDProcess::DocCardChange::DocCardSupport::MoveCopyCondition"
		    quidu      	"5187AC8700A3"
		    is_navigable 	TRUE)
		(object Role "$UNNAMED$44"
		    quid       	"5187ACC30119"
		    supplier   	"Logical View::MDProcess::DocCardChange::DocCardSupport::MoveCopyToAnotherUvsQueryWebItem"
		    quidu      	"5187ABCA02A6")))
	(object Association "$UNNAMED$45"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"1374238821508750"))
	    quid       	"51E938650099"
	    roles      	(list role_list
		(object Role "$UNNAMED$46"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"1374239357600437"))
		    quid       	"51E9386501F8"
		    stereotype 	"condition"
		    supplier   	"Logical View::MDProcess::DocCardChange::DocCardSupport::AddUOCurrentDocFromDoccardCondition"
		    quidu      	"4E23D93602F9"
		    is_navigable 	TRUE)
		(object Role "$UNNAMED$47"
		    quid       	"51E9386501FA"
		    supplier   	"Logical View::MDProcess::DocCardChange::DocCardSupport::AddUOCurrentDocWithSavedFieldsFromDoccardWebItem"
		    quidu      	"51E9384301B0")))
	(object Association "$UNNAMED$48"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"1374238890993727"))
	    quid       	"51E938A701F5"
	    roles      	(list role_list
		(object Role "$UNNAMED$49"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"1374239357601438"))
		    quid       	"51E938AA03DD"
		    stereotype 	"condition"
		    supplier   	"Logical View::MDProcess::DocCardChange::DocCardSupport::AddUOCurrentDocFromDoccardCondition"
		    quidu      	"4E23D93602F9"
		    is_navigable 	TRUE)
		(object Role "$UNNAMED$50"
		    quid       	"51E938AA03DF"
		    supplier   	"Logical View::MDProcess::DocCardChange::DocCardSupport::AddUOCurrentDocFromDoccardWebItem"
		    quidu      	"51E9388003AB")))
	(object Association "$UNNAMED$51"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"1404307690969666"))
	    quid       	"53B408EA01FF"
	    roles      	(list role_list
		(object Role "$UNNAMED$52"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"1404307692581759")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false"))
		    quid       	"53B408EA03C6"
		    stereotype 	"condition"
		    supplier   	"Logical View::MDProcess::DocCardChange::DocCardSupport::MoveAllDocCardsFromOGVCondition"
		    quidu      	"53B408D3019A"
		    is_navigable 	TRUE)
		(object Role "$UNNAMED$53"
		    quid       	"53B408EA03C8"
		    supplier   	"Logical View::MDProcess::DocCardChange::DocCardSupport::MoveAllDocCardsWebItem"
		    quidu      	"53B3F7B10337")))
	(object Association "$UNNAMED$54"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"1445437595890942"))
	    quid       	"5627A09B0184"
	    roles      	(list role_list
		(object Role "success"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"1445437609528723")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false"))
		    quid       	"5627A09B0375"
		    stereotype 	"velocity"
		    label      	"success"
		    supplier   	"Logical View::MDProcess::DocCardChange::DocCardView::add-attachments-saved-from-disk"
		    quidu      	"56279C26009C"
		    Containment 	"By Value"
		    is_navigable 	TRUE)
		(object Role "$UNNAMED$55"
		    quid       	"5627A09B0377"
		    supplier   	"Logical View::MDProcess::DocCardChange::DocCardSupport::DocCardXPlugin::DocCardXPackage::DoViewAttachmentsSavedFromDisk"
		    quidu      	"56279B9502F7"
		    is_aggregate 	TRUE)))
	(object Association "L"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"1445437639066417"))
	    quid       	"5627A0C502C8"
	    roles      	(list role_list
		(object Role "error"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"1445437645396780")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false"))
		    quid       	"5627A0C7003D"
		    stereotype 	"velocity"
		    label      	"error"
		    supplier   	"Logical View::MDProcess::DocCardChange::DocCardView::add-attachments-saved-from-disk"
		    quidu      	"56279C26009C"
		    Containment 	"By Value"
		    is_navigable 	TRUE)
		(object Role "$UNNAMED$56"
		    quid       	"5627A0C7003F"
		    supplier   	"Logical View::MDProcess::DocCardChange::DocCardSupport::DocCardXPlugin::DocCardXPackage::DoViewAttachmentsSavedFromDisk"
		    quidu      	"56279B9502F7"
		    is_aggregate 	TRUE)))
	(object Association "$UNNAMED$57"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"1445504138852992"))
	    quid       	"5628A48A00D7"
	    roles      	(list role_list
		(object Role "input"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"1445504142977229")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false"))
		    quid       	"5628A48A034E"
		    stereotype 	"velocity-xml"
		    label      	"input"
		    supplier   	"Logical View::MDProcess::DocCardChange::DocCardView::add-attachments-saved-from-disk"
		    quidu      	"56279C26009C"
		    Containment 	"By Value"
		    is_navigable 	TRUE)
		(object Role "$UNNAMED$58"
		    quid       	"5628A48A0351"
		    supplier   	"Logical View::MDProcess::DocCardChange::DocCardSupport::DocCardXPlugin::DocCardXPackage::DoViewAttachmentsSavedFromDisk"
		    quidu      	"56279B9502F7"
		    is_aggregate 	TRUE))))
    logical_presentations 	(list unit_reference_list
	(object ClassDiagram "Main"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsChanged"
		    value      	"true"))
	    quid       	"4C3F05AE01C3"
	    title      	"Main"
	    zoom       	100
	    max_height 	28350
	    max_width  	21600
	    origin_x   	0
	    origin_y   	22006
	    items      	(list diagram_item_list
		(object ClassView "Class" "Logical View::MDProcess::ConfluenceMDChange::RequestSupport::AbstractMdcSpaceConfigAction" @1
		    ShowCompartmentStereotypes 	TRUE
		    SuppressAttribute 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    location   	(777, 105)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	TRUE
			underline  	FALSE
			strike     	FALSE
			color      	705320
			default_color 	FALSE)
		    label      	(object ItemLabel
			Parent_View 	@1
			location   	(470, 73)
			nlines     	1
			max_width  	614
			justify    	0
			label      	"AbstractMdcSpaceConfigAction")
		    stereotype 	(object ItemLabel
			Parent_View 	@1
			location   	(470, 23)
			anchor     	10
			nlines     	1
			max_width  	614
			justify    	0
			label      	"<<SimpleClass>>")
		    icon_style 	"Label"
		    line_color 	705320
		    fill_color 	16777215
		    quidu      	"49F6C9D50375"
		    width      	632
		    height     	188
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::DPOUVSSpaceConfig" @2
		    ShowCompartmentStereotypes 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(276, 303)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@2
			location   	(59, 274)
			fill_color 	13434879
			nlines     	1
			max_width  	434
			justify    	0
			label      	"DPOUVSSpaceConfig")
		    stereotype 	(object ItemLabel
			Parent_View 	@2
			location   	(59, 224)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	434
			justify    	0
			label      	"<<KActionPlugin>>")
		    icon_style 	"Label"
		    fill_color 	15448575
		    quidu      	"4C3F05E80307"
		    width      	452
		    height     	182
		    annotation 	8
		    autoResize 	TRUE)
		(object InheritView "" @3
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	TRUE
		    line_color 	3947680
		    quidu      	"4C3F06DF03BA"
		    client     	@2
		    supplier   	@1
		    vertices   	(list Points
			(276, 303)
			(777, 105))
		    line_style 	0)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::DocCardXPlugin" @4
		    ShowCompartmentStereotypes 	TRUE
		    SuppressAttribute 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(858, 324)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@4
			location   	(677, 308)
			fill_color 	13434879
			nlines     	1
			max_width  	362
			justify    	0
			label      	"DocCardXPlugin")
		    stereotype 	(object ItemLabel
			Parent_View 	@4
			location   	(677, 258)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	359
			justify    	0
			label      	"<<KXWorkPlugin>>")
		    icon_style 	"Label"
		    line_color 	7885055
		    fill_color 	16111871
		    quidu      	"4C3F07400293"
		    width      	380
		    height     	157
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::DpoUvsHelper" @5
		    ShowCompartmentStereotypes 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(2097, 162)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@5
			location   	(1832, 103)
			fill_color 	13434879
			nlines     	1
			max_width  	530
			justify    	0
			label      	"• DpoUvsHelper")
		    stereotype 	(object ItemLabel
			Parent_View 	@5
			location   	(1832, 53)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	528
			justify    	0
			label      	"<<KVelocityContextPlugin>>")
		    icon_style 	"Label"
		    fill_color 	15448575
		    quidu      	"4C40200B0007"
		    compartment 	(object Compartment
			Parent_View 	@5
			location   	(1832, 164)
			font       	(object Font
			    size       	10
			    face       	"Arial"
			    charSet    	204
			    bold       	FALSE
			    italics    	FALSE
			    underline  	FALSE
			    strike     	FALSE
			    color      	0
			    default_color 	TRUE)
			icon_style 	"Icon"
			fill_color 	16777215
			anchor     	2
			nlines     	2
			max_width  	334
			justify    	1)
		    width      	548
		    height     	242
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::ConfluenceMDChange::RequestSupport::AbstractRequestHelper" @6
		    ShowCompartmentStereotypes 	TRUE
		    SuppressAttribute 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    location   	(1452, 93)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	TRUE
			underline  	FALSE
			strike     	FALSE
			color      	705320
			default_color 	FALSE)
		    label      	(object ItemLabel
			Parent_View 	@6
			location   	(1215, 61)
			nlines     	1
			max_width  	474
			justify    	0
			label      	"• AbstractRequestHelper")
		    stereotype 	(object ItemLabel
			Parent_View 	@6
			location   	(1215, 11)
			anchor     	10
			nlines     	1
			max_width  	474
			justify    	0
			label      	"<<SimpleClass>>")
		    icon_style 	"Label"
		    line_color 	705320
		    fill_color 	16777215
		    quidu      	"48E5A4A503B4"
		    width      	492
		    height     	188
		    annotation 	8
		    autoResize 	TRUE)
		(object InheritView "" @7
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	TRUE
		    line_color 	3947680
		    quidu      	"4C40204002C6"
		    client     	@5
		    supplier   	@6
		    vertices   	(list Points
			(1822, 131)
			(1698, 118))
		    line_style 	0)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::ResponsibleDataLoader" @8
		    ShowCompartmentStereotypes 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(681, 741)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@8
			location   	(67, 507)
			fill_color 	13434879
			nlines     	1
			max_width  	1228
			justify    	0
			label      	"• ResponsibleDataLoader")
		    stereotype 	(object ItemLabel
			Parent_View 	@8
			location   	(67, 457)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	1228
			justify    	0
			label      	"<<KActionPlugin>>")
		    icon_style 	"Label"
		    fill_color 	15448575
		    quidu      	"4C4558CD02DC"
		    compartment 	(object Compartment
			Parent_View 	@8
			location   	(67, 568)
			font       	(object Font
			    size       	10
			    face       	"Arial"
			    charSet    	204
			    bold       	FALSE
			    italics    	FALSE
			    underline  	FALSE
			    strike     	FALSE
			    color      	0
			    default_color 	TRUE)
			icon_style 	"Icon"
			fill_color 	16777215
			anchor     	2
			nlines     	9
			max_width  	1225
			justify    	1)
		    width      	1246
		    height     	592
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::CreateOGVFromFile" @9
		    ShowCompartmentStereotypes 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(291, 1200)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@9
			location   	(89, 1171)
			fill_color 	13434879
			nlines     	1
			max_width  	404
			justify    	0
			label      	"CreateOGVFromFile")
		    stereotype 	(object ItemLabel
			Parent_View 	@9
			location   	(89, 1121)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	404
			justify    	0
			label      	"<<KActionPlugin>>")
		    icon_style 	"Label"
		    fill_color 	15448575
		    quidu      	"4C47E3350327"
		    width      	422
		    height     	182
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::ConfluencePlugins::CommentLocationSupport::GarantCreatePageAction" @10
		    ShowCompartmentStereotypes 	TRUE
		    SuppressAttribute 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    location   	(291, 1440)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	13110000
			default_color 	FALSE)
		    label      	(object ItemLabel
			Parent_View 	@10
			location   	(38, 1412)
			nlines     	1
			max_width  	506
			justify    	0
			label      	"• GarantCreatePageAction")
		    stereotype 	(object ItemLabel
			Parent_View 	@10
			location   	(38, 1362)
			anchor     	10
			nlines     	1
			max_width  	506
			justify    	0
			label      	"<<KActionPlugin>>")
		    icon_style 	"Label"
		    line_color 	13110000
		    fill_color 	16777215
		    quidu      	"46444CDD031C"
		    width      	524
		    height     	180
		    annotation 	8
		    autoResize 	TRUE)
		(object InheritView "" @11
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	TRUE
		    line_color 	3947680
		    quidu      	"4C47E45A00BF"
		    client     	@9
		    supplier   	@10
		    vertices   	(list Points
			(291, 1200)
			(291, 1440))
		    line_style 	0)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::CreateSettingsDpoUvs" @12
		    ShowCompartmentStereotypes 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(3522, 1737)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@12
			location   	(3299, 1708)
			fill_color 	13434879
			nlines     	1
			max_width  	446
			justify    	0
			label      	"CreateSettingsDpoUvs")
		    stereotype 	(object ItemLabel
			Parent_View 	@12
			location   	(3299, 1658)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	446
			justify    	0
			label      	"<<KActionPlugin>>")
		    icon_style 	"Label"
		    fill_color 	15448575
		    quidu      	"4C481CD10276"
		    width      	464
		    height     	182
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::CreateUvsQuery" @13
		    ShowCompartmentStereotypes 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(2955, 1263)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@13
			location   	(2775, 1234)
			fill_color 	13434879
			nlines     	1
			max_width  	360
			justify    	0
			label      	"CreateUvsQuery")
		    stereotype 	(object ItemLabel
			Parent_View 	@13
			location   	(2775, 1184)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	360
			justify    	0
			label      	"<<KActionPlugin>>")
		    icon_style 	"Label"
		    fill_color 	15448575
		    quidu      	"4C652CD603D7"
		    width      	378
		    height     	182
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::ConfluenceMDChange::RequestSupport::AbstractEditRequest" @14
		    ShowCompartmentStereotypes 	TRUE
		    SuppressAttribute 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    location   	(4074, 1812)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	TRUE
			underline  	FALSE
			strike     	FALSE
			color      	705320
			default_color 	FALSE)
		    label      	(object ItemLabel
			Parent_View 	@14
			location   	(3869, 1780)
			nlines     	1
			max_width  	410
			justify    	0
			label      	"AbstractEditRequest")
		    stereotype 	(object ItemLabel
			Parent_View 	@14
			location   	(3869, 1730)
			anchor     	10
			nlines     	1
			max_width  	410
			justify    	0
			label      	"<<SimpleClass>>")
		    icon_style 	"Label"
		    line_color 	705320
		    fill_color 	16777215
		    quidu      	"48A5037E037F"
		    width      	428
		    height     	188
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::EditUvsQuery" @15
		    ShowCompartmentStereotypes 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(3543, 402)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@15
			location   	(3333, 358)
			fill_color 	13434879
			nlines     	1
			max_width  	420
			justify    	0
			label      	"EditUvsQuery")
		    stereotype 	(object ItemLabel
			Parent_View 	@15
			location   	(3333, 308)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	420
			justify    	0
			label      	"<<KActionPlugin>>")
		    icon_style 	"Label"
		    fill_color 	15448575
		    quidu      	"4C6E6BA901D1"
		    width      	438
		    height     	212
		    annotation 	8
		    autoResize 	TRUE)
		(object InheritView "" @16
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	TRUE
		    line_color 	3947680
		    quidu      	"4C6E6BD902F8"
		    client     	@15
		    supplier   	@14
		    vertices   	(list Points
			(3582, 508)
			(4037, 1717))
		    line_style 	0)
		(object ClassView "Class" "Logical View::MDProcess::ConfluenceMDChange::RequestSupport::AbstractPageRequest" @17
		    ShowCompartmentStereotypes 	TRUE
		    SuppressAttribute 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    location   	(3231, 132)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	TRUE
			underline  	FALSE
			strike     	FALSE
			color      	705320
			default_color 	FALSE)
		    label      	(object ItemLabel
			Parent_View 	@17
			location   	(3014, 100)
			nlines     	1
			max_width  	434
			justify    	0
			label      	"AbstractPageRequest")
		    stereotype 	(object ItemLabel
			Parent_View 	@17
			location   	(3014, 50)
			anchor     	10
			nlines     	1
			max_width  	434
			justify    	0
			label      	"<<SimpleClass>>")
		    icon_style 	"Label"
		    line_color 	705320
		    fill_color 	16777215
		    quidu      	"48E5C6730255"
		    width      	452
		    height     	188
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::PageUvsQuery" @18
		    ShowCompartmentStereotypes 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(2919, 393)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@18
			location   	(2753, 364)
			fill_color 	13434879
			nlines     	1
			max_width  	332
			justify    	0
			label      	"PageUvsQuery")
		    stereotype 	(object ItemLabel
			Parent_View 	@18
			location   	(2753, 314)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	332
			justify    	0
			label      	"<<SimpleClass>>")
		    icon_style 	"Label"
		    fill_color 	12842465
		    quidu      	"4C6E879E002F"
		    width      	350
		    height     	182
		    annotation 	8
		    autoResize 	TRUE)
		(object InheritView "" @19
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	TRUE
		    line_color 	3947680
		    quidu      	"4C6E87BF0264"
		    client     	@18
		    supplier   	@17
		    vertices   	(list Points
			(3027, 301)
			(3117, 226))
		    line_style 	0)
		(object UsesView "" @20
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	(object SegLabel @21
			Parent_View 	@20
			location   	(2561, 225)
			font       	(object Font
			    size       	10
			    face       	"Arial"
			    charSet    	204
			    bold       	FALSE
			    italics    	FALSE
			    underline  	FALSE
			    strike     	FALSE
			    color      	0
			    default_color 	TRUE)
			anchor     	10
			anchor_loc 	1
			nlines     	1
			max_width  	450
			justify    	0
			label      	"<<uses>>"
			pctDist    	0.465800
			height     	64
			orientation 	0)
		    line_color 	3947680
		    quidu      	"4C6E87C2028F"
		    client     	@5
		    supplier   	@18
		    vertices   	(list Points
			(2371, 237)
			(2743, 342))
		    line_style 	0)
		(object ClassView "Class" "Logical View::MDProcess::ConfluenceMDChange::RequestSupport::AbstractAddRequestCondition" @22
		    ShowCompartmentStereotypes 	TRUE
		    SuppressAttribute 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    location   	(306, 1995)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	TRUE
			underline  	FALSE
			strike     	FALSE
			color      	705320
			default_color 	FALSE)
		    label      	(object ItemLabel
			Parent_View 	@22
			location   	(10, 1963)
			nlines     	1
			max_width  	592
			justify    	0
			label      	"AbstractAddRequestCondition")
		    stereotype 	(object ItemLabel
			Parent_View 	@22
			location   	(10, 1913)
			anchor     	10
			nlines     	1
			max_width  	592
			justify    	0
			label      	"<<SimpleClass>>")
		    icon_style 	"Label"
		    line_color 	705320
		    fill_color 	16777215
		    quidu      	"4A5355390002"
		    width      	610
		    height     	188
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::DocCardXPlugin::DocCardXPackage::CreateUvsQuery" @23
		    ShowCompartmentStereotypes 	TRUE
		    SuppressAttribute 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    location   	(2721, 1890)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	4944613
			default_color 	FALSE)
		    label      	(object ItemLabel
			Parent_View 	@23
			location   	(2521, 1862)
			nlines     	1
			max_width  	400
			justify    	0
			label      	"• CreateUvsQuery")
		    stereotype 	(object ItemLabel
			Parent_View 	@23
			location   	(2521, 1812)
			anchor     	10
			nlines     	1
			max_width  	400
			justify    	0
			label      	"<<XAction>>")
		    icon_style 	"Label"
		    line_color 	4944613
		    fill_color 	16777215
		    quidu      	"4C652D23033C"
		    width      	418
		    height     	180
		    annotation 	8
		    autoResize 	TRUE)
		(object UsesView "" @24
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	(object SegLabel @25
			Parent_View 	@24
			location   	(2725, 1536)
			font       	(object Font
			    size       	10
			    face       	"Arial"
			    charSet    	204
			    bold       	FALSE
			    italics    	FALSE
			    underline  	FALSE
			    strike     	FALSE
			    color      	0
			    default_color 	TRUE)
			anchor     	10
			anchor_loc 	1
			nlines     	1
			max_width  	450
			justify    	0
			label      	"<<call>>"
			pctDist    	0.500000
			height     	120
			orientation 	0)
		    line_color 	3947680
		    quidu      	"4C652D50026E"
		    client     	@23
		    supplier   	@13
		    vertices   	(list Points
			(2753, 1799)
			(2919, 1354))
		    line_style 	0)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::SearchUvsQuery" @26
		    ShowCompartmentStereotypes 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(2082, 3342)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@26
			location   	(1431, 3033)
			fill_color 	13434879
			nlines     	1
			max_width  	1302
			justify    	0
			label      	"• SearchUvsQuery")
		    stereotype 	(object ItemLabel
			Parent_View 	@26
			location   	(1431, 2983)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	1302
			justify    	0
			label      	"<<KActionPlugin>>")
		    icon_style 	"Label"
		    line_color 	7885055
		    fill_color 	15448575
		    quidu      	"4C7B5C0402FD"
		    compartment 	(object Compartment
			Parent_View 	@26
			location   	(1431, 3094)
			font       	(object Font
			    size       	10
			    face       	"Arial"
			    charSet    	204
			    bold       	FALSE
			    italics    	FALSE
			    underline  	FALSE
			    strike     	FALSE
			    color      	0
			    default_color 	TRUE)
			icon_style 	"Icon"
			fill_color 	16777215
			anchor     	2
			nlines     	12
			max_width  	1296
			justify    	1)
		    width      	1320
		    height     	742
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::external::ConfluenceSupport::com.opensymphony.xwork::Preparable" @27
		    ShowCompartmentStereotypes 	TRUE
		    SuppressAttribute 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    location   	(249, 2592)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	658120
			default_color 	FALSE)
		    label      	(object ItemLabel
			Parent_View 	@27
			location   	(9, 2564)
			fill_color 	13434879
			nlines     	1
			max_width  	480
			justify    	0
			label      	"• Preparable")
		    stereotype 	(object ItemLabel
			Parent_View 	@27
			location   	(9, 2514)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	480
			justify    	0
			label      	"<<Facet>>")
		    icon_style 	"Label"
		    line_color 	14803425
		    fill_color 	14803425
		    quidu      	"4A8E4F9B0196"
		    width      	498
		    height     	180
		    annotation 	8
		    autoResize 	TRUE)
		(object RealizeView "" @28
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	TRUE
		    line_color 	3947680
		    quidu      	"4AA9F389006C"
		    client     	@10
		    supplier   	@27
		    vertices   	(list Points
			(287, 1530)
			(251, 2501))
		    line_style 	0)
		(object RealizeView "" @29
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	TRUE
		    line_color 	3947680
		    quidu      	"4C7B5C3702B5"
		    client     	@26
		    supplier   	@27
		    vertices   	(list Points
			(1421, 3070)
			(470, 2682))
		    line_style 	0)
		(object ClassView "Class" "Logical View::MDProcess::ConfluenceMDChange::ReportSupport::ListRequest" @30
		    ShowCompartmentStereotypes 	TRUE
		    SuppressAttribute 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    location   	(3144, 2166)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	13110000
			default_color 	FALSE)
		    label      	(object ItemLabel
			Parent_View 	@30
			location   	(2964, 2138)
			nlines     	1
			max_width  	360
			justify    	0
			label      	"• ListRequest")
		    stereotype 	(object ItemLabel
			Parent_View 	@30
			location   	(2964, 2088)
			anchor     	10
			nlines     	1
			max_width  	360
			justify    	0
			label      	"<<KActionPlugin>>")
		    icon_style 	"Label"
		    line_color 	13110000
		    fill_color 	16777215
		    quidu      	"4745321903C6"
		    width      	378
		    height     	180
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::ConfluenceMDChange::ReportSupport::RequestQueryDataProvider" @31
		    ShowCompartmentStereotypes 	TRUE
		    SuppressAttribute 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    location   	(1332, 3972)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	705320
			default_color 	FALSE)
		    label      	(object ItemLabel
			Parent_View 	@31
			location   	(1071, 3944)
			nlines     	1
			max_width  	522
			justify    	0
			label      	"RequestQueryDataProvider")
		    stereotype 	(object ItemLabel
			Parent_View 	@31
			location   	(1071, 3894)
			anchor     	10
			nlines     	1
			max_width  	522
			justify    	0
			label      	"<<SimpleClass>>")
		    icon_style 	"Label"
		    line_color 	705320
		    fill_color 	16777215
		    quidu      	"47A9AF450302"
		    width      	540
		    height     	180
		    annotation 	8
		    autoResize 	TRUE)
		(object InheritView "" @32
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	TRUE
		    line_color 	3947680
		    quidu      	"4C7B5C4A0371"
		    client     	@26
		    supplier   	@30
		    vertices   	(list Points
			(2416, 2970)
			(3060, 2256))
		    line_style 	0)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::SearchUvsQueryForm" @33
		    ShowCompartmentStereotypes 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(5553, 5127)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@33
			location   	(4253, 3968)
			fill_color 	13434879
			nlines     	1
			max_width  	2600
			justify    	0
			label      	"• SearchUvsQueryForm")
		    stereotype 	(object ItemLabel
			Parent_View 	@33
			location   	(4253, 3918)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	2600
			justify    	0
			label      	"<<SimpleClass>>")
		    icon_style 	"Label"
		    line_color 	7885055
		    fill_color 	12842465
		    quidu      	"4C7B6E4F001F"
		    compartment 	(object Compartment
			Parent_View 	@33
			location   	(4253, 4029)
			font       	(object Font
			    size       	10
			    face       	"Arial"
			    charSet    	204
			    bold       	FALSE
			    italics    	FALSE
			    underline  	FALSE
			    strike     	FALSE
			    color      	0
			    default_color 	TRUE)
			icon_style 	"Icon"
			fill_color 	16777215
			anchor     	2
			nlines     	46
			max_width  	2584
			justify    	1)
		    width      	2618
		    height     	2442
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::SearchUvsQuerySummaryBuilder" @34
		    ShowCompartmentStereotypes 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(4236, 3363)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@34
			location   	(3494, 3279)
			fill_color 	13434879
			nlines     	1
			max_width  	1484
			justify    	0
			label      	"• SearchUvsQuerySummaryBuilder")
		    stereotype 	(object ItemLabel
			Parent_View 	@34
			location   	(3494, 3229)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	1484
			justify    	0
			label      	"<<SimpleClass>>")
		    icon_style 	"Label"
		    fill_color 	12842465
		    quidu      	"4C7B7E31004F"
		    compartment 	(object Compartment
			Parent_View 	@34
			location   	(3494, 3340)
			font       	(object Font
			    size       	10
			    face       	"Arial"
			    charSet    	204
			    bold       	FALSE
			    italics    	FALSE
			    underline  	FALSE
			    strike     	FALSE
			    color      	0
			    default_color 	TRUE)
			icon_style 	"Icon"
			fill_color 	16777215
			anchor     	2
			nlines     	3
			max_width  	1481
			justify    	1)
		    width      	1502
		    height     	292
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::ConfluencePlugins::SearchSupport::BaseSearchSummaryBuilder" @35
		    ShowCompartmentStereotypes 	TRUE
		    SuppressAttribute 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    location   	(3042, 3324)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	TRUE
			underline  	FALSE
			strike     	FALSE
			color      	705320
			default_color 	FALSE)
		    label      	(object ItemLabel
			Parent_View 	@35
			location   	(2749, 3296)
			nlines     	1
			max_width  	586
			justify    	0
			label      	"• BaseSearchSummaryBuilder")
		    stereotype 	(object ItemLabel
			Parent_View 	@35
			location   	(2749, 3246)
			anchor     	10
			nlines     	1
			max_width  	586
			justify    	0
			label      	"<<SimpleClass>>")
		    icon_style 	"Label"
		    line_color 	705320
		    fill_color 	16777215
		    quidu      	"47A97CDE00DD"
		    width      	604
		    height     	180
		    annotation 	8
		    autoResize 	TRUE)
		(object InheritView "" @36
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	TRUE
		    line_color 	3947680
		    quidu      	"4C7B7EC500C3"
		    client     	@34
		    supplier   	@35
		    vertices   	(list Points
			(3484, 3337)
			(3344, 3333))
		    line_style 	0)
		(object UsesView "" @37
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	(object SegLabel @38
			Parent_View 	@37
			location   	(4588, 3636)
			font       	(object Font
			    size       	10
			    face       	"Arial"
			    charSet    	204
			    bold       	FALSE
			    italics    	FALSE
			    underline  	FALSE
			    strike     	FALSE
			    color      	0
			    default_color 	TRUE)
			anchor     	10
			anchor_loc 	1
			nlines     	1
			max_width  	450
			justify    	0
			label      	"<<uses>>"
			pctDist    	0.500000
			height     	120
			orientation 	0)
		    line_color 	3947680
		    quidu      	"4C7B7EE00292"
		    client     	@34
		    supplier   	@33
		    vertices   	(list Points
			(4344, 3509)
			(4639, 3905))
		    line_style 	0)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::UvsQueryDataProvider" @39
		    ShowCompartmentStereotypes 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(2010, 3924)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@39
			location   	(1048, 3840)
			fill_color 	13434879
			nlines     	1
			max_width  	1924
			justify    	0
			label      	"• UvsQueryDataProvider")
		    stereotype 	(object ItemLabel
			Parent_View 	@39
			location   	(1048, 3790)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	1924
			justify    	0
			label      	"<<SimpleClass>>")
		    icon_style 	"Label"
		    fill_color 	12842465
		    quidu      	"4C7CC70102E7"
		    compartment 	(object Compartment
			Parent_View 	@39
			location   	(1048, 3901)
			font       	(object Font
			    size       	10
			    face       	"Arial"
			    charSet    	204
			    bold       	FALSE
			    italics    	FALSE
			    underline  	FALSE
			    strike     	FALSE
			    color      	0
			    default_color 	TRUE)
			icon_style 	"Icon"
			fill_color 	16777215
			anchor     	2
			nlines     	3
			max_width  	1915
			justify    	1)
		    width      	1942
		    height     	292
		    annotation 	8
		    autoResize 	TRUE)
		(object UsesView "" @40
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	(object SegLabel @41
			Parent_View 	@40
			location   	(2151, 3758)
			font       	(object Font
			    size       	10
			    face       	"Arial"
			    charSet    	204
			    bold       	FALSE
			    italics    	FALSE
			    underline  	FALSE
			    strike     	FALSE
			    color      	0
			    default_color 	TRUE)
			anchor     	10
			anchor_loc 	1
			nlines     	1
			max_width  	450
			justify    	0
			label      	"<<uses>>"
			pctDist    	0.500000
			height     	120
			orientation 	0)
		    line_color 	3947680
		    quidu      	"4C7CC7350077"
		    client     	@26
		    supplier   	@39
		    vertices   	(list Points
			(2035, 3713)
			(2028, 3777))
		    line_style 	0)
		(object ClassView "Class" "Logical View::MDProcess::ConfluenceMDChange::ReportSupport::SearchRequestForm" @42
		    ShowCompartmentStereotypes 	TRUE
		    SuppressAttribute 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    location   	(2046, 3969)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	705320
			default_color 	FALSE)
		    label      	(object ItemLabel
			Parent_View 	@42
			location   	(1785, 3941)
			nlines     	1
			max_width  	522
			justify    	0
			label      	"• SearchRequestForm")
		    stereotype 	(object ItemLabel
			Parent_View 	@42
			location   	(1785, 3891)
			anchor     	10
			nlines     	1
			max_width  	522
			justify    	0
			label      	"<<SimpleClass>>")
		    icon_style 	"Label"
		    line_color 	705320
		    fill_color 	16777215
		    quidu      	"47848C4A0190"
		    width      	540
		    height     	180
		    annotation 	8
		    autoResize 	TRUE)
		(object InheritView "" @43
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	TRUE
		    line_color 	3947680
		    quidu      	"4C7CCA9E002F"
		    client     	@33
		    supplier   	@42
		    vertices   	(list Points
			(4243, 4694)
			(2316, 4057))
		    line_style 	0)
		(object InheritView "" @44
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	TRUE
		    line_color 	3947680
		    quidu      	"4C7CDAF902CE"
		    client     	@39
		    supplier   	@31
		    vertices   	(list Points
			(1332, 3972)
			(1602, 3952))
		    line_style 	0)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::EditDocCard" @45
		    ShowCompartmentStereotypes 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(4737, 1512)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@45
			location   	(4557, 1482)
			fill_color 	13434879
			nlines     	1
			max_width  	360
			justify    	0
			label      	"EditDocCard")
		    stereotype 	(object ItemLabel
			Parent_View 	@45
			location   	(4557, 1432)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	360
			justify    	0
			label      	"<<KActionPlugin>>")
		    icon_style 	"Label"
		    fill_color 	15448575
		    quidu      	"4C7F6BDB0380"
		    width      	378
		    height     	184
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::ConfluencePlugins::EntitySupport::EditEntity" @46
		    ShowCompartmentStereotypes 	TRUE
		    SuppressAttribute 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    location   	(3978, 1293)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	TRUE
			underline  	FALSE
			strike     	FALSE
			color      	705320
			default_color 	FALSE)
		    label      	(object ItemLabel
			Parent_View 	@46
			location   	(3813, 1265)
			nlines     	1
			max_width  	330
			justify    	0
			label      	"EditEntity")
		    stereotype 	(object ItemLabel
			Parent_View 	@46
			location   	(3813, 1215)
			anchor     	10
			nlines     	1
			max_width  	328
			justify    	0
			label      	"<<SimpleClass>>")
		    icon_style 	"Label"
		    line_color 	705320
		    fill_color 	16777215
		    quidu      	"4B289B6C0245"
		    width      	348
		    height     	180
		    annotation 	8
		    autoResize 	TRUE)
		(object InheritView "" @47
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	TRUE
		    line_color 	3947680
		    quidu      	"4B289F290216"
		    client     	@14
		    supplier   	@46
		    vertices   	(list Points
			(4056, 1717)
			(3994, 1383))
		    line_style 	0)
		(object InheritView "" @48
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	TRUE
		    line_color 	3947680
		    quidu      	"4C7F6C17007B"
		    client     	@45
		    supplier   	@46
		    vertices   	(list Points
			(4547, 1457)
			(4152, 1342))
		    line_style 	0)
		(object UsesView "" @49
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	(object SegLabel @50
			Parent_View 	@49
			location   	(3208, 517)
			font       	(object Font
			    size       	10
			    face       	"Arial"
			    charSet    	204
			    bold       	FALSE
			    italics    	FALSE
			    underline  	FALSE
			    strike     	FALSE
			    color      	0
			    default_color 	TRUE)
			anchor     	10
			anchor_loc 	1
			nlines     	1
			max_width  	450
			justify    	0
			label      	"<<uses>>"
			pctDist    	0.500000
			height     	120
			orientation 	0)
		    line_color 	3947680
		    quidu      	"4C7F71C80125"
		    client     	@15
		    supplier   	@18
		    vertices   	(list Points
			(3323, 398)
			(3094, 395))
		    line_style 	0)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::PageDocCard" @51
		    ShowCompartmentStereotypes 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(4392, 678)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@51
			location   	(3781, 244)
			fill_color 	13434879
			nlines     	1
			max_width  	1222
			justify    	0
			label      	"• PageDocCard")
		    stereotype 	(object ItemLabel
			Parent_View 	@51
			location   	(3781, 194)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	1222
			justify    	0
			label      	"<<SimpleClass>>")
		    icon_style 	"Label"
		    fill_color 	12842465
		    quidu      	"4C7F721F0100"
		    compartment 	(object Compartment
			Parent_View 	@51
			location   	(3781, 305)
			font       	(object Font
			    size       	10
			    face       	"Arial"
			    charSet    	204
			    bold       	FALSE
			    italics    	FALSE
			    underline  	FALSE
			    strike     	FALSE
			    color      	0
			    default_color 	TRUE)
			icon_style 	"Icon"
			fill_color 	16777215
			anchor     	2
			nlines     	17
			max_width  	1221
			justify    	1)
		    width      	1240
		    height     	992
		    annotation 	8
		    autoResize 	TRUE)
		(object UsesView "" @52
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	(object SegLabel @53
			Parent_View 	@52
			location   	(4537, 1343)
			font       	(object Font
			    size       	10
			    face       	"Arial"
			    charSet    	204
			    bold       	FALSE
			    italics    	FALSE
			    underline  	FALSE
			    strike     	FALSE
			    color      	0
			    default_color 	TRUE)
			anchor     	10
			anchor_loc 	1
			nlines     	1
			max_width  	450
			justify    	0
			label      	"<<uses>>"
			pctDist    	0.500000
			height     	120
			orientation 	0)
		    line_color 	3947680
		    quidu      	"4C7F72490261"
		    client     	@45
		    supplier   	@51
		    vertices   	(list Points
			(4697, 1419)
			(4596, 1174))
		    line_style 	0)
		(object ClassView "Class" "Logical View::MDProcess::ConfluenceMDChange::ReportSupport::RequestColumnList" @54
		    ShowCompartmentStereotypes 	TRUE
		    SuppressAttribute 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    location   	(4836, 2220)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	705320
			default_color 	FALSE)
		    label      	(object ItemLabel
			Parent_View 	@54
			location   	(4643, 2192)
			nlines     	1
			max_width  	386
			justify    	0
			label      	"RequestColumnList")
		    stereotype 	(object ItemLabel
			Parent_View 	@54
			location   	(4643, 2142)
			anchor     	10
			nlines     	1
			max_width  	386
			justify    	0
			label      	"<<SimpleClass>>")
		    icon_style 	"Label"
		    line_color 	705320
		    fill_color 	16777215
		    quidu      	"47988B630125"
		    width      	404
		    height     	180
		    annotation 	8
		    autoResize 	TRUE)
		(object UsesView "" @55
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	(object SegLabel @56
			Parent_View 	@55
			location   	(3988, 2073)
			font       	(object Font
			    size       	10
			    face       	"Arial"
			    charSet    	204
			    bold       	FALSE
			    italics    	FALSE
			    underline  	FALSE
			    strike     	FALSE
			    color      	0
			    default_color 	TRUE)
			anchor     	10
			anchor_loc 	1
			nlines     	1
			max_width  	450
			justify    	0
			label      	"<<uses>>"
			pctDist    	0.500000
			height     	120
			orientation 	0)
		    line_color 	3947680
		    quidu      	"4ADC2E6001FC"
		    client     	@30
		    supplier   	@54
		    vertices   	(list Points
			(3333, 2171)
			(4633, 2213))
		    line_style 	0)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::SearchUvsQueryColumnList" @57
		    ShowCompartmentStereotypes 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(3774, 2553)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@57
			location   	(2971, 2494)
			fill_color 	13434879
			nlines     	1
			max_width  	1606
			justify    	0
			label      	"• SearchUvsQueryColumnList")
		    stereotype 	(object ItemLabel
			Parent_View 	@57
			location   	(2971, 2444)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	1606
			justify    	0
			label      	"<<SimpleClass>>")
		    icon_style 	"Label"
		    fill_color 	12842465
		    quidu      	"4C85D5C40369"
		    compartment 	(object Compartment
			Parent_View 	@57
			location   	(2971, 2555)
			font       	(object Font
			    size       	10
			    face       	"Arial"
			    charSet    	204
			    bold       	FALSE
			    italics    	FALSE
			    underline  	FALSE
			    strike     	FALSE
			    color      	0
			    default_color 	TRUE)
			icon_style 	"Icon"
			fill_color 	16777215
			anchor     	2
			nlines     	2
			max_width  	1596
			justify    	1)
		    width      	1624
		    height     	242
		    annotation 	8
		    autoResize 	TRUE)
		(object InheritView "" @58
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	TRUE
		    line_color 	3947680
		    quidu      	"4C85D5F4035D"
		    client     	@57
		    supplier   	@54
		    vertices   	(list Points
			(4156, 2431)
			(4633, 2282))
		    line_style 	0)
		(object UsesView "" @59
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	(object SegLabel @60
			Parent_View 	@59
			location   	(3076, 2745)
			font       	(object Font
			    size       	10
			    face       	"Arial"
			    charSet    	204
			    bold       	FALSE
			    italics    	FALSE
			    underline  	FALSE
			    strike     	FALSE
			    color      	0
			    default_color 	TRUE)
			anchor     	10
			anchor_loc 	1
			nlines     	1
			max_width  	450
			justify    	0
			label      	"<<uses>>"
			pctDist    	0.500000
			height     	120
			orientation 	0)
		    line_color 	3947680
		    quidu      	"4C85D6CD0328"
		    client     	@26
		    supplier   	@57
		    vertices   	(list Points
			(2742, 3032)
			(3510, 2674))
		    line_style 	0)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::SearchUvsQuerySpecifedByCopiesColumnList" @61
		    ShowCompartmentStereotypes 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(4008, 3012)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@61
			location   	(3041, 2953)
			fill_color 	13434879
			nlines     	1
			max_width  	1934
			justify    	0
			label      	"• SearchUvsQuerySpecifedByCopiesColumnList")
		    stereotype 	(object ItemLabel
			Parent_View 	@61
			location   	(3041, 2903)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	1934
			justify    	0
			label      	"<<SimpleClass>>")
		    icon_style 	"Label"
		    fill_color 	12842465
		    quidu      	"4C88D0EB023F"
		    compartment 	(object Compartment
			Parent_View 	@61
			location   	(3041, 3014)
			font       	(object Font
			    size       	10
			    face       	"Arial"
			    charSet    	204
			    bold       	FALSE
			    italics    	FALSE
			    underline  	FALSE
			    strike     	FALSE
			    color      	0
			    default_color 	TRUE)
			icon_style 	"Icon"
			fill_color 	16777215
			anchor     	2
			nlines     	2
			max_width  	1928
			justify    	1)
		    width      	1952
		    height     	242
		    annotation 	8
		    autoResize 	TRUE)
		(object InheritView "" @62
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	TRUE
		    line_color 	3947680
		    quidu      	"4C88D11B0091"
		    client     	@61
		    supplier   	@57
		    vertices   	(list Points
			(3945, 2890)
			(3835, 2674))
		    line_style 	0)
		(object UsesView "" @63
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	(object SegLabel @64
			Parent_View 	@63
			location   	(2998, 3064)
			font       	(object Font
			    size       	10
			    face       	"Arial"
			    charSet    	204
			    bold       	FALSE
			    italics    	FALSE
			    underline  	FALSE
			    strike     	FALSE
			    color      	0
			    default_color 	TRUE)
			anchor     	10
			anchor_loc 	1
			nlines     	1
			max_width  	450
			justify    	0
			label      	"<<uses>>"
			pctDist    	0.500000
			height     	120
			orientation 	0)
		    line_color 	3947680
		    quidu      	"4C88D18F03AD"
		    client     	@26
		    supplier   	@61
		    vertices   	(list Points
			(2742, 3228)
			(3292, 3133))
		    line_style 	0)
		(object UsesView "" @65
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	(object SegLabel @66
			Parent_View 	@65
			location   	(4499, 3889)
			font       	(object Font
			    size       	10
			    face       	"Arial"
			    charSet    	204
			    bold       	FALSE
			    italics    	FALSE
			    underline  	FALSE
			    strike     	FALSE
			    color      	0
			    default_color 	TRUE)
			anchor     	10
			anchor_loc 	1
			nlines     	1
			max_width  	450
			justify    	0
			label      	"<<uses>>"
			pctDist    	0.196752
			height     	103
			orientation 	0)
		    line_color 	3947680
		    quidu      	"4C7B7ED601A1"
		    client     	@33
		    supplier   	@34
		    vertices   	(list Points
			(4639, 3905)
			(4344, 3509))
		    line_style 	0)
		(object ClassView "Class" "Logical View::MDProcess::ConfluenceMDChange::ReportSupport::CreateMonthlyReportAction" @67
		    ShowCompartmentStereotypes 	TRUE
		    SuppressAttribute 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    location   	(399, 7803)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	13110000
			default_color 	FALSE)
		    label      	(object ItemLabel
			Parent_View 	@67
			location   	(33, 7775)
			nlines     	1
			max_width  	732
			justify    	0
			label      	"• CreateMonthlyReportAction")
		    stereotype 	(object ItemLabel
			Parent_View 	@67
			location   	(33, 7725)
			anchor     	10
			nlines     	1
			max_width  	732
			justify    	0
			label      	"<<KActionPlugin>>")
		    icon_style 	"Label"
		    line_color 	13110000
		    fill_color 	16777215
		    quidu      	"4BF50E150381"
		    width      	750
		    height     	180
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::CreateDpoUvsMonthlyReport" @68
		    ShowCompartmentStereotypes 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(393, 8154)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@68
			location   	(94, 8125)
			fill_color 	13434879
			nlines     	1
			max_width  	598
			justify    	0
			label      	"• CreateDpoUvsMonthlyReport")
		    stereotype 	(object ItemLabel
			Parent_View 	@68
			location   	(94, 8075)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	598
			justify    	0
			label      	"<<KActionPlugin>>")
		    icon_style 	"Label"
		    fill_color 	15448575
		    quidu      	"4C8F402D015E"
		    width      	616
		    height     	182
		    annotation 	8
		    autoResize 	TRUE)
		(object InheritView "" @69
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	TRUE
		    line_color 	3947680
		    quidu      	"4C8F40C50025"
		    client     	@68
		    supplier   	@67
		    vertices   	(list Points
			(394, 8062)
			(396, 7893))
		    line_style 	0)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::VersionScriptCommandListener" @70
		    ShowCompartmentStereotypes 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(1542, 4218)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@70
			location   	(1236, 4189)
			fill_color 	13434879
			nlines     	1
			max_width  	612
			justify    	0
			label      	"VersionScriptCommandListener")
		    stereotype 	(object ItemLabel
			Parent_View 	@70
			location   	(1236, 4139)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	612
			justify    	0
			label      	"<<KListenerPlugin>>")
		    icon_style 	"Label"
		    fill_color 	15448575
		    quidu      	"4CA9AABD01DF"
		    width      	630
		    height     	182
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::ConfluencePlugins::EventsLog::EventType" @71
		    ShowCompartmentStereotypes 	TRUE
		    SuppressAttribute 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    location   	(2001, 4644)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	2313060
			default_color 	FALSE)
		    label      	(object ItemLabel
			Parent_View 	@71
			location   	(1876, 4616)
			nlines     	1
			max_width  	250
			justify    	0
			label      	"EventType")
		    stereotype 	(object ItemLabel
			Parent_View 	@71
			location   	(1876, 4566)
			anchor     	10
			nlines     	1
			max_width  	250
			justify    	0
			label      	"<<Enum>>")
		    icon_style 	"Label"
		    line_color 	2313060
		    fill_color 	16777215
		    quidu      	"47C4328C0115"
		    width      	268
		    height     	180
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::ConfluencePlugins::EventsLog::EventsLogManager" @72
		    ShowCompartmentStereotypes 	TRUE
		    SuppressAttribute 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    location   	(1731, 5070)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	16714250
			default_color 	FALSE)
		    label      	(object ItemLabel
			Parent_View 	@72
			location   	(1510, 5042)
			nlines     	1
			max_width  	442
			justify    	0
			label      	"• EventsLogManager")
		    stereotype 	(object ItemLabel
			Parent_View 	@72
			location   	(1510, 4992)
			anchor     	10
			nlines     	1
			max_width  	442
			justify    	0
			label      	"<<Interface>>")
		    icon       	"Interface"
		    icon_style 	"Label"
		    line_color 	16714250
		    fill_color 	16777215
		    quidu      	"47C432080163"
		    width      	460
		    height     	180
		    annotation 	8
		    autoResize 	TRUE)
		(object UsesView "" @73
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	(object SegLabel @74
			Parent_View 	@73
			location   	(1794, 4384)
			font       	(object Font
			    size       	10
			    face       	"Arial"
			    charSet    	204
			    bold       	FALSE
			    italics    	FALSE
			    underline  	FALSE
			    strike     	FALSE
			    color      	0
			    default_color 	TRUE)
			anchor     	10
			anchor_loc 	1
			nlines     	1
			max_width  	450
			justify    	0
			label      	"<<uses>>"
			pctDist    	0.456248
			height     	50
			orientation 	0)
		    line_color 	3947680
		    quidu      	"4CA9AB560177"
		    client     	@70
		    supplier   	@71
		    vertices   	(list Points
			(1640, 4309)
			(1904, 4553))
		    line_style 	0)
		(object UsesView "" @75
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	(object SegLabel @76
			Parent_View 	@75
			location   	(1682, 4712)
			font       	(object Font
			    size       	10
			    face       	"Arial"
			    charSet    	204
			    bold       	FALSE
			    italics    	FALSE
			    underline  	FALSE
			    strike     	FALSE
			    color      	0
			    default_color 	TRUE)
			anchor     	10
			anchor_loc 	1
			nlines     	1
			max_width  	450
			justify    	0
			label      	"<<uses>>"
			pctDist    	0.611417
			height     	31
			orientation 	0)
		    line_color 	3947680
		    quidu      	"4CA9AB5C010D"
		    client     	@70
		    supplier   	@72
		    vertices   	(list Points
			(1561, 4309)
			(1710, 4979))
		    line_style 	0)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::SearchUvsQueryForm::AssignedToInVersionsAsValues" @77
		    ShowCompartmentStereotypes 	TRUE
		    SuppressAttribute 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    location   	(315, 3246)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	2313060
			default_color 	FALSE)
		    label      	(object ItemLabel
			Parent_View 	@77
			location   	(9, 3218)
			nlines     	1
			max_width  	612
			justify    	0
			label      	"AssignedToInVersionsAsValues")
		    stereotype 	(object ItemLabel
			Parent_View 	@77
			location   	(9, 3168)
			anchor     	10
			nlines     	1
			max_width  	612
			justify    	0
			label      	"<<Enum>>")
		    icon_style 	"Label"
		    line_color 	2313060
		    fill_color 	16777215
		    quidu      	"4CAD9E51036F"
		    width      	630
		    height     	180
		    annotation 	8
		    autoResize 	TRUE)
		(object UsesView "" @78
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	(object SegLabel @79
			Parent_View 	@78
			location   	(1020, 3404)
			font       	(object Font
			    size       	10
			    face       	"Arial"
			    charSet    	204
			    bold       	FALSE
			    italics    	FALSE
			    underline  	FALSE
			    strike     	FALSE
			    color      	0
			    default_color 	TRUE)
			anchor     	10
			anchor_loc 	1
			nlines     	1
			max_width  	450
			justify    	0
			label      	"<<uses>>"
			pctDist    	0.500000
			height     	120
			orientation 	0)
		    line_color 	3947680
		    quidu      	"4CADA0B60389"
		    client     	@26
		    supplier   	@77
		    vertices   	(list Points
			(1421, 3306)
			(630, 3262))
		    line_style 	0)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::CloseUvsQueryTimerTaskJob" @80
		    ShowCompartmentStereotypes 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(2385, 8982)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@80
			location   	(2075, 8953)
			fill_color 	13434879
			nlines     	1
			max_width  	620
			justify    	0
			label      	"• CloseUvsQueryTimerTaskJob")
		    stereotype 	(object ItemLabel
			Parent_View 	@80
			location   	(2075, 8903)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	620
			justify    	0
			label      	"<<KJobPlugin>>")
		    icon_style 	"Label"
		    fill_color 	15448575
		    quidu      	"4CEBC32A031A"
		    width      	638
		    height     	182
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::RemoveDocCard" @81
		    ShowCompartmentStereotypes 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(3573, 6063)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@81
			location   	(3393, 6034)
			fill_color 	13434879
			nlines     	1
			max_width  	360
			justify    	0
			label      	"RemoveDocCard")
		    stereotype 	(object ItemLabel
			Parent_View 	@81
			location   	(3393, 5984)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	360
			justify    	0
			label      	"<<KActionPlugin>>")
		    icon_style 	"Label"
		    fill_color 	15448575
		    quidu      	"4D0095AC00E6"
		    width      	378
		    height     	182
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::DocCardXPlugin::DocCardXPackage::RemoveDocCard" @82
		    ShowCompartmentStereotypes 	TRUE
		    SuppressAttribute 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    location   	(3204, 6339)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	4944613
			default_color 	FALSE)
		    label      	(object ItemLabel
			Parent_View 	@82
			location   	(3002, 6311)
			nlines     	1
			max_width  	404
			justify    	0
			label      	"• RemoveDocCard")
		    stereotype 	(object ItemLabel
			Parent_View 	@82
			location   	(3002, 6261)
			anchor     	10
			nlines     	1
			max_width  	404
			justify    	0
			label      	"<<XAction>>")
		    icon_style 	"Label"
		    line_color 	4944613
		    fill_color 	16777215
		    quidu      	"4D00976A02F2"
		    width      	422
		    height     	180
		    annotation 	8
		    autoResize 	TRUE)
		(object UsesView "" @83
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	(object SegLabel @84
			Parent_View 	@83
			location   	(3315, 6106)
			font       	(object Font
			    size       	10
			    face       	"Arial"
			    charSet    	204
			    bold       	FALSE
			    italics    	FALSE
			    underline  	FALSE
			    strike     	FALSE
			    color      	0
			    default_color 	TRUE)
			anchor     	10
			anchor_loc 	1
			nlines     	1
			max_width  	450
			justify    	0
			label      	"<<call>>"
			pctDist    	0.500000
			height     	120
			orientation 	0)
		    line_color 	3947680
		    quidu      	"4D0097810113"
		    client     	@82
		    supplier   	@81
		    vertices   	(list Points
			(3322, 6248)
			(3449, 6154))
		    line_style 	0)
		(object ClassView "Class" "Logical View::external::JavaConfluence::ConfluenceClassPack::RemovePageAction" @85
		    ShowCompartmentStereotypes 	TRUE
		    SuppressAttribute 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    location   	(3234, 6606)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	658120
			default_color 	FALSE)
		    label      	(object ItemLabel
			Parent_View 	@85
			location   	(3007, 6578)
			fill_color 	13434879
			nlines     	1
			max_width  	454
			justify    	0
			label      	"• RemovePageAction")
		    stereotype 	(object ItemLabel
			Parent_View 	@85
			location   	(3007, 6528)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	454
			justify    	0
			label      	"<<SimpleClass>>")
		    icon_style 	"Label"
		    line_color 	14803425
		    fill_color 	14803425
		    quidu      	"45DAC96B0157"
		    width      	472
		    height     	180
		    annotation 	8
		    autoResize 	TRUE)
		(object InheritView "" @86
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	TRUE
		    line_color 	3947680
		    quidu      	"4D009A0E00D9"
		    client     	@81
		    supplier   	@85
		    vertices   	(list Points
			(3514, 6154)
			(3288, 6515))
		    line_style 	0)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::RemoveUvsQuery" @87
		    ShowCompartmentStereotypes 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(3549, 6915)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@87
			location   	(3368, 6886)
			fill_color 	13434879
			nlines     	1
			max_width  	362
			justify    	0
			label      	"RemoveUvsQuery")
		    stereotype 	(object ItemLabel
			Parent_View 	@87
			location   	(3368, 6836)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	362
			justify    	0
			label      	"<<KActionPlugin>>")
		    icon_style 	"Label"
		    fill_color 	15448575
		    quidu      	"4D00ABF5021A"
		    width      	380
		    height     	182
		    annotation 	8
		    autoResize 	TRUE)
		(object InheritView "" @88
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	TRUE
		    line_color 	3947680
		    quidu      	"4D00AC280090"
		    client     	@87
		    supplier   	@85
		    vertices   	(list Points
			(3456, 6823)
			(3325, 6696))
		    line_style 	0)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::DocCardXPlugin::DocCardXPackage::RemoveUvsQuery" @89
		    ShowCompartmentStereotypes 	TRUE
		    SuppressAttribute 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    location   	(3009, 6882)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	4944613
			default_color 	FALSE)
		    label      	(object ItemLabel
			Parent_View 	@89
			location   	(2825, 6854)
			nlines     	1
			max_width  	368
			justify    	0
			label      	"RemoveUvsQuery")
		    stereotype 	(object ItemLabel
			Parent_View 	@89
			location   	(2825, 6804)
			anchor     	10
			nlines     	1
			max_width  	368
			justify    	0
			label      	"<<XAction>>")
		    icon_style 	"Label"
		    line_color 	4944613
		    fill_color 	16777215
		    quidu      	"4D00AC53011B"
		    width      	386
		    height     	180
		    annotation 	8
		    autoResize 	TRUE)
		(object UsesView "" @90
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	(object SegLabel @91
			Parent_View 	@90
			location   	(3287, 6778)
			font       	(object Font
			    size       	10
			    face       	"Arial"
			    charSet    	204
			    bold       	FALSE
			    italics    	FALSE
			    underline  	FALSE
			    strike     	FALSE
			    color      	0
			    default_color 	TRUE)
			anchor     	10
			anchor_loc 	1
			nlines     	1
			max_width  	450
			justify    	0
			label      	"<<call>>"
			pctDist    	0.500000
			height     	120
			orientation 	0)
		    line_color 	3947680
		    quidu      	"4D00AC71019F"
		    client     	@89
		    supplier   	@87
		    vertices   	(list Points
			(3202, 6893)
			(3358, 6902))
		    line_style 	0)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::EditDocCardCondition" @92
		    ShowCompartmentStereotypes 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(1935, 5988)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@92
			location   	(1720, 5959)
			fill_color 	13434879
			nlines     	1
			max_width  	430
			justify    	0
			label      	"EditDocCardCondition")
		    stereotype 	(object ItemLabel
			Parent_View 	@92
			location   	(1720, 5909)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	430
			justify    	0
			label      	"<<SimpleClass>>")
		    icon_style 	"Label"
		    fill_color 	12842465
		    quidu      	"4D0085EA0001"
		    width      	448
		    height     	182
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::SearchDocIssuers" @93
		    ShowCompartmentStereotypes 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(3558, 2061)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@93
			location   	(3372, 2032)
			fill_color 	13434879
			nlines     	1
			max_width  	372
			justify    	0
			label      	"SearchDocIssuers")
		    stereotype 	(object ItemLabel
			Parent_View 	@93
			location   	(3372, 1982)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	372
			justify    	0
			label      	"<<KActionPlugin>>")
		    icon_style 	"Label"
		    fill_color 	15448575
		    quidu      	"4D09C6B90102"
		    width      	390
		    height     	182
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::external::ConfluenceSupport::com.atlassian.confluence.pages.actions::CreateBlogPostAction" @94
		    ShowCompartmentStereotypes 	TRUE
		    SuppressAttribute 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    location   	(405, 7323)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	658120
			default_color 	FALSE)
		    label      	(object ItemLabel
			Parent_View 	@94
			location   	(65, 7295)
			fill_color 	13434879
			nlines     	1
			max_width  	680
			justify    	0
			label      	"• CreateBlogPostAction")
		    stereotype 	(object ItemLabel
			Parent_View 	@94
			location   	(65, 7245)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	680
			justify    	0
			label      	"<<SimpleClass>>")
		    icon_style 	"Label"
		    line_color 	14803425
		    fill_color 	14803425
		    quidu      	"4873483A038B"
		    width      	698
		    height     	180
		    annotation 	8
		    autoResize 	TRUE)
		(object InheritView "" @95
		    stereotype 	TRUE
		    line_color 	3342489
		    quidu      	"4BF50E430248"
		    client     	@67
		    supplier   	@94
		    vertices   	(list Points
			(399, 7712)
			(403, 7413))
		    line_style 	0)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::CreateUvsQueryMonthlyReport" @96
		    ShowCompartmentStereotypes 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(1593, 7815)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@96
			location   	(1296, 7786)
			fill_color 	13434879
			nlines     	1
			max_width  	594
			justify    	0
			label      	"CreateUvsQueryMonthlyReport")
		    stereotype 	(object ItemLabel
			Parent_View 	@96
			location   	(1296, 7736)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	594
			justify    	0
			label      	"<<KActionPlugin>>")
		    icon_style 	"Label"
		    fill_color 	15448575
		    quidu      	"4D3D3600026A"
		    width      	612
		    height     	182
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardCommon::DPOUVSManager" @97
		    ShowCompartmentStereotypes 	TRUE
		    SuppressAttribute 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    location   	(2496, 7776)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	16714250
			default_color 	FALSE)
		    label      	(object ItemLabel
			Parent_View 	@97
			location   	(2314, 7748)
			nlines     	1
			max_width  	364
			justify    	0
			label      	"DPOUVSManager")
		    stereotype 	(object ItemLabel
			Parent_View 	@97
			location   	(2314, 7698)
			anchor     	10
			nlines     	1
			max_width  	364
			justify    	0
			label      	"<<Interface>>")
		    icon       	"Interface"
		    icon_style 	"Label"
		    line_color 	16714250
		    fill_color 	16777215
		    quidu      	"4C3FF8CD03C3"
		    width      	382
		    height     	180
		    annotation 	8
		    autoResize 	TRUE)
		(object UsesView "" @98
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	(object SegLabel @99
			Parent_View 	@98
			location   	(2097, 7672)
			font       	(object Font
			    size       	10
			    face       	"Arial"
			    charSet    	204
			    bold       	FALSE
			    italics    	FALSE
			    underline  	FALSE
			    strike     	FALSE
			    color      	0
			    default_color 	TRUE)
			anchor     	10
			anchor_loc 	1
			nlines     	1
			max_width  	450
			justify    	0
			label      	"<<uses>>"
			pctDist    	0.500000
			height     	120
			orientation 	0)
		    line_color 	3342489
		    quidu      	"4D3D369A031F"
		    client     	@96
		    supplier   	@97
		    vertices   	(list Points
			(1899, 7801)
			(2304, 7782))
		    line_style 	0)
		(object InheritView "" @100
		    stereotype 	TRUE
		    line_color 	3342489
		    quidu      	"4D3FC60A03E5"
		    client     	@96
		    supplier   	@67
		    vertices   	(list Points
			(1286, 7811)
			(774, 7806))
		    line_style 	0)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::ReturnInWorkCondition" @101
		    ShowCompartmentStereotypes 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(1098, 1278)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@101
			location   	(877, 1249)
			fill_color 	13434879
			nlines     	1
			max_width  	442
			justify    	0
			label      	"ReturnInWorkCondition")
		    stereotype 	(object ItemLabel
			Parent_View 	@101
			location   	(877, 1199)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	442
			justify    	0
			label      	"<<SimpleClass>>")
		    icon_style 	"Label"
		    fill_color 	12842465
		    quidu      	"4D5E54BD035F"
		    width      	460
		    height     	182
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::ReturnInWorkWebItem" @102
		    ShowCompartmentStereotypes 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(2427, 1167)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@102
			location   	(2181, 1138)
			fill_color 	13434879
			nlines     	1
			max_width  	492
			justify    	0
			label      	"• ReturnInWorkWebItem")
		    stereotype 	(object ItemLabel
			Parent_View 	@102
			location   	(2181, 1088)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	492
			justify    	0
			label      	"<<WebItem>>")
		    icon_style 	"Label"
		    fill_color 	15448575
		    quidu      	"4D5E546002BD"
		    width      	510
		    height     	182
		    annotation 	8
		    autoResize 	TRUE)
		(object AssociationViewNew "$UNNAMED$24" @103
		    location   	(1749, 1222)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	TRUE
		    line_color 	3342489
		    quidu      	"4D5E54F30054"
		    roleview_list 	(list RoleViews
			(object RoleView "$UNNAMED$25" @104
			    Parent_View 	@103
			    location   	(228, -740)
			    font       	(object Font
				size       	10
				face       	"Arial"
				charSet    	204
				bold       	FALSE
				italics    	FALSE
				underline  	FALSE
				strike     	FALSE
				color      	0
				default_color 	TRUE)
			    stereotype 	(object SegLabel @105
				Parent_View 	@104
				location   	(1507, 1111)
				font       	(object Font
				    size       	10
				    face       	"Arial"
				    charSet    	204
				    bold       	FALSE
				    italics    	FALSE
				    underline  	FALSE
				    strike     	FALSE
				    color      	0
				    default_color 	TRUE)
				anchor     	10
				anchor_loc 	1
				nlines     	1
				max_width  	450
				justify    	0
				label      	"<<condition>>"
				pctDist    	0.554472
				height     	131
				orientation 	1)
			    line_color 	3342489
			    quidu      	"4D5E54F3022C"
			    client     	@103
			    supplier   	@101
			    vertices   	(list Points
				(1749, 1222)
				(1328, 1257))
			    line_style 	0)
			(object RoleView "$UNNAMED$26" @106
			    Parent_View 	@103
			    location   	(228, -740)
			    stereotype 	TRUE
			    line_color 	3342489
			    quidu      	"4D5E54F3022E"
			    client     	@103
			    supplier   	@102
			    vertices   	(list Points
				(1749, 1222)
				(2171, 1187))
			    line_style 	0)))
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::SearchFiledsInDepositoryString" @107
		    ShowCompartmentStereotypes 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(3399, 1494)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@107
			location   	(3095, 1465)
			fill_color 	13434879
			nlines     	1
			max_width  	608
			justify    	0
			label      	"SearchFiledsInDepositoryString")
		    stereotype 	(object ItemLabel
			Parent_View 	@107
			location   	(3095, 1415)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	608
			justify    	0
			label      	"<<KActionPlugin>>")
		    icon_style 	"Label"
		    fill_color 	15448575
		    quidu      	"4DD50866035F"
		    width      	626
		    height     	182
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::SendNotificationsInOnAcceptByUOManagerTimerTaskJob" @108
		    ShowCompartmentStereotypes 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(2856, 9210)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@108
			location   	(2151, 9181)
			fill_color 	13434879
			nlines     	1
			max_width  	1410
			justify    	0
			label      	"• SendNotificationsInOnAcceptByUOManagerTimerTaskJob")
		    stereotype 	(object ItemLabel
			Parent_View 	@108
			location   	(2151, 9131)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	1410
			justify    	0
			label      	"<<KJobPlugin>>")
		    icon_style 	"Label"
		    fill_color 	15448575
		    quidu      	"4DE8D7F300AA"
		    width      	1428
		    height     	182
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardChangeDAO::DocCardAttributiesForCreate" @109
		    ShowCompartmentStereotypes 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(3315, 8202)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@109
			location   	(2723, 7495)
			fill_color 	13434879
			nlines     	1
			max_width  	1184
			justify    	0
			label      	"DocCardAttributiesForCreate")
		    stereotype 	(object ItemLabel
			Parent_View 	@109
			location   	(2723, 7445)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	1184
			justify    	0
			label      	"<<SimpleClass>>")
		    icon_style 	"Label"
		    fill_color 	12842465
		    quidu      	"4DF875970221"
		    compartment 	(object Compartment
			Parent_View 	@109
			location   	(2723, 7600)
			font       	(object Font
			    size       	10
			    face       	"Arial"
			    charSet    	204
			    bold       	FALSE
			    italics    	FALSE
			    underline  	FALSE
			    strike     	FALSE
			    color      	0
			    default_color 	TRUE)
			icon_style 	"Icon"
			fill_color 	16777215
			anchor     	2
			nlines     	28
			max_width  	1184
			justify    	1)
		    width      	1202
		    height     	1538
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::NotificationForLeaderUVSTimerTaskJob" @110
		    ShowCompartmentStereotypes 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(1959, 8442)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@110
			location   	(1571, 8413)
			fill_color 	13434879
			nlines     	1
			max_width  	776
			justify    	0
			label      	"• NotificationForLeaderUVSTimerTaskJob")
		    stereotype 	(object ItemLabel
			Parent_View 	@110
			location   	(1571, 8363)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	776
			justify    	0
			label      	"<<KJobPlugin>>")
		    icon_style 	"Label"
		    fill_color 	15448575
		    quidu      	"4E3F830D006B"
		    width      	794
		    height     	182
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::AttachImagesInUvsQueriesTimerTaskJob" @111
		    ShowCompartmentStereotypes 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(2172, 8724)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@111
			location   	(1773, 8695)
			fill_color 	13434879
			nlines     	1
			max_width  	798
			justify    	0
			label      	"• AttachImagesInUvsQueriesTimerTaskJob")
		    stereotype 	(object ItemLabel
			Parent_View 	@111
			location   	(1773, 8645)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	798
			justify    	0
			label      	"<<KJobPlugin>>")
		    icon_style 	"Label"
		    fill_color 	15448575
		    quidu      	"4E5396D7028D"
		    width      	816
		    height     	182
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::SendEmailForExternalAuthorsFromHelpDeskTimerTaskJob" @112
		    ShowCompartmentStereotypes 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(3003, 9675)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@112
			location   	(2273, 9646)
			fill_color 	13434879
			nlines     	1
			max_width  	1460
			justify    	0
			label      	"• SendEmailForExternalAuthorsFromHelpDeskTimerTaskJob")
		    stereotype 	(object ItemLabel
			Parent_View 	@112
			location   	(2273, 9596)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	1460
			justify    	0
			label      	"<<KJobPlugin>>")
		    icon_style 	"Label"
		    fill_color 	15448575
		    quidu      	"4E64913301BF"
		    width      	1478
		    height     	182
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::UvsQueryListener" @113
		    ShowCompartmentStereotypes 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(1455, 7497)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@113
			location   	(1261, 7468)
			fill_color 	13434879
			nlines     	1
			max_width  	388
			justify    	0
			label      	"UvsQueryListener")
		    stereotype 	(object ItemLabel
			Parent_View 	@113
			location   	(1261, 7418)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	388
			justify    	0
			label      	"<<KListenerPlugin>>")
		    icon_style 	"Label"
		    fill_color 	15448575
		    quidu      	"4E8576BF037C"
		    width      	406
		    height     	182
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::CreateLastUvsQueryNumberLifecyclePlugin" @114
		    ShowCompartmentStereotypes 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(1527, 8130)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@114
			location   	(1105, 8100)
			fill_color 	13434879
			nlines     	1
			max_width  	844
			justify    	0
			label      	"• CreateLastUvsQueryNumberLifecyclePlugin")
		    stereotype 	(object ItemLabel
			Parent_View 	@114
			location   	(1105, 8050)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	844
			justify    	0
			label      	"<<KLifecyclePlugin>>")
		    icon_style 	"Label"
		    fill_color 	15448575
		    quidu      	"4E899D120130"
		    width      	862
		    height     	184
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::AssignTopicFromArchi" @115
		    ShowCompartmentStereotypes 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(4362, 7704)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@115
			location   	(4120, 7675)
			fill_color 	13434879
			nlines     	1
			max_width  	484
			justify    	0
			label      	"• AssignTopicFromArchi")
		    stereotype 	(object ItemLabel
			Parent_View 	@115
			location   	(4120, 7625)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	484
			justify    	0
			label      	"<<KActionPlugin>>")
		    icon_style 	"Label"
		    fill_color 	15448575
		    quidu      	"4EBBCB700134"
		    width      	502
		    height     	182
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::ChangeStateForUvsQueryWithAttachedImagesTimerTaskJob" @116
		    ShowCompartmentStereotypes 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(801, 8532)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@116
			location   	(163, 8510)
			fill_color 	13434879
			nlines     	1
			max_width  	1276
			justify    	0
			label      	"• ChangeStateForUvsQueryWithAttachedImagesTimerTaskJob")
		    stereotype 	(object ItemLabel
			Parent_View 	@116
			location   	(163, 8460)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	1276
			justify    	0
			label      	"<<KJobPlugin>>")
		    icon_style 	"Label"
		    fill_color 	15448575
		    quidu      	"4EC21C510257"
		    width      	1294
		    height     	169
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::RemoveOGVCondition" @117
		    ShowCompartmentStereotypes 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(5637, 6681)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@117
			location   	(5422, 6652)
			fill_color 	13434879
			nlines     	1
			max_width  	430
			justify    	0
			label      	"RemoveOGVCondition")
		    stereotype 	(object ItemLabel
			Parent_View 	@117
			location   	(5422, 6602)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	430
			justify    	0
			label      	"<<SimpleClass>>")
		    icon_style 	"Label"
		    fill_color 	12842465
		    quidu      	"4F17B02B029D"
		    width      	448
		    height     	182
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::• RemoveOGVWebItem" @118
		    ShowCompartmentStereotypes 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(4833, 6636)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@118
			location   	(4603, 6607)
			fill_color 	13434879
			nlines     	1
			max_width  	460
			justify    	0
			label      	"• RemoveOGVWebItem")
		    stereotype 	(object ItemLabel
			Parent_View 	@118
			location   	(4603, 6557)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	460
			justify    	0
			label      	"<<WebItem>>")
		    icon_style 	"Label"
		    fill_color 	15448575
		    quidu      	"4F17AE4A00C1"
		    width      	478
		    height     	182
		    annotation 	8
		    autoResize 	TRUE)
		(object AssociationViewNew "$UNNAMED$30" @119
		    location   	(5242, 6657)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	TRUE
		    line_color 	3342489
		    quidu      	"4F17B06001C6"
		    roleview_list 	(list RoleViews
			(object RoleView "$UNNAMED$31" @120
			    Parent_View 	@119
			    location   	(850, -153)
			    font       	(object Font
				size       	10
				face       	"Arial"
				charSet    	204
				bold       	FALSE
				italics    	FALSE
				underline  	FALSE
				strike     	FALSE
				color      	0
				default_color 	TRUE)
			    stereotype 	(object SegLabel @121
				Parent_View 	@120
				location   	(5332, 6743)
				font       	(object Font
				    size       	10
				    face       	"Arial"
				    charSet    	204
				    bold       	FALSE
				    italics    	FALSE
				    underline  	FALSE
				    strike     	FALSE
				    color      	0
				    default_color 	TRUE)
				anchor     	10
				anchor_loc 	1
				nlines     	1
				max_width  	450
				justify    	0
				label      	"<<condition>>"
				pctDist    	0.559532
				height     	80
				orientation 	1)
			    line_color 	3342489
			    quidu      	"4F17B0610292"
			    client     	@119
			    supplier   	@117
			    vertices   	(list Points
				(5242, 6657)
				(5412, 6666))
			    line_style 	0)
			(object RoleView "$UNNAMED$32" @122
			    Parent_View 	@119
			    location   	(850, -153)
			    stereotype 	TRUE
			    line_color 	3342489
			    quidu      	"4F17B0610294"
			    client     	@119
			    supplier   	@118
			    vertices   	(list Points
				(5242, 6657)
				(5072, 6647))
			    line_style 	0)))
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::MoveUvsQueryToAnotherDocCard" @123
		    ShowCompartmentStereotypes 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(3336, 975)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@123
			location   	(3015, 946)
			fill_color 	13434879
			nlines     	1
			max_width  	642
			justify    	0
			label      	"MoveUvsQueryToAnotherDocCard")
		    stereotype 	(object ItemLabel
			Parent_View 	@123
			location   	(3015, 896)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	642
			justify    	0
			label      	"<<KActionPlugin>>")
		    icon_style 	"Label"
		    fill_color 	15448575
		    quidu      	"4F1D06060397"
		    width      	660
		    height     	182
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::MoveUvsQueryCondition" @124
		    ShowCompartmentStereotypes 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(1467, 318)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@124
			location   	(1234, 289)
			fill_color 	13434879
			nlines     	1
			max_width  	466
			justify    	0
			label      	"MoveUvsQueryCondition")
		    stereotype 	(object ItemLabel
			Parent_View 	@124
			location   	(1234, 239)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	466
			justify    	0
			label      	"<<SimpleClass>>")
		    icon_style 	"Label"
		    fill_color 	12842465
		    quidu      	"4F1D06E20220"
		    width      	484
		    height     	182
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::MoveUvsQueryToAntoherDocCardWebItem" @125
		    ShowCompartmentStereotypes 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(1938, 759)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@125
			location   	(1517, 730)
			fill_color 	13434879
			nlines     	1
			max_width  	842
			justify    	0
			label      	"• MoveUvsQueryToAntoherDocCardWebItem")
		    stereotype 	(object ItemLabel
			Parent_View 	@125
			location   	(1517, 680)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	842
			justify    	0
			label      	"<<WebItem>>")
		    icon_style 	"Label"
		    fill_color 	15448575
		    quidu      	"4F1D065800C7"
		    width      	860
		    height     	182
		    annotation 	8
		    autoResize 	TRUE)
		(object AssociationViewNew "$UNNAMED$33" @126
		    location   	(1702, 538)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	TRUE
		    line_color 	3342489
		    quidu      	"4F1D06FA0376"
		    roleview_list 	(list RoleViews
			(object RoleView "$UNNAMED$34" @127
			    Parent_View 	@126
			    location   	(-263, -344)
			    font       	(object Font
				size       	10
				face       	"Arial"
				charSet    	204
				bold       	FALSE
				italics    	FALSE
				underline  	FALSE
				strike     	FALSE
				color      	0
				default_color 	TRUE)
			    stereotype 	(object SegLabel @128
				Parent_View 	@127
				location   	(1545, 544)
				font       	(object Font
				    size       	10
				    face       	"Arial"
				    charSet    	204
				    bold       	FALSE
				    italics    	FALSE
				    underline  	FALSE
				    strike     	FALSE
				    color      	0
				    default_color 	TRUE)
				anchor     	10
				anchor_loc 	1
				nlines     	1
				max_width  	450
				justify    	0
				label      	"<<condition>>"
				pctDist    	0.594673
				height     	112
				orientation 	0)
			    line_color 	3342489
			    quidu      	"4F1D06FB015F"
			    client     	@126
			    supplier   	@124
			    vertices   	(list Points
				(1702, 538)
				(1564, 409))
			    line_style 	0)
			(object RoleView "$UNNAMED$35" @129
			    Parent_View 	@126
			    location   	(-263, -344)
			    stereotype 	TRUE
			    line_color 	3342489
			    quidu      	"4F1D06FB0161"
			    client     	@126
			    supplier   	@125
			    vertices   	(list Points
				(1702, 538)
				(1840, 667))
			    line_style 	0)))
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::DocCardXPlugin::DocCardXPackage::MoveUvsQueryToAnotherDocCard" @130
		    ShowCompartmentStereotypes 	TRUE
		    SuppressAttribute 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    location   	(2922, 639)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	4944613
			default_color 	FALSE)
		    label      	(object ItemLabel
			Parent_View 	@130
			location   	(2570, 611)
			nlines     	1
			max_width  	704
			justify    	0
			label      	"• MoveUvsQueryToAnotherDocCard")
		    stereotype 	(object ItemLabel
			Parent_View 	@130
			location   	(2570, 561)
			anchor     	10
			nlines     	1
			max_width  	704
			justify    	0
			label      	"<<XAction>>")
		    icon_style 	"Label"
		    line_color 	4944613
		    fill_color 	16777215
		    quidu      	"4F1D072E01C5"
		    width      	722
		    height     	180
		    annotation 	8
		    autoResize 	TRUE)
		(object UsesView "" @131
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	(object SegLabel @132
			Parent_View 	@131
			location   	(3215, 793)
			font       	(object Font
			    size       	10
			    face       	"Arial"
			    charSet    	204
			    bold       	FALSE
			    italics    	FALSE
			    underline  	FALSE
			    strike     	FALSE
			    color      	0
			    default_color 	TRUE)
			anchor     	10
			anchor_loc 	1
			nlines     	1
			max_width  	450
			justify    	0
			label      	"<<call>>"
			pctDist    	0.748350
			height     	65
			orientation 	0)
		    line_color 	3342489
		    quidu      	"4F1D075A0232"
		    client     	@130
		    supplier   	@123
		    vertices   	(list Points
			(3032, 729)
			(3223, 883))
		    line_style 	0)
		(object UsesView "" @133
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	(object SegLabel @134
			Parent_View 	@133
			location   	(2450, 577)
			font       	(object Font
			    size       	10
			    face       	"Arial"
			    charSet    	204
			    bold       	FALSE
			    italics    	FALSE
			    underline  	FALSE
			    strike     	FALSE
			    color      	0
			    default_color 	TRUE)
			anchor     	10
			anchor_loc 	1
			nlines     	1
			max_width  	450
			justify    	0
			label      	"<<link>>"
			pctDist    	0.500000
			height     	120
			orientation 	0)
		    line_color 	3342489
		    quidu      	"4F1D122F03B7"
		    client     	@125
		    supplier   	@130
		    vertices   	(list Points
			(2368, 706)
			(2560, 683))
		    line_style 	0)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::SendEmailThenAddDocCardsWithInternet" @135
		    ShowCompartmentStereotypes 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(561, 9180)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@135
			location   	(25, 9151)
			fill_color 	13434879
			nlines     	1
			max_width  	1072
			justify    	0
			label      	"• SendEmailThenAddDocCardsWithInternet")
		    stereotype 	(object ItemLabel
			Parent_View 	@135
			location   	(25, 9101)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	1072
			justify    	0
			label      	"<<KJobPlugin>>")
		    icon_style 	"Label"
		    fill_color 	15448575
		    quidu      	"4F1FB450013E"
		    width      	1090
		    height     	182
		    annotation 	8
		    autoResize 	TRUE)
		(object UsesView "" @136
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	(object SegLabel @137
			Parent_View 	@136
			location   	(2684, 1484)
			font       	(object Font
			    size       	10
			    face       	"Arial"
			    charSet    	204
			    bold       	FALSE
			    italics    	FALSE
			    underline  	FALSE
			    strike     	FALSE
			    color      	0
			    default_color 	TRUE)
			anchor     	10
			anchor_loc 	1
			nlines     	1
			max_width  	450
			justify    	0
			label      	"<<link>>"
			pctDist    	0.500000
			height     	120
			orientation 	0)
		    line_color 	3342489
		    quidu      	"4D5E54B10352"
		    client     	@102
		    supplier   	@23
		    vertices   	(list Points
			(2463, 1258)
			(2684, 1799))
		    line_style 	0)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::DocCardLuceneSearchIndex" @138
		    ShowCompartmentStereotypes 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(4998, 8697)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@138
			location   	(4727, 8668)
			fill_color 	13434879
			nlines     	1
			max_width  	542
			justify    	0
			label      	"DocCardLuceneSearchIndex")
		    stereotype 	(object ItemLabel
			Parent_View 	@138
			location   	(4727, 8618)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	542
			justify    	0
			label      	"<<KActionPlugin>>")
		    icon_style 	"Label"
		    fill_color 	15448575
		    quidu      	"4F99538D0325"
		    width      	560
		    height     	182
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::DocCardLuceneReIndex" @139
		    ShowCompartmentStereotypes 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(4314, 8436)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@139
			location   	(4080, 8407)
			fill_color 	13434879
			nlines     	1
			max_width  	468
			justify    	0
			label      	"DocCardLuceneReIndex")
		    stereotype 	(object ItemLabel
			Parent_View 	@139
			location   	(4080, 8357)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	468
			justify    	0
			label      	"<<KActionPlugin>>")
		    icon_style 	"Label"
		    fill_color 	15448575
		    quidu      	"4F9953C90234"
		    width      	486
		    height     	182
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::ConfluencePlugins::IndexingSupport::GarRussianAnalyzer" @140
		    ShowCompartmentStereotypes 	TRUE
		    SuppressAttribute 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    location   	(4191, 8766)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	705320
			default_color 	FALSE)
		    label      	(object ItemLabel
			Parent_View 	@140
			location   	(3985, 8738)
			nlines     	1
			max_width  	412
			justify    	0
			label      	"GarRussianAnalyzer")
		    stereotype 	(object ItemLabel
			Parent_View 	@140
			location   	(3985, 8688)
			anchor     	10
			nlines     	1
			max_width  	412
			justify    	0
			label      	"<<SimpleClass>>")
		    icon_style 	"Label"
		    line_color 	705320
		    fill_color 	16777215
		    quidu      	"4A714AA4011E"
		    width      	430
		    height     	180
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::DocCardAttributesAnalyzer" @141
		    ShowCompartmentStereotypes 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(4524, 9045)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@141
			location   	(4264, 9016)
			fill_color 	13434879
			nlines     	1
			max_width  	520
			justify    	0
			label      	"DocCardAttributesAnalyzer")
		    stereotype 	(object ItemLabel
			Parent_View 	@141
			location   	(4264, 8966)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	520
			justify    	0
			label      	"<<SimpleClass>>")
		    icon_style 	"Label"
		    fill_color 	12842465
		    quidu      	"4FA11F40020A"
		    width      	538
		    height     	182
		    annotation 	8
		    autoResize 	TRUE)
		(object InheritView "" @142
		    stereotype 	TRUE
		    line_color 	3342489
		    quidu      	"4FA11F50028B"
		    client     	@141
		    supplier   	@140
		    vertices   	(list Points
			(4415, 8953)
			(4299, 8856))
		    line_style 	0)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::ImportSynonymsFromFileToDatabase" @143
		    ShowCompartmentStereotypes 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(2556, 7158)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@143
			location   	(2198, 7129)
			fill_color 	13434879
			nlines     	1
			max_width  	716
			justify    	0
			label      	"ImportSynonymsFromFileToDatabase")
		    stereotype 	(object ItemLabel
			Parent_View 	@143
			location   	(2198, 7079)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	716
			justify    	0
			label      	"<<KActionPlugin>>")
		    icon_style 	"Label"
		    fill_color 	15448575
		    quidu      	"4FAE005F03C8"
		    width      	734
		    height     	182
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::DocCardLuceneSearchServlet" @144
		    ShowCompartmentStereotypes 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(3783, 9474)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@144
			location   	(3482, 9445)
			fill_color 	13434879
			nlines     	1
			max_width  	602
			justify    	0
			label      	"• DocCardLuceneSearchServlet")
		    stereotype 	(object ItemLabel
			Parent_View 	@144
			location   	(3482, 9395)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	602
			justify    	0
			label      	"<<KServletPlugin>>")
		    icon_style 	"Label"
		    fill_color 	15448575
		    quidu      	"4FB4E8F8034D"
		    width      	620
		    height     	182
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::DocCardLuceneReIndexJob" @145
		    ShowCompartmentStereotypes 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(354, 8847)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@145
			location   	(64, 8818)
			fill_color 	13434879
			nlines     	1
			max_width  	580
			justify    	0
			label      	"• DocCardLuceneReIndexJob")
		    stereotype 	(object ItemLabel
			Parent_View 	@145
			location   	(64, 8768)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	580
			justify    	0
			label      	"<<KJobPlugin>>")
		    icon_style 	"Label"
		    fill_color 	15448575
		    quidu      	"4FB621350108"
		    width      	598
		    height     	182
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::SendMailWithNewImagesInTambov" @146
		    ShowCompartmentStereotypes 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(2577, 9933)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@146
			location   	(2221, 9904)
			fill_color 	13434879
			nlines     	1
			max_width  	712
			justify    	0
			label      	"• SendMailWithNewImagesInTambov")
		    stereotype 	(object ItemLabel
			Parent_View 	@146
			location   	(2221, 9854)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	712
			justify    	0
			label      	"<<KJobPlugin>>")
		    icon_style 	"Label"
		    fill_color 	15448575
		    quidu      	"500E426201A0"
		    width      	730
		    height     	182
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::RemoveMailsOnServerOlderMonthJob" @147
		    ShowCompartmentStereotypes 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(1860, 9744)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@147
			location   	(1479, 9715)
			fill_color 	13434879
			nlines     	1
			max_width  	762
			justify    	0
			label      	"• RemoveMailsOnServerOlderMonthJob")
		    stereotype 	(object ItemLabel
			Parent_View 	@147
			location   	(1479, 9665)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	762
			justify    	0
			label      	"<<KJobPlugin>>")
		    icon_style 	"Label"
		    fill_color 	15448575
		    quidu      	"500FD825001E"
		    width      	780
		    height     	182
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::ImportOGVFromFile" @148
		    ShowCompartmentStereotypes 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(4005, 9951)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@148
			location   	(3793, 9922)
			fill_color 	13434879
			nlines     	1
			max_width  	424
			justify    	0
			label      	"• ImportOGVFromFile")
		    stereotype 	(object ItemLabel
			Parent_View 	@148
			location   	(3793, 9872)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	424
			justify    	0
			label      	"<<SimpleClass>>")
		    icon_style 	"Label"
		    fill_color 	12842465
		    quidu      	"501681FA0275"
		    width      	442
		    height     	182
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::IssuerListener" @149
		    ShowCompartmentStereotypes 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(1977, 7386)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@149
			location   	(1783, 7357)
			fill_color 	13434879
			nlines     	1
			max_width  	388
			justify    	0
			label      	"IssuerListener")
		    stereotype 	(object ItemLabel
			Parent_View 	@149
			location   	(1783, 7307)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	388
			justify    	0
			label      	"<<KListenerPlugin>>")
		    icon_style 	"Label"
		    fill_color 	15448575
		    quidu      	"502A4ED50374"
		    width      	406
		    height     	182
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::CreateOGV" @150
		    ShowCompartmentStereotypes 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(4578, 9633)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@150
			location   	(4398, 9604)
			fill_color 	13434879
			nlines     	1
			max_width  	360
			justify    	0
			label      	"CreateOGV")
		    stereotype 	(object ItemLabel
			Parent_View 	@150
			location   	(4398, 9554)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	360
			justify    	0
			label      	"<<KActionPlugin>>")
		    icon_style 	"Label"
		    fill_color 	15448575
		    quidu      	"504DBBDC01C3"
		    width      	378
		    height     	182
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::ConfluencePlugins::EntitySupport::CreateEntity" @151
		    ShowCompartmentStereotypes 	TRUE
		    SuppressAttribute 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    location   	(4302, 9300)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	TRUE
			underline  	FALSE
			strike     	FALSE
			color      	13110000
			default_color 	FALSE)
		    label      	(object ItemLabel
			Parent_View 	@151
			location   	(4122, 9272)
			nlines     	1
			max_width  	360
			justify    	0
			label      	"• CreateEntity")
		    stereotype 	(object ItemLabel
			Parent_View 	@151
			location   	(4122, 9222)
			anchor     	10
			nlines     	1
			max_width  	360
			justify    	0
			label      	"<<KActionPlugin>>")
		    icon_style 	"Label"
		    line_color 	13110000
		    fill_color 	16777215
		    quidu      	"4B1F4A2F0260"
		    width      	378
		    height     	180
		    annotation 	8
		    autoResize 	TRUE)
		(object InheritView "" @152
		    stereotype 	TRUE
		    line_color 	3342489
		    quidu      	"4B1FBE0B02B0"
		    client     	@151
		    supplier   	@10
		    vertices   	(list Points
			(4255, 9209)
			(336, 1530))
		    line_style 	0)
		(object InheritView "" @153
		    stereotype 	TRUE
		    line_color 	3342489
		    quidu      	"504DBC39033F"
		    client     	@150
		    supplier   	@151
		    vertices   	(list Points
			(4503, 9541)
			(4377, 9390))
		    line_style 	0)
		(object ClassView "Class" "Logical View::external::ConfluenceSupport::com.atlassian.confluence.plugin.descriptor.web.conditions::BaseConfluenceCondition" @154
		    ShowCompartmentStereotypes 	TRUE
		    SuppressAttribute 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    location   	(4740, 7428)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	658120
			default_color 	FALSE)
		    label      	(object ItemLabel
			Parent_View 	@154
			location   	(4267, 7400)
			fill_color 	13434879
			nlines     	1
			max_width  	946
			justify    	0
			label      	"• BaseConfluenceCondition")
		    stereotype 	(object ItemLabel
			Parent_View 	@154
			location   	(4267, 7350)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	946
			justify    	0
			label      	"<<SimpleClass>>")
		    icon_style 	"Label"
		    line_color 	14803425
		    fill_color 	14803425
		    quidu      	"4A53516B029A"
		    width      	964
		    height     	180
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::AddOGVCondition" @155
		    ShowCompartmentStereotypes 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(5631, 9252)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@155
			location   	(5446, 9223)
			fill_color 	13434879
			nlines     	1
			max_width  	370
			justify    	0
			label      	"AddOGVCondition")
		    stereotype 	(object ItemLabel
			Parent_View 	@155
			location   	(5446, 9173)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	370
			justify    	0
			label      	"<<SimpleClass>>")
		    icon_style 	"Label"
		    fill_color 	12842465
		    quidu      	"504DBC60021C"
		    width      	388
		    height     	182
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::AddOGVWebItem" @156
		    ShowCompartmentStereotypes 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(5502, 9633)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@156
			location   	(5314, 9604)
			fill_color 	13434879
			nlines     	1
			max_width  	376
			justify    	0
			label      	"• AddOGVWebItem")
		    stereotype 	(object ItemLabel
			Parent_View 	@156
			location   	(5314, 9554)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	376
			justify    	0
			label      	"<<WebItem>>")
		    icon_style 	"Label"
		    fill_color 	15448575
		    quidu      	"504DBBFE0042"
		    width      	394
		    height     	182
		    annotation 	8
		    autoResize 	TRUE)
		(object AssociationViewNew "$UNNAMED$36" @157
		    location   	(5565, 9442)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	TRUE
		    line_color 	3342489
		    quidu      	"504DBC8302C6"
		    roleview_list 	(list RoleViews
			(object RoleView "$UNNAMED$37" @158
			    Parent_View 	@157
			    location   	(495, -263)
			    font       	(object Font
				size       	10
				face       	"Arial"
				charSet    	204
				bold       	FALSE
				italics    	FALSE
				underline  	FALSE
				strike     	FALSE
				color      	0
				default_color 	TRUE)
			    stereotype 	(object SegLabel @159
				Parent_View 	@158
				location   	(5374, 9426)
				font       	(object Font
				    size       	10
				    face       	"Arial"
				    charSet    	204
				    bold       	FALSE
				    italics    	FALSE
				    underline  	FALSE
				    strike     	FALSE
				    color      	0
				    default_color 	TRUE)
				anchor     	10
				anchor_loc 	1
				nlines     	1
				max_width  	450
				justify    	0
				label      	"<<condition>>"
				pctDist    	-0.456563
				height     	187
				orientation 	0)
			    line_color 	3342489
			    quidu      	"504DBC8400C5"
			    client     	@157
			    supplier   	@155
			    vertices   	(list Points
				(5565, 9442)
				(5599, 9343))
			    line_style 	0)
			(object RoleView "$UNNAMED$38" @160
			    Parent_View 	@157
			    location   	(495, -263)
			    stereotype 	TRUE
			    line_color 	3342489
			    quidu      	"504DBC8400C7"
			    client     	@157
			    supplier   	@156
			    vertices   	(list Points
				(5565, 9442)
				(5531, 9541))
			    line_style 	0)))
		(object InheritView "" @161
		    stereotype 	TRUE
		    line_color 	3342489
		    quidu      	"504DBC8B0102"
		    client     	@155
		    supplier   	@154
		    vertices   	(list Points
			(5586, 9160)
			(4783, 7518))
		    line_style 	0)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::DocCardXPlugin::DocCardXPackage::CreateOGV" @162
		    ShowCompartmentStereotypes 	TRUE
		    SuppressAttribute 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    location   	(4977, 9261)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	4944613
			default_color 	FALSE)
		    label      	(object ItemLabel
			Parent_View 	@162
			location   	(4793, 9233)
			nlines     	1
			max_width  	368
			justify    	0
			label      	"CreateOGV")
		    stereotype 	(object ItemLabel
			Parent_View 	@162
			location   	(4793, 9183)
			anchor     	10
			nlines     	1
			max_width  	368
			justify    	0
			label      	"<<XAction>>")
		    icon_style 	"Label"
		    line_color 	4944613
		    fill_color 	16777215
		    quidu      	"504DBDDA02BD"
		    width      	386
		    height     	180
		    annotation 	8
		    autoResize 	TRUE)
		(object UsesView "" @163
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	(object SegLabel @164
			Parent_View 	@163
			location   	(4858, 9534)
			font       	(object Font
			    size       	10
			    face       	"Arial"
			    charSet    	204
			    bold       	FALSE
			    italics    	FALSE
			    underline  	FALSE
			    strike     	FALSE
			    color      	0
			    default_color 	TRUE)
			anchor     	10
			anchor_loc 	1
			nlines     	1
			max_width  	450
			justify    	0
			label      	"<<call>>"
			pctDist    	0.500000
			height     	120
			orientation 	0)
		    line_color 	3342489
		    quidu      	"504DBE190345"
		    client     	@162
		    supplier   	@150
		    vertices   	(list Points
			(4880, 9351)
			(4674, 9541))
		    line_style 	0)
		(object UsesView "" @165
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	(object SegLabel @166
			Parent_View 	@165
			location   	(5170, 9544)
			font       	(object Font
			    size       	10
			    face       	"Arial"
			    charSet    	204
			    bold       	FALSE
			    italics    	FALSE
			    underline  	FALSE
			    strike     	FALSE
			    color      	0
			    default_color 	TRUE)
			anchor     	10
			anchor_loc 	1
			nlines     	1
			max_width  	450
			justify    	0
			label      	"<<link>>"
			pctDist    	0.500000
			height     	120
			orientation 	0)
		    line_color 	3342489
		    quidu      	"504DD188038F"
		    client     	@156
		    supplier   	@162
		    vertices   	(list Points
			(5373, 9541)
			(5103, 9351))
		    line_style 	0)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::EditUvsQueryCondition" @167
		    ShowCompartmentStereotypes 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(423, 6384)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@167
			location   	(198, 6355)
			fill_color 	13434879
			nlines     	1
			max_width  	450
			justify    	0
			label      	"EditUvsQueryCondition")
		    stereotype 	(object ItemLabel
			Parent_View 	@167
			location   	(198, 6305)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	450
			justify    	0
			label      	"<<SimpleClass>>")
		    icon_style 	"Label"
		    fill_color 	12842465
		    quidu      	"4D00AA9B0119"
		    width      	468
		    height     	182
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::RemoveUvsQueryWebItem" @168
		    ShowCompartmentStereotypes 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(2325, 6696)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@168
			location   	(2029, 6667)
			fill_color 	13434879
			nlines     	1
			max_width  	592
			justify    	0
			label      	"• RemoveUvsQueryWebItem")
		    stereotype 	(object ItemLabel
			Parent_View 	@168
			location   	(2029, 6617)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	592
			justify    	0
			label      	"<<WebItem>>")
		    icon_style 	"Label"
		    fill_color 	15448575
		    quidu      	"4D00AAE20043"
		    width      	610
		    height     	182
		    annotation 	8
		    autoResize 	TRUE)
		(object AssociationViewNew "$UNNAMED$13" @169
		    location   	(1338, 6533)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	TRUE
		    line_color 	3947680
		    quidu      	"4D00AB0C031F"
		    roleview_list 	(list RoleViews
			(object RoleView "$UNNAMED$14" @170
			    Parent_View 	@169
			    location   	(-207, -214)
			    font       	(object Font
				size       	10
				face       	"Arial"
				charSet    	204
				bold       	FALSE
				italics    	FALSE
				underline  	FALSE
				strike     	FALSE
				color      	0
				default_color 	TRUE)
			    stereotype 	(object SegLabel @171
				Parent_View 	@170
				location   	(1310, 6583)
				font       	(object Font
				    size       	10
				    face       	"Arial"
				    charSet    	204
				    bold       	FALSE
				    italics    	FALSE
				    underline  	FALSE
				    strike     	FALSE
				    color      	0
				    default_color 	TRUE)
				anchor     	10
				anchor_loc 	1
				nlines     	1
				max_width  	450
				justify    	0
				label      	"<<condition>>"
				pctDist    	0.030172
				height     	54
				orientation 	0)
			    line_color 	3342489
			    quidu      	"4D00AB0D023B"
			    client     	@169
			    supplier   	@167
			    vertices   	(list Points
				(1338, 6533)
				(657, 6421))
			    line_style 	0)
			(object RoleView "$UNNAMED$15" @172
			    Parent_View 	@169
			    location   	(-207, -214)
			    stereotype 	TRUE
			    line_color 	3342489
			    quidu      	"4D00AB0D023D"
			    client     	@169
			    supplier   	@168
			    vertices   	(list Points
				(1338, 6533)
				(2019, 6644))
			    line_style 	0)))
		(object UsesView "" @173
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	(object SegLabel @174
			Parent_View 	@173
			location   	(2734, 6745)
			font       	(object Font
			    size       	10
			    face       	"Arial"
			    charSet    	204
			    bold       	FALSE
			    italics    	FALSE
			    underline  	FALSE
			    strike     	FALSE
			    color      	0
			    default_color 	TRUE)
			anchor     	10
			anchor_loc 	1
			nlines     	1
			max_width  	450
			justify    	0
			label      	"<<link>>"
			pctDist    	0.477093
			height     	60
			orientation 	0)
		    line_color 	3947680
		    quidu      	"4D00AC89013C"
		    client     	@168
		    supplier   	@89
		    vertices   	(list Points
			(2630, 6778)
			(2815, 6828))
		    line_style 	0)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::DpoUvsRemovePermissionCondition" @175
		    ShowCompartmentStereotypes 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(1596, 7074)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@175
			location   	(1253, 7045)
			fill_color 	13434879
			nlines     	1
			max_width  	686
			justify    	0
			label      	"DpoUvsRemovePermissionCondition")
		    stereotype 	(object ItemLabel
			Parent_View 	@175
			location   	(1253, 6995)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	686
			justify    	0
			label      	"<<SimpleClass>>")
		    icon_style 	"Label"
		    fill_color 	12842465
		    quidu      	"4D00DD250344"
		    width      	704
		    height     	182
		    annotation 	8
		    autoResize 	TRUE)
		(object AssociationViewNew "$UNNAMED$16" @176
		    location   	(1957, 6884)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	TRUE
		    line_color 	3947680
		    quidu      	"4D00DD510260"
		    roleview_list 	(list RoleViews
			(object RoleView "$UNNAMED$17" @177
			    Parent_View 	@176
			    location   	(412, 137)
			    font       	(object Font
				size       	10
				face       	"Arial"
				charSet    	204
				bold       	FALSE
				italics    	FALSE
				underline  	FALSE
				strike     	FALSE
				color      	0
				default_color 	TRUE)
			    stereotype 	(object SegLabel @178
				Parent_View 	@177
				location   	(2063, 6975)
				font       	(object Font
				    size       	10
				    face       	"Arial"
				    charSet    	204
				    bold       	FALSE
				    italics    	FALSE
				    underline  	FALSE
				    strike     	FALSE
				    color      	0
				    default_color 	TRUE)
				anchor     	10
				anchor_loc 	1
				nlines     	1
				max_width  	450
				justify    	0
				label      	"<<condition>>"
				pctDist    	-0.256513
				height     	129
				orientation 	0)
			    line_color 	3342489
			    quidu      	"4D00DD52011C"
			    client     	@176
			    supplier   	@175
			    vertices   	(list Points
				(1957, 6884)
				(1766, 6982))
			    line_style 	0)
			(object RoleView "$UNNAMED$18" @179
			    Parent_View 	@176
			    location   	(412, 137)
			    stereotype 	TRUE
			    line_color 	3342489
			    quidu      	"4D00DD52033E"
			    client     	@176
			    supplier   	@168
			    vertices   	(list Points
				(1957, 6884)
				(2146, 6787))
			    line_style 	0)))
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::RemoveDocCardCondition" @180
		    ShowCompartmentStereotypes 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(1557, 6180)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@180
			location   	(1307, 6151)
			fill_color 	13434879
			nlines     	1
			max_width  	500
			justify    	0
			label      	"RemoveDocCardCondition")
		    stereotype 	(object ItemLabel
			Parent_View 	@180
			location   	(1307, 6101)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	500
			justify    	0
			label      	"<<SimpleClass>>")
		    icon_style 	"Label"
		    fill_color 	12842465
		    quidu      	"506AEBF102BE"
		    width      	518
		    height     	182
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::RemoveDocCardWebItem" @181
		    ShowCompartmentStereotypes 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(2328, 6459)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@181
			location   	(2055, 6430)
			fill_color 	13434879
			nlines     	1
			max_width  	546
			justify    	0
			label      	"• RemoveDocCardWebItem")
		    stereotype 	(object ItemLabel
			Parent_View 	@181
			location   	(2055, 6380)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	546
			justify    	0
			label      	"<<WebItem>>")
		    icon_style 	"Label"
		    fill_color 	15448575
		    quidu      	"4D00900B026C"
		    width      	564
		    height     	182
		    annotation 	8
		    autoResize 	TRUE)
		(object UsesView "" @182
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	(object SegLabel @183
			Parent_View 	@182
			location   	(2786, 6344)
			font       	(object Font
			    size       	10
			    face       	"Arial"
			    charSet    	204
			    bold       	FALSE
			    italics    	FALSE
			    underline  	FALSE
			    strike     	FALSE
			    color      	0
			    default_color 	TRUE)
			anchor     	10
			anchor_loc 	1
			nlines     	1
			max_width  	450
			justify    	0
			label      	"<<link>>"
			pctDist    	0.477527
			height     	51
			orientation 	0)
		    line_color 	3947680
		    quidu      	"4D00981600D2"
		    client     	@181
		    supplier   	@82
		    vertices   	(list Points
			(2610, 6419)
			(2992, 6367))
		    line_style 	0)
		(object AssociationViewNew "$UNNAMED$19" @184
		    location   	(1959, 6766)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	TRUE
		    line_color 	3947680
		    quidu      	"4D00DD660333"
		    roleview_list 	(list RoleViews
			(object RoleView "$UNNAMED$20" @185
			    Parent_View 	@184
			    location   	(180, 403)
			    font       	(object Font
				size       	10
				face       	"Arial"
				charSet    	204
				bold       	FALSE
				italics    	FALSE
				underline  	FALSE
				strike     	FALSE
				color      	0
				default_color 	TRUE)
			    stereotype 	(object SegLabel @186
				Parent_View 	@185
				location   	(1950, 6933)
				font       	(object Font
				    size       	10
				    face       	"Arial"
				    charSet    	204
				    bold       	FALSE
				    italics    	FALSE
				    underline  	FALSE
				    strike     	FALSE
				    color      	0
				    default_color 	TRUE)
				anchor     	10
				anchor_loc 	1
				nlines     	1
				max_width  	450
				justify    	0
				label      	"<<condition>>"
				pctDist    	0.344740
				height     	122
				orientation 	0)
			    line_color 	3342489
			    quidu      	"4D00DD6701FA"
			    client     	@184
			    supplier   	@175
			    vertices   	(list Points
				(1959, 6766)
				(1701, 6982))
			    line_style 	0)
			(object RoleView "$UNNAMED$21" @187
			    Parent_View 	@184
			    location   	(180, 403)
			    stereotype 	TRUE
			    line_color 	3342489
			    quidu      	"4D00DD670357"
			    client     	@184
			    supplier   	@181
			    vertices   	(list Points
				(1959, 6766)
				(2215, 6550))
			    line_style 	0)))
		(object AssociationViewNew "$UNNAMED$39" @188
		    location   	(1945, 6319)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	TRUE
		    line_color 	3342489
		    quidu      	"506AEC2103A6"
		    roleview_list 	(list RoleViews
			(object RoleView "$UNNAMED$40" @189
			    Parent_View 	@188
			    location   	(-383, -140)
			    font       	(object Font
				size       	10
				face       	"Arial"
				charSet    	204
				bold       	FALSE
				italics    	FALSE
				underline  	FALSE
				strike     	FALSE
				color      	0
				default_color 	TRUE)
			    stereotype 	(object SegLabel @190
				Parent_View 	@189
				location   	(1838, 6408)
				font       	(object Font
				    size       	10
				    face       	"Arial"
				    charSet    	204
				    bold       	FALSE
				    italics    	FALSE
				    underline  	FALSE
				    strike     	FALSE
				    color      	0
				    default_color 	TRUE)
				anchor     	10
				anchor_loc 	1
				nlines     	1
				max_width  	450
				justify    	0
				label      	"<<condition>>"
				pctDist    	0.500000
				height     	120
				orientation 	0)
			    line_color 	3342489
			    quidu      	"506AEC2202BC"
			    client     	@188
			    supplier   	@180
			    vertices   	(list Points
				(1945, 6319)
				(1814, 6271))
			    line_style 	0)
			(object RoleView "$UNNAMED$41" @191
			    Parent_View 	@188
			    location   	(-383, -140)
			    stereotype 	TRUE
			    line_color 	3342489
			    quidu      	"506AEC2202BE"
			    client     	@188
			    supplier   	@181
			    vertices   	(list Points
				(1945, 6319)
				(2081, 6367))
			    line_style 	0)))
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::CreateDocCardIndexEveryNightJob" @192
		    ShowCompartmentStereotypes 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(2004, 10134)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@192
			location   	(1672, 10105)
			fill_color 	13434879
			nlines     	1
			max_width  	664
			justify    	0
			label      	"CreateDocCardIndexEveryNightJob")
		    stereotype 	(object ItemLabel
			Parent_View 	@192
			location   	(1672, 10055)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	664
			justify    	0
			label      	"<<KJobPlugin>>")
		    icon_style 	"Label"
		    fill_color 	15448575
		    quidu      	"50754E11019B"
		    width      	682
		    height     	182
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::ChangeIncludeInVersionDate" @193
		    ShowCompartmentStereotypes 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(3357, 9972)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@193
			location   	(3078, 9943)
			fill_color 	13434879
			nlines     	1
			max_width  	558
			justify    	0
			label      	"ChangeIncludeInVersionDate")
		    stereotype 	(object ItemLabel
			Parent_View 	@193
			location   	(3078, 9893)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	558
			justify    	0
			label      	"<<KActionPlugin>>")
		    icon_style 	"Label"
		    fill_color 	15448575
		    quidu      	"50F53B25033A"
		    width      	576
		    height     	182
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::ShowErrorsInJobsForRequest" @194
		    ShowCompartmentStereotypes 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(5334, 10011)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@194
			location   	(5050, 9982)
			fill_color 	13434879
			nlines     	1
			max_width  	568
			justify    	0
			label      	"ShowErrorsInJobsForRequest")
		    stereotype 	(object ItemLabel
			Parent_View 	@194
			location   	(5050, 9932)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	568
			justify    	0
			label      	"<<SimpleClass>>")
		    icon_style 	"Label"
		    fill_color 	12842465
		    quidu      	"50FF93940114"
		    width      	586
		    height     	182
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::AddOgvsFromOppEveryNight" @195
		    ShowCompartmentStereotypes 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(318, 9756)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@195
			location   	(20, 9727)
			fill_color 	13434879
			nlines     	1
			max_width  	596
			justify    	0
			label      	"• AddOgvsFromOppEveryNight")
		    stereotype 	(object ItemLabel
			Parent_View 	@195
			location   	(20, 9677)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	596
			justify    	0
			label      	"<<KJobPlugin>>")
		    icon_style 	"Label"
		    fill_color 	15448575
		    quidu      	"510B9C6B00FB"
		    width      	614
		    height     	182
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::GardocExtractor" @196
		    ShowCompartmentStereotypes 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(4602, 10083)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@196
			location   	(4396, 10054)
			fill_color 	13434879
			nlines     	1
			max_width  	412
			justify    	0
			label      	"• GardocExtractor")
		    stereotype 	(object ItemLabel
			Parent_View 	@196
			location   	(4396, 10004)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	409
			justify    	0
			label      	"<<KExtractorPlugin>>")
		    icon_style 	"Label"
		    fill_color 	15448575
		    quidu      	"512C95E000CF"
		    width      	430
		    height     	182
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::ConfluenceMDChange::RequestSupport::RequestExtractor" @197
		    ShowCompartmentStereotypes 	TRUE
		    SuppressAttribute 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    location   	(4620, 10434)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	13110000
			default_color 	FALSE)
		    label      	(object ItemLabel
			Parent_View 	@197
			location   	(4414, 10406)
			nlines     	1
			max_width  	412
			justify    	0
			label      	"RequestExtractor")
		    stereotype 	(object ItemLabel
			Parent_View 	@197
			location   	(4414, 10356)
			anchor     	10
			nlines     	1
			max_width  	409
			justify    	0
			label      	"<<KExtractorPlugin>>")
		    icon_style 	"Label"
		    line_color 	13110000
		    fill_color 	16777215
		    quidu      	"478C52A902A4"
		    width      	430
		    height     	180
		    annotation 	8
		    autoResize 	TRUE)
		(object InheritView "" @198
		    stereotype 	TRUE
		    line_color 	3342489
		    quidu      	"512C969B03D5"
		    client     	@196
		    supplier   	@197
		    vertices   	(list Points
			(4606, 10174)
			(4614, 10343))
		    line_style 	0)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::AddUvsQueryCondition" @199
		    ShowCompartmentStereotypes 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(795, 1527)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@199
			location   	(571, 1498)
			fill_color 	13434879
			nlines     	1
			max_width  	448
			justify    	0
			label      	"AddUvsQueryCondition")
		    stereotype 	(object ItemLabel
			Parent_View 	@199
			location   	(571, 1448)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	448
			justify    	0
			label      	"<<SimpleClass>>")
		    icon_style 	"Label"
		    fill_color 	12842465
		    quidu      	"4C762A2702EB"
		    width      	466
		    height     	182
		    annotation 	8
		    autoResize 	TRUE)
		(object InheritView "" @200
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	TRUE
		    line_color 	3947680
		    quidu      	"4C762A880342"
		    client     	@199
		    supplier   	@22
		    vertices   	(list Points
			(697, 1618)
			(403, 1900))
		    line_style 	0)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::AddUvsQueryWebItem" @201
		    ShowCompartmentStereotypes 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(1560, 2091)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@201
			location   	(1312, 2062)
			fill_color 	13434879
			nlines     	1
			max_width  	496
			justify    	0
			label      	"• AddUvsQueryWebItem")
		    stereotype 	(object ItemLabel
			Parent_View 	@201
			location   	(1312, 2012)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	496
			justify    	0
			label      	"<<WebItem>>")
		    icon_style 	"Label"
		    fill_color 	15448575
		    quidu      	"4C762ADB00FB"
		    width      	514
		    height     	182
		    annotation 	8
		    autoResize 	TRUE)
		(object UsesView "" @202
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	(object SegLabel @203
			Parent_View 	@202
			location   	(2169, 1925)
			font       	(object Font
			    size       	10
			    face       	"Arial"
			    charSet    	204
			    bold       	FALSE
			    italics    	FALSE
			    underline  	FALSE
			    strike     	FALSE
			    color      	0
			    default_color 	TRUE)
			anchor     	10
			anchor_loc 	1
			nlines     	1
			max_width  	450
			justify    	0
			label      	"<<link>>"
			pctDist    	0.520993
			height     	60
			orientation 	0)
		    line_color 	3947680
		    quidu      	"4C762C6C0053"
		    client     	@201
		    supplier   	@23
		    vertices   	(list Points
			(1817, 2045)
			(2511, 1925))
		    line_style 	0)
		(object AssociationViewNew "$UNNAMED$6" @204
		    location   	(1178, 1808)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	TRUE
		    line_color 	3947680
		    quidu      	"4C762B0201B1"
		    roleview_list 	(list RoleViews
			(object RoleView "$UNNAMED$7" @205
			    Parent_View 	@204
			    location   	(-460, -664)
			    font       	(object Font
				size       	10
				face       	"Arial"
				charSet    	204
				bold       	FALSE
				italics    	FALSE
				underline  	FALSE
				strike     	FALSE
				color      	0
				default_color 	TRUE)
			    stereotype 	(object SegLabel @206
				Parent_View 	@205
				location   	(1135, 1866)
				font       	(object Font
				    size       	10
				    face       	"Arial"
				    charSet    	204
				    bold       	FALSE
				    italics    	FALSE
				    underline  	FALSE
				    strike     	FALSE
				    color      	0
				    default_color 	TRUE)
				anchor     	10
				anchor_loc 	1
				nlines     	1
				max_width  	450
				justify    	0
				label      	"<<condition>>"
				pctDist    	0.004189
				height     	73
				orientation 	0)
			    line_color 	3342489
			    quidu      	"4C762B030052"
			    client     	@204
			    supplier   	@199
			    vertices   	(list Points
				(1178, 1808)
				(920, 1618))
			    line_style 	0)
			(object RoleView "$UNNAMED$8" @207
			    Parent_View 	@204
			    location   	(-460, -664)
			    stereotype 	TRUE
			    line_color 	3342489
			    quidu      	"4C762B030054"
			    client     	@204
			    supplier   	@201
			    vertices   	(list Points
				(1178, 1808)
				(1437, 1999))
			    line_style 	0)))
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::MoveCopyToAnotherUvsQuery" @208
		    ShowCompartmentStereotypes 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(918, 6729)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@208
			location   	(627, 6700)
			fill_color 	13434879
			nlines     	1
			max_width  	582
			justify    	0
			label      	"MoveCopyToAnotherUvsQuery")
		    stereotype 	(object ItemLabel
			Parent_View 	@208
			location   	(627, 6650)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	582
			justify    	0
			label      	"<<KActionPlugin>>")
		    icon_style 	"Label"
		    fill_color 	15448575
		    quidu      	"5187AC54013E"
		    width      	600
		    height     	182
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::MoveCopyCondition" @209
		    ShowCompartmentStereotypes 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(327, 6720)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@209
			location   	(126, 6691)
			fill_color 	13434879
			nlines     	1
			max_width  	402
			justify    	0
			label      	"MoveCopyCondition")
		    stereotype 	(object ItemLabel
			Parent_View 	@209
			location   	(126, 6641)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	402
			justify    	0
			label      	"<<SimpleClass>>")
		    icon_style 	"Label"
		    fill_color 	12842465
		    quidu      	"5187AC8700A3"
		    width      	420
		    height     	182
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::MoveCopyToAnotherUvsQueryWebItem" @210
		    ShowCompartmentStereotypes 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(408, 7050)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@210
			location   	(22, 7021)
			fill_color 	13434879
			nlines     	1
			max_width  	772
			justify    	0
			label      	"• MoveCopyToAnotherUvsQueryWebItem")
		    stereotype 	(object ItemLabel
			Parent_View 	@210
			location   	(22, 6971)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	772
			justify    	0
			label      	"<<WebItem>>")
		    icon_style 	"Label"
		    fill_color 	15448575
		    quidu      	"5187ABCA02A6"
		    width      	790
		    height     	182
		    annotation 	8
		    autoResize 	TRUE)
		(object AssociationViewNew "$UNNAMED$42" @211
		    location   	(366, 6884)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	TRUE
		    line_color 	3342489
		    quidu      	"5187ACC20305"
		    roleview_list 	(list RoleViews
			(object RoleView "$UNNAMED$43" @212
			    Parent_View 	@211
			    location   	(-219, -148)
			    font       	(object Font
				size       	10
				face       	"Arial"
				charSet    	204
				bold       	FALSE
				italics    	FALSE
				underline  	FALSE
				strike     	FALSE
				color      	0
				default_color 	TRUE)
			    stereotype 	(object SegLabel @213
				Parent_View 	@212
				location   	(241, 6877)
				font       	(object Font
				    size       	10
				    face       	"Arial"
				    charSet    	204
				    bold       	FALSE
				    italics    	FALSE
				    underline  	FALSE
				    strike     	FALSE
				    color      	0
				    default_color 	TRUE)
				anchor     	10
				anchor_loc 	1
				nlines     	1
				max_width  	450
				justify    	0
				label      	"<<condition>>"
				pctDist    	0.500000
				height     	120
				orientation 	0)
			    line_color 	3342489
			    quidu      	"5187ACC30117"
			    client     	@211
			    supplier   	@209
			    vertices   	(list Points
				(366, 6884)
				(347, 6811))
			    line_style 	0)
			(object RoleView "$UNNAMED$44" @214
			    Parent_View 	@211
			    location   	(-219, -148)
			    stereotype 	TRUE
			    line_color 	3342489
			    quidu      	"5187ACC30119"
			    client     	@211
			    supplier   	@210
			    vertices   	(list Points
				(366, 6884)
				(384, 6958))
			    line_style 	0)))
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::DocCardXPlugin::DocCardXPackage::MoveCopyToAnotherUvsQuery" @215
		    ShowCompartmentStereotypes 	TRUE
		    SuppressAttribute 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    location   	(1338, 7347)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	4944613
			default_color 	FALSE)
		    label      	(object ItemLabel
			Parent_View 	@215
			location   	(1019, 7319)
			nlines     	1
			max_width  	638
			justify    	0
			label      	"• MoveCopyToAnotherUvsQuery")
		    stereotype 	(object ItemLabel
			Parent_View 	@215
			location   	(1019, 7269)
			anchor     	10
			nlines     	1
			max_width  	638
			justify    	0
			label      	"<<XAction>>")
		    icon_style 	"Label"
		    line_color 	4944613
		    fill_color 	16777215
		    quidu      	"5187ACFE0118"
		    width      	656
		    height     	180
		    annotation 	8
		    autoResize 	TRUE)
		(object UsesView "" @216
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	(object SegLabel @217
			Parent_View 	@216
			location   	(1100, 7080)
			font       	(object Font
			    size       	10
			    face       	"Arial"
			    charSet    	204
			    bold       	FALSE
			    italics    	FALSE
			    underline  	FALSE
			    strike     	FALSE
			    color      	0
			    default_color 	TRUE)
			anchor     	10
			anchor_loc 	1
			nlines     	1
			max_width  	450
			justify    	0
			label      	"<<call>>"
			pctDist    	0.463549
			height     	46
			orientation 	0)
		    line_color 	3342489
		    quidu      	"5187AD2603A1"
		    client     	@215
		    supplier   	@208
		    vertices   	(list Points
			(1276, 7256)
			(979, 6820))
		    line_style 	0)
		(object UsesView "" @218
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	(object SegLabel @219
			Parent_View 	@218
			location   	(852, 7130)
			font       	(object Font
			    size       	10
			    face       	"Arial"
			    charSet    	204
			    bold       	FALSE
			    italics    	FALSE
			    underline  	FALSE
			    strike     	FALSE
			    color      	0
			    default_color 	TRUE)
			anchor     	10
			anchor_loc 	1
			nlines     	1
			max_width  	450
			justify    	0
			label      	"<<link>>"
			pctDist    	0.380995
			height     	58
			orientation 	0)
		    line_color 	3342489
		    quidu      	"5187ADBC0216"
		    client     	@210
		    supplier   	@215
		    vertices   	(list Points
			(696, 7141)
			(1060, 7256))
		    line_style 	0)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::RemoveOGV" @220
		    ShowCompartmentStereotypes 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(5034, 7083)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@220
			location   	(4854, 7054)
			fill_color 	13434879
			nlines     	1
			max_width  	360
			justify    	0
			label      	"RemoveOGV")
		    stereotype 	(object ItemLabel
			Parent_View 	@220
			location   	(4854, 7004)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	360
			justify    	0
			label      	"<<KActionPlugin>>")
		    icon_style 	"Label"
		    fill_color 	15448575
		    quidu      	"51A6FC740350"
		    width      	378
		    height     	182
		    annotation 	8
		    autoResize 	TRUE)
		(object InheritView "" @221
		    stereotype 	TRUE
		    line_color 	3342489
		    quidu      	"51A6FCA402AB"
		    client     	@220
		    supplier   	@85
		    vertices   	(list Points
			(4844, 7032)
			(3470, 6667))
		    line_style 	0)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::DocCardXPlugin::DocCardXPackage::RemoveOGV" @222
		    ShowCompartmentStereotypes 	TRUE
		    SuppressAttribute 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    location   	(4362, 7149)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	4944613
			default_color 	FALSE)
		    label      	(object ItemLabel
			Parent_View 	@222
			location   	(4178, 7121)
			nlines     	1
			max_width  	368
			justify    	0
			label      	"• RemoveOGV")
		    stereotype 	(object ItemLabel
			Parent_View 	@222
			location   	(4178, 7071)
			anchor     	10
			nlines     	1
			max_width  	368
			justify    	0
			label      	"<<XAction>>")
		    icon_style 	"Label"
		    line_color 	4944613
		    fill_color 	16777215
		    quidu      	"51A6FCC400DA"
		    width      	386
		    height     	180
		    annotation 	8
		    autoResize 	TRUE)
		(object UsesView "" @223
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	(object SegLabel @224
			Parent_View 	@223
			location   	(4688, 6997)
			font       	(object Font
			    size       	10
			    face       	"Arial"
			    charSet    	204
			    bold       	FALSE
			    italics    	FALSE
			    underline  	FALSE
			    strike     	FALSE
			    color      	0
			    default_color 	TRUE)
			anchor     	10
			anchor_loc 	1
			nlines     	1
			max_width  	450
			justify    	0
			label      	"<<call>>"
			pctDist    	0.500000
			height     	120
			orientation 	0)
		    line_color 	3342489
		    quidu      	"51A6FCF30165"
		    client     	@222
		    supplier   	@220
		    vertices   	(list Points
			(4555, 7129)
			(4844, 7101))
		    line_style 	0)
		(object UsesView "" @225
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	(object SegLabel @226
			Parent_View 	@225
			location   	(4665, 6856)
			font       	(object Font
			    size       	10
			    face       	"Arial"
			    charSet    	204
			    bold       	FALSE
			    italics    	FALSE
			    underline  	FALSE
			    strike     	FALSE
			    color      	0
			    default_color 	TRUE)
			anchor     	10
			anchor_loc 	1
			nlines     	1
			max_width  	450
			justify    	0
			label      	"<<link>>"
			pctDist    	0.338810
			height     	26
			orientation 	0)
		    line_color 	3342489
		    quidu      	"51A70259011E"
		    client     	@118
		    supplier   	@222
		    vertices   	(list Points
			(4748, 6727)
			(4443, 7058))
		    line_style 	0)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::SendMailThenNotIndexedGardocPagesJob" @227
		    ShowCompartmentStereotypes 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(1377, 10362)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@227
			location   	(964, 10333)
			fill_color 	13434879
			nlines     	1
			max_width  	826
			justify    	0
			label      	"• SendMailThenNotIndexedGardocPagesJob")
		    stereotype 	(object ItemLabel
			Parent_View 	@227
			location   	(964, 10283)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	826
			justify    	0
			label      	"<<KJobPlugin>>")
		    icon_style 	"Label"
		    fill_color 	15448575
		    quidu      	"51D3CA0A0190"
		    width      	844
		    height     	182
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::FindRegionQueriesInFormAnswerAndSendRepeatInHDRemote" @228
		    ShowCompartmentStereotypes 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(2379, 12006)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@228
			location   	(1606, 11977)
			fill_color 	13434879
			nlines     	1
			max_width  	1546
			justify    	0
			label      	"• FindRegionQueriesInFormAnswerAndSendRepeatInHDRemote")
		    stereotype 	(object ItemLabel
			Parent_View 	@228
			location   	(1606, 11927)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	1546
			justify    	0
			label      	"<<KJobPlugin>>")
		    icon_style 	"Label"
		    fill_color 	15448575
		    quidu      	"51DEAEDA02CE"
		    width      	1564
		    height     	182
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::AddUOCurrentDocWithSavedFieldsFromDoccardWebItem" @229
		    ShowCompartmentStereotypes 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(927, 2832)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@229
			location   	(219, 2803)
			fill_color 	13434879
			nlines     	1
			max_width  	1416
			justify    	0
			label      	"• AddUOCurrentDocWithSavedFieldsFromDoccardWebItem")
		    stereotype 	(object ItemLabel
			Parent_View 	@229
			location   	(219, 2753)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	1416
			justify    	0
			label      	"<<WebItem>>")
		    icon_style 	"Label"
		    fill_color 	15448575
		    quidu      	"51E9384301B0"
		    width      	1434
		    height     	182
		    annotation 	8
		    autoResize 	TRUE)
		(object UsesView "" @230
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	(object SegLabel @231
			Parent_View 	@230
			location   	(1767, 2255)
			font       	(object Font
			    size       	10
			    face       	"Arial"
			    charSet    	204
			    bold       	FALSE
			    italics    	FALSE
			    underline  	FALSE
			    strike     	FALSE
			    color      	0
			    default_color 	TRUE)
			anchor     	10
			anchor_loc 	1
			nlines     	1
			max_width  	450
			justify    	0
			label      	"<<link>>"
			pctDist    	0.500000
			height     	120
			orientation 	0)
		    line_color 	3342489
		    quidu      	"51E9386D002C"
		    client     	@229
		    supplier   	@23
		    vertices   	(list Points
			(1099, 2740)
			(2545, 1980))
		    line_style 	0)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::AddUOCurrentDocFromDoccardCondition" @232
		    ShowCompartmentStereotypes 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(909, 2298)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@232
			location   	(521, 2269)
			fill_color 	13434879
			nlines     	1
			max_width  	776
			justify    	0
			label      	"AddUOCurrentDocFromDoccardCondition")
		    stereotype 	(object ItemLabel
			Parent_View 	@232
			location   	(521, 2219)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	776
			justify    	0
			label      	"<<SimpleClass>>")
		    icon_style 	"Label"
		    fill_color 	12842465
		    quidu      	"4E23D93602F9"
		    width      	794
		    height     	182
		    annotation 	8
		    autoResize 	TRUE)
		(object AssociationViewNew "$UNNAMED$45" @233
		    location   	(917, 2564)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	TRUE
		    line_color 	3342489
		    quidu      	"51E938650099"
		    roleview_list 	(list RoleViews
			(object RoleView "$UNNAMED$46" @234
			    Parent_View 	@233
			    location   	(-589, -580)
			    font       	(object Font
				size       	10
				face       	"Arial"
				charSet    	204
				bold       	FALSE
				italics    	FALSE
				underline  	FALSE
				strike     	FALSE
				color      	0
				default_color 	TRUE)
			    stereotype 	(object SegLabel @235
				Parent_View 	@234
				location   	(795, 2480)
				font       	(object Font
				    size       	10
				    face       	"Arial"
				    charSet    	204
				    bold       	FALSE
				    italics    	FALSE
				    underline  	FALSE
				    strike     	FALSE
				    color      	0
				    default_color 	TRUE)
				anchor     	10
				anchor_loc 	1
				nlines     	1
				max_width  	450
				justify    	0
				label      	"<<condition>>"
				pctDist    	0.500000
				height     	120
				orientation 	0)
			    line_color 	3342489
			    quidu      	"51E9386501F8"
			    client     	@233
			    supplier   	@232
			    vertices   	(list Points
				(917, 2564)
				(911, 2389))
			    line_style 	0)
			(object RoleView "$UNNAMED$47" @236
			    Parent_View 	@233
			    location   	(-589, -580)
			    stereotype 	TRUE
			    line_color 	3342489
			    quidu      	"51E9386501FA"
			    client     	@233
			    supplier   	@229
			    vertices   	(list Points
				(917, 2564)
				(923, 2740))
			    line_style 	0)))
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::AddUOCurrentDocFromDoccardWebItem" @237
		    ShowCompartmentStereotypes 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(2406, 2808)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@237
			location   	(1901, 2779)
			fill_color 	13434879
			nlines     	1
			max_width  	1010
			justify    	0
			label      	"• AddUOCurrentDocFromDoccardWebItem")
		    stereotype 	(object ItemLabel
			Parent_View 	@237
			location   	(1901, 2729)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	1010
			justify    	0
			label      	"<<WebItem>>")
		    icon_style 	"Label"
		    fill_color 	15448575
		    quidu      	"51E9388003AB"
		    width      	1028
		    height     	182
		    annotation 	8
		    autoResize 	TRUE)
		(object AssociationViewNew "$UNNAMED$48" @238
		    location   	(1657, 2552)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	TRUE
		    line_color 	3342489
		    quidu      	"51E938A701F5"
		    roleview_list 	(list RoleViews
			(object RoleView "$UNNAMED$49" @239
			    Parent_View 	@238
			    location   	(-818, -625)
			    font       	(object Font
				size       	10
				face       	"Arial"
				charSet    	204
				bold       	FALSE
				italics    	FALSE
				underline  	FALSE
				strike     	FALSE
				color      	0
				default_color 	TRUE)
			    stereotype 	(object SegLabel @240
				Parent_View 	@239
				location   	(1378, 2584)
				font       	(object Font
				    size       	10
				    face       	"Arial"
				    charSet    	204
				    bold       	FALSE
				    italics    	FALSE
				    underline  	FALSE
				    strike     	FALSE
				    color      	0
				    default_color 	TRUE)
				anchor     	10
				anchor_loc 	1
				nlines     	1
				max_width  	450
				justify    	0
				label      	"<<condition>>"
				pctDist    	0.500000
				height     	120
				orientation 	0)
			    line_color 	3342489
			    quidu      	"51E938AA03DD"
			    client     	@238
			    supplier   	@232
			    vertices   	(list Points
				(1657, 2552)
				(1177, 2389))
			    line_style 	0)
			(object RoleView "$UNNAMED$50" @241
			    Parent_View 	@238
			    location   	(-818, -625)
			    stereotype 	TRUE
			    line_color 	3342489
			    quidu      	"51E938AA03DF"
			    client     	@238
			    supplier   	@237
			    vertices   	(list Points
				(1657, 2552)
				(2137, 2716))
			    line_style 	0)))
		(object UsesView "" @242
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	(object SegLabel @243
			Parent_View 	@242
			location   	(2449, 2310)
			font       	(object Font
			    size       	10
			    face       	"Arial"
			    charSet    	204
			    bold       	FALSE
			    italics    	FALSE
			    underline  	FALSE
			    strike     	FALSE
			    color      	0
			    default_color 	TRUE)
			anchor     	10
			anchor_loc 	1
			nlines     	1
			max_width  	450
			justify    	0
			label      	"<<link>>"
			pctDist    	0.500000
			height     	120
			orientation 	0)
		    line_color 	3342489
		    quidu      	"51E938D000DC"
		    client     	@237
		    supplier   	@23
		    vertices   	(list Points
			(2436, 2716)
			(2688, 1980))
		    line_style 	0)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::AddUOCurrentDocFromOGVCondition" @244
		    ShowCompartmentStereotypes 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(1785, 1689)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@244
			location   	(1425, 1660)
			fill_color 	13434879
			nlines     	1
			max_width  	720
			justify    	0
			label      	"AddUOCurrentDocFromOGVCondition")
		    stereotype 	(object ItemLabel
			Parent_View 	@244
			location   	(1425, 1610)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	720
			justify    	0
			label      	"<<SimpleClass>>")
		    icon_style 	"Label"
		    fill_color 	12842465
		    quidu      	"5152E45200CB"
		    width      	738
		    height     	182
		    annotation 	8
		    autoResize 	TRUE)
		(object InheritView "" @245
		    stereotype 	TRUE
		    line_color 	3342489
		    quidu      	"5152E46B0126"
		    client     	@244
		    supplier   	@22
		    vertices   	(list Points
			(1415, 1765)
			(611, 1929))
		    line_style 	0)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::AddUOCurrentDocWebItem" @246
		    ShowCompartmentStereotypes 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(1989, 1377)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@246
			location   	(1714, 1348)
			fill_color 	13434879
			nlines     	1
			max_width  	550
			justify    	0
			label      	"• AddUOCurrentDocWebItem")
		    stereotype 	(object ItemLabel
			Parent_View 	@246
			location   	(1714, 1298)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	550
			justify    	0
			label      	"<<WebItem>>")
		    icon_style 	"Label"
		    fill_color 	15448575
		    quidu      	"4E16F7AA0021"
		    width      	568
		    height     	182
		    annotation 	8
		    autoResize 	TRUE)
		(object UsesView "" @247
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	(object SegLabel @248
			Parent_View 	@247
			location   	(2423, 1536)
			font       	(object Font
			    size       	10
			    face       	"Arial"
			    charSet    	204
			    bold       	FALSE
			    italics    	FALSE
			    underline  	FALSE
			    strike     	FALSE
			    color      	0
			    default_color 	TRUE)
			anchor     	10
			anchor_loc 	1
			nlines     	1
			max_width  	450
			justify    	0
			label      	"<<link>>"
			pctDist    	0.500000
			height     	120
			orientation 	0)
		    line_color 	3342489
		    quidu      	"4E16F7E000A6"
		    client     	@246
		    supplier   	@23
		    vertices   	(list Points
			(2118, 1468)
			(2591, 1799))
		    line_style 	0)
		(object AssociationViewNew "$UNNAMED$27" @249
		    location   	(1886, 1532)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	TRUE
		    line_color 	3342489
		    quidu      	"4E16F7E80085"
		    roleview_list 	(list RoleViews
			(object RoleView "$UNNAMED$28" @250
			    Parent_View 	@249
			    location   	(170, -313)
			    font       	(object Font
				size       	10
				face       	"Arial"
				charSet    	204
				bold       	FALSE
				italics    	FALSE
				underline  	FALSE
				strike     	FALSE
				color      	0
				default_color 	TRUE)
			    stereotype 	(object SegLabel @251
				Parent_View 	@250
				location   	(2027, 1529)
				font       	(object Font
				    size       	10
				    face       	"Arial"
				    charSet    	204
				    bold       	FALSE
				    italics    	FALSE
				    underline  	FALSE
				    strike     	FALSE
				    color      	0
				    default_color 	TRUE)
				anchor     	10
				anchor_loc 	1
				nlines     	1
				max_width  	450
				justify    	0
				label      	"<<condition>>"
				pctDist    	-1.038630
				height     	117
				orientation 	0)
			    line_color 	3342489
			    quidu      	"4E16F7E802C4"
			    client     	@249
			    supplier   	@244
			    vertices   	(list Points
				(1886, 1532)
				(1842, 1597))
			    line_style 	0)
			(object RoleView "$UNNAMED$29" @252
			    Parent_View 	@249
			    location   	(170, -313)
			    stereotype 	TRUE
			    line_color 	3342489
			    quidu      	"4E16F7E802C6"
			    client     	@249
			    supplier   	@246
			    vertices   	(list Points
				(1886, 1532)
				(1927, 1468))
			    line_style 	0)))
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::ImportGardocStatesFromArchiJob" @253
		    ShowCompartmentStereotypes 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(462, 10299)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@253
			location   	(19, 10270)
			fill_color 	13434879
			nlines     	1
			max_width  	886
			justify    	0
			label      	"• ImportGardocStatesFromArchiJob")
		    stereotype 	(object ItemLabel
			Parent_View 	@253
			location   	(19, 10220)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	886
			justify    	0
			label      	"<<KJobPlugin>>")
		    icon_style 	"Label"
		    fill_color 	15448575
		    quidu      	"51FF62F301D6"
		    width      	904
		    height     	182
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardCommon::DPOUVSSpaceConfigService" @254
		    ShowCompartmentStereotypes 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(5865, 1839)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@254
			location   	(4860, 1707)
			fill_color 	13434879
			nlines     	1
			max_width  	2010
			justify    	0
			label      	"DPOUVSSpaceConfigService")
		    stereotype 	(object ItemLabel
			Parent_View 	@254
			location   	(4860, 1657)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	2010
			justify    	0
			label      	"<<Interface>>")
		    icon       	"Interface"
		    icon_style 	"Label"
		    fill_color 	16766935
		    quidu      	"522F173C0135"
		    compartment 	(object Compartment
			Parent_View 	@254
			location   	(4860, 1812)
			font       	(object Font
			    size       	10
			    face       	"Arial"
			    charSet    	204
			    bold       	FALSE
			    italics    	FALSE
			    underline  	FALSE
			    strike     	FALSE
			    color      	0
			    default_color 	TRUE)
			icon_style 	"Icon"
			fill_color 	16777215
			anchor     	2
			nlines     	4
			max_width  	2007
			justify    	1)
		    width      	2028
		    height     	388
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardCommonImpl::DefaultDPOUVSSpaceConfigService" @255
		    ShowCompartmentStereotypes 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(5886, 2412)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@255
			location   	(5542, 2360)
			fill_color 	13434879
			nlines     	1
			max_width  	688
			justify    	0
			label      	"DefaultDPOUVSSpaceConfigService")
		    stereotype 	(object ItemLabel
			Parent_View 	@255
			location   	(5542, 2310)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	688
			justify    	0
			label      	"<<Servant>>")
		    icon_style 	"Label"
		    fill_color 	12842435
		    quidu      	"522F1A0602E4"
		    width      	706
		    height     	228
		    annotation 	8
		    autoResize 	TRUE)
		(object RealizeView "" @256
		    stereotype 	TRUE
		    line_color 	3342489
		    quidu      	"522F1A180058"
		    client     	@255
		    supplier   	@254
		    vertices   	(list Points
			(5880, 2297)
			(5871, 2033))
		    line_style 	0)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::ExportToFileFindedTopics" @257
		    ShowCompartmentStereotypes 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(5214, 10590)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@257
			location   	(4936, 10561)
			fill_color 	13434879
			nlines     	1
			max_width  	556
			justify    	0
			label      	"• ExportToFileFindedTopics")
		    stereotype 	(object ItemLabel
			Parent_View 	@257
			location   	(4936, 10511)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	556
			justify    	0
			label      	"<<KServletPlugin>>")
		    icon_style 	"Label"
		    fill_color 	15448575
		    quidu      	"523C27FF0169"
		    width      	574
		    height     	182
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::MoveOGVFromFolderAction" @258
		    ShowCompartmentStereotypes 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(5253, 10296)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@258
			location   	(4978, 10267)
			fill_color 	13434879
			nlines     	1
			max_width  	550
			justify    	0
			label      	"MoveOGVFromFolderAction")
		    stereotype 	(object ItemLabel
			Parent_View 	@258
			location   	(4978, 10217)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	550
			justify    	0
			label      	"<<KActionPlugin>>")
		    icon_style 	"Label"
		    fill_color 	15448575
		    quidu      	"524C02F201F1"
		    width      	568
		    height     	182
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::UpdateConfigOGVTask" @259
		    ShowCompartmentStereotypes 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(5121, 11565)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@259
			location   	(4899, 11536)
			fill_color 	13434879
			nlines     	1
			max_width  	444
			justify    	0
			label      	"UpdateConfigOGVTask")
		    stereotype 	(object ItemLabel
			Parent_View 	@259
			location   	(4899, 11486)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	444
			justify    	0
			label      	"<<SimpleClass>>")
		    icon_style 	"Label"
		    fill_color 	12842465
		    quidu      	"526907F0010B"
		    width      	462
		    height     	182
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::shared::ConfluenceCore::TaskSupport::PostProcessorTask" @260
		    ShowCompartmentStereotypes 	TRUE
		    SuppressAttribute 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    location   	(5610, 11256)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	TRUE
			underline  	FALSE
			strike     	FALSE
			color      	705320
			default_color 	FALSE)
		    label      	(object ItemLabel
			Parent_View 	@260
			location   	(5416, 11228)
			nlines     	1
			max_width  	388
			justify    	0
			label      	"PostProcessorTask")
		    stereotype 	(object ItemLabel
			Parent_View 	@260
			location   	(5416, 11178)
			anchor     	10
			nlines     	1
			max_width  	388
			justify    	0
			label      	"<<SimpleClass>>")
		    icon_style 	"Label"
		    line_color 	705320
		    fill_color 	16777215
		    quidu      	"4A83AEE0035D"
		    width      	406
		    height     	180
		    annotation 	8
		    autoResize 	TRUE)
		(object InheritView "" @261
		    stereotype 	TRUE
		    line_color 	3342489
		    quidu      	"5269084A02B9"
		    client     	@259
		    supplier   	@260
		    vertices   	(list Points
			(5262, 11473)
			(5464, 11346))
		    line_style 	0)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::MoveOGVSettingsToOGVWithRightPathJob" @262
		    ShowCompartmentStereotypes 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(2949, 10227)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@262
			location   	(2408, 10198)
			fill_color 	13434879
			nlines     	1
			max_width  	1082
			justify    	0
			label      	"• MoveOGVSettingsToOGVWithRightPathJob")
		    stereotype 	(object ItemLabel
			Parent_View 	@262
			location   	(2408, 10148)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	1082
			justify    	0
			label      	"<<KJobPlugin>>")
		    icon_style 	"Label"
		    fill_color 	15448575
		    quidu      	"5319A5FE027C"
		    width      	1100
		    height     	182
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::FindGardocsWithWrongPathInOGV" @263
		    ShowCompartmentStereotypes 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(513, 10002)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@263
			location   	(60, 9973)
			fill_color 	13434879
			nlines     	1
			max_width  	906
			justify    	0
			label      	"• FindGardocsWithWrongPathInOGV")
		    stereotype 	(object ItemLabel
			Parent_View 	@263
			location   	(60, 9923)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	906
			justify    	0
			label      	"<<KJobPlugin>>")
		    icon_style 	"Label"
		    fill_color 	15448575
		    quidu      	"532692590153"
		    width      	924
		    height     	182
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::RemoveNotInHDNoAttachmentsOgvsJob" @264
		    ShowCompartmentStereotypes 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(3333, 10545)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@264
			location   	(2941, 10516)
			fill_color 	13434879
			nlines     	1
			max_width  	784
			justify    	0
			label      	"• RemoveNotInHDNoAttachmentsOgvsJob")
		    stereotype 	(object ItemLabel
			Parent_View 	@264
			location   	(2941, 10466)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	784
			justify    	0
			label      	"<<KJobPlugin>>")
		    icon_style 	"Label"
		    fill_color 	15448575
		    quidu      	"533A5C6D00FD"
		    width      	802
		    height     	182
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::TransactionDecorator" @265
		    ShowCompartmentStereotypes 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(4977, 10905)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@265
			location   	(4373, 10771)
			fill_color 	13434879
			nlines     	1
			max_width  	1208
			justify    	0
			label      	"• TransactionDecorator")
		    stereotype 	(object ItemLabel
			Parent_View 	@265
			location   	(4373, 10721)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	1208
			justify    	0
			label      	"<<SimpleClass>>")
		    icon_style 	"Label"
		    fill_color 	12842465
		    quidu      	"52CE40E20154"
		    compartment 	(object Compartment
			Parent_View 	@265
			location   	(4373, 10832)
			font       	(object Font
			    size       	10
			    face       	"Arial"
			    charSet    	204
			    bold       	FALSE
			    italics    	FALSE
			    underline  	FALSE
			    strike     	FALSE
			    color      	0
			    default_color 	TRUE)
			icon_style 	"Icon"
			fill_color 	16777215
			anchor     	2
			nlines     	5
			max_width  	1209
			justify    	1)
		    width      	1226
		    height     	392
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::RequestListFilters" @266
		    ShowCompartmentStereotypes 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(5631, 3087)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@266
			location   	(5447, 3058)
			fill_color 	13434879
			nlines     	1
			max_width  	368
			justify    	0
			label      	"RequestListFilters")
		    stereotype 	(object ItemLabel
			Parent_View 	@266
			location   	(5447, 3008)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	368
			justify    	0
			label      	"<<KActionPlugin>>")
		    icon_style 	"Label"
		    fill_color 	15448575
		    quidu      	"538F10F201C1"
		    width      	386
		    height     	182
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::external::ConfluenceSupport::com.atlassian.confluence.coreImpl::ConfluenceActionSupport" @267
		    ShowCompartmentStereotypes 	TRUE
		    SuppressAttribute 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    location   	(5466, 3666)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	658120
			default_color 	FALSE)
		    label      	(object ItemLabel
			Parent_View 	@267
			location   	(5163, 3638)
			fill_color 	13434879
			nlines     	1
			max_width  	606
			justify    	0
			label      	"• ConfluenceActionSupport")
		    stereotype 	(object ItemLabel
			Parent_View 	@267
			location   	(5163, 3588)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	606
			justify    	0
			label      	"<<SimpleClass>>")
		    icon_style 	"Label"
		    line_color 	14803425
		    fill_color 	14803425
		    quidu      	"468C9C950186"
		    width      	624
		    height     	180
		    annotation 	8
		    autoResize 	TRUE)
		(object InheritView "" @268
		    stereotype 	TRUE
		    line_color 	3342489
		    quidu      	"4B289BD20036"
		    client     	@46
		    supplier   	@267
		    vertices   	(list Points
			(4034, 1383)
			(5409, 3575))
		    line_style 	0)
		(object InheritView "" @269
		    stereotype 	TRUE
		    line_color 	3342489
		    quidu      	"538F2130027C"
		    client     	@266
		    supplier   	@267
		    vertices   	(list Points
			(5603, 3178)
			(5491, 3575))
		    line_style 	0)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::MoveAllDocCardsFromOGV" @270
		    ShowCompartmentStereotypes 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(2634, 4407)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@270
			location   	(2364, 4378)
			fill_color 	13434879
			nlines     	1
			max_width  	540
			justify    	0
			label      	"MoveAllDocCardsFromOGV")
		    stereotype 	(object ItemLabel
			Parent_View 	@270
			location   	(2364, 4328)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	540
			justify    	0
			label      	"<<KActionPlugin>>")
		    icon_style 	"Label"
		    fill_color 	15448575
		    quidu      	"53B407A40338"
		    width      	558
		    height     	182
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::DocCardXPlugin::DocCardXPackage::MoveAllDocCardsFromOGVAction" @271
		    ShowCompartmentStereotypes 	TRUE
		    SuppressAttribute 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    location   	(2829, 5190)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	4944613
			default_color 	FALSE)
		    label      	(object ItemLabel
			Parent_View 	@271
			location   	(2384, 5162)
			nlines     	1
			max_width  	890
			justify    	0
			label      	"• MoveAllDocCardsFromOGVAction")
		    stereotype 	(object ItemLabel
			Parent_View 	@271
			location   	(2384, 5112)
			anchor     	10
			nlines     	1
			max_width  	890
			justify    	0
			label      	"<<XAction>>")
		    icon_style 	"Label"
		    line_color 	4944613
		    fill_color 	16777215
		    quidu      	"53B407E10094"
		    width      	908
		    height     	180
		    annotation 	8
		    autoResize 	TRUE)
		(object UsesView "" @272
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	(object SegLabel @273
			Parent_View 	@272
			location   	(2615, 4827)
			font       	(object Font
			    size       	10
			    face       	"Arial"
			    charSet    	204
			    bold       	FALSE
			    italics    	FALSE
			    underline  	FALSE
			    strike     	FALSE
			    color      	0
			    default_color 	TRUE)
			anchor     	10
			anchor_loc 	1
			nlines     	1
			max_width  	450
			justify    	0
			label      	"<<call>>"
			pctDist    	0.500000
			height     	120
			orientation 	0)
		    line_color 	3342489
		    quidu      	"53B407F6037E"
		    client     	@271
		    supplier   	@270
		    vertices   	(list Points
			(2805, 5099)
			(2656, 4498))
		    line_style 	0)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::MoveAllDocCardsFromOGVCondition" @274
		    ShowCompartmentStereotypes 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(3828, 5028)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@274
			location   	(3469, 4999)
			fill_color 	13434879
			nlines     	1
			max_width  	718
			justify    	0
			label      	"MoveAllDocCardsFromOGVCondition")
		    stereotype 	(object ItemLabel
			Parent_View 	@274
			location   	(3469, 4949)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	718
			justify    	0
			label      	"<<SimpleClass>>")
		    icon_style 	"Label"
		    fill_color 	12842465
		    quidu      	"53B408D3019A"
		    width      	736
		    height     	182
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::MoveAllDocCardsWebItem" @275
		    ShowCompartmentStereotypes 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(3321, 5715)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@275
			location   	(3037, 5686)
			fill_color 	13434879
			nlines     	1
			max_width  	568
			justify    	0
			label      	"• MoveAllDocCardsWebItem")
		    stereotype 	(object ItemLabel
			Parent_View 	@275
			location   	(3037, 5636)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	568
			justify    	0
			label      	"<<WebItem>>")
		    icon_style 	"Label"
		    fill_color 	15448575
		    quidu      	"53B3F7B10337"
		    width      	586
		    height     	182
		    annotation 	8
		    autoResize 	TRUE)
		(object UsesView "" @276
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	(object SegLabel @277
			Parent_View 	@276
			location   	(2987, 5534)
			font       	(object Font
			    size       	10
			    face       	"Arial"
			    charSet    	204
			    bold       	FALSE
			    italics    	FALSE
			    underline  	FALSE
			    strike     	FALSE
			    color      	0
			    default_color 	TRUE)
			anchor     	10
			anchor_loc 	1
			nlines     	1
			max_width  	450
			justify    	0
			label      	"<<link>>"
			pctDist    	0.500000
			height     	120
			orientation 	0)
		    line_color 	3342489
		    quidu      	"53B4089400B0"
		    client     	@275
		    supplier   	@271
		    vertices   	(list Points
			(3234, 5623)
			(2914, 5280))
		    line_style 	0)
		(object AssociationViewNew "$UNNAMED$51" @278
		    location   	(3573, 5371)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	TRUE
		    line_color 	3342489
		    quidu      	"53B408EA01FF"
		    roleview_list 	(list RoleViews
			(object RoleView "$UNNAMED$52" @279
			    Parent_View 	@278
			    location   	(2670, -446)
			    font       	(object Font
				size       	10
				face       	"Arial"
				charSet    	204
				bold       	FALSE
				italics    	FALSE
				underline  	FALSE
				strike     	FALSE
				color      	0
				default_color 	TRUE)
			    stereotype 	(object SegLabel @280
				Parent_View 	@279
				location   	(3224, 5597)
				font       	(object Font
				    size       	10
				    face       	"Arial"
				    charSet    	204
				    bold       	FALSE
				    italics    	FALSE
				    underline  	FALSE
				    strike     	FALSE
				    color      	0
				    default_color 	TRUE)
				anchor     	10
				anchor_loc 	1
				nlines     	1
				max_width  	450
				justify    	0
				label      	"<<condition>>"
				pctDist    	-1.242263
				height     	148
				orientation 	0)
			    line_color 	3342489
			    quidu      	"53B408EA03C6"
			    client     	@278
			    supplier   	@274
			    vertices   	(list Points
				(3573, 5371)
				(3759, 5119))
			    line_style 	0)
			(object RoleView "$UNNAMED$53" @281
			    Parent_View 	@278
			    location   	(2670, -446)
			    stereotype 	TRUE
			    line_color 	3342489
			    quidu      	"53B408EA03C8"
			    client     	@278
			    supplier   	@275
			    vertices   	(list Points
				(3573, 5371)
				(3387, 5623))
			    line_style 	0)))
		(object InheritView "" @282
		    stereotype 	TRUE
		    line_color 	3342489
		    quidu      	"53B40D330098"
		    client     	@274
		    supplier   	@154
		    vertices   	(list Points
			(3862, 5119)
			(4704, 7337))
		    line_style 	0)
		(object InheritView "" @283
		    stereotype 	TRUE
		    line_color 	3342489
		    quidu      	"53B4F3900001"
		    client     	@270
		    supplier   	@267
		    vertices   	(list Points
			(2913, 4332)
			(5153, 3746))
		    line_style 	0)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::GarDocAbstractJob" @284
		    ShowCompartmentStereotypes 	TRUE
		    SuppressAttribute 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    location   	(1131, 8766)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	TRUE
			underline  	FALSE
			strike     	FALSE
			color      	13110000
			default_color 	FALSE)
		    label      	(object ItemLabel
			Parent_View 	@284
			location   	(936, 8750)
			nlines     	1
			max_width  	390
			justify    	0
			label      	"GarDocAbstractJob")
		    stereotype 	(object ItemLabel
			Parent_View 	@284
			location   	(936, 8700)
			anchor     	10
			nlines     	1
			max_width  	390
			justify    	0
			label      	"<<KJobPlugin>>")
		    icon_style 	"Label"
		    line_color 	13110000
		    fill_color 	16777215
		    quidu      	"53E4BF9000E2"
		    width      	408
		    height     	157
		    annotation 	8
		    autoResize 	TRUE)
		(object InheritView "" @285
		    stereotype 	TRUE
		    line_color 	3342489
		    quidu      	"4FBA292502D6"
		    client     	@145
		    supplier   	@284
		    vertices   	(list Points
			(653, 8814)
			(926, 8786))
		    line_style 	0)
		(object InheritView "" @286
		    stereotype 	TRUE
		    line_color 	3342489
		    quidu      	"4FBA2923027B"
		    client     	@116
		    supplier   	@284
		    vertices   	(list Points
			(919, 8616)
			(1021, 8687))
		    line_style 	0)
		(object InheritView "" @287
		    stereotype 	TRUE
		    line_color 	3342489
		    quidu      	"4FBA292B00AC"
		    client     	@110
		    supplier   	@284
		    vertices   	(list Points
			(1726, 8533)
			(1329, 8687))
		    line_style 	0)
		(object InheritView "" @288
		    stereotype 	TRUE
		    line_color 	3342489
		    quidu      	"4FBA292D03BD"
		    client     	@111
		    supplier   	@284
		    vertices   	(list Points
			(1763, 8739)
			(1335, 8756))
		    line_style 	0)
		(object InheritView "" @289
		    stereotype 	TRUE
		    line_color 	3342489
		    quidu      	"4FBA293003A1"
		    client     	@80
		    supplier   	@284
		    vertices   	(list Points
			(2065, 8926)
			(1335, 8800))
		    line_style 	0)
		(object InheritView "" @290
		    stereotype 	TRUE
		    line_color 	3342489
		    quidu      	"4FBA29330296"
		    client     	@108
		    supplier   	@284
		    vertices   	(list Points
			(2504, 9118)
			(1335, 8818))
		    line_style 	0)
		(object InheritView "" @291
		    stereotype 	TRUE
		    line_color 	3342489
		    quidu      	"4FBA2936023B"
		    client     	@112
		    supplier   	@284
		    vertices   	(list Points
			(2816, 9583)
			(1294, 8844))
		    line_style 	0)
		(object InheritView "" @292
		    stereotype 	TRUE
		    line_color 	3342489
		    quidu      	"533A5CAB01C9"
		    client     	@264
		    supplier   	@284
		    vertices   	(list Points
			(3219, 10453)
			(1227, 8844))
		    line_style 	0)
		(object InheritView "" @293
		    stereotype 	TRUE
		    line_color 	3342489
		    quidu      	"5319A63F0128"
		    client     	@262
		    supplier   	@284
		    vertices   	(list Points
			(2835, 10135)
			(1228, 8844))
		    line_style 	0)
		(object InheritView "" @294
		    stereotype 	TRUE
		    line_color 	3342489
		    quidu      	"500E435A031F"
		    client     	@146
		    supplier   	@284
		    vertices   	(list Points
			(2463, 9841)
			(1229, 8844))
		    line_style 	0)
		(object InheritView "" @295
		    stereotype 	TRUE
		    line_color 	3342489
		    quidu      	"500FD8670349"
		    client     	@147
		    supplier   	@284
		    vertices   	(list Points
			(1792, 9652)
			(1189, 8844))
		    line_style 	0)
		(object InheritView "" @296
		    stereotype 	TRUE
		    line_color 	3342489
		    quidu      	"51D3CA4302BB"
		    client     	@227
		    supplier   	@284
		    vertices   	(list Points
			(1362, 10270)
			(1142, 8844))
		    line_style 	0)
		(object InheritView "" @297
		    stereotype 	TRUE
		    line_color 	3342489
		    quidu      	"507551C202E1"
		    client     	@192
		    supplier   	@284
		    vertices   	(list Points
			(1945, 10042)
			(1180, 8844))
		    line_style 	0)
		(object InheritView "" @298
		    stereotype 	TRUE
		    line_color 	3342489
		    quidu      	"4FBA292801AC"
		    client     	@135
		    supplier   	@284
		    vertices   	(list Points
			(686, 9088)
			(1020, 8844))
		    line_style 	0)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::AbstractFindQueriesInStatesAndSendRepeatInHDRemote" @299
		    ShowCompartmentStereotypes 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(2625, 11172)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	TRUE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@299
			location   	(1801, 10963)
			fill_color 	13434879
			nlines     	1
			max_width  	1648
			justify    	0
			label      	"• AbstractFindQueriesInStatesAndSendRepeatInHDRemote")
		    stereotype 	(object ItemLabel
			Parent_View 	@299
			location   	(1801, 10913)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	1648
			justify    	0
			label      	"<<KJobPlugin>>")
		    icon_style 	"Label"
		    fill_color 	15448575
		    quidu      	"53E8AFBE0195"
		    compartment 	(object Compartment
			Parent_View 	@299
			location   	(1801, 11024)
			font       	(object Font
			    size       	10
			    face       	"Arial"
			    charSet    	204
			    bold       	FALSE
			    italics    	TRUE
			    underline  	FALSE
			    strike     	FALSE
			    color      	0
			    default_color 	TRUE)
			icon_style 	"Icon"
			fill_color 	16777215
			anchor     	2
			nlines     	8
			max_width  	1668
			justify    	1)
		    width      	1666
		    height     	542
		    annotation 	8
		    autoResize 	TRUE)
		(object InheritView "" @300
		    stereotype 	TRUE
		    line_color 	3342489
		    quidu      	"51DEAF31025A"
		    client     	@228
		    supplier   	@299
		    vertices   	(list Points
			(2405, 11914)
			(2543, 11443))
		    line_style 	0)
		(object InheritView "" @301
		    stereotype 	TRUE
		    line_color 	3342489
		    quidu      	"53E8AFF20365"
		    client     	@299
		    supplier   	@284
		    vertices   	(list Points
			(2456, 10900)
			(1178, 8844))
		    line_style 	0)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::FindUoQueriesInStatesAndSendRepeatInHDRemote" @302
		    ShowCompartmentStereotypes 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(3264, 11733)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@302
			location   	(2614, 11704)
			fill_color 	13434879
			nlines     	1
			max_width  	1300
			justify    	0
			label      	"• FindUoQueriesInStatesAndSendRepeatInHDRemote")
		    stereotype 	(object ItemLabel
			Parent_View 	@302
			location   	(2614, 11654)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	1300
			justify    	0
			label      	"<<KJobPlugin>>")
		    icon_style 	"Label"
		    fill_color 	15448575
		    quidu      	"53E8B01100B6"
		    width      	1318
		    height     	182
		    annotation 	8
		    autoResize 	TRUE)
		(object InheritView "" @303
		    stereotype 	TRUE
		    line_color 	3342489
		    quidu      	"53E8B478036E"
		    client     	@302
		    supplier   	@299
		    vertices   	(list Points
			(3161, 11641)
			(2934, 11443))
		    line_style 	0)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::FilterSpaceOGVPathFromOPPJob" @304
		    ShowCompartmentStereotypes 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(528, 9486)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	TRUE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@304
			location   	(191, 9457)
			fill_color 	13434879
			nlines     	1
			max_width  	674
			justify    	0
			label      	"FilterSpaceOGVPathFromOPPJob")
		    stereotype 	(object ItemLabel
			Parent_View 	@304
			location   	(191, 9407)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	674
			justify    	0
			label      	"<<KJobPlugin>>")
		    icon_style 	"Label"
		    fill_color 	15448575
		    quidu      	"53EC707C00F5"
		    width      	692
		    height     	182
		    annotation 	8
		    autoResize 	TRUE)
		(object InheritView "" @305
		    stereotype 	TRUE
		    line_color 	3342489
		    quidu      	"53EC712F0309"
		    client     	@304
		    supplier   	@284
		    vertices   	(list Points
			(604, 9394)
			(1064, 8844))
		    line_style 	0)
		(object InheritView "" @306
		    stereotype 	TRUE
		    line_color 	3342489
		    quidu      	"510B9C9E0386"
		    client     	@195
		    supplier   	@304
		    vertices   	(list Points
			(387, 9664)
			(455, 9577))
		    line_style 	0)
		(object InheritView "" @307
		    stereotype 	TRUE
		    line_color 	3342489
		    quidu      	"51FF632903A0"
		    client     	@253
		    supplier   	@284
		    vertices   	(list Points
			(500, 10207)
			(1095, 8844))
		    line_style 	0)
		(object InheritView "" @308
		    stereotype 	TRUE
		    line_color 	3342489
		    quidu      	"5326929F032C"
		    client     	@263
		    supplier   	@284
		    vertices   	(list Points
			(975, 9963)
			(1107, 9963)
			(1107, 8844))
		    line_style 	3
		    origin_attachment 	(975, 9963)
		    terminal_attachment 	(1107, 8844))
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardCommon::DoInNewTransactionCallback" @309
		    ShowCompartmentStereotypes 	TRUE
		    SuppressAttribute 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    location   	(5901, 10998)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	16714250
			default_color 	FALSE)
		    label      	(object ItemLabel
			Parent_View 	@309
			location   	(5618, 10970)
			nlines     	1
			max_width  	566
			justify    	0
			label      	"DoInNewTransactionCallback")
		    stereotype 	(object ItemLabel
			Parent_View 	@309
			location   	(5618, 10920)
			anchor     	10
			nlines     	1
			max_width  	566
			justify    	0
			label      	"<<Interface>>")
		    icon       	"Interface"
		    icon_style 	"Label"
		    line_color 	16714250
		    fill_color 	16777215
		    quidu      	"52CE406A03BA"
		    width      	584
		    height     	180
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::ExportUvsQueriesListServlet" @310
		    ShowCompartmentStereotypes 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(6123, 10722)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@310
			location   	(5827, 10693)
			fill_color 	13434879
			nlines     	1
			max_width  	592
			justify    	0
			label      	"• ExportUvsQueriesListServlet")
		    stereotype 	(object ItemLabel
			Parent_View 	@310
			location   	(5827, 10643)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	592
			justify    	0
			label      	"<<KServletPlugin>>")
		    icon_style 	"Label"
		    fill_color 	15448575
		    quidu      	"54B671650169"
		    width      	610
		    height     	182
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::GetGosDumaDocumentsJob" @311
		    ShowCompartmentStereotypes 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(435, 10566)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@311
			location   	(56, 10537)
			fill_color 	13434879
			nlines     	1
			max_width  	758
			justify    	0
			label      	"• GetGosDumaDocumentsJob")
		    stereotype 	(object ItemLabel
			Parent_View 	@311
			location   	(56, 10487)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	758
			justify    	0
			label      	"<<KJobPlugin>>")
		    icon_style 	"Label"
		    fill_color 	15448575
		    quidu      	"54F5946A021A"
		    width      	776
		    height     	182
		    annotation 	8
		    autoResize 	TRUE)
		(object InheritView "" @312
		    stereotype 	TRUE
		    line_color 	3342489
		    quidu      	"54F594A50320"
		    client     	@311
		    supplier   	@284
		    vertices   	(list Points
			(469, 10474)
			(1099, 8844))
		    line_style 	0)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::OGVSynonymsUpdateServlet" @313
		    ShowCompartmentStereotypes 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(3510, 12378)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@313
			location   	(3120, 12349)
			fill_color 	13434879
			nlines     	1
			max_width  	780
			justify    	0
			label      	"• OGVSynonymsUpdateServlet")
		    stereotype 	(object ItemLabel
			Parent_View 	@313
			location   	(3120, 12299)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	780
			justify    	0
			label      	"<<KServletPlugin>>")
		    icon_style 	"Label"
		    fill_color 	15448575
		    quidu      	"559F86270207"
		    width      	798
		    height     	182
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::AbstractWorkWithXMLDocumentServlet" @314
		    ShowCompartmentStereotypes 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(2238, 12291)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	TRUE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@314
			location   	(1851, 12262)
			fill_color 	13434879
			nlines     	1
			max_width  	774
			justify    	0
			label      	"AbstractWorkWithXMLDocumentServlet")
		    stereotype 	(object ItemLabel
			Parent_View 	@314
			location   	(1851, 12212)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	774
			justify    	0
			label      	"<<KServletPlugin>>")
		    icon_style 	"Label"
		    fill_color 	15448575
		    quidu      	"559F9B3F0197"
		    width      	792
		    height     	182
		    annotation 	8
		    autoResize 	TRUE)
		(object InheritView "" @315
		    stereotype 	TRUE
		    line_color 	3342489
		    quidu      	"559F9B690004"
		    client     	@313
		    supplier   	@314
		    vertices   	(list Points
			(3110, 12349)
			(2634, 12316))
		    line_style 	0)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::GardocIndexFieldsExtractor" @316
		    ShowCompartmentStereotypes 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(4656, 12048)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@316
			location   	(4012, 11964)
			fill_color 	13434879
			nlines     	1
			max_width  	1288
			justify    	0
			label      	"GardocIndexFieldsExtractor")
		    stereotype 	(object ItemLabel
			Parent_View 	@316
			location   	(4012, 11914)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	1288
			justify    	0
			label      	"<<SimpleClass>>")
		    icon_style 	"Label"
		    fill_color 	12842465
		    quidu      	"55AE15AA035D"
		    compartment 	(object Compartment
			Parent_View 	@316
			location   	(4012, 12025)
			font       	(object Font
			    size       	10
			    face       	"Arial"
			    charSet    	204
			    bold       	FALSE
			    italics    	FALSE
			    underline  	FALSE
			    strike     	FALSE
			    color      	0
			    default_color 	TRUE)
			icon_style 	"Icon"
			fill_color 	16777215
			anchor     	2
			nlines     	3
			max_width  	1284
			justify    	1)
		    width      	1306
		    height     	292
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::external::ConfluenceSupport::com.atlassian.bonnie::Searchable" @317
		    ShowCompartmentStereotypes 	TRUE
		    SuppressAttribute 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    location   	(5910, 12321)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	658120
			default_color 	FALSE)
		    label      	(object ItemLabel
			Parent_View 	@317
			location   	(5707, 12293)
			fill_color 	13434879
			nlines     	1
			max_width  	406
			justify    	0
			label      	"• Searchable")
		    stereotype 	(object ItemLabel
			Parent_View 	@317
			location   	(5707, 12243)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	406
			justify    	0
			label      	"<<SimpleClass>>")
		    icon_style 	"Label"
		    line_color 	14803425
		    fill_color 	14803425
		    quidu      	"47BE789B0398"
		    width      	424
		    height     	180
		    annotation 	8
		    autoResize 	TRUE)
		(object UsesView "" @318
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	(object SegLabel @319
			Parent_View 	@318
			location   	(5524, 12198)
			font       	(object Font
			    size       	10
			    face       	"Arial"
			    charSet    	204
			    bold       	FALSE
			    italics    	FALSE
			    underline  	FALSE
			    strike     	FALSE
			    color      	0
			    default_color 	TRUE)
			anchor     	10
			anchor_loc 	1
			nlines     	1
			max_width  	450
			justify    	0
			label      	"<<uses>>"
			pctDist    	0.533526
			height     	38
			orientation 	0)
		    line_color 	3342489
		    quidu      	"55AE18080040"
		    client     	@316
		    supplier   	@317
		    vertices   	(list Points
			(5309, 12189)
			(5697, 12273))
		    line_style 	0)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::GardocIndexedFields" @320
		    ShowCompartmentStereotypes 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(6132, 12621)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@320
			location   	(5924, 12591)
			fill_color 	13434879
			nlines     	1
			max_width  	416
			justify    	0
			label      	"GardocIndexedFields")
		    stereotype 	(object ItemLabel
			Parent_View 	@320
			location   	(5924, 12541)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	416
			justify    	0
			label      	"<<SimpleClass>>")
		    icon_style 	"Label"
		    fill_color 	12842465
		    quidu      	"55AE1D5302BE"
		    width      	434
		    height     	184
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::UvsQueryHistoryInfo" @321
		    ShowCompartmentStereotypes 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(7077, 12045)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@321
			location   	(6873, 12015)
			fill_color 	13434879
			nlines     	1
			max_width  	408
			justify    	0
			label      	"UvsQueryHistoryInfo")
		    stereotype 	(object ItemLabel
			Parent_View 	@321
			location   	(6873, 11965)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	408
			justify    	0
			label      	"<<SimpleClass>>")
		    icon_style 	"Label"
		    fill_color 	12842465
		    quidu      	"55AE2674035B"
		    width      	426
		    height     	184
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::UvsQueryIndexedFields" @322
		    ShowCompartmentStereotypes 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(6519, 12318)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@322
			location   	(6289, 12288)
			fill_color 	13434879
			nlines     	1
			max_width  	460
			justify    	0
			label      	"UvsQueryIndexedFields")
		    stereotype 	(object ItemLabel
			Parent_View 	@322
			location   	(6289, 12238)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	460
			justify    	0
			label      	"<<SimpleClass>>")
		    icon_style 	"Label"
		    fill_color 	12842465
		    quidu      	"55AE21E202FE"
		    width      	478
		    height     	184
		    annotation 	8
		    autoResize 	TRUE)
		(object UsesView "" @323
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	(object SegLabel @324
			Parent_View 	@323
			location   	(6744, 12074)
			font       	(object Font
			    size       	10
			    face       	"Arial"
			    charSet    	204
			    bold       	FALSE
			    italics    	FALSE
			    underline  	FALSE
			    strike     	FALSE
			    color      	0
			    default_color 	TRUE)
			anchor     	10
			anchor_loc 	1
			nlines     	1
			max_width  	450
			justify    	0
			label      	"<<uses>>"
			pctDist    	0.500000
			height     	120
			orientation 	0)
		    line_color 	3342489
		    quidu      	"55AFA13C01F7"
		    client     	@322
		    supplier   	@321
		    vertices   	(list Points
			(6704, 12225)
			(6886, 12137))
		    line_style 	0)
		(object UsesView "" @325
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	(object SegLabel @326
			Parent_View 	@325
			location   	(6250, 12376)
			font       	(object Font
			    size       	10
			    face       	"Arial"
			    charSet    	204
			    bold       	FALSE
			    italics    	FALSE
			    underline  	FALSE
			    strike     	FALSE
			    color      	0
			    default_color 	TRUE)
			anchor     	10
			anchor_loc 	1
			nlines     	1
			max_width  	450
			justify    	0
			label      	"<<uses>>"
			pctDist    	0.500000
			height     	120
			orientation 	0)
		    line_color 	3342489
		    quidu      	"55AFA14100DE"
		    client     	@320
		    supplier   	@322
		    vertices   	(list Points
			(6248, 12528)
			(6398, 12410))
		    line_style 	0)
		(object UsesView "" @327
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	(object SegLabel @328
			Parent_View 	@327
			location   	(5554, 12358)
			font       	(object Font
			    size       	10
			    face       	"Arial"
			    charSet    	204
			    bold       	FALSE
			    italics    	FALSE
			    underline  	FALSE
			    strike     	FALSE
			    color      	0
			    default_color 	TRUE)
			anchor     	10
			anchor_loc 	1
			nlines     	1
			max_width  	450
			justify    	0
			label      	"<<uses>>"
			pctDist    	0.576653
			height     	36
			orientation 	0)
		    line_color 	3342489
		    quidu      	"55AFA1470236"
		    client     	@316
		    supplier   	@320
		    vertices   	(list Points
			(5033, 12194)
			(5914, 12535))
		    line_style 	0)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::GardocExtractorWithCache" @329
		    ShowCompartmentStereotypes 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(3846, 10221)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@329
			location   	(3569, 10192)
			fill_color 	13434879
			nlines     	1
			max_width  	554
			justify    	0
			label      	"• GardocExtractorWithCache")
		    stereotype 	(object ItemLabel
			Parent_View 	@329
			location   	(3569, 10142)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	554
			justify    	0
			label      	"<<KExtractorPlugin>>")
		    icon_style 	"Label"
		    fill_color 	15448575
		    quidu      	"55C211DB00A8"
		    width      	572
		    height     	182
		    annotation 	8
		    autoResize 	TRUE)
		(object InheritView "" @330
		    stereotype 	TRUE
		    line_color 	3342489
		    quidu      	"55C211EE01A5"
		    client     	@329
		    supplier   	@196
		    vertices   	(list Points
			(4132, 10167)
			(4386, 10121))
		    line_style 	0)
		(object UsesView "" @331
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	(object SegLabel @332
			Parent_View 	@331
			location   	(4111, 11112)
			font       	(object Font
			    size       	10
			    face       	"Arial"
			    charSet    	204
			    bold       	FALSE
			    italics    	FALSE
			    underline  	FALSE
			    strike     	FALSE
			    color      	0
			    default_color 	TRUE)
			anchor     	10
			anchor_loc 	1
			nlines     	1
			max_width  	450
			justify    	0
			label      	"<<uses>>"
			pctDist    	0.473380
			height     	118
			orientation 	1)
		    line_color 	3342489
		    quidu      	"55CDA028032C"
		    client     	@329
		    supplier   	@316
		    vertices   	(list Points
			(3885, 10312)
			(4590, 11901))
		    line_style 	0)
		(object ClassView "Class" "Logical View::external::ConfluenceSupport::com.atlassian.renderer.v2.macro::BaseMacro" @333
		    ShowCompartmentStereotypes 	TRUE
		    SuppressAttribute 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    location   	(6099, 9834)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	TRUE
			underline  	FALSE
			strike     	FALSE
			color      	658120
			default_color 	FALSE)
		    label      	(object ItemLabel
			Parent_View 	@333
			location   	(5815, 9806)
			fill_color 	13434879
			nlines     	1
			max_width  	568
			justify    	0
			label      	"BaseMacro")
		    stereotype 	(object ItemLabel
			Parent_View 	@333
			location   	(5815, 9756)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	568
			justify    	0
			label      	"<<SimpleClass>>")
		    icon_style 	"Label"
		    line_color 	14803425
		    fill_color 	14803425
		    quidu      	"55CDA4FA0245"
		    width      	586
		    height     	180
		    annotation 	8
		    autoResize 	TRUE)
		(object InheritView "" @334
		    stereotype 	TRUE
		    line_color 	3342489
		    quidu      	"55CDA5430173"
		    client     	@194
		    supplier   	@333
		    vertices   	(list Points
			(5627, 9941)
			(5805, 9901))
		    line_style 	0)
		(object ClassView "Class" "Logical View::external::ConfluenceSupport::com.atlassian.confluence.pages.actions::ViewDraftAttachmentsAction" @335
		    ShowCompartmentStereotypes 	TRUE
		    SuppressAttribute 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    location   	(390, 11469)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	658120
			default_color 	FALSE)
		    label      	(object ItemLabel
			Parent_View 	@335
			location   	(14, 11441)
			fill_color 	13434879
			nlines     	1
			max_width  	752
			justify    	0
			label      	"• ViewDraftAttachmentsAction")
		    stereotype 	(object ItemLabel
			Parent_View 	@335
			location   	(14, 11391)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	752
			justify    	0
			label      	"<<SimpleClass>>")
		    icon_style 	"Label"
		    line_color 	14803425
		    fill_color 	14803425
		    quidu      	"4ADD5A9A02A1"
		    width      	770
		    height     	180
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::GarViewLastAddedAttachmentsAction" @336
		    ShowCompartmentStereotypes 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(465, 12009)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@336
			location   	(98, 11950)
			fill_color 	13434879
			nlines     	1
			max_width  	734
			justify    	0
			label      	"GarViewLastAddedAttachmentsAction")
		    stereotype 	(object ItemLabel
			Parent_View 	@336
			location   	(98, 11900)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	734
			justify    	0
			label      	"<<KActionPlugin>>")
		    icon_style 	"Label"
		    fill_color 	15448575
		    quidu      	"5603F12B0180"
		    compartment 	(object Compartment
			Parent_View 	@336
			location   	(98, 12011)
			font       	(object Font
			    size       	10
			    face       	"Arial"
			    charSet    	204
			    bold       	FALSE
			    italics    	FALSE
			    underline  	FALSE
			    strike     	FALSE
			    color      	0
			    default_color 	TRUE)
			icon_style 	"Icon"
			fill_color 	16777215
			anchor     	2
			nlines     	2
			max_width  	365
			justify    	1)
		    width      	752
		    height     	242
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::RemoveOldFilesWhichCreatedThenCreateUvsQueryJob" @337
		    ShowCompartmentStereotypes 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(945, 11151)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@337
			location   	(239, 11122)
			fill_color 	13434879
			nlines     	1
			max_width  	1412
			justify    	0
			label      	"• RemoveOldFilesWhichCreatedThenCreateUvsQueryJob")
		    stereotype 	(object ItemLabel
			Parent_View 	@337
			location   	(239, 11072)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	1412
			justify    	0
			label      	"<<KJobPlugin>>")
		    icon_style 	"Label"
		    fill_color 	15448575
		    quidu      	"561E5BFE02BA"
		    width      	1430
		    height     	182
		    annotation 	8
		    autoResize 	TRUE)
		(object InheritView "" @338
		    stereotype 	TRUE
		    line_color 	3342489
		    quidu      	"561E5C6402D9"
		    client     	@337
		    supplier   	@284
		    vertices   	(list Points
			(950, 11059)
			(1124, 8844))
		    line_style 	0)
		(object ClassView "Class" "Logical View::external::ConfluenceSupport::com.opensymphony.webwork.interceptor::ServletRequestAware" @339
		    ShowCompartmentStereotypes 	TRUE
		    SuppressAttribute 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    location   	(1383, 11595)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	658120
			default_color 	FALSE)
		    label      	(object ItemLabel
			Parent_View 	@339
			location   	(1041, 11567)
			fill_color 	13434879
			nlines     	1
			max_width  	684
			justify    	0
			label      	"• ServletRequestAware")
		    stereotype 	(object ItemLabel
			Parent_View 	@339
			location   	(1041, 11517)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	684
			justify    	0
			label      	"<<Facet>>")
		    icon_style 	"Label"
		    line_color 	14803425
		    fill_color 	14803425
		    quidu      	"4A66D67E012C"
		    width      	702
		    height     	180
		    annotation 	8
		    autoResize 	TRUE)
		(object InheritView "" @340
		    stereotype 	TRUE
		    line_color 	3342489
		    quidu      	"5628C9830199"
		    client     	@336
		    supplier   	@267
		    vertices   	(list Points
			(537, 11887)
			(5410, 3756))
		    line_style 	0)
		(object RealizeView "" @341
		    stereotype 	TRUE
		    line_color 	3342489
		    quidu      	"5628C98E0197"
		    client     	@336
		    supplier   	@339
		    vertices   	(list Points
			(730, 11887)
			(1181, 11685))
		    line_style 	0)))
	(object ClassDiagram "Main"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ClassUID"
		    value      	"4C3F07400293"))
	    quid       	"4C3F078B035D"
	    title      	"Main"
	    zoom       	100
	    max_height 	28350
	    max_width  	21600
	    origin_x   	0
	    origin_y   	0
	    items      	(list diagram_item_list
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::DocCardXPlugin::DocCardXPackage" @342
		    ShowCompartmentStereotypes 	TRUE
		    SuppressAttribute 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(906, 687)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@342
			location   	(718, 659)
			fill_color 	13434879
			nlines     	1
			max_width  	376
			justify    	0
			label      	"DocCardXPackage")
		    stereotype 	(object ItemLabel
			Parent_View 	@342
			location   	(718, 609)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	376
			justify    	0
			label      	"<<XPackage>>")
		    icon_style 	"Label"
		    fill_color 	13357823
		    quidu      	"4C3F0795012B"
		    width      	394
		    height     	180
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::external::JavaConfluence::ConfluencePlugins::XWork::pages" @343
		    ShowCompartmentStereotypes 	TRUE
		    SuppressAttribute 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    location   	(960, 153)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	658120
			default_color 	FALSE)
		    label      	(object ItemLabel
			Parent_View 	@343
			location   	(818, 125)
			fill_color 	13434879
			nlines     	1
			max_width  	284
			justify    	0
			label      	"• pages")
		    stereotype 	(object ItemLabel
			Parent_View 	@343
			location   	(818, 75)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	281
			justify    	0
			label      	"<<XPackage>>")
		    icon_style 	"Label"
		    line_color 	14803425
		    fill_color 	14803425
		    quidu      	"477DDB6001CD"
		    width      	302
		    height     	180
		    annotation 	8
		    autoResize 	TRUE)
		(object InheritView "" @344
		    stereotype 	TRUE
		    line_color 	3342489
		    quidu      	"4C3F07B6023E"
		    client     	@342
		    supplier   	@343
		    vertices   	(list Points
			(913, 596)
			(950, 243))
		    line_style 	0)))
	(object ClassDiagram "Main"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ClassUID"
		    value      	"4C3F0795012B")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsChanged"
		    value      	"true"))
	    quid       	"4C3F07CF039E"
	    title      	"Main"
	    zoom       	100
	    max_height 	28350
	    max_width  	21600
	    origin_x   	0
	    origin_y   	4983
	    items      	(list diagram_item_list
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::DPOUVSSpaceConfig" @345
		    ShowCompartmentStereotypes 	TRUE
		    SuppressAttribute 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    location   	(495, 504)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	13110000
			default_color 	FALSE)
		    label      	(object ItemLabel
			Parent_View 	@345
			location   	(279, 488)
			nlines     	1
			max_width  	432
			justify    	0
			label      	"DPOUVSSpaceConfig")
		    stereotype 	(object ItemLabel
			Parent_View 	@345
			location   	(279, 438)
			anchor     	10
			nlines     	1
			max_width  	432
			justify    	0
			label      	"<<KActionPlugin>>")
		    icon_style 	"Label"
		    line_color 	13110000
		    fill_color 	16777215
		    quidu      	"4C3F05E80307"
		    width      	450
		    height     	157
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::DocCardXPlugin::DocCardXPackage::DPOUVSSpaceConfigSave" @346
		    ShowCompartmentStereotypes 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(1269, 411)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@346
			location   	(1011, 359)
			fill_color 	13434879
			nlines     	1
			max_width  	516
			justify    	0
			label      	"DPOUVSSpaceConfigSave")
		    stereotype 	(object ItemLabel
			Parent_View 	@346
			location   	(1011, 309)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	516
			justify    	0
			label      	"<<XAction>>")
		    icon_style 	"Label"
		    fill_color 	13357823
		    quidu      	"4C3F08160234"
		    width      	534
		    height     	228
		    annotation 	8
		    autoResize 	TRUE)
		(object UsesView "" @347
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	(object SegLabel @348
			Parent_View 	@347
			location   	(874, 578)
			font       	(object Font
			    size       	10
			    face       	"Arial"
			    charSet    	204
			    bold       	FALSE
			    italics    	FALSE
			    underline  	FALSE
			    strike     	FALSE
			    color      	0
			    default_color 	TRUE)
			anchor     	10
			anchor_loc 	1
			nlines     	1
			max_width  	450
			justify    	0
			label      	"<<call>>"
			pctDist    	0.500000
			height     	120
			orientation 	0)
		    line_color 	3342489
		    quidu      	"4C3F08310066"
		    client     	@346
		    supplier   	@345
		    vertices   	(list Points
			(1001, 442)
			(720, 475))
		    line_style 	0)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardView::spaceconfig_dpouvs" @349
		    ShowCompartmentStereotypes 	TRUE
		    SuppressAttribute 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    location   	(1965, 930)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	13110000
			default_color 	FALSE)
		    label      	(object ItemLabel
			Parent_View 	@349
			location   	(1763, 903)
			nlines     	1
			max_width  	404
			justify    	0
			label      	"spaceconfig_dpouvs")
		    stereotype 	(object ItemLabel
			Parent_View 	@349
			location   	(1763, 853)
			anchor     	10
			nlines     	1
			max_width  	404
			justify    	0
			label      	"<<VM>>")
		    icon_style 	"Label"
		    line_color 	13110000
		    fill_color 	16777215
		    quidu      	"4C3F08EB03A2"
		    width      	422
		    height     	178
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::DocCardXPlugin::DocCardXPackage::DPOUVSSpaceConfig" @350
		    ShowCompartmentStereotypes 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(1263, 759)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@350
			location   	(1033, 677)
			fill_color 	13434879
			nlines     	1
			max_width  	460
			justify    	0
			label      	"DPOUVSSpaceConfig")
		    stereotype 	(object ItemLabel
			Parent_View 	@350
			location   	(1033, 627)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	460
			justify    	0
			label      	"<<XAction>>")
		    icon_style 	"Label"
		    fill_color 	13357823
		    quidu      	"4C3F07FC0353"
		    compartment 	(object Compartment
			Parent_View 	@350
			location   	(1033, 782)
			font       	(object Font
			    size       	10
			    face       	"Arial"
			    charSet    	204
			    bold       	FALSE
			    italics    	FALSE
			    underline  	FALSE
			    strike     	FALSE
			    color      	0
			    default_color 	TRUE)
			icon_style 	"Icon"
			fill_color 	16777215
			anchor     	2
			nlines     	2
			max_width  	462
			justify    	1)
		    width      	478
		    height     	288
		    annotation 	8
		    autoResize 	TRUE)
		(object UsesView "" @351
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	(object SegLabel @352
			Parent_View 	@351
			location   	(834, 742)
			font       	(object Font
			    size       	10
			    face       	"Arial"
			    charSet    	204
			    bold       	FALSE
			    italics    	FALSE
			    underline  	FALSE
			    strike     	FALSE
			    color      	0
			    default_color 	TRUE)
			anchor     	10
			anchor_loc 	1
			nlines     	1
			max_width  	450
			justify    	0
			label      	"<<call>>"
			pctDist    	0.500000
			height     	120
			orientation 	0)
		    line_color 	3342489
		    quidu      	"4C3F082C01ED"
		    client     	@350
		    supplier   	@345
		    vertices   	(list Points
			(1023, 679)
			(720, 578))
		    line_style 	0)
		(object AssociationViewNew "$UNNAMED$0" @353
		    location   	(1627, 846)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	TRUE
		    line_color 	3342489
		    quidu      	"4C3F0AAC0342"
		    roleview_list 	(list RoleViews
			(object RoleView "success" @354
			    Parent_View 	@353
			    location   	(364, 87)
			    font       	(object Font
				size       	10
				face       	"Arial"
				charSet    	204
				bold       	FALSE
				italics    	FALSE
				underline  	FALSE
				strike     	FALSE
				color      	0
				default_color 	TRUE)
			    label      	(object SegLabel @355
				Parent_View 	@354
				location   	(1690, 812)
				font       	(object Font
				    size       	10
				    face       	"Arial"
				    charSet    	204
				    bold       	FALSE
				    italics    	FALSE
				    underline  	FALSE
				    strike     	FALSE
				    color      	0
				    default_color 	TRUE)
				anchor     	1
				anchor_loc 	1
				nlines     	1
				max_width  	185
				justify    	0
				label      	"+success"
				pctDist    	0.410216
				height     	49
				orientation 	0)
			    stereotype 	(object SegLabel @356
				Parent_View 	@354
				location   	(1715, 734)
				font       	(object Font
				    size       	10
				    face       	"Arial"
				    charSet    	204
				    bold       	FALSE
				    italics    	FALSE
				    underline  	FALSE
				    strike     	FALSE
				    color      	0
				    default_color 	TRUE)
				anchor     	10
				anchor_loc 	1
				nlines     	1
				max_width  	450
				justify    	0
				label      	"<<velocity>>"
				pctDist    	0.355599
				height     	96
				orientation 	0)
			    line_color 	3342489
			    quidu      	"4C3F0AAD022B"
			    client     	@353
			    supplier   	@349
			    vertices   	(list Points
				(1627, 846)
				(1753, 877))
			    line_style 	0)
			(object RoleView "$UNNAMED$1" @357
			    Parent_View 	@353
			    location   	(364, 87)
			    stereotype 	TRUE
			    line_color 	3342489
			    quidu      	"4C3F0AAD022E"
			    client     	@353
			    supplier   	@350
			    vertices   	(list Points
				(1627, 846)
				(1502, 815))
			    line_style 	0)))
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::ResponsibleDataLoader" @358
		    ShowCompartmentStereotypes 	TRUE
		    SuppressAttribute 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    location   	(444, 1494)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	13110000
			default_color 	FALSE)
		    label      	(object ItemLabel
			Parent_View 	@358
			location   	(180, 1478)
			nlines     	1
			max_width  	528
			justify    	0
			label      	"• ResponsibleDataLoader")
		    stereotype 	(object ItemLabel
			Parent_View 	@358
			location   	(180, 1428)
			anchor     	10
			nlines     	1
			max_width  	528
			justify    	0
			label      	"<<KActionPlugin>>")
		    icon_style 	"Label"
		    line_color 	13110000
		    fill_color 	16777215
		    quidu      	"4C4558CD02DC"
		    width      	546
		    height     	157
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::DocCardXPlugin::DocCardXPackage::ResponsibleDataLoader" @359
		    ShowCompartmentStereotypes 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(1233, 1644)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@359
			location   	(968, 1587)
			fill_color 	13434879
			nlines     	1
			max_width  	530
			justify    	0
			label      	"• ResponsibleDataLoader")
		    stereotype 	(object ItemLabel
			Parent_View 	@359
			location   	(968, 1537)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	530
			justify    	0
			label      	"<<XAction>>")
		    icon_style 	"Label"
		    fill_color 	13357823
		    quidu      	"4C455B14034D"
		    compartment 	(object Compartment
			Parent_View 	@359
			location   	(968, 1692)
			font       	(object Font
			    size       	10
			    face       	"Arial"
			    charSet    	204
			    bold       	FALSE
			    italics    	FALSE
			    underline  	FALSE
			    strike     	FALSE
			    color      	0
			    default_color 	TRUE)
			icon_style 	"Icon"
			fill_color 	16777215
			anchor     	2
			nlines     	1
			max_width  	537
			justify    	1)
		    width      	548
		    height     	238
		    annotation 	8
		    autoResize 	TRUE)
		(object UsesView "" @360
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	(object SegLabel @361
			Parent_View 	@360
			location   	(817, 1686)
			font       	(object Font
			    size       	10
			    face       	"Arial"
			    charSet    	204
			    bold       	FALSE
			    italics    	FALSE
			    underline  	FALSE
			    strike     	FALSE
			    color      	0
			    default_color 	TRUE)
			anchor     	10
			anchor_loc 	1
			nlines     	1
			max_width  	450
			justify    	0
			label      	"<<call>>"
			pctDist    	0.500000
			height     	120
			orientation 	0)
		    line_color 	3342489
		    quidu      	"4C455B3502CA"
		    client     	@359
		    supplier   	@358
		    vertices   	(list Points
			(958, 1590)
			(717, 1545))
		    line_style 	0)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::CreateOGVFromFile" @362
		    ShowCompartmentStereotypes 	TRUE
		    SuppressAttribute 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    location   	(390, 1965)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	13110000
			default_color 	FALSE)
		    label      	(object ItemLabel
			Parent_View 	@362
			location   	(189, 1949)
			nlines     	1
			max_width  	402
			justify    	0
			label      	"CreateOGVFromFile")
		    stereotype 	(object ItemLabel
			Parent_View 	@362
			location   	(189, 1899)
			anchor     	10
			nlines     	1
			max_width  	402
			justify    	0
			label      	"<<KActionPlugin>>")
		    icon_style 	"Label"
		    line_color 	13110000
		    fill_color 	16777215
		    quidu      	"4C47E3350327"
		    width      	420
		    height     	157
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::DocCardXPlugin::DocCardXPackage::CreateOGVFromFile" @363
		    ShowCompartmentStereotypes 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(1221, 2022)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@363
			location   	(1020, 1970)
			fill_color 	13434879
			nlines     	1
			max_width  	402
			justify    	0
			label      	"CreateOGVFromFile")
		    stereotype 	(object ItemLabel
			Parent_View 	@363
			location   	(1020, 1920)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	402
			justify    	0
			label      	"<<XAction>>")
		    icon_style 	"Label"
		    fill_color 	13357823
		    quidu      	"4C481A15029E"
		    width      	420
		    height     	228
		    annotation 	8
		    autoResize 	TRUE)
		(object UsesView "" @364
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	(object SegLabel @365
			Parent_View 	@364
			location   	(798, 2113)
			font       	(object Font
			    size       	10
			    face       	"Arial"
			    charSet    	204
			    bold       	FALSE
			    italics    	FALSE
			    underline  	FALSE
			    strike     	FALSE
			    color      	0
			    default_color 	TRUE)
			anchor     	10
			anchor_loc 	1
			nlines     	1
			max_width  	450
			justify    	0
			label      	"<<call>>"
			pctDist    	0.500000
			height     	120
			orientation 	0)
		    line_color 	3342489
		    quidu      	"4C481A2F0208"
		    client     	@363
		    supplier   	@362
		    vertices   	(list Points
			(1010, 2006)
			(600, 1979))
		    line_style 	0)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::CreateSettingsDpoUvs" @366
		    ShowCompartmentStereotypes 	TRUE
		    SuppressAttribute 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    location   	(426, 2385)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	13110000
			default_color 	FALSE)
		    label      	(object ItemLabel
			Parent_View 	@366
			location   	(203, 2369)
			nlines     	1
			max_width  	446
			justify    	0
			label      	"CreateSettingsDpoUvs")
		    stereotype 	(object ItemLabel
			Parent_View 	@366
			location   	(203, 2319)
			anchor     	10
			nlines     	1
			max_width  	446
			justify    	0
			label      	"<<KActionPlugin>>")
		    icon_style 	"Label"
		    line_color 	13110000
		    fill_color 	16777215
		    quidu      	"4C481CD10276"
		    width      	464
		    height     	157
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::DocCardXPlugin::DocCardXPackage::CreateSettingsDpoUvs" @367
		    ShowCompartmentStereotypes 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(1224, 2418)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@367
			location   	(1001, 2366)
			fill_color 	13434879
			nlines     	1
			max_width  	446
			justify    	0
			label      	"CreateSettingsDpoUvs")
		    stereotype 	(object ItemLabel
			Parent_View 	@367
			location   	(1001, 2316)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	446
			justify    	0
			label      	"<<XAction>>")
		    icon_style 	"Label"
		    fill_color 	13357823
		    quidu      	"4C481D2800A5"
		    width      	464
		    height     	228
		    annotation 	8
		    autoResize 	TRUE)
		(object UsesView "" @368
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	(object SegLabel @369
			Parent_View 	@368
			location   	(821, 2521)
			font       	(object Font
			    size       	10
			    face       	"Arial"
			    charSet    	204
			    bold       	FALSE
			    italics    	FALSE
			    underline  	FALSE
			    strike     	FALSE
			    color      	0
			    default_color 	TRUE)
			anchor     	10
			anchor_loc 	1
			nlines     	1
			max_width  	450
			justify    	0
			label      	"<<call>>"
			pctDist    	0.500000
			height     	120
			orientation 	0)
		    line_color 	3342489
		    quidu      	"4C481D4403D4"
		    client     	@367
		    supplier   	@366
		    vertices   	(list Points
			(991, 2407)
			(658, 2394))
		    line_style 	0)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::CreateUvsQuery" @370
		    ShowCompartmentStereotypes 	TRUE
		    SuppressAttribute 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    location   	(2808, 957)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	13110000
			default_color 	FALSE)
		    label      	(object ItemLabel
			Parent_View 	@370
			location   	(2628, 941)
			nlines     	1
			max_width  	360
			justify    	0
			label      	"CreateUvsQuery")
		    stereotype 	(object ItemLabel
			Parent_View 	@370
			location   	(2628, 891)
			anchor     	10
			nlines     	1
			max_width  	360
			justify    	0
			label      	"<<KActionPlugin>>")
		    icon_style 	"Label"
		    line_color 	13110000
		    fill_color 	16777215
		    quidu      	"4C652CD603D7"
		    width      	378
		    height     	157
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::DocCardXPlugin::DocCardXPackage::CreateUvsQuery" @371
		    ShowCompartmentStereotypes 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(3870, 936)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@371
			location   	(3627, 857)
			fill_color 	13434879
			nlines     	1
			max_width  	486
			justify    	0
			label      	"CreateUvsQuery")
		    stereotype 	(object ItemLabel
			Parent_View 	@371
			location   	(3627, 807)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	486
			justify    	0
			label      	"<<XAction>>")
		    icon_style 	"Label"
		    fill_color 	13357823
		    quidu      	"4C652D23033C"
		    compartment 	(object Compartment
			Parent_View 	@371
			location   	(3627, 962)
			font       	(object Font
			    size       	10
			    face       	"Arial"
			    charSet    	204
			    bold       	FALSE
			    italics    	FALSE
			    underline  	FALSE
			    strike     	FALSE
			    color      	0
			    default_color 	TRUE)
			icon_style 	"Icon"
			fill_color 	16777215
			anchor     	2
			nlines     	2
			max_width  	537
			justify    	1)
		    width      	504
		    height     	282
		    annotation 	8
		    autoResize 	TRUE)
		(object UsesView "" @372
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	(object SegLabel @373
			Parent_View 	@372
			location   	(3309, 1066)
			font       	(object Font
			    size       	10
			    face       	"Arial"
			    charSet    	204
			    bold       	FALSE
			    italics    	FALSE
			    underline  	FALSE
			    strike     	FALSE
			    color      	0
			    default_color 	TRUE)
			anchor     	10
			anchor_loc 	1
			nlines     	1
			max_width  	450
			justify    	0
			label      	"<<call>>"
			pctDist    	0.500000
			height     	120
			orientation 	0)
		    line_color 	3342489
		    quidu      	"4C652D50026E"
		    client     	@371
		    supplier   	@370
		    vertices   	(list Points
			(3617, 940)
			(2997, 952))
		    line_style 	0)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::EditUvsQuery" @374
		    ShowCompartmentStereotypes 	TRUE
		    SuppressAttribute 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    location   	(1908, 2229)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	13110000
			default_color 	FALSE)
		    label      	(object ItemLabel
			Parent_View 	@374
			location   	(1728, 2213)
			nlines     	1
			max_width  	360
			justify    	0
			label      	"EditUvsQuery")
		    stereotype 	(object ItemLabel
			Parent_View 	@374
			location   	(1728, 2163)
			anchor     	10
			nlines     	1
			max_width  	360
			justify    	0
			label      	"<<KActionPlugin>>")
		    icon_style 	"Label"
		    line_color 	13110000
		    fill_color 	16777215
		    quidu      	"4C6E6BA901D1"
		    width      	378
		    height     	157
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::DocCardXPlugin::DocCardXPackage::EditUvsQuery" @375
		    ShowCompartmentStereotypes 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(2751, 2058)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@375
			location   	(2485, 2001)
			fill_color 	13434879
			nlines     	1
			max_width  	532
			justify    	0
			label      	"• EditUvsQuery")
		    stereotype 	(object ItemLabel
			Parent_View 	@375
			location   	(2485, 1951)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	532
			justify    	0
			label      	"<<XAction>>")
		    icon_style 	"Label"
		    fill_color 	13357823
		    quidu      	"4C6E6C2D03B0"
		    compartment 	(object Compartment
			Parent_View 	@375
			location   	(2485, 2106)
			font       	(object Font
			    size       	10
			    face       	"Arial"
			    charSet    	204
			    bold       	FALSE
			    italics    	FALSE
			    underline  	FALSE
			    strike     	FALSE
			    color      	0
			    default_color 	TRUE)
			icon_style 	"Icon"
			fill_color 	16777215
			anchor     	2
			nlines     	1
			max_width  	537
			justify    	1)
		    width      	550
		    height     	238
		    annotation 	8
		    autoResize 	TRUE)
		(object UsesView "" @376
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	(object SegLabel @377
			Parent_View 	@376
			location   	(2250, 2105)
			font       	(object Font
			    size       	10
			    face       	"Arial"
			    charSet    	204
			    bold       	FALSE
			    italics    	FALSE
			    underline  	FALSE
			    strike     	FALSE
			    color      	0
			    default_color 	TRUE)
			anchor     	10
			anchor_loc 	1
			nlines     	1
			max_width  	450
			justify    	0
			label      	"<<call>>"
			pctDist    	0.572564
			height     	52
			orientation 	1)
		    line_color 	3342489
		    quidu      	"4C6E6C4A022E"
		    client     	@375
		    supplier   	@374
		    vertices   	(list Points
			(2475, 2111)
			(2097, 2189))
		    line_style 	0)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::DocCardXPlugin::DocCardXPackage::DoCreateUvsQuery" @378
		    ShowCompartmentStereotypes 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(1950, 1308)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@378
			location   	(1726, 1255)
			fill_color 	13434879
			nlines     	1
			max_width  	448
			justify    	0
			label      	"• DoCreateUvsQuery")
		    stereotype 	(object ItemLabel
			Parent_View 	@378
			location   	(1726, 1205)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	448
			justify    	0
			label      	"<<XAction>>")
		    icon_style 	"Label"
		    fill_color 	13357823
		    quidu      	"4C652EC60067"
		    width      	466
		    height     	230
		    annotation 	8
		    autoResize 	TRUE)
		(object UsesView "" @379
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	(object SegLabel @380
			Parent_View 	@379
			location   	(2356, 1012)
			font       	(object Font
			    size       	10
			    face       	"Arial"
			    charSet    	204
			    bold       	FALSE
			    italics    	FALSE
			    underline  	FALSE
			    strike     	FALSE
			    color      	0
			    default_color 	TRUE)
			anchor     	10
			anchor_loc 	1
			nlines     	1
			max_width  	450
			justify    	0
			label      	"<<call>>"
			pctDist    	0.500000
			height     	120
			orientation 	0)
		    line_color 	3342489
		    quidu      	"4C652F0100B6"
		    client     	@378
		    supplier   	@370
		    vertices   	(list Points
			(2183, 1211)
			(2618, 1033))
		    line_style 	0)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardView::createuvsquery_error" @381
		    ShowCompartmentStereotypes 	TRUE
		    SuppressAttribute 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    location   	(2142, 1776)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	13110000
			default_color 	FALSE)
		    label      	(object ItemLabel
			Parent_View 	@381
			location   	(1936, 1748)
			nlines     	1
			max_width  	412
			justify    	0
			label      	"createuvsquery_error")
		    stereotype 	(object ItemLabel
			Parent_View 	@381
			location   	(1936, 1698)
			anchor     	10
			nlines     	1
			max_width  	412
			justify    	0
			label      	"<<VM>>")
		    icon_style 	"Label"
		    line_color 	13110000
		    fill_color 	16777215
		    quidu      	"4C6BA0390203"
		    width      	430
		    height     	180
		    annotation 	8
		    autoResize 	TRUE)
		(object AssociationViewNew "$UNNAMED$2" @382
		    location   	(2050, 1554)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	TRUE
		    line_color 	3342489
		    quidu      	"4C6BA07303BE"
		    roleview_list 	(list RoleViews
			(object RoleView "success" @383
			    Parent_View 	@382
			    location   	(100, 246)
			    font       	(object Font
				size       	10
				face       	"Arial"
				charSet    	204
				bold       	FALSE
				italics    	FALSE
				underline  	FALSE
				strike     	FALSE
				color      	0
				default_color 	TRUE)
			    label      	(object SegLabel @384
				Parent_View 	@383
				location   	(2204, 1626)
				font       	(object Font
				    size       	10
				    face       	"Arial"
				    charSet    	204
				    bold       	FALSE
				    italics    	FALSE
				    underline  	FALSE
				    strike     	FALSE
				    color      	0
				    default_color 	TRUE)
				anchor     	1
				anchor_loc 	1
				nlines     	1
				max_width  	185
				justify    	0
				label      	"+success"
				pctDist    	0.880161
				height     	116
				orientation 	0)
			    stereotype 	(object SegLabel @385
				Parent_View 	@383
				location   	(2229, 1548)
				font       	(object Font
				    size       	10
				    face       	"Arial"
				    charSet    	204
				    bold       	FALSE
				    italics    	FALSE
				    underline  	FALSE
				    strike     	FALSE
				    color      	0
				    default_color 	TRUE)
				anchor     	10
				anchor_loc 	1
				nlines     	1
				max_width  	450
				justify    	0
				label      	"<<velocity-xml>>"
				pctDist    	0.500000
				height     	120
				orientation 	0)
			    line_color 	3342489
			    quidu      	"4C6BA074029E"
			    client     	@382
			    supplier   	@381
			    vertices   	(list Points
				(2050, 1554)
				(2104, 1685))
			    line_style 	0)
			(object RoleView "$UNNAMED$3" @386
			    Parent_View 	@382
			    location   	(100, 246)
			    stereotype 	TRUE
			    line_color 	3342489
			    quidu      	"4C6BA07402A0"
			    client     	@382
			    supplier   	@378
			    vertices   	(list Points
				(2050, 1554)
				(1996, 1423))
			    line_style 	0)))
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::DocCardXPlugin::DocCardXPackage::CreateUvsQueryWithoutDocCard" @387
		    ShowCompartmentStereotypes 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(3030, 1476)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@387
			location   	(2693, 1423)
			fill_color 	13434879
			nlines     	1
			max_width  	674
			justify    	0
			label      	"• CreateUvsQueryWithoutDocCard")
		    stereotype 	(object ItemLabel
			Parent_View 	@387
			location   	(2693, 1373)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	674
			justify    	0
			label      	"<<XAction>>")
		    icon_style 	"Label"
		    fill_color 	13357823
		    quidu      	"4C74FCB20062"
		    width      	692
		    height     	230
		    annotation 	8
		    autoResize 	TRUE)
		(object UsesView "" @388
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	(object SegLabel @389
			Parent_View 	@388
			location   	(2940, 1092)
			font       	(object Font
			    size       	10
			    face       	"Arial"
			    charSet    	204
			    bold       	FALSE
			    italics    	FALSE
			    underline  	FALSE
			    strike     	FALSE
			    color      	0
			    default_color 	TRUE)
			anchor     	10
			anchor_loc 	1
			nlines     	1
			max_width  	450
			justify    	0
			label      	"<<call>>"
			pctDist    	0.747002
			height     	68
			orientation 	1)
		    line_color 	3342489
		    quidu      	"4C74FCF7025D"
		    client     	@387
		    supplier   	@370
		    vertices   	(list Points
			(2980, 1360)
			(2841, 1035))
		    line_style 	0)
		(object AssociationViewNew "$UNNAMED$4" @390
		    location   	(2521, 1647)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	TRUE
		    line_color 	3342489
		    quidu      	"4C74FD3600A6"
		    roleview_list 	(list RoleViews
			(object RoleView "success" @391
			    Parent_View 	@390
			    location   	(-509, 171)
			    font       	(object Font
				size       	10
				face       	"Arial"
				charSet    	204
				bold       	FALSE
				italics    	FALSE
				underline  	FALSE
				strike     	FALSE
				color      	0
				default_color 	TRUE)
			    label      	(object SegLabel @392
				Parent_View 	@391
				location   	(2669, 1771)
				font       	(object Font
				    size       	10
				    face       	"Arial"
				    charSet    	204
				    bold       	FALSE
				    italics    	FALSE
				    underline  	FALSE
				    strike     	FALSE
				    color      	0
				    default_color 	TRUE)
				anchor     	1
				anchor_loc 	1
				nlines     	1
				max_width  	185
				justify    	0
				label      	"+success"
				pctDist    	-0.583226
				height     	165
				orientation 	0)
			    stereotype 	(object SegLabel @393
				Parent_View 	@391
				location   	(2694, 1693)
				font       	(object Font
				    size       	10
				    face       	"Arial"
				    charSet    	204
				    bold       	FALSE
				    italics    	FALSE
				    underline  	FALSE
				    strike     	FALSE
				    color      	0
				    default_color 	TRUE)
				anchor     	10
				anchor_loc 	1
				nlines     	1
				max_width  	450
				justify    	0
				label      	"<<velocity-xml>>"
				pctDist    	-0.618360
				height     	104
				orientation 	0)
			    line_color 	3342489
			    quidu      	"4C74FD36031A"
			    client     	@390
			    supplier   	@381
			    vertices   	(list Points
				(2521, 1647)
				(2357, 1702))
			    line_style 	0)
			(object RoleView "$UNNAMED$5" @394
			    Parent_View 	@390
			    location   	(-509, 171)
			    stereotype 	TRUE
			    line_color 	3342489
			    quidu      	"4C74FD36031D"
			    client     	@390
			    supplier   	@387
			    vertices   	(list Points
				(2521, 1647)
				(2683, 1591))
			    line_style 	0)))
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::SearchUvsQuery" @395
		    ShowCompartmentStereotypes 	TRUE
		    SuppressAttribute 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    location   	(2364, 150)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	13110000
			default_color 	FALSE)
		    label      	(object ItemLabel
			Parent_View 	@395
			location   	(2184, 134)
			nlines     	1
			max_width  	360
			justify    	0
			label      	"SearchUvsQuery")
		    stereotype 	(object ItemLabel
			Parent_View 	@395
			location   	(2184, 84)
			anchor     	10
			nlines     	1
			max_width  	360
			justify    	0
			label      	"<<KActionPlugin>>")
		    icon_style 	"Label"
		    line_color 	13110000
		    fill_color 	16777215
		    quidu      	"4C7B5C0402FD"
		    width      	378
		    height     	157
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardView::searchuvsquery" @396
		    ShowCompartmentStereotypes 	TRUE
		    SuppressAttribute 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    location   	(3564, 384)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	13110000
			default_color 	FALSE)
		    label      	(object ItemLabel
			Parent_View 	@396
			location   	(3410, 356)
			nlines     	1
			max_width  	308
			justify    	0
			label      	"searchuvsquery")
		    stereotype 	(object ItemLabel
			Parent_View 	@396
			location   	(3410, 306)
			anchor     	10
			nlines     	1
			max_width  	308
			justify    	0
			label      	"<<VM>>")
		    icon_style 	"Label"
		    line_color 	13110000
		    fill_color 	16777215
		    quidu      	"4C7B5B2002EB"
		    width      	326
		    height     	180
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::DocCardXPlugin::DocCardXPackage::SearchUvsQuery" @397
		    ShowCompartmentStereotypes 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(2625, 495)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@397
			location   	(2441, 443)
			fill_color 	13434879
			nlines     	1
			max_width  	368
			justify    	0
			label      	"SearchUvsQuery")
		    stereotype 	(object ItemLabel
			Parent_View 	@397
			location   	(2441, 393)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	368
			justify    	0
			label      	"<<XAction>>")
		    icon_style 	"Label"
		    fill_color 	13357823
		    quidu      	"4C7B612902D7"
		    width      	386
		    height     	228
		    annotation 	8
		    autoResize 	TRUE)
		(object UsesView "" @398
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	(object SegLabel @399
			Parent_View 	@398
			location   	(2584, 294)
			font       	(object Font
			    size       	10
			    face       	"Arial"
			    charSet    	204
			    bold       	FALSE
			    italics    	FALSE
			    underline  	FALSE
			    strike     	FALSE
			    color      	0
			    default_color 	TRUE)
			anchor     	10
			anchor_loc 	1
			nlines     	1
			max_width  	450
			justify    	0
			label      	"<<call>>"
			pctDist    	0.225743
			height     	89
			orientation 	1)
		    line_color 	3342489
		    quidu      	"4C7B616A0339"
		    client     	@397
		    supplier   	@395
		    vertices   	(list Points
			(2538, 380)
			(2423, 228))
		    line_style 	0)
		(object AssociationViewNew "$UNNAMED$9" @400
		    location   	(3230, 263)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	TRUE
		    line_color 	3342489
		    quidu      	"4C7B617900C9"
		    roleview_list 	(list RoleViews
			(object RoleView "success" @401
			    Parent_View 	@400
			    location   	(605, -232)
			    font       	(object Font
				size       	10
				face       	"Arial"
				charSet    	204
				bold       	FALSE
				italics    	FALSE
				underline  	FALSE
				strike     	FALSE
				color      	0
				default_color 	TRUE)
			    label      	(object SegLabel @402
				Parent_View 	@401
				location   	(3315, 208)
				font       	(object Font
				    size       	10
				    face       	"Arial"
				    charSet    	204
				    bold       	FALSE
				    italics    	FALSE
				    underline  	FALSE
				    strike     	FALSE
				    color      	0
				    default_color 	TRUE)
				anchor     	1
				anchor_loc 	1
				nlines     	1
				max_width  	185
				justify    	0
				label      	"+success"
				pctDist    	0.223432
				height     	22
				orientation 	0)
			    stereotype 	(object SegLabel @403
				Parent_View 	@401
				location   	(3340, 130)
				font       	(object Font
				    size       	10
				    face       	"Arial"
				    charSet    	204
				    bold       	FALSE
				    italics    	FALSE
				    underline  	FALSE
				    strike     	FALSE
				    color      	0
				    default_color 	TRUE)
				anchor     	10
				anchor_loc 	1
				nlines     	1
				max_width  	450
				justify    	0
				label      	"<<velocity>>"
				pctDist    	0.314017
				height     	91
				orientation 	0)
			    line_color 	3342489
			    quidu      	"4C7B61790352"
			    client     	@400
			    supplier   	@396
			    vertices   	(list Points
				(3230, 263)
				(3509, 157)
				(3541, 293))
			    line_style 	0)
			(object RoleView "$UNNAMED$10" @404
			    Parent_View 	@400
			    location   	(605, -232)
			    stereotype 	TRUE
			    line_color 	3342489
			    quidu      	"4C7B61790355"
			    client     	@400
			    supplier   	@397
			    vertices   	(list Points
				(3230, 263)
				(2818, 419))
			    line_style 	0)))
		(object AssociationViewNew "$UNNAMED$11" @405
		    location   	(3227, 582)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	TRUE
		    line_color 	3342489
		    quidu      	"4C7B61A20268"
		    roleview_list 	(list RoleViews
			(object RoleView "input" @406
			    Parent_View 	@405
			    location   	(602, 87)
			    font       	(object Font
				size       	10
				face       	"Arial"
				charSet    	204
				bold       	FALSE
				italics    	FALSE
				underline  	FALSE
				strike     	FALSE
				color      	0
				default_color 	TRUE)
			    label      	(object SegLabel @407
				Parent_View 	@406
				location   	(3258, 545)
				font       	(object Font
				    size       	10
				    face       	"Arial"
				    charSet    	204
				    bold       	FALSE
				    italics    	FALSE
				    underline  	FALSE
				    strike     	FALSE
				    color      	0
				    default_color 	TRUE)
				anchor     	1
				anchor_loc 	1
				nlines     	1
				max_width  	116
				justify    	0
				label      	"+input"
				pctDist    	0.061266
				height     	42
				orientation 	0)
			    stereotype 	(object SegLabel @408
				Parent_View 	@406
				location   	(3316, 467)
				font       	(object Font
				    size       	10
				    face       	"Arial"
				    charSet    	204
				    bold       	FALSE
				    italics    	FALSE
				    underline  	FALSE
				    strike     	FALSE
				    color      	0
				    default_color 	TRUE)
				anchor     	10
				anchor_loc 	1
				nlines     	1
				max_width  	450
				justify    	0
				label      	"<<velocity>>"
				pctDist    	-0.074980
				height     	86
				orientation 	0)
			    line_color 	3342489
			    quidu      	"4C7B61A300DF"
			    client     	@405
			    supplier   	@396
			    vertices   	(list Points
				(3227, 582)
				(3484, 619)
				(3532, 474))
			    line_style 	0)
			(object RoleView "$UNNAMED$12" @409
			    Parent_View 	@405
			    location   	(602, 87)
			    stereotype 	TRUE
			    line_color 	3342489
			    quidu      	"4C7B61A300E2"
			    client     	@405
			    supplier   	@397
			    vertices   	(list Points
				(3227, 582)
				(2818, 521))
			    line_style 	0)))
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::EditDocCard" @410
		    ShowCompartmentStereotypes 	TRUE
		    SuppressAttribute 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    location   	(2364, 2505)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	13110000
			default_color 	FALSE)
		    label      	(object ItemLabel
			Parent_View 	@410
			location   	(2184, 2489)
			nlines     	1
			max_width  	360
			justify    	0
			label      	"EditDocCard")
		    stereotype 	(object ItemLabel
			Parent_View 	@410
			location   	(2184, 2439)
			anchor     	10
			nlines     	1
			max_width  	360
			justify    	0
			label      	"<<KActionPlugin>>")
		    icon_style 	"Label"
		    line_color 	13110000
		    fill_color 	16777215
		    quidu      	"4C7F6BDB0380"
		    width      	378
		    height     	157
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::DocCardXPlugin::DocCardXPackage::EditDocCard" @411
		    ShowCompartmentStereotypes 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(2775, 3024)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@411
			location   	(2509, 2967)
			fill_color 	13434879
			nlines     	1
			max_width  	532
			justify    	0
			label      	"• EditDocCard")
		    stereotype 	(object ItemLabel
			Parent_View 	@411
			location   	(2509, 2917)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	532
			justify    	0
			label      	"<<XAction>>")
		    icon_style 	"Label"
		    fill_color 	13357823
		    quidu      	"4C7F6C98039B"
		    compartment 	(object Compartment
			Parent_View 	@411
			location   	(2509, 3072)
			font       	(object Font
			    size       	10
			    face       	"Arial"
			    charSet    	204
			    bold       	FALSE
			    italics    	FALSE
			    underline  	FALSE
			    strike     	FALSE
			    color      	0
			    default_color 	TRUE)
			icon_style 	"Icon"
			fill_color 	16777215
			anchor     	2
			nlines     	1
			max_width  	537
			justify    	1)
		    width      	550
		    height     	238
		    annotation 	8
		    autoResize 	TRUE)
		(object UsesView "" @412
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	(object SegLabel @413
			Parent_View 	@412
			location   	(2459, 2818)
			font       	(object Font
			    size       	10
			    face       	"Arial"
			    charSet    	204
			    bold       	FALSE
			    italics    	FALSE
			    underline  	FALSE
			    strike     	FALSE
			    color      	0
			    default_color 	TRUE)
			anchor     	10
			anchor_loc 	1
			nlines     	1
			max_width  	450
			justify    	0
			label      	"<<call>>"
			pctDist    	0.500000
			height     	120
			orientation 	0)
		    line_color 	3342489
		    quidu      	"4C7F6CD90006"
		    client     	@411
		    supplier   	@410
		    vertices   	(list Points
			(2679, 2904)
			(2425, 2583))
		    line_style 	0)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::RemoveDocCard" @414
		    ShowCompartmentStereotypes 	TRUE
		    SuppressAttribute 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    location   	(429, 3000)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	13110000
			default_color 	FALSE)
		    label      	(object ItemLabel
			Parent_View 	@414
			location   	(249, 2984)
			nlines     	1
			max_width  	360
			justify    	0
			label      	"RemoveDocCard")
		    stereotype 	(object ItemLabel
			Parent_View 	@414
			location   	(249, 2934)
			anchor     	10
			nlines     	1
			max_width  	360
			justify    	0
			label      	"<<KActionPlugin>>")
		    icon_style 	"Label"
		    line_color 	13110000
		    fill_color 	16777215
		    quidu      	"4D0095AC00E6"
		    width      	378
		    height     	157
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::DocCardXPlugin::DocCardXPackage::RemoveDocCard" @415
		    ShowCompartmentStereotypes 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(1473, 3009)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@415
			location   	(1246, 2952)
			fill_color 	13434879
			nlines     	1
			max_width  	454
			justify    	0
			label      	"• RemoveDocCard")
		    stereotype 	(object ItemLabel
			Parent_View 	@415
			location   	(1246, 2902)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	454
			justify    	0
			label      	"<<XAction>>")
		    icon_style 	"Label"
		    fill_color 	13357823
		    quidu      	"4D00976A02F2"
		    compartment 	(object Compartment
			Parent_View 	@415
			location   	(1246, 3057)
			font       	(object Font
			    size       	10
			    face       	"Arial"
			    charSet    	204
			    bold       	FALSE
			    italics    	FALSE
			    underline  	FALSE
			    strike     	FALSE
			    color      	0
			    default_color 	TRUE)
			icon_style 	"Icon"
			fill_color 	16777215
			anchor     	2
			nlines     	1
			max_width  	459
			justify    	1)
		    width      	472
		    height     	238
		    annotation 	8
		    autoResize 	TRUE)
		(object UsesView "" @416
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	(object SegLabel @417
			Parent_View 	@416
			location   	(926, 3073)
			font       	(object Font
			    size       	10
			    face       	"Arial"
			    charSet    	204
			    bold       	FALSE
			    italics    	FALSE
			    underline  	FALSE
			    strike     	FALSE
			    color      	0
			    default_color 	TRUE)
			anchor     	10
			anchor_loc 	1
			nlines     	1
			max_width  	450
			justify    	0
			label      	"<<call>>"
			pctDist    	0.503944
			height     	70
			orientation 	0)
		    line_color 	3342489
		    quidu      	"4D0097810113"
		    client     	@415
		    supplier   	@414
		    vertices   	(list Points
			(1236, 3006)
			(618, 3001))
		    line_style 	0)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::RemoveUvsQuery" @418
		    ShowCompartmentStereotypes 	TRUE
		    SuppressAttribute 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    location   	(2247, 3348)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	13110000
			default_color 	FALSE)
		    label      	(object ItemLabel
			Parent_View 	@418
			location   	(2066, 3332)
			nlines     	1
			max_width  	362
			justify    	0
			label      	"RemoveUvsQuery")
		    stereotype 	(object ItemLabel
			Parent_View 	@418
			location   	(2066, 3282)
			anchor     	10
			nlines     	1
			max_width  	362
			justify    	0
			label      	"<<KActionPlugin>>")
		    icon_style 	"Label"
		    line_color 	13110000
		    fill_color 	16777215
		    quidu      	"4D00ABF5021A"
		    width      	380
		    height     	157
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::DocCardXPlugin::DocCardXPackage::RemoveUvsQuery" @419
		    ShowCompartmentStereotypes 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(1497, 3360)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@419
			location   	(1270, 3303)
			fill_color 	13434879
			nlines     	1
			max_width  	454
			justify    	0
			label      	"• RemoveUvsQuery")
		    stereotype 	(object ItemLabel
			Parent_View 	@419
			location   	(1270, 3253)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	454
			justify    	0
			label      	"<<XAction>>")
		    icon_style 	"Label"
		    fill_color 	13357823
		    quidu      	"4D00AC53011B"
		    compartment 	(object Compartment
			Parent_View 	@419
			location   	(1270, 3408)
			font       	(object Font
			    size       	10
			    face       	"Arial"
			    charSet    	204
			    bold       	FALSE
			    italics    	FALSE
			    underline  	FALSE
			    strike     	FALSE
			    color      	0
			    default_color 	TRUE)
			icon_style 	"Icon"
			fill_color 	16777215
			anchor     	2
			nlines     	1
			max_width  	459
			justify    	1)
		    width      	472
		    height     	238
		    annotation 	8
		    autoResize 	TRUE)
		(object UsesView "" @420
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	(object SegLabel @421
			Parent_View 	@420
			location   	(1890, 3399)
			font       	(object Font
			    size       	10
			    face       	"Arial"
			    charSet    	204
			    bold       	FALSE
			    italics    	FALSE
			    underline  	FALSE
			    strike     	FALSE
			    color      	0
			    default_color 	TRUE)
			anchor     	10
			anchor_loc 	1
			nlines     	1
			max_width  	450
			justify    	0
			label      	"<<call>>"
			pctDist    	0.487010
			height     	46
			orientation 	1)
		    line_color 	3342489
		    quidu      	"4D00AC71019F"
		    client     	@419
		    supplier   	@418
		    vertices   	(list Points
			(1733, 3355)
			(2056, 3351))
		    line_style 	0)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::DocCardXPlugin::DocCardXPackage::MoveDocCard" @422
		    ShowCompartmentStereotypes 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(3678, 2286)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@422
			location   	(3411, 2229)
			fill_color 	13434879
			nlines     	1
			max_width  	534
			justify    	0
			label      	"• MoveDocCard")
		    stereotype 	(object ItemLabel
			Parent_View 	@422
			location   	(3411, 2179)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	534
			justify    	0
			label      	"<<XAction>>")
		    icon_style 	"Label"
		    fill_color 	13357823
		    quidu      	"4D021D0500BF"
		    compartment 	(object Compartment
			Parent_View 	@422
			location   	(3411, 2334)
			font       	(object Font
			    size       	10
			    face       	"Arial"
			    charSet    	204
			    bold       	FALSE
			    italics    	FALSE
			    underline  	FALSE
			    strike     	FALSE
			    color      	0
			    default_color 	TRUE)
			icon_style 	"Icon"
			fill_color 	16777215
			anchor     	2
			nlines     	1
			max_width  	537
			justify    	1)
		    width      	552
		    height     	238
		    annotation 	8
		    autoResize 	TRUE)
		(object UsesView "" @423
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	(object SegLabel @424
			Parent_View 	@423
			location   	(3064, 2341)
			font       	(object Font
			    size       	10
			    face       	"Arial"
			    charSet    	204
			    bold       	FALSE
			    italics    	FALSE
			    underline  	FALSE
			    strike     	FALSE
			    color      	0
			    default_color 	TRUE)
			anchor     	10
			anchor_loc 	1
			nlines     	1
			max_width  	450
			justify    	0
			label      	"<<call>>"
			pctDist    	0.389923
			height     	46
			orientation 	1)
		    line_color 	3342489
		    quidu      	"4D021D3800A0"
		    client     	@422
		    supplier   	@410
		    vertices   	(list Points
			(3401, 2330)
			(2553, 2472))
		    line_style 	0)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::DocCardXPlugin::DocCardXPackage::SearchDocIssuers" @425
		    ShowCompartmentStereotypes 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(3750, 1305)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@425
			location   	(3483, 1223)
			fill_color 	13434879
			nlines     	1
			max_width  	534
			justify    	0
			label      	"• SearchDocIssuers")
		    stereotype 	(object ItemLabel
			Parent_View 	@425
			location   	(3483, 1173)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	534
			justify    	0
			label      	"<<XAction>>")
		    icon_style 	"Label"
		    fill_color 	13357823
		    quidu      	"4D09C64F0039"
		    compartment 	(object Compartment
			Parent_View 	@425
			location   	(3483, 1328)
			font       	(object Font
			    size       	10
			    face       	"Arial"
			    charSet    	204
			    bold       	FALSE
			    italics    	FALSE
			    underline  	FALSE
			    strike     	FALSE
			    color      	0
			    default_color 	TRUE)
			icon_style 	"Icon"
			fill_color 	16777215
			anchor     	2
			nlines     	2
			max_width  	537
			justify    	1)
		    width      	552
		    height     	288
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::SearchDocIssuers" @426
		    ShowCompartmentStereotypes 	TRUE
		    SuppressAttribute 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    location   	(3831, 1938)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	13110000
			default_color 	FALSE)
		    label      	(object ItemLabel
			Parent_View 	@426
			location   	(3645, 1922)
			nlines     	1
			max_width  	372
			justify    	0
			label      	"SearchDocIssuers")
		    stereotype 	(object ItemLabel
			Parent_View 	@426
			location   	(3645, 1872)
			anchor     	10
			nlines     	1
			max_width  	372
			justify    	0
			label      	"<<KActionPlugin>>")
		    icon_style 	"Label"
		    line_color 	13110000
		    fill_color 	16777215
		    quidu      	"4D09C6B90102"
		    width      	390
		    height     	157
		    annotation 	8
		    autoResize 	TRUE)
		(object UsesView "" @427
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	(object SegLabel @428
			Parent_View 	@427
			location   	(3912, 1639)
			font       	(object Font
			    size       	10
			    face       	"Arial"
			    charSet    	204
			    bold       	FALSE
			    italics    	FALSE
			    underline  	FALSE
			    strike     	FALSE
			    color      	0
			    default_color 	TRUE)
			anchor     	10
			anchor_loc 	1
			nlines     	1
			max_width  	450
			justify    	0
			label      	"<<call>>"
			pctDist    	0.500000
			height     	120
			orientation 	0)
		    line_color 	3342489
		    quidu      	"4D09C6EA01FF"
		    client     	@425
		    supplier   	@426
		    vertices   	(list Points
			(3767, 1449)
			(3820, 1859))
		    line_style 	0)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardView::uvsquery-choose-doccard" @429
		    ShowCompartmentStereotypes 	TRUE
		    SuppressAttribute 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    location   	(3561, 3117)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	13110000
			default_color 	FALSE)
		    label      	(object ItemLabel
			Parent_View 	@429
			location   	(3303, 3089)
			nlines     	1
			max_width  	516
			justify    	0
			label      	"uvsquery-choose-doccard")
		    stereotype 	(object ItemLabel
			Parent_View 	@429
			location   	(3303, 3039)
			anchor     	10
			nlines     	1
			max_width  	516
			justify    	0
			label      	"<<VM>>")
		    icon_style 	"Label"
		    line_color 	13110000
		    fill_color 	16777215
		    quidu      	"4D10A794001E"
		    width      	534
		    height     	180
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::DocCardXPlugin::DocCardXPackage::OpenWindowChooseDocCard" @430
		    ShowCompartmentStereotypes 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(3528, 2688)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@430
			location   	(3226, 2635)
			fill_color 	13434879
			nlines     	1
			max_width  	604
			justify    	0
			label      	"• OpenWindowChooseDocCard")
		    stereotype 	(object ItemLabel
			Parent_View 	@430
			location   	(3226, 2585)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	604
			justify    	0
			label      	"<<XAction>>")
		    icon_style 	"Label"
		    fill_color 	13357823
		    quidu      	"4D109ED30339"
		    width      	622
		    height     	230
		    annotation 	8
		    autoResize 	TRUE)
		(object UsesView "" @431
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	(object SegLabel @432
			Parent_View 	@431
			location   	(2906, 2652)
			font       	(object Font
			    size       	10
			    face       	"Arial"
			    charSet    	204
			    bold       	FALSE
			    italics    	FALSE
			    underline  	FALSE
			    strike     	FALSE
			    color      	0
			    default_color 	TRUE)
			anchor     	10
			anchor_loc 	1
			nlines     	1
			max_width  	450
			justify    	0
			label      	"<<call>>"
			pctDist    	0.454668
			height     	63
			orientation 	0)
		    line_color 	3342489
		    quidu      	"4D109F0E001B"
		    client     	@430
		    supplier   	@410
		    vertices   	(list Points
			(3216, 2638)
			(2553, 2532))
		    line_style 	0)
		(object AssociationViewNew "$UNNAMED$22" @433
		    location   	(3544, 2914)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	TRUE
		    line_color 	3342489
		    quidu      	"4D10A7D9014F"
		    roleview_list 	(list RoleViews
			(object RoleView "success" @434
			    Parent_View 	@433
			    location   	(16, 226)
			    font       	(object Font
				size       	10
				face       	"Arial"
				charSet    	204
				bold       	FALSE
				italics    	FALSE
				underline  	FALSE
				strike     	FALSE
				color      	0
				default_color 	TRUE)
			    label      	(object SegLabel @435
				Parent_View 	@434
				location   	(3360, 2952)
				font       	(object Font
				    size       	10
				    face       	"Arial"
				    charSet    	204
				    bold       	FALSE
				    italics    	FALSE
				    underline  	FALSE
				    strike     	FALSE
				    color      	0
				    default_color 	TRUE)
				anchor     	1
				anchor_loc 	1
				nlines     	1
				max_width  	185
				justify    	0
				label      	"+success"
				pctDist    	0.205941
				height     	187
				orientation 	1)
			    stereotype 	(object SegLabel @436
				Parent_View 	@434
				location   	(3364, 2898)
				font       	(object Font
				    size       	10
				    face       	"Arial"
				    charSet    	204
				    bold       	FALSE
				    italics    	FALSE
				    underline  	FALSE
				    strike     	FALSE
				    color      	0
				    default_color 	TRUE)
				anchor     	10
				anchor_loc 	1
				nlines     	1
				max_width  	450
				justify    	0
				label      	"<<velocity>>"
				pctDist    	-0.270257
				height     	179
				orientation 	1)
			    line_color 	3342489
			    quidu      	"4D10A7D90350"
			    client     	@433
			    supplier   	@429
			    vertices   	(list Points
				(3544, 2914)
				(3552, 3026))
			    line_style 	0)
			(object RoleView "$UNNAMED$23" @437
			    Parent_View 	@433
			    location   	(16, 226)
			    stereotype 	TRUE
			    line_color 	3342489
			    quidu      	"4D10A7D90353"
			    client     	@433
			    supplier   	@430
			    vertices   	(list Points
				(3544, 2914)
				(3536, 2803))
			    line_style 	0)))
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::CreateUvsQueryMonthlyReport" @438
		    ShowCompartmentStereotypes 	TRUE
		    SuppressAttribute 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    location   	(1932, 3795)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	13110000
			default_color 	FALSE)
		    label      	(object ItemLabel
			Parent_View 	@438
			location   	(1565, 3779)
			nlines     	1
			max_width  	734
			justify    	0
			label      	"• CreateUvsQueryMonthlyReport")
		    stereotype 	(object ItemLabel
			Parent_View 	@438
			location   	(1565, 3729)
			anchor     	10
			nlines     	1
			max_width  	734
			justify    	0
			label      	"<<KActionPlugin>>")
		    icon_style 	"Label"
		    line_color 	13110000
		    fill_color 	16777215
		    quidu      	"4D3D3600026A"
		    width      	752
		    height     	157
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardView::choose-uvsquery-report-time-interval" @439
		    ShowCompartmentStereotypes 	TRUE
		    SuppressAttribute 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    location   	(3123, 3417)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	13110000
			default_color 	FALSE)
		    label      	(object ItemLabel
			Parent_View 	@439
			location   	(2773, 3389)
			nlines     	1
			max_width  	700
			justify    	0
			label      	"choose-uvsquery-report-time-interval")
		    stereotype 	(object ItemLabel
			Parent_View 	@439
			location   	(2773, 3339)
			anchor     	10
			nlines     	1
			max_width  	700
			justify    	0
			label      	"<<VM>>")
		    icon_style 	"Label"
		    line_color 	13110000
		    fill_color 	16777215
		    quidu      	"4D3D3FEB0039"
		    width      	718
		    height     	180
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::DocCardXPlugin::DocCardXPackage::CreateUvsQueryMonthlyReport" @440
		    ShowCompartmentStereotypes 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(3009, 3792)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@440
			location   	(2696, 3735)
			fill_color 	13434879
			nlines     	1
			max_width  	626
			justify    	0
			label      	"• CreateUvsQueryMonthlyReport")
		    stereotype 	(object ItemLabel
			Parent_View 	@440
			location   	(2696, 3685)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	626
			justify    	0
			label      	"<<XAction>>")
		    icon_style 	"Label"
		    fill_color 	13357823
		    quidu      	"4D3D412E036F"
		    compartment 	(object Compartment
			Parent_View 	@440
			location   	(2696, 3840)
			font       	(object Font
			    size       	10
			    face       	"Arial"
			    charSet    	204
			    bold       	FALSE
			    italics    	FALSE
			    underline  	FALSE
			    strike     	FALSE
			    color      	0
			    default_color 	TRUE)
			icon_style 	"Icon"
			fill_color 	16777215
			anchor     	2
			nlines     	1
			max_width  	537
			justify    	1)
		    width      	644
		    height     	238
		    annotation 	8
		    autoResize 	TRUE)
		(object UsesView "" @441
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	(object SegLabel @442
			Parent_View 	@441
			location   	(2497, 3912)
			font       	(object Font
			    size       	10
			    face       	"Arial"
			    charSet    	204
			    bold       	FALSE
			    italics    	FALSE
			    underline  	FALSE
			    strike     	FALSE
			    color      	0
			    default_color 	TRUE)
			anchor     	10
			anchor_loc 	1
			nlines     	1
			max_width  	450
			justify    	0
			label      	"<<call>>"
			pctDist    	0.500000
			height     	120
			orientation 	0)
		    line_color 	3342489
		    quidu      	"4D3D41890362"
		    client     	@440
		    supplier   	@438
		    vertices   	(list Points
			(2686, 3792)
			(2308, 3793))
		    line_style 	0)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::DocCardXPlugin::DocCardXPackage::DoCreateUvsQueryMonthlyReport" @443
		    ShowCompartmentStereotypes 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(3039, 4149)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@443
			location   	(2605, 4092)
			fill_color 	13434879
			nlines     	1
			max_width  	868
			justify    	0
			label      	"• DoCreateUvsQueryMonthlyReport")
		    stereotype 	(object ItemLabel
			Parent_View 	@443
			location   	(2605, 4042)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	868
			justify    	0
			label      	"<<XAction>>")
		    icon_style 	"Label"
		    fill_color 	13357823
		    quidu      	"4D3D44EB02DD"
		    compartment 	(object Compartment
			Parent_View 	@443
			location   	(2605, 4197)
			font       	(object Font
			    size       	10
			    face       	"Arial"
			    charSet    	204
			    bold       	FALSE
			    italics    	FALSE
			    underline  	FALSE
			    strike     	FALSE
			    color      	0
			    default_color 	TRUE)
			icon_style 	"Icon"
			fill_color 	16777215
			anchor     	2
			nlines     	1
			max_width  	459
			justify    	1)
		    width      	886
		    height     	238
		    annotation 	8
		    autoResize 	TRUE)
		(object UsesView "" @444
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	(object SegLabel @445
			Parent_View 	@444
			location   	(2387, 4065)
			font       	(object Font
			    size       	10
			    face       	"Arial"
			    charSet    	204
			    bold       	FALSE
			    italics    	FALSE
			    underline  	FALSE
			    strike     	FALSE
			    color      	0
			    default_color 	TRUE)
			anchor     	10
			anchor_loc 	1
			nlines     	1
			max_width  	450
			justify    	0
			label      	"<<call>>"
			pctDist    	0.500000
			height     	120
			orientation 	0)
		    line_color 	3342489
		    quidu      	"4D3D452B014C"
		    client     	@443
		    supplier   	@438
		    vertices   	(list Points
			(2668, 4029)
			(2177, 3873))
		    line_style 	0)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::DocCardXPlugin::DocCardXPackage::SearchSiteAndSuffixFromDocIssuer" @446
		    ShowCompartmentStereotypes 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(4839, 2166)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@446
			location   	(4372, 2084)
			fill_color 	13434879
			nlines     	1
			max_width  	934
			justify    	0
			label      	"• SearchSiteAndSuffixFromDocIssuer")
		    stereotype 	(object ItemLabel
			Parent_View 	@446
			location   	(4372, 2034)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	934
			justify    	0
			label      	"<<XAction>>")
		    icon_style 	"Label"
		    fill_color 	13357823
		    quidu      	"4DA575B000FA"
		    compartment 	(object Compartment
			Parent_View 	@446
			location   	(4372, 2189)
			font       	(object Font
			    size       	10
			    face       	"Arial"
			    charSet    	204
			    bold       	FALSE
			    italics    	FALSE
			    underline  	FALSE
			    strike     	FALSE
			    color      	0
			    default_color 	TRUE)
			icon_style 	"Icon"
			fill_color 	16777215
			anchor     	2
			nlines     	2
			max_width  	537
			justify    	1)
		    width      	952
		    height     	288
		    annotation 	8
		    autoResize 	TRUE)
		(object UsesView "" @447
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	(object SegLabel @448
			Parent_View 	@447
			location   	(4167, 2136)
			font       	(object Font
			    size       	10
			    face       	"Arial"
			    charSet    	204
			    bold       	FALSE
			    italics    	FALSE
			    underline  	FALSE
			    strike     	FALSE
			    color      	0
			    default_color 	TRUE)
			anchor     	10
			anchor_loc 	1
			nlines     	1
			max_width  	450
			justify    	0
			label      	"<<call>>"
			pctDist    	0.500000
			height     	120
			orientation 	0)
		    line_color 	3342489
		    quidu      	"4DA575E8013E"
		    client     	@446
		    supplier   	@426
		    vertices   	(list Points
			(4362, 2058)
			(4026, 1980))
		    line_style 	0)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::SearchFiledsInDepositoryString" @449
		    ShowCompartmentStereotypes 	TRUE
		    SuppressAttribute 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    location   	(579, 3582)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	13110000
			default_color 	FALSE)
		    label      	(object ItemLabel
			Parent_View 	@449
			location   	(275, 3566)
			nlines     	1
			max_width  	608
			justify    	0
			label      	"SearchFiledsInDepositoryString")
		    stereotype 	(object ItemLabel
			Parent_View 	@449
			location   	(275, 3516)
			anchor     	10
			nlines     	1
			max_width  	608
			justify    	0
			label      	"<<KActionPlugin>>")
		    icon_style 	"Label"
		    line_color 	13110000
		    fill_color 	16777215
		    quidu      	"4DD50866035F"
		    width      	626
		    height     	157
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::DocCardXPlugin::DocCardXPackage::SearchFieldsInDepository" @450
		    ShowCompartmentStereotypes 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(1080, 4131)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@450
			location   	(803, 4074)
			fill_color 	13434879
			nlines     	1
			max_width  	554
			justify    	0
			label      	"• SearchFieldsInDepository")
		    stereotype 	(object ItemLabel
			Parent_View 	@450
			location   	(803, 4024)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	554
			justify    	0
			label      	"<<XAction>>")
		    icon_style 	"Label"
		    fill_color 	13357823
		    quidu      	"4DD508D2015F"
		    compartment 	(object Compartment
			Parent_View 	@450
			location   	(803, 4179)
			font       	(object Font
			    size       	10
			    face       	"Arial"
			    charSet    	204
			    bold       	FALSE
			    italics    	FALSE
			    underline  	FALSE
			    strike     	FALSE
			    color      	0
			    default_color 	TRUE)
			icon_style 	"Icon"
			fill_color 	16777215
			anchor     	2
			nlines     	1
			max_width  	537
			justify    	1)
		    width      	572
		    height     	238
		    annotation 	8
		    autoResize 	TRUE)
		(object UsesView "" @451
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	(object SegLabel @452
			Parent_View 	@451
			location   	(722, 3917)
			font       	(object Font
			    size       	10
			    face       	"Arial"
			    charSet    	204
			    bold       	FALSE
			    italics    	FALSE
			    underline  	FALSE
			    strike     	FALSE
			    color      	0
			    default_color 	TRUE)
			anchor     	10
			anchor_loc 	1
			nlines     	1
			max_width  	450
			justify    	0
			label      	"<<call>>"
			pctDist    	0.500000
			height     	120
			orientation 	0)
		    line_color 	3342489
		    quidu      	"4DD508F30053"
		    client     	@450
		    supplier   	@449
		    vertices   	(list Points
			(970, 4011)
			(650, 3660))
		    line_style 	0)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::DocCardXPlugin::DocCardXPackage::SearchGarDocSources" @453
		    ShowCompartmentStereotypes 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(4671, 1281)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@453
			location   	(4405, 1199)
			fill_color 	13434879
			nlines     	1
			max_width  	532
			justify    	0
			label      	"• SearchGarDocSources")
		    stereotype 	(object ItemLabel
			Parent_View 	@453
			location   	(4405, 1149)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	532
			justify    	0
			label      	"<<XAction>>")
		    icon_style 	"Label"
		    fill_color 	13357823
		    quidu      	"4DF08881006E"
		    compartment 	(object Compartment
			Parent_View 	@453
			location   	(4405, 1304)
			font       	(object Font
			    size       	10
			    face       	"Arial"
			    charSet    	204
			    bold       	FALSE
			    italics    	FALSE
			    underline  	FALSE
			    strike     	FALSE
			    color      	0
			    default_color 	TRUE)
			icon_style 	"Icon"
			fill_color 	16777215
			anchor     	2
			nlines     	2
			max_width  	537
			justify    	1)
		    width      	550
		    height     	288
		    annotation 	8
		    autoResize 	TRUE)
		(object UsesView "" @454
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	(object SegLabel @455
			Parent_View 	@454
			location   	(4261, 1684)
			font       	(object Font
			    size       	10
			    face       	"Arial"
			    charSet    	204
			    bold       	FALSE
			    italics    	FALSE
			    underline  	FALSE
			    strike     	FALSE
			    color      	0
			    default_color 	TRUE)
			anchor     	10
			anchor_loc 	1
			nlines     	1
			max_width  	450
			justify    	0
			label      	"<<call>>"
			pctDist    	0.476289
			height     	66
			orientation 	0)
		    line_color 	3342489
		    quidu      	"4DF088CB0329"
		    client     	@453
		    supplier   	@426
		    vertices   	(list Points
			(4485, 1425)
			(3929, 1859))
		    line_style 	0)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::DocCardXPlugin::DocCardXPackage::RemoveExternalAuthor" @456
		    ShowCompartmentStereotypes 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(1803, 2658)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@456
			location   	(1537, 2601)
			fill_color 	13434879
			nlines     	1
			max_width  	532
			justify    	0
			label      	"• RemoveExternalAuthor")
		    stereotype 	(object ItemLabel
			Parent_View 	@456
			location   	(1537, 2551)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	532
			justify    	0
			label      	"<<XAction>>")
		    icon_style 	"Label"
		    fill_color 	13357823
		    quidu      	"4E7C660903D3"
		    compartment 	(object Compartment
			Parent_View 	@456
			location   	(1537, 2706)
			font       	(object Font
			    size       	10
			    face       	"Arial"
			    charSet    	204
			    bold       	FALSE
			    italics    	FALSE
			    underline  	FALSE
			    strike     	FALSE
			    color      	0
			    default_color 	TRUE)
			icon_style 	"Icon"
			fill_color 	16777215
			anchor     	2
			nlines     	1
			max_width  	537
			justify    	1)
		    width      	550
		    height     	238
		    annotation 	8
		    autoResize 	TRUE)
		(object UsesView "" @457
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	(object SegLabel @458
			Parent_View 	@457
			location   	(1743, 2395)
			font       	(object Font
			    size       	10
			    face       	"Arial"
			    charSet    	204
			    bold       	FALSE
			    italics    	FALSE
			    underline  	FALSE
			    strike     	FALSE
			    color      	0
			    default_color 	TRUE)
			anchor     	10
			anchor_loc 	1
			nlines     	1
			max_width  	450
			justify    	0
			label      	"<<call>>"
			pctDist    	0.500000
			height     	120
			orientation 	0)
		    line_color 	3342489
		    quidu      	"4E7C66350000"
		    client     	@456
		    supplier   	@374
		    vertices   	(list Points
			(1831, 2538)
			(1887, 2307))
		    line_style 	0)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::DocCardXPlugin::DocCardXPackage::MoveUvsQueryToAnotherDocCard" @459
		    ShowCompartmentStereotypes 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(4845, 3417)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@459
			location   	(4504, 3351)
			fill_color 	13434879
			nlines     	1
			max_width  	682
			justify    	0
			label      	"MoveUvsQueryToAnotherDocCard")
		    stereotype 	(object ItemLabel
			Parent_View 	@459
			location   	(4504, 3301)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	682
			justify    	0
			label      	"<<XAction>>")
		    icon_style 	"Label"
		    fill_color 	13357823
		    quidu      	"4F1D072E01C5"
		    compartment 	(object Compartment
			Parent_View 	@459
			location   	(4504, 3456)
			font       	(object Font
			    size       	10
			    face       	"Arial"
			    charSet    	204
			    bold       	FALSE
			    italics    	FALSE
			    underline  	FALSE
			    strike     	FALSE
			    color      	0
			    default_color 	TRUE)
			icon_style 	"Icon"
			fill_color 	16777215
			anchor     	2
			nlines     	1
			max_width  	537
			justify    	1)
		    width      	700
		    height     	256
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::MoveUvsQueryToAnotherDocCard" @460
		    ShowCompartmentStereotypes 	TRUE
		    SuppressAttribute 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    location   	(3915, 3507)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	13110000
			default_color 	FALSE)
		    label      	(object ItemLabel
			Parent_View 	@460
			location   	(3594, 3491)
			nlines     	1
			max_width  	642
			justify    	0
			label      	"MoveUvsQueryToAnotherDocCard")
		    stereotype 	(object ItemLabel
			Parent_View 	@460
			location   	(3594, 3441)
			anchor     	10
			nlines     	1
			max_width  	642
			justify    	0
			label      	"<<KActionPlugin>>")
		    icon_style 	"Label"
		    line_color 	13110000
		    fill_color 	16777215
		    quidu      	"4F1D06060397"
		    width      	660
		    height     	157
		    annotation 	8
		    autoResize 	TRUE)
		(object UsesView "" @461
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	(object SegLabel @462
			Parent_View 	@461
			location   	(4370, 3521)
			font       	(object Font
			    size       	10
			    face       	"Arial"
			    charSet    	204
			    bold       	FALSE
			    italics    	FALSE
			    underline  	FALSE
			    strike     	FALSE
			    color      	0
			    default_color 	TRUE)
			anchor     	10
			anchor_loc 	1
			nlines     	1
			max_width  	450
			justify    	0
			label      	"<<call>>"
			pctDist    	0.527449
			height     	58
			orientation 	0)
		    line_color 	3342489
		    quidu      	"4F1D075A0232"
		    client     	@459
		    supplier   	@460
		    vertices   	(list Points
			(4494, 3450)
			(4245, 3474))
		    line_style 	0)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::DocCardLuceneReIndex" @463
		    ShowCompartmentStereotypes 	TRUE
		    SuppressAttribute 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    location   	(3918, 4278)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	13110000
			default_color 	FALSE)
		    label      	(object ItemLabel
			Parent_View 	@463
			location   	(3684, 4262)
			nlines     	1
			max_width  	468
			justify    	0
			label      	"DocCardLuceneReIndex")
		    stereotype 	(object ItemLabel
			Parent_View 	@463
			location   	(3684, 4212)
			anchor     	10
			nlines     	1
			max_width  	468
			justify    	0
			label      	"<<KActionPlugin>>")
		    icon_style 	"Label"
		    line_color 	13110000
		    fill_color 	16777215
		    quidu      	"4F9953C90234"
		    width      	486
		    height     	157
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::DocCardXPlugin::DocCardXPackage::DocCardLuceneReIndex" @464
		    ShowCompartmentStereotypes 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(4719, 4359)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@464
			location   	(4411, 4306)
			fill_color 	13434879
			nlines     	1
			max_width  	616
			justify    	0
			label      	"• DocCardLuceneReIndex")
		    stereotype 	(object ItemLabel
			Parent_View 	@464
			location   	(4411, 4256)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	616
			justify    	0
			label      	"<<XAction>>")
		    icon_style 	"Label"
		    fill_color 	13357823
		    quidu      	"4F995520007D"
		    width      	634
		    height     	230
		    annotation 	8
		    autoResize 	TRUE)
		(object UsesView "" @465
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	(object SegLabel @466
			Parent_View 	@465
			location   	(4271, 4432)
			font       	(object Font
			    size       	10
			    face       	"Arial"
			    charSet    	204
			    bold       	FALSE
			    italics    	FALSE
			    underline  	FALSE
			    strike     	FALSE
			    color      	0
			    default_color 	TRUE)
			anchor     	10
			anchor_loc 	1
			nlines     	1
			max_width  	450
			justify    	0
			label      	"<<call>>"
			pctDist    	0.500000
			height     	120
			orientation 	0)
		    line_color 	3342489
		    quidu      	"4F99552D034B"
		    client     	@464
		    supplier   	@463
		    vertices   	(list Points
			(4401, 4325)
			(4161, 4302))
		    line_style 	0)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::DocCardXPlugin::DocCardXPackage::DocCardLuceneSearchIndex" @467
		    ShowCompartmentStereotypes 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(4968, 4023)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@467
			location   	(4676, 3966)
			fill_color 	13434879
			nlines     	1
			max_width  	584
			justify    	0
			label      	"• DocCardLuceneSearchIndex")
		    stereotype 	(object ItemLabel
			Parent_View 	@467
			location   	(4676, 3916)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	584
			justify    	0
			label      	"<<XAction>>")
		    icon_style 	"Label"
		    fill_color 	13357823
		    quidu      	"4FACB67303BA"
		    compartment 	(object Compartment
			Parent_View 	@467
			location   	(4676, 4071)
			font       	(object Font
			    size       	10
			    face       	"Arial"
			    charSet    	204
			    bold       	FALSE
			    italics    	FALSE
			    underline  	FALSE
			    strike     	FALSE
			    color      	0
			    default_color 	TRUE)
			icon_style 	"Icon"
			fill_color 	16777215
			anchor     	2
			nlines     	1
			max_width  	537
			justify    	1)
		    width      	602
		    height     	238
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::DocCardLuceneSearchIndex" @468
		    ShowCompartmentStereotypes 	TRUE
		    SuppressAttribute 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    location   	(4113, 4014)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	13110000
			default_color 	FALSE)
		    label      	(object ItemLabel
			Parent_View 	@468
			location   	(3842, 3998)
			nlines     	1
			max_width  	542
			justify    	0
			label      	"DocCardLuceneSearchIndex")
		    stereotype 	(object ItemLabel
			Parent_View 	@468
			location   	(3842, 3948)
			anchor     	10
			nlines     	1
			max_width  	542
			justify    	0
			label      	"<<KActionPlugin>>")
		    icon_style 	"Label"
		    line_color 	13110000
		    fill_color 	16777215
		    quidu      	"4F99538D0325"
		    width      	560
		    height     	157
		    annotation 	8
		    autoResize 	TRUE)
		(object UsesView "" @469
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	(object SegLabel @470
			Parent_View 	@469
			location   	(4529, 4137)
			font       	(object Font
			    size       	10
			    face       	"Arial"
			    charSet    	204
			    bold       	FALSE
			    italics    	FALSE
			    underline  	FALSE
			    strike     	FALSE
			    color      	0
			    default_color 	TRUE)
			anchor     	10
			anchor_loc 	1
			nlines     	1
			max_width  	450
			justify    	0
			label      	"<<call>>"
			pctDist    	0.500000
			height     	120
			orientation 	0)
		    line_color 	3342489
		    quidu      	"4FACB68D03D3"
		    client     	@467
		    supplier   	@468
		    vertices   	(list Points
			(4666, 4019)
			(4393, 4016))
		    line_style 	0)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::ImportSynonymsFromFileToDatabase" @471
		    ShowCompartmentStereotypes 	TRUE
		    SuppressAttribute 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    location   	(3273, 4554)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	13110000
			default_color 	FALSE)
		    label      	(object ItemLabel
			Parent_View 	@471
			location   	(2788, 4538)
			nlines     	1
			max_width  	970
			justify    	0
			label      	"• ImportSynonymsFromFileToDatabase")
		    stereotype 	(object ItemLabel
			Parent_View 	@471
			location   	(2788, 4488)
			anchor     	10
			nlines     	1
			max_width  	970
			justify    	0
			label      	"<<KActionPlugin>>")
		    icon_style 	"Label"
		    line_color 	13110000
		    fill_color 	16777215
		    quidu      	"4FAE005F03C8"
		    width      	988
		    height     	157
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::DocCardXPlugin::DocCardXPackage::ImportSynonymsFromFileToDatabase" @472
		    ShowCompartmentStereotypes 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(2166, 4302)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@472
			location   	(1797, 4250)
			fill_color 	13434879
			nlines     	1
			max_width  	738
			justify    	0
			label      	"• ImportSynonymsFromFileToDatabase")
		    stereotype 	(object ItemLabel
			Parent_View 	@472
			location   	(1797, 4200)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	738
			justify    	0
			label      	"<<XAction>>")
		    icon_style 	"Label"
		    fill_color 	13357823
		    quidu      	"4FAE09A40051"
		    width      	756
		    height     	228
		    annotation 	8
		    autoResize 	TRUE)
		(object UsesView "" @473
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	(object SegLabel @474
			Parent_View 	@473
			location   	(2752, 4384)
			font       	(object Font
			    size       	10
			    face       	"Arial"
			    charSet    	204
			    bold       	FALSE
			    italics    	FALSE
			    underline  	FALSE
			    strike     	FALSE
			    color      	0
			    default_color 	TRUE)
			anchor     	10
			anchor_loc 	1
			nlines     	1
			max_width  	450
			justify    	0
			label      	"<<call>>"
			pctDist    	0.510287
			height     	50
			orientation 	0)
		    line_color 	3342489
		    quidu      	"4FAE09AD037D"
		    client     	@472
		    supplier   	@471
		    vertices   	(list Points
			(2544, 4387)
			(2929, 4475))
		    line_style 	0)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::CreateOGV" @475
		    ShowCompartmentStereotypes 	TRUE
		    SuppressAttribute 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    location   	(444, 4701)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	13110000
			default_color 	FALSE)
		    label      	(object ItemLabel
			Parent_View 	@475
			location   	(264, 4685)
			nlines     	1
			max_width  	360
			justify    	0
			label      	"CreateOGV")
		    stereotype 	(object ItemLabel
			Parent_View 	@475
			location   	(264, 4635)
			anchor     	10
			nlines     	1
			max_width  	360
			justify    	0
			label      	"<<KActionPlugin>>")
		    icon_style 	"Label"
		    line_color 	13110000
		    fill_color 	16777215
		    quidu      	"504DBBDC01C3"
		    width      	378
		    height     	157
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::DocCardXPlugin::DocCardXPackage::CreateOGV" @476
		    ShowCompartmentStereotypes 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(1059, 4506)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@476
			location   	(875, 4453)
			fill_color 	13434879
			nlines     	1
			max_width  	368
			justify    	0
			label      	"CreateOGV")
		    stereotype 	(object ItemLabel
			Parent_View 	@476
			location   	(875, 4403)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	368
			justify    	0
			label      	"<<XAction>>")
		    icon_style 	"Label"
		    fill_color 	13357823
		    quidu      	"504DBDDA02BD"
		    width      	386
		    height     	230
		    annotation 	8
		    autoResize 	TRUE)
		(object UsesView "" @477
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	(object SegLabel @478
			Parent_View 	@477
			location   	(753, 4676)
			font       	(object Font
			    size       	10
			    face       	"Arial"
			    charSet    	204
			    bold       	FALSE
			    italics    	FALSE
			    underline  	FALSE
			    strike     	FALSE
			    color      	0
			    default_color 	TRUE)
			anchor     	10
			anchor_loc 	1
			nlines     	1
			max_width  	450
			justify    	0
			label      	"<<call>>"
			pctDist    	0.572411
			height     	71
			orientation 	0)
		    line_color 	3342489
		    quidu      	"504DBE190345"
		    client     	@476
		    supplier   	@475
		    vertices   	(list Points
			(865, 4566)
			(633, 4639))
		    line_style 	0)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::DocCardXPlugin::DocCardXPackage::DoCreateOGV" @479
		    ShowCompartmentStereotypes 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(1086, 5013)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@479
			location   	(859, 4956)
			fill_color 	13434879
			nlines     	1
			max_width  	454
			justify    	0
			label      	"• DoCreateOGV")
		    stereotype 	(object ItemLabel
			Parent_View 	@479
			location   	(859, 4906)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	454
			justify    	0
			label      	"<<XAction>>")
		    icon_style 	"Label"
		    fill_color 	13357823
		    quidu      	"504DBE760254"
		    compartment 	(object Compartment
			Parent_View 	@479
			location   	(859, 5061)
			font       	(object Font
			    size       	10
			    face       	"Arial"
			    charSet    	204
			    bold       	FALSE
			    italics    	FALSE
			    underline  	FALSE
			    strike     	FALSE
			    color      	0
			    default_color 	TRUE)
			icon_style 	"Icon"
			fill_color 	16777215
			anchor     	2
			nlines     	1
			max_width  	459
			justify    	1)
		    width      	472
		    height     	238
		    annotation 	8
		    autoResize 	TRUE)
		(object UsesView "" @480
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	(object SegLabel @481
			Parent_View 	@480
			location   	(675, 4946)
			font       	(object Font
			    size       	10
			    face       	"Arial"
			    charSet    	204
			    bold       	FALSE
			    italics    	FALSE
			    underline  	FALSE
			    strike     	FALSE
			    color      	0
			    default_color 	TRUE)
			anchor     	10
			anchor_loc 	1
			nlines     	1
			max_width  	450
			justify    	0
			label      	"<<call>>"
			pctDist    	0.500000
			height     	120
			orientation 	0)
		    line_color 	3342489
		    quidu      	"504DBEA30336"
		    client     	@479
		    supplier   	@475
		    vertices   	(list Points
			(849, 4897)
			(604, 4779))
		    line_style 	0)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::DocCardXPlugin::DocCardXPackage::DoccardLuceneSearchRepeats" @482
		    ShowCompartmentStereotypes 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(423, 4152)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@482
			location   	(114, 4095)
			fill_color 	13434879
			nlines     	1
			max_width  	618
			justify    	0
			label      	"• DoccardLuceneSearchRepeats")
		    stereotype 	(object ItemLabel
			Parent_View 	@482
			location   	(114, 4045)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	618
			justify    	0
			label      	"<<XAction>>")
		    icon_style 	"Label"
		    fill_color 	13357823
		    quidu      	"50853A8203AE"
		    compartment 	(object Compartment
			Parent_View 	@482
			location   	(114, 4200)
			font       	(object Font
			    size       	10
			    face       	"Arial"
			    charSet    	204
			    bold       	FALSE
			    italics    	FALSE
			    underline  	FALSE
			    strike     	FALSE
			    color      	0
			    default_color 	TRUE)
			icon_style 	"Icon"
			fill_color 	16777215
			anchor     	2
			nlines     	1
			max_width  	537
			justify    	1)
		    width      	636
		    height     	238
		    annotation 	8
		    autoResize 	TRUE)
		(object UsesView "" @483
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	(object SegLabel @484
			Parent_View 	@483
			location   	(390, 3815)
			font       	(object Font
			    size       	10
			    face       	"Arial"
			    charSet    	204
			    bold       	FALSE
			    italics    	FALSE
			    underline  	FALSE
			    strike     	FALSE
			    color      	0
			    default_color 	TRUE)
			anchor     	10
			anchor_loc 	1
			nlines     	1
			max_width  	450
			justify    	0
			label      	"<<call>>"
			pctDist    	0.500000
			height     	120
			orientation 	0)
		    line_color 	3342489
		    quidu      	"50853A9C01F9"
		    client     	@482
		    supplier   	@449
		    vertices   	(list Points
			(454, 4032)
			(556, 3660))
		    line_style 	0)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::ChangeIncludeInVersionDate" @485
		    ShowCompartmentStereotypes 	TRUE
		    SuppressAttribute 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    location   	(1914, 4782)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	13110000
			default_color 	FALSE)
		    label      	(object ItemLabel
			Parent_View 	@485
			location   	(1636, 4766)
			nlines     	1
			max_width  	556
			justify    	0
			label      	"ChangeIncludeInVersionDate")
		    stereotype 	(object ItemLabel
			Parent_View 	@485
			location   	(1636, 4716)
			anchor     	10
			nlines     	1
			max_width  	556
			justify    	0
			label      	"<<KActionPlugin>>")
		    icon_style 	"Label"
		    line_color 	13110000
		    fill_color 	16777215
		    quidu      	"50F53B25033A"
		    width      	574
		    height     	157
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::DocCardXPlugin::DocCardXPackage::ChangeIncludeInVersion" @486
		    ShowCompartmentStereotypes 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(2313, 5148)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@486
			location   	(2047, 5091)
			fill_color 	13434879
			nlines     	1
			max_width  	532
			justify    	0
			label      	"• ChangeIncludeInVersion")
		    stereotype 	(object ItemLabel
			Parent_View 	@486
			location   	(2047, 5041)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	532
			justify    	0
			label      	"<<XAction>>")
		    icon_style 	"Label"
		    fill_color 	13357823
		    quidu      	"50F53DAA025E"
		    compartment 	(object Compartment
			Parent_View 	@486
			location   	(2047, 5196)
			font       	(object Font
			    size       	10
			    face       	"Arial"
			    charSet    	204
			    bold       	FALSE
			    italics    	FALSE
			    underline  	FALSE
			    strike     	FALSE
			    color      	0
			    default_color 	TRUE)
			icon_style 	"Icon"
			fill_color 	16777215
			anchor     	2
			nlines     	1
			max_width  	537
			justify    	1)
		    width      	550
		    height     	238
		    annotation 	8
		    autoResize 	TRUE)
		(object UsesView "" @487
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	(object SegLabel @488
			Parent_View 	@487
			location   	(1966, 4961)
			font       	(object Font
			    size       	10
			    face       	"Arial"
			    charSet    	204
			    bold       	FALSE
			    italics    	FALSE
			    underline  	FALSE
			    strike     	FALSE
			    color      	0
			    default_color 	TRUE)
			anchor     	10
			anchor_loc 	1
			nlines     	1
			max_width  	450
			justify    	0
			label      	"<<call>>"
			pctDist    	0.829094
			height     	98
			orientation 	0)
		    line_color 	3342489
		    quidu      	"50F53DBB0253"
		    client     	@486
		    supplier   	@485
		    vertices   	(list Points
			(2182, 5028)
			(1999, 4860))
		    line_style 	0)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::DocCardXPlugin::DocCardXPackage::MoveCopyToAnotherUvsQuery" @489
		    ShowCompartmentStereotypes 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(4815, 5100)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@489
			location   	(4496, 5043)
			fill_color 	13434879
			nlines     	1
			max_width  	638
			justify    	0
			label      	"• MoveCopyToAnotherUvsQuery")
		    stereotype 	(object ItemLabel
			Parent_View 	@489
			location   	(4496, 4993)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	638
			justify    	0
			label      	"<<XAction>>")
		    icon_style 	"Label"
		    fill_color 	13357823
		    quidu      	"5187ACFE0118"
		    compartment 	(object Compartment
			Parent_View 	@489
			location   	(4496, 5148)
			font       	(object Font
			    size       	10
			    face       	"Arial"
			    charSet    	204
			    bold       	FALSE
			    italics    	FALSE
			    underline  	FALSE
			    strike     	FALSE
			    color      	0
			    default_color 	TRUE)
			icon_style 	"Icon"
			fill_color 	16777215
			anchor     	2
			nlines     	1
			max_width  	537
			justify    	1)
		    width      	656
		    height     	238
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::MoveCopyToAnotherUvsQuery" @490
		    ShowCompartmentStereotypes 	TRUE
		    SuppressAttribute 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    location   	(3450, 4896)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	13110000
			default_color 	FALSE)
		    label      	(object ItemLabel
			Parent_View 	@490
			location   	(3159, 4880)
			nlines     	1
			max_width  	582
			justify    	0
			label      	"MoveCopyToAnotherUvsQuery")
		    stereotype 	(object ItemLabel
			Parent_View 	@490
			location   	(3159, 4830)
			anchor     	10
			nlines     	1
			max_width  	582
			justify    	0
			label      	"<<KActionPlugin>>")
		    icon_style 	"Label"
		    line_color 	13110000
		    fill_color 	16777215
		    quidu      	"5187AC54013E"
		    width      	600
		    height     	157
		    annotation 	8
		    autoResize 	TRUE)
		(object UsesView "" @491
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	(object SegLabel @492
			Parent_View 	@491
			location   	(4101, 5114)
			font       	(object Font
			    size       	10
			    face       	"Arial"
			    charSet    	204
			    bold       	FALSE
			    italics    	FALSE
			    underline  	FALSE
			    strike     	FALSE
			    color      	0
			    default_color 	TRUE)
			anchor     	10
			anchor_loc 	1
			nlines     	1
			max_width  	450
			justify    	0
			label      	"<<call>>"
			pctDist    	0.500000
			height     	120
			orientation 	0)
		    line_color 	3342489
		    quidu      	"5187AD2603A1"
		    client     	@489
		    supplier   	@490
		    vertices   	(list Points
			(4486, 5050)
			(3750, 4940))
		    line_style 	0)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::DocCardXPlugin::DocCardXPackage::RemoveOGV" @493
		    ShowCompartmentStereotypes 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(894, 3315)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@493
			location   	(667, 3258)
			fill_color 	13434879
			nlines     	1
			max_width  	454
			justify    	0
			label      	"• RemoveOGV")
		    stereotype 	(object ItemLabel
			Parent_View 	@493
			location   	(667, 3208)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	454
			justify    	0
			label      	"<<XAction>>")
		    icon_style 	"Label"
		    fill_color 	13357823
		    quidu      	"51A6FCC400DA"
		    compartment 	(object Compartment
			Parent_View 	@493
			location   	(667, 3363)
			font       	(object Font
			    size       	10
			    face       	"Arial"
			    charSet    	204
			    bold       	FALSE
			    italics    	FALSE
			    underline  	FALSE
			    strike     	FALSE
			    color      	0
			    default_color 	TRUE)
			icon_style 	"Icon"
			fill_color 	16777215
			anchor     	2
			nlines     	1
			max_width  	459
			justify    	1)
		    width      	472
		    height     	238
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::RemoveOGV" @494
		    ShowCompartmentStereotypes 	TRUE
		    SuppressAttribute 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    location   	(246, 3312)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	13110000
			default_color 	FALSE)
		    label      	(object ItemLabel
			Parent_View 	@494
			location   	(66, 3296)
			nlines     	1
			max_width  	360
			justify    	0
			label      	"RemoveOGV")
		    stereotype 	(object ItemLabel
			Parent_View 	@494
			location   	(66, 3246)
			anchor     	10
			nlines     	1
			max_width  	360
			justify    	0
			label      	"<<KActionPlugin>>")
		    icon_style 	"Label"
		    line_color 	13110000
		    fill_color 	16777215
		    quidu      	"51A6FC740350"
		    width      	378
		    height     	157
		    annotation 	8
		    autoResize 	TRUE)
		(object UsesView "" @495
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	(object SegLabel @496
			Parent_View 	@495
			location   	(556, 3380)
			font       	(object Font
			    size       	10
			    face       	"Arial"
			    charSet    	204
			    bold       	FALSE
			    italics    	FALSE
			    underline  	FALSE
			    strike     	FALSE
			    color      	0
			    default_color 	TRUE)
			anchor     	10
			anchor_loc 	1
			nlines     	1
			max_width  	450
			justify    	0
			label      	"<<call>>"
			pctDist    	0.457623
			height     	67
			orientation 	0)
		    line_color 	3342489
		    quidu      	"51A6FCF30165"
		    client     	@493
		    supplier   	@494
		    vertices   	(list Points
			(657, 3313)
			(435, 3312))
		    line_style 	0)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::DocCardXPlugin::DocCardXPackage::MoveOGVFromFolderAction" @497
		    ShowCompartmentStereotypes 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(666, 5445)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@497
			location   	(292, 5388)
			fill_color 	13434879
			nlines     	1
			max_width  	748
			justify    	0
			label      	"• MoveOGVFromFolderAction")
		    stereotype 	(object ItemLabel
			Parent_View 	@497
			location   	(292, 5338)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	748
			justify    	0
			label      	"<<XAction>>")
		    icon_style 	"Label"
		    fill_color 	13357823
		    quidu      	"524C0309020E"
		    compartment 	(object Compartment
			Parent_View 	@497
			location   	(292, 5493)
			font       	(object Font
			    size       	10
			    face       	"Arial"
			    charSet    	204
			    bold       	FALSE
			    italics    	FALSE
			    underline  	FALSE
			    strike     	FALSE
			    color      	0
			    default_color 	TRUE)
			icon_style 	"Icon"
			fill_color 	16777215
			anchor     	2
			nlines     	1
			max_width  	459
			justify    	1)
		    width      	766
		    height     	238
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::MoveOGVFromFolderAction" @498
		    ShowCompartmentStereotypes 	TRUE
		    SuppressAttribute 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    location   	(1596, 5394)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	13110000
			default_color 	FALSE)
		    label      	(object ItemLabel
			Parent_View 	@498
			location   	(1321, 5378)
			nlines     	1
			max_width  	550
			justify    	0
			label      	"MoveOGVFromFolderAction")
		    stereotype 	(object ItemLabel
			Parent_View 	@498
			location   	(1321, 5328)
			anchor     	10
			nlines     	1
			max_width  	550
			justify    	0
			label      	"<<KActionPlugin>>")
		    icon_style 	"Label"
		    line_color 	13110000
		    fill_color 	16777215
		    quidu      	"524C02F201F1"
		    width      	568
		    height     	157
		    annotation 	8
		    autoResize 	TRUE)
		(object UsesView "" @499
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	(object SegLabel @500
			Parent_View 	@499
			location   	(1175, 5371)
			font       	(object Font
			    size       	10
			    face       	"Arial"
			    charSet    	204
			    bold       	FALSE
			    italics    	FALSE
			    underline  	FALSE
			    strike     	FALSE
			    color      	0
			    default_color 	TRUE)
			anchor     	10
			anchor_loc 	1
			nlines     	1
			max_width  	450
			justify    	0
			label      	"<<call>>"
			pctDist    	0.486420
			height     	45
			orientation 	0)
		    line_color 	3342489
		    quidu      	"524C0324016B"
		    client     	@497
		    supplier   	@498
		    vertices   	(list Points
			(1049, 5422)
			(1311, 5408))
		    line_style 	0)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::RequestListFilters" @501
		    ShowCompartmentStereotypes 	TRUE
		    SuppressAttribute 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    location   	(4452, 2514)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	13110000
			default_color 	FALSE)
		    label      	(object ItemLabel
			Parent_View 	@501
			location   	(4268, 2498)
			nlines     	1
			max_width  	368
			justify    	0
			label      	"RequestListFilters")
		    stereotype 	(object ItemLabel
			Parent_View 	@501
			location   	(4268, 2448)
			anchor     	10
			nlines     	1
			max_width  	368
			justify    	0
			label      	"<<KActionPlugin>>")
		    icon_style 	"Label"
		    line_color 	13110000
		    fill_color 	16777215
		    quidu      	"538F10F201C1"
		    width      	386
		    height     	157
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::DocCardXPlugin::DocCardXPackage::LoadWaitingFromOGV" @502
		    ShowCompartmentStereotypes 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(4545, 2871)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@502
			location   	(4279, 2789)
			fill_color 	13434879
			nlines     	1
			max_width  	532
			justify    	0
			label      	"• LoadWaitingFromOGV")
		    stereotype 	(object ItemLabel
			Parent_View 	@502
			location   	(4279, 2739)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	532
			justify    	0
			label      	"<<XAction>>")
		    icon_style 	"Label"
		    fill_color 	13357823
		    quidu      	"538F1142007A"
		    compartment 	(object Compartment
			Parent_View 	@502
			location   	(4279, 2894)
			font       	(object Font
			    size       	10
			    face       	"Arial"
			    charSet    	204
			    bold       	FALSE
			    italics    	FALSE
			    underline  	FALSE
			    strike     	FALSE
			    color      	0
			    default_color 	TRUE)
			icon_style 	"Icon"
			fill_color 	16777215
			anchor     	2
			nlines     	2
			max_width  	537
			justify    	1)
		    width      	550
		    height     	288
		    annotation 	8
		    autoResize 	TRUE)
		(object UsesView "" @503
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	(object SegLabel @504
			Parent_View 	@503
			location   	(4374, 2689)
			font       	(object Font
			    size       	10
			    face       	"Arial"
			    charSet    	204
			    bold       	FALSE
			    italics    	FALSE
			    underline  	FALSE
			    strike     	FALSE
			    color      	0
			    default_color 	TRUE)
			anchor     	10
			anchor_loc 	1
			nlines     	1
			max_width  	450
			justify    	0
			label      	"<<call>>"
			pctDist    	0.500000
			height     	120
			orientation 	0)
		    line_color 	3342489
		    quidu      	"538F115900E8"
		    client     	@502
		    supplier   	@501
		    vertices   	(list Points
			(4506, 2726)
			(4472, 2592))
		    line_style 	0)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::MoveAllDocCardsFromOGV" @505
		    ShowCompartmentStereotypes 	TRUE
		    SuppressAttribute 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    location   	(3345, 5232)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	13110000
			default_color 	FALSE)
		    label      	(object ItemLabel
			Parent_View 	@505
			location   	(3075, 5216)
			nlines     	1
			max_width  	540
			justify    	0
			label      	"MoveAllDocCardsFromOGV")
		    stereotype 	(object ItemLabel
			Parent_View 	@505
			location   	(3075, 5166)
			anchor     	10
			nlines     	1
			max_width  	540
			justify    	0
			label      	"<<KActionPlugin>>")
		    icon_style 	"Label"
		    line_color 	13110000
		    fill_color 	16777215
		    quidu      	"53B407A40338"
		    width      	558
		    height     	157
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::DocCardXPlugin::DocCardXPackage::MoveAllDocCardsFromOGVAction" @506
		    ShowCompartmentStereotypes 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(3045, 5535)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@506
			location   	(2600, 5478)
			fill_color 	13434879
			nlines     	1
			max_width  	890
			justify    	0
			label      	"• MoveAllDocCardsFromOGVAction")
		    stereotype 	(object ItemLabel
			Parent_View 	@506
			location   	(2600, 5428)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	890
			justify    	0
			label      	"<<XAction>>")
		    icon_style 	"Label"
		    fill_color 	13357823
		    quidu      	"53B407E10094"
		    compartment 	(object Compartment
			Parent_View 	@506
			location   	(2600, 5583)
			font       	(object Font
			    size       	10
			    face       	"Arial"
			    charSet    	204
			    bold       	FALSE
			    italics    	FALSE
			    underline  	FALSE
			    strike     	FALSE
			    color      	0
			    default_color 	TRUE)
			icon_style 	"Icon"
			fill_color 	16777215
			anchor     	2
			nlines     	1
			max_width  	459
			justify    	1)
		    width      	908
		    height     	238
		    annotation 	8
		    autoResize 	TRUE)
		(object UsesView "" @507
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	(object SegLabel @508
			Parent_View 	@507
			location   	(3093, 5357)
			font       	(object Font
			    size       	10
			    face       	"Arial"
			    charSet    	204
			    bold       	FALSE
			    italics    	FALSE
			    underline  	FALSE
			    strike     	FALSE
			    color      	0
			    default_color 	TRUE)
			anchor     	10
			anchor_loc 	1
			nlines     	1
			max_width  	450
			justify    	0
			label      	"<<call>>"
			pctDist    	-0.047538
			height     	91
			orientation 	0)
		    line_color 	3342489
		    quidu      	"53B407F6037E"
		    client     	@506
		    supplier   	@505
		    vertices   	(list Points
			(3161, 5415)
			(3266, 5310))
		    line_style 	0)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::DocCardXPlugin::DocCardXPackage::GetTopicsFromSearchUvsQuery" @509
		    ShowCompartmentStereotypes 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(1950, 492)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@509
			location   	(1632, 410)
			fill_color 	13434879
			nlines     	1
			max_width  	636
			justify    	0
			label      	"• GetTopicsFromSearchUvsQuery")
		    stereotype 	(object ItemLabel
			Parent_View 	@509
			location   	(1632, 360)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	636
			justify    	0
			label      	"<<XAction>>")
		    icon_style 	"Label"
		    fill_color 	13357823
		    quidu      	"54C7782C00F6"
		    compartment 	(object Compartment
			Parent_View 	@509
			location   	(1632, 515)
			font       	(object Font
			    size       	10
			    face       	"Arial"
			    charSet    	204
			    bold       	FALSE
			    italics    	FALSE
			    underline  	FALSE
			    strike     	FALSE
			    color      	0
			    default_color 	TRUE)
			icon_style 	"Icon"
			fill_color 	16777215
			anchor     	2
			nlines     	2
			max_width  	537
			justify    	1)
		    width      	654
		    height     	288
		    annotation 	8
		    autoResize 	TRUE)
		(object UsesView "" @510
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	(object SegLabel @511
			Parent_View 	@510
			location   	(2112, 265)
			font       	(object Font
			    size       	10
			    face       	"Arial"
			    charSet    	204
			    bold       	FALSE
			    italics    	FALSE
			    underline  	FALSE
			    strike     	FALSE
			    color      	0
			    default_color 	TRUE)
			anchor     	10
			anchor_loc 	1
			nlines     	1
			max_width  	450
			justify    	0
			label      	"<<call>>"
			pctDist    	0.242822
			height     	72
			orientation 	0)
		    line_color 	3342489
		    quidu      	"54C7785A0000"
		    client     	@509
		    supplier   	@395
		    vertices   	(list Points
			(2123, 347)
			(2266, 228))
		    line_style 	0)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::DocCardXPlugin::DocCardXPackage::dobatchoperationsearchuvsquery" @512
		    ShowCompartmentStereotypes 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(1554, 138)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@512
			location   	(1219, 81)
			fill_color 	13434879
			nlines     	1
			max_width  	670
			justify    	0
			label      	"• dobatchoperationsearchuvsquery")
		    stereotype 	(object ItemLabel
			Parent_View 	@512
			location   	(1219, 31)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	670
			justify    	0
			label      	"<<XAction>>")
		    icon_style 	"Label"
		    fill_color 	13357823
		    quidu      	"55A7B28C02A8"
		    compartment 	(object Compartment
			Parent_View 	@512
			location   	(1219, 186)
			font       	(object Font
			    size       	10
			    face       	"Arial"
			    charSet    	204
			    bold       	FALSE
			    italics    	FALSE
			    underline  	FALSE
			    strike     	FALSE
			    color      	0
			    default_color 	TRUE)
			icon_style 	"Icon"
			fill_color 	16777215
			anchor     	2
			nlines     	1
			max_width  	459
			justify    	1)
		    width      	688
		    height     	238
		    annotation 	8
		    autoResize 	TRUE)
		(object UsesView "" @513
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	(object SegLabel @514
			Parent_View 	@513
			location   	(2029, 110)
			font       	(object Font
			    size       	10
			    face       	"Arial"
			    charSet    	204
			    bold       	FALSE
			    italics    	FALSE
			    underline  	FALSE
			    strike     	FALSE
			    color      	0
			    default_color 	TRUE)
			anchor     	10
			anchor_loc 	1
			nlines     	1
			max_width  	450
			justify    	0
			label      	"<<call>>"
			pctDist    	0.470955
			height     	35
			orientation 	0)
		    line_color 	3342489
		    quidu      	"55A7B298019D"
		    client     	@512
		    supplier   	@395
		    vertices   	(list Points
			(1898, 142)
			(2174, 147))
		    line_style 	0)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::GarViewLastAddedAttachmentsAction" @515
		    ShowCompartmentStereotypes 	TRUE
		    SuppressAttribute 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    location   	(2025, 5787)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	13110000
			default_color 	FALSE)
		    label      	(object ItemLabel
			Parent_View 	@515
			location   	(1658, 5771)
			nlines     	1
			max_width  	734
			justify    	0
			label      	"GarViewLastAddedAttachmentsAction")
		    stereotype 	(object ItemLabel
			Parent_View 	@515
			location   	(1658, 5721)
			anchor     	10
			nlines     	1
			max_width  	734
			justify    	0
			label      	"<<KActionPlugin>>")
		    icon_style 	"Label"
		    line_color 	13110000
		    fill_color 	16777215
		    quidu      	"5603F12B0180"
		    width      	752
		    height     	157
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::DocCardXPlugin::DocCardXPackage::DoViewAttachmentsSavedFromDisk" @516
		    ShowCompartmentStereotypes 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(684, 5907)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@516
			location   	(342, 5854)
			fill_color 	13434879
			nlines     	1
			max_width  	684
			justify    	0
			label      	"DoViewAttachmentsSavedFromDisk")
		    stereotype 	(object ItemLabel
			Parent_View 	@516
			location   	(342, 5804)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	684
			justify    	0
			label      	"<<XAction>>")
		    icon_style 	"Label"
		    fill_color 	13357823
		    quidu      	"56279B9502F7"
		    width      	702
		    height     	230
		    annotation 	8
		    autoResize 	TRUE)
		(object UsesView "" @517
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	(object SegLabel @518
			Parent_View 	@517
			location   	(1333, 5790)
			font       	(object Font
			    size       	10
			    face       	"Arial"
			    charSet    	204
			    bold       	FALSE
			    italics    	FALSE
			    underline  	FALSE
			    strike     	FALSE
			    color      	0
			    default_color 	TRUE)
			anchor     	10
			anchor_loc 	1
			nlines     	1
			max_width  	450
			justify    	0
			label      	"<<call>>"
			pctDist    	0.493622
			height     	58
			orientation 	0)
		    line_color 	3342489
		    quidu      	"5628A0C00062"
		    client     	@516
		    supplier   	@515
		    vertices   	(list Points
			(1035, 5875)
			(1648, 5819))
		    line_style 	0)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardView::add-attachments-saved-from-disk" @519
		    ShowCompartmentStereotypes 	TRUE
		    SuppressAttribute 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    location   	(1254, 6378)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	13110000
			default_color 	FALSE)
		    label      	(object ItemLabel
			Parent_View 	@519
			location   	(939, 6350)
			nlines     	1
			max_width  	630
			justify    	0
			label      	"add-attachments-saved-from-disk")
		    stereotype 	(object ItemLabel
			Parent_View 	@519
			location   	(939, 6300)
			anchor     	10
			nlines     	1
			max_width  	630
			justify    	0
			label      	"<<VM>>")
		    icon_style 	"Label"
		    line_color 	13110000
		    fill_color 	16777215
		    quidu      	"56279C26009C"
		    width      	648
		    height     	180
		    annotation 	8
		    autoResize 	TRUE)
		(object AssociationViewNew "$UNNAMED$54" @520
		    location   	(1524, 6097)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	TRUE
		    line_color 	3342489
		    quidu      	"5627A09B0184"
		    roleview_list 	(list RoleViews
			(object RoleView "success" @521
			    Parent_View 	@520
			    location   	(876, 160)
			    font       	(object Font
				size       	10
				face       	"Arial"
				charSet    	204
				bold       	FALSE
				italics    	FALSE
				underline  	FALSE
				strike     	FALSE
				color      	0
				default_color 	TRUE)
			    label      	(object SegLabel @522
				Parent_View 	@521
				location   	(1368, 6173)
				font       	(object Font
				    size       	10
				    face       	"Arial"
				    charSet    	204
				    bold       	FALSE
				    italics    	FALSE
				    underline  	FALSE
				    strike     	FALSE
				    color      	0
				    default_color 	TRUE)
				anchor     	1
				anchor_loc 	1
				nlines     	1
				max_width  	185
				justify    	0
				label      	"+success"
				pctDist    	0.229075
				height     	76
				orientation 	0)
			    stereotype 	(object SegLabel @523
				Parent_View 	@521
				location   	(1371, 6136)
				font       	(object Font
				    size       	10
				    face       	"Arial"
				    charSet    	204
				    bold       	FALSE
				    italics    	FALSE
				    underline  	FALSE
				    strike     	FALSE
				    color      	0
				    default_color 	TRUE)
				anchor     	10
				anchor_loc 	1
				nlines     	1
				max_width  	450
				justify    	0
				label      	"<<velocity>>"
				pctDist    	0.224670
				height     	39
				orientation 	0)
			    line_color 	3342489
			    quidu      	"5627A09B0375"
			    client     	@520
			    supplier   	@519
			    vertices   	(list Points
				(1524, 6097)
				(1034, 6097)
				(1034, 6288))
			    line_style 	3
			    origin_attachment 	(1524, 6097)
			    terminal_attachment 	(1034, 6288))
			(object RoleView "$UNNAMED$55" @524
			    Parent_View 	@520
			    location   	(876, 160)
			    stereotype 	TRUE
			    line_color 	3342489
			    quidu      	"5627A09B0377"
			    client     	@520
			    supplier   	@516
			    vertices   	(list Points
				(1524, 6097)
				(1584, 6097)
				(1584, 6019)
				(1035, 6019))
			    line_style 	3
			    origin_attachment 	(1524, 6097)
			    terminal_attachment 	(1035, 6019))))
		(object AssociationViewNew "L" @525
		    location   	(852, 6097)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	TRUE
		    line_color 	3342489
		    quidu      	"5627A0C502C8"
		    roleview_list 	(list RoleViews
			(object RoleView "error" @526
			    Parent_View 	@525
			    location   	(168, 190)
			    font       	(object Font
				size       	10
				face       	"Arial"
				charSet    	204
				bold       	FALSE
				italics    	FALSE
				underline  	FALSE
				strike     	FALSE
				color      	0
				default_color 	TRUE)
			    label      	(object SegLabel @527
				Parent_View 	@526
				location   	(824, 6252)
				font       	(object Font
				    size       	10
				    face       	"Arial"
				    charSet    	204
				    bold       	FALSE
				    italics    	FALSE
				    underline  	FALSE
				    strike     	FALSE
				    color      	0
				    default_color 	TRUE)
				anchor     	1
				anchor_loc 	1
				nlines     	1
				max_width  	115
				justify    	0
				label      	"+error"
				pctDist    	0.814394
				height     	88
				orientation 	1)
			    stereotype 	(object SegLabel @528
				Parent_View 	@526
				location   	(785, 6217)
				font       	(object Font
				    size       	10
				    face       	"Arial"
				    charSet    	204
				    bold       	FALSE
				    italics    	FALSE
				    underline  	FALSE
				    strike     	FALSE
				    color      	0
				    default_color 	TRUE)
				anchor     	10
				anchor_loc 	1
				nlines     	1
				max_width  	450
				justify    	0
				label      	"<<velocity>>"
				pctDist    	0.681818
				height     	127
				orientation 	1)
			    line_color 	3342489
			    quidu      	"5627A0C7003D"
			    client     	@525
			    supplier   	@519
			    vertices   	(list Points
				(852, 6097)
				(912, 6097)
				(912, 6283)
				(930, 6283))
			    line_style 	3
			    origin_attachment 	(852, 6097)
			    terminal_attachment 	(930, 6283))
			(object RoleView "$UNNAMED$56" @529
			    Parent_View 	@525
			    location   	(168, 190)
			    stereotype 	TRUE
			    line_color 	3342489
			    quidu      	"5627A0C7003F"
			    client     	@525
			    supplier   	@516
			    vertices   	(list Points
				(852, 6097)
				(665, 6097)
				(665, 6022))
			    line_style 	3
			    origin_attachment 	(852, 6097)
			    terminal_attachment 	(665, 6022))))
		(object AssociationViewNew "$UNNAMED$57" @530
		    location   	(982, 6155)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	TRUE
		    line_color 	3342489
		    quidu      	"5628A48A00D7"
		    roleview_list 	(list RoleViews
			(object RoleView "input" @531
			    Parent_View 	@530
			    location   	(298, 248)
			    font       	(object Font
				size       	10
				face       	"Arial"
				charSet    	204
				bold       	FALSE
				italics    	FALSE
				underline  	FALSE
				strike     	FALSE
				color      	0
				default_color 	TRUE)
			    label      	(object SegLabel @532
				Parent_View 	@531
				location   	(941, 6260)
				font       	(object Font
				    size       	10
				    face       	"Arial"
				    charSet    	204
				    bold       	FALSE
				    italics    	FALSE
				    underline  	FALSE
				    strike     	FALSE
				    color      	0
				    default_color 	TRUE)
				anchor     	1
				anchor_loc 	1
				nlines     	1
				max_width  	116
				justify    	0
				label      	"+input"
				pctDist    	0.800000
				height     	42
				orientation 	1)
			    stereotype 	(object SegLabel @533
				Parent_View 	@531
				location   	(999, 6182)
				font       	(object Font
				    size       	10
				    face       	"Arial"
				    charSet    	204
				    bold       	FALSE
				    italics    	FALSE
				    underline  	FALSE
				    strike     	FALSE
				    color      	0
				    default_color 	TRUE)
				anchor     	10
				anchor_loc 	1
				nlines     	1
				max_width  	450
				justify    	0
				label      	"<<velocity-xml>>"
				pctDist    	0.500000
				height     	120
				orientation 	0)
			    line_color 	3342489
			    quidu      	"5628A48A034E"
			    client     	@530
			    supplier   	@519
			    vertices   	(list Points
				(982, 6155)
				(982, 6288))
			    line_style 	3
			    origin_attachment 	(982, 6155)
			    terminal_attachment 	(982, 6288))
			(object RoleView "$UNNAMED$58" @534
			    Parent_View 	@530
			    location   	(298, 248)
			    stereotype 	TRUE
			    line_color 	3342489
			    quidu      	"5628A48A0351"
			    client     	@530
			    supplier   	@516
			    vertices   	(list Points
				(982, 6155)
				(982, 6022))
			    line_style 	3
			    origin_attachment 	(982, 6155)
			    terminal_attachment 	(982, 6022))))))
	(object ClassDiagram "Main"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ClassUID"
		    value      	"4C7B6E4F001F"))
	    quid       	"4CAD9E4A006D"
	    title      	"Main"
	    zoom       	100
	    max_height 	28350
	    max_width  	21600
	    origin_x   	0
	    origin_y   	0
	    items      	(list diagram_item_list
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::SearchUvsQueryForm::AssignedToInVersionsAsValues" @535
		    ShowCompartmentStereotypes 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(1080, 966)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@535
			location   	(774, 884)
			fill_color 	13434879
			nlines     	1
			max_width  	612
			justify    	0
			label      	"AssignedToInVersionsAsValues")
		    stereotype 	(object ItemLabel
			Parent_View 	@535
			location   	(774, 834)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	612
			justify    	0
			label      	"<<Enum>>")
		    icon_style 	"Label"
		    fill_color 	13821680
		    quidu      	"4CAD9E51036F"
		    width      	630
		    height     	288
		    annotation 	8
		    autoResize 	TRUE)))
	(object ClassDiagram "Main"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ClassUID"
		    value      	"4C7B5C0402FD"))
	    quid       	"4CF8E45000E0"
	    title      	"Main"
	    zoom       	100
	    max_height 	28350
	    max_width  	21600
	    origin_x   	0
	    origin_y   	0
	    items      	(list diagram_item_list))
	(object ClassDiagram "Main"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ClassUID"
		    value      	"512C95E000CF"))
	    quid       	"512C96D70362"
	    title      	"Main"
	    zoom       	100
	    max_height 	28350
	    max_width  	21600
	    origin_x   	1297
	    origin_y   	0
	    items      	(list diagram_item_list
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupport::GardocExtractor::NestedConstants" @536
		    ShowCompartmentStereotypes 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(2898, 840)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@536
			location   	(1980, 283)
			fill_color 	13434879
			nlines     	1
			max_width  	1836
			justify    	0
			label      	"NestedConstants")
		    stereotype 	(object ItemLabel
			Parent_View 	@536
			location   	(1980, 233)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	1836
			justify    	0
			label      	"<<Constants>>")
		    icon_style 	"Label"
		    fill_color 	16119285
		    quidu      	"512C96E201BC"
		    width      	1854
		    height     	1238
		    annotation 	8
		    autoResize 	TRUE)))))
