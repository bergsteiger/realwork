
(object Petal
    version    	50
    _written   	"Rose 2006.0.0.060314"
    charSet    	204)

(object Class_Category "EntitiesImpl"
    is_unit    	TRUE
    is_loaded  	TRUE
    attributes 	(list Attribute_Set
	(object Attribute
	    tool       	"MDA Generator"
	    name       	"AbstarctOperation"
	    value      	"regular")
	(object Attribute
	    tool       	"MDA Generator"
	    name       	"GlobalLocally"
	    value      	"false")
	(object Attribute
	    tool       	"MDA Generator"
	    name       	"IsNative"
	    value      	"false")
	(object Attribute
	    tool       	"MDA Generator"
	    name       	"WikiPageID (wiki)"
	    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Ìîäåëü ïðîåêòà "MDProcess"/DocCardChange/EntitiesImpl|4C52C15A0156
	    ))
	(object Attribute
	    tool       	"MDA Generator"
	    name       	"SourceType (wiki)"
	    value      	"wiki")
	(object Attribute
	    tool       	"MDA Generator"
	    name       	"ElementCreationOrder"
	    value      	"19022866996"))
    quid       	"4C52C15A0156"
    documentation 	"Ðåàëèçàöèÿ"
    stereotype 	"Impl"
    visible_categories 	(list visibility_relationship_list
	(object Visibility_Relationship
	    quid       	"4C52C1750322"
	    supplier   	"Logical View::MDProcess::DocCardChange::Entities"
	    quidu      	"4C37135C025B")
	(object Visibility_Relationship
	    quid       	"4C52CD5D01D3"
	    supplier   	"Logical View::MDProcess::ConfluenceMDChange::RequestsImpl"
	    quidu      	"4741B70F01EA")
	(object Visibility_Relationship
	    quid       	"4C52CEFB00C3"
	    supplier   	"Logical View::MDProcess::ConfluenceMDChange::Requests"
	    quidu      	"4741A5C102D5")
	(object Visibility_Relationship
	    quid       	"4C52E13900B1"
	    supplier   	"Logical View::MDProcess::DocCardChange::DocCardCommon"
	    quidu      	"4C3FF78C02C8")
	(object Visibility_Relationship
	    quid       	"4C52E1A7020D"
	    supplier   	"Logical View::MDProcess::DocCardChange::DocCardChangeDAO"
	    quidu      	"4C40189C0104")
	(object Visibility_Relationship
	    quid       	"4C60E98000C4"
	    supplier   	"Logical View::MDProcess::DocCardChange::DocCardSupportTypes"
	    quidu      	"4C60E93100E2")
	(object Visibility_Relationship
	    quid       	"4CAC25450004"
	    supplier   	"Logical View::MDProcess::ConfluenceMDChange::MdcCommonImpl"
	    quidu      	"48D8E72F0140"))
    exportControl 	"Public"
    logical_models 	(list unit_reference_list
	(object Class "UVSQueryImpl"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (fctr.java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/DocCardChange/EntitiesImpl/UVSQueryImplFactoryImpl.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (fctr.java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/DocCardChange/EntitiesImpl/UVSQueryImpl.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"WikiPageID (wiki)"
		    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Ìîäåëü ïðîåêòà "MDProcess"/DocCardChange/EntitiesImpl/UVSQueryImpl|4C52CC2C0221
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (wiki)"
		    value      	"wiki")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_CUSTOM_IMPORT*"
		    value      	"//#UC START# *4C52CC2C0221_CUSTOM_IMPORT*¤import ru.garant.shared.Core.Root.NoActiveFactory;¤import ru.garant.shared.FSM.ValidationFailed;¤import ru.garant.shared.GCI.I18N.Messages;¤import ru.garant.shared.GCL.DateUtils;¤import ru.garant.shared.GCL.DateUtils.WrongFormat;¤import ru.garant.shared.ConfluenceCore.ActionSupport.ActionContextThreadLocalFactory;¤¤import ru.garant.MDProcess.ConfluenceMDChange.MDChangeDAO.AbstractRequestDAOProxy;¤import ru.garant.MDProcess.ConfluenceMDChange.MDChangeDAO.ExternalAuthorDAO;¤import ru.garant.MDProcess.ConfluenceMDChange.MDChangeDAO.LinkedExternalAuthorDAO;¤import ru.garant.MDProcess.ConfluenceMDChange.RequestDashboard.DashboardCacheManager;¤import ru.garant.MDProcess.ConfluencePlugins.AutoCompleteValues.AutoCompleteProvider;¤import ru.garant.MDProcess.ConfluencePlugins.DiscussionsSupport.*;¤import ru.garant.MDProcess.ServerGate.GenerationContentsImpl.PageImpl;¤¤import ru.garant.MDProcess.DocCardChange.DocCardChangeDAO.*;¤import ru.garant.MDProcess.DocCardChange.DocCardSupport.ChangeIncludeInVersionDate;¤import ru.garant.MDProcess.DocCardChange.DocCardSupport.DpoUvsHelper;¤import ru.garant.MDProcess.DocCardChange.DocCardCommon.DocCardManager;¤import ru.garant.MDProcess.DocCardChange.Entities.sm.UVSStateMachine.Closed;¤import ru.garant.MDProcess.DocCardChange.Entities.sm.UVSStateMachine.Discarded;¤import ru.garant.MDProcess.DocCardChange.DocCardCommon.CreateActionResult;¤import ru.garant.MDProcess.DocCardChange.DocCardCommon.CurrentDocFinderManager;¤import ru.garant.MDProcess.DocCardChange.DocCardCommon.HelpDeskRemote;¤import ru.garant.MDProcess.DocCardChange.DocCardCommon.MainAttributes;¤import ru.garant.MDProcess.DocCardChange.DocCardCommon.PartnerManager;¤import ru.garant.MDProcess.DocCardChange.DocCardCommon.TopicHelper;¤import ru.garant.MDProcess.DocCardChange.DocCardCommon.OGVLinksManager;¤import ru.garant.MDProcess.DocCardChange.DocCardCommonImpl.CachedPartnerManager;¤import ru.garant.MDProcess.DocCardChange.DocCardChangeDAO.GarDocDAO;¤import ru.garant.MDProcess.DocCardChange.DocCardChangeDAO.ExternalAuthorFromHelpDeskDAO;¤import ru.garant.MDProcess.DocCardChange.DocCardChangeDAO.CopyDAO;¤¤import java.util.ArrayList;¤import java.util.Arrays;¤import java.util.Collection;¤import java.util.Date;¤import java.util.HashSet;¤import java.util.List;¤import java.util.Set;¤¤import net.sf.hibernate.HibernateException;¤import net.sf.hibernate.Query;¤import net.sf.hibernate.Session;¤¤import org.apache.commons.beanutils.PropertyUtils;¤import org.apache.commons.lang.StringUtils;¤¤import com.atlassian.confluence.core.DefaultSaveContext;¤import com.atlassian.confluence.labels.Label;¤import com.atlassian.confluence.pages.Attachment;¤import com.atlassian.confluence.pages.Page;¤import com.atlassian.confluence.setup.bandana.ConfluenceBandanaContext;¤import com.atlassian.confluence.user.AuthenticatedUserThreadLocal;¤import com.atlassian.user.Group;¤import com.atlassian.user.User;¤//#UC END# *4C52CC2C0221_CUSTOM_IMPORT*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_CUSTOM_CLASS_DEFINITION*"
		    value      	"//#UC START# *4C52CC2C0221_CUSTOM_CLASS_DEFINITION*¤//#UC END# *4C52CC2C0221_CUSTOM_CLASS_DEFINITION*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_48E1DE4B0386_ON_RESURECT_ACTION_IMPL*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_48E1DE4B0386_ON_RESURECT_ACTION_IMPL*¤		//#UC END# *4C52CC2C0221_48E1DE4B0386_ON_RESURECT_ACTION_IMPL*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_48E1DE4B0386_ACTION_ACTIVE_EXIT*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_48E1DE4B0386_ACTION_ACTIVE_EXIT*¤		//#UC END# *4C52CC2C0221_48E1DE4B0386_ACTION_ACTIVE_EXIT*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_48E1DE4B0386_ACTION_CLOSED_ENTER*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_48E1DE4B0386_ACTION_CLOSED_ENTER*¤		//#UC END# *4C52CC2C0221_48E1DE4B0386_ACTION_CLOSED_ENTER*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_48E1DE4B0386_CREATE_VALIDATE*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_48E1DE4B0386_CREATE_VALIDATE*¤		//#UC END# *4C52CC2C0221_48E1DE4B0386_CREATE_VALIDATE*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_48E1DE4B0386_CREATE_PRE_ENTER*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_48E1DE4B0386_CREATE_PRE_ENTER*¤		//#UC END# *4C52CC2C0221_48E1DE4B0386_CREATE_PRE_ENTER*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_48E1DE4B0386_CREATE_PRE_EXIT*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_48E1DE4B0386_CREATE_PRE_EXIT*¤		//#UC END# *4C52CC2C0221_48E1DE4B0386_CREATE_PRE_EXIT*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_48E1DE4B0386_ACTIVE_VALIDATE*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_48E1DE4B0386_ACTIVE_VALIDATE*¤		//#UC END# *4C52CC2C0221_48E1DE4B0386_ACTIVE_VALIDATE*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_48E1DE4B0386_ACTIVE_PRE_ENTER*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_48E1DE4B0386_ACTIVE_PRE_ENTER*¤		//#UC END# *4C52CC2C0221_48E1DE4B0386_ACTIVE_PRE_ENTER*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_48E1DE4B0386_ACTIVE_PRE_EXIT*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_48E1DE4B0386_ACTIVE_PRE_EXIT*¤		//#UC END# *4C52CC2C0221_48E1DE4B0386_ACTIVE_PRE_EXIT*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_48E1DE4B0386_ONACCEPT_VALIDATE*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_48E1DE4B0386_ONACCEPT_VALIDATE*¤		//#UC END# *4C52CC2C0221_48E1DE4B0386_ONACCEPT_VALIDATE*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_48E1DE4B0386_ONACCEPT_PRE_ENTER*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_48E1DE4B0386_ONACCEPT_PRE_ENTER*¤		//#UC END# *4C52CC2C0221_48E1DE4B0386_ONACCEPT_PRE_ENTER*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_48E1DE4B0386_ONACCEPT_PRE_EXIT*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_48E1DE4B0386_ONACCEPT_PRE_EXIT*¤		//#UC END# *4C52CC2C0221_48E1DE4B0386_ONACCEPT_PRE_EXIT*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_48E1DE4B0386_ASSIGNED_VALIDATE*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_48E1DE4B0386_ASSIGNED_VALIDATE*¤		//#UC END# *4C52CC2C0221_48E1DE4B0386_ASSIGNED_VALIDATE*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_48E1DE4B0386_ASSIGNED_PRE_ENTER*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_48E1DE4B0386_ASSIGNED_PRE_ENTER*¤		//#UC END# *4C52CC2C0221_48E1DE4B0386_ASSIGNED_PRE_ENTER*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_48E1DE4B0386_ASSIGNED_PRE_EXIT*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_48E1DE4B0386_ASSIGNED_PRE_EXIT*¤		//#UC END# *4C52CC2C0221_48E1DE4B0386_ASSIGNED_PRE_EXIT*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_48E1DE4B0386_DISCARDED_VALIDATE*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_48E1DE4B0386_DISCARDED_VALIDATE*¤		//#UC END# *4C52CC2C0221_48E1DE4B0386_DISCARDED_VALIDATE*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_48E1DE4B0386_DISCARDED_PRE_ENTER*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_48E1DE4B0386_DISCARDED_PRE_ENTER*¤		//#UC END# *4C52CC2C0221_48E1DE4B0386_DISCARDED_PRE_ENTER*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_48E1DE4B0386_DISCARDED_PRE_EXIT*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_48E1DE4B0386_DISCARDED_PRE_EXIT*¤		//#UC END# *4C52CC2C0221_48E1DE4B0386_DISCARDED_PRE_EXIT*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_48E1DE4B0386_PAUSE_VALIDATE*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_48E1DE4B0386_PAUSE_VALIDATE*¤		//#UC END# *4C52CC2C0221_48E1DE4B0386_PAUSE_VALIDATE*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_48E1DE4B0386_PAUSE_PRE_ENTER*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_48E1DE4B0386_PAUSE_PRE_ENTER*¤		//#UC END# *4C52CC2C0221_48E1DE4B0386_PAUSE_PRE_ENTER*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_48E1DE4B0386_PAUSE_PRE_EXIT*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_48E1DE4B0386_PAUSE_PRE_EXIT*¤		//#UC END# *4C52CC2C0221_48E1DE4B0386_PAUSE_PRE_EXIT*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_48E1DE4B0386_CLOSED_VALIDATE*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_48E1DE4B0386_CLOSED_VALIDATE*¤		//#UC END# *4C52CC2C0221_48E1DE4B0386_CLOSED_VALIDATE*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_48E1DE4B0386_CLOSED_PRE_ENTER*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_48E1DE4B0386_CLOSED_PRE_ENTER*¤		//#UC END# *4C52CC2C0221_48E1DE4B0386_CLOSED_PRE_ENTER*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_48E1DE4B0386_CLOSED_PRE_EXIT*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_48E1DE4B0386_CLOSED_PRE_EXIT*¤		//#UC END# *4C52CC2C0221_48E1DE4B0386_CLOSED_PRE_EXIT*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_48E1DE4B0386_SAVE_IMPL*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_48E1DE4B0386_SAVE_IMPL*¤		//#UC END# *4C52CC2C0221_48E1DE4B0386_SAVE_IMPL*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_48E1DE4B0386_POST_COMMIT*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_48E1DE4B0386_POST_COMMIT*¤		//#UC END# *4C52CC2C0221_48E1DE4B0386_POST_COMMIT*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_CUSTOM_METHODS_AND_DATA*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_CUSTOM_METHODS_AND_DATA*¤	@Override¤	protected UVSQuestDAO getProxy() {¤		return (UVSQuestDAO)super.getProxy();¤	}¤¤	@Override¤	protected AbstractRequestDAOProxy createProxy() {¤		UVSQuestDAO proxy = new UVSQuestDAO();¤		proxy.setReleasePriority(AbstractRequestDAOProxy.ACTIVE_RELEASE_PRIORITY);¤		proxy.setSortRelease(AbstractRequestDAOProxy.stringSortLastValue);¤		proxy.setSortExecutorName(AbstractRequestDAOProxy.stringSortLastValue);¤		proxy.setExpectedTime(0);¤		proxy.setFirstExpectedTime(0);¤		proxy.setInWorkTime(0);¤		proxy.setInStateTime(0);¤		proxy.setImportance((byte)0);¤		proxy.setAcceptedExpectedTime(0);¤		proxy.setCompletionTime(0);¤		proxy.setFirstCompletionTime(0);¤		proxy.setState(UVSStateMachine.ST_DISCARDED.getSortValue());¤		proxy.setPrevState((byte)0);¤		proxy.setCopy(null);¤		¤		return proxy;¤	}¤¤	@Override¤	protected Class<? extends AbstractRequestDAOProxy> getProxyClass() {¤		return UVSQuestDAO.class;¤	}¤	¤	@Override¤	protected AbstractRequestNotificationGateway createNotificationGateway() {¤		return UVSQueryNotificationGateway.Factory.get(this);¤	}¤¤	@Override¤	protected long getTimeDifference(long initialForecast,¤			AbstractState currentState) {¤		return 0;¤	}¤¤	@Override¤	protected void setAttributes() {¤		// TODO Auto-generated method stub¤		long time1 = new Date().getTime();¤		getProxy().setImportance((byte)getImportance().getId());¤		getProxy().setState(getStateSortValue());¤		getProxy().setPriority(getPriority());¤		if((new Date().getTime() - time1) > 0){¤			Logs.LOG_W("setAttributes::time1=" + (new Date().getTime() - time1));¤		}¤		long time2 = new Date().getTime();¤		getProxy().setExecutionGroup(getExecutionGroup().save());¤		if((new Date().getTime() - time2) > 0){¤			Logs.LOG_W("setAttributes::time2=" + (new Date().getTime() - time2));¤		}¤		long time3 = new Date().getTime();¤¤		getProxy().setSortExecutorName(getExecutionGroup().getSortValue());¤		getProxy().setExecutionGroupDecision(getExecutionGroupDecision().save());¤		if((new Date().getTime() - time3) > 0){¤			Logs.LOG_W("setAttributes::time3=" + (new Date().getTime() - time3));¤		}	¤		long time4 = new Date().getTime();¤		if (getProxy().getCopy() != null && getProxy().getCopy().getId() != 0) {¤			CopyDAO persistent = CopyDAO.get(getProxy().getCopy().getId());¤			if (null != persistent) {¤				try {¤					PropertyUtils.copyProperties(persistent, getProxy().getCopy());¤				} catch (Exception e) {¤					Logs.LOG_SEX(e);¤					throw new IllegalStateException(e.getMessage());¤				}¤			}¤		}¤		if((new Date().getTime() - time4) > 0){¤			Logs.LOG_W("setAttributes::time4=" + (new Date().getTime() - time4));¤		}	¤	}	¤	¤	private DocCard garDocForCreateRequest_;¤¤	private String discardedResponse_;¤	¤	private boolean ifCreateNewUOQuery_ = false;¤	private boolean ifCreateWhenDocHasNotQuery_ = false;¤	private boolean isForSystemLogic_ = false;¤	private boolean ifCreateQueryWithoutResponsible_ = false;¤	private boolean ifCreateReqionQuery_ = false;¤	private boolean isNewCurrentDocAndGotoClose_ = false;¤	private boolean isNewImageAndGotoOnAcceptInUOAfterUOManager_ = false;¤	private boolean isNewCurrentDocAndGotoManager_ = false;¤	private boolean isUoQueryRejected_ = false;¤	private boolean isRegionQueryRejected_ = false;¤	private boolean isForSystemRollBackAssigned_ = false;¤	¤	private static final String WHO_CARRY_OUT_DOC_TO_UO = "WHO_CARRY_OUT_DOC_TO_UO";  ¤	¤	@Override¤	protected void onStateChanged() {¤		super.onStateChanged();¤		User u = DPOUVSManager.Factory.get(getPage().getSpaceKey()).getLeaderDpoUvs();¤		if (u != null) {¤			GarantHibernate uds = new GarantHibernate(ContainerManager.Factory.get().getSessionFactory());¤			UnreadDocument ud = uds.get(UnreadDocument.class, getPage().getId());¤			ud.addUserThatUnreadOwn(u.getName());¤		}¤	}¤		¤	private void validateCopiesAndRestrictedStatus() throws ru.garant.shared.FSM.ValidationFailed{¤		if (StringUtils.isEmpty(getCopyType())) {¤			throw new ValidationFailed(1100, Messages.Factory.messages().get("edituvsquery.error.at.change.state.no.copy"));¤		}		¤		if (getDocCard().getRestrictedStatus() == 0) {¤			throw new ValidationFailed(1101, Messages.Factory.messages().get("edituvsquery.error.at.change.state.no.restricted.status"));¤		}¤	}¤	¤	¤	@Override¤	public void setPriority(long priority) {¤		getProxy().setPriority(RequestPriorityManager.Factory.get().getFinalStatePriority());¤	}¤¤	@Override¤	public long getPriority() {¤		return RequestPriorityManager.Factory.get().getFinalStatePriority();¤	}¤	¤	private static List<String> getExecutorsInTransferInUOState (DPOUVSManager manager, String localUserName) {¤		List<String> exs = new ArrayList<String> ();¤		List<String> exsWithGardocUoDocPosters = new ArrayList<String> ();¤		for (String s : ContainerManager.Factory.get().getUserAccessor().getMemberNames(manager.getUvsGroupWhoTransferDocsToUO())) {¤			exs.add(s);¤			exsWithGardocUoDocPosters.add(s);¤		}¤		for (String s : ContainerManager.Factory.get().getUserAccessor().getMemberNames(manager.getGardocUoDocPosters())) {¤			exsWithGardocUoDocPosters.add(s);¤		}¤¤		if (exsWithGardocUoDocPosters.contains(localUserName)) {¤			return new ArrayList<String> (Arrays.asList(localUserName));¤		}¤		return exs;¤	}¤¤	private static List<String> getStringListFromGroup (Group group) {¤		List<String> exs = new ArrayList<String> ();¤		for (String s : ContainerManager.Factory.get().getUserAccessor().getMemberNames(group)) {¤			exs.add(s);¤		}¤		return exs;¤	}¤	¤	public AutoCompleteProvider getAutoCompleteProvider (String userName) {¤		AutoCompleteProvider autoComplete = AutoCompleteProvider.Factory¤				.get(userName, "UVSQUERY" + getPage().getSpaceKey());¤		if (!autoComplete.getInitialized()) {¤			autoComplete.setMaxValues(1);¤			autoComplete.setInitialized();¤		}¤		return autoComplete;¤	}¤¤	private void sendEmailForProjectManagersWhoWantNotificationWhenPaperCopy(){¤		Group group = DPOUVSManager.Factory.get(getPage().getSpaceKey()).getProjectManagersGroupsInOdUo();¤		if(group != null){¤			List<User> users = ContainerManager.Factory.get().getUserAccessor().getUsersByGroup(group);¤			for(User user : users){	¤				AutoCompleteProvider autoComplete = getAutoCompleteProvider (user.getName());¤				String values = autoComplete.getFirstSuggestedValue("creation.paper.copy.notification.for.rp");¤				String idString= getProxy().getGardoc().getId() + "";¤				if(values.contains(idString)){¤					String row = values.substring(values.indexOf(idString) + idString.length());¤					boolean rightId = row.length() == 0 || row.substring(0, 1).equals(",");¤					if(rightId){¤						((UVSQueryNotificationGateway)getNotificationGateway()).queueEmailWhenCreateCurrentDocWithPaperCopy(user);¤					}¤				}¤			}¤		}¤	}¤	¤	¤	private boolean isRegionPartner(){¤		if(flagRegionPartner_ == 0){¤			if(getProxy().getPage().getLabels().contains(DpoUvsHelper.getRegionQueryLabel())){¤				flagRegionPartner_ = 1;¤			}else{¤				flagRegionPartner_ = 2;¤			}¤		}¤		if(flagRegionPartner_ == 1){¤			return true;¤		}¤		return false;¤	}¤	¤	private byte flagRegionPartner_ = 0;¤¤	protected void updateExternalAuthors () throws HibernateException {¤/*		List<LinkedExternalAuthorDAO> externalAuthors = getProxy().getExternalAuthorsLinks();¤		for (LinkedExternalAuthorDAO lea : externalAuthors) {¤			if (lea.getExternalAuthor().getId() == 0) {¤				LinkedExternalAuthorDAO.save(lea);¤				if (¤					getProxy().getState() != UVSStateMachine.ST_CLOSED.getSortValue()¤					&& getProxy().getState() != UVSStateMachine.ST_DISCARDED.getSortValue()¤				) {¤					((UVSQueryNotificationGateway)getNotificationGateway()).queueEmailWhenNewQueryForExternalAuthor(lea.getExternalAuthor());¤					¤				}¤				¤			}¤		}¤*/		¤	}¤	¤	¤	@Override¤	protected void setExternalAuthors(List<Observer> externalAuthors,¤			boolean replaceOriginal) {¤		try{¤			getOriginalExternalAuthors();¤			List<LinkedExternalAuthorDAO> initExternalAuthorLinks = new ArrayList<LinkedExternalAuthorDAO>(getProxy().getExternalAuthorsLinks());¤			for(Observer observer : externalAuthors) {¤				ExternalAuthorFromHelpDeskDAO ea = new ExternalAuthorFromHelpDeskDAO();¤				ea.setId(observer.getId());¤				ea.setEmail(observer.getEmail());¤				ea.setName(observer.getFullName());¤				getProxy().addExternalAuthor(ea, observer.getComment(), observer.getHelpDeskQuery());¤			}¤			if (getProxy().getExternalAuthorsLinks().equals(initExternalAuthorLinks)) {¤				return;¤			}¤			¤			if (replaceOriginal) {¤				setOriginalExternalAuthors(getProxy().getExternalAuthorsLinks());¤			}¤			setChangeType(ChangeType.VERSION_MINOR);¤		}catch(Exception ex){¤			Logs.LOG_SEX(ex);¤		}¤		¤	}¤	¤	private boolean eventForLeaderAndAssignedForAllUvsQueries () {¤	if(flagForLeaderAndAssignedForAllUvsQueries_ == 0){¤		User user = AuthenticatedUserThreadLocal.getUser();¤		if(user == null){¤			flagForLeaderAndAssignedForAllUvsQueries_ = 2;¤			return false;¤		}¤		//ðóêîâîäèòåëü èëè ðîáîò¤		DPOUVSManager dpoUvsManager = DPOUVSManager.Factory.get(getPage().getSpaceKey());¤		boolean leader = dpoUvsManager.isLeader(user.getName());¤		if(leader == true || user.getName().equals(DpoUvsHelper.getRobotUsername(getPage().getSpaceKey()))){¤			flagForLeaderAndAssignedForAllUvsQueries_ = 1;¤			return true;¤		}¤		//íàçíà÷åííûé¤		List<String> executors = getExecutorLogins();¤		if(executors.contains(user.getName())){¤			flagForLeaderAndAssignedForAllUvsQueries_ = 1;¤			return true;¤		}¤		// Ãðóïïà ñîòðóäíèêîâ ÃË ÞÎ, äîáàâëÿþùèõ çàïðîñû íà ðîçûñê¤		¤		List<String> uoUsers = ContainerManager.Factory.get().getUserAccessor().getMemberNamesAsList(dpoUvsManager.getQueryPostersGroupInUO());¤//		long time = System.currentTimeMillis();¤		if(uoUsers.contains(user.getName())){¤//		if(ContainerManager.Factory.get().getUserAccessor().hasMembership(dpoUvsManager.getQueryPostersGroupInUO(),user)){¤//			Logs.LOG_W("Âðåìÿ äëÿ getMemberNamesAsList :" + (System.currentTimeMillis() - time));¤			flagForLeaderAndAssignedForAllUvsQueries_ = 1;¤			return true;¤		}¤//		Logs.LOG_W("Âðåìÿ äëÿ getMemberNamesAsList :" + (System.currentTimeMillis() - time));¤	}¤	if(flagForLeaderAndAssignedForAllUvsQueries_ == 1){¤		return true;¤	}¤		return false;¤	}¤	¤	private byte flagForLeaderAndAssignedForAllUvsQueries_ = 0;¤	¤	@Override¤	public boolean postEventByName(String eventGuid) {¤		// TODO Auto-generated method stub¤		Page page = ContainerManager.Factory.get().getPageManager().getPage(getProxy().getPage().getSpaceKey(), eventGuid);¤		if(page != null){¤			return super.postEventByName("uvsstatemachine.discardedresponse");¤		}¤		return super.postEventByName(eventGuid);¤	}¤	private byte flagIsLeaderOrLeader_ = 0;¤	¤	private void onNewCopy () {¤		if (getProxy().getCopy() != null && getProxy().getCopy().getCreationDate() == null) {¤			//ïàäàëè èç àâòîìàòè÷åñêîé ðàññûëêè â copy.setCreationDate¤			try {¤				ContainerManager.Factory.get().getSession().flush();¤			} catch (Exception e) {¤				Logs.LOG_SEX(e);¤			}¤			//getProxy().getCopy().setCreationDate(new Date ());¤			//getProxy().getCopy().setLastModificationDate(getProxy().getCopy().getCreationDate());¤			//getProxy().getGardoc().getCopies().add(getProxy().getCopy());¤			//int sz = getProxy().getGardoc().getCopies().size();¤			//sz = 0;¤			getDocCard().onNewCopy(getProxy().getCopy());¤		}¤	}¤	¤	private void validateOnExitFromOnAcceptByUOManger () throws ru.garant.shared.FSM.ValidationFailed{¤		if (!getProxy().getPage().getLabels().contains(DpoUvsHelper.getRegionQueryLabel()) && getDocCard().getTopic() == 0) {¤			throw new ValidationFailed(1103, "Íåâîçìîæíî âûïîëíèòü êîììàíäó. Òðåáóåòñÿ óêàçàòü òîïèê");¤		}		¤	}	¤	¤	¤	@Override¤	protected String changePageContent(String text) {¤		String content = super.changePageContent(text);¤		if(additionalContent_ != null){¤			content += additionalContent_;¤		}¤		return content;¤	}¤¤	private String additionalContent_ = null;¤	¤	public boolean isNoConnect () {¤		if (true == DPOUVSManager.Factory.get(getPage().getSpaceKey()).hasAnotherSource((UVSQuery)this)) {¤			return false;¤		}¤		return true;¤	}¤	¤	public boolean isECopy(){¤		return getCopyType() != null && (getCopyType().equals(new ECopyDAO().getType()) ¤				|| getCopyType().equals(new SiteCopyDAO().getType())¤				|| getCopyType().equals(new PublicationInfoCopyDAO().getType())¤				|| getCopyType().equals(new PaperScanCopy().getType()));¤	}¤	¤	protected ExternalAuthorDAO findExternalAuthor(String email, String name) throws HibernateException {¤		Query q = getSession().createQuery(¤				"FROM ExternalAuthorFromHelpDeskDAO ead"¤				+ " WHERE ead.email" + ((email == null) ? " IS NULL" : "='" + email + "'")¤				+ " AND ead.name" + ((name == null) ? " IS NULL" : "='" + name + "'")¤				);¤		List<ExternalAuthorDAO> existingEaList = q.list();¤		if (existingEaList != null && existingEaList.size() > 0) {¤//			for (ExternalAuthorDAO existingEa : existingEaList) {¤//				if (existingEa.getId() == id) {¤//					return existingEa;¤//				}¤//			}¤			return existingEaList.get(0);¤		} ¤		return null;¤	}¤¤	private boolean canRemoveExternalAuthor(long externalAuthorId) throws HibernateException {¤		Query q = getSession().createQuery(¤				"FROM LinkedExternalAuthorDAO lea"¤				+ " WHERE lea.externalAuthor.id=" + externalAuthorId ¤				);¤		List<ExternalAuthorDAO> existingLeaList = q.list();¤		if (existingLeaList != null && existingLeaList.size() > 0) {¤			return false;¤		} ¤		return true;¤	}¤	¤	@Override¤	public void addExternalAuthor (final Observer externalAuthor) {¤		ExternalAuthorFromHelpDeskDAO ea = null;¤		try{¤			ea = (ExternalAuthorFromHelpDeskDAO)findExternalAuthor(externalAuthor.getEmail(), externalAuthor.getFullName());¤		}catch(HibernateException ex){¤			Logs.LOG_SEX(ex);¤		}¤		if(ea == null){¤			ea = new ExternalAuthorFromHelpDeskDAO();¤			ea.setId(externalAuthor.getId());¤			ea.setEmail(externalAuthor.getEmail());¤			ea.setName(externalAuthor.getFullName());¤			try{¤				getSession().save(ea);¤				getSession().flush();¤			}catch(Exception ex){¤				Logs.LOG_SEX(ex);¤			}¤		}¤		LinkedExternalAuthorDAO lea = getProxy().addExternalAuthor(ea, externalAuthor.getComment(), externalAuthor.getHelpDeskQuery());¤¤		if (getProxy().getState() != UVSStateMachine.ST_CLOSED.getSortValue()¤				&& getProxy().getState() != UVSStateMachine.ST_DISCARDED.getSortValue()¤		) {¤				((UVSQueryNotificationGateway)getNotificationGateway()).queueEmailWhenNewQueryForExternalAuthor(lea);¤				¤		}¤		¤		setChangeType(ChangeType.VERSION_MINOR);¤	}¤	¤	public String getResponsibleByOgv(long ogvId, boolean oduouser, boolean oduouserforproject){¤		if(ogvResponsibles_ == null){¤			ogvResponsibles_ = OGVLinksManager.Factory.get(getPage()).getResponsiblesByOgv(ogvId);¤		}¤		if(ogvResponsibles_ == null || ogvResponsibles_.size() == 0){¤			return null;¤		}¤		if(oduouser){¤			return ogvResponsibles_.get(1);¤		}else if(oduouserforproject){¤			return ogvResponsibles_.get(2);¤		}¤		return ogvResponsibles_.get(0);¤	}¤	¤	List<String> ogvResponsibles_ = null;¤	¤	¤	public String getResponsibleByRequest(UVSQuestDAO uvs){¤		boolean isOdUoResponsibleForProjectRequerst = false;¤		boolean isOdUoResponsible = true;¤		if(uvs.getPage().getLabels().contains(DpoUvsHelper.getLabelDraftUvs())){¤			isOdUoResponsibleForProjectRequerst = true;¤			isOdUoResponsible = false;¤		}¤       String userName = getResponsibleByOgv(uvs.getGardoc().getDocIssuer(), isOdUoResponsible, isOdUoResponsibleForProjectRequerst);¤		User onlyUserRespUO = DPOUVSManager.Factory.get(uvs.getPage().getSpaceKey()).getOnlyResponsibleForUo();¤		if(onlyUserRespUO != null){¤			userName = onlyUserRespUO.getName();¤		}¤       return userName;¤	}¤	¤	//#UC END# *4C52CC2C0221_CUSTOM_METHODS_AND_DATA*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_4C52A9F00330_ON_RESURECT_ACTION_IMPL*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_4C52A9F00330_ON_RESURECT_ACTION_IMPL*¤		super.onResurect (event);¤		//#UC END# *4C52CC2C0221_4C52A9F00330_ON_RESURECT_ACTION_IMPL*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_4C52A9F00330_ACTION_ACTIVE_EXIT*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_4C52A9F00330_ACTION_ACTIVE_EXIT*¤		super.postActiveExit (event);¤		//#UC END# *4C52CC2C0221_4C52A9F00330_ACTION_ACTIVE_EXIT*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_4C52A9F00330_ACTION_CLOSED_ENTER*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_4C52A9F00330_ACTION_CLOSED_ENTER*¤		super.postClosedEnter (event);¤		¤		onNewCopy();¤		setChangeType(ChangeType.VERSION_MAJOR);¤		¤		¤		((UVSQueryNotificationGateway)getNotificationGateway()).queueEmailToSenderInUoWhenQueryClosed();¤		getNotificationGateway().queueFinalEmailForAuthor(UVSStateMachine.ST_CLOSED);¤		((UVSQueryNotificationGateway)getNotificationGateway()).queueUoQueryFinalEmailForRozysk(UVSStateMachine.ST_CLOSED);¤		String userName = AuthenticatedUserThreadLocal.getUsername();¤		if(StringUtils.isNotEmpty(userName) && userName.equals(DpoUvsHelper.getRobotUsername(getPage().getSpaceKey()))){¤			((UVSQueryNotificationGateway)getNotificationGateway()).queueEmailWhenAutomaticallyClosedRequest(UVSStateMachine.ST_CLOSED);¤		}¤		//#UC END# *4C52CC2C0221_4C52A9F00330_ACTION_CLOSED_ENTER*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_4C52A9F00330_IS_NO_QUERY_DOC_GUARD_IMPL*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_4C52A9F00330_IS_NO_QUERY_DOC_GUARD_IMPL*¤		return ifCreateWhenDocHasNotQuery_;¤		//#UC END# *4C52CC2C0221_4C52A9F00330_IS_NO_QUERY_DOC_GUARD_IMPL*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_4C52A9F00330_NEWQUERY_VALIDATE*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_4C52A9F00330_NEWQUERY_VALIDATE*¤		//#UC END# *4C52CC2C0221_4C52A9F00330_NEWQUERY_VALIDATE*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_4C52A9F00330_NEWQUERY_PRE_ENTER*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_4C52A9F00330_NEWQUERY_PRE_ENTER*¤		//#UC END# *4C52CC2C0221_4C52A9F00330_NEWQUERY_PRE_ENTER*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_4C52A9F00330_NEWQUERY_PRE_EXIT*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_4C52A9F00330_NEWQUERY_PRE_EXIT*¤		//#UC END# *4C52CC2C0221_4C52A9F00330_NEWQUERY_PRE_EXIT*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_4C52A9F00330_WAITINGFROMOGV_VALIDATE*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_4C52A9F00330_WAITINGFROMOGV_VALIDATE*¤		//#UC END# *4C52CC2C0221_4C52A9F00330_WAITINGFROMOGV_VALIDATE*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_4C52A9F00330_WAITINGFROMOGV_PRE_ENTER*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_4C52A9F00330_WAITINGFROMOGV_PRE_ENTER*¤		((UVSQueryNotificationGateway)getNotificationGateway()).queueEmailWhenQueryTransferedToOGV();¤		//#UC END# *4C52CC2C0221_4C52A9F00330_WAITINGFROMOGV_PRE_ENTER*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_4C52A9F00330_WAITINGFROMOGV_PRE_EXIT*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_4C52A9F00330_WAITINGFROMOGV_PRE_EXIT*¤		//#UC END# *4C52CC2C0221_4C52A9F00330_WAITINGFROMOGV_PRE_EXIT*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_4C52A9F00330_ASSIGNED_VALIDATE*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_4C52A9F00330_ASSIGNED_VALIDATE*¤		Page ogvPage = getDocCard().getPage().getParent();¤		User onlyUserRespUVS = DPOUVSManager.Factory.get(ogvPage.getSpaceKey()).getOnlyResponsibleForUvs();¤		String responsible = null;¤		if(onlyUserRespUVS != null){¤			responsible = onlyUserRespUVS.getName();¤		}else{¤			responsible = getResponsibleByOgv(ogvPage.getId(), false, false);¤		}	¤		if(getProxy().getState() == UVSStateMachine.ST_ON_ACCEPT.getSortValue() && StringUtils.isEmpty(responsible)){¤			throw new ValidationFailed(1110, Messages.Factory.messages().get("edituvsquery.error.at.change.state.no.responsible"));¤		}¤		super.validateAssigned ();¤		//#UC END# *4C52CC2C0221_4C52A9F00330_ASSIGNED_VALIDATE*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_4C52A9F00330_ASSIGNED_PRE_ENTER*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_4C52A9F00330_ASSIGNED_PRE_ENTER*¤		super.preEnterActionAssigned (event);¤		String executor = null;¤		User onlyUserRespUVS = DPOUVSManager.Factory.get(getPage().getSpaceKey()).getOnlyResponsibleForUvs();¤		if(onlyUserRespUVS != null){¤			executor = onlyUserRespUVS.getName();¤		}else{¤			executor = getResponsibleByOgv(getDocCard().getDocIssuer(), false, false);¤		}¤		if(StringUtils.isNotEmpty(executor)){¤			setExecutor(executor);¤		}else{¤			tryPostEvent(UVSStateMachine.EV_SYSTEM_ROOL_BACK.getGuid(), AuthenticatedUserThreadLocal.getUsername(), null);¤		}¤		removeCopy();¤		//#UC END# *4C52CC2C0221_4C52A9F00330_ASSIGNED_PRE_ENTER*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_4C52A9F00330_ASSIGNED_PRE_EXIT*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_4C52A9F00330_ASSIGNED_PRE_EXIT*¤		super.preExitActionAssigned (event);¤		//#UC END# *4C52CC2C0221_4C52A9F00330_ASSIGNED_PRE_EXIT*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_4C52A9F00330_ONACCEPTINUO_VALIDATE*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_4C52A9F00330_ONACCEPTINUO_VALIDATE*¤		validateCopiesAndRestrictedStatus();¤		//#UC END# *4C52CC2C0221_4C52A9F00330_ONACCEPTINUO_VALIDATE*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_4C52A9F00330_ONACCEPTINUO_PRE_ENTER*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_4C52A9F00330_ONACCEPTINUO_PRE_ENTER*¤		ContainerManager.Factory.get().getContentPropertyManager().setStringProperty(¤			getPage()¤			, WHO_CARRY_OUT_DOC_TO_UO¤			, AuthenticatedUserThreadLocal.getUsername()¤		);¤		Group group = DPOUVSManager.Factory.get(getPage().getSpaceKey()).getDocsAcceptorsInUO();¤		setExecutors(getStringListFromGroup(group));¤		//#UC END# *4C52CC2C0221_4C52A9F00330_ONACCEPTINUO_PRE_ENTER*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_4C52A9F00330_ONACCEPTINUO_PRE_EXIT*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_4C52A9F00330_ONACCEPTINUO_PRE_EXIT*¤		//#UC END# *4C52CC2C0221_4C52A9F00330_ONACCEPTINUO_PRE_EXIT*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_4C52A9F00330_CLOSED_VALIDATE*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_4C52A9F00330_CLOSED_VALIDATE*¤		super.validateClosed ();¤		if (getEvent() != null){¤			if (getEvent() instanceof UVSStateMachine.ConnectToF1) {¤				try{¤					setIsConnected(ConnectedStatus.IS_CONNECTED);¤				}catch(Exception ex){¤					throw new ValidationFailed(1111, "Íåâîçìîæíî âûïîëíèòü êîììàíäó. Âî âðåìÿ íàçíà÷åíèÿ òîïèêà ïðîèçîøëà îøèáêà.");¤				}¤			} else if (getEvent() instanceof UVSStateMachine.NoConnectToF1){¤				try{¤					setIsConnected(ConnectedStatus.IS_NOT_CONNECTED);			¤				}catch(Exception ex){¤					throw new ValidationFailed(1111, "Íåâîçìîæíî âûïîëíèòü êîììàíäó. Âî âðåìÿ íàçíà÷åíèÿ òîïèêà ïðîèçîøëà îøèáêà.");¤				}¤				¤				ContainerManager.Factory.get().getLabelManager().removeLabel(getPage(), DpoUvsHelper.KARTOCHKA);¤				ContainerManager.Factory.get().getLabelManager().addLabel(getPage(), DpoUvsHelper.KARTOCHKA);				¤			} else {¤				validateOnExitFromOnAcceptByUOManger();¤			}¤		}¤¤		if (getEvent() instanceof UVSStateMachine.DoNothing) {¤			ContainerManager.Factory.get().getLabelManager().removeLabel(getPage(), DpoUvsHelper.DO_NOTHING);¤			ContainerManager.Factory.get().getLabelManager().addLabel(getPage(), DpoUvsHelper.DO_NOTHING);¤		} else if (getEvent() instanceof UVSStateMachine.NeedReReading) {¤			ContainerManager.Factory.get().getLabelManager().removeLabel(getPage(), DpoUvsHelper.NEED_REREDING_LABEL_NAME);¤			ContainerManager.Factory.get().getLabelManager().addLabel(getPage(), DpoUvsHelper.NEED_REREDING_LABEL_NAME);¤		}else if(getEvent() instanceof UVSStateMachine.AddToTopik){¤			ContainerManager.Factory.get().getLabelManager().removeLabel(getPage(), DpoUvsHelper.ADD_TO_TOPIK_LABEL_NAME);¤			ContainerManager.Factory.get().getLabelManager().addLabel(getPage(), DpoUvsHelper.ADD_TO_TOPIK_LABEL_NAME);¤		}¤		//addLabelNoExport();¤		setChangeType(ChangeType.VERSION_MAJOR);¤		//#UC END# *4C52CC2C0221_4C52A9F00330_CLOSED_VALIDATE*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_4C52A9F00330_CLOSED_PRE_ENTER*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_4C52A9F00330_CLOSED_PRE_ENTER*¤		super.preEnterActionClosed (event);¤		ContainerManager.Factory.get().getLabelManager().addLabel(getDocCard().getPage(), "done");¤		onNewCopy();¤		//#UC END# *4C52CC2C0221_4C52A9F00330_CLOSED_PRE_ENTER*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_4C52A9F00330_CLOSED_PRE_EXIT*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_4C52A9F00330_CLOSED_PRE_EXIT*¤		super.preExitActionClosed (event);¤		ContainerManager.Factory.get().getLabelManager().removeLabel(getDocCard().getPage(), "done");¤		if(event == UVSStateMachine.EV_RETURN_IN_WORK){¤			ContainerManager.Factory.get().getLabelManager().removeLabel(getPage(), DpoUvsHelper.NO_EXPORT);¤			getProxy().getCopy().setCreationDate(null);¤			getProxy().getCopy().setLastModificationDate(null);¤		}¤		//#UC END# *4C52CC2C0221_4C52A9F00330_CLOSED_PRE_EXIT*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_4C52A9F00330_CREATE_VALIDATE*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_4C52A9F00330_CREATE_VALIDATE*¤		super.validateCreate ();¤		//#UC END# *4C52CC2C0221_4C52A9F00330_CREATE_VALIDATE*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_4C52A9F00330_CREATE_PRE_ENTER*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_4C52A9F00330_CREATE_PRE_ENTER*¤		super.preEnterActionCreate (event);¤		//#UC END# *4C52CC2C0221_4C52A9F00330_CREATE_PRE_ENTER*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_4C52A9F00330_CREATE_PRE_EXIT*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_4C52A9F00330_CREATE_PRE_EXIT*¤		super.preExitActionCreate (event);¤		//#UC END# *4C52CC2C0221_4C52A9F00330_CREATE_PRE_EXIT*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_4C52A9F00330_ACTIVE_VALIDATE*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_4C52A9F00330_ACTIVE_VALIDATE*¤		super.validateActive ();¤		//#UC END# *4C52CC2C0221_4C52A9F00330_ACTIVE_VALIDATE*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_4C52A9F00330_ACTIVE_PRE_ENTER*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_4C52A9F00330_ACTIVE_PRE_ENTER*¤		super.preEnterActionActive (event);¤		//#UC END# *4C52CC2C0221_4C52A9F00330_ACTIVE_PRE_ENTER*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_4C52A9F00330_ACTIVE_PRE_EXIT*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_4C52A9F00330_ACTIVE_PRE_EXIT*¤		super.preExitActionActive (event);¤		//#UC END# *4C52CC2C0221_4C52A9F00330_ACTIVE_PRE_EXIT*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_4C52A9F00330_ONACCEPT_VALIDATE*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_4C52A9F00330_ONACCEPT_VALIDATE*¤		super.validateOnAccept ();¤		//#UC END# *4C52CC2C0221_4C52A9F00330_ONACCEPT_VALIDATE*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_4C52A9F00330_ONACCEPT_PRE_ENTER*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_4C52A9F00330_ONACCEPT_PRE_ENTER*¤		super.preEnterActionOnAccept (event);¤		setExecutor(DPOUVSManager.Factory.get(getPage().getSpaceKey()).getLeaderDpoUvs().getName());¤		//#UC END# *4C52CC2C0221_4C52A9F00330_ONACCEPT_PRE_ENTER*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_4C52A9F00330_ONACCEPT_PRE_EXIT*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_4C52A9F00330_ONACCEPT_PRE_EXIT*¤		super.preExitActionOnAccept (event);¤		//#UC END# *4C52CC2C0221_4C52A9F00330_ONACCEPT_PRE_EXIT*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_4C52A9F00330_DISCARDED_VALIDATE*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_4C52A9F00330_DISCARDED_VALIDATE*¤		super.validateDiscarded ();¤		//#UC END# *4C52CC2C0221_4C52A9F00330_DISCARDED_VALIDATE*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_4C52A9F00330_DISCARDED_PRE_ENTER*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_4C52A9F00330_DISCARDED_PRE_ENTER*¤		super.preEnterActionDiscarded (event);¤		//åñëè íå ñîçäàíèå çàâåäîìî îòêëîíåííûõ çàïðîñîâ ¤		if(getDiscardedResponse() != null){¤			try {¤				Page gMain = getProxy().getGardoc().getPage();¤				Page g = (Page)gMain.clone();¤				gMain.setContent(¤					gMain.getContent()¤					+ "\r\n{warning}"¤					+ "\\[[" + getPage().getTitle() +"|$" + getPage().getId() + "]\\]: *"¤					+ Messages.Factory.messages ().get ("uvsquery.rejected.header")¤					+ "* ("¤					+ getDiscardedResponse()¤					+ "){warning}"¤					+ "\r\n"¤				);¤				ContainerManager.Factory.get().getPageManager().saveContentEntity(gMain, g, new DefaultSaveContext());¤				//getGardoc().commit();¤				¤				Page old = (Page)getPage().clone();¤				getPage().setContent(¤					getPage().getContent()¤					+ "\r\n{warning}"¤					+ "*"¤					+ Messages.Factory.messages ().get ("uvsquery.rejected.header")¤					+ "* ("¤					+ getDiscardedResponse()¤					+ "){warning}"¤					+ "\r\n"¤				);¤				ContainerManager.Factory.get().getPageManager().saveContentEntity(getPage(), old, new DefaultSaveContext());¤						¤			} catch (Exception e) {¤				Logs.LOG_SEX(e);¤				throw new ru.garant.shared.FSM.PreEnterFailed ();¤			}¤		}¤		if (null != ContainerManager.Factory.get().getLabelManager().getLabel(getDocCard().getPage(), "done")) {¤			ContainerManager.Factory.get().getLabelManager().removeLabel(getDocCard().getPage(), "done");¤		}¤		ContainerManager.Factory.get().getLabelManager().addLabel(getDocCard().getPage(), "failure");¤		¤		getNotificationGateway().queueFinalEmailForAuthor(UVSStateMachine.ST_DISCARDED);¤		¤		((UVSQueryNotificationGateway)getNotificationGateway()).queueEmailWhenQueryDiscarded();¤¤		((UVSQueryNotificationGateway)getNotificationGateway()).queueUoQueryFinalEmailForRozysk(UVSStateMachine.ST_DISCARDED);¤¤		setChangeType(ChangeType.VERSION_MAJOR);¤		¤		if(event  instanceof UVSStateMachine.DefectiveCopy){¤			String uoComment = "Áðàêîâàííûé îáðàç";¤			¤			List<LinkedExternalAuthorDAO> eaDAOSet = ((getProxy().getExternalAuthorsLinks().size() > 0)?new ArrayList<LinkedExternalAuthorDAO>(getProxy().getExternalAuthorsLinks()):null);¤			List<Observer> observers = new ArrayList<Observer>();¤			if(eaDAOSet != null){¤				for(LinkedExternalAuthorDAO eaDAO : eaDAOSet){¤					ExternalAuthorFromHelpDeskDAO eafhDAO = (ExternalAuthorFromHelpDeskDAO)eaDAO.getExternalAuthor();¤¤					Observer externalAuthor = new Observer(¤							0, ¤							eafhDAO.getName(), ¤							eafhDAO.getEmail(), ¤							eaDAO.getComment(), ¤							eaDAO.getHelpDeskQuery(),¤							eaDAO.getId()¤					);¤					observers.add(externalAuthor);¤					removeExternalAuthor(eaDAO.getId());¤				}¤				try {¤					ContainerManager.Factory.get().getSession().flush();¤				} catch (Exception e) {¤					Logs.LOG_SEX(e);¤					throw new ru.garant.shared.FSM.PreEnterFailed ();¤				}¤			}¤			CreateActionResult.Factory.get().createNewUoQueryAndAttachToDocCard(¤					getDocCard(), ¤					String.valueOf(getImportance().getId()), ¤					uoComment, ¤					observers¤			);¤		}¤		//#UC END# *4C52CC2C0221_4C52A9F00330_DISCARDED_PRE_ENTER*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_4C52A9F00330_DISCARDED_PRE_EXIT*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_4C52A9F00330_DISCARDED_PRE_EXIT*¤		super.preExitActionDiscarded (event);¤		ContainerManager.Factory.get().getLabelManager().removeLabel(getDocCard().getPage(), "failure");¤		//#UC END# *4C52CC2C0221_4C52A9F00330_DISCARDED_PRE_EXIT*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_4C52A9F00330_PAUSE_VALIDATE*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_4C52A9F00330_PAUSE_VALIDATE*¤		super.validatePause ();¤		//#UC END# *4C52CC2C0221_4C52A9F00330_PAUSE_VALIDATE*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_4C52A9F00330_PAUSE_PRE_ENTER*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_4C52A9F00330_PAUSE_PRE_ENTER*¤		super.preEnterActionPause (event);¤		//#UC END# *4C52CC2C0221_4C52A9F00330_PAUSE_PRE_ENTER*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_4C52A9F00330_PAUSE_PRE_EXIT*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_4C52A9F00330_PAUSE_PRE_EXIT*¤		super.preExitActionPause (event);¤		//#UC END# *4C52CC2C0221_4C52A9F00330_PAUSE_PRE_EXIT*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_4C52A9F00330_SAVE_IMPL*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_4C52A9F00330_SAVE_IMPL*¤		super.executeSave ();¤		//#UC END# *4C52CC2C0221_4C52A9F00330_SAVE_IMPL*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_4C52A9F00330_POST_COMMIT*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_4C52A9F00330_POST_COMMIT*¤		super.postCommit ();¤		//#UC END# *4C52CC2C0221_4C52A9F00330_POST_COMMIT*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_4C52A9F00330_IS_FIRST_PROJECT_STAGE_GUARD_IMPL*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_4C52A9F00330_IS_FIRST_PROJECT_STAGE_GUARD_IMPL*¤		return true;¤		//#UC END# *4C52CC2C0221_4C52A9F00330_IS_FIRST_PROJECT_STAGE_GUARD_IMPL*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_4C52A9F00330_TRANSFERTOUO_VALIDATE*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_4C52A9F00330_TRANSFERTOUO_VALIDATE*¤		validateCopiesAndRestrictedStatus();¤		//#UC END# *4C52CC2C0221_4C52A9F00330_TRANSFERTOUO_VALIDATE*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_4C52A9F00330_TRANSFERTOUO_PRE_ENTER*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_4C52A9F00330_TRANSFERTOUO_PRE_ENTER*¤		if (getCurrentState() instanceof NewQuery) {¤			setExecutors(getExecutorsInTransferInUOState (¤				DPOUVSManager.Factory.get(getPage().getSpaceKey())¤				, AuthenticatedUserThreadLocal.getUsername()¤			));¤//			setExecutor(AuthenticatedUserThreadLocal.getUsername());¤			if(getProxy().getCopy() != null && getProxy().getCopy() instanceof PaperCopy){¤				sendEmailForProjectManagersWhoWantNotificationWhenPaperCopy();¤			}¤		} else if (¤			getCurrentState() instanceof ru.garant.MDProcess.DocCardChange.Entities.sm.UVSStateMachine.Assigned ¤			|| getCurrentState() instanceof ru.garant.MDProcess.DocCardChange.Entities.sm.UVSStateMachine.OnAccept¤		) {¤			List<User> users = getExecutors();¤			((UVSQueryNotificationGateway)getNotificationGateway()).queueEmailToManagerWhenDocDelivered(users.get(0));¤¤			setChangeType(ChangeType.VERSION_MAJOR);¤			setExecutors(getExecutorsInTransferInUOState (¤				DPOUVSManager.Factory.get(getPage().getSpaceKey())¤				, AuthenticatedUserThreadLocal.getUsername()¤			));¤			¤		} else if (getCurrentState() instanceof WaitingFromOGV) {¤			if (event instanceof DocDelivered) {¤				((UVSQueryNotificationGateway)getNotificationGateway()).queueEmailToManagerWhenDocDelivered(getExecutors().get(0));¤			} else {¤				setChangeType(ChangeType.VERSION_MAJOR);¤			}¤			¤			setExecutors(getExecutorsInTransferInUOState (¤				DPOUVSManager.Factory.get(getPage().getSpaceKey())¤				, AuthenticatedUserThreadLocal.getUsername()¤			));¤		} else if (getCurrentState() instanceof OnAcceptInUO ¤				|| getCurrentState() instanceof OnAcceptByUOManager¤				|| getCurrentState() instanceof AnalyseRepeatsDocs) {¤			String prevExecutorName = ContainerManager.Factory.get().getContentPropertyManager().getStringProperty(¤				getPage()¤				, WHO_CARRY_OUT_DOC_TO_UO¤			);¤			if (prevExecutorName != null && prevExecutorName.length() > 0) {¤//				setExecutor(prevExecutorName);			¤¤				setExecutors(getExecutorsInTransferInUOState (¤					DPOUVSManager.Factory.get(getPage().getSpaceKey())¤					, prevExecutorName¤				));¤							¤			} else {¤				throw new IllegalStateException ("preEnterActionTransferToUO: unknown prevExecutorName");¤			}¤		}else if(getCurrentState() instanceof ru.garant.MDProcess.DocCardChange.Entities.sm.UVSStateMachine.Discarded){¤			setChangeType(ChangeType.VERSION_MAJOR);¤			setExecutors(getExecutorsInTransferInUOState (¤				DPOUVSManager.Factory.get(getPage().getSpaceKey())¤				, null¤			));¤			¤		} else {¤			throw new IllegalStateException ("preEnterActionTransferToUO: unknown state");¤		}		¤		//#UC END# *4C52CC2C0221_4C52A9F00330_TRANSFERTOUO_PRE_ENTER*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_4C52A9F00330_TRANSFERTOUO_PRE_EXIT*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_4C52A9F00330_TRANSFERTOUO_PRE_EXIT*¤		//#UC END# *4C52CC2C0221_4C52A9F00330_TRANSFERTOUO_PRE_EXIT*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"19022878273")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_4C52A9F00330_IS_QUERY_DOC_GUARD_IMPL*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_4C52A9F00330_IS_QUERY_DOC_GUARD_IMPL*¤		return ifCreateNewUOQuery_;¤		//#UC END# *4C52CC2C0221_4C52A9F00330_IS_QUERY_DOC_GUARD_IMPL*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_4C52A9F00330_IS_SYSTEM_PROCESS_GUARD_IMPL*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_4C52A9F00330_IS_SYSTEM_PROCESS_GUARD_IMPL*¤		return isForSystemLogic_;¤		//#UC END# *4C52CC2C0221_4C52A9F00330_IS_SYSTEM_PROCESS_GUARD_IMPL*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_4C52A9F00330_IS_VIEW_PAGE_GUARD_IMPL*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_4C52A9F00330_IS_VIEW_PAGE_GUARD_IMPL*¤		return !isNotViewPage ();¤		//#UC END# *4C52CC2C0221_4C52A9F00330_IS_VIEW_PAGE_GUARD_IMPL*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_4C52A9F00330_IS_NOT_VIEW_PAGE_GUARD_IMPL*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_4C52A9F00330_IS_NOT_VIEW_PAGE_GUARD_IMPL*¤		String actionName = ActionContextThreadLocalFactory.Factory.get().getContext().getName();¤		if (actionName == null || actionName.equals("listrequest.action") || actionName.equals("dobatchoperation.action") || actionName.equals("searchuvsquery.action") || actionName.equals("listrequesthistory.action")) {¤			return true;¤		}¤		return false;¤		//#UC END# *4C52CC2C0221_4C52A9F00330_IS_NOT_VIEW_PAGE_GUARD_IMPL*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_4C52A9F00330_IS_QUERY_DOC_WITHOUT_RESPONSIBLE_GUARD_IMPL*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_4C52A9F00330_IS_QUERY_DOC_WITHOUT_RESPONSIBLE_GUARD_IMPL*¤		return ifCreateQueryWithoutResponsible_;¤		//#UC END# *4C52CC2C0221_4C52A9F00330_IS_QUERY_DOC_WITHOUT_RESPONSIBLE_GUARD_IMPL*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_4C52A9F00330_IS_MANAGER_OR_LEADER_GUARD_IMPL*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_4C52A9F00330_IS_MANAGER_OR_LEADER_GUARD_IMPL*¤		if(flagIsLeaderOrLeader_ == 0){¤		if(isRegionPartner()  && (getProxy().getState() == OnAcceptInUO.make().getSortValue()¤				|| getProxy().getState() == Discarded.make().getSortValue())){¤			flagIsLeaderOrLeader_ = 2;¤			return false;¤		}¤		if(getProxy().getPage().getLabels().contains(DpoUvsHelper.getUoQueryLabel())){¤			boolean isOdUoResponsible = false;¤			boolean isOdUoResponsibleForProjectRequerst = false;¤			String userName = AuthenticatedUserThreadLocal.getUsername();¤			if(StringUtils.isEmpty(userName)){¤				flagIsLeaderOrLeader_ = 2;¤				return true;¤			}¤			//ðóêîâîäèòåëü¤			DPOUVSManager dpoUvsManager = DPOUVSManager.Factory.get(getPage().getSpaceKey());¤			boolean isLeader = dpoUvsManager.isLeader(userName);¤			if(isLeader == true){¤				flagIsLeaderOrLeader_ = 1;¤				return true;¤			}¤			//îòâåòñòâåííûé çà ÎÃÂ ñî ñòîðîíû ÞÎ¤			DocCard gardoc = getDocCard ();¤			User onlyUserRespUVS = DPOUVSManager.Factory.get(getPage().getSpaceKey()).getOnlyResponsibleForUvs();¤			String responsible = null;¤			if(onlyUserRespUVS != null){¤				responsible = onlyUserRespUVS.getName();¤			}else{¤				responsible = getResponsibleByOgv(gardoc.getDocIssuer(), isOdUoResponsible, isOdUoResponsibleForProjectRequerst);¤			}¤			if(userName.equals(responsible)){¤				flagIsLeaderOrLeader_ = 1;¤				return true;¤			}¤		}¤		}¤		if(flagIsLeaderOrLeader_ == 1){¤			return true;¤		}¤		return false;¤		//#UC END# *4C52CC2C0221_4C52A9F00330_IS_MANAGER_OR_LEADER_GUARD_IMPL*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_4C52A9F00330_EVENT_FOR_LEADER_AND_ASSIGNED_GUARD_IMPL*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_4C52A9F00330_EVENT_FOR_LEADER_AND_ASSIGNED_GUARD_IMPL*¤		if(isRegionPartner()  && (getProxy().getState() == OnAcceptInUO.make().getSortValue()¤				|| getProxy().getState() == Closed.make().getSortValue()¤				|| getProxy().getState() == Discarded.make().getSortValue())){¤			return false;¤		}¤		return eventForLeaderAndAssignedForAllUvsQueries(); ¤		//#UC END# *4C52CC2C0221_4C52A9F00330_EVENT_FOR_LEADER_AND_ASSIGNED_GUARD_IMPL*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_4C52A9F00330_EVENT_FOR_LEADER_AND_ASSIGNED_AND_NO_MANAGER_STAGE_GUARD_IMPL*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_4C52A9F00330_EVENT_FOR_LEADER_AND_ASSIGNED_AND_NO_MANAGER_STAGE_GUARD_IMPL*¤		String user = getResponsibleByRequest(getProxy());¤		boolean isPublicationInfoCopyDAO = (getProxy().getCopy() != null) ? (getProxy().getCopy() instanceof PublicationInfoCopyDAO) : false;¤¤		return (¤					(hasNotAttachmentsOrScanedCopy() && isPublicationInfoCopyDAO == false) || ¤					getPage().getLabels().contains(DpoUvsHelper.getRegionQueryLabel()) || ¤					StringUtils.isEmpty(user) && hasManagerMarkers () == false¤				) && ¤				(attachedDocIsRepeat () == false);¤		//#UC END# *4C52CC2C0221_4C52A9F00330_EVENT_FOR_LEADER_AND_ASSIGNED_AND_NO_MANAGER_STAGE_GUARD_IMPL*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_4C52A9F00330_EVENT_FOR_LEADER_AND_ASSIGNED_AND_WITH_MANAGER_STAGE_GUARD_IMPL*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_4C52A9F00330_EVENT_FOR_LEADER_AND_ASSIGNED_AND_WITH_MANAGER_STAGE_GUARD_IMPL*¤		String user = getResponsibleByRequest(getProxy());¤		if(StringUtils.isEmpty(user)){¤			return false;¤		}¤		¤		boolean isRepeat = DPOUVSManager.Factory.get(getPage().getSpaceKey()).hasAnotherSource(this);¤		DocCard doccard = getDocCard();¤		ConnectedStatus status = doccard.getIsConnected();¤		boolean isUnknown = status.equals(ConnectedStatus.UNKNOWN);¤		boolean isPublicationInfoCopyDAO = (getProxy().getCopy() != null) ? (getProxy().getCopy() instanceof PublicationInfoCopyDAO) : false;¤		return ¤				(hasNotAttachmentsOrScanedCopy () == false || isPublicationInfoCopyDAO) && ¤				(isUnknown || isRepeat) && ¤				(getPage().getLabels().contains(DpoUvsHelper.getRegionQueryLabel()) == false) && ¤				(attachedDocIsRepeat() == false);¤		//#UC END# *4C52CC2C0221_4C52A9F00330_EVENT_FOR_LEADER_AND_ASSIGNED_AND_WITH_MANAGER_STAGE_GUARD_IMPL*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_4C52A9F00330_ONACCEPTBYUOMANGER_VALIDATE*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_4C52A9F00330_ONACCEPTBYUOMANGER_VALIDATE*¤		//#UC END# *4C52CC2C0221_4C52A9F00330_ONACCEPTBYUOMANGER_VALIDATE*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_4C52A9F00330_ONACCEPTBYUOMANGER_PRE_ENTER*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_4C52A9F00330_ONACCEPTBYUOMANGER_PRE_ENTER*¤		String user = OGVLinksManager.Factory.get(getPage().getSpaceKey()).getResponsibleByOgv(getProxy().getGardoc().getDocIssuer(), true);¤		setExecutor(user);¤		//#UC END# *4C52CC2C0221_4C52A9F00330_ONACCEPTBYUOMANGER_PRE_ENTER*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_4C52A9F00330_ONACCEPTBYUOMANGER_PRE_EXIT*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_4C52A9F00330_ONACCEPTBYUOMANGER_PRE_EXIT*¤		//#UC END# *4C52CC2C0221_4C52A9F00330_ONACCEPTBYUOMANGER_PRE_EXIT*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_4C52A9F00330_ONACCEPTINUOAFTERUOMANAGER_VALIDATE*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_4C52A9F00330_ONACCEPTINUOAFTERUOMANAGER_VALIDATE*¤		//#UC END# *4C52CC2C0221_4C52A9F00330_ONACCEPTINUOAFTERUOMANAGER_VALIDATE*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_4C52A9F00330_ONACCEPTINUOAFTERUOMANAGER_PRE_ENTER*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_4C52A9F00330_ONACCEPTINUOAFTERUOMANAGER_PRE_ENTER*		¤		//#UC END# *4C52CC2C0221_4C52A9F00330_ONACCEPTINUOAFTERUOMANAGER_PRE_ENTER*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_4C52A9F00330_ONACCEPTINUOAFTERUOMANAGER_PRE_EXIT*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_4C52A9F00330_ONACCEPTINUOAFTERUOMANAGER_PRE_EXIT*¤		//#UC END# *4C52CC2C0221_4C52A9F00330_ONACCEPTINUOAFTERUOMANAGER_PRE_EXIT*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_4C52A9F00330_ONACCEPTBYUOMANAGER_VALIDATE*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_4C52A9F00330_ONACCEPTBYUOMANAGER_VALIDATE*¤		if(getEvent() != null || isAutoMailingGotoManager() || noTopic()){¤			String user = getResponsibleByRequest(getProxy());¤			if (user == null) {¤	        	throw new ValidationFailed(1102, "Íåò íàçíà÷åííûõ äëÿ ýòîãî ÎÃÂ äëÿ çàïðîñà ñ id=" + getProxy().getId());¤	        }¤		}¤		//#UC END# *4C52CC2C0221_4C52A9F00330_ONACCEPTBYUOMANAGER_VALIDATE*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_4C52A9F00330_ONACCEPTBYUOMANAGER_PRE_ENTER*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_4C52A9F00330_ONACCEPTBYUOMANAGER_PRE_ENTER*¤		ContainerManager.Factory.get().getContentPropertyManager().setStringProperty(¤				getPage()¤				, WHO_CARRY_OUT_DOC_TO_UO¤				, AuthenticatedUserThreadLocal.getUsername()¤			);¤		¤		boolean isOdUoResponsibleForProjectRequerst = false;¤		boolean isOdUoResponsible = true;¤		if(getPage().getLabels().contains(DpoUvsHelper.getLabelDraftUvs())){¤			isOdUoResponsibleForProjectRequerst = true;¤			isOdUoResponsible = false;¤		}¤		String spaceKey= getPage().getSpaceKey();¤		User onlyUserRespUO = DPOUVSManager.Factory.get(spaceKey).getOnlyResponsibleForUo();¤		String user = null;¤		if(onlyUserRespUO != null){¤			user = onlyUserRespUO.getName();¤		}else{¤	        user = getResponsibleByOgv(getProxy().getGardoc().getDocIssuer(), isOdUoResponsible, isOdUoResponsibleForProjectRequerst);¤		}¤		setExecutor(user);¤		¤		¤		if (getProxy().getGardoc().getTopic() == 0) {¤			MainAttributes ma = DocCardManager.Factory.get().convertToMainAttributes(getProxy().getGardoc(), getProxy().getPage().getSpaceKey());¤			long topic = HelpDeskRemote.Factory.get().topicOf(ma, getProxy().getPage().getSpaceKey());¤			if (topic > 0) {¤				GarDocDAO gardoc = DocCardManager.Factory.get().getGarDocFromTopic(topic);¤				if(gardoc != null){¤					//Òîïèê õîòü è íàøåëñÿ, íî ýòî íå îáÿçàòåëüíî òîò ñàìû äîê,¤					//ò.ê. äëÿ íåêîòîðûõ äîêóìåíòîâ (ïèñüìà ìèíôèíà, è ò.ä.) ñîâïàäåíèå ÷åòûðåõ àòðèáóòîâ íå îçíà÷àåò ÷òî äîê òîò æå ñàìûé¤					//ïîýòîìó äåëàåì ïðîâåðêó íà ïîâòîðû, òàêó æå êàê ïðè ñîçäàíèè¤					//åñëè íå íàøëîñü - äàåì ïåðåâåñòè¤					//åñëè íàøëîñü òî - èñêëþ÷åíèå¤					Collection<GarDocDAO> gardocList = CurrentDocFinderManager.Factory.get().getDocCardForAdd(¤							getProxy().getGardoc().getDocIssuer()¤							, getProxy().getGardoc().getNumber()¤							, getProxy().getGardoc().getCreationDate()¤							, getProxy().getGardoc().getRegistrationNumber()¤							, getProxy().getGardoc().getRegistrationDate()¤							, getProxy().getGardoc().getName()¤							, (getProxy().getGardoc().getAdditionalDocIssuers() == null)?null:new ArrayList(getProxy().getGardoc().getAdditionalDocIssuers())¤							, (getProxy().getGardoc().getAdditionalNumbers() == null)?null:new ArrayList(getProxy().getGardoc().getAdditionalNumbers())¤							, (getProxy().getGardoc().getType()==null)? null : String.valueOf(getProxy().getGardoc().getType().getId())¤						    , getProxy().getGardoc().getId()¤						    , getProxy().getPage().getSpaceKey()¤					);¤					if(gardocList.size() > 0){¤						throw new IllegalStateException("Óæå ñóùåñòâóåò êàðòî÷êà ñ òàêèìè àòðèáóòàìè c òîïèêîì <a href='/pages/viewpage.action?pageId=" + gardoc.getId() + "' >" + topic + "</a>");¤					}¤				}else{¤					getProxy().getGardoc().setIsConnected(DpoUvsHelper.connectedStatusToByte (ConnectedStatus.IS_CONNECTED));¤					getProxy().getGardoc().setTopic(topic);¤				}¤			}¤		}¤		//#UC END# *4C52CC2C0221_4C52A9F00330_ONACCEPTBYUOMANAGER_PRE_ENTER*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_4C52A9F00330_ONACCEPTBYUOMANAGER_PRE_EXIT*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_4C52A9F00330_ONACCEPTBYUOMANAGER_PRE_EXIT*¤		try{¤			if (¤				false == ((AbstractEvent)event).getGuid().equals(UVSStateMachine.EV_HAS_NOT_DOC.getGuid())¤					&&	false == ((AbstractEvent)event).getGuid().equals(UVSStateMachine.EV_DEFECTIVE_COPY.getGuid())¤			) {¤				TopicHelper.Factory.make().assignTo(¤						getProxy().getGardoc()¤						, new CachedPartnerManager(PartnerManager.Factory.get()).getPartnerForGarDoc(getDocCard().getPage().getId(), getDocCard().getBlocks(), getDocCard().getAdditionalDocIssuers()).getId()¤				);¤				getDocCard().setTopic(getProxy().getGardoc().getTopic());¤			}¤			¤			Date includeInVersionDate = getDocCard().getIncludeInVersionDate();¤			if (includeInVersionDate == null) {¤				ChangeIncludeInVersionDate action = new ChangeIncludeInVersionDate();¤				action.setInstancy(getDocCard().getInstancy().name());¤				action.doChange();¤				includeInVersionDate = null;¤				try {¤					includeInVersionDate = DateUtils.parseDdMMyyyyDate(action.getResponseContent());¤				} catch (WrongFormat e) {¤					Logs.LOG_SEX(e);¤				} ¤				setIncludeInVersionDate(includeInVersionDate);				¤			}¤			¤		}catch(Exception ex){¤			Logs.LOG_SEX(ex);¤			throw new IllegalStateException("Íåâîçìîæíî âûïîëíèòü êîììàíäó. Âî âðåìÿ íàçíà÷åíèÿ òîïèêà ïðîèçîøëà îøèáêà.");¤		}¤		//#UC END# *4C52CC2C0221_4C52A9F00330_ONACCEPTBYUOMANAGER_PRE_EXIT*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_4C52A9F00330_EVENT_FOR_LEADER_AND_ASSIGNED_AND_PROJECT_MANAGERS_GUARD_IMPL*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_4C52A9F00330_EVENT_FOR_LEADER_AND_ASSIGNED_AND_PROJECT_MANAGERS_GUARD_IMPL*¤		if (true == DPOUVSManager.Factory.get(getPage().getSpaceKey()).hasAnotherSource((UVSQuery)this)) {¤			return (¤					getDocCard().getIsConnected() == ConnectedStatus.IS_NOT_CONNECTED¤					|| getDocCard().getIsConnected() == ConnectedStatus.UNKNOWN¤			);¤		}¤		return true;¤		//#UC END# *4C52CC2C0221_4C52A9F00330_EVENT_FOR_LEADER_AND_ASSIGNED_AND_PROJECT_MANAGERS_GUARD_IMPL*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_4C52A9F00330_HAS_ANOTHER_SOURCE_GUARD_IMPL*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_4C52A9F00330_HAS_ANOTHER_SOURCE_GUARD_IMPL*¤		//èíîãäà èñòî÷íèê åñòü â àð÷è, íî íåò â Ê (ïîêà íå ñðîñëèñü), ïîýòîìó âñåãäà true¤		return (getProxy().getGardoc().getTopic() > 0);¤//		return true;¤		/*boolean ret =¤			DPOUVSManager.Factory.get(getPage().getSpaceKey()).hasAnotherSource(this)¤			&& (getGardoc().getIsConnected() == ConnectedStatus.IS_CONNECTED || getGardoc().getIsConnected() == ConnectedStatus.IS_CONNECTED_IN_VERSION)¤		;¤¤		return ret;*/¤		//#UC END# *4C52CC2C0221_4C52A9F00330_HAS_ANOTHER_SOURCE_GUARD_IMPL*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_4C52A9F00330_HASMANAGERMARKERS_GUARD_IMPL*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_4C52A9F00330_HASMANAGERMARKERS_GUARD_IMPL*¤		boolean isRepeat = DPOUVSManager.Factory.get(getPage().getSpaceKey()).hasAnotherSource(this);¤		boolean isKnown = getDocCard().getIsConnected().equals(ConnectedStatus.UNKNOWN) == false;¤		return ¤				(hasNotAttachmentsOrScanedCopy () == false) && ¤				isKnown && ¤				!isRepeat && ¤				(attachedDocIsRepeat () == false);¤        //#UC END# *4C52CC2C0221_4C52A9F00330_HASMANAGERMARKERS_GUARD_IMPL*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_4C52A9F00330_ONACCEPTINGLUO_VALIDATE*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_4C52A9F00330_ONACCEPTINGLUO_VALIDATE*¤		//#UC END# *4C52CC2C0221_4C52A9F00330_ONACCEPTINGLUO_VALIDATE*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_4C52A9F00330_ONACCEPTINGLUO_PRE_ENTER*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_4C52A9F00330_ONACCEPTINGLUO_PRE_ENTER*¤		Group group = DPOUVSManager.Factory.get(getPage().getSpaceKey()).getDocsAcceptorsInUO();¤		setExecutors(getStringListFromGroup(group));¤		//#UC END# *4C52CC2C0221_4C52A9F00330_ONACCEPTINGLUO_PRE_ENTER*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_4C52A9F00330_ONACCEPTINGLUO_PRE_EXIT*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_4C52A9F00330_ONACCEPTINGLUO_PRE_EXIT*¤		//#UC END# *4C52CC2C0221_4C52A9F00330_ONACCEPTINGLUO_PRE_EXIT*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_4C52A9F00330_MAKEANSWER_VALIDATE*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_4C52A9F00330_MAKEANSWER_VALIDATE*¤		//#UC END# *4C52CC2C0221_4C52A9F00330_MAKEANSWER_VALIDATE*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_4C52A9F00330_MAKEANSWER_PRE_ENTER*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_4C52A9F00330_MAKEANSWER_PRE_ENTER*¤		List<String> exs = new ArrayList<String>();¤		if(getCurrentState() instanceof OnAcceptInUO){¤			String prevExecutorName = UVSQueryManager.Factory.get().getExecutorInStateInPrevVersionRequest(getPage().getId(), MakeAnswer.make().getSortValue());¤			if(prevExecutorName != null){¤				exs.add(prevExecutorName);¤			}¤		}else{¤			exs.add(AuthenticatedUserThreadLocal.getUsername());¤		}¤		setExecutors(exs);		¤		//#UC END# *4C52CC2C0221_4C52A9F00330_MAKEANSWER_PRE_ENTER*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_4C52A9F00330_MAKEANSWER_PRE_EXIT*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_4C52A9F00330_MAKEANSWER_PRE_EXIT*¤		//#UC END# *4C52CC2C0221_4C52A9F00330_MAKEANSWER_PRE_EXIT*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_4C52A9F00330_SEARCHINOGV_VALIDATE*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_4C52A9F00330_SEARCHINOGV_VALIDATE*¤		//#UC END# *4C52CC2C0221_4C52A9F00330_SEARCHINOGV_VALIDATE*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_4C52A9F00330_SEARCHINOGV_PRE_ENTER*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_4C52A9F00330_SEARCHINOGV_PRE_ENTER*¤		setExecutor(null);¤		//#UC END# *4C52CC2C0221_4C52A9F00330_SEARCHINOGV_PRE_ENTER*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_4C52A9F00330_SEARCHINOGV_PRE_EXIT*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_4C52A9F00330_SEARCHINOGV_PRE_EXIT*¤		//#UC END# *4C52CC2C0221_4C52A9F00330_SEARCHINOGV_PRE_EXIT*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_4C52A9F00330_WAITFORREVIEW_VALIDATE*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_4C52A9F00330_WAITFORREVIEW_VALIDATE*¤		//#UC END# *4C52CC2C0221_4C52A9F00330_WAITFORREVIEW_VALIDATE*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_4C52A9F00330_WAITFORREVIEW_PRE_ENTER*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_4C52A9F00330_WAITFORREVIEW_PRE_ENTER*¤		String creatorName = getPage().getCreatorName();¤		setExecutor(creatorName);¤		//#UC END# *4C52CC2C0221_4C52A9F00330_WAITFORREVIEW_PRE_ENTER*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_4C52A9F00330_WAITFORREVIEW_PRE_EXIT*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_4C52A9F00330_WAITFORREVIEW_PRE_EXIT*¤		//#UC END# *4C52CC2C0221_4C52A9F00330_WAITFORREVIEW_PRE_EXIT*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_4C52A9F00330_OGVANSWERPROCESSING_VALIDATE*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_4C52A9F00330_OGVANSWERPROCESSING_VALIDATE*¤		//#UC END# *4C52CC2C0221_4C52A9F00330_OGVANSWERPROCESSING_VALIDATE*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_4C52A9F00330_OGVANSWERPROCESSING_PRE_ENTER*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_4C52A9F00330_OGVANSWERPROCESSING_PRE_ENTER*¤		Group group = DPOUVSManager.Factory.get(getPage().getSpaceKey()).getDocsAcceptorsInUO();¤		setExecutors(getStringListFromGroup(group));¤		//#UC END# *4C52CC2C0221_4C52A9F00330_OGVANSWERPROCESSING_PRE_ENTER*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_4C52A9F00330_OGVANSWERPROCESSING_PRE_EXIT*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_4C52A9F00330_OGVANSWERPROCESSING_PRE_EXIT*¤		//#UC END# *4C52CC2C0221_4C52A9F00330_OGVANSWERPROCESSING_PRE_EXIT*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_4C52A9F00330_QUERYCOMPLETE_VALIDATE*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_4C52A9F00330_QUERYCOMPLETE_VALIDATE*¤		if(getPage().getAttachments().size() == 0) {¤			throw new ValidationFailed (99999, "Íåâîçìîæíî âûïîëíèòü. ×òî áû çàâåðøèòü çàïðîñ, íåîáõîäèìî äîáàâèòü îáðàç ðàçûñêèâàåìîãî äîêóìåíòà âî âëîæåíèÿ.");¤		}¤		//#UC END# *4C52CC2C0221_4C52A9F00330_QUERYCOMPLETE_VALIDATE*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_4C52A9F00330_QUERYCOMPLETE_PRE_ENTER*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_4C52A9F00330_QUERYCOMPLETE_PRE_ENTER*¤		onPreFinalState();¤		//#UC END# *4C52CC2C0221_4C52A9F00330_QUERYCOMPLETE_PRE_ENTER*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_4C52A9F00330_QUERYCOMPLETE_PRE_EXIT*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_4C52A9F00330_QUERYCOMPLETE_PRE_EXIT*¤		//#UC END# *4C52CC2C0221_4C52A9F00330_QUERYCOMPLETE_PRE_EXIT*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_4C52A9F00330_QUERYDISCARDED_VALIDATE*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_4C52A9F00330_QUERYDISCARDED_VALIDATE*¤		//#UC END# *4C52CC2C0221_4C52A9F00330_QUERYDISCARDED_VALIDATE*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_4C52A9F00330_QUERYDISCARDED_PRE_ENTER*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_4C52A9F00330_QUERYDISCARDED_PRE_ENTER*¤		onPreFinalState();¤		//#UC END# *4C52CC2C0221_4C52A9F00330_QUERYDISCARDED_PRE_ENTER*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_4C52A9F00330_QUERYDISCARDED_PRE_EXIT*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_4C52A9F00330_QUERYDISCARDED_PRE_EXIT*¤		//#UC END# *4C52CC2C0221_4C52A9F00330_QUERYDISCARDED_PRE_EXIT*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_4C52A9F00330_IS_REGION_QUERY_GUARD_IMPL*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_4C52A9F00330_IS_REGION_QUERY_GUARD_IMPL*¤		return ifCreateReqionQuery_ ¤				|| (¤						getProxy().getPage().getLabels().contains(DpoUvsHelper.getRegionQueryLabel()) ¤						&& (isRegionQueryRejected_ == false)¤					) ¤				|| isSystemProcess();¤		//#UC END# *4C52CC2C0221_4C52A9F00330_IS_REGION_QUERY_GUARD_IMPL*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_4C52A9F00330_ONACCEPTINRIB_VALIDATE*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_4C52A9F00330_ONACCEPTINRIB_VALIDATE*¤		//#UC END# *4C52CC2C0221_4C52A9F00330_ONACCEPTINRIB_VALIDATE*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_4C52A9F00330_ONACCEPTINRIB_PRE_ENTER*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_4C52A9F00330_ONACCEPTINRIB_PRE_ENTER*¤		ConfluenceBandanaContext context = new ConfluenceBandanaContext(getProxy().getPage().getSpaceKey());¤		String groupInBandana = (String) ContainerManager.Factory.get ().getBandanaManager ().getValue (context, "UVSQueryImpl.preEnterActionOnAcceptInRIB.groupname");¤		if(groupInBandana != null){¤			setExecutors(¤				ContainerManager.Factory.get().getUserAccessor().getMemberNamesAsList(¤					ContainerManager.Factory.get().getUserAccessor().getGroup(groupInBandana)¤				)¤			);¤		}¤		//#UC END# *4C52CC2C0221_4C52A9F00330_ONACCEPTINRIB_PRE_ENTER*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_4C52A9F00330_ONACCEPTINRIB_PRE_EXIT*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_4C52A9F00330_ONACCEPTINRIB_PRE_EXIT*¤		//#UC END# *4C52CC2C0221_4C52A9F00330_ONACCEPTINRIB_PRE_EXIT*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_4C52A9F00330_EVENT_FOR_LEADER_AND_ASSIGNED_FOR_ALL_UVS_QUERIES_GUARD_IMPL*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_4C52A9F00330_EVENT_FOR_LEADER_AND_ASSIGNED_FOR_ALL_UVS_QUERIES_GUARD_IMPL*¤		String userName = AuthenticatedUserThreadLocal.getUsername();¤		DPOUVSManager dpoUvsManager = DPOUVSManager.Factory.get(getPage().getSpaceKey());¤		boolean leader = dpoUvsManager.isLeader(userName);¤		List<String> executors = getExecutorLogins();¤		List<String> uoUsers = ContainerManager.Factory.get().getUserAccessor().getMemberNamesAsList(¤				DPOUVSManager.Factory.get(getProxy().getPage().getSpaceKey()).getQueryPostersGroupInUO());¤		if(StringUtils.isNotEmpty(userName) && ¤				(leader == true || executors.contains(userName) || uoUsers.contains(userName) || userName.equals("robot"))){¤			return true;¤		}¤		return false;¤		//#UC END# *4C52CC2C0221_4C52A9F00330_EVENT_FOR_LEADER_AND_ASSIGNED_FOR_ALL_UVS_QUERIES_GUARD_IMPL*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"DerivedImplement"
		    value      	(value Text 
|{"4757F69E0296":{"need_collect_children":"true"},"4757F83900B2":{"need_collect_children":"true"},"4C3D987A0072":{"need_collect_children":"true"}}
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"DerivedOverload"
		    value      	(value Text 
|{"47872E400373":{"need_collect_children":"false"}}
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ImplementSelectType"
		    value      	"all")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"OverloadSelectType"
		    value      	"include")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_4C52A9F00330_IS_AUTO_MAILING_RG_DELIVERY_QUERY_GUARD_IMPL*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_4C52A9F00330_IS_AUTO_MAILING_RG_DELIVERY_QUERY_GUARD_IMPL*¤		return isNewImageAndGotoOnAcceptInUOAfterUOManager_;¤		//#UC END# *4C52CC2C0221_4C52A9F00330_IS_AUTO_MAILING_RG_DELIVERY_QUERY_GUARD_IMPL*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_4C52A9F00330_IS_AUTO_MAILING_NOT_RG_DELIVERY_QUERY_GUARD_IMPL*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_4C52A9F00330_IS_AUTO_MAILING_NOT_RG_DELIVERY_QUERY_GUARD_IMPL*¤		return isNewCurrentDocAndGotoClose_;¤		//#UC END# *4C52CC2C0221_4C52A9F00330_IS_AUTO_MAILING_NOT_RG_DELIVERY_QUERY_GUARD_IMPL*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_4C52A9F00330_SHOULD_CLOSED_GUARD_IMPL*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_4C52A9F00330_SHOULD_CLOSED_GUARD_IMPL*¤		List<UVSQuestDAO> uvsQueries = DocCardManager.Factory.get().getUvsQueryByDocCardIdByStates(getGardoc().getPage().getId(), UVSStateMachine.ST_CLOSED.getSortValue() + "");¤		boolean isKnown = getGardoc().getIsConnected().equals(ConnectedStatus.UNKNOWN) == false;¤		boolean isPaperCopy = (getProxy().getCopy() instanceof PaperCopy);¤		boolean isECopy = (isPaperCopy == false);¤		return getPage().getLabels().contains(DpoUvsHelper.getUoQueryLabel()) &&¤        	(¤        		(isPaperCopy && isKnown && uvsQueries.size() == 0) ||¤        		(isPaperCopy &&            uvsQueries.size() > 0)  ||¤        		(isECopy     && isKnown && uvsQueries.size() == 0) ||¤        		(isECopy     &&            uvsQueries.size() > 0)¤        		¤        	)	¤        ;¤		//#UC END# *4C52CC2C0221_4C52A9F00330_SHOULD_CLOSED_GUARD_IMPL*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_4C52A9F00330_IS_NO_CONNECT_GUARD_IMPL*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_4C52A9F00330_IS_NO_CONNECT_GUARD_IMPL*¤		if (true == DPOUVSManager.Factory.get(getPage().getSpaceKey()).hasAnotherSource((UVSQuery)this)) {¤			return false;¤		}¤		return true;¤		//#UC END# *4C52CC2C0221_4C52A9F00330_IS_NO_CONNECT_GUARD_IMPL*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_4C52A9F00330_IS_NEED_PAPER_MARK_GUARD_IMPL*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_4C52A9F00330_IS_NEED_PAPER_MARK_GUARD_IMPL*¤		Label label = ContainerManager.Factory.get().getLabelManager().getLabel("rt_uo_current_doc");¤		if(getPage().getLabels().contains(label)){¤			return false;¤		}¤¤		if (getCopyType().equals(new PaperCopy().getType())) {¤			//íåõî÷åòñÿ çäåñü ïðîâåðÿòü ýâåíòû, ïîòîìó-÷òî òåðÿåì âîçìîæíîñòü çàäàâàòü þçåðñêèå ñâîéñòâà ó çàïðîñà¤			//áåç ïðîãðàììèðîâàíÿ ÷åãî-òî äîïîëíèòåëüíîãî¤			return true;¤		}¤		return false;¤		//#UC END# *4C52CC2C0221_4C52A9F00330_IS_NEED_PAPER_MARK_GUARD_IMPL*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_4C52A9F00330_IS_NO_NEED_PAPER_MARK_GUARD_IMPL*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_4C52A9F00330_IS_NO_NEED_PAPER_MARK_GUARD_IMPL*¤		return !isNeedPaperMark();¤		//#UC END# *4C52CC2C0221_4C52A9F00330_IS_NO_NEED_PAPER_MARK_GUARD_IMPL*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_4C52A9F00330_MARKINGPAPERCOPY_VALIDATE*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_4C52A9F00330_MARKINGPAPERCOPY_VALIDATE*		¤		User u = DPOUVSManager.Factory.get(getPage().getSpaceKey()).getResponsibleSetLabelsInPaperCopy();¤		if(u != null){¤			setExecutors(Arrays.asList(u.getName()));¤		}else{¤			throw new ValidationFailed(1110, "Íåâîçìîæíî âûïîëíèòü êîììàíäó. Òðåáóåòñÿ óêàçàòü â íàñòðîéêàõ ñîòðóäíèêà, ïðîñòàâëÿþùåãî ìåòêè íà áóìàæíûõ êîïèÿõ");¤		}¤		¤		if(getEvent() instanceof UVSStateMachine.NoConnectToF1ForPaperCopy){¤			try{¤				setIsConnected(ConnectedStatus.IS_NOT_CONNECTED);			¤			}catch(Exception ex){¤				throw new ValidationFailed(1111, "Íåâîçìîæíî âûïîëíèòü êîììàíäó. Âî âðåìÿ íàçíà÷åíèÿ òîïèêà ïðîèçîøëà îøèáêà.");¤			}¤			¤			ContainerManager.Factory.get().getLabelManager().removeLabel(getPage(), DpoUvsHelper.KARTOCHKA);¤			ContainerManager.Factory.get().getLabelManager().addLabel(getPage(), DpoUvsHelper.KARTOCHKA);				¤			¤		}¤			¤			¤		if (getEvent() instanceof UVSStateMachine.DoNothingForPaperCopy) {¤			ContainerManager.Factory.get().getLabelManager().removeLabel(getPage(), DpoUvsHelper.DO_NOTHING);¤			ContainerManager.Factory.get().getLabelManager().addLabel(getPage(), DpoUvsHelper.DO_NOTHING);¤		}¤		//#UC END# *4C52CC2C0221_4C52A9F00330_MARKINGPAPERCOPY_VALIDATE*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_4C52A9F00330_MARKINGPAPERCOPY_PRE_ENTER*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_4C52A9F00330_MARKINGPAPERCOPY_PRE_ENTER*¤		//#UC END# *4C52CC2C0221_4C52A9F00330_MARKINGPAPERCOPY_PRE_ENTER*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_4C52A9F00330_MARKINGPAPERCOPY_PRE_EXIT*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_4C52A9F00330_MARKINGPAPERCOPY_PRE_EXIT*¤		//#UC END# *4C52CC2C0221_4C52A9F00330_MARKINGPAPERCOPY_PRE_EXIT*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_4C52A9F00330_FAKESTATETOTRANSITPAPERCOPYTORIGHTPALCE_VALIDATE*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_4C52A9F00330_FAKESTATETOTRANSITPAPERCOPYTORIGHTPALCE_VALIDATE*¤		validateClosed();¤		¤		//#UC END# *4C52CC2C0221_4C52A9F00330_FAKESTATETOTRANSITPAPERCOPYTORIGHTPALCE_VALIDATE*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_4C52A9F00330_FAKESTATETOTRANSITPAPERCOPYTORIGHTPALCE_PRE_ENTER*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_4C52A9F00330_FAKESTATETOTRANSITPAPERCOPYTORIGHTPALCE_PRE_ENTER*¤		//#UC END# *4C52CC2C0221_4C52A9F00330_FAKESTATETOTRANSITPAPERCOPYTORIGHTPALCE_PRE_ENTER*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_4C52A9F00330_FAKESTATETOTRANSITPAPERCOPYTORIGHTPALCE_PRE_EXIT*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_4C52A9F00330_FAKESTATETOTRANSITPAPERCOPYTORIGHTPALCE_PRE_EXIT*¤		//#UC END# *4C52CC2C0221_4C52A9F00330_FAKESTATETOTRANSITPAPERCOPYTORIGHTPALCE_PRE_EXIT*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_4C52A9F00330_IS_AUTO_MAILING_GOTO_MANAGER_GUARD_IMPL*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_4C52A9F00330_IS_AUTO_MAILING_GOTO_MANAGER_GUARD_IMPL*¤        return isNewCurrentDocAndGotoManager_;¤		//#UC END# *4C52CC2C0221_4C52A9F00330_IS_AUTO_MAILING_GOTO_MANAGER_GUARD_IMPL*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_4C52A9F00330_IS_UO_QUERY_REJECTED_GUARD_IMPL*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_4C52A9F00330_IS_UO_QUERY_REJECTED_GUARD_IMPL*¤		return isUoQueryRejected_;¤		//#UC END# *4C52CC2C0221_4C52A9F00330_IS_UO_QUERY_REJECTED_GUARD_IMPL*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_4C52A9F00330_NO_ASSIGNED_FOR_ISSUER_GUARD_IMPL*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_4C52A9F00330_NO_ASSIGNED_FOR_ISSUER_GUARD_IMPL*¤		return isForSystemRollBackAssigned_;¤		//#UC END# *4C52CC2C0221_4C52A9F00330_NO_ASSIGNED_FOR_ISSUER_GUARD_IMPL*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_4C52A9F00330_ANALYSEREPEATSDOCS_VALIDATE*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_4C52A9F00330_ANALYSEREPEATSDOCS_VALIDATE*¤		validateCopiesAndRestrictedStatus();¤		//#UC END# *4C52CC2C0221_4C52A9F00330_ANALYSEREPEATSDOCS_VALIDATE*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_4C52A9F00330_ANALYSEREPEATSDOCS_PRE_ENTER*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_4C52A9F00330_ANALYSEREPEATSDOCS_PRE_ENTER*¤		ContainerManager.Factory.get().getContentPropertyManager().setStringProperty(¤				getPage()¤				, WHO_CARRY_OUT_DOC_TO_UO¤				, AuthenticatedUserThreadLocal.getUsername()¤			);¤		Group group = DPOUVSManager.Factory.get(getPage().getSpaceKey()).getDocsAcceptorsInUO();¤		setExecutors(getStringListFromGroup(group));¤		ContainerManager.Factory.get().getContentPropertyManager().removeProperty(getPage(), "isRepeat");¤		//#UC END# *4C52CC2C0221_4C52A9F00330_ANALYSEREPEATSDOCS_PRE_ENTER*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_4C52A9F00330_ANALYSEREPEATSDOCS_PRE_EXIT*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_4C52A9F00330_ANALYSEREPEATSDOCS_PRE_EXIT*¤		//#UC END# *4C52CC2C0221_4C52A9F00330_ANALYSEREPEATSDOCS_PRE_EXIT*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_4C52A9F00330_ATTACHED_DOC_IS_REPEAT_GUARD_IMPL*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_4C52A9F00330_ATTACHED_DOC_IS_REPEAT_GUARD_IMPL*¤		String prop = ContainerManager.Factory.get().getContentPropertyManager().getStringProperty(getPage(), "isRepeat");¤		if(StringUtils.isNotEmpty(prop)){¤			return Boolean.parseBoolean(prop);¤		}¤		return false;¤		//#UC END# *4C52CC2C0221_4C52A9F00330_ATTACHED_DOC_IS_REPEAT_GUARD_IMPL*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_4C52A9F00330_EVENT_FOR_LEADER_AND_ASSIGNED_AND_HAS_ATTACHMENTS_GUARD_IMPL*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_4C52A9F00330_EVENT_FOR_LEADER_AND_ASSIGNED_AND_HAS_ATTACHMENTS_GUARD_IMPL*¤		boolean isRepeat = DPOUVSManager.Factory.get(getPage().getSpaceKey()).hasAnotherSource(this);¤		boolean isUnknown = getDocCard().getIsConnected().equals(ConnectedStatus.UNKNOWN);¤		boolean isPublicationInfoCopyDAO = (getProxy().getCopy() != null) ? (getProxy().getCopy() instanceof PublicationInfoCopyDAO) : false;¤¤		return ¤				(hasNotAttachmentsOrScanedCopy() == false || isPublicationInfoCopyDAO) && ¤				(isUnknown || isRepeat) && ¤				(getPage().getLabels().contains(DpoUvsHelper.getRegionQueryLabel()) == false); ¤		//#UC END# *4C52CC2C0221_4C52A9F00330_EVENT_FOR_LEADER_AND_ASSIGNED_AND_HAS_ATTACHMENTS_GUARD_IMPL*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_4C52A9F00330_EVENT_FOR_LEADER_AND_ASSIGNED_AND_NO_ATTACHMENTS_GUARD_IMPL*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_4C52A9F00330_EVENT_FOR_LEADER_AND_ASSIGNED_AND_NO_ATTACHMENTS_GUARD_IMPL*¤		return (eventForLeaderAndAssignedAndHasAttachments () == false);¤		//#UC END# *4C52CC2C0221_4C52A9F00330_EVENT_FOR_LEADER_AND_ASSIGNED_AND_NO_ATTACHMENTS_GUARD_IMPL*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_4C52A9F00330_EVENT_ONLY_FOR_UO_QUERY_GUARD_IMPL*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_4C52A9F00330_EVENT_ONLY_FOR_UO_QUERY_GUARD_IMPL*¤		User onlyUserRespUVS = DPOUVSManager.Factory.get(getDocCard().getPage().getSpaceKey()).getOnlyResponsibleForUvs();¤		String responsible = null;¤		if(onlyUserRespUVS != null){¤			responsible = onlyUserRespUVS.getName();¤		}else{¤			responsible = getResponsibleByOgv(getDocCard().getDocIssuer(), false, false);¤		}¤		if(getPage().getLabels().contains(DpoUvsHelper.getUoQueryLabel()) && StringUtils.isNotEmpty(responsible)){¤			return true;¤		}¤		return false;¤		//#UC END# *4C52CC2C0221_4C52A9F00330_EVENT_ONLY_FOR_UO_QUERY_GUARD_IMPL*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_4C52A9F00330_REGION_QUERY_FOR_LEADER_AND_ASSIGNED_GUARD_IMPL*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_4C52A9F00330_REGION_QUERY_FOR_LEADER_AND_ASSIGNED_GUARD_IMPL*¤		String userName = AuthenticatedUserThreadLocal.getUsername();¤		//ðóêîâîäèòåëü¤		DPOUVSManager dpoUvsManager = DPOUVSManager.Factory.get(getPage().getSpaceKey());¤		boolean isLeader = dpoUvsManager.isLeader(userName);¤		//îòâåòñòâåííûé çà ÎÃÂ ñî ñòîðîíû ÞÎ¤		Group group = dpoUvsManager.getDocsAcceptorsInUO();¤		boolean isDocsAcceptor = false;¤		if(group != null){¤			List<String> users = getStringListFromGroup(group);¤			isDocsAcceptor = users.contains(userName);¤		}¤		return getPage().getLabels().contains(DpoUvsHelper.getRegionQueryLabel()) && (isLeader || isDocsAcceptor);¤		//#UC END# *4C52CC2C0221_4C52A9F00330_REGION_QUERY_FOR_LEADER_AND_ASSIGNED_GUARD_IMPL*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_4C52A9F00330_IS_MAILING_GUARD_IMPL*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_4C52A9F00330_IS_MAILING_GUARD_IMPL*¤		assert (false);¤		return false;¤		//#UC END# *4C52CC2C0221_4C52A9F00330_IS_MAILING_GUARD_IMPL*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_4C52A9F00330_HAS_TOPIC_GUARD_IMPL*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_4C52A9F00330_HAS_TOPIC_GUARD_IMPL*¤		if(getDocCard().getTopic() > 0){¤			return true;¤		}¤		return false;¤		//#UC END# *4C52CC2C0221_4C52A9F00330_HAS_TOPIC_GUARD_IMPL*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_4C52A9F00330_NO_TOPIC_GUARD_IMPL*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_4C52A9F00330_NO_TOPIC_GUARD_IMPL*¤		if(getDocCard().getTopic() == 0){¤			return true;¤		}¤		return false;¤		//#UC END# *4C52CC2C0221_4C52A9F00330_NO_TOPIC_GUARD_IMPL*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_4C52A9F00330_FAKESTATEFORMAILING_VALIDATE*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_4C52A9F00330_FAKESTATEFORMAILING_VALIDATE*¤		//#UC END# *4C52CC2C0221_4C52A9F00330_FAKESTATEFORMAILING_VALIDATE*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_4C52A9F00330_FAKESTATEFORMAILING_PRE_ENTER*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_4C52A9F00330_FAKESTATEFORMAILING_PRE_ENTER*¤		//#UC END# *4C52CC2C0221_4C52A9F00330_FAKESTATEFORMAILING_PRE_ENTER*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_4C52A9F00330_FAKESTATEFORMAILING_PRE_EXIT*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_4C52A9F00330_FAKESTATEFORMAILING_PRE_EXIT*¤		//#UC END# *4C52CC2C0221_4C52A9F00330_FAKESTATEFORMAILING_PRE_EXIT*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_4C52A9F00330_SECOND_COPY_AND_NO_TOPIC_GUARD_IMPL*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_4C52A9F00330_SECOND_COPY_AND_NO_TOPIC_GUARD_IMPL*¤		if(getDocCard().getTopic() == 0){¤			return true;¤		}¤		return false;¤		//#UC END# *4C52CC2C0221_4C52A9F00330_SECOND_COPY_AND_NO_TOPIC_GUARD_IMPL*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_4C52A9F00330_HAS_TOPIC_OR_FIRST_COPY_GUARD_IMPL*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_4C52A9F00330_HAS_TOPIC_OR_FIRST_COPY_GUARD_IMPL*¤		if(getDocCard().getTopic() > 0){¤			return true;¤		}¤		return false;¤		//#UC END# *4C52CC2C0221_4C52A9F00330_HAS_TOPIC_OR_FIRST_COPY_GUARD_IMPL*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_4C52A9F00330_IS_NO_CONNECT_AND_E_COPY_GUARD_IMPL*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_4C52A9F00330_IS_NO_CONNECT_AND_E_COPY_GUARD_IMPL*¤		List<Label> labels = getPage().getLabels();¤		¤		return isNoConnect() && (¤				labels.contains(DpoUvsHelper.getUoQueryLabel()) || ¤				labels.contains(DpoUvsHelper.getUoCurrentDocLabel()) ||¤				(¤						labels.contains(DpoUvsHelper.getCurrentDocLabel()) && ¤						isECopy()¤				)¤		);¤		//#UC END# *4C52CC2C0221_4C52A9F00330_IS_NO_CONNECT_AND_E_COPY_GUARD_IMPL*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_4C52A9F00330_HAS_ANOTHER_SOURCE_AND_E_COPY_GUARD_IMPL*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_4C52A9F00330_HAS_ANOTHER_SOURCE_AND_E_COPY_GUARD_IMPL*¤		List<Label> labels = getPage().getLabels();¤¤		return hasAnotherSource ()  && (¤				labels.contains(DpoUvsHelper.getUoQueryLabel()) || ¤				labels.contains(DpoUvsHelper.getUoCurrentDocLabel()) ||¤				(¤						labels.contains(DpoUvsHelper.getCurrentDocLabel()) && ¤						isECopy()¤				)¤		);¤		//#UC END# *4C52CC2C0221_4C52A9F00330_HAS_ANOTHER_SOURCE_AND_E_COPY_GUARD_IMPL*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_4C52A9F00330_IS_NO_CONNECT_AND_PAPER_COPY_GUARD_IMPL*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_4C52A9F00330_IS_NO_CONNECT_AND_PAPER_COPY_GUARD_IMPL*¤		return isNoConnect() && getPage().getLabels().contains(DpoUvsHelper.getCurrentDocLabel())¤				&& getCopyType() != null && getCopyType().equals(new PaperCopy().getType()); ¤		//#UC END# *4C52CC2C0221_4C52A9F00330_IS_NO_CONNECT_AND_PAPER_COPY_GUARD_IMPL*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_4C52A9F00330_HAS_ANOTHER_SOURCE_AND_PAPER_COPY_GUARD_IMPL*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_4C52A9F00330_HAS_ANOTHER_SOURCE_AND_PAPER_COPY_GUARD_IMPL*¤		return hasAnotherSource () && getPage().getLabels().contains(DpoUvsHelper.getCurrentDocLabel())  ¤				&& getCopyType() != null && getCopyType().equals(new PaperCopy().getType()); ¤		//#UC END# *4C52CC2C0221_4C52A9F00330_HAS_ANOTHER_SOURCE_AND_PAPER_COPY_GUARD_IMPL*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_4C52A9F00330_IS_UO_QUERY_OR_CURRENT_DOC_GUARD_IMPL*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_4C52A9F00330_IS_UO_QUERY_OR_CURRENT_DOC_GUARD_IMPL*¤		Label labelCurrentDoc = ContainerManager.Factory.get().getLabelManager().getLabel("rt_current_doc");¤		Label labelUoQuery = ContainerManager.Factory.get().getLabelManager().getLabel("rt_uo_query");¤		if(getPage().getLabels().contains(labelCurrentDoc) || getPage().getLabels().contains(labelUoQuery)){¤			return true;¤		}¤		return false;¤		//#UC END# *4C52CC2C0221_4C52A9F00330_IS_UO_QUERY_OR_CURRENT_DOC_GUARD_IMPL*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_4C52A9F00330_ONLY_UO_QUERY_NO_ASSIGNED_FOR_ISSUER_GUARD_IMPL*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_4C52A9F00330_ONLY_UO_QUERY_NO_ASSIGNED_FOR_ISSUER_GUARD_IMPL*¤		User onlyUserRespUVS = DPOUVSManager.Factory.get(getDocCard().getPage().getSpaceKey()).getOnlyResponsibleForUvs();¤		String responsible = null;¤		if(onlyUserRespUVS != null){¤			responsible = onlyUserRespUVS.getName();¤		}else{¤			responsible = getResponsibleByOgv(getDocCard().getDocIssuer(), false, false);¤		}	¤		if(getPage().getLabels().contains(DpoUvsHelper.getUoQueryLabel()) && StringUtils.isEmpty(responsible)){¤			return true;¤		}¤		¤		return false;¤		//#UC END# *4C52CC2C0221_4C52A9F00330_ONLY_UO_QUERY_NO_ASSIGNED_FOR_ISSUER_GUARD_IMPL*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_4C52A9F00330_HAS_GARDOC_NOEXPORT_GUARD_IMPL*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_4C52A9F00330_HAS_GARDOC_NOEXPORT_GUARD_IMPL*¤		Label label = ContainerManager.Factory.get().getLabelManager().getLabel(DpoUvsHelper.NO_EXPORT);¤		if(getPage().getLabels().contains(label)){¤			//ðóêîâîäèòåëü¤			DPOUVSManager dpoUvsManager = DPOUVSManager.Factory.get(getPage().getSpaceKey());¤			String userName = AuthenticatedUserThreadLocal.getUsername();¤			boolean isLeader = dpoUvsManager.isLeader(userName);¤			if(isLeader == true){¤				return true;¤			}¤			boolean isOdUoResponsibleForProjectRequerst = false;¤			boolean isOdUoResponsible = true;¤			if(getPage().getLabels().contains(DpoUvsHelper.getLabelDraftUvs())){¤				isOdUoResponsibleForProjectRequerst = true;¤				isOdUoResponsible = false;¤			}¤¤			DocCard gardoc = getDocCard ();¤			¤			User onlyUserRespUO = DPOUVSManager.Factory.get(gardoc.getPage().getSpaceKey()).getOnlyResponsibleForUo();¤			String responsible = null;¤			if(onlyUserRespUO != null){¤				responsible = onlyUserRespUO.getName();¤			}else{¤				responsible = getResponsibleByOgv(gardoc.getDocIssuer(), isOdUoResponsible, isOdUoResponsibleForProjectRequerst);¤			}	¤			if(StringUtils.isNotEmpty(userName) && userName.equals(responsible)){¤				return true;¤			}¤		}¤		return false;¤		//#UC END# *4C52CC2C0221_4C52A9F00330_HAS_GARDOC_NOEXPORT_GUARD_IMPL*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC2C0221_4C52A9F00330_IS_REGION_QUERY_REJECTED_GUARD_IMPL*"
		    value      	(value Text 
|//#UC START# *4C52CC2C0221_4C52A9F00330_IS_REGION_QUERY_REJECTED_GUARD_IMPL*¤		return isRegionQueryRejected_;¤		//#UC END# *4C52CC2C0221_4C52A9F00330_IS_REGION_QUERY_REJECTED_GUARD_IMPL*
		    )))
	    quid       	"4C52CC2C0221"
	    documentation 	"UVSQueryImpl"
	    stereotype 	"Servant"
	    superclasses 	(list inheritance_relationship_list
		(object Inheritance_Relationship
		    quid       	"4C52CF08028E"
		    supplier   	"Logical View::MDProcess::ConfluenceMDChange::RequestsImpl::AbstractRequestS"
		    quidu      	"4757F83900B2"))
	    used_nodes 	(list uses_relationship_list
		(object Uses_Relationship
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"19022878644"))
		    quid       	"4C52E1250283"
		    stereotype 	"uses"
		    supplier   	"Logical View::MDProcess::DocCardChange::DocCardChangeDAO::UVSQuestDAO"
		    quidu      	"4C49AA1B03C3")
		(object Uses_Relationship
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"19022879072"))
		    quid       	"4C52E15F037D"
		    stereotype 	"uses"
		    supplier   	"Logical View::MDProcess::DocCardChange::DocCardCommon::DPOUVSManager"
		    quidu      	"4C3FF8CD03C3")
		(object Uses_Relationship
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"19022879457"))
		    quid       	"4C5A8CB90385"
		    stereotype 	"uses"
		    supplier   	"Logical View::MDProcess::DocCardChange::DocCardChangeDAO::UVSQuestDAO"
		    quidu      	"4C49AA1B03C3"))
	    realized_interfaces 	(list realize_rel_list
		(object Realize_Relationship
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"15182025843"))
		    quid       	"4CF8BE280191"
		    supplier   	"Logical View::MDProcess::DocCardChange::Entities::UVSQuery"
		    quidu      	"4C3D987A0072"))
	    language   	"MDA Generator")
	(object Class "UVSQueryPermissionManagerImpl"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"DerivedImplement"
		    value      	(value Text 
|{"48EB593602EB":{"need_collect_children":"true"},"4CD7D33D001F":{"need_collect_children":"false"},"4DFB365900D6":{"need_collect_children":"false"},"4E0477BC00C5":{"need_collect_children":"false"},"4E0D90380113":{"need_collect_children":"false"},"4E0D908101E4":{"need_collect_children":"false"},"4E3A76B50104":{"need_collect_children":"false"},"4E60AAD5003C":{"need_collect_children":"false"}}
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"DerivedOverload"
		    value      	(value Text 
|{"48D75FF9016B":{"need_collect_children":"true"},"4B4AC98301F1":{"need_collect_children":"true"}}
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ImplementSelectType"
		    value      	"include")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"OverloadSelectType"
		    value      	"include")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"WikiPageID (wiki)"
		    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Ìîäåëü ïðîåêòà "MDProcess"/DocCardChange/EntitiesImpl/UVSQueryPermissionManagerImpl|4C52CC7F0158
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (wiki)"
		    value      	"wiki")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/DocCardChange/EntitiesImpl/UVSQueryPermissionManagerImpl.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (fctr.java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/DocCardChange/EntitiesImpl/UVSQueryPermissionManagerImplFactoryImpl.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (fctr.java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC7F0158_CUSTOM_IMPORT*"
		    value      	"//#UC START# *4C52CC7F0158_CUSTOM_IMPORT*¤import java.util.List;¤import com.atlassian.confluence.labels.Label;¤import com.atlassian.user.Group;¤import com.atlassian.user.User;¤import com.atlassian.gzipfilter.org.apache.commons.lang.StringUtils;¤¤import ru.garant.shared.FSM.*;¤¤import java.util.ArrayList;¤¤import ru.garant.MDProcess.DocCardChange.Entities.sm.UVSStateMachine.*;¤import ru.garant.MDProcess.DocCardChange.DocCardChangeDAO.PaperCopy;¤import ru.garant.MDProcess.DocCardChange.DocCardCommon.*;¤import ru.garant.MDProcess.DocCardChange.DocCardSupport.DpoUvsHelper;¤import ru.garant.MDProcess.ConfluenceMDChange.Requests.sm.AbstractRequestLifeCycle.AbstractState;¤import ru.garant.shared.ConfluenceCore.ActionSupport.ActionContextThreadLocalFactory;¤//#UC END# *4C52CC7F0158_CUSTOM_IMPORT*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC7F0158_CUSTOM_CLASS_DEFINITION*"
		    value      	"//#UC START# *4C52CC7F0158_CUSTOM_CLASS_DEFINITION*¤//#UC END# *4C52CC7F0158_CUSTOM_CLASS_DEFINITION*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CC7F0158_CUSTOM_METHODS_AND_DATA*"
		    value      	(value Text 
|//#UC START# *4C52CC7F0158_CUSTOM_METHODS_AND_DATA*¤	@Override¤	protected boolean isDiscardedState(State state) {¤		// TODO Auto-generated method stub¤		return UVSQueryManager.Factory.get().isInDiscardedState((AbstractState) state);¤	}¤¤¤	@Override¤	protected boolean isFinalState(State state) {¤		// TODO Auto-generated method stub¤		return UVSQueryManager.Factory.get().isInFinalState((AbstractState) state);¤	}¤¤	private static CanAddUvsQueryFromDashboardCache canAddUvsQueryFromDashboardCache = new CanAddUvsQueryFromDashboardCache();¤	¤	private static class CanAddUvsQueryFromDashboardCache extends UserSpaceCache {¤¤		public CanAddUvsQueryFromDashboardCache() {¤			super(900);¤		}¤		¤		@Override¤		protected Boolean loadData (String userName, String spaceKey) {¤			final DPOUVSManager dpoUvsManager = DPOUVSManager.Factory.get(spaceKey);¤			User user = ContainerManager.Factory.get().getUserAccessor().getUser(userName);¤			Group group = DPOUVSManager.Factory.get(spaceKey).getQueryPostersGroupInUO ();¤			if(group == null){¤				return false;¤			}¤			boolean isLeader = getIsLeader(userName, spaceKey);¤			return dpoUvsManager.getEnabled() && (isLeader ¤					|| group != null && ContainerManager.Factory.get().getUserAccessor().hasMembership(group, user));¤		}¤		¤	}¤	¤	private static CanAddRegionPartnerUvsQueryFromDashboardCache canAddRegionPartnerUvsQueryFromDashboardCache = new CanAddRegionPartnerUvsQueryFromDashboardCache();¤	¤	private static class CanAddRegionPartnerUvsQueryFromDashboardCache extends UserSpaceCache {¤¤		public CanAddRegionPartnerUvsQueryFromDashboardCache() {¤			super(900);¤		}¤		¤		@Override¤		protected Boolean loadData (String userName, String spaceKey) {¤			final DPOUVSManager dpoUvsManager = DPOUVSManager.Factory.get(spaceKey);¤			User user = ContainerManager.Factory.get().getUserAccessor().getUser(userName);¤			String regionPartnersGroups = DPOUVSManager.Factory.get(spaceKey).getRegionPartnersGroups();¤			if(StringUtils.isEmpty(regionPartnersGroups)){¤				return false;¤			}¤			boolean isRegionPartner = false;¤			String[] regionPartnersArray = StringUtils.split(regionPartnersGroups, ",");¤			for(String regionPartner : regionPartnersArray){	¤				isRegionPartner = isRegionPartner || ContainerManager.Factory.get().getUserAccessor().hasMembership(regionPartner, user.getName());¤			}¤			return dpoUvsManager.getEnabled() && isRegionPartner;¤		}¤		¤	}¤¤	private static CanAddCurrentDocFromDashboardCache canAddCurrentDocFromDashboardCache = new CanAddCurrentDocFromDashboardCache();¤	¤	private static class CanAddCurrentDocFromDashboardCache extends UserSpaceCache {¤¤		public CanAddCurrentDocFromDashboardCache() {¤			super(900);¤		}¤		¤		@Override¤		protected Boolean loadData (String userName, String spaceKey) {¤			final DPOUVSManager dpoUvsManager = DPOUVSManager.Factory.get(spaceKey);¤			User user = ContainerManager.Factory.get().getUserAccessor().getUser(userName);¤			Group group = DPOUVSManager.Factory.get(spaceKey).getGardocUoDocPosters();¤			if(group == null){¤				return false;¤			}¤			return dpoUvsManager.getEnabled() && ContainerManager.Factory.get().getUserAccessor().hasMembership(group, user);¤		}¤		¤	}¤¤	private static CanAddUvsQueryFromPageCache canAddUvsQueryFromPageCache = new CanAddUvsQueryFromPageCache();¤	¤	private static class CanAddUvsQueryFromPageCache extends UserSpaceCache {¤¤		public CanAddUvsQueryFromPageCache() {¤			super(900);¤		}¤		¤		@Override¤		protected Boolean loadData (String userName, String spaceKey) {¤			final DPOUVSManager dpoUvsManager = DPOUVSManager.Factory.get(spaceKey);¤			if (!dpoUvsManager.getEnabled()) {¤				return false;¤			}¤			boolean isLeader = getIsLeader(userName, spaceKey);¤			if (isLeader) {¤				return true;¤			}¤			User user = ContainerManager.Factory.get().getUserAccessor().getUser(userName);¤			Group[] g = new Group[]{¤				DPOUVSManager.Factory.get(spaceKey).getGardocUoDocPosters()¤				, DPOUVSManager.Factory.get(spaceKey).getUvsGroupWhoTransferDocsToUO()¤			};¤			for (Group group : g) {¤				if(group != null && ContainerManager.Factory.get().getUserAccessor().hasMembership(group, user)) {¤					return true;¤				}				¤			}¤			return false;¤		}¤		¤	}¤	¤	¤	private boolean hasAllowedLabel (AbstractPage page) {¤		List<String> allowedLabels = new ArrayList<String>();  ¤		allowedLabels.add("uvs");¤		for (Label label : (List<Label>) page.getLabels()) {¤			if (allowedLabels.contains(label.getName())) {¤				return true;¤			}¤		}¤		return false;¤	}¤¤¤	@Override¤	protected boolean canEditState(AbstractRequest request, final State currentState, String user) {¤		String spaceKey = request.getPage().getSpaceKey();¤		if (!super.canEditState(request, currentState, user)) {¤			return false;¤		}¤		State state = null;¤		try {¤			state = request.getCurrentState();¤		}¤		catch (NotStarted e) {¤			Logs.LOG_E("AbstractLifeCycleErrorS::canEditState: catch NotStarted, how?!");¤		}¤		if(canEditFieldsProjectManagersGroupsInOdUoInStateInAcceptByUOManager (user, state, spaceKey, isProject(request))){¤			return true;¤		}¤		if(request.getPage().getLabels().contains(DpoUvsHelper.getRegionQueryLabel()) && isDiscardedState(state)){¤			return false;¤		}¤		Label noExportLabel = ContainerManager.Factory.get().getLabelManager().getLabel(DpoUvsHelper.NO_EXPORT);¤		if(isFinalState(state) ¤				&& request.getPage().getLabels().contains(DpoUvsHelper.getUoQueryLabel()) == false ¤				&& request.getPage().getLabels().contains(noExportLabel) == false){¤			return false;¤		}¤		¤		boolean isLeader = getIsLeader(user, spaceKey);¤		if(isLeader){¤			return true;¤		}¤		¤		if(isFinalState(state) && DpoUvsHelper.isProjectManager(user, spaceKey) && request.getPage().getLabels().contains(noExportLabel)){¤			return true;¤		}¤			¤		if(request.getPage().getLabels().contains(DpoUvsHelper.getUoQueryLabel())){¤			long docIssuer = ((UVSQuery)request).getDocCard().getDocIssuer();¤			String responsible = getOGVAssigned(docIssuer, spaceKey);¤			if(user.equals(responsible) || isLeader){¤				return true;¤			}¤		}¤		boolean isAssignedOrWaitingFromOGVorOnAcceptState = (state instanceof Assigned) || (state instanceof WaitingFromOGV) || (state instanceof OnAccept);¤		if(isAssignedOrWaitingFromOGVorOnAcceptState && isViewPageAction() && request.getExecutorLogins().contains(user) || canChangeDiscardedState(request, user, state)){¤			return true;¤		}¤		¤		if (request.getExecutorLogins().contains(user)) {¤			return true;¤		}¤¤		return false;¤	}¤	¤	private boolean isViewPageAction (){¤		String actionName = ActionContextThreadLocalFactory.Factory.get().getContext().getName();¤		return actionName != null && (actionName.equals("viewpage.action") || actionName.equals("edituvsquery.action"));¤	}¤	¤	private boolean canChangeDiscardedState(AbstractRequest request, String user, State state){¤		String spaceKey = request.getPage().getSpaceKey();¤		long docIssuer = ((UVSQuery)request).getDocCard().getDocIssuer();¤		String assignedUser = getOGVAssigned(docIssuer, spaceKey);¤		DPOUVSManager manager = DPOUVSManager.Factory.get(spaceKey);¤		List<String> uoUsers = ContainerManager.Factory.get().getUserAccessor().getMemberNamesAsList(manager.getQueryPostersGroupInUO());¤		List<String> gardocUoDocPostersUsers = ContainerManager.Factory.get().getUserAccessor().getMemberNamesAsList(manager.getGardocUoDocPosters());¤		return (state instanceof Discarded) && (user.equals(assignedUser) || uoUsers.contains(user) || gardocUoDocPostersUsers.contains(user));¤	}¤	¤	private boolean canEditImportance (final AbstractRequest request, final State currentState, final String user) {¤		String spaceKey = request.getPage().getSpaceKey();¤		DPOUVSManager dpoUvsManager = DPOUVSManager.Factory.get(spaceKey);¤		boolean isLeader = getIsLeader(user, request.getPage().getSpaceKey());¤		if(canEditFieldsProjectManagersGroupsInOdUoInStateInAcceptByUOManager (user, currentState, spaceKey, isProject(request)) || isLeader){¤			return true;¤		}¤		if (!isFinalState(currentState)) {¤			return dpoUvsManager.isInActiveRole(user);¤		}¤		return false;¤	}¤	¤	private boolean canEditOwner (final AbstractRequest request, final State currentState, final String user) {¤		String spaceKey = request.getPage().getSpaceKey();	¤		if (isFinalState(currentState) || isDiscardedState(currentState) || currentState instanceof OnAcceptInUO || currentState instanceof AnalyseRepeatsDocs) {¤			return false;¤		}¤		if(canEditFieldsProjectManagersGroupsInOdUoInStateInAcceptByUOManager (user, currentState, spaceKey, isProject(request))){¤			return true;¤		}¤		return getIsLeader(user, spaceKey);¤	}¤	¤	private boolean canEditFieldsInStateInAcceptByUOManager (final AbstractRequest request, final State currentState, final String user) {¤			UVSQuery uvsQuery = (UVSQuery)request;¤			String spaceKey = request.getPage().getSpaceKey();¤			if(isUserInProjectManagersGroupAndStateAcceptByUOManager(uvsQuery, user, spaceKey, DpoUvsHelper.isProject(request.getPage()))){¤				return true;¤			}¤			¤			if(isViewPageAction() && canEditFieldsProjectManagersGroupsInOdUoInStateInAcceptByUOManager (user, currentState, spaceKey, isProject(request))){¤				return true;¤			}¤			String odUOResponsible = getOGVAssigned(uvsQuery.getDocCard().getDocIssuer(), spaceKey);¤			boolean isLeader = getIsLeader(user, spaceKey);¤			if (isViewPageAction() && currentState instanceof OnAcceptByUOManager && (user.equals(odUOResponsible) || isLeader)) {¤				return true;¤			}¤			return false;¤	}	¤¤	private boolean canEditFieldsProjectManagersGroupsInOdUoInStateInAcceptByUOManager (final String user, final State state, final String spaceKey, boolean isProject) {¤		if (state instanceof OnAcceptByUOManager && canEditFieldsGardocUoDocPostersAndProjectManagersGroupsInOdUo(user, spaceKey, isProject)) {¤			return true;¤		}¤		return false;¤	}¤	¤	private boolean canEditFieldsGardocUoDocPostersAndProjectManagersGroupsInOdUo (final String user, String spaceKey, boolean isProject) {¤		Group group = DPOUVSManager.Factory.get(spaceKey).getGardocUoDocPosters();¤		if (group != null && ContainerManager.Factory.get().getUserAccessor().hasMembership(group.getName(), user) ¤				|| DpoUvsHelper.isProjectManager(user, spaceKey, isProject)) {¤			return true;¤		}¤		return false;¤	}¤¤	private boolean isUserInProjectManagersGroupAndStateAcceptByUOManager(final AbstractRequest request, final String user, String spaceKey, boolean isProject){¤		boolean hasMembership = DpoUvsHelper.isProjectManager(user, spaceKey, isProject);¤		return !isViewPageAction() && hasMembership && ((AbstractState)request.getCurrentState()).getGuid().equals(UVSStateMachine.ST_ON_ACCEPT_BY_UO_MANAGER.getGuid());¤	}¤	¤	¤	private boolean isExecutorOrLeader(AbstractRequest request, String userName){¤		boolean isExecutor = request.getExecutorLogins().contains(userName);¤		boolean isLeader = getIsLeader(userName, request.getPage().getSpaceKey());¤		¤		if(isExecutor || isLeader){¤			return true;¤		}¤		return false;¤	}¤	¤	private boolean isProject(AbstractRequest request){¤		return request.getPage().getLabels().contains(DpoUvsHelper.getLabelDraftUvs());¤	}¤	¤	public String getOGVAssigned(long docIssuer, String spaceKey){¤		if(odUOResponsible_ == null){¤			User onlyUserRespUVS = DPOUVSManager.Factory.get(spaceKey).getOnlyResponsibleForUvs();¤			if(onlyUserRespUVS != null){¤				odUOResponsible_ = onlyUserRespUVS.getName();¤			}else{¤				boolean isOdUoResponsibleForProjectRequerst = false;¤				boolean isOdUoResponsible = false;¤				odUOResponsible_ = OGVLinksManager.Factory.get(spaceKey).getResponsibleByOgv(docIssuer, isOdUoResponsible, isOdUoResponsibleForProjectRequerst);¤			}	¤		}	¤		return odUOResponsible_;¤	}¤	¤	private String odUOResponsible_ = null;¤¤	public static boolean getIsLeader(String userName, String spaceKey){¤		if(isLeader_ == 0){¤			final DPOUVSManager dpoUvsManager = DPOUVSManager.Factory.get(spaceKey);¤			if(dpoUvsManager.isLeader(userName)){¤				isLeader_ = 1;¤			}else{¤				isLeader_ = 2;¤			}¤		}	¤		if(isLeader_ == 1){¤			return true;¤		}¤		return false;¤	}¤¤	private void clearAll(){¤		clearLeader();¤		clearOdUoResponsible();¤	}¤	¤	private void clearLeader(){¤		isLeader_ = 0;¤	}¤	¤	private void clearOdUoResponsible(){¤		odUOResponsible_ = null;¤	}¤¤	private static byte isLeader_ = 0;¤¤	public static boolean canChoosePaperCopy(String spaceKey){¤		String partnerCopiesClassesString = PartnerManager.Factory.get().getPartnerCopiesClassesBySpaceKey(spaceKey);¤		String[] partnerCopiesClasses = StringUtils.split(partnerCopiesClassesString, ",");¤		for(int i = 0; i < partnerCopiesClasses.length; i++){¤			String partnerCopyClass = partnerCopiesClasses[i].trim();¤			if(partnerCopyClass.equals(PaperCopy.class.getSimpleName())){¤				return true;¤			}¤		}¤		return false;¤	}¤	¤	//#UC END# *4C52CC7F0158_CUSTOM_METHODS_AND_DATA*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"19022880091"))
	    quid       	"4C52CC7F0158"
	    documentation 	"ðåàëèçàöèÿ ìåíåäæåðà ïî ðàáîòå ñ ïðàâàìè ëþáûõ çàïðîñîâ èç ÄÏÎ ÓÂÑ"
	    stereotype 	"Servant"
	    superclasses 	(list inheritance_relationship_list
		(object Inheritance_Relationship
		    quid       	"4C52CC9D0281"
		    supplier   	"Logical View::MDProcess::ConfluenceMDChange::RequestsImpl::AbstractRequestPermissionManagerS"
		    quidu      	"48EB5A1901CF"))
	    used_nodes 	(list uses_relationship_list
		(object Uses_Relationship
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"19022880405"))
		    quid       	"4C60EB30027E"
		    stereotype 	"uses"
		    supplier   	"Logical View::MDProcess::DocCardChange::DocCardSupportTypes::UvsQueryPermissions"
		    quidu      	"4C60E9C103C1"))
	    realized_interfaces 	(list realize_rel_list
		(object Realize_Relationship
		    quid       	"4C52CC9902E2"
		    supplier   	"Logical View::MDProcess::DocCardChange::Entities::UVSQueryPermissionManager"
		    quidu      	"4C52CAC1020C"))
	    language   	"MDA Generator")
	(object Class "UVSQueryManagerImpl"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"DerivedImplement"
		    value      	(value Text 
|{"48E609F90086":{"need_collect_children":"false"},"490040B50320":{"need_collect_children":"false"},"4901C7F0021F":{"need_collect_children":"false"},"492160670037":{"need_collect_children":"false"},"4AFD101F023C":{"need_collect_children":"false"},"4AFD104E03D9":{"need_collect_children":"false"},"4B0E49DF03C0":{"need_collect_children":"false"},"4B1F6D2D0121":{"need_collect_children":"true"},"4C52CB380231":{"need_collect_children":"true"}}
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"DerivedOverload"
		    value      	(value Text 
|{"476F868A0304":{"need_collect_children":"false"},"4862004501DC":{"need_collect_children":"false"},"48DCBB0900E0":{"need_collect_children":"false"},"48EC4DDC006A":{"need_collect_children":"false"},"48EE06CC013F":{"need_collect_children":"false"},"49A7E4C401BE":{"need_collect_children":"false"},"4A2397620239":{"need_collect_children":"false"},"4A239DD00277":{"need_collect_children":"false"},"4A239DD8025E":{"need_collect_children":"false"},"4A239DDE02CB":{"need_collect_children":"false"},"4A239E4A020F":{"need_collect_children":"false"},"4C7BCB22000D":{"need_collect_children":"false"}}
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ImplementSelectType"
		    value      	"include")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"OverloadSelectType"
		    value      	"include")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/DocCardChange/EntitiesImpl/UVSQueryManagerImpl.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"WikiPageID (wiki)"
		    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Ìîäåëü ïðîåêòà "MDProcess"/DocCardChange/EntitiesImpl/UVSQueryManagerImpl|4C52CCA801D3
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (wiki)"
		    value      	"wiki")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (fctr.java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/DocCardChange/EntitiesImpl/UVSQueryManagerImplFactoryImpl.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (fctr.java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CCA801D3_CUSTOM_IMPORT*"
		    value      	"//#UC START# *4C52CCA801D3_CUSTOM_IMPORT*¤import ru.garant.shared.FSM.*;¤import ru.garant.shared.ConfluenceCore.HibernateSupportImpl.QueryHelper;¤import com.atlassian.renderer.util.FileTypeUtil;¤import com.atlassian.confluence.setup.bandana.ConfluenceBandanaContext;¤import com.atlassian.confluence.spaces.Space;¤import com.atlassian.confluence.user.AuthenticatedUserThreadLocal;¤import com.atlassian.confluence.pages.Attachment;¤import com.atlassian.gzipfilter.org.apache.commons.lang.StringUtils;¤import com.atlassian.user.Group;¤¤import ru.garant.MDProcess.DocCardChange.DocCardCommon.DPOUVSManager;¤import ru.garant.MDProcess.DocCardChange.DocCardCommon.DoInNewTransactionCallback;¤import ru.garant.MDProcess.DocCardChange.DocCardCommon.DocCardManager;¤import ru.garant.MDProcess.DocCardChange.DocCardCommon.ProcessingBussinessErrorsFromJobs;¤import ru.garant.MDProcess.DocCardChange.DocCardCommonImpl.AddFilesJobAction;¤import ru.garant.MDProcess.DocCardChange.DocCardCommonImpl.ChangeStateJobAction;¤import ru.garant.MDProcess.DocCardChange.DocCardCommonImpl.CommonTemplateForJobs;¤import ru.garant.MDProcess.DocCardChange.DocCardSupport.DpoUvsHelper;¤import ru.garant.MDProcess.DocCardChange.DocCardSupport.TransactionDecorator;¤¤import ru.garant.MDProcess.ConfluenceMDChange.Requests.AbstractRequestLifeCycle.AbstractEvent;¤import ru.garant.MDProcess.ConfluenceMDChange.MDChangeDAO.AbstractRequestDAOProxy;¤¤import java.io.FileInputStream;¤import java.io.InputStream;¤import java.sql.Connection;¤import java.sql.PreparedStatement;¤import java.sql.ResultSet;¤import java.sql.Statement;¤import java.text.SimpleDateFormat;¤import java.util.ArrayList;¤import java.util.Calendar;¤import java.util.Date;¤import java.util.HashMap;¤import java.util.List;¤import java.util.Map;¤¤import net.sf.hibernate.HibernateException;¤import net.sf.hibernate.Query;¤import net.sf.hibernate.Session;¤¤import org.springframework.orm.hibernate.SessionFactoryUtils;¤¤//#UC END# *4C52CCA801D3_CUSTOM_IMPORT*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CCA801D3_CUSTOM_CLASS_DEFINITION*"
		    value      	"//#UC START# *4C52CCA801D3_CUSTOM_CLASS_DEFINITION*¤//#UC END# *4C52CCA801D3_CUSTOM_CLASS_DEFINITION*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CCA801D3_CUSTOM_METHODS_AND_DATA*"
		    value      	(value Text 
|//#UC START# *4C52CCA801D3_CUSTOM_METHODS_AND_DATA*¤	@Override¤	protected AbstractRequest doMoveRequest(AbstractRequest request)¤			throws StateNotChanged, NotStarted, ValidationFailed, SaveFailed,¤			PreEnterFailed, PreExitFailed {¤		// TODO Auto-generated method stub¤		return null;¤	}¤¤¤	@Override¤	public DPOUVSManager getMdcManager(String spaceKey) {¤		// TODO Auto-generated method stub¤		return DPOUVSManager.Factory.get(spaceKey);¤	}¤¤¤	@Override¤	public boolean hasExecutionState() {¤		// TODO Auto-generated method stub¤		return true;¤	}¤	¤	private List<UVSQuery> getUvsQueryWhichNeedToReplayForLeaderUvs(String spaceKey){¤		Date currentDate = new Date();¤		Calendar beginCalendar = Calendar.getInstance();¤		beginCalendar.setTime(currentDate);¤		beginCalendar.set(Calendar.MONTH, beginCalendar.get(Calendar.MONTH) - 2);¤		beginCalendar.set(Calendar.DAY_OF_MONTH, beginCalendar.get(Calendar.DAY_OF_MONTH) - 1);¤¤		Calendar endCalendar = Calendar.getInstance();¤		endCalendar.setTime(currentDate);¤		endCalendar.set(Calendar.MONTH, endCalendar.get(Calendar.MONTH) - 2);¤¤		List<UVSQuery> uvsQueryList = getUvsQueryWhichNeedToReplayWithCreatedDate(beginCalendar, endCalendar, UVSStateMachine.ST_ON_ACCEPT.getSortValue() + ", " + UVSStateMachine.ST_ASSIGNED.getSortValue() + ", " + UVSStateMachine.ST_WAITING_FROM_OGV.getSortValue(), spaceKey);¤		return uvsQueryList;¤	}¤	¤	private List<UVSQuery> getUvsQueryWhichNeedToReplayWithCreatedDate(Calendar beginCalendar, Calendar endCalendar, String states, String spaceKey){¤		List<UVSQuery> uvsQueryList = new ArrayList<UVSQuery>();¤		List<UVSQuestDAO> uvsQuestDAOList = DocCardManager.Factory.get().getUvsQueryByStatesAndCreationDate(states, beginCalendar.getTime().getTime(), endCalendar.getTime().getTime(), spaceKey);¤		for(UVSQuestDAO uvsQuestDAO : uvsQuestDAOList){¤			UVSQuery uvsQuery = UVSQuery.Factory.get(uvsQuestDAO.getId());¤			uvsQueryList.add(uvsQuery);¤		}¤		¤		return uvsQueryList;¤	}¤¤	private List<UVSQuery> getUvsQueryWhichNeedToReplayProjectManagers(String spaceKey){¤		Date currentDate = new Date();¤		Calendar beginCalendar = Calendar.getInstance();¤		beginCalendar.setTime(currentDate);¤		beginCalendar.set(Calendar.HOUR, beginCalendar.get(Calendar.HOUR) - 2);¤		beginCalendar.set(Calendar.MINUTE, beginCalendar.get(Calendar.MINUTE) - 5);¤¤		Calendar endCalendar = Calendar.getInstance();¤		endCalendar.setTime(currentDate);¤		endCalendar.set(Calendar.HOUR, endCalendar.get(Calendar.HOUR) - 2);¤¤		List<UVSQuery> uvsQueryList = getUvsQueryWhichNeedToReplay(beginCalendar, endCalendar, UVSStateMachine.ST_ON_ACCEPT_BY_UO_MANAGER.getSortValue() + "", spaceKey);¤		return uvsQueryList;¤	}¤		¤	private List<UVSQuery> getUvsQueryWhichNeedToReplay(Calendar beginCalendar, Calendar endCalendar, String states, String spaceKey){¤		List<UVSQuery> uvsQueryList = new ArrayList<UVSQuery>();¤		List<UVSQuestDAO> uvsQuestDAOList = DocCardManager.Factory.get().getUvsQueryByStates(states, spaceKey);¤		for(UVSQuestDAO uvsQuestDAO : uvsQuestDAOList){¤			List<UVSQuestDAO> prevUvsQuests = new ArrayList<UVSQuestDAO>();¤			try {¤				prevUvsQuests = getAllVersions(uvsQuestDAO.getId());¤			} catch (HibernateException e) {¤				Logs.LOG_SEX(e);¤			}¤			for(int i = prevUvsQuests.size() - 1; i >= 0; i--){¤				UVSQuestDAO prevVersion = prevUvsQuests.get(i);¤				if(prevVersion.getState() == uvsQuestDAO.getPrevState()){¤					UVSQuestDAO curVersion = prevUvsQuests.get(i + 1);¤					Date date = curVersion.getPage().getLastModificationDate();¤					if(date.getTime() > beginCalendar.getTime().getTime() && date.getTime() <= endCalendar.getTime().getTime()){¤						UVSQuery uvsQuery = UVSQuery.Factory.get(uvsQuestDAO.getId());¤						uvsQueryList.add(uvsQuery);¤					}¤					break;¤				}¤			}¤		}¤		return uvsQueryList;¤	}¤	¤	private List<UVSQuery> getUvsQueryWhichNeedToClose(String spaceKey){¤		List<UVSQuery> uvsQueryList = new ArrayList<UVSQuery>();¤		List<UVSQuestDAO> uvsQuestDAOList = DocCardManager.Factory.get().getUvsQueryByStates(UVSStateMachine.ST_ON_ACCEPT_IN_UO.getSortValue() + "", spaceKey);¤		for(UVSQuestDAO uvsQuestDAO : uvsQuestDAOList){¤			Date prevDate = uvsQuestDAO.getPage().getLastModificationDate();¤			Page prevPage = null;¤			UVSQuestDAO prevUvsQuery = uvsQuestDAO;¤			UVSQuestDAO prevUvsQueryWithPrevState = null;¤//äàòà ñìåíû ôàçû íå îáÿçàòåëüíî â ïîñëåäíåé âåðñèè çàïðîñà¤			do{¤				prevUvsQueryWithPrevState = prevUvsQuery;¤				prevPage = (Page)ContainerManager.Factory.get().getPageManager().getPreviousVersion(prevUvsQuery.getPage());¤				prevUvsQuery = UVSQuestDAO.get(prevPage.getId());¤				¤			}while(prevUvsQuery.getState() != uvsQuestDAO.getPrevState());¤			if(prevUvsQueryWithPrevState != null){¤				prevDate = prevUvsQueryWithPrevState.getPage().getLastModificationDate();¤			}¤//âû÷èñëÿåì äàòó ïðèìåðíîãî çàêðûòèÿ çàïðîñà¤			Date curDate = getDateClosedRequest();¤			if(curDate.after(prevDate)){¤				UVSQuery uvsQuery = UVSQuery.Factory.getForSystemLogic(uvsQuestDAO.getId());¤				uvsQueryList.add(uvsQuery);¤			}¤		}¤		return uvsQueryList;¤	}¤	¤	private Date getDateClosedRequest(){¤		int countDays = 1;¤		Date curDate = new Date();¤		Calendar calendar = Calendar.getInstance();¤		calendar.setTime(curDate);¤		if(calendar.get(calendar.DAY_OF_WEEK) == calendar.MONDAY){¤			countDays = 3;¤		}¤		calendar.set(Calendar.DAY_OF_MONTH, calendar.get(Calendar.DAY_OF_MONTH) - countDays);¤		curDate.setTime(calendar.getTimeInMillis());¤		return curDate;¤	}¤	¤	private void closeUvsQueries(List<UVSQuery> uvsQuestDAOList){¤		for (UVSQuery uvsQuery : uvsQuestDAOList) {¤			try {¤				uvsQuery.postEvent(UVSStateMachine.EV_HAS_DOC.getGuid());¤				uvsQuery.commit();¤			} catch (SaveFailed e) {¤				Logs.LOG_SEX(e);¤			} catch (NotStarted e) {¤				Logs.LOG_SEX(e);¤			} catch (StateNotChanged e) {¤				Logs.LOG_SEX(e);¤			} catch (ValidationFailed e) {¤				Logs.LOG_SEX(e);¤			} catch (PreEnterFailed e) {¤				Logs.LOG_SEX(e);¤			} catch (PreExitFailed e) {¤				Logs.LOG_SEX(e);¤			}¤		}¤	}¤	¤		¤¤	private Session getSession(){¤    	return ContainerManager.Factory.get().getSession();¤    }¤	¤	public final static String DATE_OF_SENDING_EMAIL_FOR_EXTERNAL_AUTHORS_JOB = "UVSQueryManagerImpl.DateOfSendingEmailForExternalAuthorsJob";¤	public final static String DATE_OF_SENDING_EMAIL_JOB_FORMAT = "dd.MM.yyyy HH:mm:ss";¤¤	public final static String DATE_OF_SENDING_EMAIL_ADD_DOC_CARD_WITH_INTERNET_JOB = "UVSQueryManagerImpl.DateOfSendingEmailAddDocCardsWithInternetJob";¤¤	¤	private static Long LAST_UVSQUERY_NUMBER = 0l;¤¤	private List<UVSQuestDAO> getUvsQueriesInAcceptInUOWithAttaches(String spaceKey){¤		List<UVSQuestDAO> uvsQueries = new ArrayList<UVSQuestDAO>();¤		String sQuery = ¤			"select req  from UVSQuestDAO as req, Labelling as l where"¤			+ " req.page.contentStatus='current'"¤			+ " and req.id = l.content.id and l.label.name IN ('rt_uo_query', 'rt_current_doc', 'rt_uo_current_doc')"¤			+ " and req.state = " + UVSStateMachine.ST_ON_ACCEPT_IN_UO.getSortValue()¤			+ " and req.page.space.key='" + spaceKey + "'" ¤			//+ " and req.copy.class = PaperCopy" //â ST_ON_ACCEPT_IN_UO îòñòàèâàþòñÿ è çàïðîñû, äëÿ êîòîðûõ íå íàçíà÷åí ÐÏ, ïîýòîìó íóæíî ÷òî áû îòîñëàòü äàëüøå¤			+ " and 0 < (select count(a.id) from Attachment as a WHERE a.content.id = req.id)";¤		try{¤			Query q = getSession().createQuery(sQuery);¤			uvsQueries = (List<UVSQuestDAO>)q.list();¤		} catch (HibernateException e) {¤			Logs.LOG_SEX(e);¤		}¤		return uvsQueries;¤	}¤	¤	public static List<AbstractEvent> eventsForDocCardChanges_ = null;¤	¤	public static MailValidator[] makeValidatorForMailForDiscardedExternalAuthors () {¤		   return new MailValidator[] {¤				   new ValidateSizeAttachmentForDiscardedUoQuery()¤		   };¤	}			   ¤¤	public static MailValidator[] makeValidatorForMailForClosedForExternalAuthors () {¤		   return new MailValidator[] {¤				   new ValidateSizeAttachment()¤		   };¤	}			   ¤¤	protected StringBuffer executeValidatorsForDiscarded(Page page){¤		StringBuffer messages = new StringBuffer();¤		for (MailValidator validator: makeValidatorForMailForDiscardedExternalAuthors()) {¤			String validateMessage = validator.validate(page);¤			if(validateMessage != null){¤				messages.append(validateMessage);¤			}¤		}¤		return messages;¤	}¤¤	protected StringBuffer executeValidatorsForClosed(Page page){¤		StringBuffer messages = new StringBuffer();¤		for (MailValidator validator: makeValidatorForMailForClosedForExternalAuthors()) {¤			String validateMessage = validator.validate(page);¤			if(validateMessage != null){¤				messages.append(validateMessage);¤			}¤		}¤		return messages;¤	}¤/*¤	public void attachPaperFiles (final java.util.List<File> files) {¤		for(File file : files){¤			attachFileInUvsQuery(file);¤		}¤	}¤¤*/¤	//#UC END# *4C52CCA801D3_CUSTOM_METHODS_AND_DATA*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ApplyedGens"
		    value      	"All")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"19022881021")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Factory auto reg"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Factory default impl"
		    value      	"true")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Servant Pool"
		    value      	"none")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"debug log"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"factory priority"
		    value      	"0")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"local supervisor"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"need UC"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"singleton"
		    value      	"false"))
	    quid       	"4C52CCA801D3"
	    documentation 	"UVSQueryManagerImpl"
	    stereotype 	"Servant"
	    superclasses 	(list inheritance_relationship_list
		(object Inheritance_Relationship
		    quid       	"4C52CCC50057"
		    supplier   	"Logical View::MDProcess::ConfluenceMDChange::RequestsImpl::AbstractRequestManagerS"
		    quidu      	"48EC4EA70206"))
	    realized_interfaces 	(list realize_rel_list
		(object Realize_Relationship
		    quid       	"4C52CCB60004"
		    supplier   	"Logical View::MDProcess::DocCardChange::Entities::UVSQueryManager"
		    quidu      	"4C52CB380231"))
	    language   	"MDA Generator")
	(object Class "DocCardImpl"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/DocCardChange/EntitiesImpl/DocCardImpl.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"WikiPageID (wiki)"
		    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Ìîäåëü ïðîåêòà "MDProcess"/DocCardChange/EntitiesImpl/DocCardImpl|4C52CD3503D2
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (wiki)"
		    value      	"wiki")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (fctr.java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/DocCardChange/EntitiesImpl/DocCardImplFactoryImpl.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (fctr.java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CD3503D2_CUSTOM_IMPORT*"
		    value      	"//#UC START# *4C52CD3503D2_CUSTOM_IMPORT*¤import ru.garant.MDProcess.ConfluenceMDChange.Requests.CanNotStore;¤import ru.garant.MDProcess.ConfluencePlugins.CommonVelocityContext.GlobalHelper;¤import ru.garant.MDProcess.DocCardChange.DocCardChangeDAO.DocTypeDAO;¤import ru.garant.MDProcess.DocCardChange.DocCardCommon.DocCardManager;¤import ru.garant.MDProcess.DocCardChange.DocCardCommon.PartnerManager;¤import ru.garant.MDProcess.DocCardChange.DocCardCommonImpl.CachedPartnerManager;¤import ru.garant.MDProcess.DocCardChange.DocCardSupport.CreateUvsQuery;¤import ru.garant.MDProcess.DocCardChange.DocCardSupport.DpoUvsHelper;¤import ru.garant.MDProcess.DocCardChange.DocCardChangeDAO.UVSQuestDAO;¤import ru.garant.MDProcess.DocCardChange.DocCardChangeDAO.Partner;¤¤import java.util.*;¤¤import java.util.regex.*;¤¤import org.apache.commons.beanutils.PropertyUtils;¤import org.apache.commons.collections.CollectionUtils;¤import org.apache.commons.lang.StringUtils;¤import net.sf.hibernate.HibernateException;¤import net.sf.hibernate.Session;¤¤import ru.garant.shared.GCL.DateUtils;¤¤import com.atlassian.confluence.labels.Label;¤import com.atlassian.confluence.user.AuthenticatedUserThreadLocal;¤import com.atlassian.confluence.core.DefaultSaveContext;¤import com.atlassian.confluence.core.SaveContext;¤//#UC END# *4C52CD3503D2_CUSTOM_IMPORT*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CD3503D2_CUSTOM_CLASS_DEFINITION*"
		    value      	"//#UC START# *4C52CD3503D2_CUSTOM_CLASS_DEFINITION*¤//#UC END# *4C52CD3503D2_CUSTOM_CLASS_DEFINITION*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CD3503D2_CUSTOM_METHODS_AND_DATA*"
		    value      	(value Text 
|//#UC START# *4C52CD3503D2_CUSTOM_METHODS_AND_DATA*¤	private long id_ = 0; ¤	private GarDocDAO proxy_ = null;¤	private GarDocDAO getProxy() {¤		if(proxy_ == null){¤			try {¤				GarDocDAO garDocDAO = getPersistenProxy();¤				proxy_ = garDocDAO.clone();¤				proxy_.setPage((Page)proxy_.getPage().clone());¤			} catch (HibernateException e) {¤				Logs.LOG_E("DocCardImpl: " + e.getMessage());¤				throw new IllegalStateException (e.getMessage());¤			} catch (CloneNotSupportedException ex) {¤				String pcn = getProxy().getClass().getName();¤				final String msg = "DocCardImpl::getProxy - can't clone proxy (class='" + pcn + "')";¤				Logs.LOG_E(msg);¤				throw new RuntimeException(msg, ex);¤			} ¤		}¤		return proxy_;¤	}¤	¤	/*private void removeCopies(java.util.Set<CopyDAO> copies){¤		String ids = "";¤		for(CopyDAO copy : copies){¤			if(!ids.isEmpty()){¤				ids += ",";¤			}¤			ids += copy.getId() + "";¤		}¤		try {¤			Query q = getSession().createQuery("from CopyDAO as copy where copy.id in(" + ids + ")");¤			List<CopyDAO> originalCopies = (List<CopyDAO>)q.list();	¤			for(CopyDAO copy : originalCopies){¤				removeCopy(copy);¤			}¤		}¤		catch (HibernateException e) {¤			Logs.LOG_SEX(e);¤		}¤	}*/¤	¤	private Session getSession () {¤		return ContainerManager.Factory.get().getSession();¤	}¤¤¤	//èçáåãàåì flush, êîòîðûé òîðìîçèò¤	private GarDocDAO persistentProxyForJustCreatedDocCard_ = null; ¤	private GarDocDAO getPersistenProxy () throws HibernateException {¤		if (persistentProxyForJustCreatedDocCard_ == null) {¤			return GarDocDAO.get(getId());¤		}¤		return persistentProxyForJustCreatedDocCard_;¤	}¤	¤	protected void store () throws CanNotStore {¤		try{¤			Session session = getSession();¤			GarDocDAO original = getPersistenProxy ();¤			if (original == null) { // request is new¤				throw new IllegalStateException ("store for new GarDocDAO not allowed");¤			}else{¤				Page originalPage = original.getPage();¤				String oldPageText = originalPage.getContent();¤				String newPageText = changePageContent(getPage().getContent());¤				if (false == oldPageText.equals(newPageText) || originalPage.getParent().getId() != getPage().getParent().getId()) {¤					getPage().setContent(newPageText);¤					¤					Page originalClonedPage = (Page) originalPage.clone();¤					Page clonedPageWithChanges = getPage();					¤					originalPage.setTitle(clonedPageWithChanges.getTitle());¤					originalPage.setContent(clonedPageWithChanges.getContent());¤					if(originalPage.getParent().getId() != getPage().getParent().getId()){¤						originalPage.setParent(clonedPageWithChanges.getParent());¤						if(originalPage.getSpace().getId() != clonedPageWithChanges.getSpace().getId()){¤							originalPage.setSpace(clonedPageWithChanges.getSpace());¤						}¤					}¤					ContainerManager.Factory.get().getPageManager().saveContentEntity(originalPage, originalClonedPage, makeSaveContext());		¤					¤					GarDocDAO prevVer = new GarDocDAO();¤					PropertyUtils.copyProperties(prevVer, original);¤					prevVer.setId(0);¤					prevVer.setCopies(new HashSet<CopyDAO> ());¤					prevVer.setAdditionalDocIssuers(new ArrayList<Long> ());¤					prevVer.setAdditionalNumbers(new ArrayList<String> ());¤					prevVer.setLinkedTopics(new ArrayList<String> ());¤					prevVer.setPage(originalClonedPage);¤					¤					session.save (prevVer);¤					¤					GarDocDAO clonedWithChanges = getProxy();¤					PropertyUtils.copyProperties(original, clonedWithChanges);¤					original.setPage(originalPage);¤					session.saveOrUpdate(original);¤					¤					List<UVSQuestDAO> uvsQueries = DocCardManager.Factory.get().getUvsQueryForDocCard(originalPage.getId());¤					for (UVSQuestDAO p : uvsQueries) {¤						ContainerManager.Factory.get().getIndexer().reIndex(p.getPage());¤					}¤					proxy_ = null;¤				}¤			}¤		} catch (Exception e) {¤			Logs.LOG_SEX(e);¤			com.atlassian.xwork.interceptors.XWorkTransactionInterceptor.currentTransactionStatus().setRollbackOnly();			¤			throw new CanNotStore (e);¤		}¤	}¤¤	public void setId(long id){¤		id_ = id;¤	}¤¤	public long getId(){¤		return id_;¤	}¤¤	private static SaveContext makeSaveContext () {¤		SaveContext sc = new DefaultSaveContext();¤		sc.setMinorEdit(false);¤		return sc;¤	}¤¤	private static final String EXCERPT_REGEXP = "\\{excerpt\\:hidden=true\\}.*\\{excerpt\\}";¤	private static final String EXCERPT_MACRO_START = "{excerpt:hidden=true}";¤	private static final String EXCERPT_MACRO_END = "{excerpt}";¤	¤	public String changePageContent (String text) {¤		String caption = EXCERPT_MACRO_START + "\r\n";¤		caption += "Íàçâàíèå: " + getName() + "\r\n";¤		caption += "Äîïîëíèòåëüíûå èñòî÷íèêè: " + DpoUvsHelper.listToString(getAdditionalDocIssuers()) + "\r\n";¤		caption += "Òèï: " + getTypeWithParent() + "\r\n";¤		caption += "Íîìåð: " + getNumber() + "\r\n";¤		caption += "Äîïîëíèòåëüíûå íîìåðà: " + DpoUvsHelper.listToString(getAdditionalNumbers()) + "\r\n";¤		caption += "Äàòà: " + DateUtils.formatDdMMyyyDate(getCreationDate()) + "\r\n";¤		caption += ¤			"Íîìåð ÌÞ: "¤			+ ((getRegistrationNumber() == null) ? "íåò äàííûõ" : getRegistrationNumber())¤			+ "\r\n";¤		caption += "Äàòà ÌÞ: " + DateUtils.formatDdMMyyyDate(getRegistrationDate()) + "\r\n";¤		caption +=¤			"Äîñòóïíîñòü: "¤			+ ((getRestrictedStatus() == 0) ? "íåò äàííûõ": DpoUvsHelper.getRestrctedStatusNamesList().get(getRestrictedStatus()-1))¤			+ "\r\n"¤		;¤		caption += "Ñòàòóñ: " + getIsConnected().name() + "\r\n";¤		caption += "Ñðî÷íîñòü: " + getInstancy().name() + "\r\n";¤		caption += "Äàòà âêëþ÷åíèÿ â âåðñèþ: " + DateUtils.formatDdMMyyyDate(getIncludeInVersionDate()) + "\r\n";¤		if(getBlocks().size() > 0){¤			caption += "Áàçà: " + DpoUvsHelper.getBlockNames(getBlocks()) + "\r\n";¤		}¤		if(getInternet()){¤			caption += "Èíòåðíåò åñòü." + "\r\n";¤		}else{¤			caption += "Èíòåðíåòà íåò." + "\r\n";¤		}¤		¤		caption += "Òîïèê: " + getTopic() + "\r\n";¤		caption += "Ñâÿçàííûå òîïèêè: " + DpoUvsHelper.listToString(getLinkedTopics()) + "\r\n";¤		String copyM = getCopiesMessage();¤		caption += "Íàëè÷èå: " +  ((copyM == null) ? "êîïèè íå óêàçàíû": copyM) + "\r\n";¤		caption += "\r\n" + EXCERPT_MACRO_END;¤		if (text.startsWith(EXCERPT_MACRO_START)) {¤			final String escapedText = Matcher.quoteReplacement(caption);¤			return Pattern.compile(EXCERPT_REGEXP, Pattern.DOTALL).matcher(text).replaceFirst(escapedText);¤		}  ¤		return caption + "\r\n" + text;¤	}¤¤	interface PostCommitAction {¤		public void execute ();¤	};¤	¤	public void addLabelConnectedStatus(ConnectedStatus isConnected){¤		List<Label> labels = getPage().getLabels();¤		for(Label label : labels){¤			if(label.getName().contains("gardoc_cs_")){¤				ContainerManager.Factory.get().getLabelManager().removeLabel(getPage(), label);¤			}¤		}¤		¤		if (isConnected != null && isConnected.equals(ConnectedStatus.IS_CONNECTED)) {¤			ContainerManager.Factory.get().getLabelManager().addLabel(getProxy().getPage(), "gardoc_cs_connected");¤		} else if (isConnected != null && isConnected.equals(ConnectedStatus.IS_NOT_CONNECTED)) {¤			ContainerManager.Factory.get().getLabelManager().addLabel(getProxy().getPage(), "gardoc_cs_not_connected");¤		} else if (isConnected != null && isConnected.equals(ConnectedStatus.IS_CONNECTED_IN_VERSION)) {¤			ContainerManager.Factory.get().getLabelManager().addLabel(getProxy().getPage(), "gardoc_cs_connected_in_version");¤		} ¤	}¤	¤	¤	List<PostCommitAction> postCommitActions_ = new ArrayList<PostCommitAction>();¤	¤	private String getTypeWithParent(){¤		if(getProxy().getType() == null){¤			return "ÍÅ ÓÊÀÇÀÍ";¤		}¤		String parentName = "";¤		if(StringUtils.isNotEmpty(getProxy().getType().getPath())){¤			int index = getProxy().getType().getPath().toUpperCase().indexOf(getProxy().getType().getName());¤			if(index > 0){¤				parentName = "[" + getProxy().getType().getPath().substring(0, index - 1) + "]"; ¤			}		¤		}¤		return parentName + getProxy().getType().getName();¤	}¤	¤	¤	public static boolean jUnitHackForNoCommitExecution = false;  ¤	//#UC END# *4C52CD3503D2_CUSTOM_METHODS_AND_DATA*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"19022881531"))
	    quid       	"4C52CD3503D2"
	    documentation 	"DocCardImpl"
	    stereotype 	"Servant"
	    used_nodes 	(list uses_relationship_list
		(object Uses_Relationship
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"19022881857"))
		    quid       	"4C5A8C9E00B6"
		    stereotype 	"uses"
		    supplier   	"Logical View::MDProcess::DocCardChange::DocCardChangeDAO::GarDocDAO"
		    quidu      	"4C49A45E0184"))
	    realized_interfaces 	(list realize_rel_list
		(object Realize_Relationship
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"29059212601"))
		    quid       	"4D4803240223"
		    supplier   	"Logical View::MDProcess::DocCardChange::EntitiesImpl::DocCardWithPersistentState"
		    quidu      	"4D48029B022E")
		(object Realize_Relationship
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"30073660518"))
		    quid       	"4D48071A03A2"
		    supplier   	"Logical View::MDProcess::DocCardChange::Entities::DocCard"
		    quidu      	"4C3713F60316"))
	    language   	"MDA Generator")
	(object Class "UVSQueryManagerGetter"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"WikiPageID (wiki)"
		    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Ìîäåëü ïðîåêòà "MDProcess"/DocCardChange/EntitiesImpl/UVSQueryManagerGetter|4C52CD830153
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (wiki)"
		    value      	"wiki")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (fctr.java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/DocCardChange/EntitiesImpl/UVSQueryManagerGetterFactoryImpl.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (fctr.java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/DocCardChange/EntitiesImpl/UVSQueryManagerGetter.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CD830153_CUSTOM_IMPORT*"
		    value      	"//#UC START# *4C52CD830153_CUSTOM_IMPORT*¤import ru.garant.MDProcess.DocCardChange.Entities.UVSQueryManager;¤//#UC END# *4C52CD830153_CUSTOM_IMPORT*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CD830153_CUSTOM_CLASS_DEFINITION*"
		    value      	"//#UC START# *4C52CD830153_CUSTOM_CLASS_DEFINITION*¤//#UC END# *4C52CD830153_CUSTOM_CLASS_DEFINITION*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52CD830153_CUSTOM_METHODS_AND_DATA*"
		    value      	(value Text 
|//#UC START# *4C52CD830153_CUSTOM_METHODS_AND_DATA*¤	//#UC END# *4C52CD830153_CUSTOM_METHODS_AND_DATA*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"19022882419"))
	    quid       	"4C52CD830153"
	    documentation 	"UVSQueryManagerGetter"
	    stereotype 	"Servant"
	    realized_interfaces 	(list realize_rel_list
		(object Realize_Relationship
		    quid       	"4C52CDBB0123"
		    supplier   	"Logical View::MDProcess::ConfluenceMDChange::Requests::RequestManagerGetter"
		    quidu      	"48E073900264"))
	    class_attributes 	(list class_attribute_list
		(object ClassAttribute "key"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ValueInitialized"
			    value      	"true")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ResolvedTypeGuid"
			    value      	"452257A0036F")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"19022882697"))
		    quid       	"4C52CF9B01E4"
		    documentation 	"key : a-string = uvs_query"
		    stereotype 	"switch"
		    type       	"a-string"
		    quidu      	"452257A0036F"
		    initv      	"uvs_query"
		    exportControl 	"Public"
		    Containment 	"By Value"))
	    language   	"MDA Generator")
	(object Class "UVSQueryNotificationGatewayImpl"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (fctr.java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/DocCardChange/EntitiesImpl/UVSQueryNotificationGatewayImplFactoryImpl.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (fctr.java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/DocCardChange/EntitiesImpl/UVSQueryNotificationGatewayImpl.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"WikiPageID (wiki)"
		    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Ìîäåëü ïðîåêòà "MDProcess"/DocCardChange/EntitiesImpl/UVSQueryNotificationGatewayImpl|4C52DE4B0294
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (wiki)"
		    value      	"wiki")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52DE4B0294_CUSTOM_IMPORT*"
		    value      	"//#UC START# *4C52DE4B0294_CUSTOM_IMPORT*¤import com.atlassian.confluence.labels.Label;¤import com.atlassian.confluence.pages.Attachment;¤import com.atlassian.confluence.pages.Comment;¤import com.atlassian.confluence.pages.Page;¤import com.atlassian.confluence.setup.bandana.ConfluenceBandanaContext;¤import com.atlassian.gzipfilter.org.apache.commons.lang.StringUtils;¤import ru.garant.MDProcess.ArchiGate.Images.ImagesCreator;¤import ru.garant.MDProcess.ArchiGate.ImagesImpl.DocCardRemoteHelper;¤import ru.garant.MDProcess.ConfluencePlugins.CommonVelocityContext.GlobalHelper;¤¤import java.util.Arrays;¤import java.util.List;¤¤import javax.mail.internet.MimeMultipart;¤¤import ru.garant.MDProcess.ConfluenceMDChange.MdcCommon.MDCManager;¤import ru.garant.MDProcess.ConfluenceMDChange.Requests.sm.AbstractRequestLifeCycle.Closed;¤import ru.garant.MDProcess.ConfluenceMDChange.Requests.sm.AbstractRequestLifeCycle.Discarded;¤import ru.garant.MDProcess.DocCardChange.DocCardChangeDAO.ExternalAuthorFromHelpDeskDAO;¤import ru.garant.MDProcess.DocCardChange.DocCardChangeDAO.UVSQuestDAO;¤import ru.garant.MDProcess.DocCardChange.DocCardCommon.DPOUVSManager;¤import ru.garant.MDProcess.DocCardChange.DocCardCommon.DocCardManager;¤import ru.garant.MDProcess.DocCardChange.DocCardSupport.DpoUvsHelper;¤import ru.garant.shared.ConfluenceCore.TaskSupport.PriorityEmail;¤import ru.garant.shared.ConfluenceCore.TaskSupport.RequestPriorityEmail;¤¤import java.util.regex.Matcher;¤import java.util.regex.Pattern;¤¤//#UC END# *4C52DE4B0294_CUSTOM_IMPORT*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52DE4B0294_CUSTOM_CLASS_DEFINITION*"
		    value      	"//#UC START# *4C52DE4B0294_CUSTOM_CLASS_DEFINITION*¤//#UC END# *4C52DE4B0294_CUSTOM_CLASS_DEFINITION*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4C52DE4B0294_CUSTOM_METHODS_AND_DATA*"
		    value      	(value Text 
|//#UC START# *4C52DE4B0294_CUSTOM_METHODS_AND_DATA*¤	@Override¤	protected Email createAssignmentEmailFor(User executor, byte prevState) {¤		final Page requestPage = getRequest().getPage();¤		UVSQuery uvsQuery = (UVSQuery)getRequest();¤		Page docCardPage = uvsQuery.getDocCard().getPage();¤		final boolean assignedRepeatedly = isRequestAssignedRepeatedly(requestPage.getId(), prevState);¤		String subj = assignedRepeatedly ? getText("uvsquerynotificationgateways.returned.requests") : getText("uvsquerynotificationgateways.assigned.requests");¤		String pageAddress = ru.garant.MDProcess.ConfluencePlugins.CommonVelocityContext.GlobalHelper.getPageUrl(requestPage);¤		String body = getText("requestnotificationgateways.good.day") + ", " + executor.getFullName() + "!"¤			+ (assignedRepeatedly ? " <br> " + getText("uvsquerynotificationgateways.returned.requests") : " <br> " + getText("uvsquerynotificationgateways.assigned.requests") + ": <br> ")  ¤			+ " <ol> <li>" + "<a href=\"" + pageAddress + "\">" + requestPage.getDisplayTitle() + "</a> (" + docCardPage.getTitle() + ") </li> " + "{0}. </ol>"¤			+ " <br><br> " ¤			+ endBodyText()¤			;¤		¤		return createEmail(subj, body, executor.getEmail());¤	}¤¤¤	@Override¤	protected Email createAssignmentEmailForExternalAuthor(User prManager,¤			Observer author) {¤		// TODO Auto-generated method stub¤		return null;¤	}¤¤¤	@Override¤	protected Email createFinalEmailFor(User forUser, AbstractState state) {¤		return createUvsQueryFinalEmailFor(forUser.getFullName(), forUser.getEmail(), state);¤	}¤¤	private Email createUvsQueryFinalEmailFor(String fullName, String email, AbstractState state){¤		final Page requestPage = getRequest().getPage();¤		UVSQuery uvsQuery = (UVSQuery)getRequest();¤		Page docCardPage = uvsQuery.getDocCard().getPage();¤		¤		String subj = getText("uvsquerynotificationgateways.your.requests") + " " + stateToString(state, WordType.MALE);¤		String pageAddress = ru.garant.MDProcess.ConfluencePlugins.CommonVelocityContext.GlobalHelper.getPageUrl(requestPage);¤		String text = "";¤		if(fullName != null){¤			text = ", " + fullName;¤		}¤		String uoComment = DpoUvsHelper.getUOSummary((UVSQuery)getRequest());¤		String uoCommentText = "";¤		if(StringUtils.isNotEmpty(uoComment)){¤			uoCommentText = ", " + uoComment;¤		}¤		¤		String body = getText("requestnotificationgateways.good.day") + text + "!"¤			+ " <br> " + getText("requestnotificationgateways.next.requests") + " " + getText("uvsquerynotificationgateways.were.change.state.on.final.state") + " (" + stateToString(state, WordType.MALE) + "): <br> "¤			+ " <ol> <li>" + "<a href=\"" + pageAddress + "\">" + requestPage.getDisplayTitle() + "</a>  (" + docCardPage.getTitle() + ")" + uoCommentText + " </li> " + "{0}. </ol>"¤			+ endBodyText()¤			;¤		¤		return createEmail(subj, body, email);¤	}¤¤	@Override¤	protected MDCManager getMDCManager() {¤		// TODO Auto-generated method stub¤		return null;¤	}¤¤¤	@Override¤	protected AbstractRequest getRequest() {¤		// TODO Auto-generated method stub¤		return uvsQuery_;¤	}¤¤¤	@Override¤	protected String makeFinalEmailBodyForPrManager(String prManagerName,¤			boolean rejected) {¤		// TODO Auto-generated method stub¤		return null;¤	}¤	¤	¤	¤	@Override¤	protected String stateToString(AbstractState state, WordType type) {¤		// TODO Auto-generated method stub¤		if (state instanceof Closed) {¤			return getText("uvsquerynotificationgateways.closed") + type;¤		} else if (state instanceof Discarded) {¤			return getText("uvsquerynotificationgateways.discarded") + type;¤		} else {¤			return getText("uvsquerynotificationgateways.change") + type + " " + getText("abstractrequestnotificationgateways.in.state") + " '" + state.getName() + "'";¤		}¤	}¤/*¤	private String getMessageFromCommentForRegionQuery(Page pageUvsQuery){¤		for (long id : UVSQueryManager.Factory.get().getAllVersionIds(pageUvsQuery.getId())) {¤			UVSQuestDAO data = UVSQuestDAO.get(id);¤			if(data.getState() == UVSStateMachine.ST_DISCARDED.getSortValue() && data.getPrevState() != UVSStateMachine.ST_CLOSED.getSortValue()){¤				for(Comment comment : pageUvsQuery.getComments()){¤					if(comment.getCreationDate().equals(data.getPage().getLastModificationDate()) && comment.getLastModifierName().equals(data.getPage().getLastModifierName())){¤						return comment.getContent(); ¤					}¤				}¤			}¤		}¤		return null;¤	}¤*/	¤	private String getMessageWithDocCardProperties(DocCard docCard){¤		String docCardTitle = DpoUvsHelper.makeDocCardName (docCard);¤		String message = getText("uvsquerynotificationgateways.response.for") + " " + docCardTitle;¤		return message;¤	}¤	¤	private UVSQuery uvsQuery_ = null;¤	¤	/*private*/¤	public String makeBodyForClosedForAuthor (final Observer observer) {¤		UVSQuery uvsQuery = (UVSQuery)getRequest();¤¤		return new StringBuffer(128)¤			.append("Óâàæàåìûé(-àÿ) ").append(observer.getFullName()).append("!").append("<BR>")¤			.append("Çàïðîøåííûé Âàìè äîêóìåíò: ").append(DpoUvsHelper.makeDocCardName (uvsQuery.getDocCard())).append(" íàéäåí, ñìîòðèòå îáðàç: <a href=\"" + GlobalHelper.getPageUrl(uvsQuery.getPage()) + "\">" + uvsQuery.getPage().getTitle() + "</a>. ")¤			.append((ConnectedStatus.IS_NOT_CONNECTED != uvsQuery.getDocCard().getIsConnected()) ? getText("uvsquerynotificationgateways.document.will.connected.in.garant"): getText("uvsquerynotificationgateways.document.will.not.connected.in.garant"))¤			.append(".")¤			.toString();¤	}¤	¤	¤	private String endBodyText(){¤		return 	" " + getText("requestnotificationgateways.full.request.text.you.may.see.in.link")¤			  + " " + getText("requestnotificationgateways.dont.replay.on.this")¤			  + " " + getText("requestnotificationgateways.with.best.regards.system.mdc");¤¤	}¤	¤	private String endBodyTextForExternalAuthor(){¤		return 	" <br> " + getText("requestnotificationgateways.dont.replay.on.this")¤			  + " " + getText("requestnotificationgateways.with.best.regards.system.mdc");¤¤	}¤¤	public String makeBodyForDiscardedForAuthor(final Observer observer, String cause){¤		UVSQuery uvsQuery = (UVSQuery)getRequest();¤¤		return getText("uvsquerynotificationgateways.dear.fio") + " " + observer.getFullName() + "!"¤		+ "<br>ÎÃÂ îòêàçàë â ðîçûñêå íåîáõîäèìîãî Âàì äîêóìåíòà: "¤		+ DpoUvsHelper.makeDocCardName(¤				uvsQuery.getDocCard().getDocIssuer(), uvsQuery.getDocCard().getNumber(), uvsQuery.getDocCard().getType()¤				,  uvsQuery.getDocCard().getCreationDate(), uvsQuery.getDocCard().getName()¤		)¤		+ ". Îñíîâàíèå îòêàçà: " + cause + ".<br>";¤¤	}¤	¤	public String makeBodyForNewQueryForAuthor(ExternalAuthorFromHelpDeskDAO externalAuthor){¤		UVSQuery uvsQuery = (UVSQuery)getRequest();¤¤		return getText("uvsquerynotificationgateways.dear.fio") + " " + externalAuthor.getName() + "!"¤				+ " <br> " + getText("uvsquerynotificationgateways.made.query.search.in.ogv") ¤				+ " " + getMessageWithDocCardProperties(uvsQuery.getDocCard());¤ ¤	}¤	¤	private String emailForRozysk () {¤		final String key = "UVSQueryNotificationGatewayImpl.queueUoQueryFinalEmailForRozysk";¤		String emailRozysk = "rozysk@garant.ru";¤		String value = (String)ContainerManager.Factory.get().getBandanaManager().getValue(new ConfluenceBandanaContext(getRequest().getPage().getSpaceKey()), key);¤		if(StringUtils.isNotEmpty(value)){¤			emailRozysk = value;¤		}¤		return emailRozysk;¤	}¤	¤	static final byte EM_ERROR_MAIL = 100;¤	static final byte EM_TO_EXTERNAL_AUTHOR = 90;¤	¤¤	//#UC END# *4C52DE4B0294_CUSTOM_METHODS_AND_DATA*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"19022883324")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"DerivedImplement"
		    value      	(value Text 
|{"490073B102E7":{"need_collect_children":"true"},"4C52DB7D0257":{"need_collect_children":"true"}}
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"DerivedOverload"
		    value      	(value Text 
|{"49007415025E":{"need_collect_children":"false"}}
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ImplementSelectType"
		    value      	"all")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"OverloadSelectType"
		    value      	"include"))
	    quid       	"4C52DE4B0294"
	    documentation 	"UVSQueryNotificationGatewayImpl"
	    stereotype 	"Servant"
	    superclasses 	(list inheritance_relationship_list
		(object Inheritance_Relationship
		    quid       	"4C52DE670320"
		    supplier   	"Logical View::MDProcess::ConfluenceMDChange::RequestsImpl::AbstractRequestNotificationGatewayS"
		    quidu      	"490074B702B8"))
	    realized_interfaces 	(list realize_rel_list
		(object Realize_Relationship
		    quid       	"4C52DE600383"
		    supplier   	"Logical View::MDProcess::DocCardChange::Entities::UVSQueryNotificationGateway"
		    quidu      	"4C52DB7D0257"))
	    language   	"MDA Generator")
	(object Class "DocCardPermissionManagerImpl"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"10108428661")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (fctr.java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/DocCardChange/EntitiesImpl/DocCardPermissionManagerImplFactoryImpl.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (fctr.java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/DocCardChange/EntitiesImpl/DocCardPermissionManagerImpl.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4CAC2399037A_CUSTOM_IMPORT*"
		    value      	"//#UC START# *4CAC2399037A_CUSTOM_IMPORT*¤import ru.garant.MDProcess.DocCardChange.DocCardChangeDAO.UVSQuestDAO;¤import ru.garant.MDProcess.DocCardChange.DocCardCommon.*;¤import ru.garant.MDProcess.DocCardChange.DocCardSupport.DpoUvsHelper;¤import ru.garant.MDProcess.ConfluenceMDChange.Requests.AbstractRequest;¤¤import org.apache.axis.utils.StringUtils;¤¤import com.atlassian.confluence.pages.AbstractPage;¤import com.atlassian.user.Group;¤¤import java.util.*;¤//#UC END# *4CAC2399037A_CUSTOM_IMPORT*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4CAC2399037A_CUSTOM_CLASS_DEFINITION*"
		    value      	"//#UC START# *4CAC2399037A_CUSTOM_CLASS_DEFINITION*¤//#UC END# *4CAC2399037A_CUSTOM_CLASS_DEFINITION*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4CAC2399037A_CUSTOM_METHODS_AND_DATA*"
		    value      	(value Text 
|//#UC START# *4CAC2399037A_CUSTOM_METHODS_AND_DATA*¤	public static boolean forGarDocSpaceOnly (final DocCard doccard) {¤		return doccard.getPage().getSpaceKey().equals("DPOUVS");¤	}¤	¤	public static boolean forGarDocSpaceOnly (final AbstractRequest req) {¤		return req.getPage().getSpaceKey().equals("DPOUVS");¤	}	¤	¤	public static boolean forGarDocSpaceOnly (final String spaceKey) {¤		return spaceKey.equals("DPOUVS");¤	}	¤¤	private boolean canEditLinkedTopics(String spaceKey, String user){¤		if (StringUtils.isEmpty(user)) {¤			return false;¤		}¤		¤		final DPOUVSManager dpoUvsManager = DPOUVSManager.Factory.get(spaceKey);¤¤		List<Group> groups = new ArrayList<Group> ();¤		groups.add(dpoUvsManager.getProjectManagersGroupsInOdUo());¤		¤		for (Group g : groups) {¤			if (¤				g != null¤				&& ContainerManager.Factory.get().getUserAccessor().hasMembership(g.getName(), user)¤			) {¤				return true;¤			}¤		}¤		return false;¤	}¤	¤	private boolean canEdit(String spaceKey, String user) {¤		if (StringUtils.isEmpty(user)) {¤			return false;¤		}¤		¤		final DPOUVSManager dpoUvsManager = DPOUVSManager.Factory.get(spaceKey);¤¤		if(dpoUvsManager.isLeader(user)){¤			return true;¤		}¤¤		List<Group> groups = new ArrayList<Group> ();¤		groups.add(dpoUvsManager.getDocsAcceptorsInUO ());¤		groups.add(dpoUvsManager.getQueryPostersGroupInUO ());¤		groups.add(dpoUvsManager.getUvsGroupWhoTransferDocsToUO ());¤		groups.add(dpoUvsManager.getUvsGroup ());¤		groups.add(dpoUvsManager.getGardocUoDocPosters());¤		groups.add(dpoUvsManager.getProjectManagersGroupsInOdUo());¤		groups.add(ContainerManager.Factory.get().getUserAccessor().getGroup(dpoUvsManager.getRegionPartnersGroups()));¤		for (Group g : groups) {¤			if (¤				g != null¤				&& ContainerManager.Factory.get().getUserAccessor().hasMembership(g.getName(), user)¤			) {¤				return true;¤			}¤		}¤		return false;¤	}¤	¤	¤	¤	@Override¤	public boolean canEdit(AbstractPage page, String user) {¤		if(UVSQuestDAO.get(page.getId()) != null){¤			return canEdit(page.getSpaceKey(), user);¤		}¤		return false;¤	}¤¤¤	@Override¤	public boolean canRemove(AbstractPage page, String user) {¤		if(DpoUvsHelper.isDocCard(page.getId()) || UVSQuestDAO.get(page.getId()) != null){¤			return canEdit(page.getSpaceKey(), user);¤		}¤		return false;¤	}	¤	//#UC END# *4CAC2399037A_CUSTOM_METHODS_AND_DATA*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"WikiPageID (wiki)"
		    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Ìîäåëü ïðîåêòà "MDProcess"/DocCardChange/EntitiesImpl/DocCardPermissionManagerImpl|4CAC2399037A
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (wiki)"
		    value      	"wiki"))
	    quid       	"4CAC2399037A"
	    documentation 	"ðåàëèçàöèÿ ìåíåäæåðà ïî ðàáîòå ñ ïðàâàìè êàðòî÷åê"
	    stereotype 	"Servant"
	    superclasses 	(list inheritance_relationship_list
		(object Inheritance_Relationship
		    quid       	"4CAC23C3037D"
		    supplier   	"Logical View::MDProcess::ConfluenceMDChange::MdcCommonImpl::AbstractMDCPermissionManagerS"
		    quidu      	"48D76133037A"))
	    realized_interfaces 	(list realize_rel_list
		(object Realize_Relationship
		    quid       	"4CAC264F0384"
		    supplier   	"Logical View::MDProcess::DocCardChange::Entities::DocCardPermissionManager"
		    quidu      	"4CAC22B20102"))
	    language   	"MDA Generator")
	(object Class "DocCardWithPersistentState"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"28922641004")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/DocCardChange/EntitiesImpl/DocCardWithPersistentState.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (fctr.java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/DocCardChange/EntitiesImpl/DocCardWithPersistentStateFactoryManager.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (fctr.java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"WikiPageID (wiki)"
		    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Ìîäåëü ïðîåêòà "MDProcess"/DocCardChange/EntitiesImpl/DocCardWithPersistentState|4D48029B022E
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (wiki)"
		    value      	"wiki"))
	    quid       	"4D48029B022E"
	    stereotype 	"LocalInterface"
	    operations 	(list Operations
		(object Operation "new_factory_op"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"30201032660")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"abstract")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4D48079A00FB_4D48079A00FB_4C52CD3503D2_BODY*"
			    value      	(value Text 
|//#UC START# *4D48079A00FB_4D48079A00FB_4C52CD3503D2_BODY*¤		//#UC END# *4D48079A00FB_4D48079A00FB_4C52CD3503D2_BODY*
			    )))
		    quid       	"4D48079A00FB"
		    stereotype 	"factory"
		    concurrency 	"Sequential"
		    opExportControl 	"Public"
		    uid        	0))
	    class_attributes 	(list class_attribute_list
		(object ClassAttribute "state"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"28960784629")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"abstract")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ValueInitialized"
			    value      	"true")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ResolvedTypeGuid"
			    value      	"4C49A45E0184")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4D4802C103D2_4C52CD3503D2_GET*"
			    value      	(value Text 
|//#UC START# *4D4802C103D2_4C52CD3503D2_GET*¤		try {¤			return getPersistenProxy();¤		} catch (Exception e) {¤			Logs.LOG_SEX(e);¤			throw new IllegalStateException(e.getMessage());¤		}¤		//#UC END# *4D4802C103D2_4C52CD3503D2_GET*
			    )))
		    quid       	"4D4802C103D2"
		    stereotype 	"readonly"
		    type       	"GarDocDAO"
		    quidu      	"4C49A45E0184"
		    exportControl 	"Public"))
	    language   	"MDA Generator")
	(object Class "UVSQueryReportManagerImpl"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"1333441993616379")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/DocCardChange/EntitiesImpl/UVSQueryReportManagerImpl.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (fctr.java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/DocCardChange/EntitiesImpl/UVSQueryReportManagerImplFactoryImpl.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (fctr.java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4F7AB5C90268_CUSTOM_IMPORT*"
		    value      	"//#UC START# *4F7AB5C90268_CUSTOM_IMPORT*¤import java.util.Date;¤import java.util.HashMap;¤import java.util.List;¤import java.util.Map;¤¤import net.sf.hibernate.HibernateException;¤import net.sf.hibernate.Query;¤//#UC END# *4F7AB5C90268_CUSTOM_IMPORT*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4F7AB5C90268_CUSTOM_CLASS_DEFINITION*"
		    value      	"//#UC START# *4F7AB5C90268_CUSTOM_CLASS_DEFINITION*¤//#UC END# *4F7AB5C90268_CUSTOM_CLASS_DEFINITION*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*4F7AB5C90268_CUSTOM_METHODS_AND_DATA*"
		    value      	(value Text 
|//#UC START# *4F7AB5C90268_CUSTOM_METHODS_AND_DATA*¤¤	private static Map<Long, Long> getCountMapa(List<Object[]> res){¤		Map<Long, Long> countByOgv = new HashMap<Long, Long>();¤		for(Object[] objs : res){¤			if(objs[0] != null){¤				long key = (Long)objs[0];¤				int value = (Integer)objs[1];¤¤				if(key > 0){¤					Object existValue = countByOgv.get(key);¤					if(existValue != null){¤						value += (Long) existValue;¤					}¤					countByOgv.put(key, (long)value);¤				}¤			}¤		}¤		return countByOgv;¤	}	¤	//#UC END# *4F7AB5C90268_CUSTOM_METHODS_AND_DATA*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"WikiPageID (wiki)"
		    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Ìîäåëü ïðîåêòà "MDProcess"/DocCardChange/EntitiesImpl/UVSQueryReportManagerImpl|4F7AB5C90268
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (wiki)"
		    value      	"wiki"))
	    quid       	"4F7AB5C90268"
	    stereotype 	"Servant"
	    realized_interfaces 	(list realize_rel_list
		(object Realize_Relationship
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"1333442017737760"))
		    quid       	"4F7AB5E102E0"
		    supplier   	"Logical View::MDProcess::DocCardChange::Entities::UVSQueryReportManager"
		    quidu      	"4F7AB5880389"))
	    language   	"MDA Generator")
	(object Class "ValidateSizeAttachment"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"1354527898549736")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/DocCardChange/EntitiesImpl/ValidateSizeAttachment.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*50BC749A0225_CUSTOM_IMPORT*"
		    value      	"//#UC START# *50BC749A0225_CUSTOM_IMPORT*¤import ru.garant.MDProcess.DocCardChange.DocCardSupport.DpoUvsHelper;¤import com.atlassian.confluence.pages.Attachment;¤//#UC END# *50BC749A0225_CUSTOM_IMPORT*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*50BC749A0225_CUSTOM_CLASS_DEFINITION*"
		    value      	"//#UC START# *50BC749A0225_CUSTOM_CLASS_DEFINITION*¤//#UC END# *50BC749A0225_CUSTOM_CLASS_DEFINITION*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*50BC749A0225_CUSTOM_METHODS_AND_DATA*"
		    value      	(value Text 
|//#UC START# *50BC749A0225_CUSTOM_METHODS_AND_DATA*¤	//#UC END# *50BC749A0225_CUSTOM_METHODS_AND_DATA*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"WikiPageID (wiki)"
		    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Ìîäåëü ïðîåêòà "MDProcess"/DocCardChange/EntitiesImpl/ValidateSizeAttachment|50BC749A0225
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (wiki)"
		    value      	"wiki"))
	    quid       	"50BC749A0225"
	    documentation 	"ïðîâåðÿåò ðàçìåð àòòà÷à"
	    stereotype 	"Servant"
	    realized_interfaces 	(list realize_rel_list
		(object Realize_Relationship
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"1354527935693402"))
		    quid       	"50BC74BF02B5"
		    supplier   	"Logical View::MDProcess::DocCardChange::Entities::MailValidator"
		    quidu      	"50BC44C8014C"))
	    language   	"MDA Generator")
	(object Class "ValidateSizeAttachmentForDiscardedUoQuery"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"1354516090369448")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/DocCardChange/EntitiesImpl/ValidateSizeAttachmentForDiscardedUoQuery.java")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (java)"
		    value      	"file")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*50BC467A0171_CUSTOM_IMPORT*"
		    value      	"//#UC START# *50BC467A0171_CUSTOM_IMPORT*¤import com.atlassian.confluence.pages.Attachment;¤import ru.garant.MDProcess.DocCardChange.DocCardSupport.DpoUvsHelper;¤//#UC END# *50BC467A0171_CUSTOM_IMPORT*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*50BC467A0171_CUSTOM_CLASS_DEFINITION*"
		    value      	"//#UC START# *50BC467A0171_CUSTOM_CLASS_DEFINITION*¤//#UC END# *50BC467A0171_CUSTOM_CLASS_DEFINITION*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"java:*50BC467A0171_CUSTOM_METHODS_AND_DATA*"
		    value      	(value Text 
|//#UC START# *50BC467A0171_CUSTOM_METHODS_AND_DATA*¤	//#UC END# *50BC467A0171_CUSTOM_METHODS_AND_DATA*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"DerivedImplement"
		    value      	"{}")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"DerivedOverload"
		    value      	(value Text 
|{"50BC45310279":{"need_collect_children":"false"}}
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ImplementSelectType"
		    value      	"all")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"OverloadSelectType"
		    value      	"include")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"WikiPageID (wiki)"
		    value      	(value Text 
|MDProcess,key:MDP,guid:456C0DD70110/Home/Ìîäåëü ïðîåêòà "MDProcess"/DocCardChange/EntitiesImpl/ValidateSizeAttachmentForDiscardedUoQuery|50BC467A0171
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (wiki)"
		    value      	"wiki"))
	    quid       	"50BC467A0171"
	    documentation 	"ïðîâåðÿåò ðàçìåð àòòà÷à ó îòêëîíåííûõ çàïðîñîâ uo_query"
	    stereotype 	"Servant"
	    superclasses 	(list inheritance_relationship_list
		(object Inheritance_Relationship
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"1354527950232628"))
		    quid       	"50BC74CE00E8"
		    supplier   	"Logical View::MDProcess::DocCardChange::EntitiesImpl::ValidateSizeAttachment"
		    quidu      	"50BC749A0225"))
	    realized_interfaces 	(list realize_rel_list
		(object Realize_Relationship
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"1354527957143441"))
		    quid       	"50BC74D5008F"
		    supplier   	"Logical View::MDProcess::DocCardChange::Entities::MailValidator"
		    quidu      	"50BC44C8014C"))
	    language   	"MDA Generator"))
    logical_presentations 	(list unit_reference_list
	(object ClassDiagram "Main"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsChanged"
		    value      	""))
	    quid       	"4C52C358001B"
	    title      	"Main"
	    zoom       	100
	    max_height 	28350
	    max_width  	21600
	    origin_x   	100
	    origin_y   	555
	    items      	(list diagram_item_list
		(object ClassView "Class" "Logical View::MDProcess::ConfluenceMDChange::RequestsImpl::AbstractRequestS" @1
		    ShowCompartmentStereotypes 	TRUE
		    SuppressAttribute 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    location   	(993, 756)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	TRUE
			underline  	FALSE
			strike     	FALSE
			color      	705290
			default_color 	FALSE)
		    label      	(object ItemLabel
			Parent_View 	@1
			location   	(796, 724)
			nlines     	1
			max_width  	394
			justify    	0
			label      	" AbstractRequestS")
		    stereotype 	(object ItemLabel
			Parent_View 	@1
			location   	(796, 674)
			anchor     	10
			nlines     	1
			max_width  	394
			justify    	0
			label      	"<<Servant>>")
		    icon_style 	"Label"
		    line_color 	705290
		    fill_color 	16777215
		    quidu      	"4757F83900B2"
		    width      	412
		    height     	188
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::ConfluenceMDChange::RequestsImpl::AbstractRequestManagerS" @2
		    ShowCompartmentStereotypes 	TRUE
		    SuppressAttribute 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    location   	(1977, 1521)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	TRUE
			underline  	FALSE
			strike     	FALSE
			color      	705290
			default_color 	FALSE)
		    label      	(object ItemLabel
			Parent_View 	@2
			location   	(1712, 1493)
			nlines     	1
			max_width  	530
			justify    	0
			label      	"AbstractRequestManagerS")
		    stereotype 	(object ItemLabel
			Parent_View 	@2
			location   	(1712, 1443)
			anchor     	10
			nlines     	1
			max_width  	530
			justify    	0
			label      	"<<Servant>>")
		    icon_style 	"Label"
		    line_color 	705290
		    fill_color 	16777215
		    quidu      	"48EC4EA70206"
		    width      	548
		    height     	180
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::EntitiesImpl::UVSQueryImpl" @3
		    ShowCompartmentStereotypes 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(1425, 1038)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@3
			location   	(1275, 1009)
			fill_color 	13434879
			nlines     	1
			max_width  	300
			justify    	0
			label      	"UVSQueryImpl")
		    stereotype 	(object ItemLabel
			Parent_View 	@3
			location   	(1275, 959)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	300
			justify    	0
			label      	"<<Servant>>")
		    icon_style 	"Label"
		    fill_color 	12842435
		    quidu      	"4C52CC2C0221"
		    width      	318
		    height     	182
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::ConfluenceMDChange::RequestsImpl::AbstractRequestPermissionManagerS" @4
		    ShowCompartmentStereotypes 	TRUE
		    SuppressAttribute 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    location   	(543, 1530)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	TRUE
			underline  	FALSE
			strike     	FALSE
			color      	705290
			default_color 	FALSE)
		    label      	(object ItemLabel
			Parent_View 	@4
			location   	(180, 1502)
			nlines     	1
			max_width  	726
			justify    	0
			label      	"AbstractRequestPermissionManagerS")
		    stereotype 	(object ItemLabel
			Parent_View 	@4
			location   	(180, 1452)
			anchor     	10
			nlines     	1
			max_width  	726
			justify    	0
			label      	"<<Servant>>")
		    icon_style 	"Label"
		    line_color 	705290
		    fill_color 	16777215
		    quidu      	"48EB5A1901CF"
		    width      	744
		    height     	180
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::Entities::UVSQueryManager" @5
		    ShowCompartmentStereotypes 	TRUE
		    SuppressAttribute 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    location   	(2382, 1218)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	16714250
			default_color 	FALSE)
		    label      	(object ItemLabel
			Parent_View 	@5
			location   	(2189, 1190)
			nlines     	1
			max_width  	386
			justify    	0
			label      	"UVSQueryManager")
		    stereotype 	(object ItemLabel
			Parent_View 	@5
			location   	(2189, 1140)
			anchor     	10
			nlines     	1
			max_width  	386
			justify    	0
			label      	"<<Interface>>")
		    icon       	"Interface"
		    icon_style 	"Label"
		    line_color 	16714250
		    fill_color 	16777215
		    quidu      	"4C52CB380231"
		    width      	404
		    height     	180
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::Entities::UVSQueryPermissionManager" @6
		    ShowCompartmentStereotypes 	TRUE
		    SuppressAttribute 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    location   	(1074, 1272)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	16714250
			default_color 	FALSE)
		    label      	(object ItemLabel
			Parent_View 	@6
			location   	(777, 1244)
			nlines     	1
			max_width  	594
			justify    	0
			label      	"UVSQueryPermissionManager")
		    stereotype 	(object ItemLabel
			Parent_View 	@6
			location   	(777, 1194)
			anchor     	10
			nlines     	1
			max_width  	594
			justify    	0
			label      	"<<Interface>>")
		    icon       	"Interface"
		    icon_style 	"Label"
		    line_color 	16714250
		    fill_color 	16777215
		    quidu      	"4C52CAC1020C"
		    width      	612
		    height     	180
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::EntitiesImpl::UVSQueryPermissionManagerImpl" @7
		    ShowCompartmentStereotypes 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(1317, 1740)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@7
			location   	(989, 1711)
			fill_color 	13434879
			nlines     	1
			max_width  	656
			justify    	0
			label      	"UVSQueryPermissionManagerImpl")
		    stereotype 	(object ItemLabel
			Parent_View 	@7
			location   	(989, 1661)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	656
			justify    	0
			label      	"<<Servant>>")
		    icon_style 	"Label"
		    fill_color 	12842435
		    quidu      	"4C52CC7F0158"
		    width      	674
		    height     	182
		    annotation 	8
		    autoResize 	TRUE)
		(object RealizeView "" @8
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	TRUE
		    line_color 	3947680
		    quidu      	"4C52CC9902E2"
		    client     	@7
		    supplier   	@6
		    vertices   	(list Points
			(1269, 1648)
			(1120, 1362))
		    line_style 	0)
		(object InheritView "" @9
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	TRUE
		    line_color 	3947680
		    quidu      	"4C52CC9D0281"
		    client     	@7
		    supplier   	@4
		    vertices   	(list Points
			(983, 1648)
			(878, 1620))
		    line_style 	0)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::EntitiesImpl::UVSQueryManagerImpl" @10
		    ShowCompartmentStereotypes 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(2298, 1908)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@10
			location   	(2068, 1879)
			fill_color 	13434879
			nlines     	1
			max_width  	460
			justify    	0
			label      	"UVSQueryManagerImpl")
		    stereotype 	(object ItemLabel
			Parent_View 	@10
			location   	(2068, 1829)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	460
			justify    	0
			label      	"<<Servant>>")
		    icon_style 	"Label"
		    fill_color 	12842435
		    quidu      	"4C52CCA801D3"
		    width      	478
		    height     	182
		    annotation 	8
		    autoResize 	TRUE)
		(object RealizeView "" @11
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	TRUE
		    line_color 	3947680
		    quidu      	"4C52CCB60004"
		    client     	@10
		    supplier   	@5
		    vertices   	(list Points
			(2308, 1816)
			(2370, 1308))
		    line_style 	0)
		(object InheritView "" @12
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	TRUE
		    line_color 	3947680
		    quidu      	"4C52CCC50057"
		    client     	@10
		    supplier   	@2
		    vertices   	(list Points
			(2221, 1816)
			(2052, 1611))
		    line_style 	0)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::EntitiesImpl::DocCardImpl" @13
		    ShowCompartmentStereotypes 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(408, 939)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@13
			location   	(277, 911)
			fill_color 	13434879
			nlines     	1
			max_width  	262
			justify    	0
			label      	"DocCardImpl")
		    stereotype 	(object ItemLabel
			Parent_View 	@13
			location   	(277, 861)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	262
			justify    	0
			label      	"<<Servant>>")
		    icon_style 	"Label"
		    fill_color 	12842435
		    quidu      	"4C52CD3503D2"
		    width      	280
		    height     	180
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::ConfluenceMDChange::Requests::RequestManagerGetter" @14
		    ShowCompartmentStereotypes 	TRUE
		    SuppressAttribute 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    location   	(2280, 627)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	16714250
			default_color 	FALSE)
		    label      	(object ItemLabel
			Parent_View 	@14
			location   	(2037, 595)
			nlines     	1
			max_width  	486
			justify    	0
			label      	" RequestManagerGetter")
		    stereotype 	(object ItemLabel
			Parent_View 	@14
			location   	(2037, 545)
			anchor     	10
			nlines     	1
			max_width  	486
			justify    	0
			label      	"<<Interface>>")
		    icon       	"Interface"
		    icon_style 	"Label"
		    line_color 	16714250
		    fill_color 	16777215
		    quidu      	"48E073900264"
		    width      	504
		    height     	188
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::EntitiesImpl::UVSQueryManagerGetter" @15
		    ShowCompartmentStereotypes 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(2910, 825)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@15
			location   	(2532, 766)
			fill_color 	13434879
			nlines     	1
			max_width  	756
			justify    	0
			label      	"UVSQueryManagerGetter")
		    stereotype 	(object ItemLabel
			Parent_View 	@15
			location   	(2532, 716)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	756
			justify    	0
			label      	"<<Servant>>")
		    icon_style 	"Label"
		    fill_color 	12842435
		    quidu      	"4C52CD830153"
		    compartment 	(object Compartment
			Parent_View 	@15
			location   	(2532, 827)
			font       	(object Font
			    size       	10
			    face       	"Arial"
			    charSet    	204
			    bold       	FALSE
			    italics    	FALSE
			    underline  	FALSE
			    strike     	FALSE
			    color      	0
			    default_color 	TRUE)
			icon_style 	"Icon"
			fill_color 	16777215
			anchor     	2
			nlines     	2
			max_width  	756
			justify    	1)
		    width      	774
		    height     	242
		    annotation 	8
		    autoResize 	TRUE)
		(object RealizeView "" @16
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	TRUE
		    line_color 	3947680
		    quidu      	"4C52CDBB0123"
		    client     	@15
		    supplier   	@14
		    vertices   	(list Points
			(2910, 825)
			(2280, 627))
		    line_style 	0)
		(object InheritView "" @17
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	TRUE
		    line_color 	3947680
		    quidu      	"4C52CF08028E"
		    client     	@3
		    supplier   	@1
		    vertices   	(list Points
			(1287, 946)
			(1139, 850))
		    line_style 	0)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::Entities::UVSQueryNotificationGateway" @18
		    ShowCompartmentStereotypes 	TRUE
		    SuppressAttribute 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    location   	(3291, 1221)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	16714250
			default_color 	FALSE)
		    label      	(object ItemLabel
			Parent_View 	@18
			location   	(3000, 1193)
			nlines     	1
			max_width  	582
			justify    	0
			label      	"UVSQueryNotificationGateway")
		    stereotype 	(object ItemLabel
			Parent_View 	@18
			location   	(3000, 1143)
			anchor     	10
			nlines     	1
			max_width  	582
			justify    	0
			label      	"<<Interface>>")
		    icon       	"Interface"
		    icon_style 	"Label"
		    line_color 	16714250
		    fill_color 	16777215
		    quidu      	"4C52DB7D0257"
		    width      	600
		    height     	180
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::ConfluenceMDChange::RequestsImpl::AbstractRequestNotificationGatewayS" @19
		    ShowCompartmentStereotypes 	TRUE
		    SuppressAttribute 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    location   	(2811, 1524)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	TRUE
			underline  	FALSE
			strike     	FALSE
			color      	705290
			default_color 	FALSE)
		    label      	(object ItemLabel
			Parent_View 	@19
			location   	(2444, 1496)
			nlines     	1
			max_width  	734
			justify    	0
			label      	"AbstractRequestNotificationGatewayS")
		    stereotype 	(object ItemLabel
			Parent_View 	@19
			location   	(2444, 1446)
			anchor     	10
			nlines     	1
			max_width  	734
			justify    	0
			label      	"<<Servant>>")
		    icon_style 	"Label"
		    line_color 	705290
		    fill_color 	16777215
		    quidu      	"490074B702B8"
		    width      	752
		    height     	180
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::EntitiesImpl::UVSQueryNotificationGatewayImpl" @20
		    ShowCompartmentStereotypes 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(3264, 1872)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@20
			location   	(2930, 1844)
			fill_color 	13434879
			nlines     	1
			max_width  	668
			justify    	0
			label      	"UVSQueryNotificationGatewayImpl")
		    stereotype 	(object ItemLabel
			Parent_View 	@20
			location   	(2930, 1794)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	668
			justify    	0
			label      	"<<Servant>>")
		    icon_style 	"Label"
		    fill_color 	12842435
		    quidu      	"4C52DE4B0294"
		    width      	686
		    height     	180
		    annotation 	8
		    autoResize 	TRUE)
		(object RealizeView "" @21
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	TRUE
		    line_color 	3947680
		    quidu      	"4C52DE600383"
		    client     	@20
		    supplier   	@18
		    vertices   	(list Points
			(3267, 1781)
			(3286, 1311))
		    line_style 	0)
		(object InheritView "" @22
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	TRUE
		    line_color 	3947680
		    quidu      	"4C52DE670320"
		    client     	@20
		    supplier   	@19
		    vertices   	(list Points
			(3145, 1781)
			(2929, 1614))
		    line_style 	0)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardChangeDAO::UVSQuestDAO" @23
		    ShowCompartmentStereotypes 	TRUE
		    SuppressAttribute 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    location   	(2019, 366)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	705320
			default_color 	FALSE)
		    label      	(object ItemLabel
			Parent_View 	@23
			location   	(1748, 334)
			nlines     	1
			max_width  	542
			justify    	0
			label      	"UVSQuestDAO")
		    stereotype 	(object ItemLabel
			Parent_View 	@23
			location   	(1748, 284)
			anchor     	10
			nlines     	1
			max_width  	542
			justify    	0
			label      	"<<SimpleClass>>")
		    icon_style 	"Label"
		    line_color 	705320
		    fill_color 	16777215
		    quidu      	"4C49AA1B03C3"
		    width      	560
		    height     	188
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardCommon::DPOUVSManager" @24
		    ShowCompartmentStereotypes 	TRUE
		    SuppressAttribute 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    location   	(1674, 156)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	16714250
			default_color 	FALSE)
		    label      	(object ItemLabel
			Parent_View 	@24
			location   	(1490, 124)
			nlines     	1
			max_width  	368
			justify    	0
			label      	"DPOUVSManager")
		    stereotype 	(object ItemLabel
			Parent_View 	@24
			location   	(1490, 74)
			anchor     	10
			nlines     	1
			max_width  	368
			justify    	0
			label      	"<<Interface>>")
		    icon       	"Interface"
		    icon_style 	"Label"
		    line_color 	16714250
		    fill_color 	16777215
		    quidu      	"4C3FF8CD03C3"
		    width      	386
		    height     	188
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardChangeDAO::GarDocDAO" @25
		    ShowCompartmentStereotypes 	TRUE
		    SuppressAttribute 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    location   	(531, 1317)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	705320
			default_color 	FALSE)
		    label      	(object ItemLabel
			Parent_View 	@25
			location   	(328, 1289)
			nlines     	1
			max_width  	406
			justify    	0
			label      	"GarDocDAO")
		    stereotype 	(object ItemLabel
			Parent_View 	@25
			location   	(328, 1239)
			anchor     	10
			nlines     	1
			max_width  	406
			justify    	0
			label      	"<<SimpleClass>>")
		    icon_style 	"Label"
		    line_color 	705320
		    fill_color 	16777215
		    quidu      	"4C49A45E0184"
		    width      	424
		    height     	180
		    annotation 	8
		    autoResize 	TRUE)
		(object UsesView "" @26
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	(object SegLabel @27
			Parent_View 	@26
			location   	(544, 1074)
			font       	(object Font
			    size       	10
			    face       	"Arial"
			    charSet    	204
			    bold       	FALSE
			    italics    	FALSE
			    underline  	FALSE
			    strike     	FALSE
			    color      	0
			    default_color 	TRUE)
			anchor     	10
			anchor_loc 	1
			nlines     	1
			max_width  	450
			justify    	0
			label      	"<<uses>>"
			pctDist    	0.362574
			height     	89
			orientation 	0)
		    line_color 	3947680
		    quidu      	"4C5A8C9E00B6"
		    client     	@13
		    supplier   	@25
		    vertices   	(list Points
			(436, 1029)
			(500, 1226))
		    line_style 	0)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardChangeDAO::UVSQuestDAO" @28
		    ShowCompartmentStereotypes 	TRUE
		    SuppressAttribute 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    location   	(1623, 1311)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	705320
			default_color 	FALSE)
		    label      	(object ItemLabel
			Parent_View 	@28
			location   	(1420, 1283)
			nlines     	1
			max_width  	406
			justify    	0
			label      	"UVSQuestDAO")
		    stereotype 	(object ItemLabel
			Parent_View 	@28
			location   	(1420, 1233)
			anchor     	10
			nlines     	1
			max_width  	406
			justify    	0
			label      	"<<SimpleClass>>")
		    icon_style 	"Label"
		    line_color 	705320
		    fill_color 	16777215
		    quidu      	"4C49AA1B03C3"
		    width      	424
		    height     	180
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::DocCardSupportTypes::UvsQueryPermissions" @29
		    ShowCompartmentStereotypes 	TRUE
		    SuppressAttribute 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    location   	(1329, 2076)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	705320
			default_color 	FALSE)
		    label      	(object ItemLabel
			Parent_View 	@29
			location   	(1077, 2048)
			nlines     	1
			max_width  	504
			justify    	0
			label      	" UvsQueryPermissions")
		    stereotype 	(object ItemLabel
			Parent_View 	@29
			location   	(1077, 1998)
			anchor     	10
			nlines     	1
			max_width  	504
			justify    	0
			label      	"<<SimpleClass>>")
		    icon_style 	"Label"
		    line_color 	705320
		    fill_color 	16777215
		    quidu      	"4C60E9C103C1"
		    width      	522
		    height     	180
		    annotation 	8
		    autoResize 	TRUE)
		(object UsesView "" @30
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	(object SegLabel @31
			Parent_View 	@30
			location   	(1442, 1905)
			font       	(object Font
			    size       	10
			    face       	"Arial"
			    charSet    	204
			    bold       	FALSE
			    italics    	FALSE
			    underline  	FALSE
			    strike     	FALSE
			    color      	0
			    default_color 	TRUE)
			anchor     	10
			anchor_loc 	1
			nlines     	1
			max_width  	450
			justify    	0
			label      	"<<uses>>"
			pctDist    	0.500000
			height     	120
			orientation 	0)
		    line_color 	3947680
		    quidu      	"4C60EB30027E"
		    client     	@7
		    supplier   	@29
		    vertices   	(list Points
			(1320, 1831)
			(1325, 1985))
		    line_style 	0)
		(object ClassView "Class" "Logical View::MDProcess::ConfluenceMDChange::MdcCommonImpl::AbstractMDCPermissionManagerS" @32
		    ShowCompartmentStereotypes 	TRUE
		    SuppressAttribute 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    location   	(570, 2058)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	TRUE
			underline  	FALSE
			strike     	FALSE
			color      	705290
			default_color 	FALSE)
		    label      	(object ItemLabel
			Parent_View 	@32
			location   	(238, 2030)
			nlines     	1
			max_width  	664
			justify    	0
			label      	"AbstractMDCPermissionManagerS")
		    stereotype 	(object ItemLabel
			Parent_View 	@32
			location   	(238, 1980)
			anchor     	10
			nlines     	1
			max_width  	664
			justify    	0
			label      	"<<Servant>>")
		    icon_style 	"Label"
		    line_color 	705290
		    fill_color 	16777215
		    quidu      	"48D76133037A"
		    width      	682
		    height     	180
		    annotation 	8
		    autoResize 	TRUE)
		(object InheritView "" @33
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	TRUE
		    line_color 	3947680
		    quidu      	"48EB5A460142"
		    client     	@4
		    supplier   	@32
		    vertices   	(list Points
			(546, 1620)
			(564, 1967))
		    line_style 	0)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::EntitiesImpl::DocCardPermissionManagerImpl" @34
		    ShowCompartmentStereotypes 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(675, 2487)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@34
			location   	(365, 2459)
			fill_color 	13434879
			nlines     	1
			max_width  	620
			justify    	0
			label      	"DocCardPermissionManagerImpl")
		    stereotype 	(object ItemLabel
			Parent_View 	@34
			location   	(365, 2409)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	620
			justify    	0
			label      	"<<Servant>>")
		    icon_style 	"Label"
		    fill_color 	12842435
		    quidu      	"4CAC2399037A"
		    width      	638
		    height     	180
		    annotation 	8
		    autoResize 	TRUE)
		(object InheritView "" @35
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	TRUE
		    line_color 	3947680
		    quidu      	"4CAC23C3037D"
		    client     	@34
		    supplier   	@32
		    vertices   	(list Points
			(651, 2396)
			(591, 2148))
		    line_style 	0)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::Entities::DocCardPermissionManager" @36
		    ShowCompartmentStereotypes 	TRUE
		    SuppressAttribute 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    location   	(1599, 2409)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	16714250
			default_color 	FALSE)
		    label      	(object ItemLabel
			Parent_View 	@36
			location   	(1323, 2381)
			nlines     	1
			max_width  	552
			justify    	0
			label      	"DocCardPermissionManager")
		    stereotype 	(object ItemLabel
			Parent_View 	@36
			location   	(1323, 2331)
			anchor     	10
			nlines     	1
			max_width  	552
			justify    	0
			label      	"<<Interface>>")
		    icon       	"Interface"
		    icon_style 	"Label"
		    line_color 	16714250
		    fill_color 	16777215
		    quidu      	"4CAC22B20102"
		    width      	570
		    height     	180
		    annotation 	8
		    autoResize 	TRUE)
		(object RealizeView "" @37
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	TRUE
		    line_color 	3947680
		    quidu      	"4CAC264F0384"
		    client     	@34
		    supplier   	@36
		    vertices   	(list Points
			(994, 2458)
			(1313, 2432))
		    line_style 	0)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::Entities::UVSQuery" @38
		    ShowCompartmentStereotypes 	TRUE
		    SuppressAttribute 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    location   	(1437, 537)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	16714250
			default_color 	FALSE)
		    label      	(object ItemLabel
			Parent_View 	@38
			location   	(1298, 509)
			nlines     	1
			max_width  	278
			justify    	0
			label      	" UVSQuery")
		    stereotype 	(object ItemLabel
			Parent_View 	@38
			location   	(1298, 459)
			anchor     	10
			nlines     	1
			max_width  	278
			justify    	0
			label      	"<<Interface>>")
		    icon       	"Interface"
		    icon_style 	"Label"
		    line_color 	16714250
		    fill_color 	16777215
		    quidu      	"4C3D987A0072"
		    width      	296
		    height     	180
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::Entities::DocCard" @39
		    ShowCompartmentStereotypes 	TRUE
		    SuppressAttribute 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    location   	(237, 174)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	16714250
			default_color 	FALSE)
		    label      	(object ItemLabel
			Parent_View 	@39
			location   	(101, 142)
			nlines     	1
			max_width  	272
			justify    	0
			label      	" DocCard")
		    stereotype 	(object ItemLabel
			Parent_View 	@39
			location   	(101, 92)
			anchor     	10
			nlines     	1
			max_width  	269
			justify    	0
			label      	"<<Interface>>")
		    icon       	"Interface"
		    icon_style 	"Label"
		    line_color 	16714250
		    fill_color 	16777215
		    quidu      	"4C3713F60316"
		    width      	290
		    height     	188
		    annotation 	8
		    autoResize 	TRUE)
		(object RealizeView "" @40
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	TRUE
		    line_color 	3947680
		    quidu      	"4CF8BE280191"
		    client     	@3
		    supplier   	@38
		    vertices   	(list Points
			(1426, 946)
			(1434, 627))
		    line_style 	0)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::EntitiesImpl::DocCardWithPersistentState" @41
		    ShowCompartmentStereotypes 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(768, 213)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@41
			location   	(431, 129)
			fill_color 	13434879
			nlines     	1
			max_width  	674
			justify    	0
			label      	" DocCardWithPersistentState")
		    stereotype 	(object ItemLabel
			Parent_View 	@41
			location   	(431, 79)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	674
			justify    	0
			label      	"<<LocalInterface>>")
		    icon_style 	"Label"
		    fill_color 	16766935
		    quidu      	"4D48029B022E"
		    width      	692
		    height     	292
		    annotation 	8
		    autoResize 	TRUE)
		(object UsesView "" @42
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	(object SegLabel @43
			Parent_View 	@42
			location   	(1687, 933)
			font       	(object Font
			    size       	10
			    face       	"Arial"
			    charSet    	204
			    bold       	FALSE
			    italics    	FALSE
			    underline  	FALSE
			    strike     	FALSE
			    color      	0
			    default_color 	TRUE)
			anchor     	10
			anchor_loc 	1
			nlines     	1
			max_width  	450
			justify    	0
			label      	"<<uses>>"
			pctDist    	0.202847
			height     	128
			orientation 	1)
		    line_color 	3947680
		    quidu      	"4C52E1250283"
		    client     	@3
		    supplier   	@23
		    vertices   	(list Points
			(1504, 946)
			(1934, 460))
		    line_style 	0)
		(object UsesView "" @44
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	(object SegLabel @45
			Parent_View 	@44
			location   	(1818, 1131)
			font       	(object Font
			    size       	10
			    face       	"Arial"
			    charSet    	204
			    bold       	FALSE
			    italics    	FALSE
			    underline  	FALSE
			    strike     	FALSE
			    color      	0
			    default_color 	TRUE)
			anchor     	10
			anchor_loc 	1
			nlines     	1
			max_width  	450
			justify    	0
			label      	"<<uses>>"
			pctDist    	0.075269
			height     	63
			orientation 	1)
		    line_color 	3947680
		    quidu      	"4C52E15F037D"
		    client     	@3
		    supplier   	@24
		    vertices   	(list Points
			(1584, 1068)
			(2835, 1068)
			(2835, 164)
			(1867, 164))
		    line_style 	3
		    origin_attachment 	(1584, 1068)
		    terminal_attachment 	(1867, 164))
		(object UsesView "" @46
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	(object SegLabel @47
			Parent_View 	@46
			location   	(1664, 1180)
			font       	(object Font
			    size       	10
			    face       	"Arial"
			    charSet    	204
			    bold       	FALSE
			    italics    	FALSE
			    underline  	FALSE
			    strike     	FALSE
			    color      	0
			    default_color 	TRUE)
			anchor     	10
			anchor_loc 	1
			nlines     	1
			max_width  	450
			justify    	0
			label      	"<<uses>>"
			pctDist    	1.276351
			height     	111
			orientation 	0)
		    line_color 	3947680
		    quidu      	"4C5A8CB90385"
		    client     	@3
		    supplier   	@28
		    vertices   	(list Points
			(1490, 1129)
			(1557, 1220))
		    line_style 	0)
		(object RealizeView "" @48
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	TRUE
		    line_color 	3947680
		    quidu      	"4D4803240223"
		    client     	@13
		    supplier   	@41
		    vertices   	(list Points
			(453, 848)
			(694, 359))
		    line_style 	0)
		(object RealizeView "" @49
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	TRUE
		    line_color 	3947680
		    quidu      	"4D48071A03A2"
		    client     	@13
		    supplier   	@39
		    vertices   	(list Points
			(386, 848)
			(257, 268))
		    line_style 	0)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::EntitiesImpl::UVSQueryReportManagerImpl" @50
		    ShowCompartmentStereotypes 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(3006, 2553)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@50
			location   	(2719, 2524)
			fill_color 	13434879
			nlines     	1
			max_width  	574
			justify    	0
			label      	"UVSQueryReportManagerImpl")
		    stereotype 	(object ItemLabel
			Parent_View 	@50
			location   	(2719, 2474)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	574
			justify    	0
			label      	"<<Servant>>")
		    icon_style 	"Label"
		    fill_color 	12842435
		    quidu      	"4F7AB5C90268"
		    width      	592
		    height     	182
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::Entities::UVSQueryReportManager" @51
		    ShowCompartmentStereotypes 	TRUE
		    SuppressAttribute 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    location   	(2328, 2208)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	16714250
			default_color 	FALSE)
		    label      	(object ItemLabel
			Parent_View 	@51
			location   	(2074, 2180)
			nlines     	1
			max_width  	508
			justify    	0
			label      	"UVSQueryReportManager")
		    stereotype 	(object ItemLabel
			Parent_View 	@51
			location   	(2074, 2130)
			anchor     	10
			nlines     	1
			max_width  	508
			justify    	0
			label      	"<<Interface>>")
		    icon       	"Interface"
		    icon_style 	"Label"
		    line_color 	16714250
		    fill_color 	16777215
		    quidu      	"4F7AB5880389"
		    width      	526
		    height     	180
		    annotation 	8
		    autoResize 	TRUE)
		(object RealizeView "" @52
		    stereotype 	TRUE
		    line_color 	3342489
		    quidu      	"4F7AB5E102E0"
		    client     	@50
		    supplier   	@51
		    vertices   	(list Points
			(2827, 2461)
			(2505, 2298))
		    line_style 	0)
		(object ClassView "Class" "Logical View::external::JavaTypes::Lang::Long" @53
		    ShowCompartmentStereotypes 	TRUE
		    SuppressAttribute 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    location   	(1788, 3189)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	658120
			default_color 	FALSE)
		    label      	(object ItemLabel
			Parent_View 	@53
			location   	(1685, 3161)
			fill_color 	13434879
			nlines     	1
			max_width  	206
			justify    	0
			label      	" Long")
		    stereotype 	(object ItemLabel
			Parent_View 	@53
			location   	(1685, 3111)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	203
			justify    	0
			label      	"<<Facet>>")
		    icon_style 	"Label"
		    line_color 	14803425
		    fill_color 	14803425
		    quidu      	"4775064E0397"
		    width      	224
		    height     	180
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::Entities::ReportMap" @54
		    ShowCompartmentStereotypes 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(1758, 2703)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@54
			location   	(1604, 2647)
			fill_color 	13434879
			nlines     	1
			max_width  	308
			justify    	0
			label      	" ReportMap")
		    stereotype 	(object ItemLabel
			Parent_View 	@54
			location   	(1604, 2597)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	308
			justify    	0
			label      	"<<Map>>")
		    icon_style 	"Label"
		    fill_color 	15787730
		    quidu      	"4F7ABD0801D7"
		    width      	326
		    height     	236
		    annotation 	8
		    autoResize 	TRUE)
		(object AssociationViewNew "" @55
		    location   	(1773, 2959)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	TRUE
		    line_color 	3342489
		    quidu      	"4F7ABDD40103"
		    roleview_list 	(list RoleViews
			(object RoleView "" @56
			    Parent_View 	@55
			    location   	(15, 256)
			    stereotype 	TRUE
			    line_color 	3342489
			    quidu      	"4F7ABDD4038F"
			    client     	@55
			    supplier   	@53
			    vertices   	(list Points
				(1773, 2959)
				(1781, 3098))
			    line_style 	0)
			(object RoleView "" @57
			    Parent_View 	@55
			    location   	(15, 256)
			    font       	(object Font
				size       	10
				face       	"Arial"
				charSet    	204
				bold       	FALSE
				italics    	FALSE
				underline  	FALSE
				strike     	FALSE
				color      	0
				default_color 	TRUE)
			    stereotype 	TRUE
			    line_color 	3342489
			    quidu      	"4F7ABDD40392"
			    client     	@55
			    supplier   	@54
			    vertices   	(list Points
				(1773, 2959)
				(1764, 2821))
			    line_style 	0
			    label      	(object SegLabel @58
				Parent_View 	@57
				location   	(1764, 2859)
				font       	(object Font
				    size       	10
				    face       	"Arial"
				    charSet    	204
				    bold       	FALSE
				    italics    	FALSE
				    underline  	FALSE
				    strike     	FALSE
				    color      	0
				    default_color 	TRUE)
				anchor     	5
				anchor_loc 	1
				nlines     	1
				max_width  	269
				justify    	0
				label      	"key : long long"
				pctDist    	0.900000
				height     	12
				orientation 	0))))
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::Entities::MailValidator" @59
		    ShowCompartmentStereotypes 	TRUE
		    SuppressAttribute 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    location   	(2571, 2772)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	16714250
			default_color 	FALSE)
		    label      	(object ItemLabel
			Parent_View 	@59
			location   	(2438, 2744)
			nlines     	1
			max_width  	266
			justify    	0
			label      	"MailValidator")
		    stereotype 	(object ItemLabel
			Parent_View 	@59
			location   	(2438, 2694)
			anchor     	10
			nlines     	1
			max_width  	266
			justify    	0
			label      	"<<Interface>>")
		    icon       	"Interface"
		    icon_style 	"Label"
		    line_color 	16714250
		    fill_color 	16777215
		    quidu      	"50BC44C8014C"
		    width      	284
		    height     	180
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::EntitiesImpl::ValidateSizeAttachmentForDiscardedUoQuery" @60
		    ShowCompartmentStereotypes 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(2607, 3435)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@60
			location   	(2167, 3406)
			fill_color 	13434879
			nlines     	1
			max_width  	880
			justify    	0
			label      	"ValidateSizeAttachmentForDiscardedUoQuery")
		    stereotype 	(object ItemLabel
			Parent_View 	@60
			location   	(2167, 3356)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	880
			justify    	0
			label      	"<<Servant>>")
		    icon_style 	"Label"
		    fill_color 	12842435
		    quidu      	"50BC467A0171"
		    width      	898
		    height     	182
		    annotation 	8
		    autoResize 	TRUE)
		(object RealizeView "" @61
		    stereotype 	TRUE
		    line_color 	3342489
		    quidu      	"50BC74D5008F"
		    client     	@60
		    supplier   	@59
		    vertices   	(list Points
			(2601, 3343)
			(2575, 2862))
		    line_style 	0)
		(object ClassView "Class" "Logical View::MDProcess::DocCardChange::EntitiesImpl::ValidateSizeAttachment" @62
		    ShowCompartmentStereotypes 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(3051, 3111)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@62
			location   	(2816, 3083)
			fill_color 	13434879
			nlines     	1
			max_width  	470
			justify    	0
			label      	"ValidateSizeAttachment")
		    stereotype 	(object ItemLabel
			Parent_View 	@62
			location   	(2816, 3033)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	470
			justify    	0
			label      	"<<Servant>>")
		    icon_style 	"Label"
		    fill_color 	12842435
		    quidu      	"50BC749A0225"
		    width      	488
		    height     	180
		    annotation 	8
		    autoResize 	TRUE)
		(object InheritView "" @63
		    stereotype 	TRUE
		    line_color 	3342489
		    quidu      	"50BC74CE00E8"
		    client     	@60
		    supplier   	@62
		    vertices   	(list Points
			(2730, 3343)
			(2926, 3201))
		    line_style 	0)
		(object RealizeView "" @64
		    stereotype 	TRUE
		    line_color 	3342489
		    quidu      	"50BC74BF02B5"
		    client     	@62
		    supplier   	@59
		    vertices   	(list Points
			(2924, 3020)
			(2700, 2862))
		    line_style 	0)))))
