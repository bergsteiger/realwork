
(object Petal
    version    	50
    _written   	"Rose 2006.0.0.060314"
    charSet    	204)

(object Class_Category "ConfluencePlugins"
    is_unit    	TRUE
    is_loaded  	TRUE
    attributes 	(list Attribute_Set
	(object Attribute
	    tool       	"MDA Generator"
	    name       	"AbstarctOperation"
	    value      	"regular")
	(object Attribute
	    tool       	"MDA Generator"
	    name       	"IsNative"
	    value      	"false")
	(object Attribute
	    tool       	"MDA Generator"
	    name       	"SELF GENERATED FILE (jar)"
	    value      	"w:/MDProcess/MDPlugins/.project")
	(object Attribute
	    tool       	"MDA Generator"
	    name       	"SELF GENERATED FILE (output)"
	    value      	"w:/MDProcess/MDPlugins/.classpath")
	(object Attribute
	    tool       	"MDA Generator"
	    name       	"NESTED GENERATED FILES (jar)"
	    value      	"w:/MDProcess/MDPlugins/src/etc/atlassian-plugin.xml::45B7192701D4")
	(object Attribute
	    tool       	"MDA Generator User Properties"
	    name       	"is namespace"
	    value      	"true")
	(object Attribute
	    tool       	"MDA Generator User Properties"
	    name       	"need UC"
	    value      	"false")
	(object Attribute
	    tool       	"MDA Generator"
	    name       	"ApplyedGens"
	    value      	"Java")
	(object Attribute
	    tool       	"MDA Generator"
	    name       	"NESTED GENERATED FILES (output.classpath)"
	    value      	"")
	(object Attribute
	    tool       	"MDA Generator"
	    name       	"NESTED GENERATED FILES (java)"
	    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/ConfluencePlugins/ArchiveCommentSupport/ArchiveCommentAction.java::45F677DC0290,w:/MDProcess/java/src/java/ru/garant/MDProcess/ConfluencePlugins/ArchiveCommentSupport/ArchiveCommentVelocityContextPlugin.java::45F677DC0290,w:/MDProcess/java/src/java/ru/garant/MDProcess/ConfluencePlugins/CommentsTabSupport/ViewCommentsAction.java::461FA82502FD,w:/MDProcess/java/src/java/ru/garant/MDProcess/ConfluencePlugins/DiscussionsSupport/CloseDiscussionPlugin.java::45B7192701D4,w:/MDProcess/java/src/java/ru/garant/MDProcess/ConfluencePlugins/DiscussionsSupport/ClosedDiscussionMacro.java::45B7192701D4,w:/MDProcess/java/src/java/ru/garant/MDProcess/ConfluencePlugins/DiscussionsSupport/ClosedDiscussionManager.java::45B7192701D4,w:/MDProcess/java/src/java/ru/garant/MDProcess/ConfluencePlugins/DiscussionsSupport/CommentListener.java::45B7192701D4,w:/MDProcess/java/src/java/ru/garant/MDProcess/ConfluencePlugins/DiscussionsSupport/Discussion.java::45B7192701D4,w:/MDProcess/java/src/java/ru/garant/MDProcess/ConfluencePlugins/DiscussionsSupport/Discussion2.java::45B7192701D4,w:/MDProcess/java/src/java/ru/garant/MDProcess/ConfluencePlugins/DiscussionsSupport/DiscussionList.java::45B7192701D4,w:/MDProcess/java/src/java/ru/garant/MDProcess/ConfluencePlugins/DiscussionsSupport/DiscussionManagerBase.java::45B7192701D4,w:/MDProcess/java/src/java/ru/garant/MDProcess/ConfluencePlugins/DiscussionsSupport/DiscussionVelocityContextPlugin.java::45B7192701D4,w:/MDProcess/java/src/java/ru/garant/MDProcess/ConfluencePlugins/DiscussionsSupport/DiscussionsMacroBase.java::45B7192701D4,w:/MDProcess/java/src/java/ru/garant/MDProcess/ConfluencePlugins/DiscussionsSupport/LabelListener.java::45B7192701D4,w:/MDProcess/java/src/java/ru/garant/MDProcess/ConfluencePlugins/DiscussionsSupport/OpenDiscussionManager.java::45B7192701D4,w:/MDProcess/java/src/java/ru/garant/MDProcess/ConfluencePlugins/DiscussionsSupport/OpenDiscussionsMacro.java::45B7192701D4,w:/MDProcess/java/src/java/ru/garant/MDProcess/ConfluencePlugins/DiscussionsSupport/PageListener.java::45B7192701D4,w:/MDProcess/java/src/java/ru/garant/MDProcess/ConfluencePlugins/DiscussionsSupport/RecentlyUpdateListener.java::45B7192701D4,w:/MDProcess/java/src/java/ru/garant/MDProcess/ConfluencePlugins/DiscussionsSupport/RecentlyUpdatedContentMacro.java::45B7192701D4,w:/MDProcess/java/src/java/ru/garant/MDProcess/ConfluencePlugins/DiscussionsSupport/SQLExecutor.java::45B7192701D4,w:/MDProcess/java/src/java/ru/garant/MDProcess/ConfluencePlugins/DiscussionsSupport/SaveDiscussionsJob.java::45B7192701D4,w:/MDProcess/java/src/java/ru/garant/MDProcess/ConfluencePlugins/DiscussionsSupport/SaveDiscussionsLifeCycle.java::45B7192701D4,w:/MDProcess/java/src/java/ru/garant/MDProcess/ConfluencePlugins/DiscussionsSupport/UserDate.java::45B7192701D4,w:/MDProcess/java/src/java/ru/garant/MDProcess/ConfluencePlugins/DiscussionsSupport/ViewedEntityManager.java::45B7192701D4,w:/MDProcess/java/src/java/ru/garant/MDProcess/ConfluencePlugins/DocumentWorkSupport/RemoveDescendants.java::45D1B37D0290,w:/MDProcess/java/src/java/ru/garant/MDProcess/ConfluencePlugins/GarantProfileSupport/ViewProfileAction.java::461FAB5000CB,w:/MDProcess/java/src/java/ru/garant/MDProcess/ConfluencePlugins/IconsSelectorSupport/IconSelectorInVelocity.java::45C1FCFF038A,w:/MDProcess/java/src/java/ru/garant/MDProcess/ConfluencePlugins/SearchExtractorSupport/AuthorExtractor.java::4607CD6600AB,w:/MDProcess/java/src/java/ru/garant/MDProcess/ConfluencePlugins/SearchHighLightSupport/SearchHighLightUtil.java::45D9C51F007D,w:/MDProcess/java/src/java/ru/garant/MDProcess/ConfluencePlugins/SessionSupport/SessionComponentPlugin.java::45F6AE680177,w:/MDProcess/java/src/java/ru/garant/MDProcess/ConfluencePlugins/SessionSupport/SessionListenerPlugin.java::45F6AE680177,w:/MDProcess/java/src/java/ru/garant/MDProcess/ConfluencePlugins/SessionSupport/SessionVelocityContextPlugin.java::45F6AE680177")
	(object Attribute
	    tool       	"MDA Generator"
	    name       	"NESTED GENERATED FILES (output.project)"
	    value      	"")
	(object Attribute
	    tool       	"MDA Generator"
	    name       	"NESTED GENERATED FILES (output.xml)"
	    value      	"w:/MDProcess/java/src/etc/ConfluencePlugins/DiscussionsMacro.vm::45B7192701D4,w:/MDProcess/java/src/etc/ConfluencePlugins/garantprofile.vm::461FAB5000CB,w:/MDProcess/java/src/etc/ConfluencePlugins/removedescendants.vm::45D1B37D0290,w:/MDProcess/java/src/etc/ConfluencePlugins/viewcomments.vm::461FA82502FD")
	(object Attribute
	    tool       	"MDA Generator"
	    name       	"AutoCounter"
	    value      	"6")
	(object Attribute
	    tool       	"MDA Generator"
	    name       	"SELF GENERATED FILE (output.xml)"
	    value      	"")
	(object Attribute
	    tool       	"MDA Generator"
	    name       	"output.classpath:*45B77B280148_CUSTOM_ENTRY*"
	    value      	(value Text 
|<!--UC_BEGIN*45B77B280148_CUSTOM_ENTRY*-->¤	<!--UC_END*45B77B280148_CUSTOM_ENTRY*-->
	    ))
	(object Attribute
	    tool       	"MDA Generator"
	    name       	"SELF GENERATED FILE (output.classpath)"
	    value      	"")
	(object Attribute
	    tool       	"MDA Generator"
	    name       	"SELF GENERATED FILE (java)"
	    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/ConfluencePlugins/LibHome.java")
	(object Attribute
	    tool       	"MDA Generator"
	    name       	"SELF GENERATED FILE (build.xml)"
	    value      	"w:/MDProcess/java/project/ConfluencePlugins/build.xml")
	(object Attribute
	    tool       	"MDA Generator"
	    name       	"java:*45B77B280148_ENVIRONMENTS_CONFIG*"
	    value      	(value Text 
|//#UC START# *45B77B280148_ENVIRONMENTS_CONFIG*¤		//#UC END# *45B77B280148_ENVIRONMENTS_CONFIG*
	    ))
	(object Attribute
	    tool       	"MDA Generator"
	    name       	"java:*45B77B280148_CUSTOM_REGISTRATE*"
	    value      	(value Text 
|//#UC START# *45B77B280148_CUSTOM_REGISTRATE*¤		//#UC END# *45B77B280148_CUSTOM_REGISTRATE*
	    )))
    quid       	"45B77B280148"
    documentation 	"Библиотека плагинов для Конфлюенса"
    stereotype 	"Library"
    visible_categories 	(list visibility_relationship_list
	(object Visibility_Relationship
	    quid       	"45DAF64B032C"
	    supplier   	"Logical View::external::JavaConfluence"
	    quidu      	"45DAC09A005D")
	(object Visibility_Relationship
	    quid       	"45FE96340311"
	    supplier   	"Logical View::MDProcess::Описание MDKnow"
	    quidu      	"4586571E02DE"))
    exportControl 	"Public"
    logical_models 	(list unit_reference_list
	(object Class_Category "DiscussionsSupport"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"name"
		    value      	"Garant Discussion Support")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (jar)"
		    value      	"w:/MDProcess/MDPlugins/src/etc/atlassian-plugin.xml")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (output.classpath)"
		    value      	"")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (output.project)"
		    value      	"")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (output.xml)"
		    value      	"")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AutoCounter"
		    value      	"6")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"prefix"
		    value      	"ru.garant")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"vendor name"
		    value      	"ООО НПП 'Гарант-Сервис'")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"vendor url"
		    value      	"www.garant.ru")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"NESTED GENERATED FILES (java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/ConfluencePlugins/DiscussionsSupport/CloseDiscussionPlugin.java::45FA6DAC034B,w:/MDProcess/java/src/java/ru/garant/MDProcess/ConfluencePlugins/DiscussionsSupport/ClosedDiscussionMacro.java::45E43B700203,w:/MDProcess/java/src/java/ru/garant/MDProcess/ConfluencePlugins/DiscussionsSupport/ClosedDiscussionManager.java::45E447FE0203,w:/MDProcess/java/src/java/ru/garant/MDProcess/ConfluencePlugins/DiscussionsSupport/CommentListener.java::45B719C1003E,w:/MDProcess/java/src/java/ru/garant/MDProcess/ConfluencePlugins/DiscussionsSupport/Discussion.java::45B72F6E02EE,w:/MDProcess/java/src/java/ru/garant/MDProcess/ConfluencePlugins/DiscussionsSupport/Discussion2.java::46013C2300EA,w:/MDProcess/java/src/java/ru/garant/MDProcess/ConfluencePlugins/DiscussionsSupport/DiscussionList.java::45B72F5001D4,w:/MDProcess/java/src/java/ru/garant/MDProcess/ConfluencePlugins/DiscussionsSupport/DiscussionManagerBase.java::460A5BE702FD,w:/MDProcess/java/src/java/ru/garant/MDProcess/ConfluencePlugins/DiscussionsSupport/DiscussionVelocityContextPlugin.java::45FA988B008C,w:/MDProcess/java/src/java/ru/garant/MDProcess/ConfluencePlugins/DiscussionsSupport/DiscussionsMacroBase.java::460A5C2100AB,w:/MDProcess/java/src/java/ru/garant/MDProcess/ConfluencePlugins/DiscussionsSupport/LabelListener.java::45E581B202AF,w:/MDProcess/java/src/java/ru/garant/MDProcess/ConfluencePlugins/DiscussionsSupport/OpenDiscussionManager.java::45B72EBE01F4,w:/MDProcess/java/src/java/ru/garant/MDProcess/ConfluencePlugins/DiscussionsSupport/OpenDiscussionsMacro.java::45B72EE10213,w:/MDProcess/java/src/java/ru/garant/MDProcess/ConfluencePlugins/DiscussionsSupport/PageListener.java::45BDE64A004E,w:/MDProcess/java/src/java/ru/garant/MDProcess/ConfluencePlugins/DiscussionsSupport/RecentlyUpdateListener.java::460BACED004E,w:/MDProcess/java/src/java/ru/garant/MDProcess/ConfluencePlugins/DiscussionsSupport/RecentlyUpdatedContentMacro.java::460A5B8C0242,w:/MDProcess/java/src/java/ru/garant/MDProcess/ConfluencePlugins/DiscussionsSupport/SQLExecutor.java::45E54AAA0261,w:/MDProcess/java/src/java/ru/garant/MDProcess/ConfluencePlugins/DiscussionsSupport/SaveDiscussionsJob.java::45BF2DF70242,w:/MDProcess/java/src/java/ru/garant/MDProcess/ConfluencePlugins/DiscussionsSupport/SaveDiscussionsLifeCycle.java::461656880222,w:/MDProcess/java/src/java/ru/garant/MDProcess/ConfluencePlugins/DiscussionsSupport/UserDate.java::46013BF50138,w:/MDProcess/java/src/java/ru/garant/MDProcess/ConfluencePlugins/DiscussionsSupport/ViewedEntityManager.java::460A56B502EE")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"NESTED GENERATED FILES (output.xml)"
		    value      	"w:/MDProcess/java/src/etc/ConfluencePlugins/DiscussionsMacro.vm::46120DA70290"))
	    quid       	"45B7192701D4"
	    documentation 	"Библиотека плагинов для поддержки обсуждений."
	    stereotype 	"CPluginsPackage"
	    visible_categories 	(list visibility_relationship_list
		(object Visibility_Relationship
		    quid       	"45FE965101B9"
		    supplier   	"Logical View::MDProcess::Описание MDKnow::Работа с обсуждениями"
		    quidu      	"4609112A005A")
		(object Visibility_Relationship
		    quid       	"460A5D190109"
		    supplier   	"Logical View::external::JavaConfluence::ConfluenceClassPack"
		    quidu      	"45DAC0AA0232")
		(object Visibility_Relationship
		    quid       	"4614C17C0148"
		    supplier   	"Logical View::MDProcess::Описание MDKnow::Работа с контентом"
		    quidu      	"460912ED03D5"))
	    exportControl 	"Public"
	    logical_models 	(list unit_reference_list
		(object Class "CommentListener"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"name"
			    value      	"")
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"need UC"
			    value      	"true")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"SELF GENERATED FILE (java)"
			    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/ConfluencePlugins/DiscussionsSupport/CommentListener.java")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*45B719C1003E_CUSTOM_IMPORT*"
			    value      	"//#UC START# *45B719C1003E_CUSTOM_IMPORT*¤import ru.garant.MDProcess.ConfluencePlugins.ArchiveCommentSupport.ArchiveCommentAction;¤import com.atlassian.confluence.event.events.content.comment.CommentCreateEvent;¤import com.atlassian.confluence.event.events.content.comment.CommentRemoveEvent;¤import com.atlassian.confluence.pages.Comment;¤import com.atlassian.confluence.pages.PageManager;¤import com.atlassian.confluence.pages.AbstractPage;¤import com.atlassian.confluence.labels.LabelManager;¤import com.atlassian.spring.container.ContainerManager;¤//#UC END# *45B719C1003E_CUSTOM_IMPORT*")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*45B719C1003E_CUSTOM_CLASS_DEFINITION*"
			    value      	"//#UC START# *45B719C1003E_CUSTOM_CLASS_DEFINITION*¤//#UC END# *45B719C1003E_CUSTOM_CLASS_DEFINITION*")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*45B719C1003E_GETHANDLEDEVENTCLASSES_IMPLEMETATION*"
			    value      	(value Text 
|//#UC START# *45B719C1003E_GETHANDLEDEVENTCLASSES_IMPLEMETATION*¤		return handledClasses;¤		//#UC END# *45B719C1003E_GETHANDLEDEVENTCLASSES_IMPLEMETATION*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*45B719C1003E_CUSTOM_OPERATION_DEFENITION*"
			    value      	(value Text 
|//#UC START# *45B719C1003E_CUSTOM_OPERATION_DEFENITION*¤	static private final String DISCUSSION_LABEL = "open";¤	//#UC END# *45B719C1003E_CUSTOM_OPERATION_DEFENITION*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*45B719C1003E_HANDLEEVENT_IMPLEMETATION*"
			    value      	(value Text 
|//#UC START# *45B719C1003E_HANDLEEVENT_IMPLEMETATION*¤		try {¤			if (event instanceof CommentCreateEvent) {¤				CommentCreateEvent add_comment_event = (CommentCreateEvent)event;¤				Comment comment = add_comment_event.getComment ();¤				AbstractPage page = comment.getPage ();¤				ArchiveCommentAction.addLabelByName (this.labelManager, OpenDiscussionManager.DISCUSSION_LABEL, page);¤				ArchiveCommentAction.addLabelByName (this.labelManager, OpenDiscussionManager.COMMENT_DISCUSSION_LABEL, comment);¤				add_discussion (page, comment);¤			} else if (event instanceof CommentRemoveEvent) {¤				CommentRemoveEvent remove_comment_event = (CommentRemoveEvent)event;¤				Comment oldComment = remove_comment_event.getComment ();¤				DiscussionList discussionList = this.getOpenDiscussionManager ().getDiscussions ();¤				Discussion2 oldDiscussion = discussionList.get_by_comment (oldComment.getId ());¤				if (oldDiscussion != null) {¤					AbstractPage page = pageManager.getAbstractPage (oldDiscussion.getPageId ());¤					Discussion2 newDiscussion = this.getOpenDiscussionManager ().createDiscussion (page);¤					oldDiscussion.update (newDiscussion);¤					discussionList.sort_by_date ();¤				}¤			} else {¤				System.err.println (¤					" AddCommentListenerImpl::handleEvent: ERROR! Event type is unknown '"¤					+ event.getClass ().getName () + "'"¤				);¤			}¤		} catch (Exception e) {¤			System.err.println ("AddCommentListener::handleEvent: ERROR(" + e + "): " + e.getMessage ());¤		}¤		//#UC END# *45B719C1003E_HANDLEEVENT_IMPLEMETATION*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*45B719C1003E_CUSTOM_ABSTRACT*"
			    value      	(value Text 
|//#UC START# *45B719C1003E_CUSTOM_ABSTRACT*¤	//#UC END# *45B719C1003E_CUSTOM_ABSTRACT*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*45B719C1003E_CUSTOM_METHODS_AND_DATA*"
			    value      	(value Text 
|//#UC START# *45B719C1003E_CUSTOM_METHODS_AND_DATA*¤	private OpenDiscussionManager openDiscussionManager = null;¤	private ClosedDiscussionManager closedDiscussionManager = null;¤	private PageManager pageManager = null;¤	private LabelManager labelManager = null;¤¤	private void add_discussion (AbstractPage page, Comment comment) {¤		Discussion2 discussion = new Discussion2 (¤			page.getId ()¤			, comment.getId ()¤			, comment.getCreatorName ()¤			, comment.getCreationDate ()¤		);¤¤		DiscussionList openDiscussionList = this.getOpenDiscussionManager ().getDiscussions ();¤		openDiscussionList.add (discussion);¤¤		DiscussionList closedDiscussionList = this.getClosedDiscussionList ().getDiscussions ();¤		closedDiscussionList.remove_by_page (page.getId ());¤	}¤¤	private ClosedDiscussionManager getClosedDiscussionList () {¤		if (this.closedDiscussionManager == null) {¤			this.closedDiscussionManager = (ClosedDiscussionManager) ContainerManager.getComponent("ru.garant.MDProcess.ConfluencePlugins.DiscussionsSupport.ClosedDiscussionManager");¤		}¤		return this.closedDiscussionManager;¤	}¤¤	private OpenDiscussionManager getOpenDiscussionManager () {¤		if (this.openDiscussionManager == null) {¤			this.openDiscussionManager = (OpenDiscussionManager) ContainerManager.getComponent("ru.garant.MDProcess.ConfluencePlugins.DiscussionsSupport.OpenDiscussionManager");¤		}¤		return this.openDiscussionManager;¤	}¤¤	public void setPageManager(PageManager pageManager) {¤		this.pageManager = pageManager;¤	}¤	public void setLabelManager (LabelManager labelManager) {¤		this.labelManager = labelManager;¤	}¤ 	//#UC END# *45B719C1003E_CUSTOM_METHODS_AND_DATA*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*45B719C1003E_CONTENT*"
			    value      	(value Text 
|//#UC START# *45B719C1003E_CONTENT*¤		CommentCreateEvent.class¤		, CommentRemoveEvent.class¤		//#UC END# *45B719C1003E_CONTENT*
			    )))
		    quid       	"45B719C1003E"
		    documentation 	
|Слушает событие о добавлении коментария, когда услышал - зовет
|OpenDiscussions для перевода страницы (для которой ставится коментарий) в
|состояние с открытм обсуждением и удаляет из списка закрытых, если она там
|была.
		    
		    stereotype 	"CListenerPlugin"
		    language   	"MDA Generator")
		(object Class "OpenDiscussionManager"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"SELF GENERATED FILE (java)"
			    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/ConfluencePlugins/DiscussionsSupport/OpenDiscussionManager.java")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*45B72EBE01F4_CUSTOM_IMPORT*"
			    value      	"//#UC START# *45B72EBE01F4_CUSTOM_IMPORT*¤import com.atlassian.confluence.setup.settings.SettingsManager;¤import com.atlassian.confluence.user.UserAccessor;¤import com.atlassian.confluence.labels.LabelManager;¤import com.atlassian.confluence.search.actions.SearchBean;¤import com.atlassian.confluence.search.actions.SearchQueryBean;¤import com.atlassian.confluence.search.actions.SearchResultWithExcerpt;¤import com.atlassian.confluence.core.Addressable;¤import com.atlassian.confluence.spaces.SpaceManager;¤import com.atlassian.confluence.pages.PageManager;¤import com.atlassian.confluence.pages.AbstractPage;¤import com.atlassian.confluence.pages.Comment;¤import com.atlassian.confluence.core.ContentEntityObject;¤import com.atlassian.bonnie.Searcher;¤import com.atlassian.bonnie.AnyTypeObjectDao;¤import bucket.core.actions.PaginationSupport;¤import com.atlassian.confluence.core.ContentPropertyManager;¤import com.thoughtworks.xstream.XStream;¤import com.opensymphony.util.TextUtils;¤import java.util.*;¤//#UC END# *45B72EBE01F4_CUSTOM_IMPORT*")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*45B72EBE01F4_CUSTOM_CLASS_DEFINITION*"
			    value      	"//#UC START# *45B72EBE01F4_CUSTOM_CLASS_DEFINITION*¤//#UC END# *45B72EBE01F4_CUSTOM_CLASS_DEFINITION*")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*45B72EBE01F4_CUSTOM_METHODS_AND_DATA*"
			    value      	(value Text 
|//#UC START# *45B72EBE01F4_CUSTOM_METHODS_AND_DATA*¤	static public final String DISCUSSION_LABEL = "open";¤	static public final String COMMENT_DISCUSSION_LABEL = "commentopen";¤	static public final String COMMENT_SUMMARY_LABEL = "summarycomment";¤¤	private ContentPropertyManager contentPropertyManager = null;¤	private XStream xStream = null;¤¤	private SettingsManager settingsManager = null;¤	private PageManager pageManager = null;¤	private SpaceManager spaceManager = null;¤	private UserAccessor userAccessor = null;¤	private LabelManager labelManager = null;¤	private Searcher searcher = null;¤	private AnyTypeObjectDao anyTypeObjectDao = null;¤¤	private class PageNotFound extends Exception {¤		static final private long serialVersionUID = 0L;¤		private long pageId = 0L;¤		public PageNotFound (long pageId) {¤			this.pageId = pageId;¤		}¤		public long getPageId () {¤			return this.pageId;¤		}¤	}¤¤	public Discussion2 createDiscussion (AbstractPage page) {¤		try {¤			Comment comment = OpenDiscussionManager.findOldestComment (this.pageManager, page);¤			if (comment != null) {¤				return new Discussion2 (¤						page.getId ()¤						, comment.getId ()¤						, comment.getCreatorName ()¤						, comment.getCreationDate ()¤				);¤			} else {¤				return new Discussion2 (¤						page.getId ()¤						, getCreatorName (page)¤						, getDate (page)¤				);¤			}¤		} catch (Exception e) {¤			System.err.println ("OpenDiscussionManager::createDiscussion: exception: " + e.getMessage ());¤			return null;¤		}¤	}¤¤	protected DiscussionList load_discussion_list ()  throws Exception {¤		ClassLoader callersLoader = Thread.currentThread ().getContextClassLoader ();¤		DiscussionList list = new DiscussionList ();¤		try {¤			String query = new String ("labelText:open");¤			SearchQueryBean sqb = new SearchQueryBean (this.searcher, this.spaceManager, this.userAccessor, this.labelManager, this.settingsManager);¤			sqb.setQueryString (query);¤			/*if (params.containsKey ("spaceKey")) 	sqb.setSpaceKey ((String) params.get ("spaceKey"));¤			if (params.containsKey ("type"))  sqb.setType((String) params.get ("type"));¤			if (params.containsKey ("modified"))  sqb.setLastModified ((String) params.get ("modified"));*/¤			SearchBean sb = new SearchBean ();¤			int maxResults = 10000;¤			sb.setPaginationSupport (new PaginationSupport (maxResults));¤			sb.setAnyTypeObjectDao (this.anyTypeObjectDao);¤			sb.setSearcher (this.searcher);¤			List searchResults = sb.search (sqb.buildQuery ());¤¤			Thread.currentThread ().setContextClassLoader (getClass ().getClassLoader ());¤¤			final int countToShow = searchResults.size ();¤			for (int i = 0; i < countToShow; ++i) {¤				SearchResultWithExcerpt result = (SearchResultWithExcerpt) searchResults.get (i);¤				Addressable addressable = (Addressable) result.getResultObject ();¤				if ((addressable != null) && (addressable instanceof ContentEntityObject)) {¤					Discussion2 discussion = make_discussion ((ContentEntityObject)addressable);¤					if (discussion != null) {¤						list.add (discussion);¤					}¤				} else {¤					System.err.println ("OpenDiscussionManager::load_discussion_list: page is not a type of ContentEntityObject!!!");¤				}¤			}¤			list.sort_by_date ();¤			System.out.println ("OpenDiscussionManager::load_discussion_list: OK. size=" + list.size ());¤		} finally {¤			// return things to as they were before we started messing about with the classloader.¤			Thread.currentThread ().setContextClassLoader (callersLoader);¤		}¤		return list;¤	}¤¤	static public Comment findOldestComment (PageManager pageManager, AbstractPage page) {¤		List comments = page.getComments ();¤		if (comments == null) {¤			System.out.println ("OpenDiscussionManager::findOldestComment: the page id=" + page.getId () + " has not had any comments.");¤			return null;¤		}¤		Comment last_comment = null;¤		final int commentsCount = comments.size ();¤		for (int i = 0; i < commentsCount; ++i) {¤			Comment comment = (Comment)comments.get (i);¤			if ((last_comment == null) || (last_comment.getCreationDate ().compareTo (comment.getCreationDate ()) < 0)) {¤				last_comment = comment;¤			}¤		}¤		return last_comment;¤	}¤¤	private Discussion2 make_discussion (ContentEntityObject entity) {¤		Discussion2 discussion = loadPrevOpenDiscussionList (entity);¤		if (discussion == null) {¤			AbstractPage page = getPageByEntity (entity);¤			if (page == null) {¤				System.err.println ("OpenDiscussionManager::make_discussion: discussion id " + entity.getId () + " is not a page.");¤			} else {¤				discussion = createDiscussion (page);¤			}¤		}¤		return discussion;¤	}¤¤	private String getCreatorName (ContentEntityObject entity) {¤		if (entity.getLastModifierName () != null) {¤			return entity.getLastModifierName ();¤		} else {¤			return entity.getCreatorName ();¤		}¤	}¤	private Date getDate (ContentEntityObject entity) {¤		if (entity.getLastModificationDate () != null) {¤			return entity.getLastModificationDate ();¤		} else {¤			return entity.getCreationDate ();¤		}¤	}¤¤	private AbstractPage getPageByEntity (ContentEntityObject entity) {¤		AbstractPage page = null;¤		if (entity instanceof AbstractPage) {¤			page = (AbstractPage)entity;¤		} else {¤			page = pageManager.getAbstractPage (entity.getId ());¤		}¤		return page;¤	}¤¤	private Discussion2 loadPrevOpenDiscussionList (ContentEntityObject entity) {¤		try {¤			String odAsXml = this.contentPropertyManager.getTextProperty (entity, createKey (entity.getId ()));¤			return load (odAsXml);¤		} catch (Exception e) {¤			System.err.println ("OpenDiscussionManager::loadPrevOpenDiscussionList: exception: " + e.getMessage ());¤			return null;¤		}¤	}¤¤	private Discussion2 load (String odAsXml) {¤		if (TextUtils.stringSet (odAsXml)) {¤			Object o = this.xStream.fromXML (odAsXml);¤			if (o instanceof Discussion2) {¤				return (Discussion2) o;¤			} else if (o instanceof Discussion) {¤				return new Discussion2 ((Discussion) o);¤			}¤			System.err.println (¤				"OpenDiscussionManager::load: object '" + o.getClass ().getSimpleName ()¤				+ "' is not any kind of discussion."¤			);¤		}¤		return null;¤	}¤¤	static public String createKey (long pageId) {¤		return "garant.opendiscussion:" + Long.toString(pageId);¤	}¤¤	private void saveDiscussion (Discussion2 od) throws PageNotFound {¤		try {¤			AbstractPage page = this.pageManager.getAbstractPage (od.getPageId ());¤			if (page == null) {¤				throw new PageNotFound (od.getPageId ());¤			}¤			this.contentPropertyManager.setTextProperty (page, createKey (od.getPageId ()), this.xStream.toXML (od));¤		} catch (PageNotFound e) {¤			throw e;¤		} catch (Exception e) {¤			System.err.println ("OpenDiscussionManager::saveDiscussion: Exception: " + e.getMessage ());¤		}¤	}¤¤	public void saveDiscussionList () {¤		if (this.list != null) {¤			do {¤				try {¤					final int size = this.list.size ();¤					for (int i = 0; i < size; ++i) {¤						saveDiscussion (list.get (i));¤					}¤				} catch (PageNotFound e) {¤					System.err.println ("OpenDiscussionManager::saveDiscussionList: discussion id " + e.getPageId () + " is not a page.");¤					this.list.remove_by_page(e.getPageId ());¤					continue;¤				}¤			} while (false);¤		}¤	}¤¤	public void setSearcher(Searcher searcher) {¤		this.searcher = searcher;¤	}¤	public void setSpaceManager(SpaceManager spaceManager) {¤		this.spaceManager = spaceManager;¤	}¤	public void setPageManager(PageManager pageManager) {¤		this.pageManager = pageManager;¤	}¤	public void setUserAccessor(UserAccessor userAccessor) {¤		this.userAccessor = userAccessor;¤	}¤	public void setLabelManager(LabelManager labelManager) {¤		this.labelManager = labelManager;¤	}¤	public void setAnyTypeObjectDao(AnyTypeObjectDao anyTypeObjectDao) {¤		this.anyTypeObjectDao = anyTypeObjectDao;¤	}¤	public void setContentPropertyManager (ContentPropertyManager contentPropertyManager) {¤		this.contentPropertyManager = contentPropertyManager;¤	}¤	public void setxStream (XStream xStream) {¤		this.xStream = xStream;¤		this.xStream.alias ("Discussion2", Discussion2.class);¤		this.xStream.alias ("UserDate", UserDate.class);¤	}¤	public void setSettingsManager (SettingsManager settingsManager) {¤		this.settingsManager = settingsManager;¤	}¤	//#UC END# *45B72EBE01F4_CUSTOM_METHODS_AND_DATA*
			    )))
		    quid       	"45B72EBE01F4"
		    documentation 	"Менеджер открытых дискуссий."
		    stereotype 	"CComponentPlugin"
		    superclasses 	(list inheritance_relationship_list
			(object Inheritance_Relationship
			    quid       	"460A5C5E009C"
			    supplier   	"Logical View::MDProcess::ConfluencePlugins::DiscussionsSupport::DiscussionManagerBase"
			    quidu      	"460A5BE702FD"))
		    language   	"MDA Generator")
		(object Class "OpenDiscussionsMacro"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"SELF GENERATED FILE (java)"
			    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/ConfluencePlugins/DiscussionsSupport/OpenDiscussionsMacro.java")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*45B72EE10213_CUSTOM_IMPORT*"
			    value      	"//#UC START# *45B72EE10213_CUSTOM_IMPORT*¤import com.atlassian.confluence.util.GeneralUtil;¤import com.atlassian.spring.container.ContainerManager;¤import com.atlassian.user.User;¤¤import org.radeox.macro.parameter.MacroParameter;¤import java.util.*;¤//#UC END# *45B72EE10213_CUSTOM_IMPORT*")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*45B72EE10213_CUSTOM_CLASS_DEFINITION*"
			    value      	"//#UC START# *45B72EE10213_CUSTOM_CLASS_DEFINITION*¤//#UC END# *45B72EE10213_CUSTOM_CLASS_DEFINITION*")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*45B72EE10213_CUSTOM_OPERATION_DEFENITION*"
			    value      	(value Text 
|//#UC START# *45B72EE10213_CUSTOM_OPERATION_DEFENITION*¤	//#UC END# *45B72EE10213_CUSTOM_OPERATION_DEFENITION*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*45B72EE10213_CUSTOM_ABSTRACT*"
			    value      	(value Text 
|//#UC START# *45B72EE10213_CUSTOM_ABSTRACT*¤	//#UC END# *45B72EE10213_CUSTOM_ABSTRACT*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*45B72EE10213_CUSTOM_METHODS_AND_DATA*"
			    value      	(value Text 
|//#UC START# *45B72EE10213_CUSTOM_METHODS_AND_DATA*¤	public String getName() {¤        return "OpenDiscussionsMacro";¤    }¤¤	protected boolean isOpenDiscussion () {¤		return true;¤	}¤¤	protected List<Discussion2> getDiscussionList (Set<String> spaces, MacroParameter macroParameter, User user) {¤		int ago_from = get_int (parseParameterForKey (macroParameter, "ago_from"), 0);¤		int ago_to = get_int (parseParameterForKey (macroParameter, "ago_to"), 999999999);¤¤		List<Discussion2> resList = Collections.synchronizedList (new ArrayList<Discussion2> ());¤		DiscussionList discussionList = getDiscussionManager ().getDiscussions ();¤		int size = discussionList.size ();¤		for (int i = 0; i < size; ++i) {¤			Discussion2 od = discussionList.get (i);¤			if (¤				!GeneralUtil.isInLastDays (od.getDate (), ago_from)¤				&& GeneralUtil.isInLastDays (od.getDate (), ago_to)¤			) {¤				if (isAppropriatePage (od.getPageId (), spaces, user)) {¤					resList.add (od);¤				}¤			}¤		}¤		if (get_int (parseParameterForKey (macroParameter, "sort_dir"), 0) == 0) {¤			Collections.sort (resList, new DiscussionList.ComparatorByDateIncrease ());¤		} else {¤			Collections.sort (resList, new DiscussionList.ComparatorByDateDecrease ());¤		}¤		return resList;¤	}¤¤	protected DiscussionManagerBase getDiscussionManager () {¤		if (this.discussionManager == null) {¤			this.discussionManager = (OpenDiscussionManager) ContainerManager.getInstance ().getContainerContext ().getComponent ("ru.garant.MDProcess.ConfluencePlugins.DiscussionsSupport.OpenDiscussionManager");¤		}¤		return this.discussionManager;¤	}¤	private OpenDiscussionManager discussionManager = null;¤	//#UC END# *45B72EE10213_CUSTOM_METHODS_AND_DATA*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*45B72EE10213_ISINLINE_IMPLEMETATION*"
			    value      	(value Text 
|//#UC START# *45B72EE10213_ISINLINE_IMPLEMETATION*¤		return false;¤		//#UC END# *45B72EE10213_ISINLINE_IMPLEMETATION*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*45B72EE10213_HASBODY_IMPLEMETATION*"
			    value      	(value Text 
|//#UC START# *45B72EE10213_HASBODY_IMPLEMETATION*¤		return false;¤		//#UC END# *45B72EE10213_HASBODY_IMPLEMETATION*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*45B72EE10213_GETBODYRENDERMODE_IMPLEMETATION*"
			    value      	(value Text 
|//#UC START# *45B72EE10213_GETBODYRENDERMODE_IMPLEMETATION*¤		return RenderMode.NO_RENDER;¤		//#UC END# *45B72EE10213_GETBODYRENDERMODE_IMPLEMETATION*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*45B72EE10213_EXECUTE_IMPLEMETATION*"
			    value      	(value Text 
|//#UC START# *45B72EE10213_EXECUTE_IMPLEMETATION*¤		try {¤			// now create a simple velocity context and render a template for the output¤			Map<String, Object> contextMap = MacroUtils.defaultVelocityContext ();¤			String strHeader = (String)parameters.get ("header");¤			if (strHeader != null) {¤				contextMap.put ("header", strHeader);¤			}¤			String strSpace =  (String)parameters.get ("space");¤			if (strSpace != null) {¤				contextMap.put ("curSpace", strSpace);¤			}¤¤			String strStartLines = (String)parameters.get ("lines");¤			if (strStartLines == null) {¤				contextMap.put ("lines", new Integer (999999));¤			} else {¤				contextMap.put ("lines", new Integer (strStartLines));¤			}¤			String strInc = (String)parameters.get ("inc");¤			if (strInc == null) {¤				contextMap.put ("inc", new Integer (999999));¤			} else {¤				contextMap.put ("inc", new Integer (strInc));¤			}¤			User user = AuthenticatedUserThreadLocal.getUser ();¤			if (user != null) { // if the user was logged¤				contextMap.put ("curUser", user.getName ());¤			}¤			//¤			int intAgoFrom = get_int ((String)parameters.get ("ago_from"), 0);¤			int intAgoTo = get_int ((String)parameters.get ("ago_to"), 999999999);¤			List<Discussion2> list = getDiscussionList (strSpace, intAgoFrom, intAgoTo);¤			if (get_int ((String)parameters.get ("sort_dir"), 0) == 0) {¤				Collections.sort (list, new DiscussionList.ComparatorByDateIncrease ());¤			} else {¤				Collections.sort (list, new DiscussionList.ComparatorByDateDecrease ());¤			}¤			contextMap.put ("discussionList", list);¤¤			contextMap.put ("open_discussion", true);¤			contextMap.put ("maxRecentlyUpdatedPageCount", "maxRecentlyUpdatedPageCount" + this.getClass ().getSimpleName ());¤¤			contextMap.put ("discussionmanager", getOpenDiscussionManager ());¤			contextMap.put ("pagemanager", this.pageManager);¤			contextMap.put ("commentmanager", this.commentManager);¤			ContentEntityObject contentObject = ((PageContext)renderContext).getEntity ();¤			contextMap.put ("content", contentObject);¤¤			return VelocityUtils.getRenderedTemplate ("OpenDiscussionsMacro.vm", contextMap);¤		} catch (Exception e) {¤			System.err.println ("OpenDiscussionsMacro:execute: error:" + e.getMessage ());¤			throw new MacroException(e.getMessage());¤		}¤	//#UC END# *45B72EE10213_EXECUTE_IMPLEMETATION*
			    ))
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"need UC"
			    value      	"true"))
		    quid       	"45B72EE10213"
		    documentation 	"Макрос, который показывает на странице список активных (открытых) обсуждений."
		    stereotype 	"CMacroPlugin"
		    superclasses 	(list inheritance_relationship_list
			(object Inheritance_Relationship
			    quid       	"460BB55B0138"
			    supplier   	"Logical View::MDProcess::ConfluencePlugins::DiscussionsSupport::DiscussionsMacroBase"
			    quidu      	"460A5C2100AB"))
		    language   	"MDA Generator")
		(object Class "DiscussionList"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"SELF GENERATED FILE (java)"
			    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/ConfluencePlugins/DiscussionsSupport/DiscussionList.java")
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"Need assign op"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"Need copy ctor"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"Need ref count"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"Need unsorted less"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"debug log"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"ifdef"
			    value      	"")
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"local supervisor"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"need UC"
			    value      	"true")
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"no base class"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"non virtual base"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"singleton"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*45B72F5001D4_CUSTOM_IMPORT*"
			    value      	"//#UC START# *45B72F5001D4_CUSTOM_IMPORT*¤import java.util.*;¤//#UC END# *45B72F5001D4_CUSTOM_IMPORT*")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*45B72F5001D4_CUSTOM_CLASS_DEFINITION*"
			    value      	"//#UC START# *45B72F5001D4_CUSTOM_CLASS_DEFINITION*¤//#UC END# *45B72F5001D4_CUSTOM_CLASS_DEFINITION*")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*45B72F5001D4_CUSTOM_METHODS_AND_DATA*"
			    value      	(value Text 
|//#UC START# *45B72F5001D4_CUSTOM_METHODS_AND_DATA*¤¤	static public class ComparatorByDateIncrease implements Comparator<Discussion2> {¤		public int compare (Discussion2 o1, Discussion2 o2) {¤			return o2.getDate ().compareTo (o1.getDate ());¤		}¤		public boolean equals (Discussion2 obj) {¤			return true;¤		}¤	}¤	static public class ComparatorByDateDecrease extends ComparatorByDateIncrease {¤		public int compare (Discussion2 o1, Discussion2 o2) {¤			return super.compare (o2, o1);¤		}¤	}¤¤	public int size () {¤		return this.list.size ();¤	}¤¤	public Discussion2 get (int i) {¤		return this.list.get (i);¤	}¤¤	public Discussion2 get_by_page (long pageId) {¤		final int i = find_by_page (pageId);¤		if (i < 0) {¤			return null;¤		}¤		return this.list.get (i);¤	}¤¤	public Discussion2 get_by_comment (long commentId) {¤		final int len = this.list.size ();¤		for (int i = 0; i < len; ++i) {¤			if (this.list.get (i).getCommentId () == commentId) {¤				return this.list.get (i);¤			}¤		}¤		return null;¤	}¤¤	public void add (Discussion2 discussion) {¤		final int iPage = find_by_page (discussion.getPageId ());¤		if (iPage < 0) {¤			this.list.add (0, discussion);¤		} else {¤			Discussion2 prev_discussion = this.list.get (iPage);¤			prev_discussion.update (discussion);¤		}¤	}¤¤	public void sort_by_date () {¤		Collections.sort (this.list, new ComparatorByDateIncrease ());¤	}¤¤	public void remove_by_page (long pageId) {¤		final int i = find_by_page (pageId);¤		if (i >= 0) {¤			this.list.remove (i);¤		}¤	}¤¤	private int find_by_page (long pageId) {¤		final int len = this.list.size ();¤		for (int i = 0; i < len; ++i) {¤			if (this.list.get (i).getPageId () == pageId) {¤				return i;¤			}¤		}¤		return -1;¤	}¤	//#UC END# *45B72F5001D4_CUSTOM_METHODS_AND_DATA*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"SELF GENERATED FILE (cpp)"
			    value      	"")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"SELF GENERATED FILE (h)"
			    value      	"")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ImplementSelectType"
			    value      	"all")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"OverloadSelectType"
			    value      	"include"))
		    quid       	"45B72F5001D4"
		    documentation 	"OpenDiscussionList"
		    stereotype 	"SimpleClass"
		    language   	"MDA Generator"
		    nestedClasses 	(list nestedClasses
			(object Class "vec"
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"AbstarctOperation"
				    value      	"regular")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"IsNative"
				    value      	"false"))
			    quid       	"4613A1BB01D4"
			    stereotype 	"Vector")))
		(object Class "Discussion"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"SELF GENERATED FILE (java)"
			    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/ConfluencePlugins/DiscussionsSupport/Discussion.java")
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"Need assign op"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"Need copy ctor"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"Need ref count"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"Need unsorted less"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"debug log"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"ifdef"
			    value      	"")
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"local supervisor"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"need UC"
			    value      	"true")
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"no base class"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"non virtual base"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"singleton"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*45B72F6E02EE_CUSTOM_IMPORT*"
			    value      	"//#UC START# *45B72F6E02EE_CUSTOM_IMPORT*¤import java.util.*;¤//#UC END# *45B72F6E02EE_CUSTOM_IMPORT*")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*45B72F6E02EE_CUSTOM_CLASS_DEFINITION*"
			    value      	"//#UC START# *45B72F6E02EE_CUSTOM_CLASS_DEFINITION*¤//#UC END# *45B72F6E02EE_CUSTOM_CLASS_DEFINITION*")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*45B72F6E02EE_CUSTOM_METHODS_AND_DATA*"
			    value      	(value Text 
|//#UC START# *45B72F6E02EE_CUSTOM_METHODS_AND_DATA*¤	private long pageId = 0;¤	private long commentId = 0;¤	private String owner = null;¤	private Date date = null;¤	private List<String> users = Collections.synchronizedList (new ArrayList<String> ());¤¤	public Discussion () {¤	}¤¤	public Discussion (¤		long pageId¤		, long commentId¤		, String owner¤		, Date date¤	) {¤		this.pageId = pageId;¤		this.commentId = commentId;¤		this.owner = owner;¤		this.date = date;¤	}¤¤	public Discussion (¤		long pageId¤		, String owner¤		, Date date¤	) {¤		this.pageId = pageId;¤		this.date = date;¤		this.owner = owner;¤		this.commentId = 0;¤	}¤¤	// special for converting to Discussion2¤	public List<String> getUsers () {¤		return this.users;¤	}¤	public long getPageId () {¤		return this.pageId;¤	}¤¤	public long getCommentId () {¤		return this.commentId;¤	}¤¤	public String getOwner () {¤		return this.owner;¤	}¤¤	public Date getDate () {¤		return this.date;¤	}¤¤	public void addUser (String userName) {¤		this.users.add (userName);¤	}¤¤	public boolean hasUser (String userName) {¤		return this.users.contains(userName);¤	}¤¤	public void resetUsers () {¤		this.users.clear();¤	}¤	//#UC END# *45B72F6E02EE_CUSTOM_METHODS_AND_DATA*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"SELF GENERATED FILE (cpp)"
			    value      	"")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"SELF GENERATED FILE (h)"
			    value      	""))
		    quid       	"45B72F6E02EE"
		    documentation 	"OpenDiscussion"
		    stereotype 	"SimpleClass"
		    language   	"MDA Generator")
		(object Class "PageListener"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"SELF GENERATED FILE (java)"
			    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/ConfluencePlugins/DiscussionsSupport/PageListener.java")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*45BDE64A004E_CUSTOM_IMPORT*"
			    value      	"//#UC START# *45BDE64A004E_CUSTOM_IMPORT*¤import com.atlassian.confluence.event.events.content.page.PageViewEvent;¤import com.atlassian.confluence.event.events.content.page.PageUpdateEvent;¤import com.atlassian.confluence.event.events.content.blogpost.BlogPostViewEvent;¤import com.atlassian.confluence.event.events.content.blogpost.BlogPostUpdateEvent;¤import com.atlassian.confluence.pages.AbstractPage;¤import com.atlassian.confluence.user.AuthenticatedUserThreadLocal;¤import com.atlassian.user.User;¤import com.atlassian.spring.container.ContainerManager;¤//#UC END# *45BDE64A004E_CUSTOM_IMPORT*")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*45BDE64A004E_CUSTOM_CLASS_DEFINITION*"
			    value      	"//#UC START# *45BDE64A004E_CUSTOM_CLASS_DEFINITION*¤//#UC END# *45BDE64A004E_CUSTOM_CLASS_DEFINITION*")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*45BDE64A004E_CONTENT*"
			    value      	(value Text 
|//#UC START# *45BDE64A004E_CONTENT*¤		PageViewEvent.class¤		, PageUpdateEvent.class¤		, BlogPostViewEvent.class¤		, BlogPostUpdateEvent.class¤		//#UC END# *45BDE64A004E_CONTENT*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*45BDE64A004E_CUSTOM_OPERATION_DEFENITION*"
			    value      	(value Text 
|//#UC START# *45BDE64A004E_CUSTOM_OPERATION_DEFENITION*¤	//#UC END# *45BDE64A004E_CUSTOM_OPERATION_DEFENITION*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*45BDE64A004E_GETHANDLEDEVENTCLASSES_IMPLEMETATION*"
			    value      	(value Text 
|//#UC START# *45BDE64A004E_GETHANDLEDEVENTCLASSES_IMPLEMETATION*¤		return handledClasses;¤		//#UC END# *45BDE64A004E_GETHANDLEDEVENTCLASSES_IMPLEMETATION*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*45BDE64A004E_HANDLEEVENT_IMPLEMETATION*"
			    value      	(value Text 
|//#UC START# *45BDE64A004E_HANDLEEVENT_IMPLEMETATION*¤		try {¤			User user = AuthenticatedUserThreadLocal.getUser ();¤			if (event instanceof PageViewEvent) {¤				PageViewEvent pageViewEvent  = (PageViewEvent)event;¤				addUser2OpenDiscussion (pageViewEvent.getPage (), user);¤				addUser2ClosedDiscussion (pageViewEvent.getPage (), user);¤			} else if (event instanceof PageUpdateEvent) {¤				PageUpdateEvent pageUpdateEvent  = (PageUpdateEvent)event;¤				addUser2OpenDiscussion (pageUpdateEvent.getPage (), user);¤			} else if (event instanceof BlogPostViewEvent) {¤				BlogPostViewEvent pageViewEvent  = (BlogPostViewEvent)event;¤				addUser2OpenDiscussion (pageViewEvent.getBlogPost (), user);¤				addUser2ClosedDiscussion (pageViewEvent.getBlogPost (), user);¤			} else if (event instanceof BlogPostUpdateEvent) {¤				BlogPostUpdateEvent pageUpdateEvent  = (BlogPostUpdateEvent)event;¤				addUser2OpenDiscussion (pageUpdateEvent.getBlogPost (), user);¤			} else {¤				System.err.println (¤					" ViewPageListener::handleEvent: ERROR! Event type is unknown '"¤					+ event.getClass ().getName () + "'"¤				);¤			}¤		} catch (Exception e) {¤			System.err.println ("ViewPageListener::handleEvent: ERROR: " + e);¤		}¤		//#UC END# *45BDE64A004E_HANDLEEVENT_IMPLEMETATION*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*45BDE64A004E_CUSTOM_ABSTRACT*"
			    value      	(value Text 
|//#UC START# *45BDE64A004E_CUSTOM_ABSTRACT*¤	//#UC END# *45BDE64A004E_CUSTOM_ABSTRACT*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*45BDE64A004E_CUSTOM_METHODS_AND_DATA*"
			    value      	(value Text 
|//#UC START# *45BDE64A004E_CUSTOM_METHODS_AND_DATA*¤	private OpenDiscussionManager openDiscussionManager = null;¤	private ClosedDiscussionManager closedDiscussionManager = null;¤¤	private OpenDiscussionManager getOpenDiscussionManager () {¤		if (this.openDiscussionManager == null) {¤			this.openDiscussionManager = (OpenDiscussionManager) ContainerManager.getComponent("ru.garant.MDProcess.ConfluencePlugins.DiscussionsSupport.OpenDiscussionManager");¤		}¤		if (this.openDiscussionManager == null) {¤			System.err.println ("ViewPageListener::getOpenDiscussionManager: can not find OpenDiscussionManager");¤		}¤		return this.openDiscussionManager;¤	}¤	private ClosedDiscussionManager getClosedDiscussionManager () {¤		if (this.closedDiscussionManager == null) {¤			this.closedDiscussionManager = (ClosedDiscussionManager) ContainerManager.getComponent("ru.garant.MDProcess.ConfluencePlugins.DiscussionsSupport.ClosedDiscussionManager");¤		}¤		if (this.closedDiscussionManager == null) {¤			System.err.println ("ViewPageListener::getClosedDiscussionManager: can not find ClosedDiscussionManager");¤		}¤		return this.closedDiscussionManager;¤	}¤¤	public void setOpenDiscussionManager (OpenDiscussionManager openDiscussionManager) {¤		this.openDiscussionManager = openDiscussionManager;¤	}¤	public void setClosedDiscussionManager (ClosedDiscussionManager closedDiscussionManager) {¤		this.closedDiscussionManager = closedDiscussionManager;¤	}¤¤	private void addUser2ClosedDiscussion (AbstractPage page, User user) {¤		if (user != null) { // if the user was logged¤			Discussion2 discussion = getClosedDiscussionManager ().getDiscussions ().get_by_page (page.getId ());¤			if (discussion != null) {¤				discussion.addUser (user.getName ());¤			}¤		}¤	}¤	private void addUser2OpenDiscussion (AbstractPage page, User user) {¤		if (user != null) { // if the user was logged¤			Discussion2 discussion = getOpenDiscussionManager ().getDiscussions ().get_by_page (page.getId ());¤			if (discussion != null) {¤				discussion.addUser (user.getName ());¤			}¤		}¤	}¤	//#UC END# *45BDE64A004E_CUSTOM_METHODS_AND_DATA*
			    )))
		    quid       	"45BDE64A004E"
		    documentation 	"Обрабатывает событие просмотра документа. Если по документу ведется дискусия, то отмечает, что текущий Пользователь смотрел данный документ, чтобы снять выделение в списке открытых и закрытых дискусий."
		    stereotype 	"CListenerPlugin"
		    language   	"MDA Generator")
		(object Class "SaveDiscussionsTrigger"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"cron-expression"
			    value      	"")
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"repeat-count"
			    value      	"1000000000")
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"repeat-interval"
			    value      	"3600000")
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"repeated"
			    value      	"true"))
		    quid       	"45BF2DCA0222"
		    documentation 	"Расписание для сохранения списка дискусий."
		    stereotype 	"CTriggerPlugin"
		    used_nodes 	(list uses_relationship_list
			(object Uses_Relationship
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"AbstarctOperation"
				    value      	"regular")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"IsNative"
				    value      	"false"))
			    quid       	"45BF2E3200AB"
			    stereotype 	"uses"
			    supplier   	"Logical View::MDProcess::ConfluencePlugins::DiscussionsSupport::SaveDiscussionsJob"
			    quidu      	"45BF2DF70242"))
		    language   	"MDA Generator")
		(object Class "SaveDiscussionsJob"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"SELF GENERATED FILE (java)"
			    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/ConfluencePlugins/DiscussionsSupport/SaveDiscussionsJob.java")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*45BF2DF70242_CUSTOM_IMPORT*"
			    value      	"//#UC START# *45BF2DF70242_CUSTOM_IMPORT*¤import com.atlassian.spring.container.ContainerManager;¤import java.util.Calendar;¤import java.text.DateFormat;¤//#UC END# *45BF2DF70242_CUSTOM_IMPORT*")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*45BF2DF70242_CUSTOM_CLASS_DEFINITION*"
			    value      	"//#UC START# *45BF2DF70242_CUSTOM_CLASS_DEFINITION*¤//#UC END# *45BF2DF70242_CUSTOM_CLASS_DEFINITION*")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*45BF2DF70242_CUSTOM_OPERATION_DEFENITION*"
			    value      	(value Text 
|//#UC START# *45BF2DF70242_CUSTOM_OPERATION_DEFENITION*¤	//#UC END# *45BF2DF70242_CUSTOM_OPERATION_DEFENITION*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*45BF2DF70242_DO_EXECUTE_IMPLEMETATION*"
			    value      	(value Text 
|//#UC START# *45BF2DF70242_DO_EXECUTE_IMPLEMETATION*¤		try {¤			getOpenDiscussionManager ().saveDiscussionList ();¤			getClosedDiscussionManager ().saveDiscussionList();¤			DiscussionList opened = getOpenDiscussionManager ().getDiscussions ();¤			DiscussionList closed = getClosedDiscussionManager ().getDiscussions ();¤			String strTime = DateFormat.getDateTimeInstance ().format (Calendar.getInstance ().getTime ());¤			System.out.println (¤					"SaveDiscussionsJob::doExecute: was saved "¤					+ opened.size () + " open discussions and "¤					+ closed.size () + " closed in " + strTime¤			);¤		} catch (Exception e) {¤			System.err.println ("SaveDiscussionsJob::doExecute: Exception: " + e.getMessage ());¤			throw new JobExecutionException (e);¤		}¤		//#UC END# *45BF2DF70242_DO_EXECUTE_IMPLEMETATION*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*45BF2DF70242_CUSTOM_ABSTRACT*"
			    value      	(value Text 
|//#UC START# *45BF2DF70242_CUSTOM_ABSTRACT*¤	//#UC END# *45BF2DF70242_CUSTOM_ABSTRACT*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*45BF2DF70242_CUSTOM_METHODS_AND_DATA*"
			    value      	(value Text 
|//#UC START# *45BF2DF70242_CUSTOM_METHODS_AND_DATA*¤	private OpenDiscussionManager openDiscussionManager = null;¤	private ClosedDiscussionManager closedDiscussionManager = null;¤¤	private OpenDiscussionManager getOpenDiscussionManager () {¤		if (this.openDiscussionManager == null) {¤			this.openDiscussionManager = (OpenDiscussionManager) ContainerManager.getInstance ().getContainerContext ().getComponent ("ru.garant.MDProcess.ConfluencePlugins.DiscussionsSupport.OpenDiscussionManager");¤		}¤		if (this.openDiscussionManager == null) {¤			System.err.println ("ViewPageListener::getOpenDiscussionManager: can not find OpenDiscussionManager");¤		}¤		return this.openDiscussionManager;¤	}¤	private ClosedDiscussionManager getClosedDiscussionManager () {¤		if (this.closedDiscussionManager == null) {¤			this.closedDiscussionManager = (ClosedDiscussionManager) ContainerManager.getInstance ().getContainerContext ().getComponent ("ru.garant.MDProcess.ConfluencePlugins.DiscussionsSupport.ClosedDiscussionManager");¤		}¤		if (this.closedDiscussionManager == null) {¤			System.err.println ("ViewPageListener::getClosedDiscussionManager: can not find ClosedDiscussionManager");¤		}¤		return this.closedDiscussionManager;¤	}¤¤	public void setOpenDiscussionManager (OpenDiscussionManager openDiscussionManager) {¤		this.openDiscussionManager = openDiscussionManager;¤	}¤	public void setClosedDiscussionManager (ClosedDiscussionManager closedDiscussionManager) {¤		this.closedDiscussionManager = closedDiscussionManager;¤	}¤	//#UC END# *45BF2DF70242_CUSTOM_METHODS_AND_DATA*
			    )))
		    quid       	"45BF2DF70242"
		    documentation 	"Выполняет сохранение дискусий между сессиями сервера Конфлюенс."
		    stereotype 	"CJobPlugin"
		    language   	"MDA Generator")
		(object Class "ClosedDiscussionMacro"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"SELF GENERATED FILE (java)"
			    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/ConfluencePlugins/DiscussionsSupport/ClosedDiscussionMacro.java")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*45E43B700203_CUSTOM_IMPORT*"
			    value      	"//#UC START# *45E43B700203_CUSTOM_IMPORT*¤import com.atlassian.spring.container.ContainerManager;¤import com.atlassian.user.User;¤¤import org.radeox.macro.parameter.MacroParameter;¤import java.util.*;¤//#UC END# *45E43B700203_CUSTOM_IMPORT*")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*45E43B700203_CUSTOM_CLASS_DEFINITION*"
			    value      	"//#UC START# *45E43B700203_CUSTOM_CLASS_DEFINITION*¤//#UC END# *45E43B700203_CUSTOM_CLASS_DEFINITION*")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*45E43B700203_CUSTOM_OPERATION_DEFENITION*"
			    value      	(value Text 
|//#UC START# *45E43B700203_CUSTOM_OPERATION_DEFENITION*¤	//#UC END# *45E43B700203_CUSTOM_OPERATION_DEFENITION*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*45E43B700203_EXECUTE_IMPLEMETATION*"
			    value      	(value Text 
|//#UC START# *45E43B700203_EXECUTE_IMPLEMETATION*¤		try {¤			// now create a simple velocity context and render a template for the output¤			Map defVelocityContext = MacroUtils.defaultVelocityContext ();¤			final Map<String, Object> contextMap = defVelocityContext;¤			String strHeader = (String)parameters.get ("header");¤			if (strHeader != null) {¤				contextMap.put ("header", strHeader);¤			}¤			String strSpace =  (String)parameters.get ("space");¤			if (strSpace != null) {¤				contextMap.put ("curSpace", strSpace);¤			}¤¤			String strStartLines = (String)parameters.get ("lines");¤			if (strStartLines == null) {¤				contextMap.put ("lines", new Integer (999999));¤			} else {¤				contextMap.put ("lines", new Integer (strStartLines));¤			}¤			String strInc = (String)parameters.get ("inc");¤			if (strInc == null) {¤				contextMap.put ("inc", new Integer (999999));¤			} else {¤				contextMap.put ("inc", new Integer (strInc));¤			}¤¤			User user = AuthenticatedUserThreadLocal.getUser ();¤			if (user != null) { // if the user was logged¤				contextMap.put ("curUser", user.getName ());¤			}¤¤			List<Discussion2> list = getDiscussionList (strSpace);¤			contextMap.put ("discussionList", list);¤¤			contextMap.put ("open_discussion", false);¤			contextMap.put ("maxRecentlyUpdatedPageCount", "maxRecentlyUpdatedPageCount" + this.getClass ().getSimpleName ());¤¤			contextMap.put ("discussionmanager", getClosedDiscussionManager ());¤			contextMap.put ("pagemanager", this.pageManager);¤			contextMap.put ("commentmanager", this.commentManager);¤			ContentEntityObject contentObject = ((PageContext)renderContext).getEntity ();¤			contextMap.put ("content", contentObject);¤¤			return VelocityUtils.getRenderedTemplate ("OpenDiscussionsMacro.vm", contextMap);¤		} catch (Exception e) {¤			System.err.println ("ClosedDiscussionMacro:execute: error:" + e.getMessage ());¤			throw new MacroException(e.getMessage());¤		}¤		//#UC END# *45E43B700203_EXECUTE_IMPLEMETATION*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*45E43B700203_ISINLINE_IMPLEMETATION*"
			    value      	(value Text 
|//#UC START# *45E43B700203_ISINLINE_IMPLEMETATION*¤		return false;¤		//#UC END# *45E43B700203_ISINLINE_IMPLEMETATION*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*45E43B700203_HASBODY_IMPLEMETATION*"
			    value      	(value Text 
|//#UC START# *45E43B700203_HASBODY_IMPLEMETATION*¤		return false;¤		//#UC END# *45E43B700203_HASBODY_IMPLEMETATION*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*45E43B700203_GETBODYRENDERMODE_IMPLEMETATION*"
			    value      	(value Text 
|//#UC START# *45E43B700203_GETBODYRENDERMODE_IMPLEMETATION*¤		return RenderMode.NO_RENDER;¤		//#UC END# *45E43B700203_GETBODYRENDERMODE_IMPLEMETATION*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*45E43B700203_CUSTOM_ABSTRACT*"
			    value      	(value Text 
|//#UC START# *45E43B700203_CUSTOM_ABSTRACT*¤	//#UC END# *45E43B700203_CUSTOM_ABSTRACT*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*45E43B700203_CUSTOM_METHODS_AND_DATA*"
			    value      	(value Text 
|//#UC START# *45E43B700203_CUSTOM_METHODS_AND_DATA*¤	public String getName() {¤		return "ClosedDiscussionMacro";¤	}¤¤	protected boolean isOpenDiscussion () {¤		return false;¤	}¤¤	protected List<Discussion2> getDiscussionList (Set<String> spaces, MacroParameter macroParameter, User user) {¤		List<Discussion2> resList = Collections.synchronizedList (new ArrayList<Discussion2> ());¤		DiscussionList discussionList = getDiscussionManager ().getDiscussions ();¤		final int size = discussionList.size ();¤		for (int i = 0; i < size; ++i) {¤			Discussion2 discussion = discussionList.get (i);¤			if (isAppropriatePage (discussion.getPageId (), spaces, user)) {¤				resList.add (discussion);¤			}¤		}¤		return resList;¤	}¤¤	protected DiscussionManagerBase getDiscussionManager () {¤		if (this.discussionManager == null) {¤			this.discussionManager = (ClosedDiscussionManager) ContainerManager.getInstance ().getContainerContext ().getComponent ("ru.garant.MDProcess.ConfluencePlugins.DiscussionsSupport.ClosedDiscussionManager");¤		}¤		return this.discussionManager;¤	}¤	private ClosedDiscussionManager discussionManager = null;¤	//#UC END# *45E43B700203_CUSTOM_METHODS_AND_DATA*
			    )))
		    quid       	"45E43B700203"
		    documentation 	"Макрос, который показывает на странице список закрытых обсуждений."
		    stereotype 	"CMacroPlugin"
		    superclasses 	(list inheritance_relationship_list
			(object Inheritance_Relationship
			    quid       	"461110FA00DA"
			    supplier   	"Logical View::MDProcess::ConfluencePlugins::DiscussionsSupport::DiscussionsMacroBase"
			    quidu      	"460A5C2100AB"))
		    language   	"MDA Generator")
		(object Class "ClosedDiscussionManager"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"SELF GENERATED FILE (java)"
			    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/ConfluencePlugins/DiscussionsSupport/ClosedDiscussionManager.java")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*45E447FE0203_CUSTOM_IMPORT*"
			    value      	"//#UC START# *45E447FE0203_CUSTOM_IMPORT*¤import java.sql.ResultSet;¤import com.atlassian.confluence.pages.PageManager;¤import com.opensymphony.util.TextUtils;¤import com.thoughtworks.xstream.XStream;¤import com.thoughtworks.xstream.core.BaseException;¤//#UC END# *45E447FE0203_CUSTOM_IMPORT*")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*45E447FE0203_CUSTOM_CLASS_DEFINITION*"
			    value      	"//#UC START# *45E447FE0203_CUSTOM_CLASS_DEFINITION*¤//#UC END# *45E447FE0203_CUSTOM_CLASS_DEFINITION*")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*45E447FE0203_CUSTOM_METHODS_AND_DATA*"
			    value      	(value Text 
|//#UC START# *45E447FE0203_CUSTOM_METHODS_AND_DATA*¤	private final String TABLE_NAME = "ClosedDiscussions";¤¤	private XStream xStream = null;¤	private PageManager pageManager = null;¤¤	public void saveDiscussionList () {¤		if (this.list != null) {¤			try {¤				final int size = this.list.size ();¤				for (int i = 0; i < size; ++i) {¤					saveDiscussion (list.get (i));¤				}¤			} catch (Exception e) {¤				System.err.println ("ClosedDiscussionManager::saveDiscussionList: Exception: " + e);¤			}¤		}¤	}¤¤	private void saveDiscussion (Discussion2 discussion) throws Exception {¤		do {¤			try {¤				if (this.sql == null) {¤					this.sql = new SQLExecutor (true);¤				}¤				String strDiscussion = this.xStream.toXML (discussion);¤				this.sql.updateQuery (¤						"INSERT INTO " + TABLE_NAME¤						+ " (page_id) VALUES (" + discussion.getPageId ()¤						+ ") ON DUPLICATE KEY UPDATE discussion='" + strDiscussion + "'"¤				);¤			} catch (SQLExecutor.TableUnexist e) {¤				if (createTable ()) {¤					continue;¤				}¤			} catch (BaseException e) {¤				System.err.println ("ClosedDiscussionManager::saveDiscussion: BaseException: " + e);¤			}¤		} while (false);¤	}¤¤	private boolean createTable () {¤		try {¤			this.sql.createTable (¤					"CREATE TABLE " + TABLE_NAME¤					+ "(`page_id` BIGINT UNSIGNED NOT NULL DEFAULT 0,`discussion` TEXT NOT NULL, PRIMARY KEY(`page_id`))"¤			);¤			System.out.println ("ClosedDiscussionManager::createTable: table '" + TABLE_NAME + "' has been just created successfully.");¤			return true;¤		} catch (Exception e) {¤			System.err.println ("ClosedDiscussionManager::createTable: Exception: " + e);¤			return false;¤		}¤	}¤¤	class DiscussionListRes implements SQLExecutor.SelectRes {¤		private DiscussionList dl = null;¤		public DiscussionListRes (DiscussionList dl) {¤			this.dl = dl;¤		}¤		public boolean process (int curRow, ResultSet rs) throws Exception {¤			try {¤				Discussion2 d = load (rs.getString ("discussion"));¤				if (d != null) {¤					if (pageManager.getAbstractPage (d.getPageId ()) == null) {¤						System.err.println ("DiscussionListRes::process: page " + d.getPageId () + " does not exist.");¤					} else {¤						this.dl.add (d);¤					}¤				}¤			} catch (BaseException e) {¤				System.err.println ("DiscussionListRes::process: BaseException: " + e);¤			}¤			return true;¤		}¤		private Discussion2 load (String odAsXml) {¤			if (TextUtils.stringSet (odAsXml)) {¤				Object o = xStream.fromXML (odAsXml);¤				if (o instanceof Discussion2) {¤					return (Discussion2) o;¤				} else if (o instanceof Discussion) {¤					return new Discussion2 ((Discussion) o);¤				}¤				System.err.println (¤					"ClosedDiscussionManager::load: object '" + o.getClass ().getSimpleName ()¤					+ "' is not any kind of discussion."¤				);¤			}¤			return null;¤		}¤	}¤¤	protected DiscussionList load_discussion_list ()  throws Exception {¤		DiscussionList dl = new DiscussionList ();¤		try {¤			if (this.sql == null) {¤				this.sql = new SQLExecutor (true);¤			}¤			String query = new String ("SELECT discussion FROM " + TABLE_NAME);¤			this.sql.selectQuery (query, new DiscussionListRes (dl));¤			System.out.println ("ClosedDiscussionManager::load_discussion_list: OK size=" + dl.size ());¤		} catch (Exception e) {¤			System.err.println ("ClosedDiscussionManager::load_discussion_list: exception: " + e);¤		}¤		return dl;¤	}¤¤	public void setxStream (XStream xStream) {¤		this.xStream = xStream;¤		this.xStream.alias ("Discussion2", Discussion2.class);¤		this.xStream.alias ("UserDate", UserDate.class);¤	}¤	public void setPageManager(PageManager pageManager) {¤		this.pageManager = pageManager;¤	}¤	//#UC END# *45E447FE0203_CUSTOM_METHODS_AND_DATA*
			    )))
		    quid       	"45E447FE0203"
		    documentation 	"Менеджер закрытых дискуссий."
		    stereotype 	"CComponentPlugin"
		    superclasses 	(list inheritance_relationship_list
			(object Inheritance_Relationship
			    quid       	"460A5C6201E4"
			    supplier   	"Logical View::MDProcess::ConfluencePlugins::DiscussionsSupport::DiscussionManagerBase"
			    quidu      	"460A5BE702FD"))
		    language   	"MDA Generator")
		(object Class "SQLExecutor"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"Need assign op"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"Need copy ctor"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"Need ref count"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"Need unsorted less"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"debug log"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"ifdef"
			    value      	"")
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"local supervisor"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"need UC"
			    value      	"true")
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"no base class"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"non virtual base"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"singleton"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"SELF GENERATED FILE (java)"
			    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/ConfluencePlugins/DiscussionsSupport/SQLExecutor.java")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*45E54AAA0261_CUSTOM_IMPORT*"
			    value      	"//#UC START# *45E54AAA0261_CUSTOM_IMPORT*¤import java.sql.Connection;¤import java.sql.DriverManager;¤import java.sql.ResultSet;¤import java.sql.SQLException;¤import java.sql.Statement;¤import com.mysql.jdbc.MysqlErrorNumbers;¤//#UC END# *45E54AAA0261_CUSTOM_IMPORT*")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*45E54AAA0261_CUSTOM_CLASS_DEFINITION*"
			    value      	"//#UC START# *45E54AAA0261_CUSTOM_CLASS_DEFINITION*¤//#UC END# *45E54AAA0261_CUSTOM_CLASS_DEFINITION*")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*45E54AAA0261_CUSTOM_METHODS_AND_DATA*"
			    value      	(value Text 
|//#UC START# *45E54AAA0261_CUSTOM_METHODS_AND_DATA*¤	private final String DB_NAME = "ConflSupportDB";¤	private final String USER_NAME = "confluenceuser";¤	private final String PASSWORD = "q";¤¤	public interface SelectRes {¤		public abstract boolean process (int curRow, ResultSet rs) throws Exception;¤	}¤¤	static private String makeErrorMsg (SQLException e) {¤		String erMsg = new String ();¤		erMsg += " SQLException: " + e.getMessage ();¤		erMsg += " SQLState: " + e.getSQLState ();¤		erMsg += " VendorError: " + e.getErrorCode ();¤		return erMsg;¤	}¤¤	public class GarException extends Exception {¤		static final long serialVersionUID = 1977061220001128L;¤		private GarException (Exception e) {¤			super (e.getMessage ());¤		}¤		private GarException (SQLException e) {¤			super (makeErrorMsg (e));¤		}¤	}¤¤	public class TableUnexist extends GarException {¤		static final long serialVersionUID = 1977061220001128L;¤		private TableUnexist (SQLException e) {¤			super (e);¤		}¤	}¤	public class DupEntry extends GarException {¤		static final long serialVersionUID = 1977061220001129L;¤		private DupEntry (SQLException e) {¤			super (e);¤		}¤	}¤¤	private Connection conn = null;¤	private boolean inforce = false;¤¤	public SQLExecutor (boolean inforce) throws GarException {¤		try {¤			this.inforce = inforce;¤			Class.forName ("com.mysql.jdbc.Driver").newInstance ();¤			conn = DriverManager.getConnection (¤					"jdbc:mysql://localhost:3306/" + DB_NAME + "?autoReconnect=true&useUnicode=true&"¤					+ "user=" + USER_NAME + "&password=" + PASSWORD¤			);¤		} catch (Exception e) {¤			throw new GarException (e);¤		}¤	}¤¤	void createTable (String query)  throws GarException {¤		Statement stmt = null;¤		try {¤			stmt = conn.createStatement ();¤			stmt.execute (query);¤		} catch (Exception e) {¤			throw new GarException (e);¤		} finally {¤			closeStatement (stmt, "createTable");¤		}¤	}¤¤	void updateQuery (String query)  throws GarException {¤		Statement stmt = null;¤		try {¤			stmt = conn.createStatement ();¤			stmt.executeUpdate (query);¤		} catch (SQLException e) {¤			if (this.inforce == true && e.getErrorCode() == MysqlErrorNumbers.ER_NO_SUCH_TABLE) {¤				throw new TableUnexist (e);¤			} else if (e.getErrorCode() == MysqlErrorNumbers.ER_DUP_ENTRY) {¤				throw new DupEntry (e);¤			}¤			throw new GarException (e);¤		} catch (Exception e) {¤			throw new GarException (e);¤		} finally {¤			closeStatement (stmt, "updateQuery");¤		}¤	}¤¤	void selectQuery (String query, SelectRes res)  throws GarException {¤		Statement stmt = null;¤		ResultSet rs = null;¤		try {¤			stmt = conn.createStatement ();¤			if (stmt.execute (query)) {¤				rs = stmt.getResultSet ();¤			}¤			int iRow = 0;¤			while (rs.next ()) {¤				if (res.process (iRow, rs) == false) {¤					break;¤				}¤				++iRow;¤			}¤		} catch (SQLException e) {¤			if (this.inforce == true && e.getErrorCode() == MysqlErrorNumbers.ER_NO_SUCH_TABLE) {¤				throw new TableUnexist (e);¤			}¤			throw new GarException (e);¤		} catch (Exception e) {¤			throw new GarException (e);¤		} finally {¤			closeResultSet (rs, "selectQuery");¤			closeStatement (stmt, "selectQuery");¤		}¤	}¤¤	private void closeStatement (Statement stmt, String where) {¤		if (stmt != null) {¤	        try {¤	            stmt.close ();¤	        } catch (SQLException e) {¤	        	System.err.println ("When Statement was being closed occur: " + makeErrorMsg (e) + "in '" + where + "'");¤	        } catch (Exception e) {¤	        	System.err.println ("When Statement was being closed occur Exception: " + e.getMessage() + "in '" + where + "'");¤			} finally {¤				stmt = null;¤	        }¤	    }¤	}¤¤	private void closeResultSet (ResultSet rs, String where) {¤		if (rs != null) {¤	        try {¤	            rs.close ();¤	        } catch (SQLException e) {¤	        	System.err.println ("When ResultSet was being closed occur: " + makeErrorMsg (e) + "in '" + where + "'");¤	        } catch (Exception e) {¤	        	System.err.println ("When ResultSet was being closed occur Exception: " + e.getMessage() + "in '" + where + "'");¤	        } finally {¤	        	rs = null;¤	        }¤	    }¤	}¤	//#UC END# *45E54AAA0261_CUSTOM_METHODS_AND_DATA*
			    )))
		    quid       	"45E54AAA0261"
		    stereotype 	"SimpleClass"
		    language   	"MDA Generator")
		(object Class "LabelListener"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"SELF GENERATED FILE (java)"
			    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/ConfluencePlugins/DiscussionsSupport/LabelListener.java")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*45E581B202AF_CUSTOM_IMPORT*"
			    value      	"//#UC START# *45E581B202AF_CUSTOM_IMPORT*¤import com.atlassian.confluence.event.events.label.LabelRemoveEvent;¤import com.atlassian.confluence.labels.Label;¤import com.atlassian.confluence.pages.AbstractPage;¤import com.atlassian.spring.container.ContainerManager;¤//#UC END# *45E581B202AF_CUSTOM_IMPORT*")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*45E581B202AF_CUSTOM_CLASS_DEFINITION*"
			    value      	"//#UC START# *45E581B202AF_CUSTOM_CLASS_DEFINITION*¤//#UC END# *45E581B202AF_CUSTOM_CLASS_DEFINITION*")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*45E581B202AF_CONTENT*"
			    value      	(value Text 
|//#UC START# *45E581B202AF_CONTENT*¤		LabelRemoveEvent.class¤		//#UC END# *45E581B202AF_CONTENT*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*45E581B202AF_CUSTOM_OPERATION_DEFENITION*"
			    value      	(value Text 
|//#UC START# *45E581B202AF_CUSTOM_OPERATION_DEFENITION*¤	static private final String DISCUSSION_LABEL = "open";¤	//#UC END# *45E581B202AF_CUSTOM_OPERATION_DEFENITION*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*45E581B202AF_GETHANDLEDEVENTCLASSES_IMPLEMETATION*"
			    value      	(value Text 
|//#UC START# *45E581B202AF_GETHANDLEDEVENTCLASSES_IMPLEMETATION*¤		return handledClasses;¤		//#UC END# *45E581B202AF_GETHANDLEDEVENTCLASSES_IMPLEMETATION*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*45E581B202AF_HANDLEEVENT_IMPLEMETATION*"
			    value      	(value Text 
|//#UC START# *45E581B202AF_HANDLEEVENT_IMPLEMETATION*¤		if (event instanceof LabelRemoveEvent) {¤			LabelRemoveEvent label_remove_event = (LabelRemoveEvent)event;¤			Label label = label_remove_event.getLabel ();¤			if (label.getName ().compareTo (OpenDiscussionManager.DISCUSSION_LABEL) == 0) {¤				handleDiscussion ((AbstractPage)label_remove_event.getLabelled ());¤			}¤		} else {¤				System.err.println (¤					" LabelListener::handleEvent: ERROR! Event type is unknown '"¤					+ event.getClass ().getName () + "'"¤				);¤			}¤		//#UC END# *45E581B202AF_HANDLEEVENT_IMPLEMETATION*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*45E581B202AF_CUSTOM_ABSTRACT*"
			    value      	(value Text 
|//#UC START# *45E581B202AF_CUSTOM_ABSTRACT*¤	OpenDiscussionManager openDiscussionManager = null;¤	ClosedDiscussionManager closedDiscussionManager = null;¤	//#UC END# *45E581B202AF_CUSTOM_ABSTRACT*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*45E581B202AF_CUSTOM_METHODS_AND_DATA*"
			    value      	(value Text 
|//#UC START# *45E581B202AF_CUSTOM_METHODS_AND_DATA*¤¤¤	OpenDiscussionManager openDiscussionManager = null;¤	ClosedDiscussionManager closedDiscussionManager = null;¤¤	private void handleDiscussion (AbstractPage page) {¤		DiscussionList openDiscussionList = getOpenDiscussionManager ().getDiscussions ();¤		Discussion2 discussion = openDiscussionList.get_by_page (page.getId ());¤		if (discussion != null) {¤			DiscussionList closedDiscussionList = getClosedDiscussionManager ().getDiscussions ();¤			closedDiscussionList.add(discussion);¤			openDiscussionList.remove_by_page (page.getId ());¤		}¤	}¤	private OpenDiscussionManager getOpenDiscussionManager () {¤		if (this.openDiscussionManager == null) {¤			this.openDiscussionManager = (OpenDiscussionManager) ContainerManager.getInstance ().getContainerContext ().getComponent ("ru.garant.MDProcess.ConfluencePlugins.DiscussionsSupport.OpenDiscussionManager");¤		}¤		return this.openDiscussionManager;¤	}¤	private ClosedDiscussionManager getClosedDiscussionManager () {¤		if (this.closedDiscussionManager == null) {¤			this.closedDiscussionManager = (ClosedDiscussionManager) ContainerManager.getComponent("ru.garant.MDProcess.ConfluencePlugins.DiscussionsSupport.ClosedDiscussionManager");¤		}¤		return this.closedDiscussionManager;¤	}¤¤	public void setOpenDiscussionManager (OpenDiscussionManager openDiscussionManager) {¤		this.openDiscussionManager = openDiscussionManager;¤	}¤	public void setClosedDiscussionManager (ClosedDiscussionManager closedDiscussionManager) {¤		this.closedDiscussionManager = closedDiscussionManager;¤	}¤	//#UC END# *45E581B202AF_CUSTOM_METHODS_AND_DATA*
			    )))
		    quid       	"45E581B202AF"
		    documentation 	"Удаляет дискусию из открытых и помещает ее в закрытые."
		    stereotype 	"CListenerPlugin"
		    language   	"MDA Generator")
		(object Class "CloseDiscussionPlugin"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"SELF GENERATED FILE (java)"
			    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/ConfluencePlugins/DiscussionsSupport/CloseDiscussionPlugin.java")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*45FA6DAC034B_CUSTOM_IMPORT*"
			    value      	"//#UC START# *45FA6DAC034B_CUSTOM_IMPORT*¤import ru.garant.MDProcess.ConfluencePlugins.ArchiveCommentSupport.ArchiveCommentAction;¤import com.atlassian.spring.container.ContainerManager;¤import com.atlassian.confluence.util.ajax.AjaxResponse;¤import com.atlassian.confluence.labels.Label;¤import com.atlassian.confluence.core.ContentEntityObject;¤import com.atlassian.confluence.pages.AbstractPage;¤import com.atlassian.confluence.pages.PageManager;¤import com.atlassian.confluence.pages.Comment;¤import com.atlassian.confluence.pages.CommentManager;¤import com.atlassian.confluence.labels.LabelManager;¤import com.opensymphony.util.TextUtils;¤import java.util.List;¤//#UC END# *45FA6DAC034B_CUSTOM_IMPORT*")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*45FA6DAC034B_CUSTOM_CLASS_DEFINITION*"
			    value      	"//#UC START# *45FA6DAC034B_CUSTOM_CLASS_DEFINITION*¤//#UC END# *45FA6DAC034B_CUSTOM_CLASS_DEFINITION*")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*45FA6DAC034B_CUSTOM_METHODS_AND_DATA*"
			    value      	(value Text 
|//#UC START# *45FA6DAC034B_CUSTOM_METHODS_AND_DATA*¤	private PageManager pageManager = null;¤	private LabelManager labelManager = null;¤	private CommentManager commentManager = null;¤¤	public CloseDiscussionPlugin () {¤	}¤¤	public AjaxResponse close (String entityId, String summaryComment) throws Exception {¤		return Close (entityId, summaryComment, false);¤	}¤	public AjaxResponse closeAndArchive (String entityId, String summaryComment) throws Exception {¤		return Close (entityId, summaryComment, true);¤	}¤¤	/*public AjaxResponse test (String arg) throws Exception {¤		System.out.println ("test: " + arg);¤		return makeResponse ("asdasasd");¤	}¤	//space=dashboard|key=Dead|header=Мертвые обсуждения|ago_from=7|sort_dir=1|lines=7|inc=10¤	public AjaxResponse openDiscussionList (¤			String space, String key, String header, String ago_from, String sort_dir, String lines, String inc¤	) throws Exception {¤		int step = 10;¤		try {¤			System.out.println ("OpenDiscussionList:"¤				+ "space=" + space + ";key=" + key + ";header=" + header¤				+ ";ago_from=" + ago_from + ";sort_dir=" + sort_dir + ";lines=" + lines + ";inc=" + inc¤			);¤			//OpenDiscussionsMacro macro = new OpenDiscussionsMacro ();¤			//macro.setInitialContext(arg0);¤			//String res = macro.execute(arg0, arg1);¤			//MacroParameter macroParameter = MacroParameter ();¤			//macro.getHtml(macroParameter);¤			String macro= "{OpenDiscussionsMacro:";¤			step = 11;¤			macro += "space=" + space;¤			macro += "|key=" + key;¤			macro += "|header=" + header;¤			macro += "|ago_from" + ago_from;¤			macro += "|sort_dir=" + sort_dir;¤			macro += "|ago_from=71" + lines;¤			macro += "|inc" + inc;¤			macro += "}";¤			step = 12;¤			ConfluenceActionSupport action = new ViewSourceAction ();¤			step = 13;¤			GlobalHelper helper = new GlobalHelper (action);¤			step = 14;¤			String res = helper.renderConfluenceMacro (macro);¤			step = 15;¤			System.out.println ("OpenDiscussionList:" + res);¤			step = 16;¤			return makeResponse (res);¤		} catch (Exception ex) {¤			return makeResponse ("CloseDiscussionPlugin::OpenDiscussionList: step=" + step + ": ", ex);¤		}¤	}¤¤	private AjaxResponse makeResponse (String sResponse) {¤		AjaxResponse response = new AjaxResponse ();¤		response.setSuccess (true);¤		response.setResponse (sResponse);¤		return response;¤	}*/¤¤	private AjaxResponse makeResponse () {¤		AjaxResponse response = new AjaxResponse ();¤		response.setSuccess (true);¤		return response;¤	}¤	private AjaxResponse makeResponse (String where, Exception ex) {¤		AjaxResponse response = new AjaxResponse ();¤		response.setSuccess (false);¤		String msg = ex.getClass ().getSimpleName ();¤		msg += " in '";¤		msg += where + "': ";¤		String exMsg = ex.getMessage ();¤		if (exMsg != null) {¤			msg += ex.getMessage ();¤		} else {¤			msg += "Unknown";¤		}¤		response.setResponse (msg);¤		System.err.println (msg);¤		return response;¤	}¤	private AjaxResponse Close (String entityId, String summaryComment, boolean needToArchive) throws Exception {¤		try {¤			AbstractPage page = getPage (entityId);¤			Comment summaryCommnet = createComment (page, summaryComment);¤			if (summaryCommnet != null) {¤				ArchiveCommentAction.addLabelByName (¤					getLabelManager (), OpenDiscussionManager.COMMENT_SUMMARY_LABEL, summaryCommnet¤				);¤			}¤			List list = page.getComments ();¤			final int count = list.size ();¤			for (int i = 0; i < count; ++i) {¤				Comment comment = (Comment)list.get (i);¤				closeEntity (comment, needToArchive, OpenDiscussionManager.COMMENT_DISCUSSION_LABEL);¤			}¤			closeEntity (page, false, OpenDiscussionManager.DISCUSSION_LABEL);¤			return makeResponse ();¤		} catch (Exception ex) {¤			return makeResponse ("CloseDiscussionPlugin::Close", ex);¤		}¤	}¤	private Comment createComment (AbstractPage page, String content) {¤		if (TextUtils.stringSet (content)) {¤			Comment parent = OpenDiscussionManager.findOldestComment (getPageManager (), page);¤			return getCommentManager ().addCommentToPage (page, parent, content);¤		}¤		return null;¤	}¤	private AbstractPage getPage (String sEntityId) {¤		long entityId = Long.decode (sEntityId);¤		return getPageManager ().getAbstractPage (entityId);¤	}¤	private void closeEntity (ContentEntityObject entity, boolean needToArchive, String openLabel) {¤		List list = entity.getLabels ();¤		final int count = list.size ();¤		for (int i = 0; i < count; ++i) {¤			Label label = (Label)list.get (i);¤			if (label.getRealTitle ().compareTo (openLabel) == 0) {¤				if (needToArchive && (entity instanceof Comment)) {¤					Comment comment = (Comment)entity;¤					ArchiveCommentAction.archiveComment (getLabelManager (), comment);¤				}¤				getLabelManager ().removeLabel (entity, label);¤			}¤		}¤	}¤¤	private CommentManager getCommentManager () {¤		if (this.commentManager == null) {¤			this.commentManager = (CommentManager)ContainerManager.getInstance ().getContainerContext ().getComponent ("commentManager");¤			if (this.commentManager == null) {¤				System.err.println ("CloseDiscussionPlugin::getCommentManager: can not get component 'commentManager'.");¤			}¤		}¤		return this.commentManager;¤	}¤	private PageManager getPageManager () {¤		if (this.pageManager == null) {¤			this.pageManager = (PageManager)ContainerManager.getInstance ().getContainerContext ().getComponent ("pageManager");¤			if (this.pageManager == null) {¤				System.err.println ("CloseDiscussionPlugin::getPageManager: can not get component 'pageManager'.");¤			}¤		}¤		return this.pageManager;¤	}¤	private LabelManager getLabelManager () {¤		if (this.labelManager == null) {¤			this.labelManager = (LabelManager)ContainerManager.getInstance ().getContainerContext ().getComponent ("labelManager");¤			if (this.labelManager == null) {¤				System.err.println ("CloseDiscussionPlugin::getLabelManager: can not get component 'labelManager'.");¤			}¤		}¤		return this.labelManager;¤	}¤	//#UC END# *45FA6DAC034B_CUSTOM_METHODS_AND_DATA*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*45FA6DAC034B_DO_EXECUTE_IMPLEMETATION*"
			    value      	(value Text 
|//#UC START# *45FA6DAC034B_DO_EXECUTE_IMPLEMETATION*¤		//#UC END# *45FA6DAC034B_DO_EXECUTE_IMPLEMETATION*
			    )))
		    quid       	"45FA6DAC034B"
		    documentation 	"Object to implement AJAX idea to close discussion and add summary comment."
		    stereotype 	"CSpringPlugin"
		    language   	"MDA Generator")
		(object Class "DiscussionVelocityContextPlugin"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"context-key"
			    value      	"garDiscussion")
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"need UC"
			    value      	"true")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*45FA988B008C_CUSTOM_IMPORT*"
			    value      	"//#UC START# *45FA988B008C_CUSTOM_IMPORT*¤import ru.garant.MDProcess.ConfluencePlugins.ArchiveCommentSupport.ArchiveCommentAction;¤import com.atlassian.spring.container.ContainerManager;¤import com.atlassian.confluence.pages.AbstractPage;¤import com.atlassian.confluence.pages.Comment;¤import com.atlassian.confluence.user.AuthenticatedUserThreadLocal;¤import com.atlassian.user.User;¤import java.util.Date;¤import java.util.List;¤//#UC END# *45FA988B008C_CUSTOM_IMPORT*")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*45FA988B008C_CUSTOM_CLASS_DEFINITION*"
			    value      	"//#UC START# *45FA988B008C_CUSTOM_CLASS_DEFINITION*¤//#UC END# *45FA988B008C_CUSTOM_CLASS_DEFINITION*")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*45FA988B008C_DEFAULT_CONSTRUCTOR*"
			    value      	(value Text 
|//#UC START# *45FA988B008C_DEFAULT_CONSTRUCTOR*¤		//#UC END# *45FA988B008C_DEFAULT_CONSTRUCTOR*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*45FA988B008C_CUSTOM_METHODS_AND_DATA*"
			    value      	(value Text 
|//#UC START# *45FA988B008C_CUSTOM_METHODS_AND_DATA*¤	public int isOpen (AbstractPage page) {¤		if (ArchiveCommentAction.findLabel (page, OpenDiscussionManager.DISCUSSION_LABEL) == null) {¤			return 0;¤		} else {¤			return 1;¤		}¤	}¤	public int isSummary (Comment comment) {¤		if (ArchiveCommentAction.findLabel (comment, OpenDiscussionManager.COMMENT_SUMMARY_LABEL) == null) {¤			return 0;¤		} else {¤			return 1;¤		}¤	}¤¤	public int getCountUnviewed (AbstractPage page) {¤		User user = AuthenticatedUserThreadLocal.getUser ();¤		if (user == null) { // if the user was logged¤			return 0;¤		}¤		int countUnviewed = 0;¤		String userName = user.getName ();¤		final long pageId = page.getId ();¤		List list = page.getComments ();¤		final int size = list.size ();¤		for (int i = 0; i < size; ++i) {¤			if (is_actual (pageId, (Comment)list.get (i), userName) == false) {¤				++countUnviewed;¤			}¤		}¤		return countUnviewed;¤	}¤¤	public boolean hasManyUnviewed (AbstractPage page) {¤		User user = AuthenticatedUserThreadLocal.getUser ();¤		if (user == null) { // if the user was logged¤			return false;¤		}¤		int countUnviewed = 0;¤		String userName = user.getName ();¤		final long pageId = page.getId ();¤		List list = page.getComments ();¤		final int size = list.size ();¤		for (int i = 0; i < size; ++i) {¤			if (is_viewed (pageId, (Comment)list.get (i), userName) == false) {¤				++countUnviewed;¤				if (countUnviewed > 1) {¤					return true;¤				}¤			}¤¤		}¤		return false;¤	}¤¤	public boolean isViewed (Comment comment) {¤		User user = AuthenticatedUserThreadLocal.getUser ();¤		if (user == null) { // if the user was logged¤			return true;¤		}¤		return is_viewed (comment.getPage ().getId (), comment, user.getName ());¤	}¤¤	public boolean isEntityViewed (long entityId) {¤		if (entityId == 0) {¤			return true;¤		}¤		return getViewedEM ().isViewed (entityId, AuthenticatedUserThreadLocal.getUser ());¤	}¤¤	private boolean is_viewed (long pageId, Comment comment, String userName) {¤		Date modifDate = comment.getLastModificationDate ();¤		Discussion2 od = getOpenDM ().getDiscussions ().get_by_page (pageId);¤		if (od != null) {¤			return od.isViewedComment (userName, modifDate);¤		} else {¤			Discussion2 cd = getClosedDM ().getDiscussions ().get_by_page (pageId);¤			if (cd != null) {¤				return cd.isViewedComment (userName, modifDate);¤			}¤		}¤		return true;¤	}¤	private boolean is_actual (long pageId, Comment comment, String userName) {¤		Date modifDate = comment.getLastModificationDate ();¤		Discussion2 od = getOpenDM ().getDiscussions ().get_by_page (pageId);¤		if (od != null) {¤			return od.isActualComment (userName, modifDate);¤		} else {¤			Discussion2 cd = getClosedDM ().getDiscussions ().get_by_page (pageId);¤			if (cd != null) {¤				return cd.isActualComment (userName, modifDate);¤			}¤		}¤		return true;¤	}¤¤¤	private ClosedDiscussionManager closedDM = null;¤	private ClosedDiscussionManager getClosedDM () {¤		if (this.closedDM == null) {¤			this.closedDM = (ClosedDiscussionManager) ContainerManager.getInstance ().getContainerContext ().getComponent ("ru.garant.MDProcess.ConfluencePlugins.DiscussionsSupport.ClosedDiscussionManager");¤		}¤		return this.closedDM;¤	}¤	private OpenDiscussionManager openDM = null;¤	private OpenDiscussionManager getOpenDM () {¤		if (this.openDM == null) {¤			this.openDM = (OpenDiscussionManager) ContainerManager.getInstance ().getContainerContext ().getComponent ("ru.garant.MDProcess.ConfluencePlugins.DiscussionsSupport.OpenDiscussionManager");¤		}¤		return this.openDM;¤	}¤	private ViewedEntityManager viewedEM = null;¤	private ViewedEntityManager getViewedEM () {¤		if (this.viewedEM == null) {¤			this.viewedEM = (ViewedEntityManager) ContainerManager.getInstance ().getContainerContext ().getComponent ("ru.garant.MDProcess.ConfluencePlugins.DiscussionsSupport.ViewedEntityManager");¤		}¤		return this.viewedEM;¤	}¤	//#UC END# *45FA988B008C_CUSTOM_METHODS_AND_DATA*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"SELF GENERATED FILE (java)"
			    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/ConfluencePlugins/DiscussionsSupport/DiscussionVelocityContextPlugin.java"))
		    quid       	"45FA988B008C"
		    documentation 	"Объект поодержки работы с дискусиями."
		    stereotype 	"CVelocityContextPlugin"
		    operations 	(list Operations
			(object Operation "ctor"
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"AbstarctOperation"
				    value      	"regular")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"IsNative"
				    value      	"false")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"java:*460BA8260261_BODY*"
				    value      	(value Text 
|//#UC START# *460BA8260261_BODY*¤		//#UC END# *460BA8260261_BODY*
				    )))
			    quid       	"460BA8260261"
			    stereotype 	"ctor"
			    concurrency 	"Sequential"
			    opExportControl 	"Public"
			    uid        	0))
		    language   	"MDA Generator")
		(object Class "UserDate"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"Need assign op"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"Need copy ctor"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"Need ref count"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"Need unsorted less"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"ifdef"
			    value      	"")
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"need UC"
			    value      	"true")
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"need dctor"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"need objcounter"
			    value      	"true")
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"no base class"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"non virtual base"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"singleton"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"SELF GENERATED FILE (java)"
			    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/ConfluencePlugins/DiscussionsSupport/UserDate.java")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*46013BF50138_CUSTOM_IMPORT*"
			    value      	"//#UC START# *46013BF50138_CUSTOM_IMPORT*¤import java.util.Date;¤//#UC END# *46013BF50138_CUSTOM_IMPORT*")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*46013BF50138_CUSTOM_CLASS_DEFINITION*"
			    value      	"//#UC START# *46013BF50138_CUSTOM_CLASS_DEFINITION*¤//#UC END# *46013BF50138_CUSTOM_CLASS_DEFINITION*")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*46013BF50138_CUSTOM_METHODS_AND_DATA*"
			    value      	(value Text 
|//#UC START# *46013BF50138_CUSTOM_METHODS_AND_DATA*¤	public UserDate () {¤		this.dateOld = new Date (0L);¤		this.dateNew = new Date (this.dateOld.getTime ());¤	}¤	public UserDate (Date date) {¤		this.dateOld = new Date (0L);¤		this.dateNew = date;¤	}¤	public void setDate (Date date) {¤		this.dateOld.setTime (this.dateNew.getTime ());¤		this.dateNew = date;¤	}¤	public Date dateOld;¤	public Date dateNew;¤	//#UC END# *46013BF50138_CUSTOM_METHODS_AND_DATA*
			    )))
		    quid       	"46013BF50138"
		    stereotype 	"SimpleClass"
		    language   	"MDA Generator")
		(object Class "Discussion2"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"Need assign op"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"Need copy ctor"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"Need ref count"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"Need unsorted less"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"ifdef"
			    value      	"")
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"need UC"
			    value      	"true")
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"need dctor"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"need objcounter"
			    value      	"true")
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"no base class"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"non virtual base"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"singleton"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"SELF GENERATED FILE (java)"
			    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/ConfluencePlugins/DiscussionsSupport/Discussion2.java")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*46013C2300EA_CUSTOM_IMPORT*"
			    value      	"//#UC START# *46013C2300EA_CUSTOM_IMPORT*¤import java.util.*;¤//#UC END# *46013C2300EA_CUSTOM_IMPORT*")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*46013C2300EA_CUSTOM_CLASS_DEFINITION*"
			    value      	"//#UC START# *46013C2300EA_CUSTOM_CLASS_DEFINITION*¤//#UC END# *46013C2300EA_CUSTOM_CLASS_DEFINITION*")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*46013C2300EA_CUSTOM_METHODS_AND_DATA*"
			    value      	(value Text 
|//#UC START# *46013C2300EA_CUSTOM_METHODS_AND_DATA*¤	private long pageId = 0;¤	private long commentId = 0;¤	private String owner = null;¤	private Date date = null;¤¤	public Discussion2 () {¤	}¤¤	public Discussion2 (¤		long pageId¤		, long commentId¤		, String owner¤		, Date date¤	) {¤		this.pageId = pageId;¤		this.commentId = commentId;¤		this.owner = owner;¤		this.date = date;¤	}¤¤	public Discussion2 (¤		long pageId¤		, String owner¤		, Date date¤	) {¤		this.pageId = pageId;¤		this.date = date;¤		this.owner = owner;¤		this.commentId = 0;¤	}¤¤	public Discussion2 (Discussion prev) {¤		this.pageId = prev.getPageId ();¤		this.date = prev.getDate ();¤		this.owner = prev.getOwner ();¤		this.commentId = prev.getCommentId ();¤		final List<String> users = prev.getUsers ();¤		final Iterator<String> it = users.iterator ();¤		while (it.hasNext ()) {¤			this.users.put (it.next (), new UserDate (this.date));¤		}¤	}¤¤	public long getPageId () {¤		return this.pageId;¤	}¤¤	public long getCommentId () {¤		return this.commentId;¤	}¤¤	public String getOwner () {¤		return this.owner;¤	}¤¤	public Date getDate () {¤		return this.date;¤	}¤¤	public void addUser (String userName) {¤		synchronized (this.users) {¤			Date date = Calendar.getInstance ().getTime ();¤			UserDate userDate = this.users.get (userName);¤			if (userDate == null) {¤				this.users.put (userName, new UserDate (date));¤			} else {¤				userDate.setDate (date);¤			}¤		}¤	}¤¤	public void update (Discussion2 discussion) {¤		synchronized (this) {¤			this.commentId = discussion.commentId;¤			this.owner = discussion.owner;¤			this.date = discussion.date;¤			this.users.putAll (discussion.users);¤		}¤	}¤¤	/*private String users2str (Map<String, UserDate> map) {¤		String res = "";¤		Set<Map.Entry<String, UserDate>> set = map.entrySet();¤		Iterator<Map.Entry<String, UserDate>> it = set.iterator();¤		while (it.hasNext()) {¤			Map.Entry<String, UserDate> e = it.next();¤			UserDate ud = e.getValue();¤			res += e.getKey() + "(new=" + ud.dateNew + ", old=" + ud.dateOld + "); ";¤		}¤		return res;¤	}*/¤¤	public boolean isActual (String userName) {¤		synchronized (this.users) {¤			UserDate userDate = this.users.get (userName);¤			if (userDate == null) {¤				return false;¤			}¤			return !userDate.dateNew.before (this.date);¤		}¤	}¤¤	public boolean isViewedComment (String userName, Date commentDate) {¤		synchronized (this.users) {¤			UserDate userDate = this.users.get (userName);¤			if (userDate == null) {¤				return false;¤			}¤			return !userDate.dateOld.before (commentDate);¤		}¤	}¤¤	public boolean isActualComment (String userName, Date commentDate) {¤		synchronized (this.users) {¤			UserDate userDate = this.users.get (userName);¤			if ((userDate == null) || (userDate.dateNew == null)) {¤				return false;¤			}¤			return (userDate.dateNew.compareTo (commentDate) >= 0);¤		}¤	}¤	//#UC END# *46013C2300EA_CUSTOM_METHODS_AND_DATA*
			    )))
		    quid       	"46013C2300EA"
		    stereotype 	"SimpleClass"
		    used_nodes 	(list uses_relationship_list
			(object Uses_Relationship
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"AbstarctOperation"
				    value      	"regular")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"IsNative"
				    value      	"false"))
			    quid       	"4613A7C90251"
			    stereotype 	"uses"
			    supplier   	"Logical View::MDProcess::ConfluencePlugins::DiscussionsSupport::Discussion"
			    quidu      	"45B72F6E02EE"))
		    language   	"MDA Generator"
		    nestedClasses 	(list nestedClasses
			(object Class "UsersNestedMap"
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"AbstarctOperation"
				    value      	"regular")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"IsNative"
				    value      	"false")
				(object Attribute
				    tool       	"MDA Generator User Properties"
				    name       	"force usage"
				    value      	"false"))
			    quid       	"46139E3403A9"
			    stereotype 	"HashMap")))
		(object Class "ViewedEntityManager"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"SELF GENERATED FILE (java)"
			    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/ConfluencePlugins/DiscussionsSupport/ViewedEntityManager.java")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*460A56B502EE_CUSTOM_IMPORT*"
			    value      	"//#UC START# *460A56B502EE_CUSTOM_IMPORT*¤import java.sql.ResultSet;¤¤import com.atlassian.user.User;¤import com.thoughtworks.xstream.core.BaseException;¤//#UC END# *460A56B502EE_CUSTOM_IMPORT*")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*460A56B502EE_CUSTOM_CLASS_DEFINITION*"
			    value      	"//#UC START# *460A56B502EE_CUSTOM_CLASS_DEFINITION*¤//#UC END# *460A56B502EE_CUSTOM_CLASS_DEFINITION*")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*460A56B502EE_CUSTOM_METHODS_AND_DATA*"
			    value      	(value Text 
|//#UC START# *460A56B502EE_CUSTOM_METHODS_AND_DATA*¤	private SQLExecutor sql = null;¤¤	public ViewedEntityManager () throws Exception {¤		try {¤			sql = new SQLExecutor (true);¤		} catch (BaseException e) {¤			System.err.println ("ViewedEntityManager::ctor: BaseException: " + e);¤			throw e;¤		}¤	}¤¤	private class ViewedRes implements SQLExecutor.SelectRes {¤		boolean viewed = false;¤		public boolean process (int curRow, ResultSet rs) throws Exception {¤			this.viewed = true;¤			return false;¤		}¤		final public boolean isViewed () {¤			return this.viewed;¤		}¤	}¤¤	private class OptimizeRes implements SQLExecutor.SelectRes {¤		int id = 0;¤		public boolean process (int curRow, ResultSet rs) throws Exception {¤			this.id = rs.getInt ("id");¤			return false;¤		}¤		final public int getId () {¤			return this.id;¤		}¤	}¤¤	public boolean isViewed (long entityId, User user) {¤		if (user == null) {¤			return true;¤		}¤		String query = "SELECT entity_id FROM ViewedEntities WHERE entity_id=" + entityId + " AND user_name='" + user.getName () + "'";¤		try {¤			ViewedRes res = new ViewedRes ();¤			this.sql.selectQuery (query, res);¤			return res.isViewed ();¤		} catch (SQLExecutor.TableUnexist e) {¤			return false;¤		} catch (Exception e) {¤			System.err.println ("ViewedEntityManager::isViewed: Exception: " + e);¤			return true;¤		}¤	}¤¤	public void updateEntity (long entityId) {¤		String query = "DELETE FROM ViewedEntities WHERE entity_id=" + entityId;¤		try {¤			this.sql.updateQuery (query);¤			updateIdEntities (entityId);¤		} catch (Exception e) {¤			System.err.println ("ViewedEntityManager::updateEntity: Exception: " + e);¤		}¤	}¤¤	public void viewedEntity (long entityId, User user) {¤		if (user == null || isViewed (entityId, user)) {¤			return;¤		}¤		String query = "INSERT INTO ViewedEntities (entity_id,user_name) VALUES (" + entityId + ",'" + user.getName () + "')";¤		do {¤			try {¤				this.sql.updateQuery (query);¤			} catch (SQLExecutor.TableUnexist e) {¤				if (createTable ()) {¤					continue;¤				}¤			} catch (BaseException e) {¤				System.err.println ("ViewedEntityManager::viewedEntity: BaseException: " + e);¤			} catch (Exception e) {¤				System.err.println ("ViewedEntityManager::viewedEntity: Exception: " + e);¤			}¤		} while (false);¤	}¤¤	public void optimizeEntities (int maxCount) {¤		String query = "SELECT id FROM IdEntities LIMIT 1 OFFSET " + maxCount;¤		try {¤			OptimizeRes res = new OptimizeRes ();¤			this.sql.selectQuery (query, res);¤			if (res.getId () > 0) {¤				String optQuery = "DELETE FROM IdEntities WHERE id>" + res.getId ();¤				this.sql.updateQuery (optQuery);¤			}¤		} catch (Exception e) {¤			System.err.println ("ViewedEntityManager::optimizeEntities: Exception: " + e);¤		}¤	}¤¤	private void updateIdEntities (long entityId) {¤		String query = "INSERT INTO IdEntities (entity_id) VALUES (" + entityId + ")";¤		try {¤			this.sql.updateQuery (query);¤		} catch (SQLExecutor.DupEntry e) {¤		} catch (Exception e) {¤			System.err.println ("ViewedEntityManager::updateIdEntities: Exception: " + e);¤		}¤	}¤¤	private boolean createTable () {¤		String query1 = "CREATE TABLE ViewedEntities (`entity_id` BIGINT UNSIGNED NOT NULL DEFAULT 0,`user_name` VARCHAR(255) NOT NULL, KEY(`entity_id`))";¤		String query2 = "CREATE TABLE IdEntities (`id` INTEGER UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY, `entity_id` BIGINT UNSIGNED NOT NULL DEFAULT 0 UNIQUE KEY)";¤		try {¤			this.sql.createTable (query1);¤			this.sql.createTable (query2);¤			return true;¤		} catch (Exception e) {¤			System.err.println ("ViewedEntityManager::createTable: Exception: " + e);¤			return false;¤		}¤	}¤	//#UC END# *460A56B502EE_CUSTOM_METHODS_AND_DATA*
			    )))
		    quid       	"460A56B502EE"
		    documentation 	"Менеджер для Recently Updated."
		    stereotype 	"CComponentPlugin"
		    language   	"MDA Generator")
		(object Class "RecentlyUpdatedContentMacro"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"SELF GENERATED FILE (java)"
			    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/ConfluencePlugins/DiscussionsSupport/RecentlyUpdatedContentMacro.java")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*460A5B8C0242_CUSTOM_IMPORT*"
			    value      	"//#UC START# *460A5B8C0242_CUSTOM_IMPORT*¤import com.atlassian.confluence.core.ConfluenceActionSupport;¤import com.atlassian.confluence.core.ContentEntityObject;¤import com.atlassian.confluence.core.ListQuery;¤import com.atlassian.confluence.core.SmartListManager;¤import com.atlassian.confluence.labels.LabelManager;¤import com.atlassian.confluence.mail.Mail;¤import com.atlassian.confluence.security.Permission;¤import com.atlassian.confluence.security.PermissionManager;¤import com.atlassian.confluence.spaces.Space;¤import com.atlassian.confluence.spaces.SpaceManager;¤import com.atlassian.confluence.user.UserInterfaceState;¤import com.atlassian.confluence.user.UserAccessor;¤import com.atlassian.confluence.util.GeneralUtil;¤import bucket.core.comparators.LastModificationDateComparator;¤import com.atlassian.confluence.util.velocity.VelocityUtils;¤import com.atlassian.confluence.setup.settings.SettingsManager;¤import com.atlassian.confluence.renderer.PageContext;¤import com.atlassian.confluence.renderer.radeox.macros.*;¤import com.atlassian.util.profiling.UtilTimerStack;¤import com.atlassian.core.user.UserUtils;¤import com.opensymphony.util.TextUtils;¤import com.opensymphony.webwork.ServletActionContext;¤import org.apache.log4j.Category;¤import org.radeox.macro.parameter.MacroParameter;¤¤import javax.servlet.http.HttpServletRequest;¤import java.io.IOException;¤import java.util.*;¤¤//import com.atlassian.confluence.pages.Page;¤//#UC END# *460A5B8C0242_CUSTOM_IMPORT*")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*460A5B8C0242_CUSTOM_CLASS_DEFINITION*"
			    value      	"//#UC START# *460A5B8C0242_CUSTOM_CLASS_DEFINITION*¤//#UC END# *460A5B8C0242_CUSTOM_CLASS_DEFINITION*")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*460A5B8C0242_EXECUTE_IMPLEMETATION*"
			    value      	(value Text 
|//#UC START# *460A5B8C0242_EXECUTE_IMPLEMETATION*¤		return "";¤		//#UC END# *460A5B8C0242_EXECUTE_IMPLEMETATION*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*460A5B8C0242_ISINLINE_IMPLEMETATION*"
			    value      	(value Text 
|//#UC START# *460A5B8C0242_ISINLINE_IMPLEMETATION*¤		return false;¤		//#UC END# *460A5B8C0242_ISINLINE_IMPLEMETATION*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*460A5B8C0242_HASBODY_IMPLEMETATION*"
			    value      	(value Text 
|//#UC START# *460A5B8C0242_HASBODY_IMPLEMETATION*¤		return false;¤		//#UC END# *460A5B8C0242_HASBODY_IMPLEMETATION*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*460A5B8C0242_GETBODYRENDERMODE_IMPLEMETATION*"
			    value      	(value Text 
|//#UC START# *460A5B8C0242_GETBODYRENDERMODE_IMPLEMETATION*¤		return RenderMode.NO_RENDER;¤		//#UC END# *460A5B8C0242_GETBODYRENDERMODE_IMPLEMETATION*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*460A5B8C0242_CUSTOM_METHODS_AND_DATA*"
			    value      	(value Text 
|//#UC START# *460A5B8C0242_CUSTOM_METHODS_AND_DATA*¤    public final static String MACRO_NAME = "RecentlyUpdatedContentMacro";¤    private static final Category log = Category.getInstance(RecentlyUpdatedContentMacro.class);¤¤    private SpaceManager spaceManager;¤    private SmartListManager smartListManager;¤    private LabelManager labelManager;¤    private PermissionManager permissionManager;¤    private UserAccessor userAccessor;¤¤    protected String getHtml(MacroParameter macroParameter) throws IllegalArgumentException, IOException¤    {¤        UtilTimerStack.push("Macro: {" + MACRO_NAME + "}");¤¤        try¤        {¤            HttpServletRequest request = ServletActionContext.getRequest ();¤            Map<String, Object> contextMap = MacroUtils.defaultVelocityContext ();¤            String tableWidth = parseParameterForKey(macroParameter, "width");¤            String labelNames = parseParameterForKey(macroParameter, "labels");¤            boolean showingOnDashboard = hasLoneParameter(macroParameter, "dashboard");¤            boolean skipSearch = false;¤¤¤            List spacesToSearchIn = new ArrayList();¤            int recentlyUpdatedPageCount = getRecentlyUpdatedPageCount(request);¤            String pageListDescription = null;¤            if (!TextUtils.stringSet(tableWidth))¤                tableWidth = "100%";¤¤            // this macro behaves differently when used on the dashboard (todo: make this another macro?)¤            if (showingOnDashboard && !"all".equals(getSpacesSelectedTab())) // behaviour for "all" tab is the same as on other non-dashboard pages¤            {¤                DashboardMacroSupport dashboardSupport = new DashboardMacroSupport();¤                dashboardSupport.setLabelManager(labelManager);¤                dashboardSupport.setPermissionManager(permissionManager);¤                dashboardSupport.setSpaceManager(spaceManager);¤¤                String selectedSpacesTab = getSpacesSelectedTab();¤¤                try¤                {¤                    spacesToSearchIn = getSpaceListFilteredByTabSelection (selectedSpacesTab, dashboardSupport);¤                }¤                catch (Exception e)¤                {¤                    return e.getMessage();¤                }¤¤                if (spacesToSearchIn.isEmpty()) // if there are no spaces in the selected tab, then don't show any content! if we pass this empty list to the searcher, it will do a search on _all spaces_ and we don't want this.¤                    skipSearch = true;¤                else¤                    pageListDescription = getPageListDescription(selectedSpacesTab, spacesToSearchIn);¤            }¤            else¤            {¤                String spaceKeys = parseParameterForKey(macroParameter, "spaces");¤                if (TextUtils.stringSet(spaceKeys))¤                {¤                    try¤                    {¤                        spacesToSearchIn = getSpaces(spaceKeys);¤                    }¤                    catch (IllegalArgumentException e)¤                    {¤                        throw e;¤                    }¤                }¤                else¤                {¤                    String contextSpaceKey = getPageContext(macroParameter).getSpaceKey();¤                    Space space = spaceManager.getSpace(contextSpaceKey);¤                    if (space != null)¤                        spacesToSearchIn.add (space);¤                }¤            }¤¤            List contentList = new ArrayList();¤            String statusKey = null;¤            if (!skipSearch)¤            {¤                ListQuery query = new ListQuery();¤                query.setSpaceList(spacesToSearchIn);¤                query.setLabelList(getListOfLabels(labelNames));¤                query.addStatus(ContentEntityObject.CREATED).addStatus(ContentEntityObject.MODIFIED);¤¤                query.setTypeList(getTypes (parseParameterForKey(macroParameter, "types")));¤                query.setMaxResults(recentlyUpdatedPageCount);¤                query.setUser(getRemoteUser());¤¤                statusKey = smartListManager.getStatusMessageKey();¤                contentList = smartListManager.getListQueryResults(query, true);¤¤                removeRestrictedPages (contentList);¤            }¤¤¤            String baseurl;¤            String url;¤            if (request != null)¤            {¤                baseurl = buildBaseUrl(request, Arrays.asList(new String[]{"recentlyUpdatedPageCount"}));¤                url = baseurl;¤            }¤            else¤            {¤                PageContext context = getPageContext(macroParameter);¤                baseurl = this.settingsManager.getGlobalSettings ().getBaseUrl ();¤                url = GeneralUtil.appendAmpsandOrQuestionMark(baseurl + context.getEntity().getUrlPath());¤            }¤¤¤            if (recentlyUpdatedPageCount > UserInterfaceState.DEFAULT_MAX_RECENTLY_ADDED_PAGE_COUNT)¤            {¤                contextMap.put("showless", url + "recentlyUpdatedPageCount=" + (recentlyUpdatedPageCount - 10));¤                contextMap.put("showLess", Boolean.TRUE);¤            }¤¤            if (recentlyUpdatedPageCount < UserInterfaceState.LIMIT_RECENTLY_ADDED_PAGE_COUNT)¤            {¤                contextMap.put("showmore", url + "recentlyUpdatedPageCount=" + (recentlyUpdatedPageCount + 10));¤                contextMap.put("showMore", Boolean.TRUE);¤            }¤¤            Collections.sort (contentList, new LastModificationDateComparator ());¤¤            contextMap.put("tableWidth", tableWidth);¤            contextMap.put("contentOther", Boolean.valueOf(spacesToSearchIn.size() != 1));¤            contextMap.put("pageList", contentList);¤            contextMap.put("bundle", new ConfluenceActionSupport().getDefaultResourceBundle());¤            contextMap.put("generalUtil", new GeneralUtil());¤            contextMap.put("webwork", new TextUtils());¤            contextMap.put("baseurl", baseurl);¤            contextMap.put("textUtils", new TextUtils());¤            contextMap.put("pageListDescription", pageListDescription);¤            contextMap.put("userUtils", new UserUtils());¤¤            if (statusKey != null)¤                contextMap.put("statusMessage", GeneralUtil.getDefaultResourceBundle().getString(statusKey));¤            if (request != null)¤                contextMap.put("req", request);¤¤            try¤            {¤                return VelocityUtils.getRenderedTemplate("templates/macros/macro-pagelist.vm", contextMap);¤            }¤            catch (Exception e)¤            {¤                log.error("Error while trying to load the space list template.", e);¤                throw new IOException(e.getMessage());¤            }¤        }¤        finally¤        {¤            UtilTimerStack.pop("Macro: {" + MACRO_NAME + "}");¤        }¤    }¤¤    void removeRestrictedPages (List contentList) {¤    	List restrictedList = new ArrayList (10);¤    	Iterator it = contentList.iterator ();¤    	while (it.hasNext ()) {¤    		Object o = it.next ();¤    		if (!this.permissionManager.hasPermission(getRemoteUser (), Permission.VIEW, o)) {¤    			restrictedList.add (o);¤    		}¤    	}¤    	contentList.removeAll (restrictedList);¤    }¤¤    private List getTypes (String typeKeys) {¤    	List<String> types = null;¤    	if (!TextUtils.stringSet (typeKeys)) {¤//       	 query for all except mail¤    		types = new ArrayList<String> (ListQuery.ALL_TYPES.size ());¤            types.addAll (ListQuery.ALL_TYPES);¤            types.remove (Mail.CONTENT_TYPE);¤    	} else {¤    		//types.add (Page.CONTENT_TYPE);¤    		String[] ar = typeKeys.split (",");¤    		types = new ArrayList<String> (ar.length);¤    		for (int i = 0; i < ar.length; ++i) {¤    			types.add (ar [i]);¤    		}¤    	}¤    	return types;¤    }¤¤¤    private int getRecentlyUpdatedPageCount(HttpServletRequest request)¤    {¤        int recentlyUpdatedPageCount;¤        try¤        {¤            if (request != null)¤                recentlyUpdatedPageCount = Integer.parseInt(request.getParameter("recentlyUpdatedPageCount"));¤            else¤                recentlyUpdatedPageCount = getUserInterfaceState().getMaxRecentChangesSize();¤        }¤        catch (NumberFormatException e)¤        {¤            recentlyUpdatedPageCount = getUserInterfaceState().getMaxRecentChangesSize(); // get value from preferences or use default¤        }¤        return recentlyUpdatedPageCount;¤    }¤¤    /**¤     * Returns a String indicating the space in which the currently shown recently updated content is located.¤     *¤     * @param selectedSpacesTab¤     * @param spaces¤     * @return String pageListDescription¤     */¤    private String getPageListDescription(String selectedSpacesTab, List spaces)¤    {¤        String pageListDescription = null;¤        // if user is viewing the "My" tab in their spaces list, then we want to show updates from their favourite spaces only¤        if (getRemoteUser() != null && "my".equals(selectedSpacesTab))¤        {¤            if (spaces.size() > 0)¤            {¤                pageListDescription = "Displaying recently updated content from your favourite spaces.";¤            }¤        }¤¤        else if ("team".equals(selectedSpacesTab))¤        {¤            // lookup labelled team spaces.¤            if (spaces.size() > 0)¤            {¤                pageListDescription = "Displaying recently updated content from your team spaces.";¤            }¤        }¤¤        else if ("new".equals(selectedSpacesTab))¤        {¤            // lookup new spaces.¤            if (spaces.size() > 0)¤            {¤                pageListDescription = "Displaying recently updated content from new spaces.";¤            }¤        }¤        return pageListDescription;¤    }¤¤    /**¤     * @param selectedSpacesTab¤     * @param dashboardSupport¤     * @return a list of spaces in the tab currently selected on the dashboard¤     */¤    private List getSpaceListFilteredByTabSelection(String selectedSpacesTab, DashboardMacroSupport dashboardSupport)¤    {¤        List spaceList = new ArrayList();¤¤        if (getRemoteUser() != null && "my".equals(selectedSpacesTab))¤            spaceList = dashboardSupport.getFavouriteSpaces();¤¤¤        // lookup labelled team spaces.¤        else if ("team".equals(selectedSpacesTab))¤            spaceList = dashboardSupport.getTeamSpaces();¤¤        // lookup new spaces.¤        else if ("new".equals(selectedSpacesTab))¤            spaceList = dashboardSupport.getNewSpaces();¤¤        return spaceList;¤    }¤¤    private List getSpaces(String spaceKeys)¤    {¤        List result = new ArrayList();¤        if (TextUtils.stringSet(spaceKeys))¤        {¤            StringTokenizer st = new StringTokenizer(spaceKeys, ",");¤            while (st.hasMoreTokens())¤            {¤                String spaceKeyToken = st.nextToken().trim();¤                Space space = spaceManager.getSpace(spaceKeyToken);¤                if (space == null)¤                    throw new IllegalArgumentException(toHtmlErrorMessage("Invalid space key: " + spaceKeyToken));¤¤                result.add(space);¤            }¤        }¤        return result;¤    }¤¤    private String toHtmlErrorMessage(String error)¤    {¤        return "<div class=\"error\"><span class=\"error\">" + error + "</span></div>";¤    }¤¤    public List getPermitted(List entityList)¤    {¤        if (GeneralUtil.isSuperUser(getRemoteUser()))¤            return entityList;¤¤        return permissionManager.getPermittedEntities(getRemoteUser(), Permission.VIEW, entityList);¤    }¤¤    private String getSpacesSelectedTab()¤    {¤        HttpServletRequest request = ServletActionContext.getRequest();¤        if (request != null)¤        {¤            String selectedTabFromRequest = request.getParameter("spacesSelectedTab");¤            if (TextUtils.stringSet(selectedTabFromRequest))¤            {¤                return selectedTabFromRequest;¤            }¤        }¤¤¤        // try to find it in user's session or preferences if it hasn't been explicitly specified in the url¤        String selectedTab = new UserInterfaceState(getRemoteUser()).getDashboardTab();¤¤        return (TextUtils.stringSet(selectedTab)) ? selectedTab : "all";¤    }¤¤    private List getListOfLabels(String labelString)¤    {¤        List labels = new ArrayList();¤        if (TextUtils.stringSet(labelString))¤        {¤            StringTokenizer st = new StringTokenizer(labelString, ",");¤            while (st.hasMoreTokens())¤            {¤                String labelName = st.nextToken().trim();¤                labels.add(labelManager.getLabel(labelName));¤            }¤        }¤        return labels;¤    }¤¤    public String getName()¤    {¤        return MACRO_NAME;¤    }¤¤    private UserInterfaceState getUserInterfaceState()¤    {¤        return new UserInterfaceState(getRemoteUser(), getUserAccessor());¤    }¤¤    public void setSpaceManager(SpaceManager spaceManager)¤    {¤        this.spaceManager = spaceManager;¤    }¤¤    public void setSmartListManager(SmartListManager smartListManager)¤    {¤        this.smartListManager = smartListManager;¤    }¤¤    public void setLabelManager(LabelManager labelManager)¤    {¤        this.labelManager = labelManager;¤    }¤¤    public void setPermissionManager(PermissionManager permissionManager)¤    {¤        this.permissionManager = permissionManager;¤    }¤¤    public void setUserAccessor(UserAccessor userAccessor)¤    {¤        this.userAccessor = userAccessor;¤    }¤¤    public UserAccessor getUserAccessor()¤    {¤        return userAccessor;¤    }¤¤    protected SettingsManager settingsManager = null;¤	public void setSettingsManager (SettingsManager settingsManager) {¤		this.settingsManager = settingsManager;¤	}¤	//#UC END# *460A5B8C0242_CUSTOM_METHODS_AND_DATA*
			    )))
		    quid       	"460A5B8C0242"
		    documentation 	"Макрос, который показывает на странице список последних обновлений."
		    stereotype 	"CMacroPlugin"
		    superclasses 	(list inheritance_relationship_list
			(object Inheritance_Relationship
			    quid       	"461119BB0138"
			    supplier   	"Logical View::external::JavaConfluence::ConfluenceClassPack::AbstractHtmlGeneratingMacro"
			    quidu      	"460A5C880148"))
		    language   	"MDA Generator")
		(object Class "DiscussionManagerBase"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"abstract")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"Need assign op"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"Need copy ctor"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"Need ref count"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"Need unsorted less"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"ifdef"
			    value      	"")
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"need UC"
			    value      	"true")
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"need dctor"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"need objcounter"
			    value      	"true")
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"no base class"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"non virtual base"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"singleton"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"SELF GENERATED FILE (java)"
			    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/ConfluencePlugins/DiscussionsSupport/DiscussionManagerBase.java")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*460A5BE702FD_CUSTOM_IMPORT*"
			    value      	"//#UC START# *460A5BE702FD_CUSTOM_IMPORT*¤import com.atlassian.confluence.pages.AbstractPage;¤import com.atlassian.confluence.pages.BlogPost;¤import com.atlassian.confluence.pages.Page;¤//#UC END# *460A5BE702FD_CUSTOM_IMPORT*")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*460A5BE702FD_CUSTOM_CLASS_DEFINITION*"
			    value      	"//#UC START# *460A5BE702FD_CUSTOM_CLASS_DEFINITION*¤//#UC END# *460A5BE702FD_CUSTOM_CLASS_DEFINITION*")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*460A5BE702FD_CUSTOM_METHODS_AND_DATA*"
			    value      	(value Text 
|//#UC START# *460A5BE702FD_CUSTOM_METHODS_AND_DATA*¤	static public boolean isPage (AbstractPage entity) {¤		return entity instanceof Page;¤	}¤¤	static public boolean isBlog (AbstractPage entity) {¤		return entity instanceof BlogPost;¤	}¤¤	public DiscussionList getDiscussions () {¤		try {¤			if (this.list == null) {¤				this.list = load_discussion_list ();¤			}¤			return this.list;¤		} catch (Exception e) {¤			System.err.println ("OpenDiscussionManager::getDiscussions: Exception: " + e.getMessage ());¤		}¤		return new DiscussionList ();¤	}¤	abstract protected DiscussionList load_discussion_list ()  throws Exception;¤	//#UC END# *460A5BE702FD_CUSTOM_METHODS_AND_DATA*
			    )))
		    quid       	"460A5BE702FD"
		    documentation 	"Базовый класс менеджеров списков обсуждений."
		    stereotype 	"SimpleClass"
		    language   	"MDA Generator"
		    abstract   	TRUE)
		(object Class "DiscussionsMacroBase"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"abstract")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"Need assign op"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"Need copy ctor"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"Need ref count"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"Need unsorted less"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"ifdef"
			    value      	"")
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"need UC"
			    value      	"true")
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"need dctor"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"need objcounter"
			    value      	"true")
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"no base class"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"non virtual base"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"singleton"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"SELF GENERATED FILE (java)"
			    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/ConfluencePlugins/DiscussionsSupport/DiscussionsMacroBase.java")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*460A5C2100AB_CUSTOM_IMPORT*"
			    value      	"//#UC START# *460A5C2100AB_CUSTOM_IMPORT*¤import com.atlassian.confluence.renderer.radeox.macros.MacroUtils;¤¤import com.atlassian.confluence.setup.settings.SettingsManager;¤import com.atlassian.confluence.pages.AbstractPage;¤import com.atlassian.confluence.pages.PageManager;¤import com.atlassian.confluence.pages.CommentManager;¤import com.atlassian.confluence.spaces.SpaceManager;¤import com.atlassian.confluence.spaces.Space;¤import com.atlassian.confluence.security.PermissionManager;¤import com.atlassian.confluence.security.Permission;¤import com.atlassian.confluence.labels.LabelManager;¤import com.atlassian.confluence.renderer.radeox.macros.*;¤import com.atlassian.confluence.user.AuthenticatedUserThreadLocal;¤import com.atlassian.confluence.user.UserInterfaceState;¤import com.atlassian.confluence.renderer.PageContext;¤import com.atlassian.confluence.util.GeneralUtil;¤import com.atlassian.confluence.util.velocity.VelocityUtils;¤import com.atlassian.user.User;¤import com.opensymphony.webwork.ServletActionContext;¤import com.opensymphony.util.TextUtils;¤import org.radeox.macro.parameter.MacroParameter;¤import javax.servlet.http.HttpServletRequest;¤¤import java.io.IOException;¤import java.util.*;¤//#UC END# *460A5C2100AB_CUSTOM_IMPORT*")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*460A5C2100AB_CUSTOM_CLASS_DEFINITION*"
			    value      	"//#UC START# *460A5C2100AB_CUSTOM_CLASS_DEFINITION*¤//#UC END# *460A5C2100AB_CUSTOM_CLASS_DEFINITION*")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*460A5C2100AB_CUSTOM_METHODS_AND_DATA*"
			    value      	(value Text 
|//#UC START# *460A5C2100AB_CUSTOM_METHODS_AND_DATA*¤	abstract protected boolean isOpenDiscussion ();¤	abstract protected DiscussionManagerBase getDiscussionManager ();¤	abstract protected List<Discussion2> getDiscussionList (Set<String> spaces, MacroParameter macroParameter, User user);¤¤	protected String getHtml (MacroParameter macroParameter) throws IllegalArgumentException, IOException {¤		try {¤			// now create a simple velocity context and render a template for the output¤			Map<String, Object> contextMap = MacroUtils.defaultVelocityContext ();¤¤			setListCount (parseParameterForKey (macroParameter, "key"));¤¤			String strHeader = parseParameterForKey (macroParameter, "header");¤			if (strHeader != null) {¤				contextMap.put ("header", strHeader);¤			}¤			Set<String> spaces = getSpaces (parseParameterForKey (macroParameter, "space"));¤			if (spaces == null || spaces.size () > 1) {¤				contextMap.put ("needSpace", Boolean.TRUE);¤			}¤			String strStartLines = parseParameterForKey (macroParameter, "lines");¤			if (strStartLines == null) {¤				contextMap.put ("lines", new Integer (999999));¤			} else {¤				contextMap.put ("lines", new Integer (strStartLines));¤			}¤			String strInc = parseParameterForKey (macroParameter, "inc");¤			if (strInc == null) {¤				contextMap.put ("inc", new Integer (999999));¤			} else {¤				contextMap.put ("inc", new Integer (strInc));¤			}¤			User user = AuthenticatedUserThreadLocal.getUser ();¤			if (user != null) { // if the user was logged¤				contextMap.put ("curUser", user.getName ());¤			}¤			contextMap.put ("pagemanager", this.pageManager);¤			contextMap.put ("commentmanager", this.commentManager);¤			contextMap.put ("maxListCount", this.maxListCount);¤			contextMap.put ("open_discussion", isOpenDiscussion ());¤			addMoreLessUrl (contextMap, macroParameter);¤¤			List<Discussion2> list = getDiscussionList (spaces, macroParameter, user);¤			contextMap.put ("discussionList", list);¤¤			contextMap.put ("discussionmanager", getDiscussionManager ());¤¤			return VelocityUtils.getRenderedTemplate ("DiscussionsMacro.vm", contextMap);¤		} catch (Exception e) {¤			System.err.println ("OpenDiscussionsMacro:getHtml: error:" + e.getMessage ());¤			throw new IOException (e.getMessage ());¤		}¤	}¤¤	protected void addMoreLessUrl (Map<String, Object> contextMap, MacroParameter macroParameter) {¤		HttpServletRequest request = ServletActionContext.getRequest ();¤        String url;¤        if (request != null) {¤            url = buildBaseUrl (request, Arrays.asList (¤            		new String []{this.maxListCount}¤            ));¤        } else {¤            PageContext context = getPageContext (macroParameter);¤            String baseurl = this.settingsManager.getGlobalSettings ().getBaseUrl ();¤            url = GeneralUtil.appendAmpsandOrQuestionMark (baseurl + context.getEntity ().getUrlPath ());¤        }¤        contextMap.put ("url", url);¤	}¤¤	protected void setListCount (String listKey) {¤		maxListCount = "maxListCount";¤		if (listKey == null) {¤			this.maxListCount += this.getClass ().getSimpleName ();¤		} else {¤			this.maxListCount += listKey;¤		}¤	}¤¤	protected Set<String> getSpaces (String strSpaces) {¤		if (!TextUtils.stringSet (strSpaces)) {¤			return null;¤		}¤		if (!"dashboard".equals(strSpaces)) {¤			return getTokenizeSpaces (strSpaces);¤		}¤		String selectedSpacesTab = getSpacesSelectedTab ();¤		if ("all".equals (selectedSpacesTab)) {¤			return null;¤		}¤		DashboardMacroSupport dashboardSupport = new DashboardMacroSupport ();¤        dashboardSupport.setLabelManager (this.labelManager);¤        dashboardSupport.setPermissionManager (this.permissionManager);¤        dashboardSupport.setSpaceManager (this.spaceManager);¤        try {¤            return getSpaceListFilteredByTabSelection (selectedSpacesTab, dashboardSupport);¤        } catch (Exception e) {¤        	System.err.println ("OpenDiscussionsMacro:getSpaces: error:" + e.getMessage ());¤            return null;¤        }¤	}¤¤	private Set<String> getTokenizeSpaces (String strSpaces) {¤		String[] list = strSpaces.split(",");¤		Set<String> set = new HashSet<String> (list.length, 1.0f);¤		for (int i = 0; i < list.length; ++i) {¤			set.add(list [i]);¤		}¤		return set;¤	}¤¤	private String getSpacesSelectedTab () {¤        HttpServletRequest request = ServletActionContext.getRequest();¤        if (request != null) {¤            String selectedTabFromRequest = request.getParameter ("spacesSelectedTab");¤            if (TextUtils.stringSet(selectedTabFromRequest)) {¤                return selectedTabFromRequest;¤            }¤        }¤        // try to find it in user's session or preferences if it hasn't been explicitly specified in the url¤        String selectedTab = new UserInterfaceState (getRemoteUser ()).getDashboardTab ();¤        return (TextUtils.stringSet (selectedTab)) ? selectedTab : "all";¤    }¤¤	private Set<String> getSpaceListFilteredByTabSelection (String selectedSpacesTab, DashboardMacroSupport dashboardSupport) {¤		List spaceList = null;¤		if (getRemoteUser () != null && "my".equals(selectedSpacesTab)) {¤            spaceList = dashboardSupport.getFavouriteSpaces ();¤		} else if ("team".equals(selectedSpacesTab)) { // lookup labelled team spaces.¤            spaceList = dashboardSupport.getTeamSpaces ();¤		} else if ("new".equals(selectedSpacesTab)) { // lookup new spaces.¤            spaceList = dashboardSupport.getNewSpaces ();¤		} else {¤			System.err.println ("OpenDiscussionsMacro:getSpaceListFilteredByTabSelection: unknown Tab '" + selectedSpacesTab + "'");¤		}¤		if (spaceList == null) {¤			return null;¤		}¤		Set<String> set = new HashSet<String> (spaceList.size (), 1.0f);¤		Iterator it = spaceList.iterator();¤		while (it.hasNext ()) {¤			set.add(((Space)it.next ()).getKey ());¤		}¤		return set;¤	}¤¤	final protected boolean isAppropriatePage (long pageId, Set<String> spaces, User user) {¤		AbstractPage page = this.pageManager.getAbstractPage (pageId);¤		if (this.permissionManager.hasPermission (user, Permission.VIEW, page)) {¤			if ((spaces == null) || (spaces.contains (page.getSpaceKey ()) == true)) {¤				return true;¤			}¤		}¤		return false;¤	}¤¤	public String maxListCount = null;¤¤	protected PageManager pageManager = null;¤	public void setPageManager (PageManager pageManager) {¤		this.pageManager = pageManager;¤	}¤¤	protected CommentManager commentManager = null;¤	public void setCommentManager (CommentManager commentManager) {¤		this.commentManager = commentManager;¤	}¤¤	protected LabelManager labelManager = null;¤	public void setLabelManager (LabelManager labelManager) {¤		this.labelManager = labelManager;¤	}¤¤	protected SpaceManager spaceManager = null;¤	public void setSpaceManager (SpaceManager spaceManager) {¤		this.spaceManager = spaceManager;¤	}¤¤	protected PermissionManager permissionManager = null;¤	public void setPermissionManager (PermissionManager permissionManager) {¤		this.permissionManager = permissionManager;¤	}¤¤	protected SettingsManager settingsManager = null;¤	public void setSettingsManager (SettingsManager settingsManager) {¤		this.settingsManager = settingsManager;¤	}¤¤	protected int get_int (String param, int defvalue) {¤		if (param == null) {¤			return defvalue;¤		}¤		return Integer.parseInt (param);¤	}¤	//#UC END# *460A5C2100AB_CUSTOM_METHODS_AND_DATA*
			    )))
		    quid       	"460A5C2100AB"
		    documentation 	"Базовый класс макросов обсуждений."
		    stereotype 	"CMacroPlugin"
		    superclasses 	(list inheritance_relationship_list
			(object Inheritance_Relationship
			    quid       	"460A5CE70251"
			    supplier   	"Logical View::external::JavaConfluence::ConfluenceClassPack::AbstractHtmlGeneratingMacro"
			    quidu      	"460A5C880148"))
		    language   	"MDA Generator"
		    abstract   	TRUE)
		(object Class "RecentlyUpdateListener"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"SELF GENERATED FILE (java)"
			    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/ConfluencePlugins/DiscussionsSupport/RecentlyUpdateListener.java")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*460BACED004E_CUSTOM_IMPORT*"
			    value      	"//#UC START# *460BACED004E_CUSTOM_IMPORT*¤import com.atlassian.confluence.event.events.content.blogpost.BlogPostUpdateEvent;¤import com.atlassian.confluence.event.events.content.blogpost.BlogPostViewEvent;¤import com.atlassian.confluence.event.events.content.page.PageUpdateEvent;¤import com.atlassian.confluence.event.events.content.page.PageViewEvent;¤¤import com.atlassian.confluence.event.events.content.ContentEvent;¤¤import com.atlassian.spring.container.ContainerManager;¤¤import com.atlassian.confluence.user.AuthenticatedUserThreadLocal;¤import com.atlassian.user.User;¤//#UC END# *460BACED004E_CUSTOM_IMPORT*")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*460BACED004E_CUSTOM_CLASS_DEFINITION*"
			    value      	"//#UC START# *460BACED004E_CUSTOM_CLASS_DEFINITION*¤//#UC END# *460BACED004E_CUSTOM_CLASS_DEFINITION*")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*460BACED004E_CONTENT*"
			    value      	(value Text 
|//#UC START# *460BACED004E_CONTENT*¤		PageViewEvent.class, PageUpdateEvent.class¤		, BlogPostViewEvent.class, BlogPostUpdateEvent.class¤		//#UC END# *460BACED004E_CONTENT*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*460BACED004E_GETHANDLEDEVENTCLASSES_IMPLEMETATION*"
			    value      	(value Text 
|//#UC START# *460BACED004E_GETHANDLEDEVENTCLASSES_IMPLEMETATION*¤		return handledClasses;¤		//#UC END# *460BACED004E_GETHANDLEDEVENTCLASSES_IMPLEMETATION*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*460BACED004E_HANDLEEVENT_IMPLEMETATION*"
			    value      	(value Text 
|//#UC START# *460BACED004E_HANDLEEVENT_IMPLEMETATION*¤		try {¤			User user = AuthenticatedUserThreadLocal.getUser ();¤			if (event instanceof PageViewEvent) {¤				ContentEvent contentEvent  = (ContentEvent)event;¤				getViewedEntityManager ().viewedEntity (contentEvent.getContent ().getId (), user);¤			} else if (event instanceof PageUpdateEvent) {¤				ContentEvent contentEvent  = (ContentEvent)event;¤				getViewedEntityManager ().updateEntity (contentEvent.getContent ().getId ());¤			} else if (event instanceof BlogPostViewEvent) {¤				ContentEvent contentEvent  = (ContentEvent)event;¤				getViewedEntityManager ().viewedEntity (contentEvent.getContent ().getId (), user);¤			} else if (event instanceof BlogPostUpdateEvent) {¤				ContentEvent contentEvent  = (ContentEvent)event;¤				getViewedEntityManager ().updateEntity (contentEvent.getContent ().getId ());¤			} else {¤				System.err.println (¤					" RecentlyUpdateListener::handleEvent: ERROR! Event type is unknown '"¤					+ event.getClass ().getName () + "'"¤				);¤			}¤		} catch (Exception e) {¤			System.err.println ("RecentlyUpdateListener::handleEvent: ERROR: " + e);¤		}¤		//#UC END# *460BACED004E_HANDLEEVENT_IMPLEMETATION*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*460BACED004E_CUSTOM_METHODS_AND_DATA*"
			    value      	(value Text 
|//#UC START# *460BACED004E_CUSTOM_METHODS_AND_DATA*¤¤¤	private ViewedEntityManager viewedEntityManager = null;¤¤	private ViewedEntityManager getViewedEntityManager () {¤		if (this.viewedEntityManager == null) {¤			this.viewedEntityManager = (ViewedEntityManager) ContainerManager.getComponent("ru.garant.MDProcess.ConfluencePlugins.DiscussionsSupport.ViewedEntityManager");¤		}¤		if (this.viewedEntityManager == null) {¤			System.err.println ("ViewPageListener::getOpenDiscussionManager: can not find ViewedEntityManager");¤		}¤		return this.viewedEntityManager;¤	}¤	//#UC END# *460BACED004E_CUSTOM_METHODS_AND_DATA*
			    )))
		    quid       	"460BACED004E"
		    documentation 	"Обработчик события для реализации списка Recently Updated."
		    stereotype 	"CListenerPlugin"
		    language   	"MDA Generator")
		(object Class "DiscussionsMacro"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"need UC"
			    value      	"true")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"SELF GENERATED FILE (output.xml)"
			    value      	"w:/MDProcess/java/src/etc/ConfluencePlugins/DiscussionsMacro.vm")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"output.xml:*46120DA70290_CUSTOM_CONTENT*"
			    value      	(value Text 
|##UC_BEGIN*46120DA70290_CUSTOM_CONTENT*¤#set ($count = $discussionList.size())¤¤#if ($req.getParameter($maxListCount))¤	#set ($has_param = 1)¤#end¤¤#set ($cur_lines = $generalUtil.convertToInteger($req.getParameter($maxListCount)))¤#if (!$cur_lines || $cur_lines < $lines)¤	#set ($cur_lines = $lines)¤#end¤#if ($cur_lines > $count)¤	#set ($cur_lines = $count)¤#end¤¤#if ($count > 0)¤	<div class="tabletitle" style="width: 100%">¤		#if ($count > $lines || (!$open_discussion && !$has_param))¤			<div style="float:right;" valign="bottom" class="tabletitleops">¤				##&nbsp;¤				#if ($cur_lines > $lines)¤					#set ($cless = $cur_lines - $inc)¤					<a href="$url$maxListCount=$cless"><img border="0" width="12" height="12" src="$req.contextPath/images/icons/subtract_16.gif" title="Show Fewer"></a>¤				#end¤				#if ($cur_lines < $count || (!$open_discussion && !$has_param))¤					#set ($cmore = $cur_lines + $inc)¤					<a href="$url$maxListCount=$cmore"><img border="0" width="12" height="12" src="$req.contextPath/images/icons/add_16.gif" title="Show More"></a>¤		 		#end¤			</div>¤		#end¤		#if ($header) $header #end¤		<br>¤		#if ($open_discussion)¤			<font size="1">$cur_lines open discussions from $count</font>¤		#else¤			<font size="1">$count closed discussions</font>¤		#end¤	</div>¤¤	<table width="100%" cellspacing="1"  border="0" class="tableview">¤		#foreach ($discussion in $discussionList)¤			#if ($curUser)¤				#set ($already_read = $discussion.isActual($curUser))¤			#else ¤				#set ($already_read = 1)¤			#end¤			#if ($open_discussion || $has_param || !$already_read || !$curUser)¤				#if ($velocityCount < $cur_lines || $velocityCount == $cur_lines)¤					#set ($page = $pagemanager.getAbstractPage($discussion.pageId))¤					<tr><td>¤						<div style="float:right;" class="smalltext">¤							#if ($discussion.owner)¤							    by <a href="$req.contextPath/display/~$generalUtil.urlEncode($!discussion.owner)">$action.getUserFullName($!discussion.owner)</a> ($generalUtil.getRelativeTime($!discussion.date))¤							#else¤							    by <a>Anonymous</a> ($generalUtil.getRelativeTime($!discussion.date))¤							#end¤						</div>¤						<img src="${req.contextPath}$garIcon.getGarIcon($page)" width="16" height="16" border="0">¤						#set ($titleUrl = $page.urlPath)¤						#set ($commentCount = $page.comments.size())¤						#if ($commentCount > 0 && ${discussion.commentId})¤							#set ($comment = $commentmanager.getComment($discussion.commentId))¤							#if ($comment)¤								#set ($titleUrl = $comment.urlPath)¤							#end¤						#end¤						<a href="$titleUrl">¤							##if (($open_discussion && $curUser && !$already_read)¤							##|| (!$open_discussion && $has_param && $curUser && !$already_read))¤							#if ($curUser && !$already_read)¤								<font color="#CC0000">$page.title</font>¤							#else¤								$page.title¤							#end¤						</a>¤¤						#if ($needSpace)¤							<span class="smalltext">#contentOther($page)</span>¤						#end¤¤						#if ($discussionmanager.isBlog($page))¤							<a>&lt;from $generalUtil.getFormatDateSimple($page.creationDate)&gt;</a>¤						#end¤						#if ($curUser && !$already_read)¤							<a>&nbsp;(<font color="#CC0000">$garDiscussion.getCountUnviewed($page)</font>)</a>¤						#end¤					</td></tr>¤				#end¤			#end¤		#end¤	</table>¤#end¤##UC_END*46120DA70290_CUSTOM_CONTENT*
			    )))
		    quid       	"46120DA70290"
		    documentation 	"Темплейт для обсуждений."
		    stereotype 	"VM"
		    language   	"MDA Generator")
		(object Class "SaveDiscussionsLifeCycle"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"need UC"
			    value      	"true")
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"sequence"
			    value      	"1201")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"SELF GENERATED FILE (java)"
			    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/ConfluencePlugins/DiscussionsSupport/SaveDiscussionsLifeCycle.java")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*461656880222_CUSTOM_IMPORT*"
			    value      	"//#UC START# *461656880222_CUSTOM_IMPORT*¤import com.atlassian.spring.container.ContainerManager;¤import java.util.Calendar;¤import java.text.DateFormat;¤//#UC END# *461656880222_CUSTOM_IMPORT*")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*461656880222_CUSTOM_CLASS_DEFINITION*"
			    value      	"//#UC START# *461656880222_CUSTOM_CLASS_DEFINITION*¤//#UC END# *461656880222_CUSTOM_CLASS_DEFINITION*")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*461656880222_STARTUP_IMPLEMETATION*"
			    value      	(value Text 
|//#UC START# *461656880222_STARTUP_IMPLEMETATION*¤		//#UC END# *461656880222_STARTUP_IMPLEMETATION*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*461656880222_SHUTDOWN_IMPLEMETATION*"
			    value      	(value Text 
|//#UC START# *461656880222_SHUTDOWN_IMPLEMETATION*¤		try {¤			getOpenDiscussionManager ().saveDiscussionList ();¤			getClosedDiscussionManager ().saveDiscussionList();¤			DiscussionList opened = getOpenDiscussionManager ().getDiscussions ();¤			DiscussionList closed = getClosedDiscussionManager ().getDiscussions ();¤			String strTime = DateFormat.getDateTimeInstance ().format (Calendar.getInstance ().getTime ());¤			System.out.println (¤					"SaveDiscussionsLifeCycle::shutdown: was saved "¤					+ opened.size () + " open discussions and "¤					+ closed.size () + " closed in " + strTime¤			);¤		} catch (Exception e) {¤			System.err.println ("SaveDiscussionsLifeCycle::shutdown: Exception: " + e.getMessage ());¤			throw e;¤		}¤		//#UC END# *461656880222_SHUTDOWN_IMPLEMETATION*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*461656880222_CUSTOM_METHODS_AND_DATA*"
			    value      	(value Text 
|//#UC START# *461656880222_CUSTOM_METHODS_AND_DATA*¤	private OpenDiscussionManager openDiscussionManager = null;¤	private ClosedDiscussionManager closedDiscussionManager = null;¤¤	private OpenDiscussionManager getOpenDiscussionManager () {¤		if (this.openDiscussionManager == null) {¤			this.openDiscussionManager = (OpenDiscussionManager) ContainerManager.getInstance ().getContainerContext ().getComponent ("ru.garant.MDProcess.ConfluencePlugins.DiscussionsSupport.OpenDiscussionManager");¤		}¤		if (this.openDiscussionManager == null) {¤			System.err.println ("SaveDiscussionsLifeCycle::getOpenDiscussionManager: can not find OpenDiscussionManager");¤		}¤		return this.openDiscussionManager;¤	}¤	private ClosedDiscussionManager getClosedDiscussionManager () {¤		if (this.closedDiscussionManager == null) {¤			this.closedDiscussionManager = (ClosedDiscussionManager) ContainerManager.getInstance ().getContainerContext ().getComponent ("ru.garant.MDProcess.ConfluencePlugins.DiscussionsSupport.ClosedDiscussionManager");¤		}¤		if (this.closedDiscussionManager == null) {¤			System.err.println ("SaveDiscussionsLifeCycle::getClosedDiscussionManager: can not find ClosedDiscussionManager");¤		}¤		return this.closedDiscussionManager;¤	}¤¤	public void setOpenDiscussionManager (OpenDiscussionManager openDiscussionManager) {¤		this.openDiscussionManager = openDiscussionManager;¤	}¤	public void setClosedDiscussionManager (ClosedDiscussionManager closedDiscussionManager) {¤		this.closedDiscussionManager = closedDiscussionManager;¤	}¤	//#UC END# *461656880222_CUSTOM_METHODS_AND_DATA*
			    )))
		    quid       	"461656880222"
		    documentation 	"Сохранение всех списков обсуждений при выключении серсера Конфлюенс."
		    stereotype 	"CLifecyclePlugin"
		    language   	"MDA Generator")
		(object Association "$UNNAMED$0"
		    quid       	"4613A0B900DA"
		    roles      	(list role_list
			(object Role "$UNNAMED$1"
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"AbstarctOperation"
				    value      	"regular")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"IsNative"
				    value      	"false"))
			    quid       	"4613A0B9030D"
			    supplier   	"Logical View::MDProcess::ConfluencePlugins::DiscussionsSupport::UserDate"
			    quidu      	"46013BF50138"
			    keys       	(list class_attribute_list
				(object ClassAttribute "key"
				    attributes 	(list Attribute_Set
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"ValueInitialized"
					    value      	"true")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"AbstarctOperation"
					    value      	"regular")
					(object Attribute
					    tool       	"MDA Generator"
					    name       	"IsNative"
					    value      	"false"))
				    quid       	"4613A0D4030D"
				    type       	"string"
				    exportControl 	"Public"
				    Containment 	"By Value"))
			    Containment 	"By Value"
			    is_navigable 	TRUE)
			(object Role "$UNNAMED$2"
			    quid       	"4613A0B9030F"
			    supplier   	"Logical View::MDProcess::ConfluencePlugins::DiscussionsSupport::Discussion2::UsersNestedMap"
			    quidu      	"46139E3403A9"
			    is_aggregate 	TRUE)))
		(object Association "$UNNAMED$3"
		    quid       	"4613A2020119"
		    roles      	(list role_list
			(object Role "$UNNAMED$4"
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"AbstarctOperation"
				    value      	"regular")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"IsNative"
				    value      	"false"))
			    quid       	"4613A2030138"
			    supplier   	"Logical View::MDProcess::ConfluencePlugins::DiscussionsSupport::Discussion2"
			    quidu      	"46013C2300EA"
			    Containment 	"By Value"
			    is_navigable 	TRUE)
			(object Role "$UNNAMED$5"
			    quid       	"4613A203013A"
			    supplier   	"Logical View::MDProcess::ConfluencePlugins::DiscussionsSupport::DiscussionList::vec"
			    quidu      	"4613A1BB01D4"
			    is_aggregate 	TRUE)))
		(object Association "$UNNAMED$6"
		    quid       	"4613A3610232"
		    roles      	(list role_list
			(object Role "list"
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"AbstarctOperation"
				    value      	"regular")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"IsNative"
				    value      	"false")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"java:*4613A3620109_INIT_list*"
				    value      	(value Text 
|//#UC START# *4613A3620109_INIT_list*¤		return Collections.synchronizedList (new Vector<Discussion2> ());¤		//#UC END# *4613A3620109_INIT_list*
				    )))
			    quid       	"4613A3620109"
			    label      	"list"
			    supplier   	"Logical View::MDProcess::ConfluencePlugins::DiscussionsSupport::DiscussionList::vec"
			    quidu      	"4613A1BB01D4"
			    Containment 	"By Value"
			    exportControl 	"Private"
			    is_navigable 	TRUE)
			(object Role "$UNNAMED$7"
			    quid       	"4613A3620119"
			    supplier   	"Logical View::MDProcess::ConfluencePlugins::DiscussionsSupport::DiscussionList"
			    quidu      	"45B72F5001D4"
			    is_aggregate 	TRUE)))
		(object Association "$UNNAMED$8"
		    quid       	"4613A4A20222"
		    roles      	(list role_list
			(object Role "users"
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"AbstarctOperation"
				    value      	"regular")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"IsNative"
				    value      	"false")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"java:*4613A4A403A9_INIT_users*"
				    value      	(value Text 
|//#UC START# *4613A4A403A9_INIT_users*¤		return new java.util.HashMap<String, ru.garant.MDProcess.ConfluencePlugins.DiscussionsSupport.UserDate> ();¤		//#UC END# *4613A4A403A9_INIT_users*
				    )))
			    quid       	"4613A4A403A9"
			    label      	"users"
			    supplier   	"Logical View::MDProcess::ConfluencePlugins::DiscussionsSupport::Discussion2::UsersNestedMap"
			    quidu      	"46139E3403A9"
			    Containment 	"By Value"
			    exportControl 	"Private"
			    is_navigable 	TRUE)
			(object Role "$UNNAMED$9"
			    quid       	"4613A4A403AB"
			    supplier   	"Logical View::MDProcess::ConfluencePlugins::DiscussionsSupport::Discussion2"
			    quidu      	"46013C2300EA"
			    is_aggregate 	TRUE)))
		(object Association "$UNNAMED$10"
		    quid       	"4613A6CB01A5"
		    roles      	(list role_list
			(object Role "list"
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"AbstarctOperation"
				    value      	"regular")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"IsNative"
				    value      	"false"))
			    quid       	"4613A6CC0138"
			    label      	"list"
			    supplier   	"Logical View::MDProcess::ConfluencePlugins::DiscussionsSupport::DiscussionList"
			    quidu      	"45B72F5001D4"
			    Containment 	"By Value"
			    exportControl 	"Protected"
			    is_navigable 	TRUE)
			(object Role "$UNNAMED$11"
			    quid       	"4613A6CC0148"
			    supplier   	"Logical View::MDProcess::ConfluencePlugins::DiscussionsSupport::DiscussionManagerBase"
			    quidu      	"460A5BE702FD"
			    is_aggregate 	TRUE)))
		(object Association "$UNNAMED$12"
		    quid       	"4615106E004E"
		    roles      	(list role_list
			(object Role "sql"
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"AbstarctOperation"
				    value      	"regular")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"IsNative"
				    value      	"false"))
			    quid       	"4615107000FA"
			    label      	"sql"
			    supplier   	"Logical View::MDProcess::ConfluencePlugins::DiscussionsSupport::SQLExecutor"
			    quidu      	"45E54AAA0261"
			    Containment 	"By Value"
			    exportControl 	"Private"
			    is_navigable 	TRUE)
			(object Role "$UNNAMED$13"
			    quid       	"4615107000FC"
			    supplier   	"Logical View::MDProcess::ConfluencePlugins::DiscussionsSupport::ClosedDiscussionManager"
			    quidu      	"45E447FE0203"
			    is_aggregate 	TRUE))))
	    logical_presentations 	(list unit_reference_list
		(object ClassDiagram "Main"
		    quid       	"45B719B40280"
		    title      	"Main"
		    zoom       	90
		    max_height 	28350
		    max_width  	21600
		    origin_x   	236
		    origin_y   	881
		    items      	(list diagram_item_list
			(object ClassView "Class" "Logical View::MDProcess::ConfluencePlugins::DiscussionsSupport::CommentListener" @1
			    ShowCompartmentStereotypes 	TRUE
			    IncludeAttribute 	TRUE
			    IncludeOperation 	TRUE
			    ShowOperationSignature 	TRUE
			    location   	(300, 1452)
			    font       	(object Font
				size       	10
				face       	"Arial"
				charSet    	204
				bold       	FALSE
				italics    	FALSE
				underline  	FALSE
				strike     	FALSE
				color      	0
				default_color 	TRUE)
			    label      	(object ItemLabel
				Parent_View 	@1
				location   	(106, 1422)
				fill_color 	13434879
				nlines     	1
				max_width  	388
				justify    	0
				label      	"CommentListener")
			    stereotype 	(object ItemLabel
				Parent_View 	@1
				location   	(106, 1372)
				fill_color 	13434879
				anchor     	10
				nlines     	1
				max_width  	388
				justify    	0
				label      	"<<CListenerPlugin>>")
			    icon_style 	"Label"
			    fill_color 	15448575
			    quidu      	"45B719C1003E"
			    width      	406
			    height     	184
			    annotation 	8
			    autoResize 	TRUE)
			(object ClassView "Class" "Logical View::MDProcess::ConfluencePlugins::DiscussionsSupport::OpenDiscussionManager" @2
			    ShowCompartmentStereotypes 	TRUE
			    IncludeAttribute 	TRUE
			    IncludeOperation 	TRUE
			    ShowOperationSignature 	TRUE
			    location   	(327, 987)
			    font       	(object Font
				size       	10
				face       	"Arial"
				charSet    	204
				bold       	FALSE
				italics    	FALSE
				underline  	FALSE
				strike     	FALSE
				color      	0
				default_color 	TRUE)
			    label      	(object ItemLabel
				Parent_View 	@2
				location   	(86, 958)
				fill_color 	13434879
				nlines     	1
				max_width  	482
				justify    	0
				label      	"OpenDiscussionManager")
			    stereotype 	(object ItemLabel
				Parent_View 	@2
				location   	(86, 908)
				fill_color 	13434879
				anchor     	10
				nlines     	1
				max_width  	482
				justify    	0
				label      	"<<CComponentPlugin>>")
			    icon_style 	"Label"
			    fill_color 	15448575
			    quidu      	"45B72EBE01F4"
			    width      	500
			    height     	182
			    annotation 	8
			    autoResize 	TRUE)
			(object ClassView "Class" "Logical View::MDProcess::ConfluencePlugins::DiscussionsSupport::OpenDiscussionsMacro" @3
			    ShowCompartmentStereotypes 	TRUE
			    IncludeAttribute 	TRUE
			    IncludeOperation 	TRUE
			    ShowOperationSignature 	TRUE
			    location   	(324, 315)
			    font       	(object Font
				size       	10
				face       	"Arial"
				charSet    	204
				bold       	FALSE
				italics    	FALSE
				underline  	FALSE
				strike     	FALSE
				color      	0
				default_color 	TRUE)
			    label      	(object ItemLabel
				Parent_View 	@3
				location   	(94, 286)
				fill_color 	13434879
				nlines     	1
				max_width  	460
				justify    	0
				label      	"OpenDiscussionsMacro")
			    stereotype 	(object ItemLabel
				Parent_View 	@3
				location   	(94, 236)
				fill_color 	13434879
				anchor     	10
				nlines     	1
				max_width  	460
				justify    	0
				label      	"<<CMacroPlugin>>")
			    icon_style 	"Label"
			    fill_color 	15448575
			    quidu      	"45B72EE10213"
			    width      	478
			    height     	182
			    annotation 	8
			    autoResize 	TRUE)
			(object ClassView "Class" "Logical View::MDProcess::ConfluencePlugins::DiscussionsSupport::Discussion" @4
			    ShowCompartmentStereotypes 	TRUE
			    IncludeAttribute 	TRUE
			    IncludeOperation 	TRUE
			    ShowOperationSignature 	TRUE
			    location   	(2868, 1035)
			    font       	(object Font
				size       	10
				face       	"Arial"
				charSet    	204
				bold       	FALSE
				italics    	FALSE
				underline  	FALSE
				strike     	FALSE
				color      	0
				default_color 	TRUE)
			    label      	(object ItemLabel
				Parent_View 	@4
				location   	(2703, 1006)
				fill_color 	13434879
				nlines     	1
				max_width  	330
				justify    	0
				label      	"Discussion")
			    stereotype 	(object ItemLabel
				Parent_View 	@4
				location   	(2703, 956)
				fill_color 	13434879
				anchor     	10
				nlines     	1
				max_width  	328
				justify    	0
				label      	"<<SimpleClass>>")
			    icon_style 	"Label"
			    fill_color 	12842465
			    quidu      	"45B72F6E02EE"
			    width      	348
			    height     	182
			    annotation 	8
			    autoResize 	TRUE)
			(object NoteView @5
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"LinkedItemGuid"
				    value      	"45B72F5001D4"))
			    location   	(1923, 645)
			    font       	(object Font
				size       	8
				face       	"Arial"
				charSet    	204
				bold       	FALSE
				italics    	FALSE
				underline  	FALSE
				strike     	FALSE
				color      	0
				default_color 	TRUE)
			    label      	(object ItemLabel
				Parent_View 	@5
				location   	(1785, 585)
				fill_color 	13434879
				nlines     	3
				max_width  	240
				justify    	1
				label      	"{need UC:=true}")
			    line_color 	3342489
			    fill_color 	13434879
			    width      	300
			    height     	132)
			(object NoteView @6
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"LinkedItemGuid"
				    value      	"45B72F6E02EE"))
			    location   	(2946, 855)
			    font       	(object Font
				size       	8
				face       	"Arial"
				charSet    	204
				bold       	FALSE
				italics    	FALSE
				underline  	FALSE
				strike     	FALSE
				color      	0
				default_color 	TRUE)
			    label      	(object ItemLabel
				Parent_View 	@6
				location   	(2808, 795)
				fill_color 	13434879
				nlines     	3
				max_width  	240
				justify    	1
				label      	"{need UC:=true}")
			    line_color 	3342489
			    fill_color 	13434879
			    width      	300
			    height     	132)
			(object ClassView "Class" "Logical View::MDProcess::ConfluencePlugins::DiscussionsSupport::PageListener" @7
			    ShowCompartmentStereotypes 	TRUE
			    IncludeAttribute 	TRUE
			    IncludeOperation 	TRUE
			    ShowOperationSignature 	TRUE
			    location   	(297, 1653)
			    font       	(object Font
				size       	10
				face       	"Arial"
				charSet    	204
				bold       	FALSE
				italics    	FALSE
				underline  	FALSE
				strike     	FALSE
				color      	0
				default_color 	TRUE)
			    label      	(object ItemLabel
				Parent_View 	@7
				location   	(103, 1623)
				fill_color 	13434879
				nlines     	1
				max_width  	388
				justify    	0
				label      	"PageListener")
			    stereotype 	(object ItemLabel
				Parent_View 	@7
				location   	(103, 1573)
				fill_color 	13434879
				anchor     	10
				nlines     	1
				max_width  	388
				justify    	0
				label      	"<<CListenerPlugin>>")
			    icon_style 	"Label"
			    fill_color 	15448575
			    quidu      	"45BDE64A004E"
			    width      	406
			    height     	184
			    annotation 	8
			    autoResize 	TRUE)
			(object ClassView "Class" "Logical View::MDProcess::ConfluencePlugins::DiscussionsSupport::SaveDiscussionsTrigger" @8
			    ShowCompartmentStereotypes 	TRUE
			    IncludeAttribute 	TRUE
			    IncludeOperation 	TRUE
			    ShowOperationSignature 	TRUE
			    location   	(330, 2451)
			    font       	(object Font
				size       	10
				face       	"Arial"
				charSet    	204
				bold       	FALSE
				italics    	FALSE
				underline  	FALSE
				strike     	FALSE
				color      	0
				default_color 	TRUE)
			    label      	(object ItemLabel
				Parent_View 	@8
				location   	(96, 2421)
				fill_color 	13434879
				nlines     	1
				max_width  	468
				justify    	0
				label      	"SaveDiscussionsTrigger")
			    stereotype 	(object ItemLabel
				Parent_View 	@8
				location   	(96, 2371)
				fill_color 	13434879
				anchor     	10
				nlines     	1
				max_width  	468
				justify    	0
				label      	"<<CTriggerPlugin>>")
			    icon_style 	"Label"
			    fill_color 	15448575
			    quidu      	"45BF2DCA0222"
			    width      	486
			    height     	184
			    annotation 	8
			    autoResize 	TRUE)
			(object ClassView "Class" "Logical View::MDProcess::ConfluencePlugins::DiscussionsSupport::SaveDiscussionsJob" @9
			    ShowCompartmentStereotypes 	TRUE
			    IncludeAttribute 	TRUE
			    IncludeOperation 	TRUE
			    ShowOperationSignature 	TRUE
			    location   	(309, 2118)
			    font       	(object Font
				size       	10
				face       	"Arial"
				charSet    	204
				bold       	FALSE
				italics    	FALSE
				underline  	FALSE
				strike     	FALSE
				color      	0
				default_color 	TRUE)
			    label      	(object ItemLabel
				Parent_View 	@9
				location   	(103, 2088)
				fill_color 	13434879
				nlines     	1
				max_width  	412
				justify    	0
				label      	"SaveDiscussionsJob")
			    stereotype 	(object ItemLabel
				Parent_View 	@9
				location   	(103, 2038)
				fill_color 	13434879
				anchor     	10
				nlines     	1
				max_width  	412
				justify    	0
				label      	"<<CJobPlugin>>")
			    icon_style 	"Label"
			    fill_color 	15448575
			    quidu      	"45BF2DF70242"
			    width      	430
			    height     	184
			    annotation 	8
			    autoResize 	TRUE)
			(object UsesView "" @10
			    font       	(object Font
				size       	10
				face       	"Arial"
				charSet    	204
				bold       	FALSE
				italics    	FALSE
				underline  	FALSE
				strike     	FALSE
				color      	0
				default_color 	TRUE)
			    stereotype 	(object SegLabel @11
				Parent_View 	@10
				location   	(200, 2291)
				font       	(object Font
				    size       	10
				    face       	"Arial"
				    charSet    	204
				    bold       	FALSE
				    italics    	FALSE
				    underline  	FALSE
				    strike     	FALSE
				    color      	0
				    default_color 	TRUE)
				anchor     	10
				anchor_loc 	1
				nlines     	1
				max_width  	450
				justify    	0
				label      	"<<uses>>"
				pctDist    	0.500000
				height     	120
				orientation 	0)
			    line_color 	3947680
			    quidu      	"45BF2E3200AB"
			    client     	@8
			    supplier   	@9
			    vertices   	(list Points
				(323, 2358)
				(314, 2210))
			    line_style 	0)
			(object NoteView @12
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"LinkedItemGuid"
				    value      	"45BF2DCA0222"))
			    location   	(444, 2628)
			    font       	(object Font
				size       	8
				face       	"Arial"
				charSet    	204
				bold       	FALSE
				italics    	FALSE
				underline  	FALSE
				strike     	FALSE
				color      	0
				default_color 	TRUE)
			    label      	(object ItemLabel
				Parent_View 	@12
				location   	(140, 2568)
				fill_color 	13434879
				nlines     	3
				max_width  	572
				justify    	1
				label      	
|{repeat-count:=1000000000}
|{repeat-interval:=3600000}
|{repeated:=true}
				)
			    line_color 	3342489
			    fill_color 	13434879
			    width      	632
			    height     	132)
			(object AttachView "" @13
			    font       	(object Font
				size       	10
				face       	"Arial"
				charSet    	204
				bold       	FALSE
				italics    	FALSE
				underline  	FALSE
				strike     	FALSE
				color      	0
				default_color 	TRUE)
			    stereotype 	TRUE
			    line_color 	3342489
			    client     	@12
			    supplier   	@8
			    vertices   	(list Points
				(444, 2628)
				(330, 2451))
			    line_style 	0)
			(object NoteView @14
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"LinkedItemGuid"
				    value      	"45E54AAA0261"))
			    location   	(1920, 468)
			    font       	(object Font
				size       	8
				face       	"Arial"
				charSet    	204
				bold       	FALSE
				italics    	FALSE
				underline  	FALSE
				strike     	FALSE
				color      	0
				default_color 	TRUE)
			    label      	(object ItemLabel
				Parent_View 	@14
				location   	(1782, 409)
				fill_color 	13434879
				nlines     	2
				max_width  	240
				justify    	1
				label      	"{need UC:=true}")
			    line_color 	3342489
			    fill_color 	13434879
			    width      	300
			    height     	131)
			(object ClassView "Class" "Logical View::MDProcess::ConfluencePlugins::DiscussionsSupport::LabelListener" @15
			    ShowCompartmentStereotypes 	TRUE
			    IncludeAttribute 	TRUE
			    IncludeOperation 	TRUE
			    ShowOperationSignature 	TRUE
			    location   	(300, 1884)
			    font       	(object Font
				size       	10
				face       	"Arial"
				charSet    	204
				bold       	FALSE
				italics    	FALSE
				underline  	FALSE
				strike     	FALSE
				color      	0
				default_color 	TRUE)
			    label      	(object ItemLabel
				Parent_View 	@15
				location   	(106, 1854)
				fill_color 	13434879
				nlines     	1
				max_width  	388
				justify    	0
				label      	"LabelListener")
			    stereotype 	(object ItemLabel
				Parent_View 	@15
				location   	(106, 1804)
				fill_color 	13434879
				anchor     	10
				nlines     	1
				max_width  	388
				justify    	0
				label      	"<<CListenerPlugin>>")
			    icon_style 	"Label"
			    fill_color 	15448575
			    quidu      	"45E581B202AF"
			    width      	406
			    height     	184
			    annotation 	8
			    autoResize 	TRUE)
			(object ClassView "Class" "Logical View::MDProcess::ConfluencePlugins::DiscussionsSupport::CloseDiscussionPlugin" @16
			    ShowCompartmentStereotypes 	TRUE
			    IncludeAttribute 	TRUE
			    IncludeOperation 	TRUE
			    ShowOperationSignature 	TRUE
			    location   	(2271, 2214)
			    font       	(object Font
				size       	10
				face       	"Arial"
				charSet    	204
				bold       	FALSE
				italics    	FALSE
				underline  	FALSE
				strike     	FALSE
				color      	0
				default_color 	TRUE)
			    label      	(object ItemLabel
				Parent_View 	@16
				location   	(2040, 2184)
				fill_color 	13434879
				nlines     	1
				max_width  	462
				justify    	0
				label      	"CloseDiscussionPlugin")
			    stereotype 	(object ItemLabel
				Parent_View 	@16
				location   	(2040, 2134)
				fill_color 	13434879
				anchor     	10
				nlines     	1
				max_width  	462
				justify    	0
				label      	"<<CSpringPlugin>>")
			    icon_style 	"Label"
			    fill_color 	15448575
			    quidu      	"45FA6DAC034B"
			    width      	480
			    height     	184
			    annotation 	8
			    autoResize 	TRUE)
			(object ClassView "Class" "Logical View::MDProcess::ConfluencePlugins::DiscussionsSupport::DiscussionVelocityContextPlugin" @17
			    ShowCompartmentStereotypes 	TRUE
			    IncludeAttribute 	TRUE
			    IncludeOperation 	TRUE
			    ShowOperationSignature 	TRUE
			    location   	(1068, 2244)
			    font       	(object Font
				size       	10
				face       	"Arial"
				charSet    	204
				bold       	FALSE
				italics    	FALSE
				underline  	FALSE
				strike     	FALSE
				color      	0
				default_color 	TRUE)
			    label      	(object ItemLabel
				Parent_View 	@17
				location   	(748, 2185)
				fill_color 	13434879
				nlines     	1
				max_width  	640
				justify    	0
				label      	"DiscussionVelocityContextPlugin")
			    stereotype 	(object ItemLabel
				Parent_View 	@17
				location   	(748, 2135)
				fill_color 	13434879
				anchor     	10
				nlines     	1
				max_width  	640
				justify    	0
				label      	"<<CVelocityContextPlugin>>")
			    icon_style 	"Label"
			    fill_color 	15448575
			    quidu      	"45FA988B008C"
			    width      	658
			    height     	242
			    annotation 	8
			    autoResize 	TRUE)
			(object NoteView @18
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"LinkedItemGuid"
				    value      	"45FA988B008C"))
			    location   	(1155, 2544)
			    font       	(object Font
				size       	8
				face       	"Arial"
				charSet    	204
				bold       	FALSE
				italics    	FALSE
				underline  	FALSE
				strike     	FALSE
				color      	0
				default_color 	TRUE)
			    label      	(object ItemLabel
				Parent_View 	@18
				location   	(933, 2485)
				fill_color 	13434879
				nlines     	2
				max_width  	408
				justify    	1
				label      	"{context-key:=garDiscussion}")
			    line_color 	3342489
			    fill_color 	13434879
			    width      	468
			    height     	131)
			(object NoteView @19
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"LinkedItemGuid"
				    value      	"46013BF50138"))
			    location   	(1047, 1458)
			    font       	(object Font
				size       	8
				face       	"Arial"
				charSet    	204
				bold       	FALSE
				italics    	FALSE
				underline  	FALSE
				strike     	FALSE
				color      	0
				default_color 	TRUE)
			    label      	(object ItemLabel
				Parent_View 	@19
				location   	(909, 1398)
				fill_color 	13434879
				nlines     	3
				max_width  	240
				justify    	1
				label      	"{need UC:=true}")
			    line_color 	3342489
			    fill_color 	13434879
			    width      	300
			    height     	132)
			(object AttachView "" @20
			    font       	(object Font
				size       	10
				face       	"Arial"
				charSet    	204
				bold       	FALSE
				italics    	FALSE
				underline  	FALSE
				strike     	FALSE
				color      	0
				default_color 	TRUE)
			    stereotype 	TRUE
			    line_color 	3342489
			    client     	@6
			    supplier   	@4
			    vertices   	(list Points
				(2946, 855)
				(2868, 1035))
			    line_style 	0)
			(object NoteView @21
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"LinkedItemGuid"
				    value      	"46013C2300EA"))
			    location   	(2343, 1434)
			    font       	(object Font
				size       	8
				face       	"Arial"
				charSet    	204
				bold       	FALSE
				italics    	FALSE
				underline  	FALSE
				strike     	FALSE
				color      	0
				default_color 	TRUE)
			    label      	(object ItemLabel
				Parent_View 	@21
				location   	(2205, 1374)
				fill_color 	13434879
				nlines     	3
				max_width  	240
				justify    	1
				label      	"{need UC:=true}")
			    line_color 	3342489
			    fill_color 	13434879
			    width      	300
			    height     	132)
			(object ClassView "Class" "Logical View::MDProcess::ConfluencePlugins::DiscussionsSupport::ViewedEntityManager" @22
			    ShowCompartmentStereotypes 	TRUE
			    IncludeAttribute 	TRUE
			    IncludeOperation 	TRUE
			    ShowOperationSignature 	TRUE
			    location   	(321, 1233)
			    font       	(object Font
				size       	10
				face       	"Arial"
				charSet    	204
				bold       	FALSE
				italics    	FALSE
				underline  	FALSE
				strike     	FALSE
				color      	0
				default_color 	TRUE)
			    label      	(object ItemLabel
				Parent_View 	@22
				location   	(96, 1203)
				fill_color 	13434879
				nlines     	1
				max_width  	450
				justify    	0
				label      	"ViewedEntityManager")
			    stereotype 	(object ItemLabel
				Parent_View 	@22
				location   	(96, 1153)
				fill_color 	13434879
				anchor     	10
				nlines     	1
				max_width  	447
				justify    	0
				label      	"<<CComponentPlugin>>")
			    icon_style 	"Label"
			    fill_color 	15448575
			    quidu      	"460A56B502EE"
			    width      	468
			    height     	184
			    annotation 	8
			    autoResize 	TRUE)
			(object ClassView "Class" "Logical View::MDProcess::ConfluencePlugins::DiscussionsSupport::RecentlyUpdatedContentMacro" @23
			    ShowCompartmentStereotypes 	TRUE
			    IncludeAttribute 	TRUE
			    IncludeOperation 	TRUE
			    ShowOperationSignature 	TRUE
			    location   	(393, 117)
			    font       	(object Font
				size       	10
				face       	"Arial"
				charSet    	204
				bold       	FALSE
				italics    	FALSE
				underline  	FALSE
				strike     	FALSE
				color      	0
				default_color 	TRUE)
			    label      	(object ItemLabel
				Parent_View 	@23
				location   	(90, 87)
				fill_color 	13434879
				nlines     	1
				max_width  	606
				justify    	0
				label      	"RecentlyUpdatedContentMacro")
			    stereotype 	(object ItemLabel
				Parent_View 	@23
				location   	(90, 37)
				fill_color 	13434879
				anchor     	10
				nlines     	1
				max_width  	606
				justify    	0
				label      	"<<CMacroPlugin>>")
			    icon_style 	"Label"
			    fill_color 	15448575
			    quidu      	"460A5B8C0242"
			    width      	624
			    height     	184
			    annotation 	8
			    autoResize 	TRUE)
			(object NoteView @24
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"LinkedItemGuid"
				    value      	"460A5BE702FD"))
			    location   	(1275, 1002)
			    font       	(object Font
				size       	8
				face       	"Arial"
				charSet    	204
				bold       	FALSE
				italics    	FALSE
				underline  	FALSE
				strike     	FALSE
				color      	0
				default_color 	TRUE)
			    label      	(object ItemLabel
				Parent_View 	@24
				location   	(1137, 942)
				fill_color 	13434879
				nlines     	3
				max_width  	240
				justify    	1
				label      	"{need UC:=true}")
			    line_color 	3342489
			    fill_color 	13434879
			    width      	300
			    height     	132)
			(object ClassView "Class" "Logical View::MDProcess::ConfluencePlugins::DiscussionsSupport::DiscussionsMacroBase" @25
			    ShowCompartmentStereotypes 	TRUE
			    IncludeAttribute 	TRUE
			    IncludeOperation 	TRUE
			    ShowOperationSignature 	TRUE
			    location   	(1317, 261)
			    font       	(object Font
				size       	10
				face       	"Arial"
				charSet    	204
				bold       	FALSE
				italics    	TRUE
				underline  	FALSE
				strike     	FALSE
				color      	0
				default_color 	TRUE)
			    label      	(object ItemLabel
				Parent_View 	@25
				location   	(1086, 231)
				fill_color 	13434879
				nlines     	1
				max_width  	462
				justify    	0
				label      	"DiscussionsMacroBase")
			    stereotype 	(object ItemLabel
				Parent_View 	@25
				location   	(1086, 181)
				fill_color 	13434879
				anchor     	10
				nlines     	1
				max_width  	462
				justify    	0
				label      	"<<CMacroPlugin>>")
			    icon_style 	"Label"
			    fill_color 	15448575
			    quidu      	"460A5C2100AB"
			    width      	480
			    height     	184
			    annotation 	8
			    autoResize 	TRUE)
			(object ClassView "Class" "Logical View::external::JavaConfluence::ConfluenceClassPack::AbstractHtmlGeneratingMacro" @26
			    ShowCompartmentStereotypes 	TRUE
			    SuppressAttribute 	TRUE
			    SuppressOperation 	TRUE
			    IncludeAttribute 	TRUE
			    IncludeOperation 	TRUE
			    location   	(2028, 168)
			    font       	(object Font
				size       	10
				face       	"Arial"
				charSet    	204
				bold       	FALSE
				italics    	FALSE
				underline  	FALSE
				strike     	FALSE
				color      	658120
				default_color 	FALSE)
			    label      	(object ItemLabel
				Parent_View 	@26
				location   	(1734, 140)
				fill_color 	13434879
				nlines     	1
				max_width  	588
				justify    	0
				label      	"AbstractHtmlGeneratingMacro")
			    stereotype 	(object ItemLabel
				Parent_View 	@26
				location   	(1734, 90)
				fill_color 	13434879
				anchor     	10
				nlines     	1
				max_width  	588
				justify    	0
				label      	"<<CMacroPlugin>>")
			    icon_style 	"Label"
			    line_color 	14803425
			    fill_color 	14803425
			    quidu      	"460A5C880148"
			    width      	606
			    height     	180
			    annotation 	8
			    autoResize 	TRUE)
			(object InheritView "" @27
			    font       	(object Font
				size       	10
				face       	"Arial"
				charSet    	204
				bold       	FALSE
				italics    	FALSE
				underline  	FALSE
				strike     	FALSE
				color      	0
				default_color 	TRUE)
			    stereotype 	TRUE
			    line_color 	3947680
			    quidu      	"460A5CE70251"
			    client     	@25
			    supplier   	@26
			    vertices   	(list Points
				(1557, 228)
				(1724, 206))
			    line_style 	0)
			(object ClassView "Class" "Logical View::MDProcess::ConfluencePlugins::DiscussionsSupport::RecentlyUpdateListener" @28
			    ShowCompartmentStereotypes 	TRUE
			    IncludeAttribute 	TRUE
			    IncludeOperation 	TRUE
			    ShowOperationSignature 	TRUE
			    location   	(1737, 2214)
			    font       	(object Font
				size       	10
				face       	"Arial"
				charSet    	204
				bold       	FALSE
				italics    	FALSE
				underline  	FALSE
				strike     	FALSE
				color      	0
				default_color 	TRUE)
			    label      	(object ItemLabel
				Parent_View 	@28
				location   	(1505, 2184)
				fill_color 	13434879
				nlines     	1
				max_width  	464
				justify    	0
				label      	"RecentlyUpdateListener")
			    stereotype 	(object ItemLabel
				Parent_View 	@28
				location   	(1505, 2134)
				fill_color 	13434879
				anchor     	10
				nlines     	1
				max_width  	464
				justify    	0
				label      	"<<CListenerPlugin>>")
			    icon_style 	"Label"
			    fill_color 	15448575
			    quidu      	"460BACED004E"
			    width      	482
			    height     	184
			    annotation 	8
			    autoResize 	TRUE)
			(object InheritView "" @29
			    font       	(object Font
				size       	10
				face       	"Arial"
				charSet    	204
				bold       	FALSE
				italics    	FALSE
				underline  	FALSE
				strike     	FALSE
				color      	0
				default_color 	TRUE)
			    stereotype 	TRUE
			    line_color 	3947680
			    quidu      	"460BB55B0138"
			    client     	@3
			    supplier   	@25
			    vertices   	(list Points
				(563, 301)
				(1076, 273))
			    line_style 	0)
			(object InheritView "" @30
			    font       	(object Font
				size       	10
				face       	"Arial"
				charSet    	204
				bold       	FALSE
				italics    	FALSE
				underline  	FALSE
				strike     	FALSE
				color      	0
				default_color 	TRUE)
			    stereotype 	TRUE
			    line_color 	3947680
			    quidu      	"461119BB0138"
			    client     	@23
			    supplier   	@26
			    vertices   	(list Points
				(705, 126)
				(1724, 158))
			    line_style 	0)
			(object ClassView "Class" "Logical View::MDProcess::ConfluencePlugins::DiscussionsSupport::DiscussionsMacro" @31
			    ShowCompartmentStereotypes 	TRUE
			    IncludeAttribute 	TRUE
			    IncludeOperation 	TRUE
			    ShowOperationSignature 	TRUE
			    location   	(906, 1704)
			    font       	(object Font
				size       	10
				face       	"Arial"
				charSet    	204
				bold       	FALSE
				italics    	FALSE
				underline  	FALSE
				strike     	FALSE
				color      	0
				default_color 	TRUE)
			    label      	(object ItemLabel
				Parent_View 	@31
				location   	(718, 1675)
				fill_color 	13434879
				nlines     	1
				max_width  	376
				justify    	0
				label      	"DiscussionsMacro")
			    stereotype 	(object ItemLabel
				Parent_View 	@31
				location   	(718, 1625)
				fill_color 	13434879
				anchor     	10
				nlines     	1
				max_width  	376
				justify    	0
				label      	"<<VM>>")
			    icon_style 	"Label"
			    fill_color 	15448575
			    quidu      	"46120DA70290"
			    width      	394
			    height     	182
			    annotation 	8
			    autoResize 	TRUE)
			(object AttachView "" @32
			    font       	(object Font
				size       	10
				face       	"Arial"
				charSet    	204
				bold       	FALSE
				italics    	FALSE
				underline  	FALSE
				strike     	FALSE
				color      	0
				default_color 	TRUE)
			    stereotype 	TRUE
			    line_color 	3342489
			    client     	@18
			    supplier   	@17
			    vertices   	(list Points
				(1135, 2478)
				(1102, 2365))
			    line_style 	0)
			(object ClassView "Class" "Logical View::MDProcess::ConfluencePlugins::DiscussionsSupport::UserDate" @33
			    ShowCompartmentStereotypes 	TRUE
			    IncludeAttribute 	TRUE
			    IncludeOperation 	TRUE
			    ShowOperationSignature 	TRUE
			    location   	(1032, 1230)
			    font       	(object Font
				size       	10
				face       	"Arial"
				charSet    	204
				bold       	FALSE
				italics    	FALSE
				underline  	FALSE
				strike     	FALSE
				color      	0
				default_color 	TRUE)
			    label      	(object ItemLabel
				Parent_View 	@33
				location   	(866, 1200)
				fill_color 	13434879
				nlines     	1
				max_width  	332
				justify    	0
				label      	"UserDate")
			    stereotype 	(object ItemLabel
				Parent_View 	@33
				location   	(866, 1150)
				fill_color 	13434879
				anchor     	10
				nlines     	1
				max_width  	332
				justify    	0
				label      	"<<SimpleClass>>")
			    icon_style 	"Label"
			    fill_color 	12842465
			    quidu      	"46013BF50138"
			    width      	350
			    height     	184
			    annotation 	8
			    autoResize 	TRUE)
			(object AttachView "" @34
			    font       	(object Font
				size       	10
				face       	"Arial"
				charSet    	204
				bold       	FALSE
				italics    	FALSE
				underline  	FALSE
				strike     	FALSE
				color      	0
				default_color 	TRUE)
			    stereotype 	TRUE
			    line_color 	3342489
			    client     	@19
			    supplier   	@33
			    vertices   	(list Points
				(1042, 1391)
				(1037, 1322))
			    line_style 	0)
			(object ClassView "Class" "Logical View::MDProcess::ConfluencePlugins::DiscussionsSupport::Discussion2::UsersNestedMap" @35
			    ShowCompartmentStereotypes 	TRUE
			    SuppressAttribute 	TRUE
			    SuppressOperation 	TRUE
			    IncludeAttribute 	TRUE
			    IncludeOperation 	TRUE
			    ShowOperationSignature 	TRUE
			    location   	(1761, 1233)
			    font       	(object Font
				size       	10
				face       	"Arial"
				charSet    	204
				bold       	FALSE
				italics    	FALSE
				underline  	FALSE
				strike     	FALSE
				color      	0
				default_color 	TRUE)
			    label      	(object ItemLabel
				Parent_View 	@35
				location   	(1591, 1205)
				fill_color 	13434879
				nlines     	1
				max_width  	340
				justify    	0
				label      	"UsersNestedMap")
			    stereotype 	(object ItemLabel
				Parent_View 	@35
				location   	(1591, 1155)
				fill_color 	13434879
				anchor     	10
				nlines     	1
				max_width  	340
				justify    	0
				label      	"<<HashMap>>")
			    icon_style 	"Label"
			    fill_color 	16107765
			    quidu      	"46139E3403A9"
			    width      	358
			    height     	180
			    annotation 	8
			    autoResize 	TRUE)
			(object AssociationViewNew "$UNNAMED$0" @36
			    location   	(1394, 1231)
			    font       	(object Font
				size       	10
				face       	"Arial"
				charSet    	204
				bold       	FALSE
				italics    	FALSE
				underline  	FALSE
				strike     	FALSE
				color      	0
				default_color 	TRUE)
			    stereotype 	TRUE
			    line_color 	3947680
			    quidu      	"4613A0B900DA"
			    roleview_list 	(list RoleViews
				(object RoleView "$UNNAMED$1" @37
				    Parent_View 	@36
				    location   	(254, -239)
				    font       	(object Font
					size       	10
					face       	"Arial"
					charSet    	204
					bold       	FALSE
					italics    	FALSE
					underline  	FALSE
					strike     	FALSE
					color      	0
					default_color 	TRUE)
				    label      	(object SegLabel @38
					Parent_View 	@37
					location   	(1372, 1264)
					font       	(object Font
					    size       	10
					    face       	"Arial"
					    charSet    	204
					    bold       	FALSE
					    italics    	FALSE
					    underline  	FALSE
					    strike     	FALSE
					    color      	0
					    default_color 	TRUE)
					hidden     	TRUE
					anchor     	1
					anchor_loc 	1
					nlines     	1
					max_width  	311
					justify    	0
					label      	""
					pctDist    	0.119497
					height     	33
					orientation 	0)
				    stereotype 	TRUE
				    line_color 	3342489
				    quidu      	"4613A0B9030D"
				    client     	@36
				    supplier   	@33
				    vertices   	(list Points
					(1394, 1231)
					(1207, 1230))
				    line_style 	0)
				(object RoleView "$UNNAMED$2" @39
				    Parent_View 	@36
				    location   	(254, -239)
				    font       	(object Font
					size       	10
					face       	"Arial"
					charSet    	204
					bold       	FALSE
					italics    	FALSE
					underline  	FALSE
					strike     	FALSE
					color      	0
					default_color 	TRUE)
				    stereotype 	TRUE
				    line_color 	3342489
				    quidu      	"4613A0B9030F"
				    client     	@36
				    supplier   	@35
				    vertices   	(list Points
					(1394, 1231)
					(1581, 1232))
				    line_style 	0
				    label      	(object SegLabel @40
					Parent_View 	@39
					location   	(1461, 1233)
					font       	(object Font
					    size       	10
					    face       	"Arial"
					    charSet    	204
					    bold       	FALSE
					    italics    	FALSE
					    underline  	FALSE
					    strike     	FALSE
					    color      	0
					    default_color 	TRUE)
					anchor     	5
					anchor_loc 	1
					nlines     	1
					max_width  	201
					justify    	0
					label      	"key : string"
					pctDist    	0.900000
					height     	12
					orientation 	1))))
			(object ClassView "Class" "Logical View::MDProcess::ConfluencePlugins::DiscussionsSupport::Discussion2" @41
			    ShowCompartmentStereotypes 	TRUE
			    IncludeAttribute 	TRUE
			    IncludeOperation 	TRUE
			    ShowOperationSignature 	TRUE
			    location   	(2355, 1215)
			    font       	(object Font
				size       	10
				face       	"Arial"
				charSet    	204
				bold       	FALSE
				italics    	FALSE
				underline  	FALSE
				strike     	FALSE
				color      	0
				default_color 	TRUE)
			    label      	(object ItemLabel
				Parent_View 	@41
				location   	(2189, 1185)
				fill_color 	13434879
				nlines     	1
				max_width  	332
				justify    	0
				label      	"Discussion2")
			    stereotype 	(object ItemLabel
				Parent_View 	@41
				location   	(2189, 1135)
				fill_color 	13434879
				anchor     	10
				nlines     	1
				max_width  	332
				justify    	0
				label      	"<<SimpleClass>>")
			    icon_style 	"Label"
			    fill_color 	12842465
			    quidu      	"46013C2300EA"
			    width      	350
			    height     	184
			    annotation 	8
			    autoResize 	TRUE)
			(object AttachView "" @42
			    font       	(object Font
				size       	10
				face       	"Arial"
				charSet    	204
				bold       	FALSE
				italics    	FALSE
				underline  	FALSE
				strike     	FALSE
				color      	0
				default_color 	TRUE)
			    stereotype 	TRUE
			    line_color 	3342489
			    client     	@21
			    supplier   	@41
			    vertices   	(list Points
				(2343, 1434)
				(2355, 1215))
			    line_style 	0)
			(object AssociationViewNew "$UNNAMED$8" @43
			    location   	(2059, 1223)
			    font       	(object Font
				size       	10
				face       	"Arial"
				charSet    	204
				bold       	FALSE
				italics    	FALSE
				underline  	FALSE
				strike     	FALSE
				color      	0
				default_color 	TRUE)
			    stereotype 	TRUE
			    line_color 	3947680
			    quidu      	"4613A4A20222"
			    roleview_list 	(list RoleViews
				(object RoleView "users" @44
				    Parent_View 	@43
				    location   	(469, -178)
				    font       	(object Font
					size       	10
					face       	"Arial"
					charSet    	204
					bold       	FALSE
					italics    	FALSE
					underline  	FALSE
					strike     	FALSE
					color      	0
					default_color 	TRUE)
				    label      	(object SegLabel @45
					Parent_View 	@44
					location   	(2044, 1200)
					font       	(object Font
					    size       	10
					    face       	"Arial"
					    charSet    	204
					    bold       	FALSE
					    italics    	FALSE
					    underline  	FALSE
					    strike     	FALSE
					    color      	0
					    default_color 	TRUE)
					anchor     	1
					anchor_loc 	1
					nlines     	1
					max_width  	138
					justify    	0
					label      	"-users"
					pctDist    	0.119419
					height     	23
					orientation 	1)
				    stereotype 	TRUE
				    line_color 	3342489
				    quidu      	"4613A4A403A9"
				    client     	@43
				    supplier   	@35
				    vertices   	(list Points
					(2059, 1223)
					(1940, 1226))
				    line_style 	0)
				(object RoleView "$UNNAMED$9" @46
				    Parent_View 	@43
				    location   	(469, -178)
				    stereotype 	TRUE
				    line_color 	3342489
				    quidu      	"4613A4A403AB"
				    client     	@43
				    supplier   	@41
				    vertices   	(list Points
					(2059, 1223)
					(2179, 1219))
				    line_style 	0)))
			(object ClassView "Class" "Logical View::MDProcess::ConfluencePlugins::DiscussionsSupport::DiscussionList::vec" @47
			    ShowCompartmentStereotypes 	TRUE
			    SuppressAttribute 	TRUE
			    SuppressOperation 	TRUE
			    IncludeAttribute 	TRUE
			    IncludeOperation 	TRUE
			    ShowOperationSignature 	TRUE
			    location   	(2370, 840)
			    font       	(object Font
				size       	10
				face       	"Arial"
				charSet    	204
				bold       	FALSE
				italics    	FALSE
				underline  	FALSE
				strike     	FALSE
				color      	0
				default_color 	TRUE)
			    label      	(object ItemLabel
				Parent_View 	@47
				location   	(2222, 812)
				fill_color 	13434879
				nlines     	1
				max_width  	296
				justify    	0
				label      	"vec")
			    stereotype 	(object ItemLabel
				Parent_View 	@47
				location   	(2222, 762)
				fill_color 	13434879
				anchor     	10
				nlines     	1
				max_width  	296
				justify    	0
				label      	"<<Vector>>")
			    icon_style 	"Label"
			    fill_color 	16107765
			    quidu      	"4613A1BB01D4"
			    width      	314
			    height     	180
			    annotation 	8
			    autoResize 	TRUE)
			(object AssociationViewNew "$UNNAMED$3" @48
			    location   	(2361, 1026)
			    font       	(object Font
				size       	10
				face       	"Arial"
				charSet    	204
				bold       	FALSE
				italics    	FALSE
				underline  	FALSE
				strike     	FALSE
				color      	0
				default_color 	TRUE)
			    stereotype 	TRUE
			    line_color 	3947680
			    quidu      	"4613A2020119"
			    roleview_list 	(list RoleViews
				(object RoleView "$UNNAMED$4" @49
				    Parent_View 	@48
				    location   	(1206, -306)
				    stereotype 	TRUE
				    line_color 	3342489
				    quidu      	"4613A2030138"
				    client     	@48
				    supplier   	@41
				    vertices   	(list Points
					(2361, 1026)
					(2357, 1122))
				    line_style 	0)
				(object RoleView "$UNNAMED$5" @50
				    Parent_View 	@48
				    location   	(1206, -306)
				    stereotype 	TRUE
				    line_color 	3342489
				    quidu      	"4613A203013A"
				    client     	@48
				    supplier   	@47
				    vertices   	(list Points
					(2361, 1026)
					(2365, 930))
				    line_style 	0)))
			(object ClassView "Class" "Logical View::MDProcess::ConfluencePlugins::DiscussionsSupport::DiscussionList" @51
			    ShowCompartmentStereotypes 	TRUE
			    IncludeAttribute 	TRUE
			    IncludeOperation 	TRUE
			    ShowOperationSignature 	TRUE
			    location   	(1827, 852)
			    font       	(object Font
				size       	10
				face       	"Arial"
				charSet    	204
				bold       	FALSE
				italics    	FALSE
				underline  	FALSE
				strike     	FALSE
				color      	0
				default_color 	TRUE)
			    label      	(object ItemLabel
				Parent_View 	@51
				location   	(1662, 823)
				fill_color 	13434879
				nlines     	1
				max_width  	330
				justify    	0
				label      	"DiscussionList")
			    stereotype 	(object ItemLabel
				Parent_View 	@51
				location   	(1662, 773)
				fill_color 	13434879
				anchor     	10
				nlines     	1
				max_width  	328
				justify    	0
				label      	"<<SimpleClass>>")
			    icon_style 	"Label"
			    fill_color 	12842465
			    quidu      	"45B72F5001D4"
			    width      	348
			    height     	182
			    annotation 	8
			    autoResize 	TRUE)
			(object AttachView "" @52
			    font       	(object Font
				size       	10
				face       	"Arial"
				charSet    	204
				bold       	FALSE
				italics    	FALSE
				underline  	FALSE
				strike     	FALSE
				color      	0
				default_color 	TRUE)
			    stereotype 	TRUE
			    line_color 	3342489
			    client     	@5
			    supplier   	@51
			    vertices   	(list Points
				(1923, 645)
				(1827, 852))
			    line_style 	0)
			(object AssociationViewNew "$UNNAMED$6" @53
			    location   	(2106, 845)
			    font       	(object Font
				size       	10
				face       	"Arial"
				charSet    	204
				bold       	FALSE
				italics    	FALSE
				underline  	FALSE
				strike     	FALSE
				color      	0
				default_color 	TRUE)
			    stereotype 	TRUE
			    line_color 	3947680
			    quidu      	"4613A3610232"
			    roleview_list 	(list RoleViews
				(object RoleView "list" @54
				    Parent_View 	@53
				    location   	(579, -346)
				    font       	(object Font
					size       	10
					face       	"Arial"
					charSet    	204
					bold       	FALSE
					italics    	FALSE
					underline  	FALSE
					strike     	FALSE
					color      	0
					default_color 	TRUE)
				    label      	(object SegLabel @55
					Parent_View 	@54
					location   	(2137, 885)
					font       	(object Font
					    size       	10
					    face       	"Arial"
					    charSet    	204
					    bold       	FALSE
					    italics    	FALSE
					    underline  	FALSE
					    strike     	FALSE
					    color      	0
					    default_color 	TRUE)
					anchor     	1
					anchor_loc 	1
					nlines     	1
					max_width  	76
					justify    	0
					label      	"-list"
					pctDist    	0.285231
					height     	41
					orientation 	1)
				    stereotype 	TRUE
				    line_color 	3342489
				    quidu      	"4613A3620109"
				    client     	@53
				    supplier   	@47
				    vertices   	(list Points
					(2106, 845)
					(2212, 842))
				    line_style 	0)
				(object RoleView "$UNNAMED$7" @56
				    Parent_View 	@53
				    location   	(579, -346)
				    stereotype 	TRUE
				    line_color 	3342489
				    quidu      	"4613A3620119"
				    client     	@53
				    supplier   	@51
				    vertices   	(list Points
					(2106, 845)
					(2001, 847))
				    line_style 	0)))
			(object ClassView "Class" "Logical View::MDProcess::ConfluencePlugins::DiscussionsSupport::DiscussionManagerBase" @57
			    ShowCompartmentStereotypes 	TRUE
			    IncludeAttribute 	TRUE
			    IncludeOperation 	TRUE
			    ShowOperationSignature 	TRUE
			    location   	(1188, 831)
			    font       	(object Font
				size       	10
				face       	"Arial"
				charSet    	204
				bold       	FALSE
				italics    	TRUE
				underline  	FALSE
				strike     	FALSE
				color      	0
				default_color 	TRUE)
			    label      	(object ItemLabel
				Parent_View 	@57
				location   	(947, 801)
				fill_color 	13434879
				nlines     	1
				max_width  	482
				justify    	0
				label      	"DiscussionManagerBase")
			    stereotype 	(object ItemLabel
				Parent_View 	@57
				location   	(947, 751)
				fill_color 	13434879
				anchor     	10
				nlines     	1
				max_width  	482
				justify    	0
				label      	"<<SimpleClass>>")
			    icon_style 	"Label"
			    fill_color 	12842465
			    quidu      	"460A5BE702FD"
			    width      	500
			    height     	184
			    annotation 	8
			    autoResize 	TRUE)
			(object AttachView "" @58
			    font       	(object Font
				size       	10
				face       	"Arial"
				charSet    	204
				bold       	FALSE
				italics    	FALSE
				underline  	FALSE
				strike     	FALSE
				color      	0
				default_color 	TRUE)
			    stereotype 	TRUE
			    line_color 	3342489
			    client     	@24
			    supplier   	@57
			    vertices   	(list Points
				(1275, 1002)
				(1188, 831))
			    line_style 	0)
			(object InheritView "" @59
			    font       	(object Font
				size       	10
				face       	"Arial"
				charSet    	204
				bold       	FALSE
				italics    	FALSE
				underline  	FALSE
				strike     	FALSE
				color      	0
				default_color 	TRUE)
			    stereotype 	TRUE
			    line_color 	3947680
			    quidu      	"460A5C5E009C"
			    client     	@2
			    supplier   	@57
			    vertices   	(list Points
				(577, 940)
				(937, 875))
			    line_style 	0)
			(object AssociationViewNew "$UNNAMED$10" @60
			    location   	(1545, 841)
			    font       	(object Font
				size       	10
				face       	"Arial"
				charSet    	204
				bold       	FALSE
				italics    	FALSE
				underline  	FALSE
				strike     	FALSE
				color      	0
				default_color 	TRUE)
			    stereotype 	TRUE
			    line_color 	3947680
			    quidu      	"4613A6CB01A5"
			    roleview_list 	(list RoleViews
				(object RoleView "list" @61
				    Parent_View 	@60
				    location   	(-12, 91)
				    font       	(object Font
					size       	10
					face       	"Arial"
					charSet    	204
					bold       	FALSE
					italics    	FALSE
					underline  	FALSE
					strike     	FALSE
					color      	0
					default_color 	TRUE)
				    label      	(object SegLabel @62
					Parent_View 	@61
					location   	(1560, 871)
					font       	(object Font
					    size       	10
					    face       	"Arial"
					    charSet    	204
					    bold       	FALSE
					    italics    	FALSE
					    underline  	FALSE
					    strike     	FALSE
					    color      	0
					    default_color 	TRUE)
					anchor     	1
					anchor_loc 	1
					nlines     	1
					max_width  	84
					justify    	0
					label      	"#list"
					pctDist    	0.152636
					height     	29
					orientation 	1)
				    stereotype 	TRUE
				    line_color 	3342489
				    quidu      	"4613A6CC0138"
				    client     	@60
				    supplier   	@51
				    vertices   	(list Points
					(1545, 841)
					(1652, 844))
				    line_style 	0)
				(object RoleView "$UNNAMED$11" @63
				    Parent_View 	@60
				    location   	(-12, 91)
				    stereotype 	TRUE
				    line_color 	3342489
				    quidu      	"4613A6CC0148"
				    client     	@60
				    supplier   	@57
				    vertices   	(list Points
					(1545, 841)
					(1438, 837))
				    line_style 	0)))
			(object UsesView "" @64
			    font       	(object Font
				size       	10
				face       	"Arial"
				charSet    	204
				bold       	FALSE
				italics    	FALSE
				underline  	FALSE
				strike     	FALSE
				color      	0
				default_color 	TRUE)
			    stereotype 	(object SegLabel @65
				Parent_View 	@64
				location   	(2570, 1066)
				font       	(object Font
				    size       	10
				    face       	"Arial"
				    charSet    	204
				    bold       	FALSE
				    italics    	FALSE
				    underline  	FALSE
				    strike     	FALSE
				    color      	0
				    default_color 	TRUE)
				anchor     	10
				anchor_loc 	1
				nlines     	1
				max_width  	450
				justify    	0
				label      	"<<uses>>"
				pctDist    	0.383057
				height     	68
				orientation 	0)
			    line_color 	3947680
			    quidu      	"4613A7C90251"
			    client     	@41
			    supplier   	@4
			    vertices   	(list Points
				(2530, 1152)
				(2693, 1095))
			    line_style 	0)
			(object ClassView "Class" "Logical View::MDProcess::ConfluencePlugins::DiscussionsSupport::ClosedDiscussionMacro" @66
			    ShowCompartmentStereotypes 	TRUE
			    IncludeAttribute 	TRUE
			    IncludeOperation 	TRUE
			    ShowOperationSignature 	TRUE
			    location   	(327, 543)
			    font       	(object Font
				size       	10
				face       	"Arial"
				charSet    	204
				bold       	FALSE
				italics    	FALSE
				underline  	FALSE
				strike     	FALSE
				color      	0
				default_color 	TRUE)
			    label      	(object ItemLabel
				Parent_View 	@66
				location   	(86, 513)
				fill_color 	13434879
				nlines     	1
				max_width  	482
				justify    	0
				label      	"ClosedDiscussionMacro")
			    stereotype 	(object ItemLabel
				Parent_View 	@66
				location   	(86, 463)
				fill_color 	13434879
				anchor     	10
				nlines     	1
				max_width  	482
				justify    	0
				label      	"<<CMacroPlugin>>")
			    icon_style 	"Label"
			    fill_color 	15448575
			    quidu      	"45E43B700203"
			    width      	500
			    height     	184
			    annotation 	8
			    autoResize 	TRUE)
			(object InheritView "" @67
			    font       	(object Font
				size       	10
				face       	"Arial"
				charSet    	204
				bold       	FALSE
				italics    	FALSE
				underline  	FALSE
				strike     	FALSE
				color      	0
				default_color 	TRUE)
			    stereotype 	TRUE
			    line_color 	3947680
			    quidu      	"461110FA00DA"
			    client     	@66
			    supplier   	@25
			    vertices   	(list Points
				(577, 470)
				(1076, 328))
			    line_style 	0)
			(object ClassView "Class" "Logical View::MDProcess::ConfluencePlugins::DiscussionsSupport::SQLExecutor" @68
			    ShowCompartmentStereotypes 	TRUE
			    IncludeAttribute 	TRUE
			    IncludeOperation 	TRUE
			    ShowOperationSignature 	TRUE
			    location   	(1455, 483)
			    font       	(object Font
				size       	10
				face       	"Arial"
				charSet    	204
				bold       	FALSE
				italics    	FALSE
				underline  	FALSE
				strike     	FALSE
				color      	0
				default_color 	TRUE)
			    label      	(object ItemLabel
				Parent_View 	@68
				location   	(1289, 453)
				fill_color 	13434879
				nlines     	1
				max_width  	332
				justify    	0
				label      	"SQLExecutor")
			    stereotype 	(object ItemLabel
				Parent_View 	@68
				location   	(1289, 403)
				fill_color 	13434879
				anchor     	10
				nlines     	1
				max_width  	332
				justify    	0
				label      	"<<SimpleClass>>")
			    icon_style 	"Label"
			    fill_color 	12842465
			    quidu      	"45E54AAA0261"
			    width      	350
			    height     	184
			    annotation 	8
			    autoResize 	TRUE)
			(object AttachView "" @69
			    font       	(object Font
				size       	10
				face       	"Arial"
				charSet    	204
				bold       	FALSE
				italics    	FALSE
				underline  	FALSE
				strike     	FALSE
				color      	0
				default_color 	TRUE)
			    stereotype 	TRUE
			    line_color 	3342489
			    client     	@14
			    supplier   	@68
			    vertices   	(list Points
				(1769, 472)
				(1630, 476))
			    line_style 	0)
			(object ClassView "Class" "Logical View::MDProcess::ConfluencePlugins::DiscussionsSupport::ClosedDiscussionManager" @70
			    ShowCompartmentStereotypes 	TRUE
			    IncludeAttribute 	TRUE
			    IncludeOperation 	TRUE
			    ShowOperationSignature 	TRUE
			    location   	(339, 762)
			    font       	(object Font
				size       	10
				face       	"Arial"
				charSet    	204
				bold       	FALSE
				italics    	FALSE
				underline  	FALSE
				strike     	FALSE
				color      	0
				default_color 	TRUE)
			    label      	(object ItemLabel
				Parent_View 	@70
				location   	(83, 732)
				fill_color 	13434879
				nlines     	1
				max_width  	512
				justify    	0
				label      	"ClosedDiscussionManager")
			    stereotype 	(object ItemLabel
				Parent_View 	@70
				location   	(83, 682)
				fill_color 	13434879
				anchor     	10
				nlines     	1
				max_width  	512
				justify    	0
				label      	"<<CComponentPlugin>>")
			    icon_style 	"Label"
			    fill_color 	15448575
			    quidu      	"45E447FE0203"
			    width      	530
			    height     	184
			    annotation 	8
			    autoResize 	TRUE)
			(object InheritView "" @71
			    font       	(object Font
				size       	10
				face       	"Arial"
				charSet    	204
				bold       	FALSE
				italics    	FALSE
				underline  	FALSE
				strike     	FALSE
				color      	0
				default_color 	TRUE)
			    stereotype 	TRUE
			    line_color 	3947680
			    quidu      	"460A5C6201E4"
			    client     	@70
			    supplier   	@57
			    vertices   	(list Points
				(604, 783)
				(937, 809))
			    line_style 	0)
			(object AssociationViewNew "$UNNAMED$12" @72
			    location   	(941, 610)
			    font       	(object Font
				size       	10
				face       	"Arial"
				charSet    	204
				bold       	FALSE
				italics    	FALSE
				underline  	FALSE
				strike     	FALSE
				color      	0
				default_color 	TRUE)
			    stereotype 	TRUE
			    line_color 	3947680
			    quidu      	"4615106E004E"
			    roleview_list 	(list RoleViews
				(object RoleView "sql" @73
				    Parent_View 	@72
				    location   	(587, -395)
				    font       	(object Font
					size       	10
					face       	"Arial"
					charSet    	204
					bold       	FALSE
					italics    	FALSE
					underline  	FALSE
					strike     	FALSE
					color      	0
					default_color 	TRUE)
				    label      	(object SegLabel @74
					Parent_View 	@73
					location   	(1202, 502)
					font       	(object Font
					    size       	10
					    face       	"Arial"
					    charSet    	204
					    bold       	FALSE
					    italics    	FALSE
					    underline  	FALSE
					    strike     	FALSE
					    color      	0
					    default_color 	TRUE)
					anchor     	1
					anchor_loc 	1
					nlines     	1
					max_width  	82
					justify    	0
					label      	"-sql"
					pctDist    	0.800000
					height     	42
					orientation 	0)
				    stereotype 	TRUE
				    line_color 	3342489
				    quidu      	"4615107000FA"
				    client     	@72
				    supplier   	@68
				    vertices   	(list Points
					(941, 610)
					(1279, 525))
				    line_style 	0)
				(object RoleView "$UNNAMED$13" @75
				    Parent_View 	@72
				    location   	(587, -395)
				    stereotype 	TRUE
				    line_color 	3342489
				    quidu      	"4615107000FC"
				    client     	@72
				    supplier   	@70
				    vertices   	(list Points
					(941, 610)
					(604, 694))
				    line_style 	0)))
			(object ClassView "Class" "Logical View::MDProcess::ConfluencePlugins::DiscussionsSupport::SaveDiscussionsLifeCycle" @76
			    ShowCompartmentStereotypes 	TRUE
			    IncludeAttribute 	TRUE
			    IncludeOperation 	TRUE
			    ShowOperationSignature 	TRUE
			    location   	(1641, 1722)
			    font       	(object Font
				size       	10
				face       	"Arial"
				charSet    	204
				bold       	FALSE
				italics    	FALSE
				underline  	FALSE
				strike     	FALSE
				color      	0
				default_color 	TRUE)
			    label      	(object ItemLabel
				Parent_View 	@76
				location   	(1388, 1689)
				fill_color 	13434879
				nlines     	1
				max_width  	506
				justify    	0
				label      	"SaveDiscussionsLifeCycle")
			    stereotype 	(object ItemLabel
				Parent_View 	@76
				location   	(1388, 1639)
				fill_color 	13434879
				anchor     	10
				nlines     	1
				max_width  	506
				justify    	0
				label      	"<<CLifecyclePlugin>>")
			    icon_style 	"Label"
			    fill_color 	15448575
			    quidu      	"461656880222"
			    width      	524
			    height     	190
			    annotation 	8
			    autoResize 	TRUE)
			(object NoteView @77
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"LinkedItemGuid"
				    value      	"461656880222"))
			    location   	(2124, 1722)
			    font       	(object Font
				size       	8
				face       	"Arial"
				charSet    	204
				bold       	FALSE
				italics    	FALSE
				underline  	FALSE
				strike     	FALSE
				color      	0
				default_color 	TRUE)
			    label      	(object ItemLabel
				Parent_View 	@77
				location   	(1986, 1662)
				fill_color 	13434879
				nlines     	2
				max_width  	240
				justify    	1
				label      	"{sequence:=1201}")
			    line_color 	3342489
			    fill_color 	13434879
			    width      	300
			    height     	132)
			(object AttachView "" @78
			    font       	(object Font
				size       	10
				face       	"Arial"
				charSet    	204
				bold       	FALSE
				italics    	FALSE
				underline  	FALSE
				strike     	FALSE
				color      	0
				default_color 	TRUE)
			    stereotype 	TRUE
			    line_color 	3342489
			    client     	@77
			    supplier   	@76
			    vertices   	(list Points
				(1973, 1722)
				(1903, 1722))
			    line_style 	0)))))
	(object Class_Category "IconsSelectorSupport"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"name"
		    value      	"Garant Icons Support")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"prefix"
		    value      	"ru.garant")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"vendor name"
		    value      	"ООО НПП 'Гарант-Сервис'")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"vendor url"
		    value      	"www.garant.ru")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AutoCounter"
		    value      	"4")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (output.classpath)"
		    value      	"")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (output.project)"
		    value      	"")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (output.xml)"
		    value      	"")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"NESTED GENERATED FILES (java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/ConfluencePlugins/IconsSelectorSupport/IconSelectorInVelocity.java::45C1FE21009C"))
	    quid       	"45C1FCFF038A"
	    documentation 	"Библиотека плагина поддержки отрисовки специальных иконок в зависимости от типа документа."
	    stereotype 	"CPluginsPackage"
	    visible_categories 	(list visibility_relationship_list
		(object Visibility_Relationship
		    quid       	"45FE965A016B"
		    supplier   	"Logical View::MDProcess::Описание MDKnow::Работа с контентом"
		    quidu      	"460912ED03D5"))
	    exportControl 	"Public"
	    logical_models 	(list unit_reference_list
		(object Class "IconSelectorInVelocity"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"SELF GENERATED FILE (java)"
			    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/ConfluencePlugins/IconsSelectorSupport/IconSelectorInVelocity.java")
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"need UC"
			    value      	"true")
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"context-key"
			    value      	"garIcon")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*45C1FE21009C_CUSTOM_IMPORT*"
			    value      	"//#UC START# *45C1FE21009C_CUSTOM_IMPORT*¤import com.atlassian.confluence.search.actions.SearchResultWithExcerpt;¤import com.atlassian.confluence.pages.AbstractPage;¤import com.atlassian.confluence.labels.Label;¤¤import java.util.List;¤//#UC END# *45C1FE21009C_CUSTOM_IMPORT*")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*45C1FE21009C_CUSTOM_CLASS_DEFINITION*"
			    value      	"//#UC START# *45C1FE21009C_CUSTOM_CLASS_DEFINITION*¤//#UC END# *45C1FE21009C_CUSTOM_CLASS_DEFINITION*")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*45C1FE21009C_CUSTOM_METHODS_AND_DATA*"
			    value      	(value Text 
|//#UC START# *45C1FE21009C_CUSTOM_METHODS_AND_DATA*¤	public String getIconByLabel (String label) {¤		if (label.compareTo ("feature") == 0) {¤			return new String ("/images/icons/garicons/Feature.png");¤		} else if (label.compareTo ("important") == 0) {¤			return new String ("/images/icons/garicons/Important.png");¤		} else if (label.compareTo ("report") == 0) {¤			return new String ("/images/icons/garicons/Report.png");¤		} else if (label.compareTo ("requirements") == 0) {¤			return new String ("/images/icons/garicons/Requirements.png");¤		} else if (label.compareTo ("software_update") == 0) {¤			return new String ("/images/icons/garicons/SU.png");¤		} else if (label.compareTo ("usecase") == 0) {¤			return new String ("/images/icons/garicons/UseCase.png");¤		} else if (label.compareTo ("userneeds") == 0) {¤			return new String ("/images/icons/garicons/UserNeed.png");¤		} else if (label.compareTo ("folder") == 0) {¤			return new String ("/images/icons/garicons/Folder.png");¤		} else {¤			return null;¤		}¤	}¤¤	public String getDefaultIcon (String pageType) {¤		if ((pageType != null) && (pageType.compareTo ("blogpost") == 0)) {¤			return new String ("/images/icons/garicons/default_news.png");¤		} else {¤			return new String ("/images/icons/garicons/default_page.png");¤		}¤	}¤¤	public String getGarIcon (java.lang.Object obj) {¤		if (obj instanceof SearchResultWithExcerpt) {¤			SearchResultWithExcerpt res = (SearchResultWithExcerpt)obj;¤			return getForSearchResult (res);¤		} else if (obj instanceof AbstractPage) {¤			return getForPage ((AbstractPage)obj);¤		} else {¤			System.out.println ("IconSelectorInVelocity::getLabelList: obj class name is " + obj.getClass ().getName ());¤			return getDefaultIcon (null);¤		}¤	}¤¤	private String getForPage (AbstractPage page) {¤		List list = page.getLabels ();¤		int listSize = list.size ();¤		for (int i = 0; i < listSize; ++i) {¤			Label label = (Label)list.get (i);¤			String ipath = getIconByLabel (label.getName ());¤			if (ipath != null) {¤				return ipath;¤			}¤		}¤		return getDefaultIcon (page.getType ());¤	}¤¤	private String getForSearchResult (SearchResultWithExcerpt res) {¤		String labelText = (String)res.get ("labelText");¤		String[] list = labelText.split(" ");¤		int listSize = list.length;¤		for (int i = 0; i < listSize; ++i) {¤			String ipath = getIconByLabel (list [i]);¤			if (ipath != null) {¤				return ipath;¤			}¤		}¤		return getDefaultIcon ((String)res.get ("type"));¤	}¤	//#UC END# *45C1FE21009C_CUSTOM_METHODS_AND_DATA*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*45C1FE21009C_DEFAULT_CONSTRUCTOR*"
			    value      	(value Text 
|//#UC START# *45C1FE21009C_DEFAULT_CONSTRUCTOR*¤		//#UC END# *45C1FE21009C_DEFAULT_CONSTRUCTOR*
			    )))
		    quid       	"45C1FE21009C"
		    documentation 	"Создает объект доступный в шаблонах velocity для выбора иконки в записимости от лейбла страницы."
		    stereotype 	"CVelocityContextPlugin"
		    operations 	(list Operations
			(object Operation "ctor"
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"AbstarctOperation"
				    value      	"regular")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"IsNative"
				    value      	"false")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"java:*460BA73B035B_BODY*"
				    value      	(value Text 
|//#UC START# *460BA73B035B_BODY*¤		//#UC END# *460BA73B035B_BODY*
				    )))
			    quid       	"460BA73B035B"
			    stereotype 	"ctor"
			    concurrency 	"Sequential"
			    opExportControl 	"Public"
			    uid        	0))
		    language   	"MDA Generator"))
	    logical_presentations 	(list unit_reference_list
		(object ClassDiagram "Main"
		    quid       	"45C1FE1C003E"
		    title      	"Main"
		    zoom       	100
		    max_height 	28350
		    max_width  	21600
		    origin_x   	0
		    origin_y   	0
		    items      	(list diagram_item_list
			(object ClassView "Class" "Logical View::MDProcess::ConfluencePlugins::IconsSelectorSupport::IconSelectorInVelocity" @79
			    ShowCompartmentStereotypes 	TRUE
			    IncludeAttribute 	TRUE
			    IncludeOperation 	TRUE
			    ShowOperationSignature 	TRUE
			    location   	(402, 339)
			    font       	(object Font
				size       	10
				face       	"Arial"
				charSet    	204
				bold       	FALSE
				italics    	FALSE
				underline  	FALSE
				strike     	FALSE
				color      	0
				default_color 	TRUE)
			    label      	(object ItemLabel
				Parent_View 	@79
				location   	(137, 280)
				fill_color 	13434879
				nlines     	1
				max_width  	530
				justify    	0
				label      	"IconSelectorInVelocity")
			    stereotype 	(object ItemLabel
				Parent_View 	@79
				location   	(137, 230)
				fill_color 	13434879
				anchor     	10
				nlines     	1
				max_width  	528
				justify    	0
				label      	"<<CVelocityContextPlugin>>")
			    icon_style 	"Label"
			    fill_color 	15448575
			    quidu      	"45C1FE21009C"
			    width      	548
			    height     	242
			    annotation 	8
			    autoResize 	TRUE)
			(object NoteView @80
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"LinkedItemGuid"
				    value      	"45C1FE21009C"))
			    location   	(945, 348)
			    font       	(object Font
				size       	8
				face       	"Arial"
				charSet    	204
				bold       	FALSE
				italics    	FALSE
				underline  	FALSE
				strike     	FALSE
				color      	0
				default_color 	TRUE)
			    label      	(object ItemLabel
				Parent_View 	@80
				location   	(763, 288)
				fill_color 	13434879
				nlines     	3
				max_width  	328
				justify    	1
				label      	"{context-key:=garIcon}")
			    line_color 	3342489
			    fill_color 	13434879
			    width      	388
			    height     	132)
			(object AttachView "" @81
			    font       	(object Font
				size       	10
				face       	"Arial"
				charSet    	204
				bold       	FALSE
				italics    	FALSE
				underline  	FALSE
				strike     	FALSE
				color      	0
				default_color 	TRUE)
			    stereotype 	TRUE
			    line_color 	3342489
			    client     	@80
			    supplier   	@79
			    vertices   	(list Points
				(750, 344)
				(676, 343))
			    line_style 	0)))))
	(object Class_Category "DocumentWorkSupport"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"name"
		    value      	"Remove all children of the document")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"prefix"
		    value      	"ru.garant")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"vendor name"
		    value      	"ООО НПП 'Гарант-Сервис'")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"vendor url"
		    value      	"www.garant.ru")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AutoCounter"
		    value      	"4")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (output.classpath)"
		    value      	"")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (output.project)"
		    value      	"")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (output.xml)"
		    value      	"")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"NESTED GENERATED FILES (java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/ConfluencePlugins/DocumentWorkSupport/RemoveDescendants.java::45DAF5AC007D")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"NESTED GENERATED FILES (output.xml)"
		    value      	"w:/MDProcess/java/src/etc/ConfluencePlugins/removedescendants.vm::45DAF51D01A5"))
	    quid       	"45D1B37D0290"
	    documentation 	"Библиотека плагина поддержки специальных функций для работы документами."
	    stereotype 	"CPluginsPackage"
	    visible_categories 	(list visibility_relationship_list
		(object Visibility_Relationship
		    quid       	"45DAF62B029F"
		    supplier   	"Logical View::external::JavaConfluence::ConfluenceClassPack"
		    quidu      	"45DAC0AA0232")
		(object Visibility_Relationship
		    quid       	"45FE966403DC"
		    supplier   	"Logical View::MDProcess::Описание MDKnow::Работа с контентом"
		    quidu      	"460912ED03D5"))
	    exportControl 	"Public"
	    logical_models 	(list unit_reference_list
		(object Class "RemoveDescendantsPlugin"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"context-key"
			    value      	"removeChildren")
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"need UC"
			    value      	"true")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"SELF GENERATED FILE (java)"
			    value      	"")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*45D1B3E601F4_CUSTOM_IMPORT*"
			    value      	"//#UC START# *45D1B3E601F4_CUSTOM_IMPORT*¤import bucket.container.ContainerManager;¤¤import com.atlassian.confluence.pages.Page;¤import com.atlassian.confluence.pages.PageManager;¤import com.atlassian.confluence.pages.actions.RemovePageAction;¤¤import java.util.List;¤//#UC END# *45D1B3E601F4_CUSTOM_IMPORT*")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*45D1B3E601F4_CUSTOM_CLASS_DEFINITION*"
			    value      	"//#UC START# *45D1B3E601F4_CUSTOM_CLASS_DEFINITION*¤//#UC END# *45D1B3E601F4_CUSTOM_CLASS_DEFINITION*")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*45D1B3E601F4_CUSTOM_METHODS_AND_DATA*"
			    value      	(value Text 
|//#UC START# *45D1B3E601F4_CUSTOM_METHODS_AND_DATA*¤	static final long serialVersionUID = 1977061220001128L;¤¤	public String getActionName (String fullClassName) {¤		return new String ("Remove children");¤	}¤¤	public int getDescendantsCount () {¤		Page parentPage = (Page)getPage ();¤		return parentPage.getDescendents ().size ();¤	}¤¤	public String doRemoveDescendants () throws Exception {¤		if (isCanceled () == true) {¤			return CANCEL;¤		}¤		System.out.println ("RemoveChildren::doRemove: pageId = " + getPage ().getId () + " parentTitle=" + getPage ().getTitle ());¤		Page parentPage = (Page)getPage ();¤		List descendentsList = parentPage.getDescendents ();¤		int removedPage = 0;¤		int descendantsCount = descendentsList.size ();¤		for (int i = 0; i < descendantsCount; ++i) {¤			Object o = descendentsList.get (i);¤			try {¤				Page curPage = (Page)o;¤				String title = curPage.getTitle ();¤				long id = curPage.getId ();¤				getPageManager ().trashPage (curPage);¤				if ((i % 100) == 0) {¤					System.out.println ("removed page " + i + ": " + title + " (" + id + ")");¤				}¤				++removedPage;¤			} catch (Exception e) {¤				System.err.println ("RemoveChildren::doRemove: could not remove " + i + " object '" + o + "'.");¤				throw e;¤			}¤		}¤		System.out.println ("RemoveChildren::doRemove: finished OK. Was removed " + removedPage);¤	    return SUCCESS;¤	}¤¤	private PageManager pageManager = null;¤¤	private PageManager getPageManager () {¤		if (this.pageManager == null) {¤			this.pageManager = (PageManager)ContainerManager.getInstance ().getContainerContext ().getComponent ("pageManager");¤		}¤		return this.pageManager;¤	}¤¤	public void setPageManager (PageManager pageManager) {¤		this.pageManager = pageManager;¤	}¤	//#UC END# *45D1B3E601F4_CUSTOM_METHODS_AND_DATA*
			    )))
		    quid       	"45D1B3E601F4"
		    documentation 	"Создает XWork компонент для удаления всех дочерних документов."
		    stereotype 	"CXWorkPlugin"
		    language   	"MDA Generator"
		    nestedClasses 	(list nestedClasses
			(object Class "RemoveDescendantsPackage"
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator User Properties"
				    name       	"need UC"
				    value      	"true")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"AbstarctOperation"
				    value      	"regular")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"IsNative"
				    value      	"false")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"output.xml:*45DAF87402DE_PACKAGE_CONTENT*"
				    value      	(value Text 
|<!--UC_BEGIN*45DAF87402DE_PACKAGE_CONTENT*-->¤			<default-interceptor-ref name="validatingStack"/>¤        		<global-results>¤    				<result name="pagenotfound" type="dispatcher">/pages/pagenotfound.action</result>¤	        		<result name="pagenotpermitted" type="chain">¤            			<param name="actionName">pagenotpermitted</param>¤        			</result>¤    			</global-results>¤¤			<action name="removedescendants" class="ru.garant.MDProcess.ConfluencePlugins.DocumentWorkSupport.RemoveDescendants">¤	            <result name="error" type="velocity">/removedescendants.vm</result>¤		        <result name="input" type="velocity">/removedescendants.vm</result>¤            	<result name="cancel" type="redirect">/pages/pageinfo.action?pageId=${page.id}</result>¤				<result name="success" type="velocity">/removedescendants.vm</result>¤        		</action>¤¤			<action name="doremovedescendants" class="ru.garant.MDProcess.ConfluencePlugins.DocumentWorkSupport.RemoveDescendants" method="doRemoveDescendants">¤				<result name="error" type="velocity">/removedescendants.vm</result>¤				<result name="input" type="velocity">/removedescendants.vm</result>¤				<result name="cancel" type="redirect">/pages/pageinfo.action?pageId=${page.id}</result>¤				<result name="success" type="redirect">/pages/pageinfo.action?pageId=${page.id}</result>¤			</action>¤¤			<action name="pagenotfound" class="com.atlassian.confluence.pages.actions.PageNotFoundAction">¤				<result name="success" type="velocity">/pages/alternativepages.vm</result>¤			</action>¤¤			<action name="pagenotpermitted" class="com.atlassian.confluence.pages.actions.PageNotPermittedAction">¤				<result name="success" type="velocity">/pages/pagenotpermitted.vm</result>¤				<result name="login" type="redirect">${loginUrl}</result>¤			</action>¤			<!--UC_END*45DAF87402DE_PACKAGE_CONTENT*-->
				    ))
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"output.xml:*45DAF87402DE_XPACKAGE_CONTENT*"
				    value      	"//#UC START# *45DAF87402DE_XPACKAGE_CONTENT*¤asasr¤//#UC END# *45DAF87402DE_XPACKAGE_CONTENT*"))
			    quid       	"45DAF87402DE"
			    documentation 	
|Создает package для XWork компонента удаления всех потомков документа.
|
			    
			    stereotype 	"XPackage")))
		(object Class "removedescendants"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"need UC"
			    value      	"true")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"SELF GENERATED FILE (output.xml)"
			    value      	"w:/MDProcess/java/src/etc/ConfluencePlugins/removedescendants.vm")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"output.xml:*45DAF51D01A5_CUSTOM_CONTENT*"
			    value      	(value Text 
|##UC_BEGIN*45DAF51D01A5_CUSTOM_CONTENT*¤<html>¤	<head>¤		<title>Remove Descendants</title>¤		<meta name="help-path" content="/pages/help/removepage.vm"/>¤        <content tag="selectedTab">removedescendants</content>¤	</head>¤¤	<body>¤		#parse ( "/template/includes/actionerrors.vm" )¤        	#parse("/includes/alert-locked.vm")¤¤		#applyDecorator("root")¤	        	#decoratorParam("helper" $action.helper)¤	        	#decoratorParam("mode" "edit")¤        		#decoratorParam("context" "page")¤¤		        #applyDecorator ("confirm")¤		            #decoratorParam ("formName" "removepageform")¤		            #decoratorParam ("formAction" "doremovedescendants.action?pageId=$page.id")¤¤		            <p>$descendantsCount descendants of the '$page.title' will be removed.</p>¤¤		        #end¤¤			#parse ( "/pages/page-breadcrumbs.vm" )¤		    #end¤	</body>¤</html>¤¤¤##UC_END*45DAF51D01A5_CUSTOM_CONTENT*
			    )))
		    quid       	"45DAF51D01A5"
		    documentation 	"Шаблон экшена удаления всех потомков документа."
		    stereotype 	"VM"
		    language   	"MDA Generator")
		(object Class "RemoveDescendants"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"Need assign op"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"Need copy ctor"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"Need ref count"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"Need unsorted less"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"debug log"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"ifdef"
			    value      	"")
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"local supervisor"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"need UC"
			    value      	"true")
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"no base class"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"non virtual base"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"singleton"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"SELF GENERATED FILE (java)"
			    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/ConfluencePlugins/DocumentWorkSupport/RemoveDescendants.java")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*45DAF5AC007D_CUSTOM_IMPORT*"
			    value      	"//#UC START# *45DAF5AC007D_CUSTOM_IMPORT*¤import com.atlassian.spring.container.ContainerManager;¤¤import com.atlassian.confluence.pages.Page;¤import com.atlassian.confluence.pages.PageManager;¤¤import java.util.List;¤//#UC END# *45DAF5AC007D_CUSTOM_IMPORT*")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*45DAF5AC007D_CUSTOM_CLASS_DEFINITION*"
			    value      	"//#UC START# *45DAF5AC007D_CUSTOM_CLASS_DEFINITION*¤//#UC END# *45DAF5AC007D_CUSTOM_CLASS_DEFINITION*")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*45DAF5AC007D_CUSTOM_METHODS_AND_DATA*"
			    value      	(value Text 
|//#UC START# *45DAF5AC007D_CUSTOM_METHODS_AND_DATA*¤	public int getDescendantsCount () {¤		try {¤			Page parentPage = (Page)getPage ();¤			return parentPage.getDescendents ().size ();¤		} catch (Exception e) {¤			System.err.println ("RemoveChildren::getDescendantsCount: Exception '" + e.getMessage () + "'");¤			return 0;¤		}¤	}¤¤	public String doRemoveDescendants () throws Exception {¤		try {¤			if (isCanceled () == true) {¤				return CANCEL;¤			}¤			System.out.println ("RemoveChildren::doRemoveDescendants: pageId = " + getPage ().getId () + " parentTitle=" + getPage ().getTitle ());¤			Page parentPage = (Page)getPage ();¤			List descendentsList = parentPage.getDescendents ();¤			int removedPage = 0;¤			int descendantsCount = descendentsList.size ();¤			for (int i = 0; i < descendantsCount; ++i) {¤				removePage (descendentsList, i);¤				++removedPage;¤			}¤			System.out.println ("RemoveChildren::doRemoveDescendants: finished OK. Was removed " + removedPage);¤		    return SUCCESS;¤		} catch (Exception e) {¤			System.err.println ("RemoveChildren::doRemoveDescendants: Exception '" + e.getMessage () + "'");¤			return ERROR;¤		}¤	}¤¤	private PageManager pageManager = null;¤¤	private PageManager getPageManager () {¤		if (this.pageManager == null) {¤			this.pageManager = (PageManager)ContainerManager.getInstance ().getContainerContext ().getComponent ("pageManager");¤			if (this.pageManager == null) {¤				System.err.println ("RemoveChildren::getPageManager: can not get component 'pageManager'.");¤			}¤		}¤		return this.pageManager;¤	}¤¤	public void setPageManager (PageManager pageManager) {¤		this.pageManager = pageManager;¤	}¤¤	private void removePage (List descendentsList, int i) throws Exception {¤		Object o = descendentsList.get (i);¤		try {¤			Page curPage = (Page)o;¤			long id = curPage.getId ();¤			String title = curPage.getTitle ();¤			getPageManager ().trashPage (curPage);¤			if ((i % 100) == 0) {¤				System.out.println ("removed page " + i + ": " + title + " (" + id + ")");¤			}¤		} catch (Exception e) {¤			System.err.println ("RemoveChildren::removePage: could not remove " + i + " object '" + o + "'.");¤			throw e;¤		}¤	}¤	//#UC END# *45DAF5AC007D_CUSTOM_METHODS_AND_DATA*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*45DAF5AC007D_CUSTOM_OPERATION_DEFENITION*"
			    value      	(value Text 
|//#UC START# *45DAF5AC007D_CUSTOM_OPERATION_DEFENITION*¤	//#UC END# *45DAF5AC007D_CUSTOM_OPERATION_DEFENITION*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*45DAF5AC007D_ACTION_NAME*"
			    value      	(value Text 
|//#UC START# *45DAF5AC007D_ACTION_NAME*¤		return new String ("Remove Descendants");¤		//#UC END# *45DAF5AC007D_ACTION_NAME*
			    )))
		    quid       	"45DAF5AC007D"
		    documentation 	"Экшн удаления всех потомков данного документа."
		    stereotype 	"CActionPlugin"
		    superclasses 	(list inheritance_relationship_list
			(object Inheritance_Relationship
			    quid       	"45DAF5E100CB"
			    supplier   	"Logical View::external::JavaConfluence::ConfluenceClassPack::RemovePageAction"
			    quidu      	"45DAC96B0157"))
		    language   	"MDA Generator"))
	    logical_presentations 	(list unit_reference_list
		(object ClassDiagram "Main"
		    quid       	"45D1B3DF031C"
		    title      	"Main"
		    zoom       	100
		    max_height 	28350
		    max_width  	21600
		    origin_x   	0
		    origin_y   	0
		    items      	(list diagram_item_list
			(object ClassView "Class" "Logical View::MDProcess::ConfluencePlugins::DocumentWorkSupport::RemoveDescendantsPlugin" @82
			    ShowCompartmentStereotypes 	TRUE
			    IncludeAttribute 	TRUE
			    IncludeOperation 	TRUE
			    ShowOperationSignature 	TRUE
			    location   	(861, 501)
			    font       	(object Font
				size       	10
				face       	"Arial"
				charSet    	204
				bold       	FALSE
				italics    	FALSE
				underline  	FALSE
				strike     	FALSE
				color      	0
				default_color 	TRUE)
			    label      	(object ItemLabel
				Parent_View 	@82
				location   	(592, 471)
				fill_color 	13434879
				nlines     	1
				max_width  	538
				justify    	0
				label      	"RemoveDescendantsPlugin")
			    stereotype 	(object ItemLabel
				Parent_View 	@82
				location   	(592, 421)
				fill_color 	13434879
				anchor     	10
				nlines     	1
				max_width  	538
				justify    	0
				label      	"<<CXWorkPlugin>>")
			    icon_style 	"Label"
			    fill_color 	15448575
			    quidu      	"45D1B3E601F4"
			    width      	556
			    height     	184
			    annotation 	8
			    autoResize 	TRUE)
			(object ClassView "Class" "Logical View::MDProcess::ConfluencePlugins::DocumentWorkSupport::removedescendants" @83
			    ShowCompartmentStereotypes 	TRUE
			    IncludeAttribute 	TRUE
			    IncludeOperation 	TRUE
			    ShowOperationSignature 	TRUE
			    location   	(339, 507)
			    font       	(object Font
				size       	10
				face       	"Arial"
				charSet    	204
				bold       	FALSE
				italics    	FALSE
				underline  	FALSE
				strike     	FALSE
				color      	0
				default_color 	TRUE)
			    label      	(object ItemLabel
				Parent_View 	@83
				location   	(141, 478)
				fill_color 	13434879
				nlines     	1
				max_width  	396
				justify    	0
				label      	"removedescendants")
			    stereotype 	(object ItemLabel
				Parent_View 	@83
				location   	(141, 428)
				fill_color 	13434879
				anchor     	10
				nlines     	1
				max_width  	396
				justify    	0
				label      	"<<VM>>")
			    icon_style 	"Label"
			    fill_color 	15448575
			    quidu      	"45DAF51D01A5"
			    width      	414
			    height     	182
			    annotation 	8
			    autoResize 	TRUE)
			(object ClassView "Class" "Logical View::MDProcess::ConfluencePlugins::DocumentWorkSupport::RemoveDescendants" @84
			    ShowCompartmentStereotypes 	TRUE
			    IncludeAttribute 	TRUE
			    IncludeOperation 	TRUE
			    ShowOperationSignature 	TRUE
			    location   	(1413, 498)
			    font       	(object Font
				size       	10
				face       	"Arial"
				charSet    	204
				bold       	FALSE
				italics    	FALSE
				underline  	FALSE
				strike     	FALSE
				color      	0
				default_color 	TRUE)
			    label      	(object ItemLabel
				Parent_View 	@84
				location   	(1203, 468)
				fill_color 	13434879
				nlines     	1
				max_width  	420
				justify    	0
				label      	"RemoveDescendants")
			    stereotype 	(object ItemLabel
				Parent_View 	@84
				location   	(1203, 418)
				fill_color 	13434879
				anchor     	10
				nlines     	1
				max_width  	420
				justify    	0
				label      	"<<CActionPlugin>>")
			    icon_style 	"Label"
			    fill_color 	15448575
			    quidu      	"45DAF5AC007D"
			    width      	438
			    height     	184
			    annotation 	8
			    autoResize 	TRUE)
			(object ClassView "Class" "Logical View::external::JavaConfluence::ConfluenceClassPack::RemovePageAction" @85
			    ShowCompartmentStereotypes 	TRUE
			    SuppressAttribute 	TRUE
			    SuppressOperation 	TRUE
			    IncludeAttribute 	TRUE
			    IncludeOperation 	TRUE
			    ShowOperationSignature 	TRUE
			    location   	(1401, 123)
			    font       	(object Font
				size       	10
				face       	"Arial"
				charSet    	204
				bold       	FALSE
				italics    	FALSE
				underline  	FALSE
				strike     	FALSE
				color      	658120
				default_color 	FALSE)
			    label      	(object ItemLabel
				Parent_View 	@85
				location   	(1197, 95)
				fill_color 	13434879
				nlines     	1
				max_width  	408
				justify    	0
				label      	"RemovePageAction")
			    stereotype 	(object ItemLabel
				Parent_View 	@85
				location   	(1197, 45)
				fill_color 	13434879
				anchor     	10
				nlines     	1
				max_width  	408
				justify    	0
				label      	"<<SimpleClass>>")
			    icon_style 	"Label"
			    line_color 	14803425
			    fill_color 	14803425
			    quidu      	"45DAC96B0157"
			    width      	426
			    height     	180
			    annotation 	8
			    autoResize 	TRUE)
			(object InheritView "" @86
			    font       	(object Font
				size       	10
				face       	"Arial"
				charSet    	204
				bold       	FALSE
				italics    	FALSE
				underline  	FALSE
				strike     	FALSE
				color      	0
				default_color 	TRUE)
			    stereotype 	TRUE
			    line_color 	3947680
			    quidu      	"45DAF5E100CB"
			    client     	@84
			    supplier   	@85
			    vertices   	(list Points
				(1410, 405)
				(1403, 213))
			    line_style 	0)
			(object ClassView "Class" "Logical View::MDProcess::ConfluencePlugins::DocumentWorkSupport::RemoveDescendantsPlugin::RemoveDescendantsPackage" @87
			    ShowCompartmentStereotypes 	TRUE
			    IncludeAttribute 	TRUE
			    IncludeOperation 	TRUE
			    ShowOperationSignature 	TRUE
			    location   	(837, 738)
			    font       	(object Font
				size       	10
				face       	"Arial"
				charSet    	204
				bold       	FALSE
				italics    	FALSE
				underline  	FALSE
				strike     	FALSE
				color      	0
				default_color 	TRUE)
			    label      	(object ItemLabel
				Parent_View 	@87
				location   	(549, 685)
				fill_color 	13434879
				nlines     	1
				max_width  	576
				justify    	0
				label      	"RemoveDescendantsPackage")
			    stereotype 	(object ItemLabel
				Parent_View 	@87
				location   	(549, 635)
				fill_color 	13434879
				anchor     	10
				nlines     	1
				max_width  	576
				justify    	0
				label      	"<<XPackage>>")
			    icon_style 	"Label"
			    fill_color 	15448575
			    quidu      	"45DAF87402DE"
			    width      	594
			    height     	230
			    annotation 	8
			    autoResize 	TRUE)))))
	(object Class_Category "SearchHighLightSupport"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"name"
		    value      	"Garant Search Highlight Support")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"prefix"
		    value      	"ru.garant")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"vendor name"
		    value      	"ООО НПП 'Гарант-Сервис'")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"vendor url"
		    value      	"www.garant.ru")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AutoCounter"
		    value      	"2")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"NESTED GENERATED FILES (java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/ConfluencePlugins/SearchHighLightSupport/SearchHighLightUtil.java::45D9C55603C8")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SELF GENERATED FILE (output.xml)"
		    value      	""))
	    quid       	"45D9C51F007D"
	    stereotype 	"CPluginsPackage"
	    visible_categories 	(list visibility_relationship_list
		(object Visibility_Relationship
		    quid       	"4614CE620203"
		    supplier   	"Logical View::MDProcess::Описание MDKnow::Дополнительные сценарии"
		    quidu      	"45BE066401BB"))
	    exportControl 	"Public"
	    logical_models 	(list unit_reference_list
		(object Class "SearchHighLightUtil"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"context-key"
			    value      	"garSearchHighLightUtil")
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"need UC"
			    value      	"true")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*45D9C55603C8_CUSTOM_IMPORT*"
			    value      	"//#UC START# *45D9C55603C8_CUSTOM_IMPORT*¤import java.util.ArrayList;¤import java.util.StringTokenizer;¤import com.atlassian.confluence.util.GeneralUtil;¤import com.atlassian.confluence.search.summary.Summary;¤import com.atlassian.confluence.spaces.Space;¤import com.atlassian.confluence.spaces.SpaceManager;¤import com.atlassian.user.search.page.Pager;¤import com.atlassian.confluence.core.ConfluenceActionSupport;¤¤import java.util.TreeMap;¤//#UC END# *45D9C55603C8_CUSTOM_IMPORT*")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*45D9C55603C8_CUSTOM_CLASS_DEFINITION*"
			    value      	"//#UC START# *45D9C55603C8_CUSTOM_CLASS_DEFINITION*¤//#UC END# *45D9C55603C8_CUSTOM_CLASS_DEFINITION*")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*45D9C55603C8_CUSTOM_METHODS_AND_DATA*"
			    value      	(value Text 
|//#UC START# *45D9C55603C8_CUSTOM_METHODS_AND_DATA*¤	private ConfluenceActionSupport cas = null;¤	private SpaceManager space_manager = null;¤¤	public void setSpaceManager (SpaceManager sm) {¤		this.space_manager = sm;¤	}¤¤	public String extractSearchWords (String full_query) {¤		int bl_pos = full_query.indexOf ("(");¤		if (bl_pos != -1) {¤			int br_pos = full_query.indexOf (")", bl_pos + 1);¤			if (br_pos != -1) {¤				return full_query.substring(bl_pos + 1, br_pos);¤			}¤		}¤		return full_query;¤	}¤¤	public String extractHtmlSearchWords (String full_query) {¤		if ((full_query == null) || full_query.length () == 0) {¤			return "&lt;any&gt;";¤		}¤		if (full_query.indexOf ("aaai8j8zzz") != -1) {¤			return "&lt;any&gt;";¤		}¤		return "<b>" + full_query + "</b>";¤	}¤¤	public String extractHtmlSearchTypes (String full_query, String context_path) {¤		String type_marker = "type:";¤		String split_marker = " OR ";¤		String split_marker_bold = " <i>OR</i> ";¤		int tl_pos = full_query.indexOf (type_marker);¤		if (tl_pos != -1) {¤			int tr_pos = full_query.indexOf (")", tl_pos + type_marker.length ());¤			if (tr_pos != -1) {¤				String types_raw = full_query.substring(tl_pos, tr_pos);¤				String[] types_raw_arr = types_raw.split(split_marker);¤				String result = new String ("");¤				if (types_raw_arr.length == 6) {¤					return "&lt;any&gt;";¤				}¤				for (int i = 0; i < types_raw_arr.length; ++i) {¤					int t_pos = types_raw_arr[i].indexOf (type_marker);¤					if (t_pos != -1) {¤						String cur_type = types_raw_arr[i].substring (t_pos + type_marker.length ());¤						result += get_type_icon_img_src (cur_type, context_path);¤						result += "&nbsp;";¤						result += cur_type;¤						result += split_marker_bold;¤					}¤				}¤				int lo_pos = result.lastIndexOf(split_marker_bold);¤				if (lo_pos != -1) {¤					result = result.substring (0, lo_pos);¤				}¤				return result;¤			}¤		}¤		return "&lt;any&gt;";¤	}¤¤	public int text_length_of_html (String html) {¤		int result = 0;¤		int cur_pos = 0;¤		int lt_pos = -1;¤		while ((lt_pos = html.indexOf ("<", cur_pos)) != -1) {¤			result += (lt_pos - cur_pos);¤			cur_pos = lt_pos + 1;¤			int gt_pos = html.indexOf (">", cur_pos);¤			if (gt_pos == -1) {¤				return result; // html damaged¤			}¤			cur_pos = gt_pos + 1;¤		}¤		result += (html.length () - cur_pos);¤		return result;¤	}¤¤	public String extractHtmlSearchLabels (String full_query, String context_path) {¤		String label_marker = "labelText:";¤		String label_marker_not = "NOT (labelText:";¤		int tl_pos_n = full_query.indexOf (label_marker_not);¤		if (tl_pos_n != -1) {¤			label_marker = label_marker_not;¤		}¤		String split_marker = " OR ";¤		String split_marker_bold = " <i>OR</i> ";¤		int tl_pos = full_query.indexOf (label_marker);¤		if (tl_pos != -1) {¤			int tr_pos = full_query.indexOf (")", tl_pos + label_marker.length ());¤			if (tr_pos != -1) {¤				String labels_raw = full_query.substring(tl_pos, tr_pos);¤				if (labels_raw.indexOf (split_marker) == -1) {¤					split_marker = " AND ";¤					split_marker_bold = " <i>AND</i> ";¤				}¤				String[] labels_raw_arr = labels_raw.split(split_marker);¤				String result = new String ("");¤				if (label_marker == label_marker_not) {¤					result += "<i>NOT</i> ";¤				}¤				for (int i = 0; i < labels_raw_arr.length; ++i) {¤					int t_pos = labels_raw_arr[i].indexOf (label_marker);¤					if (t_pos != -1) {¤						String cur_label = labels_raw_arr[i].substring (t_pos + label_marker.length ());¤						result += get_label_icon_img_src (cur_label, context_path);¤						result += "&nbsp;";¤						result += cur_label;¤						result += split_marker_bold;¤					}¤				}¤				int lo_pos = result.lastIndexOf (split_marker_bold);¤				if (lo_pos != -1) {¤					result = result.substring (0, lo_pos);¤				}¤				return result;¤			}¤		}¤		return "&lt;any&gt;";¤	}¤¤	public String extractHtmlSearchSpaces (String full_query, String search_words, String search_req, String context_path) {¤		if (search_words == search_req) {¤			return "&lt;global spaces&gt;";¤		}¤		if ((full_query == null) || full_query.length () == 0) {¤			return "&lt;nothing&gt;";¤		}¤		String[] keys_arr = full_query.split(" ");¤		if (keys_arr.length == 0) {¤			return "&lt;nothing&gt;";¤		}¤		String result = new String ("");¤		String split_marker_bold = " <i>OR</i> ";¤		for (int i = 0; i < keys_arr.length; ++i) {¤			Space cur_space = this.space_manager.getSpace (keys_arr [i]);¤			if (cur_space != null) {¤				result += get_space_icon_img_src (keys_arr [i], context_path);¤				result += "&nbsp;";¤				result += cur_space.getName ();¤				result += split_marker_bold;¤			}¤		}¤		int lo_pos = result.lastIndexOf (split_marker_bold);¤		if (lo_pos != -1) {¤			result = result.substring(0, lo_pos);¤		}¤		return result;¤	}¤¤	// *** ONE SHOULD CALL THIS METHOD FROM VELOCITY TEMPLATE TO FIX COMMENT URL PATH ***¤	public String fixCommentUrlPath (String path, String query) {¤		int n_pos = path.indexOf("#");¤		if (n_pos != -1) {¤			String result = path.substring (0, n_pos);¤			result += "&myCtxWords=";¤			result += query;¤			result += path.substring(n_pos);¤			return result;¤		}¤		return path;¤	}¤¤	public String cssHighlight (String css, String color) {¤		String css_out = new String ("");¤		int sh_pos = css.indexOf (".search-highlight");¤		if (sh_pos != -1) {¤			int bg_pos = css.indexOf ("background-color:", sh_pos);¤			if (bg_pos != -1) {¤				int n_pos = css.indexOf ("#", bg_pos);¤				if (n_pos != -1) {¤					int s_pos = css.indexOf (";", n_pos);¤					if (s_pos != -1) {¤						css_out += css.substring (0, n_pos);¤						css_out += color;¤						css_out += css.substring (s_pos);¤						return css_out;¤					}¤				}¤			}¤		}¤		return css;¤	}¤¤	// *** ONE SHOULD CALL THIS METHOD FROM VELOCITY TEMPLATE FOR MORPHOLOGY TO WORK PROPERLY ***¤	public String XHtmlHighlightBySummary (String xhtml, String query) {¤		if ((query == null) || (query.length () == 0)) {¤			return xhtml; // return immediately if no highlight required¤		}¤		String xhtml_out = new String (""); // init result string¤		String xhtml_rest = new String (xhtml); // init the rest of the string to be parsed¤		while (xhtml_rest.length () > 0) {¤			int left_br_pos0 = xhtml_rest.indexOf ("<"); // we search a html tag left boundary...¤			if (left_br_pos0 != -1) { // ...found¤				// extract free text outside of tags¤				String free_text = xhtml_rest.substring (0, left_br_pos0);¤				free_text = my_replace_by_summary (free_text, query);¤				// then extract text within a tag¤				int right_br_pos0 = xhtml_rest.indexOf (">", left_br_pos0 + 1);¤				xhtml_out += free_text;¤				xhtml_out += xhtml_rest.substring (left_br_pos0, right_br_pos0 + 1);¤				// prepare new rest of the string¤				xhtml_rest = xhtml_rest.substring (right_br_pos0 + 1);¤			} else { // ...not found: the rest of the string is free text¤				String free_text = xhtml_rest;¤				free_text = my_replace_by_summary (free_text, query);¤				xhtml_out += free_text;¤				// prepare new rest of the string - empty string¤				xhtml_rest = "";¤			}¤		}¤		return xhtml_out;¤	}¤¤	private String my_replace_by_summary (String free_text, String query) {¤		String free_text_out = new String ("");¤		String delims = new String (" .,?!:;-`~()[]<>@#$%^&*+-/|\\\'\"\n\r\t");¤		// we split words and delimenters¤		StringTokenizer st = new StringTokenizer (free_text, delims, true);¤		while (st.hasMoreTokens()) {¤			String sub_text_i = st.nextToken();¤			if (delims.indexOf (sub_text_i) == -1) { // is a word¤				// make a summary upon one word, it will be equal to word¤				Summary sum = GeneralUtil.makeSummary(sub_text_i, query);¤				if (sum != null) {¤					// we expect number of fragments to be 1, but actually it does not matter¤					Summary.Fragment[] frags = sum.getFragments();¤					if (frags.length > 0) {¤						for (int j = 0; j < frags.length; ++j) {¤							String gtxt = frags[j].getText ();¤							if (frags[j].isHighlight()) {¤								// we highlight it by html tag <span>¤								free_text_out += my_span (gtxt);¤							} else {¤								free_text_out += gtxt;¤							}¤						}¤					} else { // if something goes wrong, we simply don't highlight¤						free_text_out += sub_text_i;¤					}¤				} else {¤					free_text_out += sub_text_i;¤				}¤			} else {¤				free_text_out += sub_text_i;¤			}¤		}¤		return free_text_out;¤	}¤¤	public String XHtmlHighlight (String xhtml, String query) {¤		if ((query == null) || (query.length () == 0)) {¤			return xhtml;¤		}¤		String xhtml_out = new String ("");¤		String[] words = query.split(" ");¤		String xhtml_rest = new String (xhtml);¤		while (xhtml_rest.length () > 0) {¤			int left_br_pos0 = xhtml_rest.indexOf("<");¤			if (left_br_pos0 != -1) {¤				String free_text = xhtml_rest.substring (0, left_br_pos0);¤				for (int i = 0; i < words.length; ++i) {¤					free_text = my_replace_all (free_text, words[i], my_span (words[i]));¤				}¤				int right_br_pos0 = xhtml_rest.indexOf(">", left_br_pos0 + 1);¤				xhtml_out += free_text;¤				xhtml_out += xhtml_rest.substring (left_br_pos0, right_br_pos0 + 1);¤				xhtml_rest = xhtml_rest.substring (right_br_pos0 + 1);¤			} else {¤				String free_text = xhtml_rest;¤				for (int i = 0; i < words.length; ++i) {¤					free_text = my_replace_all (free_text, words[i], my_span (words[i]));¤				}¤				xhtml_out += free_text;¤				xhtml_rest = "";¤			}¤		}¤		return xhtml_out;¤	}¤¤	private String my_replace_all (String str_in, String str_from, String str_to) {¤		if ((str_from.indexOf("<") != -1) || (str_from.indexOf(">") != -1)) {¤			return str_in;¤		}¤		String str_out = new String ("");¤		String str_rest = new String (str_in);¤		int from_pos = -1;¤		while (str_rest.length () > 0) {¤			if ((from_pos = str_rest.indexOf (str_from)) != -1) {¤				str_out += str_rest.substring(0, from_pos);¤				String replacer = str_to;¤				if (from_pos > 0) {¤					if (str_rest.charAt (from_pos - 1) == '<') {¤						replacer = str_from;¤					}¤					if (from_pos > 1) {¤						if ((str_rest.charAt (from_pos - 1) == '/') && (str_rest.charAt (from_pos - 2) == '<')) {¤							replacer = str_from;¤						}¤					}¤				}¤				str_out += replacer;¤				str_rest = str_rest.substring(from_pos + str_from.length ());¤			} else {¤				str_out += str_rest;¤				str_rest = "";¤			}¤		}¤		return str_out;¤	}¤¤	private String my_span (String word) {¤		String span_open = new String ("<span class=\"search-highlight\">");¤		String span_close = new String ("</span>");¤		return span_open + word + span_close;¤	}¤¤	public String fixXHtmlAfterHighlight (String xhtml) {¤		String xhtml_out = new String ("");¤		try {¤			String span_open = new String ("<span class=\"search-highlight\">");¤			String span_close = new String ("</span>");¤			String xhtml_rest = new String (xhtml);¤			while (xhtml_rest.length () > 0) {¤				int left_br_pos0 = xhtml_rest.indexOf("<");¤				int left_br_pos = left_br_pos0;¤				if (left_br_pos != -1) {¤					int right_br_pos = -1;¤					int span_open_pos = -1;¤					int span_close_pos = -1;¤					do {¤						span_open_pos = xhtml_rest.indexOf (span_open, left_br_pos + 1);¤						if (span_open_pos != -1) {¤							span_open_pos = span_open_pos + span_open.length () - 1;¤						}¤						span_close_pos = xhtml_rest.indexOf (span_close, left_br_pos + 1);¤						if (span_close_pos != -1) {¤							span_close_pos = span_close_pos + span_close.length () - 1;¤						}¤						right_br_pos = xhtml_rest.indexOf (">", left_br_pos);¤						if (right_br_pos == span_open_pos) {¤							left_br_pos = span_open_pos + 1;¤						}¤						if (right_br_pos == span_close_pos) {¤							left_br_pos = span_close_pos + 1;¤						}¤					} while ((right_br_pos == span_open_pos) || (right_br_pos == span_close_pos));¤					String ancor = xhtml_rest.substring (left_br_pos0, right_br_pos);¤					String pure_ancor1 = my_replace_all_fix (ancor, span_open, "");¤					String pure_ancor2 = my_replace_all_fix (pure_ancor1, span_close, "");¤					xhtml_out += xhtml_rest.substring (0, left_br_pos0);¤					xhtml_out += pure_ancor2;¤					xhtml_out += ">";¤					xhtml_rest = xhtml_rest.substring (right_br_pos + 1);¤					//System.err.println ("fixXHtmlAfterHighlight (): pure_ancor2 = " + pure_ancor2);¤				} else {¤					xhtml_out += xhtml_rest;¤					xhtml_rest = "";¤				}¤			}¤		} catch (Exception e) {¤			System.err.println ("fixXHtmlAfterHighlight (): Exception:" + e.getLocalizedMessage ());¤		}¤		return xhtml_out;¤	}¤¤	private String my_replace_all_fix (String str_in, String str_from, String str_to) {¤		String str_out = new String ("");¤		String str_rest = new String (str_in);¤		int from_pos = -1;¤		while (str_rest.length () > 0) {¤			if ((from_pos = str_rest.indexOf (str_from)) != -1) {¤				str_out += str_rest.substring(0, from_pos);¤				str_out += str_to;¤				str_rest = str_rest.substring(from_pos + str_from.length ());¤			} else {¤				str_out += str_rest;¤				str_rest = "";¤			}¤		}¤		return str_out;¤	}¤¤	private TreeMap <String, String> type_icon_map = null;¤¤	private void init_type_icon_map () {¤		type_icon_map = new TreeMap <String, String> ();¤		type_icon_map.put ("page", "/images/icons/docs_16.gif");¤		type_icon_map.put ("blogpost", "/images/icons/blogentry_16.gif");¤		type_icon_map.put ("comment", "/images/icons/comment_16.gif");¤		type_icon_map.put ("attachment", "/images/icons/attach_file_16.gif");¤		type_icon_map.put ("userinfo", "/images/icons/user_16.gif");¤		type_icon_map.put ("spacedesc", "/images/icons/home_16.gif");¤	}¤¤	private String get_type_icon (String type) {¤		String result = type_icon_map.get (type);¤		if (result != null) {¤			return result;¤		}¤		return "/images/icons/cd_16.gif";¤	}¤¤	private String get_type_icon_img_src (String type, String path) {¤		String icon_path = path + get_type_icon (type);¤		return "<img src=\"" + icon_path + "\" align=\"absmiddle\" />";¤	}¤¤	private TreeMap <String, String> space_icon_map = null;¤¤	private void init_space_icon_map () {¤		space_icon_map = new TreeMap <String, String> ();¤		space_icon_map.put ("MDP", "/images/icons/garicons/mdp_logo_16.png");¤		space_icon_map.put ("EXTDOCS", "/images/icons/garicons/external_logo_16.png");¤	}¤¤	private String get_space_icon (String space) {¤		String result = space_icon_map.get (space);¤		if (result != null) {¤			return result;¤		}¤		return "/images/icons/web_16.gif";¤	}¤¤	private String get_space_icon_img_src (String space, String path) {¤		String icon_path = path + get_space_icon (space);¤		return "<img src=\"" + icon_path + "\" align=\"absmiddle\" />";¤	}¤¤	public String getIconByLabel (String label) {¤		if (label.compareTo ("feature") == 0) {¤			return new String ("/images/icons/garicons/Feature.png");¤		} else if (label.compareTo ("important") == 0) {¤			return new String ("/images/icons/garicons/Important.png");¤		} else if (label.compareTo ("report") == 0) {¤			return new String ("/images/icons/garicons/Report.png");¤		} else if (label.compareTo ("requirements") == 0) {¤			return new String ("/images/icons/garicons/Requirements.png");¤		} else if (label.compareTo ("software_update") == 0) {¤			return new String ("/images/icons/garicons/SU.png");¤		} else if (label.compareTo ("usecase") == 0) {¤			return new String ("/images/icons/garicons/UseCase.png");¤		} else if (label.compareTo ("userneeds") == 0) {¤			return new String ("/images/icons/garicons/UserNeed.png");¤		} else {¤			return null;¤		}¤	}¤¤	private String get_label_icon (String label) {¤		String result = this.getIconByLabel (label);¤		if (result != null) {¤			return result;¤		}¤		return "/images/icons/label_16.gif";¤	}¤¤	private String get_label_icon_img_src (String label, String path) {¤		String icon_path = path + get_label_icon (label);¤		return "<img src=\"" + icon_path + "\" align=\"absmiddle\" />";¤	}¤¤    public ArrayList<String> allUserNames () {¤    	ArrayList<String> l = new ArrayList<String> ();¤    	Pager p = GeneralUtil.getUserAccessor ().getUserNames ();¤    	while (p.iterator ().hasNext ()) {¤    		String d = p.iterator ().next ().toString ();¤    		l.add (d);¤    	}¤    	return l;¤    }¤¤    public String extractHtmlSearchAuthors (String full_query) {¤    	String author_marker = "author:";¤		String split_marker = " OR ";¤		String split_marker_bold = " <i>OR</i> ";¤		int tl_pos = full_query.indexOf (author_marker);¤		if (tl_pos != -1) {¤			int tr_pos = full_query.indexOf (")", tl_pos + author_marker.length ());¤			if (tr_pos != -1) {¤				String authors_raw = full_query.substring(tl_pos, tr_pos);¤				String[] authors_raw_arr = authors_raw.split(split_marker);¤				String result = new String ("");¤				for (int i = 0; i < authors_raw_arr.length; ++i) {¤					int t_pos = authors_raw_arr[i].indexOf (author_marker);¤					if (t_pos != -1) {¤						String cur_author = authors_raw_arr[i].substring (t_pos + author_marker.length ());¤						result += this.cas.getUserFullName(cur_author);¤						result += split_marker_bold;¤					}¤				}¤				int lo_pos = result.lastIndexOf (split_marker_bold);¤				if (lo_pos != -1) {¤					result = result.substring (0, lo_pos);¤				}¤				return result;¤			}¤		}¤		return "&lt;any&gt;";¤    }¤	//#UC END# *45D9C55603C8_CUSTOM_METHODS_AND_DATA*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"SELF GENERATED FILE (java)"
			    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/ConfluencePlugins/SearchHighLightSupport/SearchHighLightUtil.java")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*45D9C55603C8_DEFAULT_CONSTRUCTOR*"
			    value      	(value Text 
|//#UC START# *45D9C55603C8_DEFAULT_CONSTRUCTOR*¤		init_type_icon_map ();¤		init_space_icon_map ();¤		this.cas = new ConfluenceActionSupport ();¤		//#UC END# *45D9C55603C8_DEFAULT_CONSTRUCTOR*
			    )))
		    quid       	"45D9C55603C8"
		    stereotype 	"CVelocityContextPlugin"
		    operations 	(list Operations
			(object Operation "ctor"
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"AbstarctOperation"
				    value      	"regular")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"IsNative"
				    value      	"false")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"java:*460BA7620148_BODY*"
				    value      	(value Text 
|//#UC START# *460BA7620148_BODY*¤		init_type_icon_map ();¤		init_space_icon_map ();¤		this.cas = new ConfluenceActionSupport ();¤		//#UC END# *460BA7620148_BODY*
				    )))
			    quid       	"460BA7620148"
			    stereotype 	"ctor"
			    concurrency 	"Sequential"
			    opExportControl 	"Public"
			    uid        	0))
		    language   	"MDA Generator"))
	    logical_presentations 	(list unit_reference_list
		(object ClassDiagram "Main"
		    quid       	"45D9C54E03A9"
		    title      	"Main"
		    zoom       	100
		    max_height 	28350
		    max_width  	21600
		    origin_x   	0
		    origin_y   	0
		    items      	(list diagram_item_list
			(object ClassView "Class" "Logical View::MDProcess::ConfluencePlugins::SearchHighLightSupport::SearchHighLightUtil" @88
			    ShowCompartmentStereotypes 	TRUE
			    IncludeAttribute 	TRUE
			    IncludeOperation 	TRUE
			    ShowOperationSignature 	TRUE
			    location   	(429, 579)
			    font       	(object Font
				size       	10
				face       	"Arial"
				charSet    	204
				bold       	FALSE
				italics    	FALSE
				underline  	FALSE
				strike     	FALSE
				color      	0
				default_color 	TRUE)
			    label      	(object ItemLabel
				Parent_View 	@88
				location   	(163, 520)
				fill_color 	13434879
				nlines     	1
				max_width  	532
				justify    	0
				label      	"SearchHighLightUtil")
			    stereotype 	(object ItemLabel
				Parent_View 	@88
				location   	(163, 470)
				fill_color 	13434879
				anchor     	10
				nlines     	1
				max_width  	532
				justify    	0
				label      	"<<CVelocityContextPlugin>>")
			    icon_style 	"Label"
			    fill_color 	15448575
			    quidu      	"45D9C55603C8"
			    width      	550
			    height     	242
			    annotation 	8
			    autoResize 	TRUE)
			(object NoteView @89
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"LinkedItemGuid"
				    value      	"45D9C55603C8"))
			    location   	(1149, 582)
			    font       	(object Font
				size       	8
				face       	"Arial"
				charSet    	204
				bold       	FALSE
				italics    	FALSE
				underline  	FALSE
				strike     	FALSE
				color      	0
				default_color 	TRUE)
			    label      	(object ItemLabel
				Parent_View 	@89
				location   	(852, 520)
				fill_color 	13434879
				nlines     	3
				max_width  	558
				justify    	1
				label      	"{context-key:=garSearchHighLightUtil}")
			    line_color 	3342489
			    fill_color 	13434879
			    width      	618
			    height     	137)
			(object AttachView "" @90
			    font       	(object Font
				size       	10
				face       	"Arial"
				charSet    	204
				bold       	FALSE
				italics    	FALSE
				underline  	FALSE
				strike     	FALSE
				color      	0
				default_color 	TRUE)
			    stereotype 	TRUE
			    line_color 	3342489
			    client     	@89
			    supplier   	@88
			    vertices   	(list Points
				(839, 580)
				(704, 579))
			    line_style 	0)))))
	(object Class_Category "ArchiveCommentSupport"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"name"
		    value      	"Garant Archive Comment Support")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"vendor name"
		    value      	"ООО НПП 'Гарант-Сервис'")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"vendor url"
		    value      	"www.garant.ru")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"NESTED GENERATED FILES (java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/ConfluencePlugins/ArchiveCommentSupport/ArchiveCommentAction.java::45F6792903A9,w:/MDProcess/java/src/java/ru/garant/MDProcess/ConfluencePlugins/ArchiveCommentSupport/ArchiveCommentVelocityContextPlugin.java::45F9161F029F"))
	    quid       	"45F677DC0290"
	    documentation 	"Библиотека плагина поддержки архивирования комментариев."
	    stereotype 	"CPluginsPackage"
	    visible_categories 	(list visibility_relationship_list
		(object Visibility_Relationship
		    quid       	"45F681B0030D"
		    supplier   	"Logical View::external::JavaConfluence::ConfluenceClassPack"
		    quidu      	"45DAC0AA0232")
		(object Visibility_Relationship
		    quid       	"45FE965F0023"
		    supplier   	"Logical View::MDProcess::Описание MDKnow::Работа с обсуждениями"
		    quidu      	"4609112A005A"))
	    exportControl 	"Public"
	    logical_models 	(list unit_reference_list
		(object Class "ArchiveCommentAction"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"SELF GENERATED FILE (java)"
			    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/ConfluencePlugins/ArchiveCommentSupport/ArchiveCommentAction.java")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*45F6792903A9_CUSTOM_IMPORT*"
			    value      	"//#UC START# *45F6792903A9_CUSTOM_IMPORT*¤import com.atlassian.confluence.core.ContentEntityObject;¤import com.atlassian.confluence.labels.LabelManager;¤import com.atlassian.confluence.labels.Label;¤import com.atlassian.confluence.labels.ParsedLabelName;¤import com.atlassian.confluence.pages.Comment;¤import com.atlassian.confluence.pages.CommentManager;¤¤import java.util.List;¤//#UC END# *45F6792903A9_CUSTOM_IMPORT*")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*45F6792903A9_CUSTOM_CLASS_DEFINITION*"
			    value      	"//#UC START# *45F6792903A9_CUSTOM_CLASS_DEFINITION*¤//#UC END# *45F6792903A9_CUSTOM_CLASS_DEFINITION*")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*45F6792903A9_CUSTOM_OPERATION_DEFENITION*"
			    value      	(value Text 
|//#UC START# *45F6792903A9_CUSTOM_OPERATION_DEFENITION*¤	//#UC END# *45F6792903A9_CUSTOM_OPERATION_DEFENITION*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*45F6792903A9_ACTION_NAME*"
			    value      	(value Text 
|//#UC START# *45F6792903A9_ACTION_NAME*¤		return new String (getClass ().getName ());¤		//#UC END# *45F6792903A9_ACTION_NAME*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*45F6792903A9_CUSTOM_METHODS_AND_DATA*"
			    value      	(value Text 
|//#UC START# *45F6792903A9_CUSTOM_METHODS_AND_DATA*¤	public static final String ARCHIVE_COMMNET_LABEL = "archivecomment";¤¤	private LabelManager labelManager = null;¤	private CommentManager commentManager = null;¤¤	private long commentId = 0L;¤¤	static public Label findLabel (ContentEntityObject object, String labelName) {¤		List list = object.getLabels ();¤		final int size = list.size ();¤		for (int i = 0; i < size; ++i) {¤			Label label = (Label) list.get (i);¤			if (label.getRealTitle ().compareTo (labelName) == 0) {¤				return label;¤			}¤		}¤		return null;¤	}¤	static public void addLabelByName (LabelManager labelManager, String labelName, ContentEntityObject entity) {¤		Label label = findLabel (entity, labelName);¤		if (label == null) {¤			ParsedLabelName pln = new ParsedLabelName (labelName);¤			pln.addLabel(entity, labelManager);¤		}¤	}¤¤	static public void archiveComment (LabelManager labelManager, Comment comment) {¤		addLabelByName (labelManager, ARCHIVE_COMMNET_LABEL, comment);¤	}¤¤	static private void archive_comment (LabelManager labelManager, Comment comment) {¤		archiveComment (labelManager, comment);¤		List list = comment.getChildren ();¤		final int size = list.size ();¤		for (int i = 0; i < size; ++i) {¤			Comment iComment = (Comment)list.get(i);¤			archive_comment (labelManager, iComment);¤		}¤	}¤¤	static private void unarchive_comment (LabelManager labelManager, Comment comment) {¤		Label label = findLabel (comment, ARCHIVE_COMMNET_LABEL);¤		if (label != null) {¤			labelManager.removeLabel (comment, label);¤		}¤		List list = comment.getChildren ();¤		final int size = list.size ();¤		for (int i = 0; i < size; ++i) {¤			Comment iComment = (Comment)list.get (i);¤			unarchive_comment (labelManager, iComment);¤		}¤	}¤¤	public String toArchive () throws Exception {¤		try {¤			if (isCanceled () == true) {¤				return CANCEL;¤			}¤			Comment coment = this.commentManager.getComment(this.commentId);¤			archive_comment (this.labelManager, coment);¤		    return SUCCESS;¤		} catch (Exception e) {¤			System.err.println ("ArchiveCommentAction::toArchive: Exception '" + e.getMessage () + "'");¤			return ERROR;¤		}¤	}¤	public String fromArchive () throws Exception {¤		try {¤			if (isCanceled () == true) {¤				return CANCEL;¤			}¤			Comment coment = this.commentManager.getComment(this.commentId);¤			unarchive_comment (this.labelManager, coment);¤		    return SUCCESS;¤		} catch (Exception e) {¤			System.err.println ("ArchiveCommentAction::fromArchive: Exception '" + e.getMessage () + "'");¤			return ERROR;¤		}¤	}¤¤	public void setCommentId (long commentId) {¤		this.commentId = commentId;¤	}¤	public void setLabelManager (LabelManager labelManager) {¤		this.labelManager = labelManager;¤	}¤	public void setCommentManager (CommentManager commentManager) {¤		this.commentManager = commentManager;¤	}¤	//#UC END# *45F6792903A9_CUSTOM_METHODS_AND_DATA*
			    ))
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"need UC"
			    value      	"true"))
		    quid       	"45F6792903A9"
		    stereotype 	"CActionPlugin"
		    superclasses 	(list inheritance_relationship_list
			(object Inheritance_Relationship
			    quid       	"45F6818702EE"
			    supplier   	"Logical View::external::JavaConfluence::ConfluenceClassPack::AbstractPageAction"
			    quidu      	"45F680FC0138"))
		    language   	"MDA Generator")
		(object Class "ArchiveCommentXWorkPlugin"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false"))
		    quid       	"45F67ABF038A"
		    stereotype 	"CXWorkPlugin"
		    language   	"MDA Generator"
		    nestedClasses 	(list nestedClasses
			(object Class "ArchiveCommentXPackage"
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"AbstarctOperation"
				    value      	"regular")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"IsNative"
				    value      	"false")
				(object Attribute
				    tool       	"MDA Generator User Properties"
				    name       	"need UC"
				    value      	"true")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"output.xml:*45F67C1B02FD_PACKAGE_CONTENT*"
				    value      	(value Text 
|<!--UC_BEGIN*45F67C1B02FD_PACKAGE_CONTENT*-->¤			<default-interceptor-ref name="validatingStack"/>¤        		<global-results>¤    				<result name="pagenotfound" type="dispatcher">/pages/pagenotfound.action</result>¤	        		<result name="pagenotpermitted" type="chain">¤            			<param name="actionName">pagenotpermitted</param>¤        			</result>¤    			</global-results>¤¤			<action name="to_archive" class="ru.garant.MDProcess.ConfluencePlugins.ArchiveCommentSupport.ArchiveCommentAction" method="toArchive">¤	                    <result name="error" type="velocity">/removedescendants.vm</result>¤		            <result name="input" type="velocity">/removedescendants.vm</result>¤            	            <result name="cancel" type="redirect">${@com.atlassian.confluence.util.GeneralUtil@customGetPageUrl(page)}showComments=true</result>¤			    <result name="success" type="redirect">${@com.atlassian.confluence.util.GeneralUtil@customGetPageUrl(page)}showComments=true</result>¤        	        </action>¤¤        	        <action name="from_archive" class="ru.garant.MDProcess.ConfluencePlugins.ArchiveCommentSupport.ArchiveCommentAction" method="fromArchive">¤	                    <result name="error" type="velocity">/removedescendants.vm</result>¤		            <result name="input" type="velocity">/removedescendants.vm</result>¤            	            <result name="cancel" type="redirect">${@com.atlassian.confluence.util.GeneralUtil@customGetPageUrl(page)}showComments=true</result>¤			    <result name="success" type="redirect">${@com.atlassian.confluence.util.GeneralUtil@customGetPageUrl(page)}showComments=true</result>¤        	        </action>¤¤			<action name="pagenotfound" class="com.atlassian.confluence.pages.actions.PageNotFoundAction">¤				<result name="success" type="velocity">/pages/alternativepages.vm</result>¤			</action>¤¤			<action name="pagenotpermitted" class="com.atlassian.confluence.pages.actions.PageNotPermittedAction">¤				<result name="success" type="velocity">/pages/pagenotpermitted.vm</result>¤				<result name="login" type="redirect">${loginUrl}</result>¤			</action>¤			<!--UC_END*45F67C1B02FD_PACKAGE_CONTENT*-->
				    )))
			    quid       	"45F67C1B02FD"
			    stereotype 	"XPackage")))
		(object Class "ArchiveCommentVelocityContextPlugin"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"context-key"
			    value      	"garArchiveComment")
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"need UC"
			    value      	"true")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"SELF GENERATED FILE (java)"
			    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/ConfluencePlugins/ArchiveCommentSupport/ArchiveCommentVelocityContextPlugin.java")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*45F9161F029F_CUSTOM_IMPORT*"
			    value      	"//#UC START# *45F9161F029F_CUSTOM_IMPORT*¤import com.atlassian.confluence.pages.AbstractPage;¤import com.atlassian.confluence.pages.CommentManager;¤import com.atlassian.confluence.pages.Comment;¤import java.util.List;¤//#UC END# *45F9161F029F_CUSTOM_IMPORT*")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*45F9161F029F_CUSTOM_CLASS_DEFINITION*"
			    value      	"//#UC START# *45F9161F029F_CUSTOM_CLASS_DEFINITION*¤//#UC END# *45F9161F029F_CUSTOM_CLASS_DEFINITION*")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*45F9161F029F_DEFAULT_CONSTRUCTOR*"
			    value      	(value Text 
|//#UC START# *45F9161F029F_DEFAULT_CONSTRUCTOR*¤		//#UC END# *45F9161F029F_DEFAULT_CONSTRUCTOR*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*45F9161F029F_CUSTOM_METHODS_AND_DATA*"
			    value      	(value Text 
|//#UC START# *45F9161F029F_CUSTOM_METHODS_AND_DATA*¤	public int getCount (AbstractPage page) {¤		if (page == null) {¤			return 0;¤		}¤		int count = 0;¤		List list = page.getComments ();¤		for (int i = 0; i < list.size (); ++i) {¤			Comment comment = (Comment)list.get (i);¤			if (isArchiveComment (comment) == 1) {¤				++count;¤			}¤		}¤		return count;¤	}¤¤	public int isArchiveComment (Comment comment) {¤		if (ArchiveCommentAction.findLabel (comment, ArchiveCommentAction.ARCHIVE_COMMNET_LABEL) != null) {¤			return 1;¤		} else {¤			return 0;¤		}¤	}¤¤	public int isArchiveCommentId (long commentId) {¤		Comment comment = this.commentManager.getComment (commentId);¤		if ((comment != null) && (isArchiveComment (comment) == 1)) {¤			return 1;¤		} else {¤			return 0;¤		}¤	}¤¤	private CommentManager commentManager = null;¤¤	public void setCommentManager (CommentManager commentManager) {¤		this.commentManager = commentManager;¤	}¤	//#UC END# *45F9161F029F_CUSTOM_METHODS_AND_DATA*
			    )))
		    quid       	"45F9161F029F"
		    documentation 	"Создает объект, доступный в шаблонах, для работы с архивными комментариями."
		    stereotype 	"CVelocityContextPlugin"
		    operations 	(list Operations
			(object Operation "ctor"
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"AbstarctOperation"
				    value      	"regular")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"IsNative"
				    value      	"false")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"java:*460BA80900CB_BODY*"
				    value      	(value Text 
|//#UC START# *460BA80900CB_BODY*¤		//#UC END# *460BA80900CB_BODY*
				    )))
			    quid       	"460BA80900CB"
			    stereotype 	"ctor"
			    concurrency 	"Sequential"
			    opExportControl 	"Public"
			    uid        	0))
		    language   	"MDA Generator"))
	    logical_presentations 	(list unit_reference_list
		(object ClassDiagram "Main"
		    quid       	"45F677EA00BB"
		    title      	"Main"
		    zoom       	100
		    max_height 	28350
		    max_width  	21600
		    origin_x   	0
		    origin_y   	0
		    items      	(list diagram_item_list
			(object ClassView "Class" "Logical View::MDProcess::ConfluencePlugins::ArchiveCommentSupport::ArchiveCommentAction" @91
			    ShowCompartmentStereotypes 	TRUE
			    IncludeAttribute 	TRUE
			    IncludeOperation 	TRUE
			    ShowOperationSignature 	TRUE
			    location   	(336, 141)
			    font       	(object Font
				size       	10
				face       	"Arial"
				charSet    	204
				bold       	FALSE
				italics    	FALSE
				underline  	FALSE
				strike     	FALSE
				color      	0
				default_color 	TRUE)
			    label      	(object ItemLabel
				Parent_View 	@91
				location   	(110, 111)
				fill_color 	13434879
				nlines     	1
				max_width  	452
				justify    	0
				label      	"ArchiveCommentAction")
			    stereotype 	(object ItemLabel
				Parent_View 	@91
				location   	(110, 61)
				fill_color 	13434879
				anchor     	10
				nlines     	1
				max_width  	452
				justify    	0
				label      	"<<CActionPlugin>>")
			    icon_style 	"Label"
			    fill_color 	15448575
			    quidu      	"45F6792903A9"
			    width      	470
			    height     	184
			    annotation 	8
			    autoResize 	TRUE)
			(object ClassView "Class" "Logical View::MDProcess::ConfluencePlugins::ArchiveCommentSupport::ArchiveCommentXWorkPlugin" @92
			    ShowCompartmentStereotypes 	TRUE
			    IncludeAttribute 	TRUE
			    IncludeOperation 	TRUE
			    ShowOperationSignature 	TRUE
			    location   	(402, 348)
			    font       	(object Font
				size       	10
				face       	"Arial"
				charSet    	204
				bold       	FALSE
				italics    	FALSE
				underline  	FALSE
				strike     	FALSE
				color      	0
				default_color 	TRUE)
			    label      	(object ItemLabel
				Parent_View 	@92
				location   	(111, 318)
				fill_color 	13434879
				nlines     	1
				max_width  	582
				justify    	0
				label      	"ArchiveCommentXWorkPlugin")
			    stereotype 	(object ItemLabel
				Parent_View 	@92
				location   	(111, 268)
				fill_color 	13434879
				anchor     	10
				nlines     	1
				max_width  	582
				justify    	0
				label      	"<<CXWorkPlugin>>")
			    icon_style 	"Label"
			    fill_color 	15448575
			    quidu      	"45F67ABF038A"
			    width      	600
			    height     	184
			    annotation 	8
			    autoResize 	TRUE)
			(object ClassView "Class" "Logical View::MDProcess::ConfluencePlugins::ArchiveCommentSupport::ArchiveCommentXWorkPlugin::ArchiveCommentXPackage" @93
			    ShowCompartmentStereotypes 	TRUE
			    IncludeAttribute 	TRUE
			    IncludeOperation 	TRUE
			    ShowOperationSignature 	TRUE
			    location   	(387, 591)
			    font       	(object Font
				size       	10
				face       	"Arial"
				charSet    	204
				bold       	FALSE
				italics    	FALSE
				underline  	FALSE
				strike     	FALSE
				color      	0
				default_color 	TRUE)
			    label      	(object ItemLabel
				Parent_View 	@93
				location   	(119, 538)
				fill_color 	13434879
				nlines     	1
				max_width  	536
				justify    	0
				label      	"ArchiveCommentXPackage")
			    stereotype 	(object ItemLabel
				Parent_View 	@93
				location   	(119, 488)
				fill_color 	13434879
				anchor     	10
				nlines     	1
				max_width  	536
				justify    	0
				label      	"<<XPackage>>")
			    icon_style 	"Label"
			    fill_color 	15448575
			    quidu      	"45F67C1B02FD"
			    width      	554
			    height     	230
			    annotation 	8
			    autoResize 	TRUE)
			(object ClassView "Class" "Logical View::external::JavaConfluence::ConfluenceClassPack::AbstractPageAction" @94
			    ShowCompartmentStereotypes 	TRUE
			    SuppressAttribute 	TRUE
			    SuppressOperation 	TRUE
			    IncludeAttribute 	TRUE
			    IncludeOperation 	TRUE
			    ShowOperationSignature 	TRUE
			    location   	(1089, 198)
			    font       	(object Font
				size       	10
				face       	"Arial"
				charSet    	204
				bold       	FALSE
				italics    	FALSE
				underline  	FALSE
				strike     	FALSE
				color      	658120
				default_color 	FALSE)
			    label      	(object ItemLabel
				Parent_View 	@94
				location   	(885, 170)
				fill_color 	13434879
				nlines     	1
				max_width  	408
				justify    	0
				label      	"AbstractPageAction")
			    stereotype 	(object ItemLabel
				Parent_View 	@94
				location   	(885, 120)
				fill_color 	13434879
				anchor     	10
				nlines     	1
				max_width  	408
				justify    	0
				label      	"<<SimpleClass>>")
			    icon_style 	"Label"
			    line_color 	14803425
			    fill_color 	14803425
			    quidu      	"45F680FC0138"
			    width      	426
			    height     	180
			    annotation 	8
			    autoResize 	TRUE)
			(object InheritView "" @95
			    font       	(object Font
				size       	10
				face       	"Arial"
				charSet    	204
				bold       	FALSE
				italics    	FALSE
				underline  	FALSE
				strike     	FALSE
				color      	0
				default_color 	TRUE)
			    stereotype 	TRUE
			    line_color 	3947680
			    quidu      	"45F6818702EE"
			    client     	@91
			    supplier   	@94
			    vertices   	(list Points
				(571, 158)
				(875, 180))
			    line_style 	0)
			(object ClassView "Class" "Logical View::MDProcess::ConfluencePlugins::ArchiveCommentSupport::ArchiveCommentVelocityContextPlugin" @96
			    ShowCompartmentStereotypes 	TRUE
			    IncludeAttribute 	TRUE
			    IncludeOperation 	TRUE
			    ShowOperationSignature 	TRUE
			    location   	(492, 840)
			    font       	(object Font
				size       	10
				face       	"Arial"
				charSet    	204
				bold       	FALSE
				italics    	FALSE
				underline  	FALSE
				strike     	FALSE
				color      	0
				default_color 	TRUE)
			    label      	(object ItemLabel
				Parent_View 	@96
				location   	(124, 781)
				fill_color 	13434879
				nlines     	1
				max_width  	736
				justify    	0
				label      	"ArchiveCommentVelocityContextPlugin")
			    stereotype 	(object ItemLabel
				Parent_View 	@96
				location   	(124, 731)
				fill_color 	13434879
				anchor     	10
				nlines     	1
				max_width  	736
				justify    	0
				label      	"<<CVelocityContextPlugin>>")
			    icon_style 	"Label"
			    fill_color 	15448575
			    quidu      	"45F9161F029F"
			    width      	754
			    height     	242
			    annotation 	8
			    autoResize 	TRUE)
			(object NoteView @97
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"LinkedItemGuid"
				    value      	"45F9161F029F"))
			    location   	(624, 1089)
			    font       	(object Font
				size       	8
				face       	"Arial"
				charSet    	204
				bold       	FALSE
				italics    	FALSE
				underline  	FALSE
				strike     	FALSE
				color      	0
				default_color 	TRUE)
			    label      	(object ItemLabel
				Parent_View 	@97
				location   	(355, 1027)
				fill_color 	13434879
				nlines     	3
				max_width  	502
				justify    	1
				label      	"{context-key:=garArchiveComment}")
			    line_color 	3342489
			    fill_color 	13434879
			    width      	562
			    height     	137)
			(object AttachView "" @98
			    font       	(object Font
				size       	10
				face       	"Arial"
				charSet    	204
				bold       	FALSE
				italics    	FALSE
				underline  	FALSE
				strike     	FALSE
				color      	0
				default_color 	TRUE)
			    stereotype 	TRUE
			    line_color 	3342489
			    client     	@97
			    supplier   	@96
			    vertices   	(list Points
				(587, 1020)
				(555, 961))
			    line_style 	0)))))
	(object Class_Category "SessionSupport"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"name"
		    value      	"Garant Session Support")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"vendor name"
		    value      	"ООО НПП 'Гарант-Сервис'")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"vendor url"
		    value      	"www.garant.ru")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"NESTED GENERATED FILES (java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/ConfluencePlugins/SessionSupport/SessionComponentPlugin.java::45F7DF6B029F,w:/MDProcess/java/src/java/ru/garant/MDProcess/ConfluencePlugins/SessionSupport/SessionListenerPlugin.java::45F7C27C000F,w:/MDProcess/java/src/java/ru/garant/MDProcess/ConfluencePlugins/SessionSupport/SessionVelocityContextPlugin.java::45F6AECB0261"))
	    quid       	"45F6AE680177"
	    documentation 	"Библиотека плагина поддержки доступа к хранилищу в текущей сессии, для текущего пользователя."
	    stereotype 	"CPluginsPackage"
	    visible_categories 	(list visibility_relationship_list
		(object Visibility_Relationship
		    quid       	"46139CB3037A"
		    supplier   	"Logical View::MDProcess::Описание MDKnow::Работа с контентом"
		    quidu      	"460912ED03D5"))
	    exportControl 	"Public"
	    logical_models 	(list unit_reference_list
		(object Class "SessionVelocityContextPlugin"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"context-key"
			    value      	"garSession")
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"need UC"
			    value      	"true")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"SELF GENERATED FILE (java)"
			    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/ConfluencePlugins/SessionSupport/SessionVelocityContextPlugin.java")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*45F6AECB0261_CUSTOM_IMPORT*"
			    value      	"//#UC START# *45F6AECB0261_CUSTOM_IMPORT*¤import com.atlassian.spring.container.ContainerManager;¤¤import com.atlassian.confluence.user.AuthenticatedUserThreadLocal;¤import com.atlassian.user.User;¤//#UC END# *45F6AECB0261_CUSTOM_IMPORT*")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*45F6AECB0261_CUSTOM_CLASS_DEFINITION*"
			    value      	"//#UC START# *45F6AECB0261_CUSTOM_CLASS_DEFINITION*¤//#UC END# *45F6AECB0261_CUSTOM_CLASS_DEFINITION*")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*45F6AECB0261_CUSTOM_METHODS_AND_DATA*"
			    value      	(value Text 
|//#UC START# *45F6AECB0261_CUSTOM_METHODS_AND_DATA*¤	private SessionComponentPlugin session = null;¤¤	private SessionComponentPlugin getSessionManager () {¤		if (this.session == null) {¤			this.session =¤				(SessionComponentPlugin) ContainerManager.getInstance ().getContainerContext ().getComponent (¤						"ru.garant.MDProcess.ConfluencePlugins.SessionSupport.SessionComponentPlugin"¤				);¤		}¤		if (this.session == null) {¤			System.err.println ("SessionVelocityContextPlugin::getSessionManager: SessionComponentPlugin is NULL.");¤		}¤		return this.session;¤	}¤¤	public Object get (String key) {¤		User user = AuthenticatedUserThreadLocal.getUser ();¤		if (user != null) { // if the user was not logged¤			return getSessionManager ().get (user.getName (), key);¤		}¤		return null;¤	}¤¤	public Object set (String key, Object value) {¤		User user = AuthenticatedUserThreadLocal.getUser ();¤		if (user != null) { // if the user was not logged¤			return getSessionManager ().put (user.getName (), key, value);¤		}¤		return null;¤	}¤		//#UC END# *45F6AECB0261_CUSTOM_METHODS_AND_DATA*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*45F6AECB0261_DEFAULT_CONSTRUCTOR*"
			    value      	(value Text 
|//#UC START# *45F6AECB0261_DEFAULT_CONSTRUCTOR*¤			//#UC END# *45F6AECB0261_DEFAULT_CONSTRUCTOR*
			    )))
		    quid       	"45F6AECB0261"
		    documentation 	"Объект сессии."
		    stereotype 	"CVelocityContextPlugin"
		    operations 	(list Operations
			(object Operation "ctor"
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"AbstarctOperation"
				    value      	"regular")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"IsNative"
				    value      	"false")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"java:*460BA7DD0251_BODY*"
				    value      	(value Text 
|//#UC START# *460BA7DD0251_BODY*¤		//#UC END# *460BA7DD0251_BODY*
				    )))
			    quid       	"460BA7DD0251"
			    stereotype 	"ctor"
			    concurrency 	"Sequential"
			    opExportControl 	"Public"
			    uid        	0))
		    language   	"MDA Generator")
		(object Class "SessionListenerPlugin"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"SELF GENERATED FILE (java)"
			    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/ConfluencePlugins/SessionSupport/SessionListenerPlugin.java")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*45F7C27C000F_CUSTOM_IMPORT*"
			    value      	"//#UC START# *45F7C27C000F_CUSTOM_IMPORT*¤import com.atlassian.confluence.event.events.security.LogoutEvent;¤import com.atlassian.spring.container.ContainerManager;¤//#UC END# *45F7C27C000F_CUSTOM_IMPORT*")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*45F7C27C000F_CUSTOM_CLASS_DEFINITION*"
			    value      	"//#UC START# *45F7C27C000F_CUSTOM_CLASS_DEFINITION*¤//#UC END# *45F7C27C000F_CUSTOM_CLASS_DEFINITION*")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*45F7C27C000F_CONTENT*"
			    value      	(value Text 
|//#UC START# *45F7C27C000F_CONTENT*¤		LogoutEvent.class¤		//#UC END# *45F7C27C000F_CONTENT*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*45F7C27C000F_CUSTOM_OPERATION_DEFENITION*"
			    value      	(value Text 
|//#UC START# *45F7C27C000F_CUSTOM_OPERATION_DEFENITION*¤	//#UC END# *45F7C27C000F_CUSTOM_OPERATION_DEFENITION*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*45F7C27C000F_GETHANDLEDEVENTCLASSES_IMPLEMETATION*"
			    value      	(value Text 
|//#UC START# *45F7C27C000F_GETHANDLEDEVENTCLASSES_IMPLEMETATION*¤		return handledClasses;¤		//#UC END# *45F7C27C000F_GETHANDLEDEVENTCLASSES_IMPLEMETATION*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*45F7C27C000F_HANDLEEVENT_IMPLEMETATION*"
			    value      	(value Text 
|//#UC START# *45F7C27C000F_HANDLEEVENT_IMPLEMETATION*¤		try {¤			if (event instanceof LogoutEvent) {¤				LogoutEvent logoutEvent  = (LogoutEvent)event;¤				getSessionManager ().removeUserSession (logoutEvent.getUsername ());¤			} else {¤				System.err.println (¤					" SessionListenerPlugin::handleEvent: ERROR! Event type is unknown '"¤					+ event.getClass ().getName () + "'"¤				);¤			}¤		} catch (Exception e) {¤			System.err.println ("SessionListenerPlugin::handleEvent: ERROR: " + e);¤		}¤		//#UC END# *45F7C27C000F_HANDLEEVENT_IMPLEMETATION*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*45F7C27C000F_CUSTOM_ABSTRACT*"
			    value      	(value Text 
|//#UC START# *45F7C27C000F_CUSTOM_ABSTRACT*¤	private SessionComponentPlugin session = null;¤¤	private SessionComponentPlugin getSessionManager () {¤		if (this.session == null) {¤			this.session =¤				(SessionComponentPlugin) ContainerManager.getInstance ().getContainerContext ().getComponent (¤						"ru.garant.ConfluencePlugins.SessionSupport.SessionComponentPlugin"¤				);¤		}¤		if (this.session == null) {¤			System.err.println ("SessionListenerPlugin::getSessionManager: SessionComponentPlugin is NULL.");¤		}¤		return this.session;¤	}¤	//#UC END# *45F7C27C000F_CUSTOM_ABSTRACT*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*45F7C27C000F_CUSTOM_METHODS_AND_DATA*"
			    value      	(value Text 
|//#UC START# *45F7C27C000F_CUSTOM_METHODS_AND_DATA*¤	//#UC END# *45F7C27C000F_CUSTOM_METHODS_AND_DATA*
			    )))
		    quid       	"45F7C27C000F"
		    documentation 	"Слушает события логаута и удаляет сессии этих пользователей."
		    stereotype 	"CListenerPlugin"
		    operations 	(list Operations
			(object Operation "getSessionManager"
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"AbstarctOperation"
				    value      	"regular")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"IsNative"
				    value      	"false")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"java:*45F8F1E90119_*"
				    value      	(value Text 
|//#UC START# *45F8F1E90119_*¤		if (this.m_session == null) {¤			this.m_session =¤				(SessionComponentPlugin) ContainerManager.getInstance ().getContainerContext ().getComponent (¤						"ru.garant.ConfluencePlugins.SessionSupport.SessionComponentPlugin"¤				);¤		}¤		if (this.m_session == null) {¤			System.err.println ("SessionListenerPlugin::getSessionManager: SessionComponentPlugin is NULL.");¤		}¤		return this.m_session;¤		//#UC END# *45F8F1E90119_*
				    ))
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"java:*45F8F1E90119_45F7DF6B029F*"
				    value      	(value Text 
|//#UC START# *45F8F1E90119_45F7DF6B029F*¤		if (this.m_session == null) {¤			this.m_session =¤				(SessionComponentPlugin) ContainerManager.getInstance ().getContainerContext ().getComponent (¤						"ru.garant.ConfluencePlugins.SessionSupport.SessionComponentPlugin"¤				);¤		}¤		if (this.m_session == null) {¤			System.err.println ("SessionListenerPlugin::getSessionManager: SessionComponentPlugin is NULL.");¤		}¤		return this.m_session;¤		//#UC END# *45F8F1E90119_45F7DF6B029F*
				    ))
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"java:*45F8F1E90119*"
				    value      	(value Text 
|//#UC START# *45F8F1E90119*¤		if (this.session == null) {¤			this.session =¤				(SessionComponentPlugin) ContainerManager.getInstance ().getContainerContext ().getComponent (¤						"ru.garant.MDProcess.ConfluencePlugins.SessionSupport.SessionComponentPlugin"¤				);¤		}¤		if (this.session == null) {¤			System.err.println ("SessionListenerPlugin::getSessionManager: SessionComponentPlugin is NULL.");¤		}¤		return this.session;¤		//#UC END# *45F8F1E90119*
				    )))
			    quid       	"45F8F1E90119"
			    stereotype 	"chg"
			    result     	"SessionComponentPlugin"
			    concurrency 	"Sequential"
			    opExportControl 	"Private"
			    uid        	0
			    quidu      	"45F7DF6B029F"))
		    class_attributes 	(list class_attribute_list
			(object ClassAttribute "session"
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"AbstarctOperation"
				    value      	"regular")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ValueInitialized"
				    value      	"true")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"IsNative"
				    value      	"false"))
			    quid       	"45F8F1FC03D8"
			    type       	"SessionComponentPlugin"
			    quidu      	"45F7DF6B029F"
			    initv      	"null"
			    Containment 	"By Value"))
		    language   	"MDA Generator")
		(object Class "SessionComponentPlugin"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"SELF GENERATED FILE (java)"
			    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/ConfluencePlugins/SessionSupport/SessionComponentPlugin.java")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*45F7DF6B029F_CUSTOM_IMPORT*"
			    value      	"//#UC START# *45F7DF6B029F_CUSTOM_IMPORT*¤import java.util.Map;¤import java.util.HashMap;¤import java.util.Collections;¤//#UC END# *45F7DF6B029F_CUSTOM_IMPORT*")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*45F7DF6B029F_CUSTOM_CLASS_DEFINITION*"
			    value      	"//#UC START# *45F7DF6B029F_CUSTOM_CLASS_DEFINITION*¤//#UC END# *45F7DF6B029F_CUSTOM_CLASS_DEFINITION*")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*45F7DF6B029F_CUSTOM_METHODS_AND_DATA*"
			    value      	(value Text 
|//#UC START# *45F7DF6B029F_CUSTOM_METHODS_AND_DATA*¤	private Map<String, Map<String, Object>> map = null;¤¤	public SessionComponentPlugin () {¤		this.map = Collections.synchronizedMap (new HashMap<String, Map<String, Object>> ());¤	}¤¤	public void removeUserSession (String userName) {¤		this.map.remove(userName);¤	}¤¤	public Object get (String userName, String key) {¤		Map<String, Object> session4user = this.map.get (userName);¤		if (session4user == null) {¤			return null;¤		}¤		return session4user.get (key);¤	}¤¤	public Object put (String userName, String key, Object value) {¤		Map<String, Object> session4user = this.map.get (userName);¤		if (session4user == null) {¤			session4user = Collections.synchronizedMap (new HashMap<String, Object> ());¤			this.map.put (userName, session4user);¤		}¤		return session4user.put (key, value);¤	}¤	//#UC END# *45F7DF6B029F_CUSTOM_METHODS_AND_DATA*
			    )))
		    quid       	"45F7DF6B029F"
		    documentation 	"Реализует управление сессиями."
		    stereotype 	"CComponentPlugin"
		    language   	"MDA Generator"))
	    logical_presentations 	(list unit_reference_list
		(object ClassDiagram "Main"
		    quid       	"45F6AE7F03C8"
		    title      	"Main"
		    zoom       	100
		    max_height 	28350
		    max_width  	21600
		    origin_x   	0
		    origin_y   	0
		    items      	(list diagram_item_list
			(object ClassView "Class" "Logical View::MDProcess::ConfluencePlugins::SessionSupport::SessionVelocityContextPlugin" @99
			    ShowCompartmentStereotypes 	TRUE
			    IncludeAttribute 	TRUE
			    IncludeOperation 	TRUE
			    ShowOperationSignature 	TRUE
			    location   	(417, 210)
			    font       	(object Font
				size       	10
				face       	"Arial"
				charSet    	204
				bold       	FALSE
				italics    	FALSE
				underline  	FALSE
				strike     	FALSE
				color      	0
				default_color 	TRUE)
			    label      	(object ItemLabel
				Parent_View 	@99
				location   	(121, 151)
				fill_color 	13434879
				nlines     	1
				max_width  	592
				justify    	0
				label      	"SessionVelocityContextPlugin")
			    stereotype 	(object ItemLabel
				Parent_View 	@99
				location   	(121, 101)
				fill_color 	13434879
				anchor     	10
				nlines     	1
				max_width  	592
				justify    	0
				label      	"<<CVelocityContextPlugin>>")
			    icon_style 	"Label"
			    fill_color 	15448575
			    quidu      	"45F6AECB0261"
			    width      	610
			    height     	242
			    annotation 	8
			    autoResize 	TRUE)
			(object NoteView @100
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"LinkedItemGuid"
				    value      	"45F6AECB0261"))
			    location   	(1047, 192)
			    font       	(object Font
				size       	8
				face       	"Arial"
				charSet    	204
				bold       	FALSE
				italics    	FALSE
				underline  	FALSE
				strike     	FALSE
				color      	0
				default_color 	TRUE)
			    label      	(object ItemLabel
				Parent_View 	@100
				location   	(837, 133)
				fill_color 	13434879
				nlines     	2
				max_width  	384
				justify    	1
				label      	"{context-key:=garSession}")
			    line_color 	3342489
			    fill_color 	13434879
			    width      	444
			    height     	131)
			(object AttachView "" @101
			    font       	(object Font
				size       	10
				face       	"Arial"
				charSet    	204
				bold       	FALSE
				italics    	FALSE
				underline  	FALSE
				strike     	FALSE
				color      	0
				default_color 	TRUE)
			    stereotype 	TRUE
			    line_color 	3342489
			    client     	@100
			    supplier   	@99
			    vertices   	(list Points
				(824, 197)
				(722, 201))
			    line_style 	0)
			(object ClassView "Class" "Logical View::MDProcess::ConfluencePlugins::SessionSupport::SessionListenerPlugin" @102
			    ShowCompartmentStereotypes 	TRUE
			    IncludeAttribute 	TRUE
			    IncludeOperation 	TRUE
			    ShowOperationSignature 	TRUE
			    location   	(678, 543)
			    font       	(object Font
				size       	10
				face       	"Arial"
				charSet    	204
				bold       	FALSE
				italics    	FALSE
				underline  	FALSE
				strike     	FALSE
				color      	0
				default_color 	TRUE)
			    label      	(object ItemLabel
				Parent_View 	@102
				location   	(119, 459)
				fill_color 	13434879
				nlines     	1
				max_width  	1118
				justify    	0
				label      	"SessionListenerPlugin")
			    stereotype 	(object ItemLabel
				Parent_View 	@102
				location   	(119, 409)
				fill_color 	13434879
				anchor     	10
				nlines     	1
				max_width  	1118
				justify    	0
				label      	"<<CListenerPlugin>>")
			    icon_style 	"Label"
			    fill_color 	15448575
			    quidu      	"45F7C27C000F"
			    width      	1136
			    height     	292
			    annotation 	8
			    autoResize 	TRUE)
			(object ClassView "Class" "Logical View::MDProcess::ConfluencePlugins::SessionSupport::SessionComponentPlugin" @103
			    ShowCompartmentStereotypes 	TRUE
			    IncludeAttribute 	TRUE
			    IncludeOperation 	TRUE
			    ShowOperationSignature 	TRUE
			    location   	(387, 843)
			    font       	(object Font
				size       	10
				face       	"Arial"
				charSet    	204
				bold       	FALSE
				italics    	FALSE
				underline  	FALSE
				strike     	FALSE
				color      	0
				default_color 	TRUE)
			    label      	(object ItemLabel
				Parent_View 	@103
				location   	(132, 813)
				fill_color 	13434879
				nlines     	1
				max_width  	510
				justify    	0
				label      	"SessionComponentPlugin")
			    stereotype 	(object ItemLabel
				Parent_View 	@103
				location   	(132, 763)
				fill_color 	13434879
				anchor     	10
				nlines     	1
				max_width  	510
				justify    	0
				label      	"<<CComponentPlugin>>")
			    icon_style 	"Label"
			    fill_color 	15448575
			    quidu      	"45F7DF6B029F"
			    width      	528
			    height     	184
			    annotation 	8
			    autoResize 	TRUE)))))
	(object Class_Category "SearchExtractorSupport"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"name"
		    value      	"Garant Search Extractor Support")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"vendor name"
		    value      	"ООО НПП 'Гарант-Сервис'")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"vendor url"
		    value      	"www.garant.ru")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"NESTED GENERATED FILES (java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/ConfluencePlugins/SearchExtractorSupport/AuthorExtractor.java::4607CDB702FD"))
	    quid       	"4607CD6600AB"
	    stereotype 	"CPluginsPackage"
	    visible_categories 	(list visibility_relationship_list
		(object Visibility_Relationship
		    quid       	"4607CDA901D4"
		    supplier   	"Logical View::MDProcess::Описание MDKnow::Работа с обсуждениями"
		    quidu      	"4609112A005A"))
	    exportControl 	"Public"
	    logical_models 	(list unit_reference_list
		(object Class "AuthorExtractor"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"need UC"
			    value      	"true")
			(object Attribute
			    tool       	"MDA Generator User Properties"
			    name       	"priority"
			    value      	"900")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"SELF GENERATED FILE (java)"
			    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/ConfluencePlugins/SearchExtractorSupport/AuthorExtractor.java")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4607CDB702FD_CUSTOM_IMPORT*"
			    value      	"//#UC START# *4607CDB702FD_CUSTOM_IMPORT*¤import com.atlassian.confluence.core.ConfluenceEntityObject;¤//#UC END# *4607CDB702FD_CUSTOM_IMPORT*")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4607CDB702FD_CUSTOM_CLASS_DEFINITION*"
			    value      	"//#UC START# *4607CDB702FD_CUSTOM_CLASS_DEFINITION*¤//#UC END# *4607CDB702FD_CUSTOM_CLASS_DEFINITION*")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4607CDB702FD_ADD_FIELDS_IMPLEMETATION*"
			    value      	(value Text 
|//#UC START# *4607CDB702FD_ADD_FIELDS_IMPLEMETATION*¤        if (searchable instanceof ConfluenceEntityObject) {¤            extractCreator((ConfluenceEntityObject) searchable, document);¤        }¤		//#UC END# *4607CDB702FD_ADD_FIELDS_IMPLEMETATION*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"java:*4607CDB702FD_CUSTOM_METHODS_AND_DATA*"
			    value      	(value Text 
|//#UC START# *4607CDB702FD_CUSTOM_METHODS_AND_DATA*¤    private void extractCreator(ConfluenceEntityObject ceo, Document document) {¤        if (ceo.getLastModifierName() != null) {¤            document.add(new Field("author", ceo.getLastModifierName(), Field.Store.YES, Field.Index.UN_TOKENIZED));¤            return;¤    	}¤        if (ceo.getCreatorName() != null) {¤            document.add(new Field("author", ceo.getCreatorName(), Field.Store.YES, Field.Index.UN_TOKENIZED));¤            return;¤    	}¤    }¤    public AuthorExtractor() {¤    }¤	//#UC END# *4607CDB702FD_CUSTOM_METHODS_AND_DATA*
			    )))
		    quid       	"4607CDB702FD"
		    stereotype 	"CExtractorPlugin"
		    language   	"MDA Generator"))
	    logical_presentations 	(list unit_reference_list
		(object ClassDiagram "Main"
		    quid       	"4607CDB2033C"
		    title      	"Main"
		    zoom       	100
		    max_height 	28350
		    max_width  	21600
		    origin_x   	0
		    origin_y   	0
		    items      	(list diagram_item_list
			(object ClassView "Class" "Logical View::MDProcess::ConfluencePlugins::SearchExtractorSupport::AuthorExtractor" @104
			    ShowCompartmentStereotypes 	TRUE
			    IncludeAttribute 	TRUE
			    IncludeOperation 	TRUE
			    ShowOperationSignature 	TRUE
			    location   	(1050, 591)
			    font       	(object Font
				size       	10
				face       	"Arial"
				charSet    	204
				bold       	FALSE
				italics    	FALSE
				underline  	FALSE
				strike     	FALSE
				color      	0
				default_color 	TRUE)
			    label      	(object ItemLabel
				Parent_View 	@104
				location   	(845, 561)
				fill_color 	13434879
				nlines     	1
				max_width  	410
				justify    	0
				label      	"AuthorExtractor")
			    stereotype 	(object ItemLabel
				Parent_View 	@104
				location   	(845, 511)
				fill_color 	13434879
				anchor     	10
				nlines     	1
				max_width  	410
				justify    	0
				label      	"<<CExtractorPlugin>>")
			    icon_style 	"Label"
			    fill_color 	15448575
			    quidu      	"4607CDB702FD"
			    width      	428
			    height     	184
			    annotation 	8
			    autoResize 	TRUE)
			(object NoteView @105
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"LinkedItemGuid"
				    value      	"4607CDB702FD"))
			    location   	(1485, 591)
			    font       	(object Font
				size       	8
				face       	"Arial"
				charSet    	204
				bold       	FALSE
				italics    	FALSE
				underline  	FALSE
				strike     	FALSE
				color      	0
				default_color 	TRUE)
			    label      	(object ItemLabel
				Parent_View 	@105
				location   	(1347, 531)
				fill_color 	13434879
				nlines     	3
				max_width  	240
				justify    	1
				label      	"{priority:=900}")
			    line_color 	3342489
			    fill_color 	13434879
			    width      	300
			    height     	132)
			(object AttachView "" @106
			    font       	(object Font
				size       	10
				face       	"Arial"
				charSet    	204
				bold       	FALSE
				italics    	FALSE
				underline  	FALSE
				strike     	FALSE
				color      	0
				default_color 	TRUE)
			    stereotype 	TRUE
			    line_color 	3342489
			    client     	@105
			    supplier   	@104
			    vertices   	(list Points
				(1334, 591)
				(1264, 591))
			    line_style 	0)))))
	(object Class_Category "CommentsTabSupport"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Full MDP"
		    value      	"")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"name"
		    value      	"Comments Tab Actions")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"vendor name"
		    value      	"ООО НПП 'Гарант-Сервис'")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"vendor url"
		    value      	"www.garant.ru")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"NESTED GENERATED FILES (output.xml)"
		    value      	"w:/MDProcess/java/src/etc/ConfluencePlugins/viewcomments.vm::461FA960034B")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"NESTED GENERATED FILES (java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/ConfluencePlugins/CommentsTabSupport/ViewCommentsAction.java::461FA876035B"))
	    quid       	"461FA82502FD"
	    documentation 	"Библиотека плагина поддержки дополнительной вкладки комментариев."
	    stereotype 	"CPluginsPackage"
	    visible_categories 	(list visibility_relationship_list
		(object Visibility_Relationship
		    quid       	"461FACA20222"
		    supplier   	"Logical View::external::JavaConfluence::ConfluenceClassPack"
		    quidu      	"45DAC0AA0232")
		(object Visibility_Relationship
		    quid       	"4623595D0222"
		    supplier   	"Logical View::MDProcess::Описание MDKnow::Работа с контентом"
		    quidu      	"460912ED03D5"))
	    exportControl 	"Public"
	    logical_models 	(list unit_reference_list
		(object Class "ViewCommentsAction"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"SELF GENERATED FILE (java)"
			    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/ConfluencePlugins/CommentsTabSupport/ViewCommentsAction.java"))
		    quid       	"461FA876035B"
		    documentation 	"Экшен спец страницы закладки комментариев."
		    stereotype 	"CActionPlugin"
		    superclasses 	(list inheritance_relationship_list
			(object Inheritance_Relationship
			    quid       	"461FA92F007D"
			    supplier   	"Logical View::external::JavaConfluence::ConfluenceClassPack::ViewPageAction"
			    quidu      	"461FA8DD02AF"))
		    language   	"MDA Generator")
		(object Class "viewcomments"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"SELF GENERATED FILE (output.xml)"
			    value      	"w:/MDProcess/java/src/etc/ConfluencePlugins/viewcomments.vm"))
		    quid       	"461FA960034B"
		    documentation 	"Шаблон экшена закладки коментариев."
		    stereotype 	"VM"
		    language   	"MDA Generator")
		(object Class "CommentsTabXWorkPlugin"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false"))
		    quid       	"461FAA5E01E4"
		    stereotype 	"CXWorkPlugin"
		    language   	"MDA Generator"
		    nestedClasses 	(list nestedClasses
			(object Class "CommentsTabXPackage"
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"AbstarctOperation"
				    value      	"regular")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"IsNative"
				    value      	"false"))
			    quid       	"461FAAC401D4"
			    stereotype 	"XPackage"))))
	    logical_presentations 	(list unit_reference_list
		(object ClassDiagram "Main"
		    quid       	"461FA82B006D"
		    title      	"Main"
		    zoom       	100
		    max_height 	28350
		    max_width  	21600
		    origin_x   	0
		    origin_y   	0
		    items      	(list diagram_item_list
			(object ClassView "Class" "Logical View::MDProcess::ConfluencePlugins::CommentsTabSupport::ViewCommentsAction" @107
			    ShowCompartmentStereotypes 	TRUE
			    IncludeAttribute 	TRUE
			    IncludeOperation 	TRUE
			    ShowOperationSignature 	TRUE
			    location   	(693, 486)
			    font       	(object Font
				size       	10
				face       	"Arial"
				charSet    	204
				bold       	FALSE
				italics    	FALSE
				underline  	FALSE
				strike     	FALSE
				color      	0
				default_color 	TRUE)
			    label      	(object ItemLabel
				Parent_View 	@107
				location   	(470, 456)
				fill_color 	13434879
				nlines     	1
				max_width  	446
				justify    	0
				label      	"ViewCommentsAction")
			    stereotype 	(object ItemLabel
				Parent_View 	@107
				location   	(470, 406)
				fill_color 	13434879
				anchor     	10
				nlines     	1
				max_width  	446
				justify    	0
				label      	"<<CActionPlugin>>")
			    icon_style 	"Label"
			    fill_color 	15448575
			    quidu      	"461FA876035B"
			    width      	464
			    height     	184
			    annotation 	8
			    autoResize 	TRUE)
			(object ClassView "Class" "Logical View::external::JavaConfluence::ConfluenceClassPack::ViewPageAction" @108
			    ShowCompartmentStereotypes 	TRUE
			    SuppressAttribute 	TRUE
			    SuppressOperation 	TRUE
			    IncludeAttribute 	TRUE
			    IncludeOperation 	TRUE
			    ShowOperationSignature 	TRUE
			    location   	(738, 120)
			    font       	(object Font
				size       	10
				face       	"Arial"
				charSet    	204
				bold       	FALSE
				italics    	FALSE
				underline  	FALSE
				strike     	FALSE
				color      	658120
				default_color 	FALSE)
			    label      	(object ItemLabel
				Parent_View 	@108
				location   	(534, 92)
				fill_color 	13434879
				nlines     	1
				max_width  	408
				justify    	0
				label      	"ViewPageAction")
			    stereotype 	(object ItemLabel
				Parent_View 	@108
				location   	(534, 42)
				fill_color 	13434879
				anchor     	10
				nlines     	1
				max_width  	408
				justify    	0
				label      	"<<SimpleClass>>")
			    icon_style 	"Label"
			    line_color 	14803425
			    fill_color 	14803425
			    quidu      	"461FA8DD02AF"
			    width      	426
			    height     	180
			    annotation 	8
			    autoResize 	TRUE)
			(object InheritView "" @109
			    font       	(object Font
				size       	10
				face       	"Arial"
				charSet    	204
				bold       	FALSE
				italics    	FALSE
				underline  	FALSE
				strike     	FALSE
				color      	0
				default_color 	TRUE)
			    stereotype 	TRUE
			    line_color 	3947680
			    quidu      	"461FA92F007D"
			    client     	@107
			    supplier   	@108
			    vertices   	(list Points
				(704, 393)
				(726, 210))
			    line_style 	0)
			(object ClassView "Class" "Logical View::MDProcess::ConfluencePlugins::CommentsTabSupport::viewcomments" @110
			    ShowCompartmentStereotypes 	TRUE
			    IncludeAttribute 	TRUE
			    IncludeOperation 	TRUE
			    ShowOperationSignature 	TRUE
			    location   	(237, 471)
			    font       	(object Font
				size       	10
				face       	"Arial"
				charSet    	204
				bold       	FALSE
				italics    	FALSE
				underline  	FALSE
				strike     	FALSE
				color      	0
				default_color 	TRUE)
			    label      	(object ItemLabel
				Parent_View 	@110
				location   	(90, 442)
				fill_color 	13434879
				nlines     	1
				max_width  	294
				justify    	0
				label      	"viewcomments")
			    stereotype 	(object ItemLabel
				Parent_View 	@110
				location   	(90, 392)
				fill_color 	13434879
				anchor     	10
				nlines     	1
				max_width  	294
				justify    	0
				label      	"<<VM>>")
			    icon_style 	"Label"
			    fill_color 	15448575
			    quidu      	"461FA960034B"
			    width      	312
			    height     	182
			    annotation 	8
			    autoResize 	TRUE)
			(object ClassView "Class" "Logical View::MDProcess::ConfluencePlugins::CommentsTabSupport::CommentsTabXWorkPlugin" @111
			    ShowCompartmentStereotypes 	TRUE
			    IncludeAttribute 	TRUE
			    IncludeOperation 	TRUE
			    ShowOperationSignature 	TRUE
			    location   	(1335, 480)
			    font       	(object Font
				size       	10
				face       	"Arial"
				charSet    	204
				bold       	FALSE
				italics    	FALSE
				underline  	FALSE
				strike     	FALSE
				color      	0
				default_color 	TRUE)
			    label      	(object ItemLabel
				Parent_View 	@111
				location   	(1065, 450)
				fill_color 	13434879
				nlines     	1
				max_width  	540
				justify    	0
				label      	"CommentsTabXWorkPlugin")
			    stereotype 	(object ItemLabel
				Parent_View 	@111
				location   	(1065, 400)
				fill_color 	13434879
				anchor     	10
				nlines     	1
				max_width  	540
				justify    	0
				label      	"<<CXWorkPlugin>>")
			    icon_style 	"Label"
			    fill_color 	15448575
			    quidu      	"461FAA5E01E4"
			    width      	558
			    height     	184
			    annotation 	8
			    autoResize 	TRUE)
			(object ClassView "Class" "Logical View::MDProcess::ConfluencePlugins::CommentsTabSupport::CommentsTabXWorkPlugin::CommentsTabXPackage" @112
			    ShowCompartmentStereotypes 	TRUE
			    IncludeAttribute 	TRUE
			    IncludeOperation 	TRUE
			    ShowOperationSignature 	TRUE
			    location   	(1212, 696)
			    font       	(object Font
				size       	10
				face       	"Arial"
				charSet    	204
				bold       	FALSE
				italics    	FALSE
				underline  	FALSE
				strike     	FALSE
				color      	0
				default_color 	TRUE)
			    label      	(object ItemLabel
				Parent_View 	@112
				location   	(962, 643)
				fill_color 	13434879
				nlines     	1
				max_width  	500
				justify    	0
				label      	"CommentsTabXPackage")
			    stereotype 	(object ItemLabel
				Parent_View 	@112
				location   	(962, 593)
				fill_color 	13434879
				anchor     	10
				nlines     	1
				max_width  	500
				justify    	0
				label      	"<<XPackage>>")
			    icon_style 	"Label"
			    fill_color 	15448575
			    quidu      	"461FAAC401D4"
			    width      	518
			    height     	230
			    annotation 	8
			    autoResize 	TRUE)))))
	(object Class_Category "GarantProfileSupport"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Full MDP"
		    value      	"")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"name"
		    value      	"Garant Profile Tab Actions")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"vendor name"
		    value      	"ООО НПП 'Гарант-Сервис'")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"vendor url"
		    value      	"www.garant.ru")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"NESTED GENERATED FILES (java)"
		    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/ConfluencePlugins/GarantProfileSupport/ViewProfileAction.java::461FABC20271")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"NESTED GENERATED FILES (output.xml)"
		    value      	"w:/MDProcess/java/src/etc/ConfluencePlugins/garantprofile.vm::461FABF202EE"))
	    quid       	"461FAB5000CB"
	    documentation 	"Библиотека плагина поддержки специальных настроек пользователя в Конфлюенсе."
	    stereotype 	"CPluginsPackage"
	    visible_categories 	(list visibility_relationship_list
		(object Visibility_Relationship
		    quid       	"461FAC9F0148"
		    supplier   	"Logical View::external::JavaConfluence::ConfluenceClassPack"
		    quidu      	"45DAC0AA0232")
		(object Visibility_Relationship
		    quid       	"4623596202CE"
		    supplier   	"Logical View::MDProcess::Описание MDKnow::Работа с контентом"
		    quidu      	"460912ED03D5"))
	    exportControl 	"Public"
	    logical_models 	(list unit_reference_list
		(object Class "ViewProfileAction"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"SELF GENERATED FILE (java)"
			    value      	"w:/MDProcess/java/src/java/ru/garant/MDProcess/ConfluencePlugins/GarantProfileSupport/ViewProfileAction.java"))
		    quid       	"461FABC20271"
		    stereotype 	"CActionPlugin"
		    superclasses 	(list inheritance_relationship_list
			(object Inheritance_Relationship
			    quid       	"461FABD10251"
			    supplier   	"Logical View::external::JavaConfluence::ConfluenceClassPack::ViewPageAction"
			    quidu      	"461FA8DD02AF"))
		    language   	"MDA Generator")
		(object Class "garantprofile"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"SELF GENERATED FILE (output.xml)"
			    value      	"w:/MDProcess/java/src/etc/ConfluencePlugins/garantprofile.vm"))
		    quid       	"461FABF202EE"
		    stereotype 	"VM"
		    language   	"MDA Generator")
		(object Class "GarantProfileTabXWorkPlugin"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false"))
		    quid       	"461FAC430242"
		    stereotype 	"CXWorkPlugin"
		    language   	"MDA Generator"
		    nestedClasses 	(list nestedClasses
			(object Class "GarantProfileTabXPackage"
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"AbstarctOperation"
				    value      	"regular")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"IsNative"
				    value      	"false"))
			    quid       	"461FAC5700DA"
			    stereotype 	"XPackage"))))
	    logical_presentations 	(list unit_reference_list
		(object ClassDiagram "Main"
		    quid       	"461FAB6A002E"
		    title      	"Main"
		    zoom       	100
		    max_height 	28350
		    max_width  	21600
		    origin_x   	0
		    origin_y   	0
		    items      	(list diagram_item_list
			(object ClassView "Class" "Logical View::MDProcess::ConfluencePlugins::GarantProfileSupport::ViewProfileAction" @113
			    ShowCompartmentStereotypes 	TRUE
			    IncludeAttribute 	TRUE
			    IncludeOperation 	TRUE
			    ShowOperationSignature 	TRUE
			    location   	(597, 402)
			    font       	(object Font
				size       	10
				face       	"Arial"
				charSet    	204
				bold       	FALSE
				italics    	FALSE
				underline  	FALSE
				strike     	FALSE
				color      	0
				default_color 	TRUE)
			    label      	(object ItemLabel
				Parent_View 	@113
				location   	(417, 372)
				fill_color 	13434879
				nlines     	1
				max_width  	360
				justify    	0
				label      	"ViewProfileAction")
			    stereotype 	(object ItemLabel
				Parent_View 	@113
				location   	(417, 322)
				fill_color 	13434879
				anchor     	10
				nlines     	1
				max_width  	360
				justify    	0
				label      	"<<CActionPlugin>>")
			    icon_style 	"Label"
			    fill_color 	15448575
			    quidu      	"461FABC20271"
			    width      	378
			    height     	184
			    annotation 	8
			    autoResize 	TRUE)
			(object ClassView "Class" "Logical View::external::JavaConfluence::ConfluenceClassPack::ViewPageAction" @114
			    ShowCompartmentStereotypes 	TRUE
			    SuppressAttribute 	TRUE
			    SuppressOperation 	TRUE
			    IncludeAttribute 	TRUE
			    IncludeOperation 	TRUE
			    ShowOperationSignature 	TRUE
			    location   	(603, 102)
			    font       	(object Font
				size       	10
				face       	"Arial"
				charSet    	204
				bold       	FALSE
				italics    	FALSE
				underline  	FALSE
				strike     	FALSE
				color      	658120
				default_color 	FALSE)
			    label      	(object ItemLabel
				Parent_View 	@114
				location   	(399, 74)
				fill_color 	13434879
				nlines     	1
				max_width  	408
				justify    	0
				label      	"ViewPageAction")
			    stereotype 	(object ItemLabel
				Parent_View 	@114
				location   	(399, 24)
				fill_color 	13434879
				anchor     	10
				nlines     	1
				max_width  	408
				justify    	0
				label      	"<<SimpleClass>>")
			    icon_style 	"Label"
			    line_color 	14803425
			    fill_color 	14803425
			    quidu      	"461FA8DD02AF"
			    width      	426
			    height     	180
			    annotation 	8
			    autoResize 	TRUE)
			(object InheritView "" @115
			    font       	(object Font
				size       	10
				face       	"Arial"
				charSet    	204
				bold       	FALSE
				italics    	FALSE
				underline  	FALSE
				strike     	FALSE
				color      	0
				default_color 	TRUE)
			    stereotype 	TRUE
			    line_color 	3947680
			    quidu      	"461FABD10251"
			    client     	@113
			    supplier   	@114
			    vertices   	(list Points
				(598, 309)
				(600, 192))
			    line_style 	0)
			(object ClassView "Class" "Logical View::MDProcess::ConfluencePlugins::GarantProfileSupport::garantprofile" @116
			    ShowCompartmentStereotypes 	TRUE
			    IncludeAttribute 	TRUE
			    IncludeOperation 	TRUE
			    ShowOperationSignature 	TRUE
			    location   	(201, 402)
			    font       	(object Font
				size       	10
				face       	"Arial"
				charSet    	204
				bold       	FALSE
				italics    	FALSE
				underline  	FALSE
				strike     	FALSE
				color      	0
				default_color 	TRUE)
			    label      	(object ItemLabel
				Parent_View 	@116
				location   	(70, 373)
				fill_color 	13434879
				nlines     	1
				max_width  	262
				justify    	0
				label      	"garantprofile")
			    stereotype 	(object ItemLabel
				Parent_View 	@116
				location   	(70, 323)
				fill_color 	13434879
				anchor     	10
				nlines     	1
				max_width  	262
				justify    	0
				label      	"<<VM>>")
			    icon_style 	"Label"
			    fill_color 	15448575
			    quidu      	"461FABF202EE"
			    width      	280
			    height     	182
			    annotation 	8
			    autoResize 	TRUE)
			(object ClassView "Class" "Logical View::MDProcess::ConfluencePlugins::GarantProfileSupport::GarantProfileTabXWorkPlugin" @117
			    ShowCompartmentStereotypes 	TRUE
			    IncludeAttribute 	TRUE
			    IncludeOperation 	TRUE
			    ShowOperationSignature 	TRUE
			    location   	(1125, 399)
			    font       	(object Font
				size       	10
				face       	"Arial"
				charSet    	204
				bold       	FALSE
				italics    	FALSE
				underline  	FALSE
				strike     	FALSE
				color      	0
				default_color 	TRUE)
			    label      	(object ItemLabel
				Parent_View 	@117
				location   	(839, 369)
				fill_color 	13434879
				nlines     	1
				max_width  	572
				justify    	0
				label      	"GarantProfileTabXWorkPlugin")
			    stereotype 	(object ItemLabel
				Parent_View 	@117
				location   	(839, 319)
				fill_color 	13434879
				anchor     	10
				nlines     	1
				max_width  	572
				justify    	0
				label      	"<<CXWorkPlugin>>")
			    icon_style 	"Label"
			    fill_color 	15448575
			    quidu      	"461FAC430242"
			    width      	590
			    height     	184
			    annotation 	8
			    autoResize 	TRUE)
			(object ClassView "Class" "Logical View::MDProcess::ConfluencePlugins::GarantProfileSupport::GarantProfileTabXWorkPlugin::GarantProfileTabXPackage" @118
			    ShowCompartmentStereotypes 	TRUE
			    IncludeAttribute 	TRUE
			    IncludeOperation 	TRUE
			    ShowOperationSignature 	TRUE
			    location   	(1056, 627)
			    font       	(object Font
				size       	10
				face       	"Arial"
				charSet    	204
				bold       	FALSE
				italics    	FALSE
				underline  	FALSE
				strike     	FALSE
				color      	0
				default_color 	TRUE)
			    label      	(object ItemLabel
				Parent_View 	@118
				location   	(786, 574)
				fill_color 	13434879
				nlines     	1
				max_width  	540
				justify    	0
				label      	"GarantProfileTabXPackage")
			    stereotype 	(object ItemLabel
				Parent_View 	@118
				location   	(786, 524)
				fill_color 	13434879
				anchor     	10
				nlines     	1
				max_width  	540
				justify    	0
				label      	"<<XPackage>>")
			    icon_style 	"Label"
			    fill_color 	15448575
			    quidu      	"461FAC5700DA"
			    width      	558
			    height     	230
			    annotation 	8
			    autoResize 	TRUE))))))
    logical_presentations 	(list unit_reference_list
	(object ClassDiagram "Main"
	    quid       	"45B719170157"
	    title      	"Main"
	    zoom       	100
	    max_height 	28350
	    max_width  	21600
	    origin_x   	0
	    origin_y   	850
	    items      	(list diagram_item_list
		(object CategoryView "Logical View::MDProcess::ConfluencePlugins::DiscussionsSupport" @119
		    location   	(1812, 633)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@119
			location   	(1568, 599)
			fill_color 	13434879
			nlines     	2
			max_width  	488
			justify    	0
			label      	"DiscussionsSupport")
		    stereotype 	(object ItemLabel
			Parent_View 	@119
			location   	(1568, 549)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	488
			justify    	0
			label      	"<<CPluginsPackage>>")
		    icon_style 	"Label"
		    fill_color 	16766935
		    quidu      	"45B7192701D4"
		    width      	500
		    height     	181)
		(object NoteView @120
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"LinkedItemGuid"
			    value      	"45B7192701D4"))
		    location   	(1833, 804)
		    font       	(object Font
			size       	8
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@120
			location   	(1601, 745)
			fill_color 	13434879
			nlines     	2
			max_width  	428
			justify    	1
			label      	"{name:=Garant Discussion Support}")
		    line_color 	3342489
		    fill_color 	13434879
		    width      	488
		    height     	131)
		(object AttachView "" @121
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	TRUE
		    line_color 	3342489
		    client     	@120
		    supplier   	@119
		    vertices   	(list Points
			(1823, 738)
			(1822, 723))
		    line_style 	0)
		(object CategoryView "Logical View::MDProcess::ConfluencePlugins::IconsSelectorSupport" @122
		    location   	(990, 1398)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@122
			location   	(730, 1364)
			fill_color 	13434879
			nlines     	2
			max_width  	520
			justify    	0
			label      	"IconsSelectorSupport")
		    stereotype 	(object ItemLabel
			Parent_View 	@122
			location   	(730, 1314)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	520
			justify    	0
			label      	"<<CPluginsPackage>>")
		    icon_style 	"Label"
		    fill_color 	16766935
		    quidu      	"45C1FCFF038A"
		    width      	532
		    height     	181)
		(object NoteView @123
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"LinkedItemGuid"
			    value      	"45C1FCFF038A"))
		    location   	(1005, 1569)
		    font       	(object Font
			size       	8
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@123
			location   	(764, 1510)
			fill_color 	13434879
			nlines     	2
			max_width  	446
			justify    	1
			label      	"{name:=Garant Icons Support}")
		    line_color 	3342489
		    fill_color 	13434879
		    width      	506
		    height     	131)
		(object AttachView "" @124
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	TRUE
		    line_color 	3342489
		    client     	@123
		    supplier   	@122
		    vertices   	(list Points
			(998, 1503)
			(997, 1488))
		    line_style 	0)
		(object CategoryView "Logical View::MDProcess::ConfluencePlugins::DocumentWorkSupport" @125
		    location   	(1878, 1089)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@125
			location   	(1663, 1054)
			fill_color 	13434879
			nlines     	2
			max_width  	430
			justify    	0
			label      	"DocumentWorkSupport")
		    stereotype 	(object ItemLabel
			Parent_View 	@125
			location   	(1663, 1004)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	430
			justify    	0
			label      	"<<CPluginsPackage>>")
		    icon_style 	"Label"
		    fill_color 	16766935
		    quidu      	"45D1B37D0290"
		    width      	442
		    height     	182)
		(object NoteView @126
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"LinkedItemGuid"
			    value      	"45D1B37D0290"))
		    location   	(1905, 1269)
		    font       	(object Font
			size       	8
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@126
			location   	(1695, 1207)
			fill_color 	13434879
			nlines     	3
			max_width  	384
			justify    	1
			label      	"{name:=Remove all children of the document}")
		    line_color 	3342489
		    fill_color 	13434879
		    width      	444
		    height     	137)
		(object AttachView "" @127
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	TRUE
		    line_color 	3342489
		    client     	@126
		    supplier   	@125
		    vertices   	(list Points
			(1893, 1200)
			(1891, 1180))
		    line_style 	0)
		(object CategoryView "Logical View::MDProcess::ConfluencePlugins::SearchHighLightSupport" @128
		    location   	(327, 1308)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@128
			location   	(68, 1274)
			fill_color 	13434879
			nlines     	2
			max_width  	518
			justify    	0
			label      	"SearchHighLightSupport")
		    stereotype 	(object ItemLabel
			Parent_View 	@128
			location   	(68, 1224)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	518
			justify    	0
			label      	"<<CPluginsPackage>>")
		    icon_style 	"Label"
		    fill_color 	16766935
		    quidu      	"45D9C51F007D"
		    width      	531
		    height     	181)
		(object NoteView @129
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"LinkedItemGuid"
			    value      	"45D9C51F007D"))
		    location   	(375, 1512)
		    font       	(object Font
			size       	8
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@129
			location   	(128, 1453)
			fill_color 	13434879
			nlines     	2
			max_width  	459
			justify    	1
			label      	"{name:=Garant Search Highlight Support}")
		    line_color 	3342489
		    fill_color 	13434879
		    width      	519
		    height     	131)
		(object AttachView "" @130
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	TRUE
		    line_color 	3342489
		    client     	@129
		    supplier   	@128
		    vertices   	(list Points
			(359, 1446)
			(348, 1398))
		    line_style 	0)
		(object CategoryView "Logical View::external::JavaConfluence::ConfluenceClassPack" @131
		    location   	(2505, 432)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	658120
			default_color 	FALSE)
		    label      	(object ItemLabel
			Parent_View 	@131
			location   	(2307, 381)
			fill_color 	13434879
			nlines     	2
			max_width  	396
			justify    	0
			label      	"ConfluenceClassPack")
		    stereotype 	(object ItemLabel
			Parent_View 	@131
			location   	(2307, 331)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	396
			justify    	0
			label      	"<<CPluginsPackage>>")
		    icon_style 	"Label"
		    line_color 	14803425
		    fill_color 	14803425
		    quidu      	"45DAC0AA0232"
		    width      	408
		    height     	214)
		(object CategoryView "Logical View::MDProcess::ConfluencePlugins::ArchiveCommentSupport" @132
		    location   	(1752, 126)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@132
			location   	(1521, 89)
			fill_color 	13434879
			nlines     	2
			max_width  	462
			justify    	0
			label      	"ArchiveCommentSupport")
		    stereotype 	(object ItemLabel
			Parent_View 	@132
			location   	(1521, 39)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	462
			justify    	0
			label      	"<<CPluginsPackage>>")
		    icon_style 	"Label"
		    fill_color 	16766935
		    quidu      	"45F677DC0290"
		    width      	475
		    height     	187)
		(object NoteView @133
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"LinkedItemGuid"
			    value      	"45F677DC0290"))
		    location   	(1791, 324)
		    font       	(object Font
			size       	8
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@133
			location   	(1572, 265)
			fill_color 	13434879
			nlines     	2
			max_width  	402
			justify    	1
			label      	"{name:=Garant Archive Comment Support}")
		    line_color 	3342489
		    fill_color 	13434879
		    width      	462
		    height     	131)
		(object AttachView "" @134
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	TRUE
		    line_color 	3342489
		    client     	@133
		    supplier   	@132
		    vertices   	(list Points
			(1777, 258)
			(1769, 219))
		    line_style 	0)
		(object CategoryView "Logical View::MDProcess::ConfluencePlugins::SessionSupport" @135
		    location   	(1599, 1461)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@135
			location   	(1384, 1426)
			fill_color 	13434879
			nlines     	2
			max_width  	430
			justify    	0
			label      	"SessionSupport")
		    stereotype 	(object ItemLabel
			Parent_View 	@135
			location   	(1384, 1376)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	430
			justify    	0
			label      	"<<CPluginsPackage>>")
		    icon_style 	"Label"
		    fill_color 	16766935
		    quidu      	"45F6AE680177"
		    width      	442
		    height     	182)
		(object NoteView @136
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"LinkedItemGuid"
			    value      	"45F6AE680177"))
		    location   	(1749, 1653)
		    font       	(object Font
			size       	8
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@136
			location   	(1533, 1594)
			fill_color 	13434879
			nlines     	2
			max_width  	396
			justify    	1
			label      	"{name:=Garant Session Support}")
		    line_color 	3342489
		    fill_color 	13434879
		    width      	456
		    height     	131)
		(object AttachView "" @137
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	TRUE
		    line_color 	3342489
		    client     	@136
		    supplier   	@135
		    vertices   	(list Points
			(1696, 1587)
			(1670, 1552))
		    line_style 	0)
		(object CategoryView "Logical View::MDProcess::ConfluencePlugins::SearchExtractorSupport" @138
		    location   	(276, 126)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@138
			location   	(51, 89)
			fill_color 	13434879
			nlines     	2
			max_width  	450
			justify    	0
			label      	"SearchExtractorSupport")
		    stereotype 	(object ItemLabel
			Parent_View 	@138
			location   	(51, 39)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	450
			justify    	0
			label      	"<<CPluginsPackage>>")
		    icon_style 	"Label"
		    fill_color 	16766935
		    quidu      	"4607CD6600AB"
		    width      	462
		    height     	187)
		(object NoteView @139
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"LinkedItemGuid"
			    value      	"4607CD6600AB"))
		    location   	(273, 327)
		    font       	(object Font
			size       	8
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@139
			location   	(60, 268)
			fill_color 	13434879
			nlines     	2
			max_width  	390
			justify    	1
			label      	"{name:=Garant Search Extractor Support}")
		    line_color 	3342489
		    fill_color 	13434879
		    width      	450
		    height     	131)
		(object AttachView "" @140
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	TRUE
		    line_color 	3342489
		    client     	@139
		    supplier   	@138
		    vertices   	(list Points
			(273, 261)
			(274, 219))
		    line_style 	0)
		(object CategoryView "Logical View::MDProcess::Описание MDKnow::Работа с обсуждениями" @141
		    location   	(1044, 210)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	12800
			default_color 	FALSE)
		    label      	(object ItemLabel
			Parent_View 	@141
			location   	(797, 169)
			fill_color 	16777215
			nlines     	2
			max_width  	494
			justify    	0
			label      	"Работа с обсуждениями")
		    stereotype 	(object ItemLabel
			Parent_View 	@141
			location   	(797, 119)
			fill_color 	16777215
			anchor     	10
			nlines     	1
			max_width  	494
			justify    	0
			label      	"<<UseCases>>")
		    icon_style 	"Label"
		    line_color 	705290
		    fill_color 	16777215
		    quidu      	"4609112A005A"
		    width      	506
		    height     	194)
		(object ImportView "" @142
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	TRUE
		    line_color 	3947680
		    quidu      	"45F681B0030D"
		    client     	@132
		    supplier   	@131
		    vertices   	(list Points
			(1984, 219)
			(2300, 347))
		    line_style 	0)
		(object ImportView "" @143
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	TRUE
		    line_color 	3947680
		    quidu      	"45FE965F0023"
		    client     	@132
		    supplier   	@141
		    vertices   	(list Points
			(1514, 153)
			(1297, 179))
		    line_style 	0)
		(object ImportView "" @144
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	TRUE
		    line_color 	3947680
		    quidu      	"4607CDA901D4"
		    client     	@138
		    supplier   	@141
		    vertices   	(list Points
			(507, 150)
			(790, 180))
		    line_style 	0)
		(object ImportView "" @145
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	TRUE
		    line_color 	3947680
		    quidu      	"45FE965101B9"
		    client     	@119
		    supplier   	@141
		    vertices   	(list Points
			(1561, 493)
			(1222, 307))
		    line_style 	0)
		(object CategoryView "Logical View::MDProcess::Описание MDKnow::Работа с контентом" @146
		    location   	(1047, 738)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	12800
			default_color 	FALSE)
		    label      	(object ItemLabel
			Parent_View 	@146
			location   	(809, 687)
			fill_color 	16777215
			nlines     	2
			max_width  	476
			justify    	0
			label      	"Работа с контентом")
		    stereotype 	(object ItemLabel
			Parent_View 	@146
			location   	(809, 637)
			fill_color 	16777215
			anchor     	10
			nlines     	1
			max_width  	476
			justify    	0
			label      	"<<UseCases>>")
		    icon_style 	"Label"
		    line_color 	705290
		    fill_color 	16777215
		    quidu      	"460912ED03D5"
		    width      	488
		    height     	214)
		(object ImportView "" @147
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	TRUE
		    line_color 	3947680
		    quidu      	"45FE965A016B"
		    client     	@122
		    supplier   	@146
		    vertices   	(list Points
			(1002, 1253)
			(1036, 845))
		    line_style 	0)
		(object ImportView "" @148
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	TRUE
		    line_color 	3947680
		    quidu      	"45DAF62B029F"
		    client     	@125
		    supplier   	@131
		    vertices   	(list Points
			(2014, 943)
			(2401, 539))
		    line_style 	0)
		(object ImportView "" @149
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	TRUE
		    line_color 	3947680
		    quidu      	"45FE966403DC"
		    client     	@125
		    supplier   	@146
		    vertices   	(list Points
			(1656, 994)
			(1291, 840))
		    line_style 	0)
		(object ImportView "" @150
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	TRUE
		    line_color 	3947680
		    quidu      	"460A5D190109"
		    client     	@119
		    supplier   	@131
		    vertices   	(list Points
			(2062, 559)
			(2300, 490))
		    line_style 	0)
		(object ImportView "" @151
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	TRUE
		    line_color 	3947680
		    quidu      	"46139CB3037A"
		    client     	@135
		    supplier   	@146
		    vertices   	(list Points
			(1487, 1315)
			(1129, 845))
		    line_style 	0)
		(object ImportView "" @152
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	TRUE
		    line_color 	3947680
		    quidu      	"4614C17C0148"
		    client     	@119
		    supplier   	@146
		    vertices   	(list Points
			(1561, 665)
			(1291, 703))
		    line_style 	0)
		(object CategoryView "Logical View::MDProcess::Описание MDKnow::Дополнительные сценарии" @153
		    location   	(306, 762)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	12800
			default_color 	FALSE)
		    label      	(object ItemLabel
			Parent_View 	@153
			location   	(68, 711)
			fill_color 	16777215
			nlines     	2
			max_width  	476
			justify    	0
			label      	"Дополнительные сценарии")
		    stereotype 	(object ItemLabel
			Parent_View 	@153
			location   	(68, 661)
			fill_color 	16777215
			anchor     	10
			nlines     	1
			max_width  	476
			justify    	0
			label      	"<<UseCases>>")
		    icon_style 	"Label"
		    line_color 	705290
		    fill_color 	16777215
		    quidu      	"45BE066401BB"
		    width      	488
		    height     	214)
		(object ImportView "" @154
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	TRUE
		    line_color 	3947680
		    quidu      	"4609326E00C7"
		    client     	@141
		    supplier   	@153
		    vertices   	(list Points
			(911, 307)
			(519, 600))
		    line_style 	0)
		(object ImportView "" @155
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	TRUE
		    line_color 	3947680
		    quidu      	"460915740192"
		    client     	@146
		    supplier   	@153
		    vertices   	(list Points
			(802, 745)
			(550, 753))
		    line_style 	0)
		(object ImportView "" @156
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	TRUE
		    line_color 	3947680
		    quidu      	"4609324E02CB"
		    client     	@153
		    supplier   	@146
		    vertices   	(list Points
			(550, 753)
			(802, 745))
		    line_style 	0)
		(object ImportView "" @157
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	TRUE
		    line_color 	3947680
		    quidu      	"4614CE620203"
		    client     	@128
		    supplier   	@153
		    vertices   	(list Points
			(320, 1163)
			(309, 869))
		    line_style 	0)
		(object CategoryView "Logical View::MDProcess::ConfluencePlugins::CommentsTabSupport" @158
		    location   	(2430, 1434)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@158
			location   	(2215, 1399)
			fill_color 	13434879
			nlines     	2
			max_width  	430
			justify    	0
			label      	"CommentsTabSupport")
		    stereotype 	(object ItemLabel
			Parent_View 	@158
			location   	(2215, 1349)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	430
			justify    	0
			label      	"<<CPluginsPackage>>")
		    icon_style 	"Label"
		    fill_color 	16766935
		    quidu      	"461FA82502FD"
		    width      	442
		    height     	182)
		(object CategoryView "Logical View::MDProcess::ConfluencePlugins::GarantProfileSupport" @159
		    location   	(2916, 1458)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@159
			location   	(2701, 1423)
			fill_color 	13434879
			nlines     	2
			max_width  	430
			justify    	0
			label      	"GarantProfileSupport")
		    stereotype 	(object ItemLabel
			Parent_View 	@159
			location   	(2701, 1373)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	430
			justify    	0
			label      	"<<CPluginsPackage>>")
		    icon_style 	"Label"
		    fill_color 	16766935
		    quidu      	"461FAB5000CB"
		    width      	442
		    height     	182)
		(object ImportView "" @160
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	TRUE
		    line_color 	3947680
		    quidu      	"461FAC9F0148"
		    client     	@159
		    supplier   	@131
		    vertices   	(list Points
			(2856, 1312)
			(2546, 539))
		    line_style 	0)
		(object ImportView "" @161
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	TRUE
		    line_color 	3947680
		    quidu      	"461FACA20222"
		    client     	@158
		    supplier   	@131
		    vertices   	(list Points
			(2440, 1288)
			(2496, 539))
		    line_style 	0)
		(object NoteView @162
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"LinkedItemGuid"
			    value      	"461FA82502FD"))
		    location   	(2355, 1611)
		    font       	(object Font
			size       	8
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@162
			location   	(2217, 1551)
			fill_color 	13434879
			nlines     	3
			max_width  	240
			justify    	1
			label      	"{name:=Comments Tab Actions}")
		    line_color 	3342489
		    fill_color 	13434879
		    width      	300
		    height     	132)
		(object AttachView "" @163
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	TRUE
		    line_color 	3342489
		    client     	@162
		    supplier   	@158
		    vertices   	(list Points
			(2382, 1544)
			(2389, 1525))
		    line_style 	0)
		(object NoteView @164
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"LinkedItemGuid"
			    value      	"461FAB5000CB"))
		    location   	(2946, 1626)
		    font       	(object Font
			size       	8
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@164
			location   	(2749, 1566)
			fill_color 	13434879
			nlines     	3
			max_width  	359
			justify    	1
			label      	"{name:=Garant Profile Tab Actions}")
		    line_color 	3342489
		    fill_color 	13434879
		    width      	419
		    height     	132)
		(object AttachView "" @165
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    stereotype 	TRUE
		    line_color 	3342489
		    client     	@164
		    supplier   	@159
		    vertices   	(list Points
			(2933, 1559)
			(2931, 1549))
		    line_style 	0)
		(object ImportView "" @166
		    stereotype 	TRUE
		    line_color 	3342489
		    quidu      	"4623595D0222"
		    client     	@158
		    supplier   	@146
		    vertices   	(list Points
			(2208, 1322)
			(1260, 845))
		    line_style 	0)
		(object ImportView "" @167
		    stereotype 	TRUE
		    line_color 	3342489
		    quidu      	"4623596202CE"
		    client     	@159
		    supplier   	@146
		    vertices   	(list Points
			(2694, 1372)
			(1291, 831))
		    line_style 	0)))))
