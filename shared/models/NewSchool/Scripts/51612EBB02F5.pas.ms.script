// Ref Counting 51612EBB02F5 Unit Category

INCLUDE 'ElementsRTTI.ms.dict'

FORWARD ME_51612EBB02F5

FORWARD ME_51612ED700B4

: ME_4791515B0239
 CONST UID '4791515B0239'
 CONST Name 'RefCount'
 CONST Class class_Attribute
 : Stereotype st_readonly::Attribute ;
 CONST Visibility PublicAccess
 CONST Abstraction at_final
 CONST LinkType lt_agr
 : Parent ME_51612ED700B4 // RefCountedPrim
 ;
 : Target WL 'ME_46A606AC03B2' '4AB0C3C60310.pas.ms.script' // Integer
 ;
 CONST "needs field" false
 CONST "pm" true
 CONST "reads field" true

ref; // ME_4791515B0239 RefCount

: ME_623901E83BE0
 CONST UID '623901E83BE0'
 CONST Name 'f_RefCount'
 CONST IsSummoned true
 CONST Class class_Attribute
 %SUMMARY 'Поле для свойства RefCount' ;
 CONST Visibility PrivateAccess
 CONST Abstraction at_regular
 CONST LinkType lt_ref
 : Parent ME_51612ED700B4 // RefCountedPrim
 ;
 : Target WL 'ME_46A606AC03B2' '4AB0C3C60310.pas.ms.script' // Integer
 ;

ref; // ME_623901E83BE0 f_RefCount

: ME_479731C50290
 CONST UID '479731C50290'
 CONST Name 'Cleanup'
 CONST Class class_Operation
 %SUMMARY 'Функция очистки полей объекта.' ;
 CONST Visibility ProtectedAccess
 CONST Abstraction at_regular
 : Parent ME_51612ED700B4 // RefCountedPrim
 ;

ref; // ME_479731C50290 Cleanup

: ME_479152500168
 CONST UID '479152500168'
 CONST Name 'Use'
 CONST Class class_Operation
 %SUMMARY 'увеличить счетчик ссылок на 1 и вернуть указатель на себя.' ;
 CONST Visibility PublicAccess
 CONST Abstraction at_final
 : Parent ME_51612ED700B4 // RefCountedPrim
 ;
 : Target WL 'ME_46A608F00301' '4AB0C3C60310.pas.ms.script' // Pointer
 ;

ref; // ME_479152500168 Use

: ME_51613280011E
 CONST UID '51613280011E'
 CONST Name 'F'
 CONST Class class_Parameter
 : Stereotype st_inout ;

ref; // ME_51613280011E F

: ME_5161325E01CB
 CONST UID '5161325E01CB'
 CONST Name 'SetRefTo'
 CONST Class class_Operation
 CONST Visibility PublicAccess
 CONST Abstraction at_final
 : Parent ME_51612ED700B4 // RefCountedPrim
 ;
 : Target WL 'ME_46A603BB0391' '4AB0C3C60310.pas.ms.script' // Boolean
 ;
 : Parameters
   Seq: ( ME_51613280011E // F
 )
 ; // Parameters

ref; // ME_5161325E01CB SetRefTo

: ME_49BFC98902FF
 CONST UID '49BFC98902FF'
 CONST Name 'BeforeRelease'
 CONST Class class_Operation
 CONST Visibility ProtectedAccess
 CONST Abstraction at_regular
 : Parent ME_51612ED700B4 // RefCountedPrim
 ;

ref; // ME_49BFC98902FF BeforeRelease

: ME_479F2AFB0397
 CONST UID '479F2AFB0397'
 CONST Name 'Release'
 CONST Class class_Operation
 CONST Visibility ProtectedAccess
 CONST Abstraction at_regular
 : Parent ME_51612ED700B4 // RefCountedPrim
 ;

ref; // ME_479F2AFB0397 Release

: ME_51613DAB00FA
 CONST UID '51613DAB00FA'
 CONST Class class_Dependency
 : Stereotype st_uses::Dependency ;
 : Parent ME_51612ED700B4 // RefCountedPrim
 ;
 : Target WL 'ME_48A41FF10094' '4AB0C3F60375.pas.ms.script' // Windows
 ;

ref; // ME_51613DAB00FA 

: ME_48077504027E_ME_51612ED700B4
 CONST UID '48077504027E'
 CONST Name 'Destroy'
 : Original WL 'ME_48077504027E' '4AB0C3C60310.pas.ms.script' // Destroy
 ;
 : Implementor ME_51612ED700B4 // RefCountedPrim
 ;
 CONST OpKind opkind_Overridden
ref; // ME_48077504027E_ME_51612ED700B4 Destroy

: ME_516131510341_ME_51612ED700B4
 CONST UID '516131510341'
 CONST Name 'NewInstance'
 : Original WL 'ME_516131510341' '4AB0C3C60310.pas.ms.script' // NewInstance
 ;
 : Implementor ME_51612ED700B4 // RefCountedPrim
 ;
 CONST OpKind opkind_Overridden
 CONST "is static" true
ref; // ME_516131510341_ME_51612ED700B4 NewInstance

: ME_5161317A0219_ME_51612ED700B4
 CONST UID '5161317A0219'
 CONST Name 'FreeInstance'
 : Original WL 'ME_5161317A0219' '4AB0C3C60310.pas.ms.script' // FreeInstance
 ;
 : Implementor ME_51612ED700B4 // RefCountedPrim
 ;
 CONST OpKind opkind_Overridden
 CONST "is static" false
ref; // ME_5161317A0219_ME_51612ED700B4 FreeInstance

: ME_51DAEFC6017B_ME_51612ED700B4
 CONST UID '51DAEFC6017B'
 CONST Name 'BeforeDestruction'
 : Original WL 'ME_51DAEFC6017B' '4AB0C3C60310.pas.ms.script' // BeforeDestruction
 ;
 : Implementor ME_51612ED700B4 // RefCountedPrim
 ;
 CONST OpKind opkind_Overridden
ref; // ME_51DAEFC6017B_ME_51612ED700B4 BeforeDestruction

: ME_51612ED700B4
 CONST UID '51612ED700B4'
 CONST Name 'RefCountedPrim'
 CONST Class class_Class
 : Stereotype st_Impurity ;
 CONST Kind kind_NormalClass
 CONST Visibility PublicAccess
 CONST Abstraction at_regular
 : Parent ME_51612EBB02F5 // Ref Counting
 ;
 : Implements
   Seq: ( WL 'ME_516130FB0241' '4AB0C3C60310.pas.ms.script' // MObject
 )
 ; // Implements
 : Attributes
   Seq: ( ME_4791515B0239 // RefCount
 ME_623901E83BE0 // f_RefCount
 )
 ; // Attributes
 : Operations
   Seq: ( ME_479731C50290 // Cleanup
 ME_479152500168 // Use
 ME_5161325E01CB // SetRefTo
 ME_49BFC98902FF // BeforeRelease
 ME_479F2AFB0397 // Release
 )
 ; // Operations
 : Overridden
   Seq: ( ME_48077504027E_ME_51612ED700B4 // Destroy
 ME_516131510341_ME_51612ED700B4 // NewInstance
 ME_5161317A0219_ME_51612ED700B4 // FreeInstance
 ME_51DAEFC6017B_ME_51612ED700B4 // BeforeDestruction
 )
 ; // Overridden
 : Dependencies
   Seq: ( ME_51613DAB00FA // 
 )
 ; // Dependencies
 CONST "needs InstanceR" 'undefined'
 CONST "needs script" 'undefined'
 CONST "no hands" false
 CONST "register in scripts" 'undefined'
 CONST intf.pas:Path 'common\components\rtl\Garant\L3\RefCountedPrim.imp.pas'
 CONST extprop:pas:TypeName '_RefCountedPrim_'
 CONST extprop:pas:UnitName 'RefCountedPrim.imp'

ref; // ME_51612ED700B4 RefCountedPrim

FORWARD ME_51614065019A

: ME_5161409E01B6
 CONST UID '5161409E01B6'
 CONST Name 'destroy'
 CONST Class class_Operation
 %SUMMARY 'Это чтобы не было соблазна перекрывать destroy.' ;
 CONST Visibility PublicAccess
 CONST Abstraction at_final
 : Parent ME_51614065019A // RefCounted
 ;

ref; // ME_5161409E01B6 destroy

: ME_516D4E5A000A
 CONST UID '516D4E5A000A'
 CONST Name 'NewInstance'
 CONST Class class_Operation
 : Stereotype st_static::Operation ;
 CONST Visibility PublicAccess
 CONST Abstraction at_final
 : Parent ME_51614065019A // RefCounted
 ;
 : Target WL 'ME_4807745602C8' '4AB0C3C60310.pas.ms.script' // TObject
 ;

ref; // ME_516D4E5A000A NewInstance

: ME_516D4E780193
 CONST UID '516D4E780193'
 CONST Name 'FreeInstance'
 CONST Class class_Operation
 CONST Visibility PublicAccess
 CONST Abstraction at_final
 : Parent ME_51614065019A // RefCounted
 ;

ref; // ME_516D4E780193 FreeInstance

: ME_516D4E9403A0
 CONST UID '516D4E9403A0'
 CONST Name 'AfterConstruction'
 CONST Class class_Operation
 CONST Visibility PublicAccess
 CONST Abstraction at_final
 : Parent ME_51614065019A // RefCounted
 ;

ref; // ME_516D4E9403A0 AfterConstruction

: ME_516D4EAD0095
 CONST UID '516D4EAD0095'
 CONST Name 'BeforeDestruction'
 CONST Class class_Operation
 CONST Visibility PublicAccess
 CONST Abstraction at_final
 : Parent ME_51614065019A // RefCounted
 ;

ref; // ME_516D4EAD0095 BeforeDestruction

: ME_51614065019A
 CONST UID '51614065019A'
 CONST Name 'RefCounted'
 CONST Class class_Class
 : Stereotype st_Impurity ;
 CONST Kind kind_NormalClass
 %SUMMARY 'В этом классе собираем методы, которые запрещено перекрывать и вызывать напрямую' ;
 CONST Visibility PublicAccess
 CONST Abstraction at_regular
 : Parent ME_51612EBB02F5 // Ref Counting
 ;
 : Inherits
   Seq: ( ME_51612ED700B4 // RefCountedPrim
 )
 ; // Inherits
 : Operations
   Seq: ( ME_5161409E01B6 // destroy
 ME_516D4E5A000A // NewInstance
 ME_516D4E780193 // FreeInstance
 ME_516D4E9403A0 // AfterConstruction
 ME_516D4EAD0095 // BeforeDestruction
 )
 ; // Operations
 CONST "needs InstanceR" 'undefined'
 CONST "needs script" 'undefined'
 CONST "no hands" false
 CONST "register in scripts" 'undefined'
 CONST intf.pas:Path 'common\components\rtl\Garant\L3\RefCounted.imp.pas'
 CONST extprop:pas:TypeName '_RefCounted_'
 CONST extprop:pas:UnitName 'RefCounted.imp'

ref; // ME_51614065019A RefCounted

FORWARD ME_516D4D0D0237

: ME_47913C24007F_ME_516D4D0D0237
 CONST UID '47913C24007F'
 CONST Name '__AddRef'
 : Original WL 'ME_47913C24007F' '4AB0C3C60310.pas.ms.script' // __AddRef
 ;
 : Implementor ME_516D4D0D0237 // UnknownImpl
 ;
 CONST OpKind opkind_Implemented
 CONST "calling conventions" 'stdcall'
ref; // ME_47913C24007F_ME_516D4D0D0237 __AddRef

: ME_47913C5301A1_ME_516D4D0D0237
 CONST UID '47913C5301A1'
 CONST Name '__Release'
 : Original WL 'ME_47913C5301A1' '4AB0C3C60310.pas.ms.script' // __Release
 ;
 : Implementor ME_516D4D0D0237 // UnknownImpl
 ;
 CONST OpKind opkind_Implemented
 CONST "calling conventions" 'stdcall'
ref; // ME_47913C5301A1_ME_516D4D0D0237 __Release

: ME_47913CBF0265_ME_516D4D0D0237
 CONST UID '47913CBF0265'
 CONST Name 'QueryInterface'
 : Original WL 'ME_47913CBF0265' '4AB0C3C60310.pas.ms.script' // QueryInterface
 ;
 : Implementor ME_516D4D0D0237 // UnknownImpl
 ;
 CONST OpKind opkind_Implemented
 CONST "calling conventions" 'stdcall'
ref; // ME_47913CBF0265_ME_516D4D0D0237 QueryInterface

: ME_516D4D0D0237
 CONST UID '516D4D0D0237'
 CONST Name 'UnknownImpl'
 CONST Class class_Class
 : Stereotype st_Impurity ;
 CONST Kind kind_NormalClass
 CONST Visibility PublicAccess
 CONST Abstraction at_regular
 : Parent ME_51612EBB02F5 // Ref Counting
 ;
 : Inherits
   Seq: ( ME_51614065019A // RefCounted
 )
 ; // Inherits
 : Implements
   Seq: ( WL 'ME_516D4A8D0232' '4AB0C3C60310.pas.ms.script' // MIUnknown
 )
 ; // Implements
 : Implemented
   Seq: ( ME_47913C24007F_ME_516D4D0D0237 // __AddRef
 ME_47913C5301A1_ME_516D4D0D0237 // __Release
 ME_47913CBF0265_ME_516D4D0D0237 // QueryInterface
 )
 ; // Implemented
 CONST "needs InstanceR" 'undefined'
 CONST "needs script" 'undefined'
 CONST "no hands" false
 CONST "register in scripts" 'undefined'
 CONST intf.pas:Path 'common\components\rtl\Garant\L3\UnknownImpl.imp.pas'
 CONST extprop:pas:TypeName '_UnknownImpl_'
 CONST extprop:pas:UnitName 'UnknownImpl.imp'

ref; // ME_516D4D0D0237 UnknownImpl

: ME_516D4D45029C
 CONST UID '516D4D45029C'
 CONST Name 'Unknown'
 CONST Class class_Class
 : Stereotype st_Impurity ;
 CONST Kind kind_NormalClass
 CONST Visibility PublicAccess
 CONST Abstraction at_regular
 : Parent ME_51612EBB02F5 // Ref Counting
 ;
 : Inherits
   Seq: ( ME_516D4D0D0237 // UnknownImpl
 )
 ; // Inherits
 : Implements
   Seq: ( WL 'ME_47913BA402ED' '4AB0C3C60310.pas.ms.script' // IUnknown$Def
 )
 ; // Implements
 CONST "needs InstanceR" 'undefined'
 CONST "needs script" 'undefined'
 CONST "no hands" false
 CONST "register in scripts" 'undefined'
 CONST intf.pas:Path 'common\components\rtl\Garant\L3\Unknown.imp.pas'
 CONST extprop:pas:TypeName '_Unknown_'
 CONST extprop:pas:UnitName 'Unknown.imp'

ref; // ME_516D4D45029C Unknown

: ME_516137AD0362
 CONST UID '516137AD0362'
 CONST Name 'TRefcounted'
 CONST Class class_Class
 : Stereotype st_SimpleClass ;
 CONST Kind kind_NormalClass
 CONST Visibility PublicAccess
 CONST Abstraction at_regular
 : Parent ME_51612EBB02F5 // Ref Counting
 ;
 : Inherits
   Seq: ( WL 'ME_4807745602C8' '4AB0C3C60310.pas.ms.script' // TObject
 ME_51614065019A // RefCounted
 )
 ; // Inherits
 CONST "needs InstanceR" 'undefined'
 CONST "needs script" 'undefined'
 CONST "no hands" false
 CONST "register in scripts" 'undefined'
 CONST intf.pas:Path 'common\components\rtl\Garant\L3\Refcounted.pas'
 CONST extprop:rc:SelfName 'Refcounted'
 CONST extprop:rc:isAcceptableForScripts true
 CONST extprop:pas:UnitName 'Refcounted'

ref; // ME_516137AD0362 TRefcounted

: ME_51DEB13301ED
 CONST UID '51DEB13301ED'
 CONST Name 'MRefCounted'
 CONST Class class_Class
 : Stereotype st_MixInMirror ;
 CONST Kind kind_NormalClass
 CONST Visibility PublicAccess
 CONST Abstraction at_abstract
 : Parent ME_51612EBB02F5 // Ref Counting
 ;
 : Inherits
   Seq: ( ME_51612ED700B4 // RefCountedPrim
 )
 ; // Inherits

ref; // ME_51DEB13301ED MRefCounted

: ME_51612EBB02F5
 CONST UID '51612EBB02F5'
 CONST Name 'Ref Counting'
 CONST Class class_Category
 : Stereotype st_Unit ;
 CONST Visibility PublicAccess
 CONST Abstraction at_regular
 : Parent WL 'ME_515AC89F01E1' '515AC89F01E1.pas.ms.script' // L3$Basic Concepts
 ;
 : Children
   Seq: ( ME_51612ED700B4 // RefCountedPrim
 ME_51614065019A // RefCounted
 ME_516D4D0D0237 // UnknownImpl
 ME_516D4D45029C // Unknown
 ME_516137AD0362 // TRefcounted
 ME_51DEB13301ED // MRefCounted
 )
 ; // Children
 : Depends
   Seq: ( WL 'ME_4AB0C3F60375' '4AB0C3F60375.pas.ms.script' // Win
 )
 ; // Depends

ref; // ME_51612EBB02F5 Ref Counting
