
(object Petal
    version    	50
    _written   	"Rose 2006.0.0.061205"
    charSet    	204)

(object Class_Category "UsersImport"
    is_unit    	TRUE
    is_loaded  	TRUE
    attributes 	(list Attribute_Set
	(object Attribute
	    tool       	"MDA Generator"
	    name       	"AbstarctOperation"
	    value      	"regular")
	(object Attribute
	    tool       	"MDA Generator"
	    name       	"IsNative"
	    value      	"false")
	(object Attribute
	    tool       	"MDA Generator"
	    name       	"SELF GENERATED FILE (cpp)"
	    value      	"w:/garant6x/implementation/Garant/UsersImportLib/UsersImport/UsersImport.cpp")
	(object Attribute
	    tool       	"MDA Generator"
	    name       	"SELF GENERATED FILE (fctr.cpp)"
	    value      	"w:/garant6x/implementation/Garant/UsersImportLib/UsersImport/UsersImportFactories.cpp")
	(object Attribute
	    tool       	"MDA Generator"
	    name       	"SELF GENERATED FILE (fctr.h)"
	    value      	"w:/garant6x/implementation/Garant/UsersImportLib/UsersImport/UsersImportFactories.h")
	(object Attribute
	    tool       	"MDA Generator"
	    name       	"SELF GENERATED FILE (h)"
	    value      	"w:/garant6x/implementation/Garant/UsersImportLib/UsersImport/UsersImport.h")
	(object Attribute
	    tool       	"MDA Generator"
	    name       	"WikiPageID (wiki)"
	    value      	(value Text 
|Nemesis,key:NMS,guid:442BEDF00290/Home/Модель проекта "garant6x"/UsersImportLib/UsersImport|481D6E5E02A5
	    ))
	(object Attribute
	    tool       	"MDA Generator"
	    name       	"SourceType (wiki)"
	    value      	"wiki")
	(object Attribute
	    tool       	"MDA Generator"
	    name       	"SourceType (h)"
	    value      	"file")
	(object Attribute
	    tool       	"MDA Generator"
	    name       	"SourceType (fctr.h)"
	    value      	"file")
	(object Attribute
	    tool       	"MDA Generator"
	    name       	"SourceType (fctr.cpp)"
	    value      	"file")
	(object Attribute
	    tool       	"MDA Generator"
	    name       	"SourceType (cpp)"
	    value      	"file")
	(object Attribute
	    tool       	"MDA Generator"
	    name       	"ElementCreationOrder"
	    value      	"19790831640"))
    quid       	"481D6E5E02A5"
    documentation 	"интерфейсы уутилиты"
    stereotype 	"Interfaces"
    visible_categories 	(list visibility_relationship_list
	(object Visibility_Relationship
	    quid       	"49EC4FFA028A"
	    supplier   	"Logical View::garantPIL::Core::GCD"
	    quidu      	"44D211530167"))
    exportControl 	"Public"
    logical_models 	(list unit_reference_list
	(object Class "DataReader"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"OS_GUID"
		    value      	"E1D35B32-B1D3-4EA5-B39A-EBD764468BE8")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"cpp:*481D6ED302D2_481D6F65009B_481D79380033_BASE_INIT*"
		    value      	"//#UC START# *481D6ED302D2_481D6F65009B_481D79380033_BASE_INIT*¤//#UC END# *481D6ED302D2_481D6F65009B_481D79380033_BASE_INIT*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"cpp:*481D6ED302D2_481D6F65009B_481D79380033_BODY*"
		    value      	(value Text 
|//#UC START# *481D6ED302D2_481D6F65009B_481D79380033_BODY*¤	this->read (source.c_str (), parser);¤	//#UC END# *481D6ED302D2_481D6F65009B_481D79380033_BODY*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"cpp:*481D6ED302D2_481D8BBE028C_481D79380033_BASE_INIT*"
		    value      	"//#UC START# *481D6ED302D2_481D8BBE028C_481D79380033_BASE_INIT*¤//#UC END# *481D6ED302D2_481D8BBE028C_481D79380033_BASE_INIT*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"cpp:*481D6ED302D2_481D8BBE028C_481D79380033_BODY*"
		    value      	(value Text 
|//#UC START# *481D6ED302D2_481D8BBE028C_481D79380033_BODY*¤	UsersImport::DataParser_var parser (UsersImport::DataParserFactory::make (0));¤	this->read (source.c_str (), parser.in ());¤	//#UC END# *481D6ED302D2_481D8BBE028C_481D79380033_BODY*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"WikiPageID (wiki)"
		    value      	(value Text 
|Nemesis,key:NMS,guid:442BEDF00290/Home/Модель проекта "garant6x"/UsersImportLib/UsersImport/DataReader|481D6ED302D2
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (wiki)"
		    value      	"wiki")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"19792734591"))
	    quid       	"481D6ED302D2"
	    documentation 	"чтение данных для импорта"
	    stereotype 	"Interface"
	    operations 	(list Operations
		(object Operation "make"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"abstract")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"19779808408"))
		    quid       	"481D6F65009B"
		    documentation 	"фабрика получает имя источника, откуда читать данные и разборщик, которому она будет эти данные скармливать"
		    stereotype 	"factory"
		    parameters 	(list Parameters
			(object Parameter "source"
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ResolvedTypeGuid"
				    value      	"452257A0036F")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ElementCreationOrder"
				    value      	"19779808728"))
			    quid       	"481D8F7701E1"
			    type       	"a-string"
			    quidu      	"452257A0036F")
			(object Parameter "inout parser"
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ResolvedTypeGuid"
				    value      	"481D6FC201FD")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ElementCreationOrder"
				    value      	"19779809079"))
			    quid       	"4820488A004E"
			    type       	"DataParser"
			    quidu      	"481D6FC201FD"))
		    concurrency 	"Sequential"
		    opExportControl 	"Public"
		    uid        	0)
		(object Operation "make"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"abstract")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"19779809482"))
		    quid       	"481D8BBE028C"
		    documentation 	"фабрика получает имя источника, откуда читать данные"
		    stereotype 	"factory"
		    parameters 	(list Parameters
			(object Parameter "source"
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ResolvedTypeGuid"
				    value      	"452257A0036F")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ElementCreationOrder"
				    value      	"19779809802"))
			    quid       	"481D8F7D0105"
			    type       	"a-string"
			    quidu      	"452257A0036F"))
		    concurrency 	"Sequential"
		    opExportControl 	"Public"
		    uid        	0))
	    language   	"MDA Generator")
	(object Class "DataParser"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"OS_GUID"
		    value      	"C7F3194A-4CE4-4A5A-84AF-DCE007438167")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"cpp:*481D6FC201FD_481D6FE701AC_481D797C02B3_BASE_INIT*"
		    value      	"//#UC START# *481D6FC201FD_481D6FE701AC_481D797C02B3_BASE_INIT*¤: m_delimiter (0), m_writer (writer)¤//#UC END# *481D6FC201FD_481D6FE701AC_481D797C02B3_BASE_INIT*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"cpp:*481D6FC201FD_481D6FE701AC_481D797C02B3_BODY*"
		    value      	(value Text 
|//#UC START# *481D6FC201FD_481D6FE701AC_481D797C02B3_BODY*¤	//#UC END# *481D6FC201FD_481D6FE701AC_481D797C02B3_BODY*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"WikiPageID (wiki)"
		    value      	(value Text 
|Nemesis,key:NMS,guid:442BEDF00290/Home/Модель проекта "garant6x"/UsersImportLib/UsersImport/DataParser|481D6FC201FD
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (wiki)"
		    value      	"wiki")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"19792736450"))
	    quid       	"481D6FC201FD"
	    documentation 	"разборщик данных"
	    stereotype 	"Interface"
	    operations 	(list Operations
		(object Operation "make"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"abstract")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"19779810704"))
		    quid       	"481D6FE701AC"
		    documentation 	"фабрика получает приёмник, в который будетзаписывать разобранные данные"
		    stereotype 	"factory"
		    parameters 	(list Parameters
			(object Parameter "inout writer"
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ResolvedTypeGuid"
				    value      	"481D707501DC")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ElementCreationOrder"
				    value      	"19779811002"))
			    quid       	"4820487F018F"
			    type       	"DataWriter"
			    quidu      	"481D707501DC"))
		    concurrency 	"Sequential"
		    opExportControl 	"Public"
		    uid        	0)
		(object Operation "parse"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"abstract")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"cpp:*481D776901DB_481D797C02B3*"
			    value      	(value Text 
|//#UC START# *481D776901DB_481D797C02B3*¤	UsersImport::UserData user_data;¤	size_t fields_count = this->parse_i (data, string_number, user_data);¤¤	while ( 1) {¤		try {¤			switch (user_data.action) {¤				case UsersImport::ADD_USER:¤					try {¤						m_writer->add_user (user_data);¤						return;¤					} catch (GslUserManager::NoMorePersistentUsers&) {¤						LOG_W (("CSV String (%d): maximum count of privileged users reached, add nonprivileged user", string_number));¤						user_data.privileged_status = false;¤					} catch (GslUserManager::LoginDuplicate&) {¤						LOG_E (("CSV String (%d) skipped: user <%s> already exists", string_number, user_data.login.c_str ()));¤						throw;¤					} ¤					break;¤				case UsersImport::CHANGE_USER:¤					try {¤						m_writer->change_user (user_data, fields_count);¤						return;¤					}  catch (GslUserManager::NoMorePersistentUsers&) {¤						LOG_W (("CSV String (%d): maximum count of privileged users reached, flag not changed", string_number));¤						user_data.privileged_status = false;¤					} catch (GCD::CanNotFindData&) {¤						LOG_W (("CSV String (%d): can't find modified user, create new one", string_number));¤						user_data.action = UsersImport::ADD_USER;¤					}¤					break;¤				case UsersImport::ERASE_USER:¤					try {¤						m_writer->erase_user (user_data);¤					} catch (GCD::CanNotFindData&) {¤						throw ErasedUserNotExists ();¤					} catch (GslUserManager::BadGUID&) {¤						throw ErasedUserNotExists ();¤					}¤					return;¤				default:¤					GDS_ASSERT (false);¤					return;¤			}¤		} catch (GCD::AccessDenied&) {¤			GDS_ASSERT (false);¤			return;¤		}¤	}¤	//#UC END# *481D776901DB_481D797C02B3*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"19779811411"))
		    quid       	"481D776901DB"
		    documentation 	"выполнить разбор данных, и записать их в заданный в конструкторе writer. string_num - номер разбираемой строки, нужен для вывода в лог."
		    stereotype 	"chg"
		    parameters 	(list Parameters
			(object Parameter "data"
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ResolvedTypeGuid"
				    value      	"452257A0036F")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ElementCreationOrder"
				    value      	"19779811745"))
			    quid       	"481DC1AB033D"
			    type       	"a-string"
			    quidu      	"452257A0036F")
			(object Parameter "string_number"
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ResolvedTypeGuid"
				    value      	"4538E9230233")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ElementCreationOrder"
				    value      	"19779812098"))
			    quid       	"482075430339"
			    type       	"size"
			    quidu      	"4538E9230233"))
		    concurrency 	"Sequential"
		    opExportControl 	"Public"
		    uid        	0))
	    language   	"MDA Generator")
	(object Class "DataWriter"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"OS_GUID"
		    value      	"3AD450F1-991E-4EB3-9DE4-394518C1C5D3")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"cpp:*481D707501DC_481D70BA00FF_481D7A0B00D7_BASE_INIT*"
		    value      	"//#UC START# *481D707501DC_481D70BA00FF_481D7A0B00D7_BASE_INIT*¤: GCM::GCMSimpleServer ()¤//#UC END# *481D707501DC_481D70BA00FF_481D7A0B00D7_BASE_INIT*")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"cpp:*481D707501DC_481D70BA00FF_481D7A0B00D7_BODY*"
		    value      	(value Text 
|//#UC START# *481D707501DC_481D70BA00FF_481D7A0B00D7_BODY*¤	register_receptacles (Defines::FN_USER_MANAGER);¤	register_receptacles (Defines::FN_GROUP_MANAGER);¤	register_receptacles (Defines::FN_FUNCTION_MNG);¤	//#UC END# *481D707501DC_481D70BA00FF_481D7A0B00D7_BODY*
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"WikiPageID (wiki)"
		    value      	(value Text 
|Nemesis,key:NMS,guid:442BEDF00290/Home/Модель проекта "garant6x"/UsersImportLib/UsersImport/DataWriter|481D707501DC
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (wiki)"
		    value      	"wiki")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"19792737622"))
	    quid       	"481D707501DC"
	    documentation 	"приёмник разобранных данных"
	    stereotype 	"Interface"
	    operations 	(list Operations
		(object Operation "make"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"abstract")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"19779812991"))
		    quid       	"481D70BA00FF"
		    documentation 	"фабрика"
		    stereotype 	"factory"
		    concurrency 	"Sequential"
		    opExportControl 	"Public"
		    uid        	0)
		(object Operation "add_user"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"abstract")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"cpp:*481D77ED00CE_481D7A0B00D7*"
			    value      	(value Text 
|//#UC START# *481D77ED00CE_481D7A0B00D7*¤	this->login ();¤¤	m_user_manager->create_user_with_rights (¤		user_data.name.c_str ()¤		, user_data.login.c_str ()¤		, user_data.password.c_str ()¤		, user_data.email.c_str ()¤		, this->convert_consulting_status_to_boolean (user_data.consulting_value)¤		, user_data.privileged_status¤		, user_data.group_id¤	);¤	//#UC END# *481D77ED00CE_481D7A0B00D7*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"19779813333"))
		    quid       	"481D77ED00CE"
		    documentation 	"записать данные"
		    stereotype 	"chg"
		    parameters 	(list Parameters
			(object Parameter "user_data"
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ResolvedTypeGuid"
				    value      	"481DB7840086")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ElementCreationOrder"
				    value      	"19779813649"))
			    quid       	"4C2DD33C0279"
			    type       	"UserData"
			    quidu      	"481DB7840086"))
		    concurrency 	"Sequential"
		    opExportControl 	"Public"
		    uid        	0)
		(object Operation "get_group_id"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"abstract")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"cpp:*49EC5A5C00C4_481D7A0B00D7*"
			    value      	(value Text 
|//#UC START# *49EC5A5C00C4_481D7A0B00D7*¤	this->login ();¤¤	if (m_groups_data.empty ()) {¤		this->get_groups_info ();¤	}¤	GroupsWithNames::iterator result = m_groups_data.find (name);¤	if (result != m_groups_data.end ()) {¤		return result->second;¤	}¤¤	try {¤		GCD::Uid group_id = m_group_manager->create_group (name.c_str ());¤		m_groups_data[name] = group_id;¤		return group_id;¤	}¤	catch (CORBA::Exception& ex) {¤		GDS_ASSERT (false);¤		LOG_CEXD ((ex, "can't create group %s, using default group", name.c_str ()));¤	}¤¤	return GCD::BaseUsersGroup;¤	//#UC END# *49EC5A5C00C4_481D7A0B00D7*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ResolvedTypeGuid"
			    value      	"45FFD5B6032C")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"19779814064"))
		    quid       	"49EC5A5C00C4"
		    documentation 	"получить идентификатор группы по её имени"
		    stereotype 	"chg"
		    parameters 	(list Parameters
			(object Parameter "name"
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ResolvedTypeGuid"
				    value      	"452257A0036F")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ElementCreationOrder"
				    value      	"19779814359"))
			    quid       	"49EC5AA802F0"
			    type       	"a-string"
			    quidu      	"452257A0036F"))
		    result     	"GCD::Uid"
		    concurrency 	"Sequential"
		    opExportControl 	"Public"
		    uid        	0)
		(object Operation "erase_user"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"abstract")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"cpp:*4C2DD3100050_481D7A0B00D7*"
			    value      	(value Text 
|//#UC START# *4C2DD3100050_481D7A0B00D7*¤	this->login ();¤¤	GCD::Uid uid = m_user_manager->login_to_uid (user_data.login.c_str ());¤	m_function_manager->delete_user (uid);¤	//#UC END# *4C2DD3100050_481D7A0B00D7*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"19779814755"))
		    quid       	"4C2DD3100050"
		    documentation 	"удалить пользователя"
		    stereotype 	"chg"
		    parameters 	(list Parameters
			(object Parameter "user_data"
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ResolvedTypeGuid"
				    value      	"481DB7840086")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ElementCreationOrder"
				    value      	"19779815054"))
			    quid       	"4C2DD32A0379"
			    type       	"UserData"
			    quidu      	"481DB7840086"))
		    concurrency 	"Sequential"
		    opExportControl 	"Public"
		    uid        	0)
		(object Operation "change_user"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"abstract")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"cpp:*4C2DD34902EE_481D7A0B00D7*"
			    value      	(value Text 
|//#UC START# *4C2DD34902EE_481D7A0B00D7*¤	GDS_ASSERT (fields_count > 1);¤¤	this->login ();¤¤	GCD::Uid uid = m_user_manager->login_to_uid (user_data.login.c_str ());¤¤	--fields_count; // login нам не нужен¤¤	switch (fields_count) {¤		case 6:		// group¤			try {¤				m_group_manager->change_group_for_user (uid, user_data.group_id);¤			} catch (...) {¤				GDS_ASSERT (false && "can't set group for user");¤			}¤		case 5:		// privileged¤			try {¤				GCD::UidList uid_list;¤				uid_list.length (1);¤				uid_list[0] = uid;¤				m_user_manager->set_user_list_permanent_property (uid_list, user_data.privileged_status);¤			} catch (GslUserManager::NoMorePersistentUsers&) {¤				throw;¤			} catch (...) {¤				GDS_ASSERT (false && "can't set permanent flag for user");¤			}¤		case 4:		// consulting¤			if (!boost::indeterminate (user_data.consulting_value)) {¤				try {¤					m_user_manager->set_user_payment_rights (uid, user_data.consulting_value);¤				} catch (...) {¤					GDS_ASSERT (false && "can't set consulting rights for user");¤				}¤			}¤		case 3:		// e-mail¤			try {¤				m_user_manager->change_user_info (uid, user_data.name.c_str (), user_data.email.c_str ());¤			} catch (...) {¤				GDS_ASSERT (false && "can't set user name and email");¤			}¤		case 2:		// passwd¤			try {¤				m_user_manager->change_user_password (uid, user_data.password.c_str ());¤			} catch (...) {¤				GDS_ASSERT (false && "can't set user password");¤			}¤		case 1:		// ФИО¤			if (fields_count < 3) { // если не установили ФИО ранее¤				try {¤					GslUserManager::UserInfo_var user_info (m_user_manager->get_user_info (uid));¤					if (!user_info.ptr ()) {¤						GDS_ASSERT (user_info.ptr () && "can't get user info");¤						return;¤					}¤¤					m_user_manager->change_user_info (uid, user_data.name.c_str (), user_info->m_mail);¤				} catch (...) {¤					GDS_ASSERT (false && "can't set user name");¤				}¤			}¤			break;¤		default:¤			GDS_ASSERT (false && "fields count too big");¤	}¤	//#UC END# *4C2DD34902EE_481D7A0B00D7*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"19779815456"))
		    quid       	"4C2DD34902EE"
		    documentation 	"сменить данные пользователя"
		    stereotype 	"chg"
		    parameters 	(list Parameters
			(object Parameter "user_data"
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ResolvedTypeGuid"
				    value      	"481DB7840086")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ElementCreationOrder"
				    value      	"19779815760"))
			    quid       	"4C2DD386026C"
			    type       	"UserData"
			    quidu      	"481DB7840086")
			(object Parameter "fields_count"
			    attributes 	(list Attribute_Set
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ResolvedTypeGuid"
				    value      	"4538E9230233")
				(object Attribute
				    tool       	"MDA Generator"
				    name       	"ElementCreationOrder"
				    value      	"19779816109"))
			    quid       	"4C2DEA8C0127"
			    type       	"size"
			    quidu      	"4538E9230233"))
		    concurrency 	"Sequential"
		    opExportControl 	"Public"
		    uid        	0))
	    language   	"MDA Generator")
	(object Class "UserData"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Need copy ctor"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"Need init ctor"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"force usage"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"need UC"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"need dctor"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator User Properties"
		    name       	"packed"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"WikiPageID (wiki)"
		    value      	(value Text 
|Nemesis,key:NMS,guid:442BEDF00290/Home/Модель проекта "garant6x"/UsersImportLib/UsersImport/UserData|481DB7840086
		    ))
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"SourceType (wiki)"
		    value      	"wiki")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"19779816704"))
	    quid       	"481DB7840086"
	    documentation 	"данные пользователя"
	    stereotype 	"Struct"
	    operations 	(list Operations
		(object Operation "make"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"cpp:*481DB9AA03A3_INIT_CTOR_BASE_INIT*"
			    value      	"//#UC START# *481DB9AA03A3_INIT_CTOR_BASE_INIT*¤: action (ADD_USER), consulting_value (boost::indeterminate), privileged_status (false), group_id (GCD::BaseUsersGroup)¤//#UC END# *481DB9AA03A3_INIT_CTOR_BASE_INIT*")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"cpp:*481DB9AA03A3_CTOR_BODY*"
			    value      	(value Text 
|//#UC START# *481DB9AA03A3_CTOR_BODY*¤	//#UC END# *481DB9AA03A3_CTOR_BODY*
			    ))
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"19779819960"))
		    quid       	"481DB9AA03A3"
		    documentation 	"конструктор по-умолчанию"
		    stereotype 	"ctor"
		    concurrency 	"Sequential"
		    opExportControl 	"Public"
		    uid        	0))
	    class_attributes 	(list class_attribute_list
		(object ClassAttribute "login"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ValueInitialized"
			    value      	"true")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ResolvedTypeGuid"
			    value      	"452257A0036F")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"19779816970"))
		    quid       	"481DB7AF01B9"
		    documentation 	"регистрационное имя, обязательный параметр, уникальное значение, длина - не более 32 знаков"
		    type       	"a-string"
		    quidu      	"452257A0036F"
		    exportControl 	"Public"
		    Containment 	"By Value")
		(object ClassAttribute "name"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ValueInitialized"
			    value      	"true")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ResolvedTypeGuid"
			    value      	"452257A0036F")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"19779817326"))
		    quid       	"481DB8100234"
		    documentation 	"ФИО пользователя, обязательный параметр, длина - не более 255 знаков"
		    type       	"a-string"
		    quidu      	"452257A0036F"
		    exportControl 	"Public"
		    Containment 	"By Value")
		(object ClassAttribute "password"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ValueInitialized"
			    value      	"true")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ResolvedTypeGuid"
			    value      	"452257A0036F")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"19779817699"))
		    quid       	"481DB8300274"
		    documentation 	"пароль пользователя, необязательный параметр, длина - не более 255 знаков"
		    type       	"a-string"
		    quidu      	"452257A0036F"
		    exportControl 	"Public"
		    Containment 	"By Value")
		(object ClassAttribute "email"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ValueInitialized"
			    value      	"true")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ResolvedTypeGuid"
			    value      	"452257A0036F")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"19779818060"))
		    quid       	"481DB84F005B"
		    documentation 	
|email пользователя, необязательный параметр, если указан, в нем обязательно должны быть "@" и "."
		    
		    type       	"a-string"
		    quidu      	"452257A0036F"
		    exportControl 	"Public"
		    Containment 	"By Value")
		(object ClassAttribute "consulting_value"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ValueInitialized"
			    value      	"true")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ResolvedTypeGuid"
			    value      	"460ABDFA0377")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"19779818453"))
		    quid       	"481DB87903B7"
		    documentation 	
|право использования услуги Правового консалтинга, необязательный параметр, возможные значения ('','0','1'): "значение не указано" (по умолчанию) - право наследуется в соответствии с групповой настройкой политик на право доступа к консультациям для новых пользователей, "0" - запрещено, "1" - разрешено.
		    
		    type       	"tribool"
		    quidu      	"460ABDFA0377"
		    exportControl 	"Public"
		    Containment 	"By Value")
		(object ClassAttribute "privileged_status"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ValueInitialized"
			    value      	"true")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ResolvedTypeGuid"
			    value      	"3DBFFE100240")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"19779818815"))
		    quid       	"481DB8990242"
		    documentation 	
|свойство привилегированности пользователя , необязательный параметр, возможные значения ('','0','1'): "значение не указано" (по умолчанию) - не привилегированный пользователь, "0" - не привилегированный пользователь, "1" - привилегированный пользователь.
		    
		    type       	"boolean"
		    quidu      	"3DBFFE100240"
		    exportControl 	"Public"
		    Containment 	"By Value")
		(object ClassAttribute "group_id"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"final")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ValueInitialized"
			    value      	"true")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ResolvedTypeGuid"
			    value      	"45FFD5B6032C")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"19779819172"))
		    quid       	"49EC4F870004"
		    documentation 	"идентификатор группы пользователя"
		    type       	"GCD::Uid"
		    exportControl 	"Public"
		    Containment 	"By Value")
		(object ClassAttribute "action"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"final")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ValueInitialized"
			    value      	"true")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ResolvedTypeGuid"
			    value      	"4C2D917400DC")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"19779819585"))
		    quid       	"4C2D930D016B"
		    type       	"ActionType"
		    quidu      	"4C2D917400DC"
		    exportControl 	"Public"
		    Containment 	"By Value"))
	    language   	"MDA Generator")
	(object Class "ActionType"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"AbstarctOperation"
		    value      	"regular")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsNative"
		    value      	"false")
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"ElementCreationOrder"
		    value      	"19779820506"))
	    quid       	"4C2D917400DC"
	    documentation 	"тип действия"
	    stereotype 	"Enum"
	    class_attributes 	(list class_attribute_list
		(object ClassAttribute "ADD_USER"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ValueInitialized"
			    value      	"true")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"19779820765"))
		    quid       	"4C2D91840100"
		    documentation 	"добавить пользователя (умолчательное значение)"
		    exportControl 	"Public"
		    Containment 	"By Value")
		(object ClassAttribute "ERASE_USER"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ValueInitialized"
			    value      	"true")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"19779821114"))
		    quid       	"4C2D92D9026E"
		    documentation 	"удалить пользователя"
		    exportControl 	"Public"
		    Containment 	"By Value")
		(object ClassAttribute "CHANGE_USER"
		    attributes 	(list Attribute_Set
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"AbstarctOperation"
			    value      	"regular")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ValueInitialized"
			    value      	"true")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"IsNative"
			    value      	"false")
			(object Attribute
			    tool       	"MDA Generator"
			    name       	"ElementCreationOrder"
			    value      	"19779821496"))
		    quid       	"4C2D92EA02E4"
		    documentation 	"изменить данные пользователя"
		    exportControl 	"Public"
		    Containment 	"By Value"))
	    language   	"MDA Generator"))
    logical_presentations 	(list unit_reference_list
	(object ClassDiagram "Main"
	    attributes 	(list Attribute_Set
		(object Attribute
		    tool       	"MDA Generator"
		    name       	"IsChanged"
		    value      	""))
	    quid       	"481D6EC902BB"
	    title      	"Main"
	    zoom       	100
	    max_height 	28350
	    max_width  	21600
	    origin_x   	0
	    origin_y   	0
	    items      	(list diagram_item_list
		(object ClassView "Class" "Logical View::garant6x::UsersImportLib::UsersImport::DataReader" @1
		    ShowCompartmentStereotypes 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(744, 341)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@1
			location   	(168, 261)
			fill_color 	13434879
			nlines     	1
			max_width  	1152
			justify    	0
			label      	"DataReader")
		    stereotype 	(object ItemLabel
			Parent_View 	@1
			location   	(168, 211)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	1152
			justify    	0
			label      	"<<Interface>>")
		    icon       	"Interface"
		    icon_style 	"Label"
		    fill_color 	16766935
		    quidu      	"481D6ED302D2"
		    width      	1170
		    height     	284
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::garant6x::UsersImportLib::UsersImport::DataParser" @2
		    ShowCompartmentStereotypes 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(652, 703)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@2
			location   	(170, 623)
			fill_color 	13434879
			nlines     	1
			max_width  	964
			justify    	0
			label      	"DataParser")
		    stereotype 	(object ItemLabel
			Parent_View 	@2
			location   	(170, 573)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	964
			justify    	0
			label      	"<<Interface>>")
		    icon       	"Interface"
		    icon_style 	"Label"
		    fill_color 	16766935
		    quidu      	"481D6FC201FD"
		    width      	982
		    height     	284
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::garant6x::UsersImportLib::UsersImport::DataWriter" @3
		    ShowCompartmentStereotypes 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(800, 1106)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@3
			location   	(201, 956)
			fill_color 	13434879
			nlines     	1
			max_width  	1198
			justify    	0
			label      	"DataWriter")
		    stereotype 	(object ItemLabel
			Parent_View 	@3
			location   	(201, 906)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	1198
			justify    	0
			label      	"<<Interface>>")
		    icon       	"Interface"
		    icon_style 	"Label"
		    fill_color 	16766935
		    quidu      	"481D707501DC"
		    width      	1216
		    height     	424
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::garant6x::UsersImportLib::UsersImport::UserData" @4
		    ShowCompartmentStereotypes 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(1973, 512)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@4
			location   	(1706, 253)
			fill_color 	13434879
			nlines     	1
			max_width  	534
			justify    	0
			label      	"• UserData")
		    stereotype 	(object ItemLabel
			Parent_View 	@4
			location   	(1706, 203)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	534
			justify    	0
			label      	"<<Struct>>")
		    icon_style 	"Label"
		    fill_color 	13821680
		    quidu      	"481DB7840086"
		    width      	552
		    height     	642
		    annotation 	8
		    autoResize 	TRUE)
		(object ClassView "Class" "Logical View::garant6x::UsersImportLib::UsersImport::ActionType" @5
		    ShowCompartmentStereotypes 	TRUE
		    SuppressOperation 	TRUE
		    IncludeAttribute 	TRUE
		    IncludeOperation 	TRUE
		    ShowOperationSignature 	TRUE
		    location   	(1891, 1023)
		    font       	(object Font
			size       	10
			face       	"Arial"
			charSet    	204
			bold       	FALSE
			italics    	FALSE
			underline  	FALSE
			strike     	FALSE
			color      	0
			default_color 	TRUE)
		    label      	(object ItemLabel
			Parent_View 	@5
			location   	(1711, 939)
			fill_color 	13434879
			nlines     	1
			max_width  	360
			justify    	0
			label      	"ActionType")
		    stereotype 	(object ItemLabel
			Parent_View 	@5
			location   	(1711, 889)
			fill_color 	13434879
			anchor     	10
			nlines     	1
			max_width  	360
			justify    	0
			label      	"<<Enum>>")
		    icon_style 	"Label"
		    fill_color 	13821680
		    quidu      	"4C2D917400DC"
		    width      	378
		    height     	292
		    annotation 	8
		    autoResize 	TRUE)))))
